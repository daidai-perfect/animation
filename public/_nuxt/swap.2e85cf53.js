import{_ as dn}from"./refresh-icon.b13876a5.js";import{_ as cn}from"./assets-card.5d1524c1.js";import{e as fe,b as je,u as Ue,c as so,d as be,s as le,h as K,w as He,j as he,D as Xe,f as Ro,a as mn,Y as vn,l as fn,o as Qe,p as No}from"./pool.98cd8129.js";import{e as Ee,a as Ve,J as $o,L as Oo,r as C,m as R,D as te,q as Fe,o as i,f as h,h as o,c as X,x as T,t as x,j as J,v as d,z as ae,F as Te,u as Q,S as Bo,N as Mo,p as Le,k as De,a5 as hn,i as Ce,w as ce,V as To,R as jo,T as Uo,s as Po,B as Eo,b as pn,l as gn,y as Cn,C as bn,a8 as ze}from"./entry.8f072e6e.js";import"./index.0d126e95.js";/* empty css              */import{i as pe}from"./import-icon.de3e6c66.js";import{D as a}from"./decimal.0bdeb344.js";import{_ as wn}from"./route-view.818cd631.js";import{_ as kn}from"./network-tips.b06d3eb4.js";import{_ as An}from"./coin-select.8cfa76d2.js";import{_ as yn}from"./swap-setting.eacd4322.js";/* empty css              */import{_ as Sn}from"./token-warning-modal.7a10bacb.js";import{_ as _n}from"./img-leverage_2x.1c577303.js";/* empty css              */import"./token-warning.f6756045.js";/* empty css              */import"./token-warning_2x.90971ed9.js";import"./img-no-Positions_2x.91d036c8.js";import"./img-no-Positions_2x.b9fc7341.js";/* empty css              */import"./icon-warning_2x.4e83bc6c.js";import"./icon-error_2x.6f2ac967.js";import"./icon-selected_3x.09e9a6f0.js";async function In(e,p){var E,q,c;const I=e==="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":e,v=`${fe.Sui.api}/v2/sui/coin/kline?coin_address=${I}&interval=day&market=${p}`;try{const P=await $fetch(v);return{price:((q=(E=P==null?void 0:P.data)==null?void 0:E.list)==null?void 0:q.reverse())||[],daily_rate:(c=P==null?void 0:P.data)==null?void 0:c.daily_rate.replace("%","")}}catch{return{price:[],daily_rate:""}}}async function Nn(e){try{const{prices:p}=await $fetch(`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&id=${e}&days=7&interval=daily`,{headers:{Connection:"keep-alive",Accept:"*/*"}}),v=(await $fetch(`https://api.coingecko.com/api/v3/coins/markets?ids=${e}&vs_currency=usd&price_change_percentage=24h`,{headers:{Connection:"keep-alive",Accept:"*/*"}}))[0].price_change_percentage_24h,E=[];return p.forEach(q=>{E.push({price:new a(q[1]).toString(),timestamp:q[0]})}),{price:E,daily_rate:v}}catch{return{price:[],daily_rate:""}}}const Pn=Ve({props:{swapLoading:{type:Boolean,default:!1},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},impact:{type:String,default:""},insufficientLiquidity:{type:Boolean,default:!1},oneToAmount:{type:String,default:""},oneFromAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})},suiSwapFee:{type:String,default:""},swapRouterLoading:{type:Boolean,default:!1}},setup(e){const p=$o(Oo,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),I=C(!1),v=je(),E=R(()=>v),q=R(()=>E.value.slippage),c=R(()=>E.isShowRouterModal),P=Ue(),k=R(()=>P),Z=so("Sui"),G=C(0),ee=C([]),_=C({});te(()=>e.suiPreSwapdata,async n=>{var s;if(n&&!be(n)){let w=[];(s=n==null?void 0:n.splitPaths)==null||s.forEach(O=>{O==null||O.basePaths.forEach(async W=>{w.push(W.label)})});const{splitPaths:g}=n,N=g&&g[0]&&g[0].basePaths;if(g&&g.length==1&&N&&N.length==2){const O=N[0].toCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":N[0].toCoin;_.value=k.value.tokensObj[O]||(await Z.getTokenListByCoinType[O])[0]}else _.value="";ee.value=Array.from(new Set(w)),G.value=ee.value.length}},{immediate:!0});const U=C(0),r=C(0);te(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,q.value],([n,s,w,g,N,O])=>{if(n&&s&&w&&g&&O)if(N){const W=new a(s).mul(new a(O/100));r.value=new a(s).sub(W).toString()}else{const W=new a(n).mul(new a(O/100));U.value=new a(n).add(W).toString()}},{immediate:!0});const oe=n=>{var s;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((s=k.value.tokensObj[n==null?void 0:n.address])==null?void 0:s.logo_url)||(E.theme==="default"?pe("/image/coins/unknown.png"):pe("/image/coins/sui-unknown.png"))},se=R(()=>{var n,s,w,g,N,O,W,S,Y;return(w=(s=k==null?void 0:k.value)==null?void 0:s.tokensObj[(n=e.fromCoin)==null?void 0:n.address])!=null&&w.pyth_id&&((O=(N=k==null?void 0:k.value)==null?void 0:N.tokensObj[(g=e.fromCoin)==null?void 0:g.address])==null?void 0:O.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(Y=(S=k==null?void 0:k.value)==null?void 0:S.tokensObj[(W=e.fromCoin)==null?void 0:W.address])!=null&&Y.coingecko_id?"coingecko":null}),A=R(()=>{var n,s,w,g,N,O,W,S,Y;return(w=(s=k==null?void 0:k.value)==null?void 0:s.tokensObj[(n=e.toCoin)==null?void 0:n.address])!=null&&w.pyth_id&&((O=(N=k==null?void 0:k.value)==null?void 0:N.tokensObj[(g=e.toCoin)==null?void 0:g.address])==null?void 0:O.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(Y=(S=k==null?void 0:k.value)==null?void 0:S.tokensObj[(W=e.toCoin)==null?void 0:W.address])!=null&&Y.coingecko_id?"coingecko":null}),V=C(""),F=async()=>{const n=k.value.tokenExternalPriceObj[e.fromCoin.address],s=k.value.tokenExternalPriceObj[e.toCoin.address];if(n&&s){const w=new a(n).div(new a(s)),g=new a(e.oneToAmount.replace(new RegExp(/,/g),"")).sub(w).div(w).mul(100);let N=Math.abs(le(g,2));w.toNumber()<Number(e.oneToAmount.replace(new RegExp(/,/g),""))?V.value="":(V.value=g>0&&g<=.01?"0.01":N,console.log(n,s,g.toString(),"##367"))}else V.value=""},b=n=>{if(n<5)return"color-s";if(n>=5&&n<10)return"color-w";if(n>=10)return"color-e"};return te(()=>[e.oneToAmount,k.value.tokenExternalPriceObj],([n,s])=>{n&&s&&!be(s)&&F()},{immediate:!0,deep:!0}),{sFixD:le,getCoinIcon:oe,indicator:p,rateChange:I,slippage:q,isShowRouterModal:c,indexStore:v,maximumSold:U,minimumReceived:r,addCommom:K,pathLength:G,sourcesArr:ee,coinTypeB:_,priceExangeRate:V,getTextColor:b,formCoinMarket:se,toCoinMarket:A}}}),re=e=>(Le("data-v-313b8a7f"),e=e(),De(),e),Rn={key:0,class:"swap-info"},$n={class:"loading-swap"},On={key:1,class:"swap-rate"},Bn={key:0},Mn={key:0,class:"after-amount"},Tn={key:1},jn={key:0,class:"after-amount"},Un=re(()=>o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})],-1)),En=re(()=>o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})],-1)),Fn=[Un,En],Ln={key:2,class:"swap-exchange-rate"},Dn={class:"swap-exchange-rate-content"},Wn={key:0},Yn=["href"],Jn=re(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),qn=[Jn],Zn={key:1},Kn=["href"],Xn=re(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Qn=[Xn],zn={key:0},Hn=["href"],Vn=re(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Gn=[Vn],xn={key:1},et=["href"],ot=re(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),nt=[ot],tt={key:2},st=["href"],at=re(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),it=[at],lt={key:3},rt=["href"],ut=re(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),dt=[ut],ct={key:3},mt={class:"trade-info"},vt={class:"trade-block"},ft=re(()=>o("div",{class:"lebal"},"Price Impact",-1)),ht={key:0,class:"icon","aria-hidden":"true"},pt=re(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),gt=[pt],Ct={class:"trade-block"},bt={class:"lebal"},wt={key:0,class:"text"},kt={class:"trade-block"},At=re(()=>o("div",{class:"lebal"},"Fee",-1)),yt={key:0,class:"text"},St={key:0,class:"trade-block"},_t=re(()=>o("div",{class:"lebal"},"Route",-1)),It={key:0,class:"text text-box"},Nt=["src"],Pt=["src"],Rt={key:1,class:"text text-box"},$t=["src"],Ot=["src"],Bt=re(()=>o("img",{src:wn,alt:""},null,-1));function Mt(e,p,I,v,E,q){var Z,G,ee,_;const c=Bo,P=Mo,k=Fe("image");return e.swapLoading||Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&!e.insufficientLiquidity?(i(),h("div",Rn,[o("div",$n,[e.swapLoading||e.swapRouterLoading?(i(),X(c,{key:0,size:"small",indicator:e.indicator},null,8,["indicator"])):T("",!0),e.swapLoading?T("",!0):(i(),h("div",On,[e.rateChange?(i(),h("span",Tn,[e.fromCoinAmount&&e.toCoinAmount?(i(),h("span",jn,[x(o("img",null,null,512),[[k,e.getCoinIcon(e.toCoin)]]),J(" 1 "+d(e.toCoin.symbol)+" â‰ˆ ",1),x(o("img",null,null,512),[[k,e.getCoinIcon(e.fromCoin)]]),J(d(e.oneFromAmount==1/0?0:e.oneFromAmount)+" "+d(e.fromCoin.symbol),1)])):(i(),X(c,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(i(),h("span",Bn,[x(o("img",null,null,512),[[k,e.getCoinIcon(e.fromCoin)]]),J(" 1 "+d(e.fromCoin.symbol)+" â‰ˆ ",1),e.fromCoinAmount&&e.toCoinAmount?(i(),h("span",Mn,[x(o("img",null,null,512),[[k,e.getCoinIcon(e.toCoin)]]),J(d(e.oneToAmount==1/0?0:e.oneToAmount)+" "+d(e.toCoin.symbol),1)])):(i(),X(c,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"right",onClick:p[0]||(p[0]=U=>e.rateChange=!e.rateChange)},Fn)])),!e.swapLoading&&e.priceExangeRate!==""&&e.priceExangeRate>10?(i(),h("div",Ln,[o("div",Dn,[o("p",null,[o("span",{class:ae(e.getTextColor(e.priceExangeRate))},"Within ~"+d(e.priceExangeRate)+"% of",3)]),e.formCoinMarket=="pyth"&&e.toCoinMarket=="pyth"?(i(),h("span",Wn,[J("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.fromCoin.pyth_id}&ids[]=${e.toCoin.pyth_id}`,target:"_blank"},qn,8,Yn)])):e.formCoinMarket=="coingecko"&&e.toCoinMarket=="coingecko"?(i(),h("span",Zn,[J("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.fromCoin.coingecko_id},${e.toCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},Qn,8,Kn)])):e.formCoinMarket!==e.toCoinMarket?(i(),h(Te,{key:2},[e.formCoinMarket=="pyth"?(i(),h("span",zn,[J("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.fromCoin.pyth_id}`,target:"_blank"},Gn,8,Hn)])):e.formCoinMarket=="coingecko"?(i(),h("span",xn,[J("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.fromCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},nt,8,et)])):T("",!0),e.toCoinMarket=="coingecko"?(i(),h("span",tt,[J("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.toCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},it,8,st)])):e.toCoinMarket=="pyth"?(i(),h("span",lt,[J("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.toCoin.pyth_id}`,target:"_blank"},dt,8,rt)])):T("",!0)],64)):T("",!0)])])):e.swapLoading?(i(),h("span",ct,"Best route and price")):T("",!0)]),o("div",mt,[o("div",vt,[ft,e.swapRouterLoading?(i(),X(P,{key:1,paragraph:!1,active:""})):(i(),h("div",{key:0,class:ae(["text",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[J(d(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(i(),h("svg",ht,gt)):T("",!0)],2))]),o("div",Ct,[o("div",bt,d(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swapRouterLoading?(i(),X(P,{key:1,paragraph:!1,active:""})):(i(),h("div",wt,d(e.fixedFromCoin?("addCommom"in e?e.addCommom:Q(K))(("sFixD"in e?e.sFixD:Q(le))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:Q(K))(("sFixD"in e?e.sFixD:Q(le))(e.maximumSold,e.fromCoin.decimals)))+" "+d(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",kt,[At,e.swapRouterLoading?(i(),X(P,{key:1,paragraph:!1,active:""})):(i(),h("div",yt,d(e.suiSwapFee)+" "+d(e.fromCoin.symbol),1))]),e.insufficientLiquidity?T("",!0):(i(),h("div",St,[_t,e.swapRouterLoading?(i(),X(P,{key:1,paragraph:!1,active:""})):(i(),h("div",{key:0,class:"text",onClick:p[1]||(p[1]=U=>e.indexStore.setIsShowRouterModal(!e.isShowRouterModal))},[!e.swapRouterLoading&&e.suiPreSwapdata&&e.suiPreSwapdata.splitPaths&&e.suiPreSwapdata.splitPaths.length==1?(i(),h("div",It,[o("span",null,d(e.fromCoin.symbol)+" "+d(e.coinTypeB&&((Z=e.coinTypeB)!=null&&Z.symbol)?`> ${(G=e.coinTypeB)==null?void 0:G.symbol}`:"")+" > "+d(e.toCoin.symbol),1),o("img",{src:e.sourcesArr[0]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,Nt),e.sourcesArr[1]?(i(),h("img",{key:0,src:e.sourcesArr[1]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,Pt)):T("",!0)])):e.swapRouterLoading?T("",!0):(i(),h("div",Rt,[J(d((_=(ee=e.suiPreSwapdata)==null?void 0:ee.splitPaths)==null?void 0:_.length)+" Streams ",1),e.sourcesArr[0]?(i(),h("img",{key:0,src:e.sourcesArr[0]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,$t)):T("",!0),e.sourcesArr[1]?(i(),h("img",{key:1,src:e.sourcesArr[1]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,Ot)):T("",!0)])),Bt]))]))])])):T("",!0)}const Tt=Ee(Pn,[["render",Mt],["__scopeId","data-v-313b8a7f"]]),jt={props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""},market:{type:String,default:""}},setup(e,p){const{$echarts:I}=hn();let v=null,E;const q=C(!0),c=je(),P=R(()=>c),k=R(()=>P.value.chainName),Z=R(()=>fe[k.value]),G=Ue(),ee=R(()=>G),_=(n,s,w)=>{E={xAxis:{type:"category",boundaryGap:!1,show:!1,data:s},yAxis:{type:"value",show:!1,min:function(g){return g.min-g.min*.1},max:function(g){return g.max+g.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:P.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function(g){return`<div class="chart-tip">
              <div>${g&&g[0]&&g[0].name}</div>
              <div>$${he(g&&g[0]&&g[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:P.value.chainName=="Aptos"?"#0C4535":"#2E546D"},{offset:1,color:P.value.chainName=="Aptos"?"#151817":"#1B1B1B"}]},series:[{data:n,type:"line",showSymbol:!1,areaStyle:{},lineStyle:{color:P.value.chainName=="Aptos"?"#68FFD8":"#76C8FF",width:2,type:"solid"}}]},E&&v.clear(),E&&v.setOption(E,!0),v.resize(),q.value=!1},U=C(""),r=C(""),oe=async n=>{var W,S,Y;const s=[],w=[],{price:g,daily_rate:N}=k.value==="Aptos"?await Nn(n):await In(n,e.market);k.value=="Sui"&&G.setTokenExternalPrice(e.coin.address,(W=g[g.length-1])==null?void 0:W.price),U.value=N,r.value=g&&g.length>=1&&g[g.length-1].price,k.value==="Aptos"?g.forEach(l=>{s.push(l.price);const m=Xe(Number(l.timestamp),"MD"),ve=Xe(Number(l.timestamp),"HM");w.push(m+" "+ve)}):g.forEach(l=>{s.push(l.price);const m=Xe(new a(l.timestamp).mul(1e3).toNumber(),"MD"),ve=Xe(new a(l.timestamp).mul(1e3).toNumber(),"HM");w.push(m+" "+ve)});let O=document.getElementById(`main${(S=e.coin)==null?void 0:S.name}`);v=I.init(O),_(s,w,(Y=e.coin)==null?void 0:Y.name)};te(()=>e.id,(n,s)=>{n&&(U.value="",r.value="",setTimeout(()=>{oe(n)},1e3))},{immediate:!0});const se=C(""),A=C(""),V=C(""),F=C("");return te(()=>[ee.value.tokensObj,e.coin],([n,s])=>{var w,g;n&&s&&n[s.address]&&(A.value=((w=n[s.address])==null?void 0:w.labels)&&((g=n[s.address])==null?void 0:g.labels[0]),se.value=n[s.address].name,V.value=n[s.address].symbol,F.value=n[s.address].address)},{immediate:!0,deep:!0}),te(()=>e.refresh,n=>{n&&oe(e.id)}),{theme:R(()=>P.value.theme),store:c,importIcon:pe,fixD:He,config:Z,price_rate_24h:U,nowPrice:r,coinName:se,coinLabels:A,coinSymbol:V,address:F,decimalUi:he}}},Ut="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAk1BMVEUAAADn2v/m2//r2//v4//n2v/55P/n2v/o3P//+P/m2v/n2f/n2v/n2v/n2v/n2v/n2v/o2//p2//n3f/o3v/n2f/n2v/n2v/n2v/n2v/n2//o2v/q3f/r4f/u3f/n2v/o2v/n2//p3P/o3P/m2v/n2v/n2f/n2v/o2f/n2//r3f/t3P/n2v/m2v/o2v/r3v/m2f/tUDLHAAAAMHRSTlMAl5oyFNMJqSwFhvvr5d7Yr2FGNSD0zb2lkIltOhkOxoJoT0D48aJzWFYlHeB8Wief0nHAAAABSElEQVQ4y52Q53LCMBCEZWK5g0swBpveQknZ93+6rFxAHkSYyf6x9+67JqHLKxOZRzJJbWHStkCn0Fo8pG0XuvJv0dciBjVZb+dZeoxABb38MlbpXeucr5z2QwdUf8vX1h0ByLT9aAeCGlez4Ozw5zoE4nvFBJB0yymUhqp0B2DT5ec0O+YlWlUMJsCqAwJA8jNV1W4RAnuvqepeYwWsOR/AkfM9ji8YjYBTC3wCZyEq1jvKnoCQP8X90j0wF2IGuM2jArjUE8sWAPAmxACwavtDf623XJsBtoqa2zcm4MI8Ag7iNZkBeAcVc8cUOPhPgJjP4I/UzkYgKtWxpQqaAGfMvvUATIUBaOQHAEb2M2CZcj4OnrhJasDYXYVQ9Vpe2LJ/BeWyf4/oAXlC25e9uI0IqswRJulX/BOwXgG2JPCCIPA3sXmM/QK1PTc8LGCPoAAAAABJRU5ErkJggg==",Et="data:image/png;base64,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",Ft="data:image/png;base64,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";const Lt=e=>(Le("data-v-e4cfffe1"),e=e(),De(),e),Dt={class:"token-info"},Wt={class:"token-info-padding"},Yt={class:"token-info-header"},Jt={class:"left"},qt=["onerror"],Zt={class:"name"},Kt={class:"desc"},Xt={key:0},Qt={class:"right"},zt={class:"price-info"},Ht={key:0,src:Ut,alt:""},Vt={key:1,src:Et,alt:""},Gt={key:2,src:Ft,alt:""},xt={class:"token-info-footer"},es={class:"left"},os={class:"address"},ns={key:0,class:"pc-address"},ts={key:1,class:"pc-address"},ss={class:"h5-address"},as=Lt(()=>o("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),is=[as],ls={class:"right"},rs=["id"];function us(e,p,I,v,E,q){var k;const c=To,P=Fe("image");return i(),h("div",Dt,[o("div",Wt,[o("div",Yt,[o("div",Jt,[x(o("img",{onerror:v.theme=="default"?v.importIcon("/image/coins/unknown.png"):v.importIcon("/image/coins/sui-unknown.png")},null,8,qt),[[P,I.coin.logoURI||v.importIcon(`/image/coins/${I.coin.symbol.toLowerCase()}.png`)]]),o("div",null,[o("div",Zt,d(v.coinSymbol),1),o("div",Kt,[o("span",null,[J(d(v.coinName)+" ",1),v.theme!=="sui"?(i(),h("span",Xt,d(v.coinLabels?`(${v.coinLabels})`:""),1)):T("",!0)])])])]),o("div",Qt,[Ce(c,{placement:"top","arrow-point-at-center":""},{title:ce(()=>[J(d(I.market==="pyth"?"Data source: Pyth Network":I.market==="coingecko"?"Data source: CoinGecko":"Data source: Birdeye"),1)]),default:ce(()=>[o("div",zt,[I.market==="pyth"?(i(),h("img",Ht)):I.market==="coingecko"?(i(),h("img",Vt)):I.market==="birdeye"?(i(),h("img",Gt)):T("",!0),o("span",null,"$"+d(v.nowPrice?Number(v.nowPrice)<1?v.decimalUi(v.nowPrice,4):v.fixD(v.nowPrice,2):"--"),1),v.price_rate_24h?(i(),h("i",{key:3,class:ae(v.price_rate_24h>0?"up":v.price_rate_24h<0?"down":"up")},d(v.price_rate_24h>0?`+ ${v.fixD(v.price_rate_24h,2)}`:v.price_rate_24h<0?+`${v.fixD(v.price_rate_24h,2)}`:`+${v.fixD(v.price_rate_24h,2)}`)+"%",3)):T("",!0)])]),_:1})])]),o("div",xt,[o("div",es,[o("div",os,[I.coin&&v.address!=="0x2::sui::SUI"?(i(),h("span",ns,d(I.coin&&I.coin.address.substr(0,13))+" ... "+d(I.coin&&I.coin.address.substr(I.coin.address.length-13,13)),1)):(i(),h("span",ts,d(I.coin&&I.coin.address),1)),o("span",ss,d(I.coin&&I.coin.address.substr(0,4))+" ... "+d(I.coin&&I.coin.address.substr(I.coin.address.length-4,4)),1),(i(),h("svg",{class:"icon","aria-hidden":"true",onClick:p[0]||(p[0]=Z=>v.store.copy(I.coin&&I.coin.address))},is))])]),o("div",ls,[o("div",{id:`main${(k=I.coin)==null?void 0:k.name}`,class:"main"},null,8,rs)])])])])}const ds=Ee(jt,[["render",us],["__scopeId","data-v-e4cfffe1"]]);const cs=Ve({components:{Modal:jo},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e){const p=Ue(),I=so("Sui"),v=R(()=>p);R(()=>{var _,U;return(U=(_=v.value)==null?void 0:_.poolInfo)==null?void 0:U.needReverse});const E=C([]),q=C({});te(()=>[e.suiPreSwapdata,e.fromCoin,e.toCoin],async([_,U,r])=>{if(_&&!be(_)){let oe=[];_.splitPaths.sort((b,n)=>n.outputAmount-b.outputAmount);for(let b=0;b<_.splitPaths.length;b++){const n=_.splitPaths[b],s={...n,amountIn:new a(n.inputAmount).div(new a(Math.pow(10,U.decimals))).toString(),amountOut:new a(n.outputAmount).div(new a(Math.pow(10,r.decimals))).toString()};let w=[];for(let g=0;g<n.basePaths.length;g++){const N=n.basePaths[g],O=N.fromCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":N.fromCoin,W=N.toCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":N.toCoin,S=v.value.tokensObj[O]||(await I.getTokenListByCoinType([O]))[0],Y=v.value.tokensObj[W]||(await I.getTokenListByCoinType([W]))[0];console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-router-modal.vue:252 ~ watch ~ pools.value.routerPoolConfigObj[basePath.poolAddress]:",v.value.routerPoolConfigObj[N.poolAddress]),(N==null?void 0:N.label)=="Deepbook"?w.push({...N,...v.value.routerPoolConfigObj[N.poolAddress],feeRate:new a(N.feeRate).div(new a(Math.pow(10,9))),token_a:S,token_b:Y}):w.push({...N,...v.value.routerPoolConfigObj[N.poolAddress],feeRate:new a(N.feeRate).div(new a(Math.pow(10,6)))})}oe.push({...s,basePaths:w})}E.value=oe,console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-router-modal.vue:271 ~ watch ~ routerArr:",oe);const se=[];let A=new a(0);oe.forEach(b=>{const n=new a(b.percent).gt(0)?new a(b.percent).div(100).mul(100).toString():0,s=le(n,2);A=A.plus(s);const w=s.split(".");se.push({value:s,int:w[0],decimal:w[1],pathIndex:b.pathIndex})});let V=new a(100).minus(A).toNumber();const F=se.sort((b,n)=>Number(n.decimal)-Number(b.decimal));if(V)for(let b=0;b<F.length&&V;b++)F[b].value=new a(F[b].value).plus(.01).toString(),V=new a(V).minus(.01).toNumber();q.value=Object.fromEntries(F.map((b,n)=>[b.pathIndex,b]))}},{immediate:!0});const c=je(),P=R(()=>c),k=_=>{var U;return(_==null?void 0:_.logoURI)||(_==null?void 0:_.logo_url)||((U=v.value.tokensObj[(_==null?void 0:_.address)=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":_==null?void 0:_.address])==null?void 0:U.logo_url)||(P.value.theme==="default"?pe("/image/coins/unknown.png"):pe("/image/coins/sui-unknown.png"))},Z=async _=>{const U=(await I.getTokenListByCoinType([_]))[0];return U&&!be(U)?U==null?void 0:U.logo_url:""},G=R(()=>v.value.tokensObj),ee=R(()=>P.value.currentExplorer);return{addCommom:K,routerStep:E,getCoinIcon:k,getDeepBookLogo:Z,percentObj:q,tokensObj:G,store:P,getExplorerUrl:Ro,currentExplorer:ee}}}),we=e=>(Le("data-v-76c0b61b"),e=e(),De(),e),ms=we(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),vs={class:"route-top"},fs={class:"token-a"},hs={alt:""},ps={class:"token-num"},gs={class:"token-symbol"},Cs={class:"token-b"},bs={class:"token-num"},ws={class:"token-symbol"},ks={alt:""},As={class:"route-bottom"},ys=we(()=>o("div",{class:"left-round"},null,-1)),Ss=we(()=>o("div",{class:"right-round"},null,-1)),_s={class:"percent-text"},Is={class:"amount"},Ns={class:"symbol"},Ps={class:"percent-ratio"},Rs={class:"percent-text"},$s={class:"amount"},Os={class:"symbol"},Bs={class:"pool-info-box"},Ms={key:0,class:"icon","aria-hidden":"true"},Ts=we(()=>o("use",{"xlink:href":"#icon-icon_on1"},null,-1)),js=[Ts],Us={class:"pool-info"},Es={class:"pool-info-top"},Fs={class:"token-a-img",alt:""},Ls={class:"token-b-img",alt:""},Ds={class:"source"},Ws=["src"],Ys={class:"pool-info-detail"},Js={class:"pool-address"},qs=we(()=>o("span",null,"Pool Address",-1)),Zs=["href"],Ks=["onClick"],Xs=we(()=>o("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),Qs=[Xs],zs={key:0,class:"token-info-detail"},Hs={alt:""},Vs={class:"token-name"},Gs={class:"token-address"},xs=["onClick"],ea=we(()=>o("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),oa=[ea],na={class:"token-symbol"},ta={class:"token-info-detail"},sa={alt:""},aa={class:"token-name"},ia={class:"token-address"},la=["onClick"],ra=we(()=>o("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),ua=[ra],da={class:"token-symbol"};function ca(e,p,I,v,E,q){const c=Uo("Modal"),P=Fe("image");return i(),X(c,{title:"Route",width:"600px",visible:!0,footer:null,onCancel:p[0]||(p[0]=k=>e.$emit("onClose"))},{closeIcon:ce(()=>[ms]),default:ce(()=>{var k,Z,G,ee;return[o("div",vs,[o("div",fs,[x(o("img",hs,null,512),[[P,(k=e.fromCoin)==null?void 0:k.logo_url]]),o("span",ps,d(("addCommom"in e?e.addCommom:Q(K))(e.fromCoinAmount)),1),o("span",gs,d((Z=e.fromCoin)==null?void 0:Z.symbol),1)]),o("div",Cs,[o("span",bs,d(("addCommom"in e?e.addCommom:Q(K))(e.toCoinAmount)),1),o("span",ws,d((G=e.toCoin)==null?void 0:G.symbol),1),x(o("img",ks,null,512),[[P,(ee=e.toCoin)==null?void 0:ee.logo_url]])])]),o("div",As,[ys,Ss,(i(!0),h(Te,null,Po(e.routerStep,(_,U)=>(i(),h("div",{key:U,class:ae(["route-path",U!==0?"route-path-active":""])},[o("div",{class:ae(["percent",U!==0?"percent-active":""])},[o("div",_s,[o("div",Is,d(("addCommom"in e?e.addCommom:Q(K))(_.amountIn)),1),o("div",Ns,d(e.fromCoin.symbol),1),o("span",Ps,"("+d(e.percentObj&&e.percentObj[_.pathIndex].value)+"%)",1)]),o("div",Rs,[o("div",$s,d(("addCommom"in e?e.addCommom:Q(K))(_.amountOut)),1),o("div",Os,d(e.toCoin.symbol),1)])],2),o("div",Bs,[_.basePaths&&_.basePaths.length>1?(i(),h("svg",Ms,js)):T("",!0),(i(!0),h(Te,null,Po(_.basePaths,(r,oe)=>{var se,A,V,F,b,n,s,w,g,N,O,W,S,Y,l,m,ve,Oe,We,Ye;return i(),h("div",{key:oe},[o("div",Us,[o("div",Es,[x(o("img",Fs,null,512),[[P,r.label=="Cetus"?e.getCoinIcon({address:r.fromCoin}):(se=r==null?void 0:r.token_a)==null?void 0:se.logo_url]]),x(o("img",Ls,null,512),[[P,r.label=="Cetus"?e.getCoinIcon({address:r.toCoin}):(A=r==null?void 0:r.token_b)==null?void 0:A.logo_url]]),o("span",null,d((r==null?void 0:r.feeRate)*100)+"%",1)]),o("div",Ds,[o("img",{src:r.label=="Cetus"?"/sui-image/logo_cetus@2x.png":"/sui-image/logo_deepbook@2x.png",alt:""},null,8,Ws),o("span",null,d(r.label=="Cetus"?"Cetus":"DeepBook"),1)]),o("div",{class:ae(["pool-info-detail-box",_.basePaths.length==1?"pool-info-detail-box-center":oe==0?"pool-info-detail-box-left":"pool-info-detail-box-right"])},[o("div",Ys,[o("div",Js,[qs,o("p",null,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:Q(Ro))(e.currentExplorer,"poolAddress",r==null?void 0:r.poolAddress),target:"_blank"},d(r&&((V=r==null?void 0:r.poolAddress)==null?void 0:V.substr(0,6)))+" ... "+d(r&&((F=r==null?void 0:r.poolAddress)==null?void 0:F.substr(r.poolAddress.length-6,6))),9,Zs),(i(),h("svg",{class:"copy-icon","aria-hidden":"true",onClick:Pe=>e.store.copy(r==null?void 0:r.poolAddress)},Qs,8,Ks))])]),r.token_a&&r.token_a?(i(),h("div",zs,[x(o("img",Hs,null,512),[[P,(b=r==null?void 0:r.token_a)==null?void 0:b.logo_url]]),o("div",null,[o("div",null,[o("span",Vs,d((n=r==null?void 0:r.token_a)==null?void 0:n.symbol),1),o("p",Gs,[o("span",null,d((w=(s=r==null?void 0:r.token_a)==null?void 0:s.address)==null?void 0:w.substr(0,4))+" ... "+d(r&&((O=(g=r==null?void 0:r.token_a)==null?void 0:g.address)==null?void 0:O.substr(((N=r==null?void 0:r.token_a)==null?void 0:N.address.length)-4,4))),1),(i(),h("svg",{class:"copy-icon","aria-hidden":"true",onClick:Pe=>{var ge;return e.store.copy((ge=r==null?void 0:r.token_a)==null?void 0:ge.address)}},oa,8,xs))])]),o("div",na,d((W=r==null?void 0:r.token_a)==null?void 0:W.name),1)])])):T("",!0),o("div",ta,[x(o("img",sa,null,512),[[P,(S=r==null?void 0:r.token_b)==null?void 0:S.logo_url]]),o("div",null,[o("div",null,[o("span",aa,d((Y=r==null?void 0:r.token_b)==null?void 0:Y.symbol),1),o("p",ia,[o("span",null,d((m=(l=r==null?void 0:r.token_b)==null?void 0:l.address)==null?void 0:m.substr(0,4))+" ... "+d(r&&((We=(ve=r==null?void 0:r.token_b)==null?void 0:ve.address)==null?void 0:We.substr(((Oe=r==null?void 0:r.token_b)==null?void 0:Oe.address.length)-4,4))),1),(i(),h("svg",{class:"copy-icon","aria-hidden":"true",onClick:Pe=>{var ge;return e.store.copy((ge=r==null?void 0:r.token_b)==null?void 0:ge.address)}},ua,8,la))])]),o("div",da,d((Ye=r==null?void 0:r.token_b)==null?void 0:Ye.name),1)])])])],2)])])}),128))])],2))),128))])]}),_:1})}const ma=Ee(cs,[["render",ca],["__scopeId","data-v-76c0b61b"]]),va=Ve({components:{Modal:jo},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},slippage:{type:String,default:""},impact:{type:Number,required:!1},fixedFromCoin:{type:Boolean,default:!1},fee:{type:String,required:!1},formatFee:{type:String,default:""},isShowAccept:{type:Boolean,default:!1},swapLoading:{type:Boolean,required:!1},oneFromAmount:{type:String,default:""},oneToAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e,p){const I=Ue(),v=R(()=>I),E=je(),q=R(()=>E),c=b=>{var n;return(b==null?void 0:b.logoURI)||(b==null?void 0:b.logo_url)||((n=v.value.tokensObj[b==null?void 0:b.address])==null?void 0:n.logo_url)||(q.value.theme==="default"?pe("/image/coins/unknown.png"):pe("/image/coins/sui-unknown.png"))},P=C(!1),k=R(()=>q.value.chainName),Z=async()=>{p.emit("to-swap")};C([]);const G=C(0),ee=C(""),_=C(""),U=R(()=>q.value.slippage);te(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,U.value],([b,n,s,w,g,N])=>{if(b&&n&&s&&w&&N)if(g){const O=new a(n).mul(new a(N/100));_.value=new a(n).sub(O).toString()}else{const O=new a(b).mul(new a(N/100));ee.value=new a(b).add(O).toString()}},{immediate:!0});const r=C(""),oe=R(()=>{var b,n,s,w,g,N,O,W,S;return(s=(n=v==null?void 0:v.value)==null?void 0:n.tokensObj[(b=e.fromCoin)==null?void 0:b.address])!=null&&s.pyth_id&&((N=(g=v==null?void 0:v.value)==null?void 0:g.tokensObj[(w=e.fromCoin)==null?void 0:w.address])==null?void 0:N.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(S=(W=v==null?void 0:v.value)==null?void 0:W.tokensObj[(O=e.fromCoin)==null?void 0:O.address])!=null&&S.coingecko_id?"coingecko":null}),se=R(()=>{var b,n,s,w,g,N,O,W,S;return(s=(n=v==null?void 0:v.value)==null?void 0:n.tokensObj[(b=e.toCoin)==null?void 0:b.address])!=null&&s.pyth_id&&((N=(g=v==null?void 0:v.value)==null?void 0:g.tokensObj[(w=e.toCoin)==null?void 0:w.address])==null?void 0:N.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(S=(W=v==null?void 0:v.value)==null?void 0:W.tokensObj[(O=e.toCoin)==null?void 0:O.address])!=null&&S.coingecko_id?"coingecko":null}),A=async()=>{const b=v.value.tokenExternalPriceObj[e.fromCoin.address],n=v.value.tokenExternalPriceObj[e.toCoin.address];if(b&&n){const s=new a(b).div(new a(n)),w=new a(e.oneToAmount.replace(new RegExp(/,/g),"")).sub(s).div(s).mul(100);let g=Math.abs(le(w,2));s.toNumber()<Number(e.oneToAmount.replace(new RegExp(/,/g),""))?r.value="":r.value=w>0&&w<=.01?"0.01":g}else r.value=""},V=b=>{if(b<5)return"color-s";if(b>=5&&b<10)return"color-w";if(b>=10)return"color-e"};te(()=>[e.oneToAmount,v.value.tokenExternalPriceObj,k.value],([b,n,s])=>{b&&n&&!be(n)&&s!=="Aptos"&&A()},{immediate:!0,deep:!0});const F=C(!1);return{getCoinIcon:c,addCommom:K,sFixD:le,rateChange:P,chainName:k,clickNextBtn:Z,pathLength:G,maximumSold:ee,minimumReceived:_,decimalUi:he,getTextColor:V,priceExangeRate:r,formCoinMarket:oe,toCoinMarket:se,readWithin:F}}}),fa=""+globalThis.__publicAssetsURL("sui-image/within-error.png");const ie=e=>(Le("data-v-8cffddfe"),e=e(),De(),e),ha=ie(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),pa={class:"new-swap-contnet"},ga={class:"coin-info"},Ca={class:"from-coin-info"},ba={class:"left"},wa={class:"coin-amount"},ka={class:"coin-symbol"},Aa={class:"right"},ya={class:"to-coin-info"},Sa={class:"left"},_a={class:"coin-amount"},Ia={class:"coin-symbol"},Na={class:"right"},Pa=ie(()=>o("div",{class:"to-swap-logo"},null,-1)),Ra={class:"coin-rate"},$a={key:0,class:"coin-rate-box"},Oa={class:"left"},Ba=ie(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Ma=ie(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Ta=[Ba,Ma],ja={key:1,class:"coin-rate-box"},Ua={class:"left"},Ea=ie(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Fa=ie(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),La=[Ea,Fa],Da={key:2,class:"within-tips-box"},Wa={class:"within-tips"},Ya={key:0},Ja=["href"],qa=ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Za=[qa],Ka={key:1},Xa=["href"],Qa=ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),za=[Qa],Ha={key:0},Va=["href"],Ga=ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),xa=[Ga],ei={key:1},oi=["href"],ni=ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),ti=[ni],si={key:2},ai=["href"],ii=ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),li=[ii],ri={key:3},ui=["href"],di=ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),ci=[di],mi={class:"bottom"},vi={class:"induction"},fi={class:"item"},hi={class:"induction-text"},pi={class:"induction-value"},gi={class:"item"},Ci={class:"induction-text"},bi={class:"induction-value"},wi={class:"item"},ki={class:"induction-text"},Ai={key:0,class:"icon","aria-hidden":"true"},yi=ie(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Si=[yi],_i={class:"item"},Ii={class:"induction-text"},Ni={key:0,class:"induction-value"},Pi={key:1,class:"induction-value"},Ri={key:0,class:"within-desc"},$i=ie(()=>o("div",{class:"within-top"},[o("img",{src:fa,alt:""}),o("span",null,"The exchange rate of this order deviates from the market price by a large percentage. Are you sure you want to continue the swap?")],-1)),Oi={class:"within-bottom"},Bi={key:0,class:"price-updated"},Mi=ie(()=>o("span",null,"Price updated",-1));function Ti(e,p,I,v,E,q){const c=Eo,P=Uo("Modal"),k=Fe("image");return i(),X(P,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal",onCancel:p[7]||(p[7]=Z=>e.$emit("on-close"))},{closeIcon:ce(()=>[ha]),default:ce(()=>[o("div",pa,[o("div",ga,[o("div",Ca,[o("div",ba,[o("div",wa,d(e.fromCoinAmount&&("addCommom"in e?e.addCommom:Q(K))(e.fromCoinAmount)),1),o("div",ka,d(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",Aa,[x(o("img",null,null,512),[[k,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]])])]),o("div",ya,[o("div",Sa,[o("div",_a,d(e.toCoinAmount&&("addCommom"in e?e.addCommom:Q(K))(e.toCoinAmount)),1),o("div",Ia,d(e.toCoin&&e.toCoin.symbol),1)]),o("div",Na,[x(o("img",null,null,512),[[k,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]])]),Pa]),o("div",Ra,[e.rateChange?(i(),h("div",ja,[o("div",Ua,[x(o("img",null,null,512),[[k,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,"1 "+d(e.toCoin&&e.toCoin.symbol)+" â‰ˆ",1),x(o("img",null,null,512),[[k,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,d(e.oneFromAmount)+" "+d(e.fromCoin.symbol),1)]),o("div",{class:"right",onClick:p[1]||(p[1]=Z=>e.rateChange=!e.rateChange)},La)])):(i(),h("div",$a,[o("div",Oa,[x(o("img",null,null,512),[[k,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,"1 "+d(e.fromCoin&&e.fromCoin.symbol)+" â‰ˆ",1),x(o("img",null,null,512),[[k,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,d(e.oneToAmount)+" "+d(e.toCoin.symbol),1)]),o("div",{class:"right",onClick:p[0]||(p[0]=Z=>e.rateChange=!e.rateChange)},Ta)])),e.chainName=="Sui"&&e.priceExangeRate&&Number(e.priceExangeRate)>10?(i(),h("div",Da,[o("div",Wa,[o("p",null,[o("span",{class:ae(e.getTextColor(e.priceExangeRate))},"Within ~"+d(e.priceExangeRate)+"% of",3)]),e.formCoinMarket=="pyth"&&e.toCoinMarket=="pyth"?(i(),h("span",Ya,[J("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.fromCoin.pyth_id}&ids[]=${e.toCoin.pyth_id}`,target:"_blank"},Za,8,Ja)])):e.formCoinMarket=="coingecko"&&e.toCoinMarket=="coingecko"?(i(),h("span",Ka,[J("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.fromCoin.coingecko_id},${e.toCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},za,8,Xa)])):e.formCoinMarket!==e.toCoinMarket?(i(),h(Te,{key:2},[e.formCoinMarket=="pyth"?(i(),h("span",Ha,[J("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.fromCoin.pyth_id}`,target:"_blank"},xa,8,Va)])):e.formCoinMarket=="coingecko"?(i(),h("span",ei,[J("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.fromCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},ti,8,oi)])):T("",!0),e.toCoinMarket=="coingecko"?(i(),h("span",si,[J("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.toCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},li,8,ai)])):e.toCoinMarket=="pyth"?(i(),h("span",ri,[J("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.toCoin.pyth_id}`,target:"_blank"},ci,8,ui)])):T("",!0)],64)):T("",!0)])])):T("",!0)])]),o("div",mi,[o("div",vi,[o("div",fi,[o("div",hi,d(e.$t("modal.slippageTolerance")),1),o("div",pi,d(e.slippage)+"%",1)]),o("div",gi,[o("div",Ci,d(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",bi,d(e.fixedFromCoin?("addCommom"in e?e.addCommom:Q(K))(("sFixD"in e?e.sFixD:Q(le))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:Q(K))(("sFixD"in e?e.sFixD:Q(le))(e.maximumSold,e.fromCoin.decimals)))+" "+d(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),o("div",wi,[o("div",ki,d(e.$t("common.priceImpact")),1),o("div",{class:ae(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[J(d(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(i(),h("svg",Ai,Si)):T("",!0)],2)]),o("div",_i,[o("div",Ii,d(e.$t("common.fee")),1),e.chainName=="Aptos"?(i(),h("div",Ni,d(e.formatFee)+" "+d(e.fromCoin.symbol)+" ("+d(e.fee*100)+"%) ",1)):(i(),h("div",Pi,d(e.fee)+" "+d(e.fromCoin.symbol),1))])])]),e.chainName=="Sui"&&e.priceExangeRate&&Number(e.priceExangeRate)>10?(i(),h("div",Ri,[$i,o("div",Oi,[o("div",{class:ae(["within-btn",e.readWithin?"within-btn-active":""]),onClick:p[2]||(p[2]=Z=>e.readWithin=!0)},"Yes, please continue.",2),o("div",{class:"within-btn",onClick:p[3]||(p[3]=Z=>e.$emit("on-close"))},"No, cancel it.")])])):T("",!0)]),e.isShowAccept?(i(),h("div",Bi,[Mi,Ce(c,{class:"accept-btn",loading:e.swapLoading,onClick:p[4]||(p[4]=Z=>e.$emit("accept"))},{default:ce(()=>[J("Accept")]),_:1},8,["loading"])])):e.chainName=="Sui"?(i(),X(c,{key:1,class:"big-btn swap-confirm-btn",disabled:Number(e.priceExangeRate)>10&&!e.readWithin,onClick:p[5]||(p[5]=Z=>e.clickNextBtn())},{default:ce(()=>[J(d(e.$t("button.confirmSwap")),1)]),_:1},8,["disabled"])):e.chainName=="Aptos"?(i(),X(c,{key:2,class:"big-btn swap-confirm-btn",onClick:p[6]||(p[6]=Z=>e.clickNextBtn())},{default:ce(()=>[J(d(e.$t("button.confirmSwap")),1)]),_:1})):T("",!0)]),_:1},8,["title"])}const ji=Ee(va,[["render",Ti],["__scopeId","data-v-8cffddfe"]]),Ui=Ve({setup(){const e=pn(),p=$o(Oo,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:I,locale:v}=gn(),E=je(),q=Ue(),c=R(()=>q);let P=C(!1),k=C(!0),Z=C(!1),G=C(!1),ee=C(!1),_=C(!1);const U=C("fromCoin"),r=C(""),oe=C(""),se=C(!1),A=C(!0),V=C(!1),F=C(!1),b=C(!1),n=C(""),s=C(""),w=C(20),g=C(0),N=C(null),O=C(!1),W=R(()=>E.slippage),S=R(()=>E.chainName),Y=R(()=>S.value?so(S.value):{}),l=C(),m=C(),ve=R(()=>fe&&fe[S.value]&&fe[S.value].hasRouter),Oe=R(()=>q.getPoolInfoSuccess),We=R(()=>{var t;return j.value&&((t=j.value)!=null&&t.is_pause)?"Pool Closed":!l.value||!m.value?I("modal.selectTokenModalTitle"):!Number(n.value)&&!Number(s.value)?I("button.enterAmount"):!ve.value&&!j.value&&Oe.value?"Pool Not Found":ve.value&&Se.value?"No Available Route":O.value?I("button.insufficientLiquidity"):Number(n.value)>Number(de.value)?I("button.insufficientBalance",{name:l.value.symbol}):I("button.swap")}),Ye=t=>{var f,u,y,B;U.value=t,t==="fromCoin"?(r.value=((f=m.value)==null?void 0:f.address)||"",oe.value=((u=l.value)==null?void 0:u.address)||""):(r.value=((y=l.value)==null?void 0:y.address)||"",oe.value=((B=m.value)==null?void 0:B.address)||""),se.value=!0},Pe=C({}),ge=C({}),Fo=t=>{U.value==="fromCoin"?(Pe.value=t,oo(t)):(ge.value=t,oo(t))},Lo=t=>{t==="fromCoin"?(A.value=!0,S.value==="Aptos"?n.value=de.value>0?l.value.symbol=="APT"?new a(Number(de.value)).sub(new a(.1)).lt(new a(0))?"0":new a(Number(de.value)).sub(new a(.1)).toString():String(de.value):"":n.value=de.value>0?l.value.symbol=="SUI"?new a(Number(de.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(de.value)).sub(new a(.05)).toString():String(de.value):""):(A.value=!1,S.value==="Aptos"?s.value=me.value>0?m.value.symbol=="APT"?new a(Number(me.value)).sub(new a(.1)).lt(new a(0))?"0":new a(Number(me.value)).sub(new a(.1)).toString():String(me.value):"":s.value=me.value>0?m.value.symbol=="SUI"?new a(Number(me.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(me.value)).sub(new a(.05)).toString():String(me.value):"")},Do=t=>{t==="fromCoin"?(A.value=!0,n.value=de.value>0?le(new a(Number(de.value)).div(2).toString(),l.value.decimals).toString():""):(A.value=!1,s.value=me.value>0?le(new a(Number(me.value)).div(2).toString(),m.value.decimals).toString():"")},Ge=C(!1);Cn(()=>{ao(),window.addEventListener("updateSwapParams",t=>{Ge.value=!Ge.value})}),bn(()=>{clearInterval(N.value)});const xe=R(()=>E),eo=()=>{k.value||!j.value&&!ve.value||(clearInterval(N.value),q.setPoolConfigList(xe.value.chainName,xe.value.filterCoinsObj),g.value=0,k.value=!0,j.value&&q.updateCurrentPools(j.value.poolAddress,S.value),Be.value||Ie(A.value?n.value:s.value),ue.value.address&&Y.value.getAccount(ue.value.address),E.getStatsData(S.value,xe.value.filterCoinsObj),setTimeout(()=>{k.value=!1,ao()},1e3))},ao=()=>{N.value=setInterval(()=>{k.value=!1,V.value||g.value<w.value&&(g.value+=1,g.value===w.value&&(S.value=="Aptos"?(j.value&&j.value.poolAddress&&q.updateCurrentPools(j.value.poolAddress,S.value),eo()):_.value||eo(),g.value=0,k.value=!0))},1e3)};te(A,ze((t,f)=>{A.value=t},500));const Re=C(!1);te(n,ze((t,f)=>{t&&t!==0&&A.value&&(g.value=0,Ie(t)),t==""&&A.value&&(s.value="")},800)),te(s,ze((t,f)=>{t&&t!==0&&!A.value&&(g.value=0,Ie(t)),t==""&&!A.value&&(n.value="")},800));const Je=C(1e-4),qe=async t=>{let f=t;if(S.value==="Aptos"&&!f.current_sqrt_price&&n.value&&s.value){const u=await Y.value.getPools([f.address]);u&&u[0]&&(f={...t,...u[0],fee:Number(u[0].fee_rate)/1e6})}if(f.current_sqrt_price&&n.value&&s.value){const y=(l.value.address===f.coinA.address&&m.value.address===f.coinB.address?0:1)==0,B=new a(n.value),$=new a(s.value),D=B.sub(B.mul(new a(f.fee))),z=$.div(D);return Y.value.getPriceImpactPct(f,z.toString(),y)}return"--"},io=C(0),lo=C(0),ro=C(),$e=C({}),Wo=async t=>{if(j.value&&(Be.value=!0,!(A.value&&Number(n.value)==0)&&!(!A.value&&Number(s.value)==0))){if(l.value&&m.value&&(n.value||s.value)){F.value=!0,b.value=!0,O.value=!1;const f=l.value.address===j.value.coinA.address&&m.value.address===j.value.coinB.address?0:1;try{let u=await Y.value.preSwap({pool:j.value,a2b:f==0,byAmountIn:A.value,amount:A.value?n.value:s.value});O.value=u==null?void 0:u.isExceed,ro.value=u==null?void 0:u.estimatedFeeAmount,A.value?(s.value=u.estimatedAmountOut,ye.value=(Number(u.estimatedAmountOut)/t).toString(),Ae.value=(t/Number(u.estimatedAmountOut)).toString()):(n.value=u.estimatedAmountIn,ye.value=(t/Number(u.estimatedAmountIn)).toString(),Ae.value=(Number(u.estimatedAmountIn)/t).toString()),io.value=new a(s.value).div(n.value).toString(),lo.value=new a(n.value).div(s.value).toString(),Je.value=S.value=="Aptos"?await qe(j.value):await qe($e.value||j.value),F.value=!1,b.value=!1}catch(u){console.log("pre swap error1",u),F.value=!1,b.value=!1}}else A.value?s.value="":n.value="",F.value=!1,b.value=!1;Be.value=!1}},Yo=mn(),ue=R(()=>Yo),Jo=C({}),Ae=C(""),ye=C(""),de=R(()=>ue.value.assets&&l.value&&ue.value.assets[l.value.address]?No(ue.value.assets[l.value.address].balance,l.value.decimals):0),me=R(()=>ue.value.assets&&m.value&&ue.value.assets[m.value.address]?No(ue.value.assets[m.value.address].balance,m.value.decimals):0);te(()=>c.value.tokensObj,async t=>{if(t&&!be(t)){const f=e?e.currentRoute.value.query.to:"",u=e?e.currentRoute.value.query.from:"";u?l.value=t[u]||await Y.value.getTokenBySymbol(t,u):!u&&!l.value&&(l.value=t[fe[S.value].swapDefaultPair.fromCoin]),f?m.value=t[f]||await Y.value.getTokenBySymbol(t,f):!f&&!m.value&&(m.value=t[fe[S.value].swapDefaultPair.toCoin],console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1014 ~ setup ~ newValue:",t),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1014 ~ setup ~ onfig[chainName.value].swapDefaultPair.toCoin:",fe[S.value].swapDefaultPair.toCoin)),!u&&f&&(l.value="")}},{immediate:!0});const j=R(()=>{var t,f,u,y,B;if(l.value&&m.value){let $=null,D={};if(Object.values(c.value.poolConfigList).forEach(L=>{var M,H,ne,Ne;(L.coinA.address.toUpperCase()===((M=l.value.address)==null?void 0:M.toUpperCase())&&L.coinB.address.toUpperCase()===((H=m.value.address)==null?void 0:H.toUpperCase())||L.coinB.address.toUpperCase()===((ne=l.value.address)==null?void 0:ne.toUpperCase())&&L.coinA.address.toUpperCase()===((Ne=m.value.address)==null?void 0:Ne.toUpperCase()))&&(D[L.address]={...L})}),S.value=="Aptos"&&c.value.poolsObj&&!be(c.value.poolsObj))for(const L in c.value.poolsObj){const M=c.value.poolsObj[L];(M.token_a.address.toUpperCase()===((t=l.value.address)==null?void 0:t.toUpperCase())&&M.token_b.address.toUpperCase()===((f=m.value.address)==null?void 0:f.toUpperCase())||M.token_b.address.toUpperCase()===((u=l.value.address)==null?void 0:u.toUpperCase())&&M.token_a.address.toUpperCase()===((y=m.value.address)==null?void 0:y.toUpperCase()))&&(D[M.address]={...M})}const z=Object.values(D).sort((L,M)=>L.fee-M.fee);for(let L=0;L<z.length;L++)if(!((B=z[L])!=null&&B.is_pause)){$=z[L];break}return $&&!be($)?(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1094 ~ poolInfo ~ info:",$),$):null}return null}),uo=C(!0),co=C(!1),qo=async t=>{t&&S.value=="Aptos"&&(Ie(A.value?n.value:s.value),co.value=!0,t.coinA.symbol.toLowerCase()===l.value.symbol.toLowerCase()&&t.coinB.symbol.toLowerCase()===m.value.symbol.toLowerCase()?uo.value=!0:uo.value=!1,O.value=!1)};te(()=>j.value,(t,f)=>{t&&(!f||t.address!==f.address||t.current_sqrt_price!==f.current_sqrt_price)&&qo(t)},{immediate:!0,deep:!0});const Zo=R(()=>c.value.tokensObj&&l.value&&l.value.address&&c.value.tokensObj[l.value.address]&&c.value.tokensObj[l.value.address].logoURI),Ko=R(()=>c.value.tokensObj&&m.value&&m.value.address&&c.value.tokensObj[m.value.address]&&c.value.tokensObj[m.value.address].logoURI),Xo=R(()=>S.value==="Aptos"?c.value.tokensObj&&l.value&&l.value.address&&c.value.tokensObj[l.value.address]&&c.value.tokensObj[l.value.address].coingecko_id||null:c.value.tokensObj&&l.value&&l.value.address||null),Qo=R(()=>S.value==="Aptos"?c.value.tokensObj&&m.value&&m.value.address&&c.value.tokensObj[m.value.address]&&c.value.tokensObj[m.value.address].coingecko_id||null:c.value.tokensObj&&m.value&&m.value.address||null),zo=R(()=>{var t,f,u,y,B,$,D,z,L,M,H,ne;return(u=(f=c==null?void 0:c.value)==null?void 0:f.tokensObj[(t=l==null?void 0:l.value)==null?void 0:t.address])!=null&&u.pyth_id&&(($=(B=c==null?void 0:c.value)==null?void 0:B.tokensObj[(y=l==null?void 0:l.value)==null?void 0:y.address])==null?void 0:$.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(L=(z=c==null?void 0:c.value)==null?void 0:z.tokensObj[(D=l==null?void 0:l.value)==null?void 0:D.address])!=null&&L.coingecko_id?"coingecko":(ne=(H=c==null?void 0:c.value)==null?void 0:H.tokensObj[(M=l==null?void 0:l.value)==null?void 0:M.address])!=null&&ne.birdeyeid?"birdeye":null}),Ho=R(()=>{var t,f,u,y,B,$,D,z,L,M,H,ne;return(u=(f=c==null?void 0:c.value)==null?void 0:f.tokensObj[(t=m==null?void 0:m.value)==null?void 0:t.address])!=null&&u.pyth_id&&(($=(B=c==null?void 0:c.value)==null?void 0:B.tokensObj[(y=m==null?void 0:m.value)==null?void 0:y.address])==null?void 0:$.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(L=(z=c==null?void 0:c.value)==null?void 0:z.tokensObj[(D=m==null?void 0:m.value)==null?void 0:D.address])!=null&&L.coingecko_id?"coingecko":(ne=(H=c==null?void 0:c.value)==null?void 0:H.tokensObj[(M=l==null?void 0:l.value)==null?void 0:M.address])!=null&&ne.birdeyeid?"birdeye":null}),Vo=R(()=>{var y,B;const t=new a(n.value),f=new a(S.value=="Aptos"?(y=j==null?void 0:j.value)==null?void 0:y.fee:(B=$e==null?void 0:$e.value)==null?void 0:B.fee),u=t.mul(f).toString();return Number(u)<1/Math.pow(10,l.value.decimals)?`<${new a(1).div(new a(Math.pow(10,l.value.decimals))).toString()}`:le(u,l.value.decimals)}),{setIsShowSuccess:Go,setIsShowRejected:mo,setIsShowWaiting:Ze,setTransactionDesc:xo,setTransactionTxid:vo}=E,en=async()=>{var f,u,y,B,$,D,z,L;_.value=!1,F.value=!0,clearInterval(Me),window.clearInterval(Me),vo(""),xo(I("tips.swapping",{from:`${K(n.value)} ${(f=l.value)==null?void 0:f.symbol}`,to:`${K(s.value)} ${(u=m.value)==null?void 0:u.symbol}`})),Ze(!0);let t;S.value=="Aptos"&&(t=l.value.address===j.value.token_a.address&&m.value.address===j.value.token_b.address?0:1);try{let M;S.value=="Aptos"?M=await Y.value.getSwapTransactionPayload({pool:j.value,a2b:t==0,byAmountIn:A.value,amount:A.value?n.value:s.value,slippage:Number(W.value)/100}):M=await Y.value.getSwapRouterPayload(Ke.value,Number(W.value)/100),console.log("0221####swap###swapPayload###",M);let H;if(S.value==="Aptos")H=await ue.value.currentWallet.signAndSubmitTransaction(M);else{const ne=await Y.value.signAndExecuteTransactionBlock(ue.value.currentWallet,M==null?void 0:M.txb,M==null?void 0:M.payloadParams);console.log("0221###sui swap res###",ne),H=Y.value.handleTx(ne),console.log("0221###swap###sui##tx###",H)}if(H&&H.hash){vo(H.hash),Ze(!1),Go(!0);const ne={title:I("tips.swap"),desc:I("tips.swapSuccessText",{from:`${K(n.value)} ${(y=l.value)==null?void 0:y.symbol}`,to:`${K(s.value)} ${(B=m.value)==null?void 0:B.symbol}`}),hash:H.hash,tit:"Swap",type:"liquidity",action:"swap",isHaveSui:l.value.address==fe[S.value].currentChainTokenAddress||m.value.address==fe[S.value].currentChainTokenAddress,icon:"icon-icon-swap1",tokenInfo:{tokena:`${($=l.value)==null?void 0:$.address}`,numa:`- ${n.value}`,logoa:c.value.tokensObj&&l.value&&l.value.address&&c.value.tokensObj[l.value.address]&&c.value.tokensObj[l.value.address].logoURI,tokenb:`${(D=m.value)==null?void 0:D.address}`,numb:`+ ${s.value}`,logob:c.value.tokensObj&&m.value&&m.value.address&&c.value.tokensObj[m.value.address]&&c.value.tokensObj[m.value.address].logoURI},text:`Pay ${n.value} ${(z=l.value)==null?void 0:z.symbol} to receive ${s.value} ${(L=m.value)==null?void 0:L.symbol}`};S.value!=="Aptos"&&(ne.res=H.res),Y.value.showTransitionPending(ne);const Ne=await Y.value.watchTransaction(ne);console.log("0221###swap###transitionStatus####",Ne),Ne&&setTimeout(()=>{S.value=="Aptos"&&q.updateCurrentPools(j.value.poolAddress,S.value),Y.value.getAccount(ue.value.address)},1e3)}else Ze(!1),mo(!0);n.value="",s.value="",F.value=!1}catch(M){n.value="",s.value="",console.log("Swap Error###",M),F.value=!1,Ze(!1),mo(!0)}},on=t=>{var f;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((f=c.value.tokensObj[t==null?void 0:t.address])==null?void 0:f.logo_url)||(E.theme==="default"?pe("/image/coins/unknown.png"):pe("/image/coins/sui-unknown.png"))},fo=C([]);te(()=>[l.value,m.value,c.value.poolConfigList],([t,f,u])=>{if(u&&u.length>0&&t&&f){const y=[];u.forEach(B=>{var $,D,z,L;(B.coinA.address.toUpperCase()===(($=t.address)==null?void 0:$.toUpperCase())&&B.coinB.address.toUpperCase()===((D=f.address)==null?void 0:D.toUpperCase())||B.coinB.address.toUpperCase()===((z=t.address)==null?void 0:z.toUpperCase())&&B.coinA.address.toUpperCase()===((L=f.address)==null?void 0:L.toUpperCase()))&&(B!=null&&B.is_pause||y.push(B.address))}),fo.value=y}},{immediate:!0});const oo=t=>{console.log("ðŸš€ ~ getTokenSource ~ token:",t);const f=E.importTokenListObj;c.value.tokensObj&&c.value.tokensObj[t.address]&&c.value.tokensObj[t.address].isSelfBuilt&&!(f!=null&&f.hasOwnProperty(t==null?void 0:t.address))?no.value=!0:(U.value==="fromCoin"?(n.value="",m.value&&t.address.toLowerCase()===(m==null?void 0:m.value.address.toLowerCase())&&(m.value=null),l.value=t):(l.value&&(s.value="",t.address.toLowerCase()===(l==null?void 0:l.value.address.toLowerCase())&&(l.value=null)),m.value=t),ho())},no=C(!1),ho=()=>{ge.value={},Pe.value={},no.value=!1},nn=R(()=>E.isShowRouterModal),to=C([]),po=C(""),tn=C(!1),go=vn();R(()=>go);const Se=C(!1),Ke=C({}),Co=C(""),bo=C(),wo=t=>{const{splitPaths:f}=t;let u=new a(0);f.forEach((B,$)=>{const D=B.basePaths[0],z=D.label==="Cetus"?new a(D.feeRate).div(Math.pow(10,6)):new a(D.feeRate).div(Math.pow(10,9)),L=new a(D.inputAmount).div(Math.pow(10,l.value.decimals)).mul(z);if(u=u.add(L),B.basePaths[1]){const M=B.basePaths[1],H=D.direction?D.currentPrice:new a(1).div(D.currentPrice),ne=M.direction?M.currentPrice:new a(1).div(B.basePaths[1].currentPrice),Ne=M.label==="Cetus"?new a(M.feeRate).div(Math.pow(10,6)):new a(M.feeRate).div(Math.pow(10,9)),un=new a(M.outputAmount).div(Math.pow(10,m.value.decimals)).mul(Ne).div(H.mul(ne));u=u.add(un)}});const y=u.toNumber();bo.value=y,Co.value=y>0&&y<1e-6?"<0.000001":K(le(y,l.value.decimals))},ko=(t,f)=>f.minus(t).div(f).mul(100),Ao=async t=>{const{splitPaths:f}=t;let u=new a(0);f.forEach((y,B)=>{if(y.basePaths.length===1){const $=y.basePaths[0],D=new a($.outputAmount).div(Math.pow(10,$.toDecimal)),z=new a($.inputAmount).div(Math.pow(10,$.fromDecimal)),L=D.div(z),M=$.direction?new a($.currentPrice):new a(1).div($.currentPrice),H=ko(L,M).mul(new a(y.percent).div(100));u=u.add(H)}else{const $=y.basePaths[0].direction?new a(y.basePaths[0].currentPrice):new a(1).div(y.basePaths[0].currentPrice),D=y.basePaths[1].direction?new a(y.basePaths[1].currentPrice):new a(1).div(y.basePaths[1].currentPrice),z=$.mul(D),L=new a(y.basePaths[1].outputAmount).div(Math.pow(10,y.basePaths[1].toDecimal)),M=new a(y.basePaths[0].inputAmount).div(Math.pow(10,y.basePaths[0].fromDecimal)),H=L.div(M),ne=ko(H,z).mul(new a(y.percent).div(100));u=u.add(ne)}}),Je.value=Number(le(u.toNumber(),2))},Be=C(!1),yo=async t=>{if(Be.value=!0,l.value&&m.value&&(Number(n.value)>0||Number(s.value)>0)){(!n.value&&s.value||n.value&&!s.value)&&(F.value=!0),Re.value=!0,Se.value=!1;let f;j.value&&(f=l.value.address===j.value.coinA.address&&m.value.address===j.value.coinB.address?0:1);try{let u;if(A.value){const D=new a(n.value).mul(Math.pow(10,l.value.decimals)).toString();u=new Qe(D)}else{const D=new a(s.value).mul(Math.pow(10,m.value.decimals)).toString();u=new Qe(D)}const y=Number(W.value)/100,B=j.value?{poolAddresses:fo.value,coinTypeA:j.value.coin_a_address,coinTypeB:j.value.coin_b_address,decimalsA:j.value.coinA.decimals,decimalsB:j.value.coinB.decimals,a2b:f==0,byAmountIn:A.value,amount:u.toString()}:"",$=await Y.value.getSwapRouter(l,m,u,A.value,y,"",j.value?B:"");if($&&!$.isExceed&&$.splitPaths&&$.splitPaths.length==0){Se.value=!0;return}if($){if(Ke.value=$,to.value=$.paths,O.value=$.isExceed,$.isExceed){F.value=!1,Se.value=!1,A.value?s.value="":n.value="";return}wo($),A.value?n.value&&(s.value=new a($.outputAmount).div(new a(Math.pow(10,m.value.decimals))).toString()):s.value&&(n.value=new a($.inputAmount).div(new a(Math.pow(10,l.value.decimals))).toString()),console.log(s.value,"###toCoinAmount.value"),Ae.value=K(he(new a(n.value).div(new a(s.value).toString()),l.value.decimals)),ye.value=K(he(new a(s.value).div(n.value).toString(),m.value.decimals)),Ao($),F.value=!1,Se.value=!1,Re.value=!1}else F.value=!1,Se.value=!0,Re.value=!1}catch(u){console.log("pre swap error2",u),F.value=!1,Re.value=!1}}else A.value?s.value="":n.value="",F.value=!1,Re.value=!1;Be.value=!1},_e=C(!1),So=async t=>{try{let f;if(A.value){const B=new a(n.value).mul(Math.pow(10,l.value.decimals)).toString();f=new Qe(B)}else{const B=new a(s.value).mul(Math.pow(10,m.value.decimals)).toString();f=new Qe(B)}const u=Number(W.value)/100,y=await Y.value.getSwapRouter(l,m,f,A.value,u,"");y&&(Ke.value=y,to.value=y.paths,O.value=y.isExceed,po.value=y.amountIn,wo(y),Ae.value=K(he(new a(n.value).div(new a(s.value).toString()),l.value.decimals)),ye.value=K(he(new a(s.value).div(n.value).toString(),m.value.decimals)),Ao(y),A.value?s.value!==y.amountOut&&(_e.value=!0,s.value=y.amountOut):n.value!==y.amountIn&&(_e.value=!0,n.value=y.amountIn))}catch(f){console.log("pre swap error3",f)}},sn=async t=>{if(l.value&&m.value&&(n.value||s.value)){const f=l.value.address===j.value.coinA.address&&m.value.address===j.value.coinB.address?0:1;try{let u=await Y.value.preSwap({pool:j.value,a2b:f==0,byAmountIn:A.value,amount:A.value?n.value:s.value});O.value=u==null?void 0:u.isExceed,ro.value=u==null?void 0:u.estimatedFeeAmount,A.value?(ye.value=(Number(u.estimatedAmountOut)/u.estimatedAmountIn).toString(),Ae.value=(u.estimatedAmountIn/Number(u.estimatedAmountOut)).toString()):(ye.value=(Number(u.estimatedAmountOut)/Number(u.estimatedAmountIn)).toString(),Ae.value=(Number(u.estimatedAmountIn)/Number(u.estimatedAmountOut)).toString()),A.value?s.value!==u.estimatedAmountOut&&(_e.value=!0,s.value=u.estimatedAmountOut):n.value!==u.estimatedAmountIn&&(_e.value=!0,n.value=u.estimatedAmountIn),Je.value=S.value=="Aptos"?await qe(j.value):await qe($e.value||j.value),F.value=!1,b.value=!1}catch(u){console.log("pre swap error4",u),F.value=!1,b.value=!1}}else F.value=!1,b.value=!1};let Me=C(null);te(()=>_.value,t=>{t?Me.value=setInterval(()=>{S.value=="Aptos"?sn(A.value):So(A.value)},3e3):(clearInterval(Me.value),window.clearInterval(Me.value))},{immediate:!0});const Ie=async t=>{S.value=="Aptos"?Wo(t):yo()};te(()=>Ge.value,t=>{(Number(n.value)>0||Number(s.value)>0)&&Ie(A.value?n.value:s.value)},{immediate:!0});const an=R(()=>go),_o=R(()=>an.value.isInitRouter);te(()=>_o.value,t=>{t||(g.value=0,Ie(A.value?n.value:s.value))},{immediate:!0}),te(()=>[l.value,m.value],([t,f])=>{if(t&&f&&(g.value=0,Ie(A.value?n.value:s.value)),t||f){console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1965 ~ setup ~ fromCoin:",t);const u=`/swap?from=${t==null?void 0:t.address}&to=${f==null?void 0:f.address}`;e.push(u)}},{immediate:!0});function ln(t,f=500){let u=null;return function(...y){clearTimeout(u),u=setTimeout(()=>{t.call(this,...y)},f)}}const rn=ln(Io);function Io(){const t=l.value;l.value=m.value,m.value=t,P.value=!0,A.value=!A.value,A.value?(n.value=s.value,s.value=""):(s.value=n.value,n.value=""),setTimeout(()=>{P.value=!1},300)}return{closeSwapConfirmModal:()=>{_.value=!1,_e.value=!1},updateAccept:()=>{_e.value=!1},clickExchange:Io,debounceClickExchange:rn,closeTokenWarning:ho,isShowTokenWarning:no,getTokenSource:oo,hasPool:co,getPoolInfoSuccess:Oe,halfBtnSelect:Do,formCoinId:Xo,toCoinId:Qo,formCoinMarket:zo,toCoinMarket:Ho,fromCoinUrl:Zo,toCoinUrl:Ko,t:I,indicator:p,wallet:ue,currentLpInfo:Jo,fixD:He,decimalFormat:fn,impact:Je,oneFromAmount:Ae,oneToAmount:ye,importIcon:pe,clickRefresh:eo,refresh:k,change:P,isShowAddress:Z,isShowSwapSetting:G,fromCoin:l,toCoin:m,slippage:W,openCoinSelect:Ye,onCoinSelect:Fo,existingCoins:r,lastSelectCoin:oe,currentCoinKey:U,showCoinSelect:se,fromCoinAmount:n,toCoinAmount:s,maxBtnSelect:Lo,fixedFromCoin:A,swapBtnText:We,toSwap:en,loading:V,swaping:F,autoRefreshTime:w,countdown:g,marketTimer:N,rateChange:ee,isSwapConfirmMpdal:_,fromCoinBlance:de,toCoinBlance:me,poolInfo:j,chainName:S,swapRouterLoading:Re,formatFee:Vo,calculating:b,currentRate:io,currentRateReverse:lo,getCoinIcon:on,toAddLiquidiPoolInfo:$e,decimalUi:he,warningToCoin:ge,warningFromCoin:Pe,isShowRouterModal:nn,toSwapLoading:tn,insufficientLiquidity:O,routerPool:to,routerTotalAmounts:po,store:E,suiPreSwapdata:Ke,suiSwapFee:bo,suiSwapFeeUi:Co,addCommom:K,debounce:ze,notFoundRouter:Se,getSuiAmountAccept:So,isShowAccept:_e,getSuiAmount:yo,tradeTabList:["Swap"],isInitSwapRouter:_o}}});const ke=e=>(Le("data-v-39b0fbf4"),e=e(),De(),e),Ei={class:"swap-container"},Fi={class:"title"},Li={class:"left"},Di={class:"right title-right"},Wi=ke(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Yi={class:"swap-card"},Ji={class:"card-container"},qi=ke(()=>o("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),Zi=[qi],Ki={key:1,class:"induction"},Xi={key:0,class:"exchange-rate-btn"},Qi={key:0},zi={key:0},Hi={key:0},Vi={key:1},Gi={key:0},xi=ke(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),el=ke(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ol=[xi,el],nl={class:"item"},tl={class:"induction-text"},sl={key:0,class:"icon","aria-hidden":"true"},al=ke(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),il=[al],ll={class:"item"},rl={class:"induction-text"},ul={key:0,class:"induction-value"},dl={class:"item"},cl={class:"induction-text"},ml={key:0,class:"induction-value"},vl={key:0,class:"icon","aria-hidden":"true"},fl=ke(()=>o("use",{"xlink:href":"#icon-icon-swap"},null,-1)),hl=[fl],pl={key:2,class:"token-info-container"},gl={class:"token-info-title"},Cl=ke(()=>o("span",{class:"coingecko"},"Price Reference",-1)),bl=ke(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1));function wl(e,p,I,v,E,q){var n,s;const c=dn,P=cn,k=Tt,Z=Bo,G=Mo,ee=Eo,_=kn,U=An,r=yn,oe=To,se=ds,A=Sn,V=ma,F=ji,b=Fe("image");return i(),h("div",Ei,[o("div",Fi,[o("div",Li,[o("div",null,d(e.$t("menu.swap")),1)]),o("div",Di,[o("div",{class:"slippage-icon",onClick:p[0]||(p[0]=w=>e.isShowSwapSetting=!0)},[Wi,o("span",null,d(e.slippage)+"%",1)]),Ce(c,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),o("div",Yi,[o("div",Ji,[o("div",{class:ae(["card-item",!e.fixedFromCoin&&e.swapRouterLoading?"card-item-mask":""])},[Ce(P,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":p[1]||(p[1]=w=>e.fromCoinAmount=w),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From",onOnMax:p[2]||(p[2]=w=>e.maxBtnSelect("fromCoin")),onOnHalf:p[3]||(p[3]=w=>e.halfBtnSelect("fromCoin")),onOnInput:p[4]||(p[4]=w=>{e.fromCoinAmount=w,e.fixedFromCoin=!0}),onOnSelect:p[5]||(p[5]=w=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])],2),o("div",{class:ae(["card-item",e.fixedFromCoin&&e.swapRouterLoading?"card-item-mask":""])},[Ce(P,{modelValue:e.toCoinAmount,"onUpdate:modelValue":p[6]||(p[6]=w=>e.toCoinAmount=w),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",havehalf:!1,onOnInput:p[7]||(p[7]=w=>{e.toCoinAmount=w,e.fixedFromCoin=!1}),onOnSelect:p[8]||(p[8]=w=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])],2),o("img",{class:ae(e.change?"gang animationex":"gang"),src:_n,alt:""},null,2),o("div",{class:ae(["exchange",e.chainName=="Sui"?"sui-exchange":""]),onClick:p[9]||(p[9]=(...w)=>e.debounceClickExchange&&e.debounceClickExchange(...w))},[(i(),h("svg",{class:ae(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Zi,2))],2)]),e.chainName=="Sui"&&!e.notFoundRouter?(i(),X(k,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.impact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFeeUi,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):e.poolInfo&&e.fromCoinAmount&&e.toCoinAmount&&e.fromCoinAmount!=="0"&&e.toCoinAmount!=="0"&&e.swapBtnText!==e.$t("button.poolNotFound")?(i(),h("div",Ki,[Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(i(),h("div",Xi,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(i(),h("span",Vi,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(i(),h("span",Gi,[x(o("img",null,null,512),[[b,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),J(" 1 "+d(e.toCoin.symbol)+" â‰ˆ ",1),x(o("img",null,null,512),[[b,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),o("span",null,d(("addCommom"in e?e.addCommom:Q(K))(("decimalUi"in e?e.decimalUi:Q(he))(e.currentRateReverse,e.fromCoin.decimals),e.fromCoin.decimals)),1),J(" Â "+d(e.fromCoin.symbol),1)])):(i(),X(Z,{key:1,indicator:e.indicator},null,8,["indicator"]))])):T("",!0):(i(),h("span",Qi,[x(o("img",null,null,512),[[b,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),J(" 1 "+d(e.fromCoin.symbol)+" â‰ˆ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(i(),h("span",zi,[x(o("img",null,null,512),[[b,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),e.calculating?T("",!0):(i(),h("span",Hi,d(("addCommom"in e?e.addCommom:Q(K))(("decimalUi"in e?e.decimalUi:Q(he))(e.currentRate,e.toCoin.decimals))),1)),e.calculating?(i(),X(Z,{key:1,indicator:e.indicator},null,8,["indicator"])):T("",!0),J(" Â "+d(e.toCoin.symbol),1)])):(i(),X(Z,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"icon-change",onClick:p[10]||(p[10]=w=>e.rateChange=!e.rateChange)},ol)])):T("",!0),Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(i(),h(Te,{key:1},[o("div",nl,[o("div",tl,d(e.$t("common.priceImpact")),1),e.swaping?(i(),X(G,{key:1,paragraph:!1,active:""})):(i(),h("div",{key:0,class:ae(["induction-value",Number(e.impact)<1?"impact-s":Number(e.impact)<10&&Number(e.impact)>1?"impact-w":"impact-e"])},[J(d(Number(e.impact)<.01?"<0.01":Number(e.impact)>100?"100":e.impact)+"% ",1),e.impact>=10?(i(),h("svg",sl,il)):T("",!0)],2))]),o("div",ll,[o("div",rl,d(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swaping?(i(),X(G,{key:1,paragraph:!1,active:""})):(i(),h("div",ul,d(e.fixedFromCoin?("addCommom"in e?e.addCommom:Q(K))(("fixD"in e?e.fixD:Q(He))(Number(e.toCoinAmount)-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals),e.toCoin.decimals):("addCommom"in e?e.addCommom:Q(K))(("fixD"in e?e.fixD:Q(He))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals),e.fromCoin.decimals))+" "+d(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",dl,[o("div",cl,d(e.$t("common.fee")),1),e.swaping?(i(),X(G,{key:1,paragraph:!1,active:""})):(i(),h("div",ml,d(("addCommom"in e?e.addCommom:Q(K))(e.formatFee,e.fromCoin.decimals))+" "+d(e.fromCoin.symbol)+" ("+d(e.chainName=="Aptos"?e.poolInfo.fee*100:((n=e.toAddLiquidiPoolInfo)==null?void 0:n.fee)*100)+"%) ",1))])],64)):T("",!0)])):T("",!0)]),Ce(ee,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((s=e.poolInfo)==null?void 0:s.is_pause)||e.swapRouterLoading:!1,class:"big-btn",loading:e.swaping,onClick:p[11]||(p[11]=w=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:ce(()=>[e.wallet.connected?(i(),h("svg",vl,hl)):T("",!0),o("span",null,d(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),Ce(_),e.showCoinSelect?(i(),X(U,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"have-import-btn":!0,onOnSelect:e.onCoinSelect,onOnClose:p[12]||(p[12]=w=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):T("",!0),e.isShowSwapSetting?(i(),X(r,{key:1,onOnClose:p[13]||(p[13]=w=>e.isShowSwapSetting=!1)})):T("",!0),e.chainName&&(e.formCoinMarket||e.toCoinMarket)?(i(),h("div",pl,[o("div",gl,[Cl,Ce(oe,{placement:"top","arrow-point-at-center":""},{title:ce(()=>[J(" The following price is only an external reference from 3rd party data providers, which does not reflect actual data on Cetus. ")]),default:ce(()=>[bl]),_:1})]),e.fromCoin&&e.formCoinMarket?(i(),X(se,{key:0,id:e.formCoinId,coin:e.fromCoin,market:e.formCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):T("",!0),e.toCoin&&e.toCoinMarket?(i(),X(se,{key:1,id:e.toCoinId,coin:e.toCoin,market:e.toCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):T("",!0)])):T("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(i(),X(A,{key:3,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,"is-import-modal":!0,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):T("",!0),e.isShowRouterModal?(i(),X(V,{key:4,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,onOnClose:p[14]||(p[14]=w=>e.store.setIsShowRouterModal(!1))},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount"])):T("",!0),e.isSwapConfirmMpdal?(i(),X(F,{key:5,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.impact,"fixed-from-coin":e.fixedFromCoin,fee:e.chainName=="Sui"?e.suiSwapFeeUi:e.poolInfo.fee,"format-fee":e.chainName=="Sui"?e.suiSwapFeeUi:e.formatFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,"one-from-amount":e.oneFromAmount,"one-to-amount":e.oneToAmount,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","one-from-amount","one-to-amount","onOnClose","onToSwap","onAccept"])):T("",!0)])}const Hl=Ee(Ui,[["render",wl],["__scopeId","data-v-39b0fbf4"]]);export{Hl as default};
