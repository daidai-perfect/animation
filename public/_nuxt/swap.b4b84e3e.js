import{_ as cn}from"./refresh-icon.5488e579.js";import{_ as mn}from"./assets-card.66abae91.js";import{e as le,b as Oe,u as Le,c as so,d as we,s as re,h as X,a as $o,m as Ve,l as he,r as Qe,f as Ro,L as vn,x as fn,w as ze,p as No}from"./pool.72e6880c.js";import{e as Be,a as De,J as Oo,L as Bo,r as g,m as $,D as x,q as We,o as i,f as p,h as o,c as K,x as B,t as ee,j as Z,v as d,z as ae,F as Fe,u as Q,S as Mo,N as To,p as Me,k as Te,X as hn,i as Ce,w as me,U as jo,R as Uo,T as Eo,s as Po,B as Fo,b as pn,l as gn,y as Cn,C as wn,a2 as He}from"./entry.a800e351.js";import"./index.b6cdaf66.js";/* empty css              */import{i as pe}from"./import-icon.de3e6c66.js";import{D as a}from"./decimal.0bdeb344.js";import{_ as bn}from"./route-view.2fe7bebf.js";import{_ as kn}from"./coin-select.8f62b7dd.js";import{_ as An}from"./swap-setting.c1f96208.js";/* empty css              */import{_ as yn}from"./token-warning-modal.c7363d62.js";import{_ as Sn}from"./img-leverage_2x.1c577303.js";/* empty css              */import"./token-warning.34ad6e94.js";/* empty css              */import"./token-warning_2x.83ce00fd.js";import"./img-no-Positions_2x.585c8d1c.js";import"./img-no-Positions_2x.67c2bef3.js";/* empty css              */import"./icon-warning_2x.49e8800f.js";import"./icon-error_2x.7d5dfce8.js";import"./icon-selected_3x.09e9a6f0.js";async function _n(e,h){var U,E,c;const S=e==="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":e,m=`${le.Sui.api}/v2/sui/coin/kline?coin_address=${S}&interval=day&market=${h}`;try{const P=await $fetch(m);return{price:((E=(U=P==null?void 0:P.data)==null?void 0:U.list)==null?void 0:E.reverse())||[],daily_rate:(c=P==null?void 0:P.data)==null?void 0:c.daily_rate.replace("%","")}}catch{return{price:[],daily_rate:""}}}async function In(e){try{const{prices:h}=await $fetch(`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&id=${e}&days=7&interval=daily`,{headers:{Connection:"keep-alive",Accept:"*/*"}}),m=(await $fetch(`https://api.coingecko.com/api/v3/coins/markets?ids=${e}&vs_currency=usd&price_change_percentage=24h`,{headers:{Connection:"keep-alive",Accept:"*/*"}}))[0].price_change_percentage_24h,U=[];return h.forEach(E=>{U.push({price:new a(E[1]).toString(),timestamp:E[0]})}),{price:U,daily_rate:m}}catch{return{price:[],daily_rate:""}}}const Nn=De({props:{swapLoading:{type:Boolean,default:!1},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},impact:{type:String,default:""},insufficientLiquidity:{type:Boolean,default:!1},oneToAmount:{type:String,default:""},oneFromAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})},suiSwapFee:{type:String,default:""},swapRouterLoading:{type:Boolean,default:!1}},setup(e){const h=Oo(Bo,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),S=g(!1),m=Oe(),U=$(()=>m),E=$(()=>U.value.slippage),c=$(()=>U.isShowRouterModal),P=Le(),k=$(()=>P),L=so("Sui"),G=g(0),oe=g([]),I=g({});x(()=>e.suiPreSwapdata,async n=>{var s;if(n&&!we(n)){let b=[];(s=n==null?void 0:n.splitPaths)==null||s.forEach(O=>{O==null||O.basePaths.forEach(async Y=>{b.push(Y.label)})});const{splitPaths:C}=n,N=C&&C[0]&&C[0].basePaths;if(C&&C.length==1&&N&&N.length==2){const O=N[0].toCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":N[0].toCoin;I.value=k.value.tokensObj[O]||(await L.getTokenListByCoinType[O])[0]}else I.value="";oe.value=Array.from(new Set(b)),G.value=oe.value.length}},{immediate:!0});const F=g(0),r=g(0);x(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,E.value],([n,s,b,C,N,O])=>{if(n&&s&&b&&C&&O)if(N){const Y=new a(s).mul(new a(O/100));r.value=new a(s).sub(Y).toString()}else{const Y=new a(n).mul(new a(O/100));F.value=new a(n).add(Y).toString()}},{immediate:!0});const ne=n=>{var s;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((s=k.value.tokensObj[n==null?void 0:n.address])==null?void 0:s.logo_url)||(U.theme==="default"?pe("/image/coins/unknown.png"):pe("/image/coins/sui-unknown.png"))},se=$(()=>{var n,s,b,C,N,O,Y,_,q;return(b=(s=k==null?void 0:k.value)==null?void 0:s.tokensObj[(n=e.fromCoin)==null?void 0:n.address])!=null&&b.pyth_id&&((O=(N=k==null?void 0:k.value)==null?void 0:N.tokensObj[(C=e.fromCoin)==null?void 0:C.address])==null?void 0:O.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(q=(_=k==null?void 0:k.value)==null?void 0:_.tokensObj[(Y=e.fromCoin)==null?void 0:Y.address])!=null&&q.coingecko_id?"coingecko":null}),A=$(()=>{var n,s,b,C,N,O,Y,_,q;return(b=(s=k==null?void 0:k.value)==null?void 0:s.tokensObj[(n=e.toCoin)==null?void 0:n.address])!=null&&b.pyth_id&&((O=(N=k==null?void 0:k.value)==null?void 0:N.tokensObj[(C=e.toCoin)==null?void 0:C.address])==null?void 0:O.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(q=(_=k==null?void 0:k.value)==null?void 0:_.tokensObj[(Y=e.toCoin)==null?void 0:Y.address])!=null&&q.coingecko_id?"coingecko":null}),V=g(""),D=async()=>{const n=k.value.tokenExternalPriceObj[e.fromCoin.address],s=k.value.tokenExternalPriceObj[e.toCoin.address];if(n&&s){const b=new a(n).div(new a(s)),C=new a(e.oneToAmount.replace(new RegExp(/,/g),"")).sub(b).div(b).mul(100);let N=Math.abs(re(C,2));b.toNumber()<Number(e.oneToAmount.replace(new RegExp(/,/g),""))?V.value="":(V.value=C>0&&C<=.01?"0.01":N,console.log(n,s,C.toString(),"##367"))}else V.value=""},w=n=>{if(n<5)return"color-s";if(n>=5&&n<10)return"color-w";if(n>=10)return"color-e"};return x(()=>[e.oneToAmount,k.value.tokenExternalPriceObj],([n,s])=>{n&&s&&!we(s)&&D()},{immediate:!0,deep:!0}),{sFixD:re,getCoinIcon:ne,indicator:h,rateChange:S,slippage:E,isShowRouterModal:c,indexStore:m,maximumSold:F,minimumReceived:r,addCommom:X,pathLength:G,sourcesArr:oe,coinTypeB:I,priceExangeRate:V,getTextColor:w,formCoinMarket:se,toCoinMarket:A}}}),ue=e=>(Me("data-v-313b8a7f"),e=e(),Te(),e),Pn={key:0,class:"swap-info"},$n={class:"loading-swap"},Rn={key:1,class:"swap-rate"},On={key:0},Bn={key:0,class:"after-amount"},Mn={key:1},Tn={key:0,class:"after-amount"},jn=ue(()=>o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})],-1)),Un=ue(()=>o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})],-1)),En=[jn,Un],Fn={key:2,class:"swap-exchange-rate"},Ln={class:"swap-exchange-rate-content"},Dn={key:0},Wn=["href"],Jn=ue(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Yn=[Jn],qn={key:1},Zn=["href"],Xn=ue(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Kn=[Xn],Qn={key:0},zn=["href"],Hn=ue(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Vn=[Hn],Gn={key:1},xn=["href"],et=ue(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),ot=[et],nt={key:2},tt=["href"],st=ue(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),at=[st],it={key:3},lt=["href"],rt=ue(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),ut=[rt],dt={key:3},ct={class:"trade-info"},mt={class:"trade-block"},vt=ue(()=>o("div",{class:"lebal"},"Price Impact",-1)),ft={key:0,class:"icon","aria-hidden":"true"},ht=ue(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),pt=[ht],gt={class:"trade-block"},Ct={class:"lebal"},wt={key:0,class:"text"},bt={class:"trade-block"},kt=ue(()=>o("div",{class:"lebal"},"Fee",-1)),At={key:0,class:"text"},yt={key:0,class:"trade-block"},St=ue(()=>o("div",{class:"lebal"},"Route",-1)),_t={key:0,class:"text text-box"},It=["src"],Nt=["src"],Pt={key:1,class:"text text-box"},$t=["src"],Rt=["src"],Ot=ue(()=>o("img",{src:bn,alt:""},null,-1));function Bt(e,h,S,m,U,E){var L,G,oe,I;const c=Mo,P=To,k=We("image");return e.swapLoading||Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&!e.insufficientLiquidity?(i(),p("div",Pn,[o("div",$n,[e.swapLoading||e.swapRouterLoading?(i(),K(c,{key:0,size:"small",indicator:e.indicator},null,8,["indicator"])):B("",!0),e.swapLoading?B("",!0):(i(),p("div",Rn,[e.rateChange?(i(),p("span",Mn,[e.fromCoinAmount&&e.toCoinAmount?(i(),p("span",Tn,[ee(o("img",null,null,512),[[k,e.getCoinIcon(e.toCoin)]]),Z(" 1 "+d(e.toCoin.symbol)+" ≈ ",1),ee(o("img",null,null,512),[[k,e.getCoinIcon(e.fromCoin)]]),Z(d(e.oneFromAmount==1/0?0:e.oneFromAmount)+" "+d(e.fromCoin.symbol),1)])):(i(),K(c,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(i(),p("span",On,[ee(o("img",null,null,512),[[k,e.getCoinIcon(e.fromCoin)]]),Z(" 1 "+d(e.fromCoin.symbol)+" ≈ ",1),e.fromCoinAmount&&e.toCoinAmount?(i(),p("span",Bn,[ee(o("img",null,null,512),[[k,e.getCoinIcon(e.toCoin)]]),Z(d(e.oneToAmount==1/0?0:e.oneToAmount)+" "+d(e.toCoin.symbol),1)])):(i(),K(c,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"right",onClick:h[0]||(h[0]=F=>e.rateChange=!e.rateChange)},En)])),!e.swapLoading&&e.priceExangeRate!==""&&e.priceExangeRate>10?(i(),p("div",Fn,[o("div",Ln,[o("p",null,[o("span",{class:ae(e.getTextColor(e.priceExangeRate))},"Within ~"+d(e.priceExangeRate)+"% of",3)]),e.formCoinMarket=="pyth"&&e.toCoinMarket=="pyth"?(i(),p("span",Dn,[Z("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.fromCoin.pyth_id}&ids[]=${e.toCoin.pyth_id}`,target:"_blank"},Yn,8,Wn)])):e.formCoinMarket=="coingecko"&&e.toCoinMarket=="coingecko"?(i(),p("span",qn,[Z("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.fromCoin.coingecko_id},${e.toCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},Kn,8,Zn)])):e.formCoinMarket!==e.toCoinMarket?(i(),p(Fe,{key:2},[e.formCoinMarket=="pyth"?(i(),p("span",Qn,[Z("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.fromCoin.pyth_id}`,target:"_blank"},Vn,8,zn)])):e.formCoinMarket=="coingecko"?(i(),p("span",Gn,[Z("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.fromCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},ot,8,xn)])):B("",!0),e.toCoinMarket=="coingecko"?(i(),p("span",nt,[Z("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.toCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},at,8,tt)])):e.toCoinMarket=="pyth"?(i(),p("span",it,[Z("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.toCoin.pyth_id}`,target:"_blank"},ut,8,lt)])):B("",!0)],64)):B("",!0)])])):e.swapLoading?(i(),p("span",dt,"Best route and price")):B("",!0)]),o("div",ct,[o("div",mt,[vt,e.swapRouterLoading?(i(),K(P,{key:1,paragraph:!1,active:""})):(i(),p("div",{key:0,class:ae(["text",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[Z(d(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(i(),p("svg",ft,pt)):B("",!0)],2))]),o("div",gt,[o("div",Ct,d(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swapRouterLoading?(i(),K(P,{key:1,paragraph:!1,active:""})):(i(),p("div",wt,d(e.fixedFromCoin?("addCommom"in e?e.addCommom:Q(X))(("sFixD"in e?e.sFixD:Q(re))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:Q(X))(("sFixD"in e?e.sFixD:Q(re))(e.maximumSold,e.fromCoin.decimals)))+" "+d(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",bt,[kt,e.swapRouterLoading?(i(),K(P,{key:1,paragraph:!1,active:""})):(i(),p("div",At,d(e.suiSwapFee)+" "+d(e.fromCoin.symbol),1))]),e.insufficientLiquidity?B("",!0):(i(),p("div",yt,[St,e.swapRouterLoading?(i(),K(P,{key:1,paragraph:!1,active:""})):(i(),p("div",{key:0,class:"text",onClick:h[1]||(h[1]=F=>e.indexStore.setIsShowRouterModal(!e.isShowRouterModal))},[!e.swapRouterLoading&&e.suiPreSwapdata&&e.suiPreSwapdata.splitPaths&&e.suiPreSwapdata.splitPaths.length==1?(i(),p("div",_t,[o("span",null,d(e.fromCoin.symbol)+" "+d(e.coinTypeB&&((L=e.coinTypeB)!=null&&L.symbol)?`> ${(G=e.coinTypeB)==null?void 0:G.symbol}`:"")+" > "+d(e.toCoin.symbol),1),o("img",{src:e.sourcesArr[0]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,It),e.sourcesArr[1]?(i(),p("img",{key:0,src:e.sourcesArr[1]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,Nt)):B("",!0)])):e.swapRouterLoading?B("",!0):(i(),p("div",Pt,[Z(d((I=(oe=e.suiPreSwapdata)==null?void 0:oe.splitPaths)==null?void 0:I.length)+" Streams ",1),e.sourcesArr[0]?(i(),p("img",{key:0,src:e.sourcesArr[0]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,$t)):B("",!0),e.sourcesArr[1]?(i(),p("img",{key:1,src:e.sourcesArr[1]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,Rt)):B("",!0)])),Ot]))]))])])):B("",!0)}const Mt=Be(Nn,[["render",Bt],["__scopeId","data-v-313b8a7f"]]),Tt=De({setup(){const e=$o(),h=$(()=>e),S=g(""),m=g(!1),U=Oe(),E=$(()=>U);x(()=>h.value.walletNetwork,L=>{S.value=L,L&&E.value.chainName&&L.toLowerCase().indexOf(le[E.value.chainName].network)<0?m.value=!0:m.value=!1},{immediate:!0});const c=$(()=>h.value.aptosConnected),P=g(""),k=g("");return x(()=>E.value.chainName,L=>{L&&(P.value=le[E.value.chainName].network,k.value=E.value.chainName)},{immediate:!0}),{walletNetwork:S,configNetwork:P,isShowTips:m,chainName:k,aptosConnected:c,config:le}}});const jt=e=>(Me("data-v-cd82404a"),e=e(),Te(),e),Ut={key:0,class:"network-tips"},Et=jt(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1));function Ft(e,h,S,m,U,E){return e.isShowTips&&e.chainName==="Aptos"&&e.aptosConnected?(i(),p("div",Ut,[Et,o("span",null,d(e.$t("newAdd.walletNotConnect",{network:`${("config"in e?e.config:Q(le))[e.chainName].networkTip}`})),1)])):B("",!0)}const Lt=Be(Tt,[["render",Ft],["__scopeId","data-v-cd82404a"]]),Dt={props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""},market:{type:String,default:""}},setup(e,h){const{$echarts:S}=hn();let m=null,U;const E=g(!0),c=Oe(),P=$(()=>c),k=$(()=>P.value.chainName),L=$(()=>le[k.value]),G=Le(),oe=$(()=>G),I=(n,s,b)=>{U={xAxis:{type:"category",boundaryGap:!1,show:!1,data:s},yAxis:{type:"value",show:!1,min:function(C){return C.min-C.min*.1},max:function(C){return C.max+C.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:P.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function(C){return`<div class="chart-tip">
              <div>${C&&C[0]&&C[0].name}</div>
              <div>$${he(C&&C[0]&&C[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:P.value.chainName=="Aptos"?"#0C4535":"#2E546D"},{offset:1,color:P.value.chainName=="Aptos"?"#151817":"#1B1B1B"}]},series:[{data:n,type:"line",showSymbol:!1,areaStyle:{},lineStyle:{color:P.value.chainName=="Aptos"?"#68FFD8":"#76C8FF",width:2,type:"solid"}}]},U&&m.clear(),U&&m.setOption(U,!0),m.resize(),E.value=!1},F=g(""),r=g(""),ne=async n=>{var Y,_,q;const s=[],b=[],{price:C,daily_rate:N}=k.value==="Aptos"?await In(n):await _n(n,e.market);k.value=="Sui"&&G.setTokenExternalPrice(e.coin.address,(Y=C[C.length-1])==null?void 0:Y.price),F.value=N,r.value=C&&C.length>=1&&C[C.length-1].price,k.value==="Aptos"?C.forEach(l=>{s.push(l.price);const v=Qe(Number(l.timestamp),"MD"),fe=Qe(Number(l.timestamp),"HM");b.push(v+" "+fe)}):C.forEach(l=>{s.push(l.price);const v=Qe(new a(l.timestamp).mul(1e3).toNumber(),"MD"),fe=Qe(new a(l.timestamp).mul(1e3).toNumber(),"HM");b.push(v+" "+fe)});let O=document.getElementById(`main${(_=e.coin)==null?void 0:_.name}`);m=S.init(O),I(s,b,(q=e.coin)==null?void 0:q.name)};x(()=>e.id,(n,s)=>{n&&(F.value="",r.value="",setTimeout(()=>{ne(n)},1e3))},{immediate:!0});const se=g(""),A=g(""),V=g(""),D=g("");return x(()=>[oe.value.tokensObj,e.coin],([n,s])=>{var b,C;n&&s&&n[s.address]&&(A.value=((b=n[s.address])==null?void 0:b.labels)&&((C=n[s.address])==null?void 0:C.labels[0]),se.value=n[s.address].name,V.value=n[s.address].symbol,D.value=n[s.address].address)},{immediate:!0,deep:!0}),x(()=>e.refresh,n=>{n&&ne(e.id)}),{theme:$(()=>P.value.theme),store:c,importIcon:pe,fixD:Ve,config:L,price_rate_24h:F,nowPrice:r,coinName:se,coinLabels:A,coinSymbol:V,address:D,decimalUi:he}}},Wt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAk1BMVEUAAADn2v/m2//r2//v4//n2v/55P/n2v/o3P//+P/m2v/n2f/n2v/n2v/n2v/n2v/n2v/o2//p2//n3f/o3v/n2f/n2v/n2v/n2v/n2v/n2//o2v/q3f/r4f/u3f/n2v/o2v/n2//p3P/o3P/m2v/n2v/n2f/n2v/o2f/n2//r3f/t3P/n2v/m2v/o2v/r3v/m2f/tUDLHAAAAMHRSTlMAl5oyFNMJqSwFhvvr5d7Yr2FGNSD0zb2lkIltOhkOxoJoT0D48aJzWFYlHeB8Wief0nHAAAABSElEQVQ4y52Q53LCMBCEZWK5g0swBpveQknZ93+6rFxAHkSYyf6x9+67JqHLKxOZRzJJbWHStkCn0Fo8pG0XuvJv0dciBjVZb+dZeoxABb38MlbpXeucr5z2QwdUf8vX1h0ByLT9aAeCGlez4Ozw5zoE4nvFBJB0yymUhqp0B2DT5ec0O+YlWlUMJsCqAwJA8jNV1W4RAnuvqepeYwWsOR/AkfM9ji8YjYBTC3wCZyEq1jvKnoCQP8X90j0wF2IGuM2jArjUE8sWAPAmxACwavtDf623XJsBtoqa2zcm4MI8Ag7iNZkBeAcVc8cUOPhPgJjP4I/UzkYgKtWxpQqaAGfMvvUATIUBaOQHAEb2M2CZcj4OnrhJasDYXYVQ9Vpe2LJ/BeWyf4/oAXlC25e9uI0IqswRJulX/BOwXgG2JPCCIPA3sXmM/QK1PTc8LGCPoAAAAABJRU5ErkJggg==",Jt="data:image/png;base64,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",Yt="data:image/png;base64,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";const qt=e=>(Me("data-v-e4cfffe1"),e=e(),Te(),e),Zt={class:"token-info"},Xt={class:"token-info-padding"},Kt={class:"token-info-header"},Qt={class:"left"},zt=["onerror"],Ht={class:"name"},Vt={class:"desc"},Gt={key:0},xt={class:"right"},es={class:"price-info"},os={key:0,src:Wt,alt:""},ns={key:1,src:Jt,alt:""},ts={key:2,src:Yt,alt:""},ss={class:"token-info-footer"},as={class:"left"},is={class:"address"},ls={key:0,class:"pc-address"},rs={key:1,class:"pc-address"},us={class:"h5-address"},ds=qt(()=>o("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),cs=[ds],ms={class:"right"},vs=["id"];function fs(e,h,S,m,U,E){var k;const c=jo,P=We("image");return i(),p("div",Zt,[o("div",Xt,[o("div",Kt,[o("div",Qt,[ee(o("img",{onerror:m.theme=="default"?m.importIcon("/image/coins/unknown.png"):m.importIcon("/image/coins/sui-unknown.png")},null,8,zt),[[P,S.coin.logoURI||m.importIcon(`/image/coins/${S.coin.symbol.toLowerCase()}.png`)]]),o("div",null,[o("div",Ht,d(m.coinSymbol),1),o("div",Vt,[o("span",null,[Z(d(m.coinName)+" ",1),m.theme!=="sui"?(i(),p("span",Gt,d(m.coinLabels?`(${m.coinLabels})`:""),1)):B("",!0)])])])]),o("div",xt,[Ce(c,{placement:"top","arrow-point-at-center":""},{title:me(()=>[Z(d(S.market==="pyth"?"Data source: Pyth Network":S.market==="coingecko"?"Data source: CoinGecko":"Data source: Birdeye"),1)]),default:me(()=>[o("div",es,[S.market==="pyth"?(i(),p("img",os)):S.market==="coingecko"?(i(),p("img",ns)):S.market==="birdeye"?(i(),p("img",ts)):B("",!0),o("span",null,"$"+d(m.nowPrice?Number(m.nowPrice)<1?m.decimalUi(m.nowPrice,4):m.fixD(m.nowPrice,2):"--"),1),m.price_rate_24h?(i(),p("i",{key:3,class:ae(m.price_rate_24h>0?"up":m.price_rate_24h<0?"down":"up")},d(m.price_rate_24h>0?`+ ${m.fixD(m.price_rate_24h,2)}`:m.price_rate_24h<0?+`${m.fixD(m.price_rate_24h,2)}`:`+${m.fixD(m.price_rate_24h,2)}`)+"%",3)):B("",!0)])]),_:1})])]),o("div",ss,[o("div",as,[o("div",is,[S.coin&&m.address!=="0x2::sui::SUI"?(i(),p("span",ls,d(S.coin&&S.coin.address.substr(0,13))+" ... "+d(S.coin&&S.coin.address.substr(S.coin.address.length-13,13)),1)):(i(),p("span",rs,d(S.coin&&S.coin.address),1)),o("span",us,d(S.coin&&S.coin.address.substr(0,4))+" ... "+d(S.coin&&S.coin.address.substr(S.coin.address.length-4,4)),1),(i(),p("svg",{class:"icon","aria-hidden":"true",onClick:h[0]||(h[0]=L=>m.store.copy(S.coin&&S.coin.address))},cs))])]),o("div",ms,[o("div",{id:`main${(k=S.coin)==null?void 0:k.name}`,class:"main"},null,8,vs)])])])])}const hs=Be(Dt,[["render",fs],["__scopeId","data-v-e4cfffe1"]]);const ps=De({components:{Modal:Uo},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e){const h=Le(),S=so("Sui"),m=$(()=>h);$(()=>{var I,F;return(F=(I=m.value)==null?void 0:I.poolInfo)==null?void 0:F.needReverse});const U=g([]),E=g({});x(()=>[e.suiPreSwapdata,e.fromCoin,e.toCoin],async([I,F,r])=>{if(I&&!we(I)){let ne=[];I.splitPaths.sort((w,n)=>n.outputAmount-w.outputAmount);for(let w=0;w<I.splitPaths.length;w++){const n=I.splitPaths[w],s={...n,amountIn:new a(n.inputAmount).div(new a(Math.pow(10,F.decimals))).toString(),amountOut:new a(n.outputAmount).div(new a(Math.pow(10,r.decimals))).toString()};let b=[];for(let C=0;C<n.basePaths.length;C++){const N=n.basePaths[C],O=N.fromCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":N.fromCoin,Y=N.toCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":N.toCoin,_=m.value.tokensObj[O]||(await S.getTokenListByCoinType([O]))[0],q=m.value.tokensObj[Y]||(await S.getTokenListByCoinType([Y]))[0];console.log("🚀🚀🚀 ~ file: swap-router-modal.vue:252 ~ watch ~ pools.value.routerPoolConfigObj[basePath.poolAddress]:",m.value.routerPoolConfigObj[N.poolAddress]),(N==null?void 0:N.label)=="Deepbook"?b.push({...N,...m.value.routerPoolConfigObj[N.poolAddress],feeRate:new a(N.feeRate).div(new a(Math.pow(10,9))),token_a:_,token_b:q}):b.push({...N,...m.value.routerPoolConfigObj[N.poolAddress],feeRate:new a(N.feeRate).div(new a(Math.pow(10,6)))})}ne.push({...s,basePaths:b})}U.value=ne,console.log("🚀🚀🚀 ~ file: swap-router-modal.vue:271 ~ watch ~ routerArr:",ne);const se=[];let A=new a(0);ne.forEach(w=>{const n=new a(w.percent).gt(0)?new a(w.percent).div(100).mul(100).toString():0,s=re(n,2);A=A.plus(s);const b=s.split(".");se.push({value:s,int:b[0],decimal:b[1],pathIndex:w.pathIndex})});let V=new a(100).minus(A).toNumber();const D=se.sort((w,n)=>Number(n.decimal)-Number(w.decimal));if(V)for(let w=0;w<D.length&&V;w++)D[w].value=new a(D[w].value).plus(.01).toString(),V=new a(V).minus(.01).toNumber();E.value=Object.fromEntries(D.map((w,n)=>[w.pathIndex,w]))}},{immediate:!0});const c=Oe(),P=$(()=>c),k=I=>{var F;return(I==null?void 0:I.logoURI)||(I==null?void 0:I.logo_url)||((F=m.value.tokensObj[(I==null?void 0:I.address)=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":I==null?void 0:I.address])==null?void 0:F.logo_url)||(P.value.theme==="default"?pe("/image/coins/unknown.png"):pe("/image/coins/sui-unknown.png"))},L=async I=>{const F=(await S.getTokenListByCoinType([I]))[0];return F&&!we(F)?F==null?void 0:F.logo_url:""},G=$(()=>m.value.tokensObj),oe=$(()=>P.value.currentExplorer);return{addCommom:X,routerStep:U,getCoinIcon:k,getDeepBookLogo:L,percentObj:E,tokensObj:G,store:P,getExplorerUrl:Ro,currentExplorer:oe}}}),be=e=>(Me("data-v-76c0b61b"),e=e(),Te(),e),gs=be(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Cs={class:"route-top"},ws={class:"token-a"},bs={alt:""},ks={class:"token-num"},As={class:"token-symbol"},ys={class:"token-b"},Ss={class:"token-num"},_s={class:"token-symbol"},Is={alt:""},Ns={class:"route-bottom"},Ps=be(()=>o("div",{class:"left-round"},null,-1)),$s=be(()=>o("div",{class:"right-round"},null,-1)),Rs={class:"percent-text"},Os={class:"amount"},Bs={class:"symbol"},Ms={class:"percent-ratio"},Ts={class:"percent-text"},js={class:"amount"},Us={class:"symbol"},Es={class:"pool-info-box"},Fs={key:0,class:"icon","aria-hidden":"true"},Ls=be(()=>o("use",{"xlink:href":"#icon-icon_on1"},null,-1)),Ds=[Ls],Ws={class:"pool-info"},Js={class:"pool-info-top"},Ys={class:"token-a-img",alt:""},qs={class:"token-b-img",alt:""},Zs={class:"source"},Xs=["src"],Ks={class:"pool-info-detail"},Qs={class:"pool-address"},zs=be(()=>o("span",null,"Pool Address",-1)),Hs=["href"],Vs=["onClick"],Gs=be(()=>o("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),xs=[Gs],ea={key:0,class:"token-info-detail"},oa={alt:""},na={class:"token-name"},ta={class:"token-address"},sa=["onClick"],aa=be(()=>o("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),ia=[aa],la={class:"token-symbol"},ra={class:"token-info-detail"},ua={alt:""},da={class:"token-name"},ca={class:"token-address"},ma=["onClick"],va=be(()=>o("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),fa=[va],ha={class:"token-symbol"};function pa(e,h,S,m,U,E){const c=Eo("Modal"),P=We("image");return i(),K(c,{title:"Route",width:"600px",visible:!0,footer:null,onCancel:h[0]||(h[0]=k=>e.$emit("onClose"))},{closeIcon:me(()=>[gs]),default:me(()=>{var k,L,G,oe;return[o("div",Cs,[o("div",ws,[ee(o("img",bs,null,512),[[P,(k=e.fromCoin)==null?void 0:k.logo_url]]),o("span",ks,d(("addCommom"in e?e.addCommom:Q(X))(e.fromCoinAmount)),1),o("span",As,d((L=e.fromCoin)==null?void 0:L.symbol),1)]),o("div",ys,[o("span",Ss,d(("addCommom"in e?e.addCommom:Q(X))(e.toCoinAmount)),1),o("span",_s,d((G=e.toCoin)==null?void 0:G.symbol),1),ee(o("img",Is,null,512),[[P,(oe=e.toCoin)==null?void 0:oe.logo_url]])])]),o("div",Ns,[Ps,$s,(i(!0),p(Fe,null,Po(e.routerStep,(I,F)=>(i(),p("div",{key:F,class:ae(["route-path",F!==0?"route-path-active":""])},[o("div",{class:ae(["percent",F!==0?"percent-active":""])},[o("div",Rs,[o("div",Os,d(("addCommom"in e?e.addCommom:Q(X))(I.amountIn)),1),o("div",Bs,d(e.fromCoin.symbol),1),o("span",Ms,"("+d(e.percentObj&&e.percentObj[I.pathIndex].value)+"%)",1)]),o("div",Ts,[o("div",js,d(("addCommom"in e?e.addCommom:Q(X))(I.amountOut)),1),o("div",Us,d(e.toCoin.symbol),1)])],2),o("div",Es,[I.basePaths&&I.basePaths.length>1?(i(),p("svg",Fs,Ds)):B("",!0),(i(!0),p(Fe,null,Po(I.basePaths,(r,ne)=>{var se,A,V,D,w,n,s,b,C,N,O,Y,_,q,l,v,fe,je,Je,Ye;return i(),p("div",{key:ne},[o("div",Ws,[o("div",Js,[ee(o("img",Ys,null,512),[[P,r.label=="Cetus"?e.getCoinIcon({address:r.fromCoin}):(se=r==null?void 0:r.token_a)==null?void 0:se.logo_url]]),ee(o("img",qs,null,512),[[P,r.label=="Cetus"?e.getCoinIcon({address:r.toCoin}):(A=r==null?void 0:r.token_b)==null?void 0:A.logo_url]]),o("span",null,d((r==null?void 0:r.feeRate)*100)+"%",1)]),o("div",Zs,[o("img",{src:r.label=="Cetus"?"/sui-image/logo_cetus@2x.png":"/sui-image/logo_deepbook@2x.png",alt:""},null,8,Xs),o("span",null,d(r.label=="Cetus"?"Cetus":"DeepBook"),1)]),o("div",{class:ae(["pool-info-detail-box",I.basePaths.length==1?"pool-info-detail-box-center":ne==0?"pool-info-detail-box-left":"pool-info-detail-box-right"])},[o("div",Ks,[o("div",Qs,[zs,o("p",null,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:Q(Ro))(e.currentExplorer,"poolAddress",r==null?void 0:r.poolAddress),target:"_blank"},d(r&&((V=r==null?void 0:r.poolAddress)==null?void 0:V.substr(0,6)))+" ... "+d(r&&((D=r==null?void 0:r.poolAddress)==null?void 0:D.substr(r.poolAddress.length-6,6))),9,Hs),(i(),p("svg",{class:"copy-icon","aria-hidden":"true",onClick:Pe=>e.store.copy(r==null?void 0:r.poolAddress)},xs,8,Vs))])]),r.token_a&&r.token_a?(i(),p("div",ea,[ee(o("img",oa,null,512),[[P,(w=r==null?void 0:r.token_a)==null?void 0:w.logo_url]]),o("div",null,[o("div",null,[o("span",na,d((n=r==null?void 0:r.token_a)==null?void 0:n.symbol),1),o("p",ta,[o("span",null,d((b=(s=r==null?void 0:r.token_a)==null?void 0:s.address)==null?void 0:b.substr(0,4))+" ... "+d(r&&((O=(C=r==null?void 0:r.token_a)==null?void 0:C.address)==null?void 0:O.substr(((N=r==null?void 0:r.token_a)==null?void 0:N.address.length)-4,4))),1),(i(),p("svg",{class:"copy-icon","aria-hidden":"true",onClick:Pe=>{var ge;return e.store.copy((ge=r==null?void 0:r.token_a)==null?void 0:ge.address)}},ia,8,sa))])]),o("div",la,d((Y=r==null?void 0:r.token_a)==null?void 0:Y.name),1)])])):B("",!0),o("div",ra,[ee(o("img",ua,null,512),[[P,(_=r==null?void 0:r.token_b)==null?void 0:_.logo_url]]),o("div",null,[o("div",null,[o("span",da,d((q=r==null?void 0:r.token_b)==null?void 0:q.symbol),1),o("p",ca,[o("span",null,d((v=(l=r==null?void 0:r.token_b)==null?void 0:l.address)==null?void 0:v.substr(0,4))+" ... "+d(r&&((Je=(fe=r==null?void 0:r.token_b)==null?void 0:fe.address)==null?void 0:Je.substr(((je=r==null?void 0:r.token_b)==null?void 0:je.address.length)-4,4))),1),(i(),p("svg",{class:"copy-icon","aria-hidden":"true",onClick:Pe=>{var ge;return e.store.copy((ge=r==null?void 0:r.token_b)==null?void 0:ge.address)}},fa,8,ma))])]),o("div",ha,d((Ye=r==null?void 0:r.token_b)==null?void 0:Ye.name),1)])])])],2)])])}),128))])],2))),128))])]}),_:1})}const ga=Be(ps,[["render",pa],["__scopeId","data-v-76c0b61b"]]),Ca=De({components:{Modal:Uo},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},slippage:{type:String,default:""},impact:{type:Number,required:!1},fixedFromCoin:{type:Boolean,default:!1},fee:{type:String,required:!1},formatFee:{type:String,default:""},isShowAccept:{type:Boolean,default:!1},swapLoading:{type:Boolean,required:!1},oneFromAmount:{type:String,default:""},oneToAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e,h){const S=Le(),m=$(()=>S),U=Oe(),E=$(()=>U),c=w=>{var n;return(w==null?void 0:w.logoURI)||(w==null?void 0:w.logo_url)||((n=m.value.tokensObj[w==null?void 0:w.address])==null?void 0:n.logo_url)||(E.value.theme==="default"?pe("/image/coins/unknown.png"):pe("/image/coins/sui-unknown.png"))},P=g(!1),k=$(()=>E.value.chainName),L=async()=>{h.emit("to-swap")};g([]);const G=g(0),oe=g(""),I=g(""),F=$(()=>E.value.slippage);x(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,F.value],([w,n,s,b,C,N])=>{if(w&&n&&s&&b&&N)if(C){const O=new a(n).mul(new a(N/100));I.value=new a(n).sub(O).toString()}else{const O=new a(w).mul(new a(N/100));oe.value=new a(w).add(O).toString()}},{immediate:!0});const r=g(""),ne=$(()=>{var w,n,s,b,C,N,O,Y,_;return(s=(n=m==null?void 0:m.value)==null?void 0:n.tokensObj[(w=e.fromCoin)==null?void 0:w.address])!=null&&s.pyth_id&&((N=(C=m==null?void 0:m.value)==null?void 0:C.tokensObj[(b=e.fromCoin)==null?void 0:b.address])==null?void 0:N.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(_=(Y=m==null?void 0:m.value)==null?void 0:Y.tokensObj[(O=e.fromCoin)==null?void 0:O.address])!=null&&_.coingecko_id?"coingecko":null}),se=$(()=>{var w,n,s,b,C,N,O,Y,_;return(s=(n=m==null?void 0:m.value)==null?void 0:n.tokensObj[(w=e.toCoin)==null?void 0:w.address])!=null&&s.pyth_id&&((N=(C=m==null?void 0:m.value)==null?void 0:C.tokensObj[(b=e.toCoin)==null?void 0:b.address])==null?void 0:N.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(_=(Y=m==null?void 0:m.value)==null?void 0:Y.tokensObj[(O=e.toCoin)==null?void 0:O.address])!=null&&_.coingecko_id?"coingecko":null}),A=async()=>{const w=m.value.tokenExternalPriceObj[e.fromCoin.address],n=m.value.tokenExternalPriceObj[e.toCoin.address];if(w&&n){const s=new a(w).div(new a(n)),b=new a(e.oneToAmount.replace(new RegExp(/,/g),"")).sub(s).div(s).mul(100);let C=Math.abs(re(b,2));s.toNumber()<Number(e.oneToAmount.replace(new RegExp(/,/g),""))?r.value="":r.value=b>0&&b<=.01?"0.01":C}else r.value=""},V=w=>{if(w<5)return"color-s";if(w>=5&&w<10)return"color-w";if(w>=10)return"color-e"};x(()=>[e.oneToAmount,m.value.tokenExternalPriceObj,k.value],([w,n,s])=>{w&&n&&!we(n)&&s!=="Aptos"&&A()},{immediate:!0,deep:!0});const D=g(!1);return{getCoinIcon:c,addCommom:X,sFixD:re,rateChange:P,chainName:k,clickNextBtn:L,pathLength:G,maximumSold:oe,minimumReceived:I,decimalUi:he,getTextColor:V,priceExangeRate:r,formCoinMarket:ne,toCoinMarket:se,readWithin:D}}}),wa=""+globalThis.__publicAssetsURL("sui-image/within-error.png");const ie=e=>(Me("data-v-8cffddfe"),e=e(),Te(),e),ba=ie(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ka={class:"new-swap-contnet"},Aa={class:"coin-info"},ya={class:"from-coin-info"},Sa={class:"left"},_a={class:"coin-amount"},Ia={class:"coin-symbol"},Na={class:"right"},Pa={class:"to-coin-info"},$a={class:"left"},Ra={class:"coin-amount"},Oa={class:"coin-symbol"},Ba={class:"right"},Ma=ie(()=>o("div",{class:"to-swap-logo"},null,-1)),Ta={class:"coin-rate"},ja={key:0,class:"coin-rate-box"},Ua={class:"left"},Ea=ie(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Fa=ie(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),La=[Ea,Fa],Da={key:1,class:"coin-rate-box"},Wa={class:"left"},Ja=ie(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Ya=ie(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),qa=[Ja,Ya],Za={key:2,class:"within-tips-box"},Xa={class:"within-tips"},Ka={key:0},Qa=["href"],za=ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Ha=[za],Va={key:1},Ga=["href"],xa=ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),ei=[xa],oi={key:0},ni=["href"],ti=ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),si=[ti],ai={key:1},ii=["href"],li=ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),ri=[li],ui={key:2},di=["href"],ci=ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),mi=[ci],vi={key:3},fi=["href"],hi=ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),pi=[hi],gi={class:"bottom"},Ci={class:"induction"},wi={class:"item"},bi={class:"induction-text"},ki={class:"induction-value"},Ai={class:"item"},yi={class:"induction-text"},Si={class:"induction-value"},_i={class:"item"},Ii={class:"induction-text"},Ni={key:0,class:"icon","aria-hidden":"true"},Pi=ie(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),$i=[Pi],Ri={class:"item"},Oi={class:"induction-text"},Bi={key:0,class:"induction-value"},Mi={key:1,class:"induction-value"},Ti={key:0,class:"within-desc"},ji=ie(()=>o("div",{class:"within-top"},[o("img",{src:wa,alt:""}),o("span",null,"The exchange rate of this order deviates from the market price by a large percentage. Are you sure you want to continue the swap?")],-1)),Ui={class:"within-bottom"},Ei={key:0,class:"price-updated"},Fi=ie(()=>o("span",null,"Price updated",-1));function Li(e,h,S,m,U,E){const c=Fo,P=Eo("Modal"),k=We("image");return i(),K(P,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal",onCancel:h[7]||(h[7]=L=>e.$emit("on-close"))},{closeIcon:me(()=>[ba]),default:me(()=>[o("div",ka,[o("div",Aa,[o("div",ya,[o("div",Sa,[o("div",_a,d(e.fromCoinAmount&&("addCommom"in e?e.addCommom:Q(X))(e.fromCoinAmount)),1),o("div",Ia,d(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",Na,[ee(o("img",null,null,512),[[k,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]])])]),o("div",Pa,[o("div",$a,[o("div",Ra,d(e.toCoinAmount&&("addCommom"in e?e.addCommom:Q(X))(e.toCoinAmount)),1),o("div",Oa,d(e.toCoin&&e.toCoin.symbol),1)]),o("div",Ba,[ee(o("img",null,null,512),[[k,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]])]),Ma]),o("div",Ta,[e.rateChange?(i(),p("div",Da,[o("div",Wa,[ee(o("img",null,null,512),[[k,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,"1 "+d(e.toCoin&&e.toCoin.symbol)+" ≈",1),ee(o("img",null,null,512),[[k,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,d(e.oneFromAmount)+" "+d(e.fromCoin.symbol),1)]),o("div",{class:"right",onClick:h[1]||(h[1]=L=>e.rateChange=!e.rateChange)},qa)])):(i(),p("div",ja,[o("div",Ua,[ee(o("img",null,null,512),[[k,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,"1 "+d(e.fromCoin&&e.fromCoin.symbol)+" ≈",1),ee(o("img",null,null,512),[[k,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,d(e.oneToAmount)+" "+d(e.toCoin.symbol),1)]),o("div",{class:"right",onClick:h[0]||(h[0]=L=>e.rateChange=!e.rateChange)},La)])),e.chainName=="Sui"&&e.priceExangeRate&&Number(e.priceExangeRate)>10?(i(),p("div",Za,[o("div",Xa,[o("p",null,[o("span",{class:ae(e.getTextColor(e.priceExangeRate))},"Within ~"+d(e.priceExangeRate)+"% of",3)]),e.formCoinMarket=="pyth"&&e.toCoinMarket=="pyth"?(i(),p("span",Ka,[Z("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.fromCoin.pyth_id}&ids[]=${e.toCoin.pyth_id}`,target:"_blank"},Ha,8,Qa)])):e.formCoinMarket=="coingecko"&&e.toCoinMarket=="coingecko"?(i(),p("span",Va,[Z("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.fromCoin.coingecko_id},${e.toCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},ei,8,Ga)])):e.formCoinMarket!==e.toCoinMarket?(i(),p(Fe,{key:2},[e.formCoinMarket=="pyth"?(i(),p("span",oi,[Z("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.fromCoin.pyth_id}`,target:"_blank"},si,8,ni)])):e.formCoinMarket=="coingecko"?(i(),p("span",ai,[Z("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.fromCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},ri,8,ii)])):B("",!0),e.toCoinMarket=="coingecko"?(i(),p("span",ui,[Z("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.toCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},mi,8,di)])):e.toCoinMarket=="pyth"?(i(),p("span",vi,[Z("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.toCoin.pyth_id}`,target:"_blank"},pi,8,fi)])):B("",!0)],64)):B("",!0)])])):B("",!0)])]),o("div",gi,[o("div",Ci,[o("div",wi,[o("div",bi,d(e.$t("modal.slippageTolerance")),1),o("div",ki,d(e.slippage)+"%",1)]),o("div",Ai,[o("div",yi,d(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",Si,d(e.fixedFromCoin?("addCommom"in e?e.addCommom:Q(X))(("sFixD"in e?e.sFixD:Q(re))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:Q(X))(("sFixD"in e?e.sFixD:Q(re))(e.maximumSold,e.fromCoin.decimals)))+" "+d(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),o("div",_i,[o("div",Ii,d(e.$t("common.priceImpact")),1),o("div",{class:ae(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[Z(d(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(i(),p("svg",Ni,$i)):B("",!0)],2)]),o("div",Ri,[o("div",Oi,d(e.$t("common.fee")),1),e.chainName=="Aptos"?(i(),p("div",Bi,d(e.formatFee)+" "+d(e.fromCoin.symbol)+" ("+d(e.fee*100)+"%) ",1)):(i(),p("div",Mi,d(e.fee)+" "+d(e.fromCoin.symbol),1))])])]),e.chainName=="Sui"&&e.priceExangeRate&&Number(e.priceExangeRate)>10?(i(),p("div",Ti,[ji,o("div",Ui,[o("div",{class:ae(["within-btn",e.readWithin?"within-btn-active":""]),onClick:h[2]||(h[2]=L=>e.readWithin=!0)},"Yes, please continue.",2),o("div",{class:"within-btn",onClick:h[3]||(h[3]=L=>e.$emit("on-close"))},"No, cancel it.")])])):B("",!0)]),e.isShowAccept?(i(),p("div",Ei,[Fi,Ce(c,{class:"accept-btn",loading:e.swapLoading,onClick:h[4]||(h[4]=L=>e.$emit("accept"))},{default:me(()=>[Z("Accept")]),_:1},8,["loading"])])):e.chainName=="Sui"?(i(),K(c,{key:1,class:"big-btn swap-confirm-btn",disabled:Number(e.priceExangeRate)>10&&!e.readWithin,onClick:h[5]||(h[5]=L=>e.clickNextBtn())},{default:me(()=>[Z(d(e.$t("button.confirmSwap")),1)]),_:1},8,["disabled"])):e.chainName=="Aptos"?(i(),K(c,{key:2,class:"big-btn swap-confirm-btn",onClick:h[6]||(h[6]=L=>e.clickNextBtn())},{default:me(()=>[Z(d(e.$t("button.confirmSwap")),1)]),_:1})):B("",!0)]),_:1},8,["title"])}const Di=Be(Ca,[["render",Li],["__scopeId","data-v-8cffddfe"]]),Wi=De({setup(){const e=pn(),h=Oo(Bo,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:S,locale:m}=gn(),U=Oe(),E=Le(),c=$(()=>E);let P=g(!1),k=g(!0),L=g(!1),G=g(!1),oe=g(!1),I=g(!1);const F=g("fromCoin"),r=g(""),ne=g(""),se=g(!1),A=g(!0),V=g(!1),D=g(!1),w=g(!1),n=g(""),s=g(""),b=g(20),C=g(0),N=g(null),O=g(!1),Y=$(()=>U.slippage),_=$(()=>U.chainName),q=$(()=>_.value?so(_.value):{}),l=g(),v=g(),fe=$(()=>le&&le[_.value]&&le[_.value].hasRouter),je=$(()=>E.getPoolInfoSuccess),Je=$(()=>{var t;return j.value&&((t=j.value)!=null&&t.is_pause)?"Pool Closed":!l.value||!v.value?S("modal.selectTokenModalTitle"):!Number(n.value)&&!Number(s.value)?S("button.enterAmount"):!fe.value&&!j.value&&je.value?"Pool Not Found":fe.value&&Se.value?"No Available Route":O.value?S("button.insufficientLiquidity"):Number(n.value)>Number(ce.value)?S("button.insufficientBalance",{name:l.value.symbol}):S("button.swap")}),Ye=t=>{var f,u,y,M;F.value=t,t==="fromCoin"?(r.value=((f=v.value)==null?void 0:f.address)||"",ne.value=((u=l.value)==null?void 0:u.address)||""):(r.value=((y=l.value)==null?void 0:y.address)||"",ne.value=((M=v.value)==null?void 0:M.address)||""),se.value=!0},Pe=g({}),ge=g({}),Lo=t=>{F.value==="fromCoin"?(Pe.value=t,oo(t)):(ge.value=t,oo(t))},Do=t=>{t==="fromCoin"?(A.value=!0,_.value==="Aptos"?n.value=ce.value>0?l.value.symbol=="APT"?new a(Number(ce.value)).sub(new a(.1)).lt(new a(0))?"0":new a(Number(ce.value)).sub(new a(.1)).toString():String(ce.value):"":n.value=ce.value>0?l.value.symbol=="SUI"?new a(Number(ce.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(ce.value)).sub(new a(.05)).toString():String(ce.value):""):(A.value=!1,_.value==="Aptos"?s.value=ve.value>0?v.value.symbol=="APT"?new a(Number(ve.value)).sub(new a(.1)).lt(new a(0))?"0":new a(Number(ve.value)).sub(new a(.1)).toString():String(ve.value):"":s.value=ve.value>0?v.value.symbol=="SUI"?new a(Number(ve.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(ve.value)).sub(new a(.05)).toString():String(ve.value):"")},Wo=t=>{t==="fromCoin"?(A.value=!0,n.value=ce.value>0?re(new a(Number(ce.value)).div(2).toString(),l.value.decimals).toString():""):(A.value=!1,s.value=ve.value>0?re(new a(Number(ve.value)).div(2).toString(),v.value.decimals).toString():"")},Ge=g(!1);Cn(()=>{ao(),window.addEventListener("updateSwapParams",t=>{Ge.value=!Ge.value})}),wn(()=>{clearInterval(N.value)});const xe=$(()=>U),eo=()=>{k.value||!j.value&&!fe.value||(clearInterval(N.value),E.setPoolConfigList(xe.value.chainName,xe.value.filterCoinsObj),C.value=0,k.value=!0,j.value&&E.updateCurrentPools(j.value.poolAddress,_.value),Ue.value||Ie(A.value?n.value:s.value),de.value.address&&q.value.getAccount(de.value.address),U.getStatsData(_.value,xe.value.filterCoinsObj),setTimeout(()=>{k.value=!1,ao()},1e3))},ao=()=>{N.value=setInterval(()=>{k.value=!1,V.value||C.value<b.value&&(C.value+=1,C.value===b.value&&(_.value=="Aptos"?(j.value&&j.value.poolAddress&&E.updateCurrentPools(j.value.poolAddress,_.value),eo()):I.value||eo(),C.value=0,k.value=!0))},1e3)};x(A,He((t,f)=>{A.value=t},500));const $e=g(!1);x(n,He((t,f)=>{t&&t!==0&&A.value&&(C.value=0,Ie(t)),t==""&&A.value&&(s.value="")},800)),x(s,He((t,f)=>{t&&t!==0&&!A.value&&(C.value=0,Ie(t)),t==""&&!A.value&&(n.value="")},800));const qe=g(1e-4),Ze=async t=>{let f=t;if(_.value==="Aptos"&&!f.current_sqrt_price&&n.value&&s.value){const u=await q.value.getPools([f.address]);u&&u[0]&&(f={...t,...u[0],fee:Number(u[0].fee_rate)/1e6})}if(f.current_sqrt_price&&n.value&&s.value){const y=(l.value.address===f.coinA.address&&v.value.address===f.coinB.address?0:1)==0,M=new a(n.value),R=new a(s.value),J=M.sub(M.mul(new a(f.fee))),z=R.div(J);return q.value.getPriceImpactPct(f,z.toString(),y)}return"--"},io=g(0),lo=g(0),ro=g(),Re=g({}),Jo=async t=>{if(j.value&&(Ue.value=!0,!(A.value&&Number(n.value)==0)&&!(!A.value&&Number(s.value)==0))){if(l.value&&v.value&&(n.value||s.value)){D.value=!0,w.value=!0,O.value=!1;const f=l.value.address===j.value.coinA.address&&v.value.address===j.value.coinB.address?0:1;try{let u=await q.value.preSwap({pool:j.value,a2b:f==0,byAmountIn:A.value,amount:A.value?n.value:s.value});O.value=u==null?void 0:u.isExceed,ro.value=u==null?void 0:u.estimatedFeeAmount,A.value?(s.value=u.estimatedAmountOut,ye.value=(Number(u.estimatedAmountOut)/t).toString(),Ae.value=(t/Number(u.estimatedAmountOut)).toString()):(n.value=u.estimatedAmountIn,ye.value=(t/Number(u.estimatedAmountIn)).toString(),Ae.value=(Number(u.estimatedAmountIn)/t).toString()),io.value=new a(s.value).div(n.value).toString(),lo.value=new a(n.value).div(s.value).toString(),qe.value=_.value=="Aptos"?await Ze(j.value):await Ze(Re.value||j.value),D.value=!1,w.value=!1}catch(u){console.log("pre swap error1",u),D.value=!1,w.value=!1}}else A.value?s.value="":n.value="",D.value=!1,w.value=!1;Ue.value=!1}},Yo=$o(),de=$(()=>Yo),qo=g({}),Ae=g(""),ye=g(""),ce=$(()=>de.value.assets&&l.value&&de.value.assets[l.value.address]?No(de.value.assets[l.value.address].balance,l.value.decimals):0),ve=$(()=>de.value.assets&&v.value&&de.value.assets[v.value.address]?No(de.value.assets[v.value.address].balance,v.value.decimals):0);x(()=>c.value.tokensObj,async t=>{if(t&&!we(t)){const f=e?e.currentRoute.value.query.to:"",u=e?e.currentRoute.value.query.from:"";u?l.value=t[u]||await q.value.getTokenBySymbol(t,u):!u&&!l.value&&(l.value=t[le[_.value].swapDefaultPair.fromCoin]),f?v.value=t[f]||await q.value.getTokenBySymbol(t,f):!f&&!v.value&&(v.value=t[le[_.value].swapDefaultPair.toCoin],console.log("🚀🚀🚀 ~ file: swap.vue:1014 ~ setup ~ newValue:",t),console.log("🚀🚀🚀 ~ file: swap.vue:1014 ~ setup ~ onfig[chainName.value].swapDefaultPair.toCoin:",le[_.value].swapDefaultPair.toCoin)),!u&&f&&(l.value="")}},{immediate:!0});const j=$(()=>{var t,f,u,y,M;if(l.value&&v.value){let R=null,J={};if(Object.values(c.value.poolConfigList).forEach(W=>{var T,H,te,Ne;(W.coinA.address.toUpperCase()===((T=l.value.address)==null?void 0:T.toUpperCase())&&W.coinB.address.toUpperCase()===((H=v.value.address)==null?void 0:H.toUpperCase())||W.coinB.address.toUpperCase()===((te=l.value.address)==null?void 0:te.toUpperCase())&&W.coinA.address.toUpperCase()===((Ne=v.value.address)==null?void 0:Ne.toUpperCase()))&&(J[W.address]={...W})}),_.value=="Aptos"&&c.value.poolsObj&&!we(c.value.poolsObj))for(const W in c.value.poolsObj){const T=c.value.poolsObj[W];(T.token_a.address.toUpperCase()===((t=l.value.address)==null?void 0:t.toUpperCase())&&T.token_b.address.toUpperCase()===((f=v.value.address)==null?void 0:f.toUpperCase())||T.token_b.address.toUpperCase()===((u=l.value.address)==null?void 0:u.toUpperCase())&&T.token_a.address.toUpperCase()===((y=v.value.address)==null?void 0:y.toUpperCase()))&&(J[T.address]={...T})}const z=Object.values(J).sort((W,T)=>W.fee-T.fee);for(let W=0;W<z.length;W++)if(!((M=z[W])!=null&&M.is_pause)){R=z[W];break}return R&&!we(R)?(console.log("🚀🚀🚀 ~ file: swap.vue:1094 ~ poolInfo ~ info:",R),R):null}return null}),uo=g(!0),co=g(!1),Zo=async t=>{t&&_.value=="Aptos"&&(Ie(A.value?n.value:s.value),co.value=!0,t.coinA.symbol.toLowerCase()===l.value.symbol.toLowerCase()&&t.coinB.symbol.toLowerCase()===v.value.symbol.toLowerCase()?uo.value=!0:uo.value=!1,O.value=!1)};x(()=>j.value,(t,f)=>{t&&(!f||t.address!==f.address||t.current_sqrt_price!==f.current_sqrt_price)&&Zo(t)},{immediate:!0,deep:!0});const Xo=$(()=>c.value.tokensObj&&l.value&&l.value.address&&c.value.tokensObj[l.value.address]&&c.value.tokensObj[l.value.address].logoURI),Ko=$(()=>c.value.tokensObj&&v.value&&v.value.address&&c.value.tokensObj[v.value.address]&&c.value.tokensObj[v.value.address].logoURI),Qo=$(()=>_.value==="Aptos"?c.value.tokensObj&&l.value&&l.value.address&&c.value.tokensObj[l.value.address]&&c.value.tokensObj[l.value.address].coingecko_id||null:c.value.tokensObj&&l.value&&l.value.address||null),zo=$(()=>_.value==="Aptos"?c.value.tokensObj&&v.value&&v.value.address&&c.value.tokensObj[v.value.address]&&c.value.tokensObj[v.value.address].coingecko_id||null:c.value.tokensObj&&v.value&&v.value.address||null),Ho=$(()=>{var t,f,u,y,M,R,J,z,W,T,H,te;return(u=(f=c==null?void 0:c.value)==null?void 0:f.tokensObj[(t=l==null?void 0:l.value)==null?void 0:t.address])!=null&&u.pyth_id&&((R=(M=c==null?void 0:c.value)==null?void 0:M.tokensObj[(y=l==null?void 0:l.value)==null?void 0:y.address])==null?void 0:R.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(W=(z=c==null?void 0:c.value)==null?void 0:z.tokensObj[(J=l==null?void 0:l.value)==null?void 0:J.address])!=null&&W.coingecko_id?"coingecko":(te=(H=c==null?void 0:c.value)==null?void 0:H.tokensObj[(T=l==null?void 0:l.value)==null?void 0:T.address])!=null&&te.birdeyeid?"birdeye":null}),Vo=$(()=>{var t,f,u,y,M,R,J,z,W,T,H,te;return(u=(f=c==null?void 0:c.value)==null?void 0:f.tokensObj[(t=v==null?void 0:v.value)==null?void 0:t.address])!=null&&u.pyth_id&&((R=(M=c==null?void 0:c.value)==null?void 0:M.tokensObj[(y=v==null?void 0:v.value)==null?void 0:y.address])==null?void 0:R.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(W=(z=c==null?void 0:c.value)==null?void 0:z.tokensObj[(J=v==null?void 0:v.value)==null?void 0:J.address])!=null&&W.coingecko_id?"coingecko":(te=(H=c==null?void 0:c.value)==null?void 0:H.tokensObj[(T=l==null?void 0:l.value)==null?void 0:T.address])!=null&&te.birdeyeid?"birdeye":null}),Go=$(()=>{var y,M;const t=new a(n.value),f=new a(_.value=="Aptos"?(y=j==null?void 0:j.value)==null?void 0:y.fee:(M=Re==null?void 0:Re.value)==null?void 0:M.fee),u=t.mul(f).toString();return Number(u)<1/Math.pow(10,l.value.decimals)?`<${new a(1).div(new a(Math.pow(10,l.value.decimals))).toString()}`:re(u,l.value.decimals)}),{setIsShowSuccess:xo,setIsShowRejected:mo,setIsShowWaiting:Xe,setTransactionDesc:en,setTransactionTxid:vo}=U,on=async()=>{var f,u,y,M,R,J,z,W;I.value=!1,D.value=!0,clearInterval(Ee),window.clearInterval(Ee),vo(""),en(S("tips.swapping",{from:`${X(n.value)} ${(f=l.value)==null?void 0:f.symbol}`,to:`${X(s.value)} ${(u=v.value)==null?void 0:u.symbol}`})),Xe(!0);let t;_.value=="Aptos"&&(t=l.value.address===j.value.token_a.address&&v.value.address===j.value.token_b.address?0:1);try{let T;_.value=="Aptos"?T=await q.value.getSwapTransactionPayload({pool:j.value,a2b:t==0,byAmountIn:A.value,amount:A.value?n.value:s.value,slippage:Number(Y.value)/100}):T=await q.value.getSwapRouterPayload(Ke.value,Number(Y.value)/100),console.log("0221####swap###swapPayload###",T);let H;if(_.value==="Aptos")H=await de.value.currentWallet.signAndSubmitTransaction(T);else{const te=await q.value.signAndExecuteTransactionBlock(de.value.currentWallet,T==null?void 0:T.txb,T==null?void 0:T.payloadParams);console.log("0221###sui swap res###",te),H=q.value.handleTx(te),console.log("0221###swap###sui##tx###",H)}if(H&&H.hash){vo(H.hash),Xe(!1),xo(!0);const te={title:S("tips.swap"),desc:S("tips.swapSuccessText",{from:`${X(n.value)} ${(y=l.value)==null?void 0:y.symbol}`,to:`${X(s.value)} ${(M=v.value)==null?void 0:M.symbol}`}),hash:H.hash,tit:"Swap",type:"liquidity",action:"swap",isHaveSui:l.value.address==le[_.value].currentChainTokenAddress||v.value.address==le[_.value].currentChainTokenAddress,icon:"icon-icon-swap1",tokenInfo:{tokena:`${(R=l.value)==null?void 0:R.address}`,numa:`- ${n.value}`,logoa:c.value.tokensObj&&l.value&&l.value.address&&c.value.tokensObj[l.value.address]&&c.value.tokensObj[l.value.address].logoURI,tokenb:`${(J=v.value)==null?void 0:J.address}`,numb:`+ ${s.value}`,logob:c.value.tokensObj&&v.value&&v.value.address&&c.value.tokensObj[v.value.address]&&c.value.tokensObj[v.value.address].logoURI},text:`Pay ${n.value} ${(z=l.value)==null?void 0:z.symbol} to receive ${s.value} ${(W=v.value)==null?void 0:W.symbol}`};_.value!=="Aptos"&&(te.res=H.res),q.value.showTransitionPending(te);const Ne=await q.value.watchTransaction(te);console.log("0221###swap###transitionStatus####",Ne),Ne&&setTimeout(()=>{_.value=="Aptos"&&E.updateCurrentPools(j.value.poolAddress,_.value),q.value.getAccount(de.value.address)},1e3)}else Xe(!1),mo(!0);n.value="",s.value="",D.value=!1}catch(T){n.value="",s.value="",console.log("Swap Error###",T),D.value=!1,Xe(!1),mo(!0)}},nn=t=>{var f;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((f=c.value.tokensObj[t==null?void 0:t.address])==null?void 0:f.logo_url)||(U.theme==="default"?pe("/image/coins/unknown.png"):pe("/image/coins/sui-unknown.png"))},fo=g([]);x(()=>[l.value,v.value,c.value.poolConfigList],([t,f,u])=>{if(u&&u.length>0&&t&&f){const y=[];u.forEach(M=>{var R,J,z,W;(M.coinA.address.toUpperCase()===((R=t.address)==null?void 0:R.toUpperCase())&&M.coinB.address.toUpperCase()===((J=f.address)==null?void 0:J.toUpperCase())||M.coinB.address.toUpperCase()===((z=t.address)==null?void 0:z.toUpperCase())&&M.coinA.address.toUpperCase()===((W=f.address)==null?void 0:W.toUpperCase()))&&(M!=null&&M.is_pause||y.push(M.address))}),fo.value=y}},{immediate:!0});const oo=t=>{console.log("🚀 ~ getTokenSource ~ token:",t);const f=U.importTokenListObj;c.value.tokensObj&&c.value.tokensObj[t.address]&&c.value.tokensObj[t.address].isSelfBuilt&&!(f!=null&&f.hasOwnProperty(t==null?void 0:t.address))?no.value=!0:(F.value==="fromCoin"?(n.value="",v.value&&t.address.toLowerCase()===(v==null?void 0:v.value.address.toLowerCase())&&(v.value=null),l.value=t):(l.value&&(s.value="",t.address.toLowerCase()===(l==null?void 0:l.value.address.toLowerCase())&&(l.value=null)),v.value=t),ho())},no=g(!1),ho=()=>{ge.value={},Pe.value={},no.value=!1},tn=$(()=>U.isShowRouterModal),to=g([]),po=g(""),sn=g(!1),go=vn();$(()=>go);const Se=g(!1),Ke=g({}),Co=g(""),wo=g(),bo=t=>{const{splitPaths:f}=t;let u=new a(0);f.forEach((M,R)=>{const J=M.basePaths[0],z=J.label==="Cetus"?new a(J.feeRate).div(Math.pow(10,6)):new a(J.feeRate).div(Math.pow(10,9)),W=new a(J.inputAmount).div(Math.pow(10,l.value.decimals)).mul(z);if(u=u.add(W),M.basePaths[1]){const T=M.basePaths[1],H=J.direction?J.currentPrice:new a(1).div(J.currentPrice),te=T.direction?T.currentPrice:new a(1).div(M.basePaths[1].currentPrice),Ne=T.label==="Cetus"?new a(T.feeRate).div(Math.pow(10,6)):new a(T.feeRate).div(Math.pow(10,9)),dn=new a(T.outputAmount).div(Math.pow(10,v.value.decimals)).mul(Ne).div(H.mul(te));u=u.add(dn)}});const y=u.toNumber();wo.value=y,Co.value=y>0&&y<1e-6?"<0.000001":X(re(y,l.value.decimals))},ko=(t,f)=>f.minus(t).div(f).mul(100),Ao=async t=>{const{splitPaths:f}=t;let u=new a(0);f.forEach((y,M)=>{if(y.basePaths.length===1){const R=y.basePaths[0],J=new a(R.outputAmount).div(Math.pow(10,R.toDecimal)),z=new a(R.inputAmount).div(Math.pow(10,R.fromDecimal)),W=J.div(z),T=R.direction?new a(R.currentPrice):new a(1).div(R.currentPrice),H=ko(W,T).mul(new a(y.percent).div(100));u=u.add(H)}else{const R=y.basePaths[0].direction?new a(y.basePaths[0].currentPrice):new a(1).div(y.basePaths[0].currentPrice),J=y.basePaths[1].direction?new a(y.basePaths[1].currentPrice):new a(1).div(y.basePaths[1].currentPrice),z=R.mul(J),W=new a(y.basePaths[1].outputAmount).div(Math.pow(10,y.basePaths[1].toDecimal)),T=new a(y.basePaths[0].inputAmount).div(Math.pow(10,y.basePaths[0].fromDecimal)),H=W.div(T),te=ko(H,z).mul(new a(y.percent).div(100));u=u.add(te)}}),qe.value=Number(re(u.toNumber(),2))},Ue=g(!1),yo=async t=>{if(Ue.value=!0,l.value&&v.value&&(Number(n.value)>0||Number(s.value)>0)){(!n.value&&s.value||n.value&&!s.value)&&(D.value=!0),$e.value=!0,Se.value=!1;let f;j.value&&(f=l.value.address===j.value.coinA.address&&v.value.address===j.value.coinB.address?0:1);try{let u;if(A.value){const J=new a(n.value).mul(Math.pow(10,l.value.decimals)).toString();u=new ze(J)}else{const J=new a(s.value).mul(Math.pow(10,v.value.decimals)).toString();u=new ze(J)}const y=Number(Y.value)/100,M=j.value?{poolAddresses:fo.value,coinTypeA:j.value.coin_a_address,coinTypeB:j.value.coin_b_address,decimalsA:j.value.coinA.decimals,decimalsB:j.value.coinB.decimals,a2b:f==0,byAmountIn:A.value,amount:u.toString()}:"",R=await q.value.getSwapRouter(l,v,u,A.value,y,"",j.value?M:"");if(R&&!R.isExceed&&R.splitPaths&&R.splitPaths.length==0){Se.value=!0;return}if(R){if(Ke.value=R,to.value=R.paths,O.value=R.isExceed,R.isExceed){D.value=!1,Se.value=!1,A.value?s.value="":n.value="";return}bo(R),A.value?n.value&&(s.value=new a(R.outputAmount).div(new a(Math.pow(10,v.value.decimals))).toString()):s.value&&(n.value=new a(R.inputAmount).div(new a(Math.pow(10,l.value.decimals))).toString()),console.log(s.value,"###toCoinAmount.value"),Ae.value=X(he(new a(n.value).div(new a(s.value).toString()),l.value.decimals)),ye.value=X(he(new a(s.value).div(n.value).toString(),v.value.decimals)),Ao(R),D.value=!1,Se.value=!1,$e.value=!1}else D.value=!1,Se.value=!0,$e.value=!1}catch(u){console.log("pre swap error2",u),D.value=!1,$e.value=!1}}else A.value?s.value="":n.value="",D.value=!1,$e.value=!1;Ue.value=!1},_e=g(!1),So=async t=>{try{let f;if(A.value){const M=new a(n.value).mul(Math.pow(10,l.value.decimals)).toString();f=new ze(M)}else{const M=new a(s.value).mul(Math.pow(10,v.value.decimals)).toString();f=new ze(M)}const u=Number(Y.value)/100,y=await q.value.getSwapRouter(l,v,f,A.value,u,"");y&&(Ke.value=y,to.value=y.paths,O.value=y.isExceed,po.value=y.amountIn,bo(y),Ae.value=X(he(new a(n.value).div(new a(s.value).toString()),l.value.decimals)),ye.value=X(he(new a(s.value).div(n.value).toString(),v.value.decimals)),Ao(y),A.value?s.value!==y.amountOut&&(_e.value=!0,s.value=y.amountOut):n.value!==y.amountIn&&(_e.value=!0,n.value=y.amountIn))}catch(f){console.log("pre swap error3",f)}},an=async t=>{if(l.value&&v.value&&(n.value||s.value)){const f=l.value.address===j.value.coinA.address&&v.value.address===j.value.coinB.address?0:1;try{let u=await q.value.preSwap({pool:j.value,a2b:f==0,byAmountIn:A.value,amount:A.value?n.value:s.value});O.value=u==null?void 0:u.isExceed,ro.value=u==null?void 0:u.estimatedFeeAmount,A.value?(ye.value=(Number(u.estimatedAmountOut)/u.estimatedAmountIn).toString(),Ae.value=(u.estimatedAmountIn/Number(u.estimatedAmountOut)).toString()):(ye.value=(Number(u.estimatedAmountOut)/Number(u.estimatedAmountIn)).toString(),Ae.value=(Number(u.estimatedAmountIn)/Number(u.estimatedAmountOut)).toString()),A.value?s.value!==u.estimatedAmountOut&&(_e.value=!0,s.value=u.estimatedAmountOut):n.value!==u.estimatedAmountIn&&(_e.value=!0,n.value=u.estimatedAmountIn),qe.value=_.value=="Aptos"?await Ze(j.value):await Ze(Re.value||j.value),D.value=!1,w.value=!1}catch(u){console.log("pre swap error4",u),D.value=!1,w.value=!1}}else D.value=!1,w.value=!1};let Ee=g(null);x(()=>I.value,t=>{t?Ee.value=setInterval(()=>{_.value=="Aptos"?an(A.value):So(A.value)},3e3):(clearInterval(Ee.value),window.clearInterval(Ee.value))},{immediate:!0});const Ie=async t=>{_.value=="Aptos"?Jo(t):yo()};x(()=>Ge.value,t=>{(Number(n.value)>0||Number(s.value)>0)&&Ie(A.value?n.value:s.value)},{immediate:!0});const ln=$(()=>go),_o=$(()=>ln.value.isInitRouter);x(()=>_o.value,t=>{t||(C.value=0,Ie(A.value?n.value:s.value))},{immediate:!0}),x(()=>[l.value,v.value],([t,f])=>{if(t&&f&&(C.value=0,Ie(A.value?n.value:s.value)),t||f){console.log("🚀🚀🚀 ~ file: swap.vue:1965 ~ setup ~ fromCoin:",t);const u=`/swap?from=${t==null?void 0:t.address}&to=${f==null?void 0:f.address}`;e.push(u)}},{immediate:!0});function rn(t,f=500){let u=null;return function(...y){clearTimeout(u),u=setTimeout(()=>{t.call(this,...y)},f)}}const un=rn(Io);function Io(){const t=l.value;l.value=v.value,v.value=t,P.value=!0,A.value=!A.value,A.value?(n.value=s.value,s.value=""):(s.value=n.value,n.value=""),setTimeout(()=>{P.value=!1},300)}return{closeSwapConfirmModal:()=>{I.value=!1,_e.value=!1},updateAccept:()=>{_e.value=!1},clickExchange:Io,debounceClickExchange:un,closeTokenWarning:ho,isShowTokenWarning:no,getTokenSource:oo,hasPool:co,getPoolInfoSuccess:je,halfBtnSelect:Wo,formCoinId:Qo,toCoinId:zo,formCoinMarket:Ho,toCoinMarket:Vo,fromCoinUrl:Xo,toCoinUrl:Ko,t:S,indicator:h,wallet:de,currentLpInfo:qo,fixD:Ve,decimalFormat:fn,impact:qe,oneFromAmount:Ae,oneToAmount:ye,importIcon:pe,clickRefresh:eo,refresh:k,change:P,isShowAddress:L,isShowSwapSetting:G,fromCoin:l,toCoin:v,slippage:Y,openCoinSelect:Ye,onCoinSelect:Lo,existingCoins:r,lastSelectCoin:ne,currentCoinKey:F,showCoinSelect:se,fromCoinAmount:n,toCoinAmount:s,maxBtnSelect:Do,fixedFromCoin:A,swapBtnText:Je,toSwap:on,loading:V,swaping:D,autoRefreshTime:b,countdown:C,marketTimer:N,rateChange:oe,isSwapConfirmMpdal:I,fromCoinBlance:ce,toCoinBlance:ve,poolInfo:j,chainName:_,swapRouterLoading:$e,formatFee:Go,calculating:w,currentRate:io,currentRateReverse:lo,getCoinIcon:nn,toAddLiquidiPoolInfo:Re,decimalUi:he,warningToCoin:ge,warningFromCoin:Pe,isShowRouterModal:tn,toSwapLoading:sn,insufficientLiquidity:O,routerPool:to,routerTotalAmounts:po,store:U,suiPreSwapdata:Ke,suiSwapFee:wo,suiSwapFeeUi:Co,addCommom:X,debounce:He,notFoundRouter:Se,getSuiAmountAccept:So,isShowAccept:_e,getSuiAmount:yo,tradeTabList:["Swap"],isInitSwapRouter:_o}}});const ke=e=>(Me("data-v-39b0fbf4"),e=e(),Te(),e),Ji={class:"swap-container"},Yi={class:"title"},qi={class:"left"},Zi={class:"right title-right"},Xi=ke(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Ki={class:"swap-card"},Qi={class:"card-container"},zi=ke(()=>o("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),Hi=[zi],Vi={key:1,class:"induction"},Gi={key:0,class:"exchange-rate-btn"},xi={key:0},el={key:0},ol={key:0},nl={key:1},tl={key:0},sl=ke(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),al=ke(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),il=[sl,al],ll={class:"item"},rl={class:"induction-text"},ul={key:0,class:"icon","aria-hidden":"true"},dl=ke(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),cl=[dl],ml={class:"item"},vl={class:"induction-text"},fl={key:0,class:"induction-value"},hl={class:"item"},pl={class:"induction-text"},gl={key:0,class:"induction-value"},Cl={key:0,class:"icon","aria-hidden":"true"},wl=ke(()=>o("use",{"xlink:href":"#icon-icon-swap"},null,-1)),bl=[wl],kl={key:2,class:"token-info-container"},Al={class:"token-info-title"},yl=ke(()=>o("span",{class:"coingecko"},"Price Reference",-1)),Sl=ke(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1));function _l(e,h,S,m,U,E){var n,s;const c=cn,P=mn,k=Mt,L=Mo,G=To,oe=Fo,I=Lt,F=kn,r=An,ne=jo,se=hs,A=yn,V=ga,D=Di,w=We("image");return i(),p("div",Ji,[o("div",Yi,[o("div",qi,[o("div",null,d(e.$t("menu.swap")),1)]),o("div",Zi,[o("div",{class:"slippage-icon",onClick:h[0]||(h[0]=b=>e.isShowSwapSetting=!0)},[Xi,o("span",null,d(e.slippage)+"%",1)]),Ce(c,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),o("div",Ki,[o("div",Qi,[o("div",{class:ae(["card-item",!e.fixedFromCoin&&e.swapRouterLoading?"card-item-mask":""])},[Ce(P,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":h[1]||(h[1]=b=>e.fromCoinAmount=b),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From",onOnMax:h[2]||(h[2]=b=>e.maxBtnSelect("fromCoin")),onOnHalf:h[3]||(h[3]=b=>e.halfBtnSelect("fromCoin")),onOnInput:h[4]||(h[4]=b=>{e.fromCoinAmount=b,e.fixedFromCoin=!0}),onOnSelect:h[5]||(h[5]=b=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])],2),o("div",{class:ae(["card-item",e.fixedFromCoin&&e.swapRouterLoading?"card-item-mask":""])},[Ce(P,{modelValue:e.toCoinAmount,"onUpdate:modelValue":h[6]||(h[6]=b=>e.toCoinAmount=b),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",havehalf:!1,onOnInput:h[7]||(h[7]=b=>{e.toCoinAmount=b,e.fixedFromCoin=!1}),onOnSelect:h[8]||(h[8]=b=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])],2),o("img",{class:ae(e.change?"gang animationex":"gang"),src:Sn,alt:""},null,2),o("div",{class:ae(["exchange",e.chainName=="Sui"?"sui-exchange":""]),onClick:h[9]||(h[9]=(...b)=>e.debounceClickExchange&&e.debounceClickExchange(...b))},[(i(),p("svg",{class:ae(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Hi,2))],2)]),e.chainName=="Sui"&&!e.notFoundRouter?(i(),K(k,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.impact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFeeUi,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):e.poolInfo&&e.fromCoinAmount&&e.toCoinAmount&&e.fromCoinAmount!=="0"&&e.toCoinAmount!=="0"&&e.swapBtnText!==e.$t("button.poolNotFound")?(i(),p("div",Vi,[Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(i(),p("div",Gi,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(i(),p("span",nl,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(i(),p("span",tl,[ee(o("img",null,null,512),[[w,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),Z(" 1 "+d(e.toCoin.symbol)+" ≈ ",1),ee(o("img",null,null,512),[[w,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),o("span",null,d(("addCommom"in e?e.addCommom:Q(X))(("decimalUi"in e?e.decimalUi:Q(he))(e.currentRateReverse,e.fromCoin.decimals),e.fromCoin.decimals)),1),Z("  "+d(e.fromCoin.symbol),1)])):(i(),K(L,{key:1,indicator:e.indicator},null,8,["indicator"]))])):B("",!0):(i(),p("span",xi,[ee(o("img",null,null,512),[[w,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),Z(" 1 "+d(e.fromCoin.symbol)+" ≈ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(i(),p("span",el,[ee(o("img",null,null,512),[[w,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),e.calculating?B("",!0):(i(),p("span",ol,d(("addCommom"in e?e.addCommom:Q(X))(("decimalUi"in e?e.decimalUi:Q(he))(e.currentRate,e.toCoin.decimals))),1)),e.calculating?(i(),K(L,{key:1,indicator:e.indicator},null,8,["indicator"])):B("",!0),Z("  "+d(e.toCoin.symbol),1)])):(i(),K(L,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"icon-change",onClick:h[10]||(h[10]=b=>e.rateChange=!e.rateChange)},il)])):B("",!0),Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(i(),p(Fe,{key:1},[o("div",ll,[o("div",rl,d(e.$t("common.priceImpact")),1),e.swaping?(i(),K(G,{key:1,paragraph:!1,active:""})):(i(),p("div",{key:0,class:ae(["induction-value",Number(e.impact)<1?"impact-s":Number(e.impact)<10&&Number(e.impact)>1?"impact-w":"impact-e"])},[Z(d(Number(e.impact)<.01?"<0.01":Number(e.impact)>100?"100":e.impact)+"% ",1),e.impact>=10?(i(),p("svg",ul,cl)):B("",!0)],2))]),o("div",ml,[o("div",vl,d(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swaping?(i(),K(G,{key:1,paragraph:!1,active:""})):(i(),p("div",fl,d(e.fixedFromCoin?("addCommom"in e?e.addCommom:Q(X))(("fixD"in e?e.fixD:Q(Ve))(Number(e.toCoinAmount)-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals),e.toCoin.decimals):("addCommom"in e?e.addCommom:Q(X))(("fixD"in e?e.fixD:Q(Ve))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals),e.fromCoin.decimals))+" "+d(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",hl,[o("div",pl,d(e.$t("common.fee")),1),e.swaping?(i(),K(G,{key:1,paragraph:!1,active:""})):(i(),p("div",gl,d(("addCommom"in e?e.addCommom:Q(X))(e.formatFee,e.fromCoin.decimals))+" "+d(e.fromCoin.symbol)+" ("+d(e.chainName=="Aptos"?e.poolInfo.fee*100:((n=e.toAddLiquidiPoolInfo)==null?void 0:n.fee)*100)+"%) ",1))])],64)):B("",!0)])):B("",!0)]),Ce(oe,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((s=e.poolInfo)==null?void 0:s.is_pause)||e.swapRouterLoading:!1,class:"big-btn",loading:e.swaping,onClick:h[11]||(h[11]=b=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:me(()=>[e.wallet.connected?(i(),p("svg",Cl,bl)):B("",!0),o("span",null,d(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),Ce(I),e.showCoinSelect?(i(),K(F,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"have-import-btn":!0,onOnSelect:e.onCoinSelect,onOnClose:h[12]||(h[12]=b=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):B("",!0),e.isShowSwapSetting?(i(),K(r,{key:1,onOnClose:h[13]||(h[13]=b=>e.isShowSwapSetting=!1)})):B("",!0),e.chainName&&(e.formCoinMarket||e.toCoinMarket)?(i(),p("div",kl,[o("div",Al,[yl,Ce(ne,{placement:"top","arrow-point-at-center":""},{title:me(()=>[Z(" The following price is only an external reference from 3rd party data providers, which does not reflect actual data on Cetus. ")]),default:me(()=>[Sl]),_:1})]),e.fromCoin&&e.formCoinMarket?(i(),K(se,{key:0,id:e.formCoinId,coin:e.fromCoin,market:e.formCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):B("",!0),e.toCoin&&e.toCoinMarket?(i(),K(se,{key:1,id:e.toCoinId,coin:e.toCoin,market:e.toCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):B("",!0)])):B("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(i(),K(A,{key:3,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,"is-import-modal":!0,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):B("",!0),e.isShowRouterModal?(i(),K(V,{key:4,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,onOnClose:h[14]||(h[14]=b=>e.store.setIsShowRouterModal(!1))},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount"])):B("",!0),e.isSwapConfirmMpdal?(i(),K(D,{key:5,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.impact,"fixed-from-coin":e.fixedFromCoin,fee:e.chainName=="Sui"?e.suiSwapFeeUi:e.poolInfo.fee,"format-fee":e.chainName=="Sui"?e.suiSwapFeeUi:e.formatFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,"one-from-amount":e.oneFromAmount,"one-to-amount":e.oneToAmount,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","one-from-amount","one-to-amount","onOnClose","onToSwap","onAccept"])):B("",!0)])}const er=Be(Wi,[["render",_l],["__scopeId","data-v-39b0fbf4"]]);export{er as default};
