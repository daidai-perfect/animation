import{u as ut,e as ni,n as bt,d as ue,a as $e,c as K,s as ht,b as oi,g as ri}from"./sha256.de7acfa8.js";import{a as it,r as M,l as I,H as Ot,q as Ie,e as at,o as q,f as G,t as Bt,N as si,h as r,O as kt,v as J,u as ae,x as Y,c as We,p as wt,k as Ct,S as Ut,y as jt,m as Pt,K as zt,s as li,F as yt,E as Mt,i as Fe,j as tt,A as ft,$ as ui,w as lt,P as Ht,a2 as ci,b as di,B as mi}from"./entry.ad32dc49.js";/* empty css              */import{s as dt,m as vi,l as fi,b as gi,a as pi}from"./transform.c672907f.js";import{D as o}from"./decimal.0bdeb344.js";import{a as St,u as Et,T as rt,n as bi,b as je,p as $t}from"./pool.f9585ea2.js";import{d as Xt,_ as Dt,c as Wt,a as Zt,b as hi}from"./new-liquidity-title.5efdeeff.js";import{i as _t}from"./import-icon.de3e6c66.js";/* empty css              *//* empty css              */import{positionError as et,fromCoin as y,toCoin as b,tickList as Ve,currentPrice as st,currentPriceReverse as mt,direction as ve,currentPriceTab as Z,defaultMinPrice as gt,defaultMaxPrice as pt,minPrice as L,maxPrice as _,toggle as Gt,isStableFarmingRange as Be,isInputTotalAmount as He,priceConfigObj as Qe,fromCoinAmount as P,toCoinAmount as S,fixedFromCoin as Te,resetTickList as Ft,resetData as ki}from"./data.7633f830.js";import{u as Tt}from"./farms.42704ce8.js";import{_ as Kt}from"./icon_farms_2x.d8bcb898.js";import{_ as yi}from"./coin-lock.bce36a9e.js";import{_ as _i}from"./coin-select.16cee704.js";import{_ as wi}from"./viewDetail.04a601bd.js";import{a as Ci}from"./new-add-or-create.65e8700e.js";import{u as Pi}from"./notifi.6755daed.js";import{_ as Si,a as Ti}from"./icon-Add-Liquidity_2x.0acb06cb.js";import"./img-lock_2x.a28135f4.js";import"./lock.f71bb518.js";import"./index.31084607.js";/* empty css              */import"./token-warning.25c15a3a.js";import"./swap-setting.5405273f.js";import"./icon-error_2x.c0a55c63.js";import"./img-lock_2x.d1f48e3b.js";import"./img-no-Positions_2x.e49449a4.js";import"./img-no-Positions_2x.e3a6f95b.js";import"./status-block.ee60516f.js";import"./icon-arrow_2x.948aedb2.js";import"./icon-arrow_2x.4ffddb8e.js";import"./useWhale.39933463.js";function Rt(e,s,fe){const ne=new o(10).pow(s-fe);return new o(1.0001).pow(e).mul(ne)}const Ii=it({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""},zoom:{type:Number,default:1}},setup(e,s){const fe=M(""),ne=M(""),$=I(()=>{var n,C,m,D,U,ee;return(n=e.poolInfo)!=null&&n.current_sqrt_price&&((C=e.poolInfo)!=null&&C.coinA)&&((m=e.poolInfo)!=null&&m.coinB)?a.sqrtPriceX64ToPrice((D=e.poolInfo)==null?void 0:D.current_sqrt_price,(U=e.poolInfo)==null?void 0:U.coinA.decimals,(ee=e.poolInfo)==null?void 0:ee.coinB.decimals).toString():"0"}),se=I(()=>{let n=0;return e.direction?n=(Number(e.minPrice)/Number($.value)-1)*100:n=(Number(e.minPrice)/Number(1/Number($.value))-1)*100,n=n>0&&n<.1?.1:n,n=n<0&&n>-.1?-.1:n,n}),X=I(()=>{let n=0;return e.direction?n=(Number(e.maxPrice)/Number($.value)-1)*100:n=(Number(e.maxPrice)/Number(1/Number($.value))-1)*100,n=n>0&&n<.1?.1:n,n=n<0&&n>-.1?-.1:n,n}),z=ut(),N=I(()=>z),x=I(()=>N.value.chainName?St(N.value.chainName):{}),{TickMath:a,getNearestTickByTick:f}=x.value,R=(n=[])=>{let C=6;const m=Math.abs(Number(n[0])-Number(n[n.length-1]));return m>=6?C=0:m>=1?C=1:m>=.1?C=2:m>=.01?C=3:m>=.001?C=4:m>=1e-4?C=5:m>=1e-5?C=6:m>=1e-6?C=7:m>=1e-7&&(C=8),C},ye=(n,C=1)=>{if(n&&n.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const m=Number(e.poolInfo.current_tick_index);let D=m+100*C,U=m-100*C,ee,k;if(e.maxPrice==="âˆž")k=x.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?k=a.priceToTickIndex(new o(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):k=a.priceToTickIndex(new o(1).div(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{k=443636}if(e.minPrice==="0")ee=x.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?ee=a.priceToTickIndex(new o(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):ee=a.priceToTickIndex(new o(1).div(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{ee=-443636}let we=0;if(e.currentPriceTab!=="full range"){if(m>=ee&&m<=k){const A=m-ee,ce=k-m;we=Math.max(Math.abs(A),Math.abs(ce))}else m<ee?we=Math.abs(k-m):we=Math.abs(m-ee);D=m+we+100*C,U=m-we-100*C}else{const A=(Math.abs(m)>5e3,2e4);D=m+A*C,U=m-A*C}U<-443636&&(U=-443636),D>443636&&(D=443636);const g=new o(n.liquidity).div(Math.pow(10,8)).toString(),F=e.tickList,H=[],Pe=[];let w={};for(let A=0;A<F.length;A++){if(w=F[A],w.index<=m&&w.index>=U){if(H.length<1&&A!==0){const ce=F[A-1];H.unshift({...ce,index:U,source:"left"})}H.unshift(w)}else if(w.index>m&&w.index<=D&&(Pe.push(w),H.length<1&&A!==0)){const ce=F[A-1];H.push({...ce,index:U,source:"left"})}if(w.index>D){const ce=F[A];if(Pe.push({...ce,index:D,source:"right"}),H.length<1&&A!==0){const Ge=F[A-1];H.push({...Ge,index:U,source:"left"})}break}}let j="0";for(let A=H.length-1;A>=0;A--)j=new o(j).plus(new o(H[A].liquidityNet.toString()).div(Math.pow(10,8))).toString(),H[A].liquityAmount=j;let te=g;for(let A=0;A<Pe.length;A++)te=new o(te).plus(new o(Pe[A].liquidityNet.toString()).div(Math.pow(10,8))).toString(),Pe[A].liquityAmount=te;let le=[];const E=F&&F.length>0?{index:m,liquityAmount:Number(g)}:{index:m,liquityAmount:0};(H.length>0||Pe.length>0)&&(le=[...H.reverse(),E,...Pe],e.direction||(le=le.reverse()));const ze=[];F.forEach(A=>{ze.push({...A,liquidityGross:A.liquidityGross.toString(),liquidityNet:A.liquidityNet.toString()})}),v(le,U,D,ee,k,m)}};let _e=M(!1);const V=M(!1);Ot(()=>{const n=document.body.clientWidth;V.value=!0,n<750?_e.value=!1:_e.value=!0,window.onresize=()=>{document.body.clientWidth<750?_e.value=!1:_e.value=!0,ye(e.poolInfo,e.zoom)}});const v=(n,C,m,D,U,ee)=>{let k,we;e.direction?(k=Number(e.before7dContractPriceLowest)!==0?a.priceToTickIndex(new o(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",we=Number(e.before7dContractPriceHighest)!==0?a.priceToTickIndex(new o(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(k=Number(e.before7dContractPriceLowest)!==0?a.priceToTickIndex(new o(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",we=Number(e.before7dContractPriceHighest)!==0?a.priceToTickIndex(new o(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const g={top:30,right:35,bottom:20,left:80};let F,H;_e.value?(F=460-g.left-g.right,H=205-g.top-g.bottom):(F=340-g.left-g.right,H=205-g.top-g.bottom);const Pe=m-C,w=parseInt(String(Pe/4));let j=[C+w/4,C+w,C+2*w,m-w,m-w/4];const te=C,le=m,E=F/(le-te);e.currentPriceTab==="full range"&&(j=[C,C+2*w,m]);const ze=j.map(u=>e.direction?Rt(u,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new o(1).div(Rt(u,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString()),A=R(ze);dt("#chart").selectAll("*").remove();const ce=dt("#chart").attr("width",F+g.left+g.right).attr("height",H+g.top+g.bottom).append("g").attr("transform",`translate(${g.left},${g.right})`),Ge=vi(n,function(u){return Number(Math.abs(u.liquityAmount))})||0,Le=fi().range([0,H]).domain([Ge,0]);gi().rangeRound([0,F]).padding(.1);const Ye=ce.append("g").attr("id","barsBox").selectAll("rect").data(n).enter().append("rect");N.value.theme=="default"?Ye.attr("x",function(u,c){return c===0?0:e.direction?Math.abs(u.index-te)*E:Math.abs(le-u.index)*E}).attr("y",function(u,c){return e.direction?c===n.length-1?0:Le(u.liquityAmount):c===n.length-1?0:Le(n[c+1].liquityAmount)}).attr("width",function(u,c){return c===0&&n.length===1&&u.liquityAmount>0?F:(e.direction,c!==n.length-1?Math.abs(n[c+1].index-u.index)*E:0)}).attr("height",function(u,c){return c===0&&n.length===1&&u.liquityAmount>0?H:e.direction?c===n.length-1?0:H-Le(u.liquityAmount):c===n.length-1?0:H-Le(n[c+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):Ye.attr("x",function(u,c){return c===0?0:e.direction?Math.abs(u.index-te)*E:Math.abs(le-u.index)*E}).attr("y",function(u,c){return e.direction?c===n.length-1?0:Le(Math.abs(u.liquityAmount)):c===n.length-1?0:Le(Math.abs(n[c+1].liquityAmount))}).attr("width",function(u,c){return c===0&&n.length===1&&u.liquityAmount>0?F:(e.direction,c!==n.length-1?Math.abs(n[c+1].index-u.index)*E:0)}).attr("height",function(u,c){if(c===0&&n.length===1&&u.liquityAmount>0)return H;if(e.direction)return c===n.length-1?0:Number(u.liquityAmount)?H-Le(Math.abs(u.liquityAmount)):0;{if(c===n.length-1)return 0;const Ne=H-Le(Math.abs(n[c+1].liquityAmount));return Number(n[c+1].liquityAmount)?Ne:0}}).attr("fill",function(u,c){return"#417494"}).attr("class","bars").attr("stroke-width",1).attr("stroke",function(u,c){return"#417494"});const Ke=ce.append("g");Ke.append("line").attr("x1",0).attr("y1",155).attr("x2",F).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const Je=Ke.append("g");let Q=0;if(e.direction){for(let u=0;u<j.length;u++){const c=ue(ze[u],A)||"0";ze.push(c);const Ne=Math.abs(j[u]-te)*E;let oe=0;for(let Ce=0;Ce<c.length;Ce++)c[Ce]==="1"?oe+=4.02:c[Ce]==="."?oe+=2.64:c[Ce]==="7"?oe+=5.48:oe+=6;Je.append("text").text(c).attr("x",Ne-oe/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}Q=Math.abs(ee-te)*E}else{for(let u=j.length-1;u>=0;u--){const c=ue(ze[u],A)||0;ze.push(c);const Ne=Math.abs(j[u]-le)*E;let oe=0;for(let Ce=0;Ce<c.length;Ce++)c[Ce]==="1"?oe+=4.02:c[Ce]==="."?oe+=2.64:c[Ce]==="7"?oe+=5.48:oe+=6;Je.append("text").text(c).attr("x",Ne-oe/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}Q=Math.abs(ee-le)*E}(N.value.theme=="default"?ce.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):ce.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+Q+", 0)");let t,d,h,T;e.direction?(t=D<te?-100:parseInt(String(Math.abs(D-te)*E)),d=U<te?-100:parseInt(String(Math.abs(U-te)*E)),h=k<te?-100:Math.abs(k-te)*E,T=we<te?-100:Math.abs(we-te)*E):(d=D<te?-100:Math.abs(le-D)*E,t=U<te?-100:Math.abs(le-U)*E,T=k>le?-100:Math.abs(le-k)*E,h=we>le?-100:Math.abs(le-we)*E),e.minPrice==="0"&&(t=0),e.maxPrice==="âˆž"&&(d=F),_e.value?fe.value=F-t+94+"px":fe.value=F-t+87+"px",ne.value=d+98+"px",k&&h<F&&ce.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+h+", 0)"),we&&T<F&&ce.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+T+", 0)");const O=ce.append("g").attr("id","left-handle"),B=ce.append("g").attr("id","right-handle");N.value.theme=="default"?(O.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),O.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),O.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),O.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),B.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),B.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),B.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),B.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(O.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),O.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),O.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),O.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),B.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),B.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),B.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),B.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),O.attr("transform","translate("+t+", 0)"),B.attr("transform","translate("+d+", 0)");const Ae=pi().extent([[0,0],[F,H]]).handleSize(30).on("end",xe);ce.append("g").attr("class","brush").call(Ae).call(Ae.move,[t,d]);function xe(u){if(!u.sourceEvent||!u.selection)return;O.attr("transform","translate("+u.selection[0]+", 0)"),B.attr("transform","translate("+u.selection[1]+", 0)"),_e.value,fe.value=F-u.selection[0]+87+"px",ne.value=u.selection[1]+74+"px";let c,Ne,oe=0,Ce=0;e.direction?(oe=f(parseInt(String(u.selection[0]/E+te)),Number(e.poolInfo.tickSpacing)),c=a.tickIndexToPrice(oe,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),Ce=f(parseInt(String(u.selection[1]/E+te)),Number(e.poolInfo.tickSpacing)),Ne=a.tickIndexToPrice(Ce,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()):(Ce=f(le-u.selection[0]/E,Number(e.poolInfo.tickSpacing)),c=1/a.tickIndexToPrice(Ce,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),oe=f(le-u.selection[1]/E,Number(e.poolInfo.tickSpacing)),Ne=1/a.tickIndexToPrice(oe,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()),s.emit("onChangeMinPrice",String(ue(String(c),6))),s.emit("onChangeMaxPrice",String(ue(String(Ne),6)))}N.value.theme=="default"?dt(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):dt(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632")};return M(""),Ie(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab,e.zoom,e.tickList],([n,C,m,D,U,ee])=>{n&&C&&m&&(n!=null&&n.liquidity)&&ye(n,U)},{immediate:!0}),{store:N,loading:V,rangeSizeLower:se,rangeSizeUpper:X,rangeSizeLowerPosition:fe,rangeSizeUpperPosition:ne,decimalFormat:ni,numberformat:bt}}});const Ai=e=>(wt("data-v-662ad41d"),e=e(),Ct(),e),Ni={class:"chart-box"},Li={class:"chart"},qi=Ai(()=>r("svg",{id:"chart"},null,-1));function Mi(e,s,fe,ne,$,se){const X=Ut;return q(),G("div",Ni,[Bt(r("div",Li,[e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="âˆž"?(q(),G("div",{key:0,class:"range-size range-size-lower",style:kt({right:e.rangeSizeLowerPosition})},J(("numberformat"in e?e.numberformat:ae(bt))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):Y("",!0),e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="âˆž"?(q(),G("div",{key:1,class:"range-size range-size-upper",style:kt({left:e.rangeSizeUpperPosition})},J(("numberformat"in e?e.numberformat:ae(bt))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):Y("",!0),qi],512),[[si,!e.chartLoading]]),e.chartLoading?(q(),We(X,{key:0})):Y("",!0)])}const Jt=at(Ii,[["render",Mi],["__scopeId","data-v-662ad41d"]]),$i=it({props:{lever:{type:String,default:""}},setup(){return{}}});const Fi=e=>(wt("data-v-e9e81afa"),e=e(),Ct(),e),Ri={class:"lever"},Oi=Fi(()=>r("div",{class:"lever-title"},"Leverage",-1)),Bi={class:"lever-text"};function Ui(e,s,fe,ne,$,se){return q(),G("div",Ri,[Oi,r("div",Bi,J(e.lever),1)])}const ji=at($i,[["render",Ui],["__scopeId","data-v-e9e81afa"]]),zi=it({components:{NewLiquidityD3Chart:Jt,NewLiquidityPrice:Xt},setup(){const{t:e,locale:s}=jt(),fe=M("liquidity"),ne=ut(),$=I(()=>ne),se=I(()=>$.value.chainName),X=Et(),z=I(()=>X),N=I(()=>$.value.chainName?St($.value.chainName):{});Ot(()=>{et.value=!1});const x=Pt(),a=I(()=>{let t=null;for(let d=0;d<z.value.poolConfigList.length;d++){const h=z.value.poolConfigList[d];h.address==x.query.poolAddress&&(t=h)}return t}),f=I(()=>{let t=null;for(const d in z.value.poolsObj){const h=z.value.poolsObj[d];h.address==x.query.poolAddress&&(t=h)}return t}),R=M(),ye=M(!0),_e=async(t,d)=>{if(ye.value=!0,d){Ve.value=[],v.value=[],Be.value=!1;const h=t.token_a.decimals,T=t.token_b.decimals;rt.tickIndexToPrice(t.current_tick_index,h,T),st.value=rt.sqrtPriceX64ToPrice((t==null?void 0:t.current_sqrt_price)||(t==null?void 0:t.object.current_sqrt_price),h,T).toString(),mt.value=new o(1).div(rt.sqrtPriceX64ToPrice((t==null?void 0:t.current_sqrt_price)||(t==null?void 0:t.object.current_sqrt_price),h,T)).toString(),y.value=t.needReverse?t.token_b:t.token_a,b.value=t.needReverse?t.token_a:t.token_b,R.value=t.needReverse,t.token_a.address.toLowerCase()===y.value.address.toLowerCase()&&t.token_b.address.toLowerCase()===b.value.address.toLowerCase()?ve.value=!0:ve.value=!1;let O={poolAddress:t.address,coinTypeA:t.coin_a_address,coinTypeB:t.coin_b_address};const{list:B,address:Ae}=await N.value.getTicks(O);Ve.value=B&&Ae==t.address?N.value.getTickDataFromUrlData(B):[],ye.value=!1,C(t)}},V=t=>{var T,O;const d=t.token_a.decimals,h=t.token_b.decimals;st.value=rt.sqrtPriceX64ToPrice((t==null?void 0:t.current_sqrt_price)||((T=t==null?void 0:t.object)==null?void 0:T.current_sqrt_price),d,h).toString(),mt.value=new o(1).div(rt.sqrtPriceX64ToPrice((t==null?void 0:t.current_sqrt_price)||((O=t==null?void 0:t.object)==null?void 0:O.current_sqrt_price),d,h)).toString()},v=M([]),n=M(),C=async t=>{const d=t.token_a.decimals,h=t.token_b.decimals;let T=z.value.poolPriceConfigObj&&z.value.poolPriceConfigObj[t.address]&&z.value.poolPriceConfigObj[t.address].recommend_ranges||{};const O=z.value.poolPriceConfigObj&&z.value.poolPriceConfigObj[t.address]&&z.value.poolPriceConfigObj[t.address].type||"";let B,Ae;const xe=bi(t.current_tick_index,t.tickSpacing);n.value=t.current_tick_index,B=xe-Number(t.type=="unstable"?Number(t.tickSpacing)*2:Number(t.tickSpacing)*3),Ae=xe+Number(t.type=="unstable"?Number(t.tickSpacing)*2:Number(t.tickSpacing)*3);const u=N.value.TickMath.tickIndexToPrice(B,d,h).toString(),c=N.value.TickMath.tickIndexToPrice(Ae,d,h).toString();T["full range"]={lower:N.value.TickUtil.getMinIndex(Number(f.value.tickSpacing)),upper:N.value.TickUtil.getMaxIndex(Number(f.value.tickSpacing))},T.custom={lower:B,upper:Ae,minPrice:u,maxPrice:c};const Ne=[];for(let oe in T)T[oe]&&Ne.push({...T[oe],key:oe});O&&Ne&&Ne.length>2?t.isSelfBuilt?Z.value="custom":O=="stable"?Z.value="suggested":Z.value="passive":Z.value="custom",v.value=Ne||{},Qe.value=T,U({key:Z.value,...T[Z.value]})},m=M(""),D=M(""),U=t=>{Z.value=t.key.toLowerCase();const d=f.value.token_a.decimals,h=f.value.token_b.decimals,{lower:T,upper:O}=t;He.value=!1;const B=N.value.TickMath.tickIndexToPrice(T,d,h).toString(),Ae=N.value.TickMath.tickIndexToPrice(O,d,h).toString();if(t.key=="full range"){m.value=T,D.value=O,ee();return}ve.value?(gt.value=String(B),L.value=String(B),pt.value=String(Ae),_.value=String(Ae),m.value=T,D.value=O):(gt.value=new o(1).div(new o(Ae)).toString(),L.value=new o(1).div(new o(Ae)).toString(),pt.value=new o(1).div(new o(B)).toString(),_.value=new o(1).div(new o(B)).toString(),m.value=N.value.TickMath.priceToTickIndex(new o(1/Number(Ae)),d,h),D.value=N.value.TickMath.priceToTickIndex(new o(1/Number(B)),d,h))},ee=t=>{L.value="0",_.value="âˆž"};Ie(()=>f.value,(t,d)=>{(!d&&t&&!K(t)||d&&t&&d.address!==t.address)&&_e(t,!d||t.address!==d.address),t&&!K(t)&&V(t),t||(Ve.value=[])},{immediate:!0}),zt(()=>{y.value=M(),b.value=M(),Ve.value=[]}),Ie(()=>[a.value,f.value,z.value.recommendRangesObj],(t,d)=>{var h,T;(!d||t[0]&&t[1]&&t[2]&&!K(t[0])&&!K(t[1]&&!K(t[2]))||((h=t[0])==null?void 0:h.address)!==((T=d[0])==null?void 0:T.address))&&t[0]&&t[2]&&!K(t[0])&&!K(t[2])&&X.setSinglePool(t[0],t[2],se.value)},{immediate:!0,deep:!0});const k=t=>{if(se.value=="Sui")switch(t){case"passive":return"/sui-image/icon_ conservative@2x.png";case"active":return"/sui-image/icon_active@2x.png";case"full range":return"/sui-image/icon_fullrange@2x.png";case"custom":return"/sui-image/icon_costom@2x.png";case"suggested":return"/sui-image/icon_stabel@2x.png"}else switch(t){case"passive":return"/image/icon_ conservative@2x.png";case"active":return"/image/icon_active@2x.png";case"full range":return"/image/icon_fullrange@2x.png";case"custom":return"/image/icon_costom@2x.png";case"suggested":return"/image/icon_stabel@2x.png"}},we=t=>{switch(t){case"suggested":return e("newAdd.suggested");case"active":return e("newAdd.active");case"passive":return e("newAdd.conservative");case"full range":return e("newAdd.fullRange");case"custom":return e("newAdd.custom")}},g=t=>{var h,T;const d=z.value.poolPriceConfigObj&&z.value.poolPriceConfigObj[(h=f.value)==null?void 0:h.address]&&z.value.poolPriceConfigObj[(T=f.value)==null?void 0:T.address].type||"";if(v.value.length>2)if(d=="unstable")switch(t){case"active":return{top:"38%"};case"passive":return{top:"13%"};case"full range":return{top:"63%"};case"custom":return{top:"87%"}}else switch(t){case"suggested":return{top:"25%"};case"full range":return{top:"49%"};case"custom":return{top:"75%"}}else if(d=="unstable")switch(t){case"active":return{top:"38%"};case"passive":return{top:"13%"};case"full range":return{top:"63%"};case"custom":return{top:"87%"}}else switch(t){case"full range":return{top:"35%"};case"custom":return{top:"60%"}}},F=M(1),H=()=>{const t=F.value/2;F.value=t},Pe=()=>{const t=F.value*2;F.value=t},w=I(()=>{var t,d,h;return!f.value||K($.value.addressHistTokens)||!$.value.addressHistTokens[(t=f.value)==null?void 0:t.poolAddress]?null:Object.fromEntries((h=$.value.addressHistTokens[(d=f.value)==null?void 0:d.poolAddress])==null?void 0:h.data.map(T=>[T.key,T.value]))}),j=M(30),te=M("30D"),le=I(()=>ve.value?w.value&&ue(j.value==7?w.value.before_7_d_contract_price_lowest:j.value==24?w.value.before_24_h_contract_price_lowest:w.value.before_30_d_contract_price_lowest,6)||0:w.value&&ue(new o(1).div(j.value==7?w.value.before_7_d_contract_price_highest:j.value==24?w.value.before_24_h_contract_price_highest:w.value.before_30_d_contract_price_highest).toString(),6)||0),E=I(()=>ve.value?w.value&&ue(j.value==7?w.value.before_7_d_contract_price_highest:j.value==24?w.value.before_24_h_contract_price_highest:w.value.before_30_d_contract_price_highest,6)||0:(w.value&&ue(1/Number(j.value==7?w.value.before_7_d_contract_price_lowest:j.value==24?w.value.before_24_h_contract_price_lowest:w.value.before_30_d_contract_price_lowest),6))==1/0?0:w.value&&ue(1/Number(j.value==7?w.value.before_7_d_contract_price_lowest:j.value==24?w.value.before_24_h_contract_price_lowest:w.value.before_30_d_contract_price_lowest),6)||0),ze=I(()=>{const t=Number(L.value),d=Number(_.value);if(L.value=="0"&&_.value=="âˆž"||Z.value=="full range")return"1x";if(L.value==_.value||Z.value=="full range")return"--";if(L.value&&_.value&&L.value!=="0"&&_.value!=="âˆž"){const h=ht(1/(1-Number((t/d)**.25)),2);return Number(h)>0?h+"x":"--"}else return 1}),A=I(()=>{var t,d,h,T,O,B;return((t=y.value)==null?void 0:t.isSelfBuilt)||((d=b.value)==null?void 0:d.isSelfBuilt)||((T=z.value.tokensObj[(h=y.value)==null?void 0:h.address])==null?void 0:T.isSelfBuilt)||((B=z.value.tokensObj[(O=b.value)==null?void 0:O.address])==null?void 0:B.isSelfBuilt)}),ce=(t,d)=>{t!==L.value&&Z.value=="full range"?U({key:"custom",...v.value.custom}):Z.value!=="full range"&&Z.value!=="custom"?(Z.value="custom",L.value=t):L.value=t,Q.value&&(Be.value?(ve.value&&L.value!==Q.value.minPrice&&(Be.value=!1),!ve.value&&Number(L.value)!==1/Number(Q.value.maxPrice)&&(Be.value=!1)):(ve.value&&L.value==Q.value.minPrice&&_.value==Q.value.maxPrice&&(Be.value=!0),!ve.value&&Number(L.value)==1/Number(Q.value.maxPrice)&&Number(_.value)==1/Number(Q.value.minPrice)&&(Be.value=!0)))},Ge=(t,d)=>{t!==_.value&&Z.value=="full range"?U({key:"custom",...v.value.custom}):Z.value!=="full range"&&Z.value!=="custom"?(Z.value="custom",t=="0"?_.value="âˆž":_.value=t):t=="0"?_.value="âˆž":_.value=t,Q.value&&(Be.value?(ve.value&&_.value!==Q.value.maxPrice&&(Be.value=!1),!ve.value&&Number(_.value)!==1/Number(Q.value.minPrice)&&(Be.value=!1)):(ve.value&&L.value==Q.value.minPrice&&_.value==Q.value.maxPrice&&(Be.value=!0),!ve.value&&Number(L.value)==1/Number(Q.value.maxPrice)&&Number(_.value)==1/Number(Q.value.minPrice)&&(Be.value=!0)))},Le=t=>{var d;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((d=z.value.tokensObj[t==null?void 0:t.address])==null?void 0:d.logo_url)||($.value.theme==="default"?_t("/image/coins/unknown.png"):_t("/image/coins/sui-unknown.png"))},nt=t=>{switch(t){case"active":return e("newAdd.activeTips");case"passive":return e("newAdd.passiveTips");case"full range":return e("newAdd.fullRangTips");case"suggested":return e("newAdd.suggestedTips");case"custom":return e("newAdd.customTips")}},Ye=[{label:"24H",value:24},{label:"7D",value:7},{label:"30D",value:30}],Ke=Tt(),Je=I(()=>Ke),Q=I(()=>{var t;return Je.value.farmsPoolObj[(t=f==null?void 0:f.value)==null?void 0:t.address]}),ot=I(()=>z.value.poolPriceConfigObj);return Ie(()=>[Be.value,f.value,v.value,ot.value,Q.value,ve.value],(t,d)=>{var h,T;if(t[0]&&t[4]&&!K(t[4]))Z.value="custom",L.value=t[5]?t[4].minPrice:String(1/t[4].maxPrice),_.value=t[5]?t[4].maxPrice:String(1/t[4].minPrice);else if(t[1]&&!K(t[1])&&t[2]&&!K(t[2])&&t[3]&&!K(t[3])&&t[4]&&!K(t[4])){t[3]&&t[3][(h=t[1])==null?void 0:h.address]&&t[3][(T=t[1])==null?void 0:T.address].type;const O=t[2].filter(B=>B.key===(t[2].length==4?"passive":"suggested"));O!=null&&O[0]&&(!d||d[0]!==t[0])&&U({...O[0]})}},{immediate:!0}),{positionError:et,getCoinIcon:Le,chainName:se,store:$,currentTab:fe,currentPrice:st,currentPriceReverse:mt,fromCoin:y,toCoin:b,direction:ve,needReverse:R,addCommom:$e,decimalUi:ue,priceTablList:v,currentPriceTab:Z,sliderStyle:g,poolInfo:f,tickList:Ve,getPriceTabImage:k,getPriceTabText:we,defaultMinPrice:gt,defaultMaxPrice:pt,minPrice:L,maxPrice:_,currentTick:n,chartLoading:ye,zoomOut:H,zoomIn:Pe,zoom:F,priceTab:U,before7dContractPriceLowest:le,before7dContractPriceHighest:E,aprRewardsTime:te,lever:ze,aprRewardsParameter:j,isSelfBuilt:A,priceRangeChangeMin:ce,priceRangeChangeMax:Ge,toggle:Gt,getPirceTabTips:nt,timeList:Ye,farmsPoolInfo:Q,checkNullObj:K,isStableFarmingRange:Be}}});const Hi={class:"new-liquidity-left"},Ei=r("span",{class:"selectRange"},"Select Range",-1),Xi={class:"price-info"},Di={class:"left"},Wi={class:"base-coin"},Zi={class:"base-coin-title"},Gi=r("span",null,"Base coin",-1),Ki=r("svg",{class:"icon icon-up","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-exchange_up1"})],-1),Ji=r("svg",{class:"icon icon-down","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-exchange_down1"})],-1),Qi=[Ki,Ji],Yi={class:"base-coin-bottom"},xi={alt:""},Vi={class:"current-price"},ea=r("div",{class:"current-price-title"},"Current Price",-1),ta={key:0,class:"from-pre-to"},ia={class:"right"},aa={class:"price-range"},na={class:"left"},oa={class:"price-slider"},ra={class:"slider"},sa=r("div",{class:"slider-ratio-content"},null,-1),la=[sa],ua={class:"price-tab-list"},ca=["onClick"],da=["src"],ma={class:"right"},va={class:"price-zoom"},fa={class:"current-price"},ga=r("div",{class:"current-price-title"},"Current Price",-1),pa={key:0,class:"from-pre-to"},ba={class:"price-zoom-right"},ha={class:"leverage"},ka=r("div",{class:"left"},null,-1),ya={class:"right"},_a={class:"right-time"},wa={key:0,class:"day-7-price-range"},Ca=r("i",null,null,-1),Pa={class:"gray"},Sa={class:"time-list"},Ta=["onClick"],Ia={class:"right-price-h5"},Aa={class:"range pc-range"},Na={key:0,class:"stable-farming-range pc-stable-farming-range"},La=r("img",{src:Kt},null,-1),qa={class:"check-box-active"},Ma={key:1,class:"stable-farming-range h5-stable-farming-range"},$a=r("span",null,[r("img",{src:Kt}),tt(" Farm rewards rangeï¼š ")],-1),Fa={class:"check-box-active"},Ra={key:2,class:"position-tips"},Oa=["src"],Ba={class:"error"};function Ua(e,s,fe,ne,$,se){var R,ye,_e,V,v,n,C,m,D,U,ee;const X=Ht,z=Jt,N=ji,x=ui,a=Xt,f=li("image");return q(),G("div",Hi,[Ei,r("div",Xi,[r("div",Di,[r("div",Wi,[r("div",Zi,[Gi,r("div",{class:"change-price",onClick:s[0]||(s[0]=(...k)=>e.toggle&&e.toggle(...k))},Qi)]),r("div",Yi,[Bt(r("img",xi,null,512),[[f,e.getCoinIcon(e.fromCoin)]]),r("span",null,J((R=e.fromCoin)==null?void 0:R.symbol),1)])]),r("div",Vi,[ea,r("div",null,[r("span",null,J(e.poolInfo?e.direction?("addCommom"in e?e.addCommom:ae($e))(("decimalUi"in e?e.decimalUi:ae(ue))(e.currentPrice,6)):("addCommom"in e?e.addCommom:ae($e))(("decimalUi"in e?e.decimalUi:ae(ue))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(q(),G("span",ta,J((ye=e.toCoin)==null?void 0:ye.symbol)+" per "+J((_e=e.fromCoin)==null?void 0:_e.symbol),1)):Y("",!0)])])]),r("div",ia,[e.currentTab=="liquidity"?(q(),G("div",{key:0,class:"zoom-out",onClick:s[1]||(s[1]=(...k)=>e.zoomOut&&e.zoomOut(...k))}," + ")):Y("",!0),e.currentTab=="liquidity"?(q(),G("div",{key:1,class:"zoom-in",onClick:s[2]||(s[2]=(...k)=>e.zoomIn&&e.zoomIn(...k))}," - ")):Y("",!0)])]),r("div",aa,[r("div",na,[r("div",oa,[r("div",ra,[r("div",{class:"slider-ratio",style:kt(e.sliderStyle(e.currentPriceTab))},la,4)])]),r("div",ua,[(q(!0),G(yt,null,Mt(e.priceTablList,k=>(q(),G("div",{key:k.key,class:ft(["price-tab-item",e.currentPriceTab==k.key?"price-tab-item-active":""]),onClick:we=>e.priceTab(k)},[Fe(X,{placement:"bottom","arrow-point-at-center":""},{title:lt(()=>[tt(J(e.getPirceTabTips(k.key)),1)]),default:lt(()=>[r("img",{src:e.getPriceTabImage(k.key),alt:""},null,8,da),r("span",null,J(e.getPriceTabText(k.key)),1)]),_:2},1024)],10,ca))),128))])]),r("div",ma,[r("div",va,[r("div",fa,[ga,r("div",null,[r("span",null,J(e.poolInfo?e.direction&&!e.needReverse?("addCommom"in e?e.addCommom:ae($e))(("decimalUi"in e?e.decimalUi:ae(ue))(e.currentPrice,6)):("addCommom"in e?e.addCommom:ae($e))(("decimalUi"in e?e.decimalUi:ae(ue))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(q(),G("span",pa,J(e.direction&&!e.needReverse?`${(V=e.fromCoin)==null?void 0:V.symbol} per ${(v=e.toCoin)==null?void 0:v.symbol}`:`${(n=e.toCoin)==null?void 0:n.symbol} per ${(C=e.fromCoin)==null?void 0:C.symbol}`),1)):Y("",!0)])]),r("div",ba,[e.currentTab=="liquidity"?(q(),G("div",{key:0,class:"zoom-out",onClick:s[3]||(s[3]=(...k)=>e.zoomOut&&e.zoomOut(...k))}," + ")):Y("",!0),e.currentTab=="liquidity"?(q(),G("div",{key:1,class:"zoom-in",onClick:s[4]||(s[4]=(...k)=>e.zoomIn&&e.zoomIn(...k))}," - ")):Y("",!0)])]),e.poolInfo?(q(),We(z,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direction,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,zoom:e.zoom,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","zoom","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):Y("",!0)])]),r("div",ha,[ka,r("div",ya,[r("div",_a,[e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(q(),G("div",wa,[Ca,r("span",Pa,J(e.aprRewardsParameter==7?"7D":e.aprRewardsParameter==24?"24H":"30D")+" Price Range",1),r("span",null,J(("addCommom"in e?e.addCommom:ae($e))(("decimalUi"in e?e.decimalUi:ae(ue))(e.before7dContractPriceLowest,6)))+" - "+J(("addCommom"in e?e.addCommom:ae($e))(("decimalUi"in e?e.decimalUi:ae(ue))(e.before7dContractPriceHighest,6))),1)])):Y("",!0),r("div",Sa,[(q(!0),G(yt,null,Mt(e.timeList,k=>(q(),G("div",{key:k.value,class:ft(["time-item",k.value==e.aprRewardsParameter?"time-item-active":""]),onClick:we=>e.aprRewardsParameter=k.value},J(k.label),11,Ta))),128))])]),r("div",Ia,[r("span",null,J(("addCommom"in e?e.addCommom:ae($e))(("decimalUi"in e?e.decimalUi:ae(ue))(e.before7dContractPriceLowest,6)))+" - "+J(("addCommom"in e?e.addCommom:ae($e))(("decimalUi"in e?e.decimalUi:ae(ue))(e.before7dContractPriceHighest,6))),1)])])]),r("div",{class:ft(["apr-and-price",e.positionError&&e.poolInfo?"padding-apr-and-price":""])},[Fe(N,{lever:e.lever},null,8,["lever"]),r("div",Aa,[e.farmsPoolInfo&&!("checkNullObj"in e?e.checkNullObj:ae(K))(e.farmsPoolInfo)&&e.fromCoin&&e.toCoin?(q(),G("div",Na,[r("span",null,[La,tt(" Farm rewards rangeï¼š"+J(("decimalUi"in e?e.decimalUi:ae(ue))(e.direction?e.farmsPoolInfo.minPrice:1/e.farmsPoolInfo.maxPrice,6))+" - "+J(("decimalUi"in e?e.decimalUi:ae(ue))(e.direction?e.farmsPoolInfo.maxPrice:1/e.farmsPoolInfo.minPrice,6))+" "+J((m=e.toCoin)==null?void 0:m.symbol)+" per "+J((D=e.fromCoin)==null?void 0:D.symbol),1)]),r("div",qa,[Fe(x,{class:"range-alerts-switch",checked:e.isStableFarmingRange,onClick:s[5]||(s[5]=k=>e.isStableFarmingRange=!e.isStableFarmingRange)},null,8,["checked"])])])):Y("",!0),e.farmsPoolInfo&&!("checkNullObj"in e?e.checkNullObj:ae(K))(e.farmsPoolInfo)&&e.fromCoin&&e.toCoin?(q(),G("div",Ma,[$a,r("div",Fa,[tt(J(("decimalUi"in e?e.decimalUi:ae(ue))(e.direction?e.farmsPoolInfo.minPrice:1/e.farmsPoolInfo.maxPrice,6))+" - "+J(("decimalUi"in e?e.decimalUi:ae(ue))(e.direction?e.farmsPoolInfo.maxPrice:1/e.farmsPoolInfo.minPrice,6))+" "+J((U=e.toCoin)==null?void 0:U.symbol)+" per "+J((ee=e.fromCoin)==null?void 0:ee.symbol)+" ",1),Fe(x,{class:"range-alerts-switch",checked:e.isStableFarmingRange,onClick:s[6]||(s[6]=k=>e.isStableFarmingRange=!e.isStableFarmingRange)},null,8,["checked"])])])):Y("",!0),Fe(a,{min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direction,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["min","max","from-coin","to-coin","direct","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice"]),e.positionError&&e.poolInfo?(q(),G("div",Ra,[r("img",{src:("importIcon"in e?e.importIcon:ae(_t))("/image/icon-tips-error@2x.png"),alt:""},null,8,Oa),r("p",Ba,J(e.$t("tips.positionError")),1)])):Y("",!0)])],2)])}const Qt=at(zi,[["render",Ua]]),ja=it({props:{poolInfo:{type:Object,default:()=>({})},isActive:{type:Boolean,default:!0}},setup(e,s){const fe=Tt(),ne=M(!1),$=M(),se=M(!0),X=ut(),z=I(()=>X),N=I(()=>z.value.newTopPoolsObj);Ie(()=>e.poolInfo,f=>{f&&!K(f)&&fe.getFarmsPoolList()},{immediate:!0});const x=f=>{var _e,V,v,n;const R=f[(_e=e==null?void 0:e.poolInfo)==null?void 0:_e.poolAddress]||{};let ye=0;R&&!K(R)&&((v=(V=R==null?void 0:R.stable_farming)==null?void 0:V.stable_rewarder)==null||v.forEach(C=>{C.amount_second>0&&(ye+=C.amount_second)}),ye>0?(ne.value=!0,$.value={id:R.stable_farming.stable_farming_pool,clmm_pool_id:(n=e==null?void 0:e.poolInfo)==null?void 0:n.poolAddress},s.emit("sendFarmsPoolInfo",se.value&&e.isActive?$.value:"")):ne.value=!1)};return Ie(()=>[N.value,e.poolInfo],([f,R])=>{f&&!K(f)&&R&&!K(R)&&x(f)},{immediate:!0}),Ie(()=>[e.isActive,se.value,$.value],([f,R,ye])=>{s.emit("sendFarmsPoolInfo",R&&e.isActive?ye:"")},{immediate:!0}),{isShowAutoStake:ne,changeIsOpen:()=>{se.value=!se.value,s.emit("sendFarmsPoolInfo",se.value&&e.isActive?$.value:"")},isOpen:se}}}),za=""+globalThis.__publicAssetsURL("sui-image/farming_huo.png"),Ha=""+globalThis.__publicAssetsURL("sui-image/icon_sel@2x.png");const It=e=>(wt("data-v-9d2d8cb8"),e=e(),Ct(),e),Ea={key:0,class:"farms-auto-stake"},Xa=It(()=>r("img",{class:"farms-icon",src:za,alt:""},null,-1)),Da=It(()=>r("div",{class:"desc"},"Automatically stake your position into the farm to enjoy higher yield.",-1)),Wa={key:0,src:Ha,alt:""},Za=It(()=>r("div",{class:"check-box"},null,-1));function Ga(e,s,fe,ne,$,se){const X=Ht;return e.isShowAutoStake?(q(),G("div",Ea,[Xa,Da,e.isActive?(q(),G("div",{key:0,class:"check-box-active",onClick:s[0]||(s[0]=(...z)=>e.changeIsOpen&&e.changeIsOpen(...z))},[e.isOpen?(q(),G("img",Wa)):Y("",!0)])):(q(),We(X,{key:1,"overlay-style":{"min-width":"200px"}},ci({default:lt(()=>[Za]),_:2},[e.isActive?void 0:{name:"title",fn:lt(()=>[tt("Farming rewards only available for active positions.")]),key:"0"}]),1024))])):Y("",!0)}const Ka=at(ja,[["render",Ga],["__scopeId","data-v-9d2d8cb8"]]),Ja=it({components:{NewLiquidityTitle:Dt,NewLiquidityAssetsCard:Wt,NewLiquidityDepositRatio:Zt},setup(){const{t:e,locale:s}=jt(),fe=ut(),ne=I(()=>fe),$=I(()=>ne.value.chainName),se=Et(),X=I(()=>se),z=oi(),N=I(()=>z),x=Pt(),a=I(()=>{let i=null;for(const l in X.value.poolsObj){const p=X.value.poolsObj[l];p.address==x.query.poolAddress&&(i=p)}return console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:272 ~ constpoolInfo:any=computed ~ info:",i),i}),f=M(!1),R=M(!1),ye=I(()=>ne.value.theme),_e=async(i,l)=>{y.value=i.needReverse?i.token_b:i.token_a,b.value=i.needReverse?i.token_a:i.token_b,P.value="",S.value=""},V=I(()=>N.value.assets&&y.value&&N.value.assets[y.value.address]?$t(N.value.assets[y.value.address].balance,y.value.decimals):"0"),v=I(()=>N.value.assets&&b.value&&N.value.assets[b.value.address]?$t(N.value.assets[b.value.address].balance,b.value.decimals):"0"),n=i=>{i==="fromCoin"?(Te.value=!0,$.value==="Aptos"?P.value=Number(V.value)>0?y.value.symbol=="APT"?new o(Number(V.value)).sub(new o(.1)).lt(new o(0))?"0":new o(Number(V.value)).sub(new o(.1)).toString():String(V.value):"":P.value=Number(V.value)>0?y.value.symbol=="SUI"?new o(Number(V.value)).sub(new o(.05)).lt(new o(0))?"0":new o(Number(V.value)).sub(new o(.05)).toString():String(V.value):""):(Te.value=!1,$.value==="Aptos"?S.value=Number(v.value)>0?b.value.symbol=="APT"?new o(Number(v.value)).sub(new o(.1)).lt(new o(0))?"0":new o(Number(v.value)).sub(new o(.1)).toString():String(v.value):"":S.value=Number(v.value)>0?b.value.symbol=="SUI"?new o(Number(v.value)).sub(new o(.05)).lt(new o(0))?"0":new o(Number(v.value)).sub(new o(.05)).toString():String(v.value):"")},C=i=>{i==="fromCoin"?(Te.value=!0,P.value=Number(V.value)>0?ht(new o(Number(V.value)).div(2).toString(),y.value.decimals).toString():""):(Te.value=!1,S.value=Number(v.value)>0?ht(new o(Number(v.value)).div(2).toString(),b.value.decimals).toString():"")},m=M(),D=M(),U=M(),ee=M(!1),k=i=>{var l,p,de,W;m.value=i,i==="fromCoin"?(D.value=((l=b.value)==null?void 0:l.address)||"",U.value=x.query.actions=="new-position"?(p=y.value)==null?void 0:p.address:a.value.needReverse?a.value.token_b.address:a.value.token_a.address):(D.value=((de=y.value)==null?void 0:de.address)||"",U.value=x.query.actions=="new-position"?(W=b.value)==null?void 0:W.address:a.value.needReverse?a.value.token_a.address:a.value.token_b.address),ee.value=!0},we=i=>{var de,W,ge,pe,me,be,he,Se;const l=a.value.needReverse?a.value.token_b:a.value.token_a,p=a.value.needReverse?a.value.token_a:a.value.token_b;m.value==="fromCoin"?(((de=y.value)==null?void 0:de.address)===(l==null?void 0:l.address)||!((W=y.value)!=null&&W.address)?(b.value&&i.address.toLowerCase()===((ge=b)==null?void 0:ge.value.address.toLowerCase())&&(b.value=null),y.value=i):(y.value&&i.address.toLowerCase()===((pe=y)==null?void 0:pe.value.address.toLowerCase())&&(y.value=null),b.value=i),x.query.action||(x.query.fee="")):((me=b.value)==null?void 0:me.address)===(p==null?void 0:p.address)||!((be=b.value)!=null&&be.address)?(y.value&&i.address.toLowerCase()===((he=y)==null?void 0:he.value.address.toLowerCase())&&(y.value=null),b.value=i):(b.value&&i.address.toLowerCase()===((Se=b)==null?void 0:Se.value.address.toLowerCase())&&(b.value=null),y.value=i),ee.value=!1},g=I(()=>ne.value.chainName?St(ne.value.chainName):{}),F=I(()=>ne.value.slippage),H=M(),Pe=async()=>{var Ue,Me,Re,Xe;if(He.value||!L.value&&!_.value)return!1;if(!P.value&&!S.value&&!L.value&&!_.value)return;const i=a.value||{};if(K(i))return;const{TickUtil:l,TickMath:p,getNearestTickByTick:de}=g.value,W=i==null?void 0:i.token_a.decimals,ge=i==null?void 0:i.token_b.decimals;let pe,me,be,he,Se,qe,Ee,Ze,ke=i==null?void 0:i.current_tick_index,ie;if(i.token_a.address.toLowerCase()===y.value.address.toLowerCase()&&i.token_b.address.toLowerCase()===b.value.address.toLowerCase()?ie=!0:ie=!1,L.value==="0"&&_.value==="âˆž")be=l.getMinIndex(Number(i.tickSpacing)),he=l.getMaxIndex(Number(i.tickSpacing)),Se=p.tickIndexToSqrtPriceX64(be),qe=p.tickIndexToSqrtPriceX64(he);else if(Z.value=="custom"){ie?(pe=L.value,me=_.value):(pe=_.value!=="âˆž"?new o(1).div(_.value).toString():1/0,me=new o(1).div(L.value).toString());try{Ee=new o(pe).equals(new o(0))?-443636:p.priceToTickIndex(new o(pe),W,ge)}catch{Ee=-443636}try{Ze=p.priceToTickIndex(new o(me),W,ge)}catch{Ze=443636}be=de(Ee,Number(i.tickSpacing),!0),he=de(Ze,Number(i.tickSpacing),!0);try{Se=p.priceToSqrtPriceX64(new o(pe),W,ge)}catch{(me===1/0||me==="âˆž")&&(Se=p.tickIndexToSqrtPriceX64(l.getMinIndex(Number(i.tickSpacing))))}try{qe=p.priceToSqrtPriceX64(new o(me),W,ge)}catch{(me===1/0||me==="âˆž")&&(qe=p.tickIndexToSqrtPriceX64(l.getMaxIndex(Number(i.tickSpacing))))}}else be=(Ue=Qe.value[Z.value])==null?void 0:Ue.lower,he=(Me=Qe.value[Z.value])==null?void 0:Me.upper,Se=p.tickIndexToSqrtPriceX64(be),qe=p.tickIndexToSqrtPriceX64(he);if(_.value!=="âˆž"&&be>=he){f.value=!0,P.value="",R.value=!0,S.value="";return}if(_.value==="âˆž"||ke>=be&&ke<he){f.value=!1,R.value=!1;let re;if(P.value||S.value){if(Te.value){const vt=new o(P.value).mul(Math.pow(10,y.value.decimals)).toString();re=new je(vt)}else{const vt=new o(S.value).mul(Math.pow(10,b.value.decimals)).toString();re=new je(vt)}p.tickIndexToSqrtPriceX64(a.value.current_tick_index);const{liquidityAmount:Oe,tokenMaxA:De,tokenMaxB:ct,tokenMaxAOrigin:ii,tokenMaxBOrigin:ai}=g.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:i.token_a,tokenB:i.token_b,lowerTick:be,upperTick:he,coinAmount:re,iscoinA:ie?Te.value:!Te.value,roundUp:!0,slippage:Number(F.value)/100,curSqrtPrice:new je(a.value.current_sqrt_price)});H.value={liquidityAmount:Oe,tokenMaxA:De,tokenMaxB:ct,tokenMaxAOrigin:ii,tokenMaxBOrigin:ai},ie?Te.value?S.value=Number(ct)>0?ct:"":P.value=Number(De)>0?De:"":Te.value?S.value=De:P.value=ct}}else if(ke>=he){if(ie?P.value="":S.value="",f.value=ie,R.value=!ie,P.value||S.value){let re;if(ie){const Oe=new o(S.value).mul(Math.pow(10,(Re=b.value)==null?void 0:Re.decimals)).toString();re=new je(Oe),H.value={liquidityAmount:g.value.estimateLiquidityForCoinB(Se,qe,re),tokenMaxA:0,tokenMaxB:S.value}}else{const Oe=new o(P.value).mul(Math.pow(10,(Xe=y.value)==null?void 0:Xe.decimals)).toString();re=new je(Oe),H.value={liquidityAmount:g.value.estimateLiquidityForCoinB(Se,qe,re),tokenMaxA:0,tokenMaxB:P.value}}}}else if(ke<be){if(f.value=!ie,R.value=ie,ie?S.value="":P.value="",P.value||S.value){let re;if(ie){const Oe=new o(P.value).mul(Math.pow(10,y.value.decimals)).toString();re=new je(Oe),H.value={liquidityAmount:g.value.estimateLiquidityForCoinA(Se,qe,re),tokenMaxA:P.value,tokenMaxB:0}}else{const Oe=new o(S.value).mul(Math.pow(10,b.value.decimals)).toString();re=new je(Oe),H.value={liquidityAmount:g.value.estimateLiquidityForCoinA(Se,qe,re),tokenMaxA:S.value,tokenMaxB:0}}}}else f.value=!0,P.value="",R.value=!0,S.value=""};Ie(()=>a.value,(i,l)=>{(!l&&i&&!K(i)||l&&i&&l.address!==i.address)&&_e(i,!l||i.address!==l.address),i&&!K(i)&&Pe()},{immediate:!0}),Ie(P,(i,l)=>{i==""&&Te.value&&(S.value=""),i&&Te.value&&!He.value&&Pe()}),Ie(S,(i,l)=>{i==""&&!Te.value&&(P.value=""),i&&!Te.value&&!He.value&&Pe()}),Ie(()=>ve.value,(i,l)=>{Pe()}),Ie(()=>[y.value,b.value],([i,l])=>{i&&l&&(f.value=!1,R.value=!1)});const w=M("--"),j=I(()=>X.value.RATES),te=()=>{const i=j.value&&j.value[y.value.address]&&j.value[y.value.address].price,l=j.value&&j.value[b.value.address]&&j.value[b.value.address].price;if(i&&l){const p=new o(P.value>0?P.value:0).mul(i),de=new o(S.value>0?S.value:0).mul(l),W=p.add(de).toNumber();w.value=W>0&&W<.01?"<$0.01":"$"+$e(W,2)}else w.value="--"};Ie(()=>[P.value,S.value,He.value],([i,l,p])=>{(i||l)&&!p?te():(!i||!l)&&!p&&(w.value="--")},{immediate:!0});const le=M(),E=async()=>{var ie,Ue;if(!L.value&&!_.value)return!1;if(!P.value&&!S.value&&!L.value&&!_.value)return;const i=a.value;if(K(i))return;const{TickUtil:l,TickMath:p,getNearestTickByTick:de}=g.value,W=i==null?void 0:i.token_a.decimals,ge=i==null?void 0:i.token_b.decimals;let pe,me,be,he,Se,qe,Ee;if(i.token_a.address.toLowerCase()===y.value.address.toLowerCase()&&i.token_b.address.toLowerCase()===b.value.address.toLowerCase()?Ee=!0:Ee=!1,L.value==="0"&&_.value==="âˆž")be=l.getMinIndex(Number(i.tickSpacing)),he=l.getMaxIndex(Number(i.tickSpacing));else if(Z.value=="custom"){Ee?(pe=Number(L.value),me=Number(_.value)):(pe=new o(1).div(_.value).toString(),me=new o(1).div(L.value).toString());try{Se=pe==0?-443636:p.priceToTickIndex(new o(pe),W,ge)}catch{Se=-443636}try{qe=p.priceToTickIndex(new o(me),W,ge)}catch{qe=443636}be=de(Se,Number(i.tickSpacing),!0),he=de(qe,Number(i.tickSpacing),!0)}else be=(ie=Qe.value[Z.value])==null?void 0:ie.lower,he=(Ue=Qe.value[Z.value])==null?void 0:Ue.upper;const Ze=j.value[i==null?void 0:i.token_a.address].price,ke=j.value[i==null?void 0:i.token_b.address].price;ve.value?new je(i.current_sqrt_price):new je(1/i.current_sqrt_price);try{const{amountA:Me,amountB:Re,tokenAmountsInfo:Xe}=await g.value.estCoinAmountsFromTotalAmount({lowerTick:be,upperTick:he,decimalsA:W,decimalsB:ge,curSqrtPrice:new je(i.current_sqrt_price),totalAmount:w.value.replace(/[^\d.]/g,""),tokenPriceA:Ze,tokenPriceB:ke});le.value=Xe,i.needReverse?ve.value?(P.value=Me,S.value=Re):(P.value=Re,S.value=Me):(P.value=Me,S.value=Re)}catch(Me){console.log(Me,"e===>")}};Ie([L,_],([i,l])=>{He.value?He.value&&E():Pe(),l!=="âˆž"&&Number(i)!==0&&Number(l)!==0&&Number(i)>=Number(l)?et.value=!0:et.value=!1,Number(i)==0&&Number(l)==0&&st.value&&(et.value=!0)},{deep:!0,immediate:!0});const ze=i=>{const l=i.replace(/[^\d.]/g,""),p="$"+$e(l);He.value=!0,w.value=p,l>0?E():(P.value="",S.value="")},A=M(!1),{setTransactionTxid:ce,setTransactionDesc:Ge,setIsShowWaiting:Le,setIsShowSuccess:nt,setPositiomNum:Ye,setIsShowRejected:Ke}=fe,Je=Pi(),Q=I(()=>X.value.currentPositionInfo),ot=M(!1),t=M(!0),d=Tt(),h=I(()=>d),T=I(()=>h.value.farmsPoolObj);Ie(()=>[T.value,a.value],([i,l])=>{i&&!K(i)&&l&&!K(l)&&(i[l.address]||(t.value=!1))},{immediate:!0});const O=M(),B=M(),Ae=i=>{O.value=i,i?t.value=!0:t.value=!1},xe=async(i,l,p,de)=>{try{l=="farming"?await X.value.setCurrentPositionInfo("","","","Sui",p,"farming"):await X.value.setCurrentPositionInfo(i,"","",$.value,de),await ri(3e3),t.value?await Je.subscribePosition({pool_address:Q.value.clmm_pool_id,position_index:Q.value.name.split("-")[1]},Q.value.clmm_position_id):await Je.subscribePosition({pool_address:Q.value.poolAddress,position_index:Q.value.index},Q.value.nftHash)}catch(W){console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:1151 ~ notifiSubscribePosition ~ error:",W)}},u=async i=>{var Se,qe,Ee,Ze;A.value=!1,X.value.currentPositionInfo={},ce(""),Ge(e("tips.increaseLiquiditySuccess",{from:f.value?"":`${$e(P.value)} ${(Se=y.value)==null?void 0:Se.symbol}`,and:!f.value&&!R.value?"and":"",to:R.value?"":`${$e(S.value)} ${(qe=b.value)==null?void 0:qe.symbol}`})),Le(!0);const l=ve.value?Te.value:!Te.value;let p,de,W,ge,pe,me;const be=a.value.token_a.decimals,he=a.value.token_b.decimals;if(L.value==="0"&&_.value==="âˆž")W=g.value.TickUtil.getMinIndex(Number(a.value.tickSpacing)),ge=g.value.TickUtil.getMaxIndex(Number(a.value.tickSpacing));else if(Z.value=="custom"){ve.value?(p=L.value,de=_.value):(p=new o(1).div(_.value).toString(),de=new o(1).div(L.value).toString());try{pe=p==0?g.value.TickUtil.getMinIndex(Number(a.value.tickSpacing)):g.value.TickMath.priceToTickIndex(new o(p),be,he)}catch{pe=g.value.TickUtil.getMinIndex(Number(a.value.tickSpacing))}try{me=g.value.TickMath.priceToTickIndex(new o(de),be,he)}catch{me=g.value.TickUtil.getMaxIndex(Number(a.value.tickSpacing))}W=g.value.getNearestTickByTick(pe,Number(a.value.tickSpacing),!0),ge=g.value.getNearestTickByTick(me,Number(a.value.tickSpacing),!0)}else W=Qe.value[Z.value].lower,ge=Qe.value[Z.value].upper;try{let ke;He.value?ke=await g.value.getCreateAddLiquidityPayload({pool:a.value,curSqrtPrice:new je(a.value.current_sqrt_price),tickLower:W,tickUpper:ge,slippage:Number(F.value)/100,tokenAmounts:le.value}):ke=await g.value.getAddLiquidityTransactionPayload({pool:{poolAddress:a.value.poolAddress,token_a:a.value.token_a,token_b:a.value.token_b},amount:Te.value?P.value:S.value,fix_amount_a:l,tick_lower:W,tick_upper:ge,index:0,slippage:Number(F.value)/100,roundUp:!0,collect_fee:!1,curSqrtPrice:new je(a.value.current_sqrt_price),farmPoolInfo:O.value});let ie;if($.value==="Aptos")ie=await N.value.currentWallet.signAndSubmitTransaction(ke);else{const Ue=await g.value.signAndExecuteTransactionBlock(N.value.currentWallet,ke==null?void 0:ke.txb,ke==null?void 0:ke.payloadParams);ie=g.value.handleTx(Ue)}if(console.log("0410###tx###",ie),ie&&ie.hash){ce(ie.hash),Le(!1),nt(!0);let Ue;a.value.needReverse?a.value.token_a.address.toLowerCase()===y.value.address.toLowerCase()&&a.value.token_b.address.toLowerCase()===b.value.address.toLowerCase()?Ue=!1:Ue=!0:a.value.token_a.address.toLowerCase()===y.value.address.toLowerCase()&&a.value.token_b.address.toLowerCase()===b.value.address.toLowerCase()?Ue=!0:Ue=!1;const Me={title:"Supplied",desc:e("tips.addLiquiditySuccessText",{from:f.value?"":`${$e(P.value)} ${(Ee=y.value)==null?void 0:Ee.symbol}`,and:!f.value&&!R.value?"and":"",to:R.value?"":`${$e(S.value)} ${(Ze=b.value)==null?void 0:Ze.symbol}`}),hash:ie.hash,tit:"Position Created",icon:"icon-icon-Position-Created"};$.value!=="Aptos"&&(Me.res=ie.res),g.value.showTransitionPending(Me),console.log(Me,"toAdd params###");const Re=await g.value.watchTransaction(Me,!0);if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:1295 ~ toAdd ~ watchInfo:",Re),Re.status){nt(!1),X.value.setCurrentPositionLoading(!0);let Xe,re;$.value==="Aptos"?B.value={token_a:a.value.token_a,token_b:a.value.token_b,minPrice:L.value,maxPrice:_.value,pool:a.value.address,collection:Re.nftInfo[0].data.id.collection,tokenName:Re.nftInfo[0].data.name}:(re=Re.nftInfo,console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:1319 ~ toAdd ~ nftInfo:",re),t.value?(Re.res.events.forEach(De=>{De.type.indexOf("::pool::DepositEvent")>-1&&(Xe=De.parsedJson.wrapped_position_id)}),B.value={token_a:a.value.needReverse?a.value.token_b:a.value.token_a,token_b:a.value.needReverse?a.value.token_a:a.value.token_b,minPrice:L.value,maxPrice:_.value,id:Xe,clmm_pool_id:a.value.address,pool:a.value.address}):B.value={token_a:a.value.needReverse?a.value.token_b:a.value.token_a,token_b:a.value.needReverse?a.value.token_a:a.value.token_b,minPrice:L.value,maxPrice:_.value,pos_object_id:re.position,pool:a.value.address},console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:1389 ~ toAdd ~ positionInfoDetail:",B.value)),ot.value=!0;const Oe=a.value.poolAddress;setTimeout(()=>{if(i){const De=Xe?"farming":"clmm";console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:1400 ~ setTimeout ~ poolInfo.value.poolAddress:",Oe),xe(Oe,De,Xe,re==null?void 0:re.position)}},3e3),setTimeout(()=>{se.updateCurrentPools(Oe,$.value),g.value.getAccount(N.value.address)},3e3),setTimeout(async()=>{Ft(g,a)},7e3)}Ye()}else Le(!1),Ke(!0);P.value="",S.value=""}catch(ke){P.value="",S.value="",console.log("0330###Add liquidity Error###",ke),Le(!1),Ke(!0)}},c=I(()=>!!(!P.value&&!S.value||Number(P.value)>Number(V.value)||Number(S.value)>Number(v.value)||oe.value!==e("button.addLiquidity")&&oe.value!==e("newAdd.preview")||a.value&&a.value&&a.value.is_pause||Number(P.value)<=0&&Number(S.value)<=0||!f.value&&Number(P.value)==0||!R.value&&Number(S.value)==0)),Ne=I(()=>!y.value||!b.value),oe=I(()=>a.value&&a.value.is_pause?"Pool Closed":!y.value||!b.value||Ne.value?e("modal.selectTokenModalTitle"):Number(P.value)>Number(V.value)?e("button.insufficientBalance",{name:y.value.symbol}):Number(S.value)>Number(v.value)?e("button.insufficientBalance",{name:b.value.symbol}):!Number(P.value)&&!Number(S.value)?e("button.enterAmount"):_.value!=="âˆž"&&Number(L.value)>=Number(_.value)?e("newAdd.invalidRange"):e("button.addLiquidity")),Ce=M({}),At=M({}),Nt=M(!1),Lt=(i,l)=>{const p=localStorage.getItem(i.address);X.value.tokensObj&&X.value.tokensObj[i.address]&&X.value.tokensObj[i.address].isSelfBuilt&&!p&&(l=="fromCoin"&&(Ce.value=i),l=="toCoin"&&(At.value=i),Nt.value=!0)};Ie(()=>[y.value,b.value],([i,l])=>{i&&!K(i)&&Lt(i,"fromCoin"),l&&!K(l)&&Lt(l,"toCoin")},{immediate:!0});const qt=di(),xt=()=>{$.value!=="Aptos"?qt.push("/pool/list"):qt.push("/pools")},Vt=i=>{He.value,u(i)},ei=()=>{x.query.action!=="create-pool"&&x.query.actions!=="new-position"&&(Ft(g,a),Pe(),se.updateCurrentPools(a.value.poolAddress,$.value)),se.setPoolConfigList($.value,ne.value.filterCoinsObj)},ti=I(()=>{var p,de,W,ge,pe,me;const i=(W=j.value[(de=(p=y)==null?void 0:p.value)==null?void 0:de.address])==null?void 0:W.price,l=(me=j.value[(pe=(ge=b)==null?void 0:ge.value)==null?void 0:pe.address])==null?void 0:me.price;return!!(i&&l)});return Ie(()=>[x,X.value.tokensObj],([i,l])=>{var p;l&&!K(l)&&(b.value||(b.value=X.value.tokensObj[(p=i==null?void 0:i.query)==null?void 0:p.toCoin]))},{immediate:!0,deep:!0}),{positionError:et,decimalUi:ue,poolInfo:a,fromCoinAmount:P,toCoinAmount:S,fromCoin:y,toCoin:b,theme:ye,showFromCoinLock:f,showToCoinLock:R,fromCoinBlance:V,toCoinBlance:v,maxBtnSelect:n,halfBtnSelect:C,fixedFromCoin:Te,openCoinSelect:k,currentCoinKey:m,existingCoins:D,lastSelectCoin:U,showCoinSelect:ee,onCoinSelect:we,liquidityTotalAmount:w,toggle:Gt,onInput:ze,isInputTotalAmount:He,isViewDetail:ot,addLiquidityBtnDisabled:c,addLiquidityBtnText:oe,isShowTokenWarning:Nt,chainName:$,closeTokenWarning:xt,warningFromCoin:Ce,warningToCoin:At,isShowLiquidityModal:A,currentPrice:st,currentPriceReverse:mt,currentPriceTab:Z,minPrice:L,maxPrice:_,toAdd:u,direction:ve,wallet:N,getAddLiquidityType:Vt,clickRefresh:ei,isShowtotalAmount:ti,isAutoStakeFarming:t,farmPoolInfo:O,getFarmsPoolInfo:Ae,positionInfoDetail:B}}});const Qa={class:"new-liquidity-right"},Ya={class:"deposit-title"},xa={class:"card-container"},Va={key:0,class:"lock"},en={class:"card-item"},tn={class:"card-item"},an={key:0,class:"total-amount"},nn=r("span",null,"Total Amount",-1);function on(e,s,fe,ne,$,se){const X=Dt,z=hi,N=Wt,x=yi,a=Zt,f=mi,R=_i,ye=wi,_e=Ci,V=Ka;return q(),G("div",Qa,[r("div",Ya,[Fe(X,{"pool-info":e.poolInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"])]),r("div",xa,[e.positionError?(q(),G("div",Va,[Fe(z)])):Y("",!0),r("div",en,[Fe(N,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":s[0]||(s[0]=v=>e.fromCoinAmount=v),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:s[1]||(s[1]=v=>e.maxBtnSelect("fromCoin")),onOnHalf:s[2]||(s[2]=v=>e.halfBtnSelect("fromCoin")),onOnInput:s[3]||(s[3]=v=>{e.fromCoinAmount=v,e.fixedFromCoin=!0,e.isInputTotalAmount=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.positionError?(q(),We(x,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])):Y("",!0)]),r("div",tn,[Fe(N,{modelValue:e.toCoinAmount,"onUpdate:modelValue":s[4]||(s[4]=v=>e.toCoinAmount=v),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:s[5]||(s[5]=v=>e.maxBtnSelect("toCoin")),onOnHalf:s[6]||(s[6]=v=>e.halfBtnSelect("toCoin")),onOnInput:s[7]||(s[7]=v=>{e.toCoinAmount=v,e.fixedFromCoin=!1,e.isInputTotalAmount=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.positionError?(q(),We(x,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])):Y("",!0)]),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme=="default"?(q(),G("img",{key:1,class:"add",src:Si,alt:"",onClick:s[8]||(s[8]=(...v)=>e.toggle&&e.toggle(...v))})):Y("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme!=="default"?(q(),G("img",{key:2,class:"add",src:Ti,alt:"",onClick:s[9]||(s[9]=(...v)=>e.toggle&&e.toggle(...v))})):Y("",!0)]),e.isShowtotalAmount?(q(),G("div",an,[nn,r("span",null,J(e.liquidityTotalAmount)+" ",1)])):Y("",!0),Fe(a,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"fixed-from-coin":e.fixedFromCoin,"is-input-total-amount":e.isInputTotalAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price-tab":e.currentPriceTab,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","fixed-from-coin","is-input-total-amount","min-price","max-price","current-price-tab","current-price","current-price-reverse"]),Fe(f,{class:"add-liquidity-btn",disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,onClick:s[10]||(s[10]=v=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:lt(()=>[tt(J(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),e.showCoinSelect?(q(),We(R,{key:1,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:s[11]||(s[11]=v=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):Y("",!0),e.isViewDetail?(q(),We(ye,{key:2,"pool-info":e.poolInfo,"farm-pool-info":e.farmPoolInfo,"position-info":e.positionInfoDetail,"is-auto-stake-farming":e.isAutoStakeFarming,onOnClose:s[12]||(s[12]=v=>e.isViewDetail=!1)},null,8,["pool-info","farm-pool-info","position-info","is-auto-stake-farming"])):Y("",!0),e.isShowLiquidityModal?(q(),We(_e,{key:3,"pool-info":e.poolInfo,title:e.$t("button.addLiquidity"),"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"current-price-tab":e.currentPriceTab,"min-price":e.minPrice,"max-price":e.maxPrice,"show-from-coin-lock":e.showFromCoinLock,"show-to-coin-lock":e.showToCoinLock,"current-direct":e.direction,"is-increase":!1,onToAdd:e.getAddLiquidityType,onOnClose:s[13]||(s[13]=v=>e.isShowLiquidityModal=!1)},null,8,["pool-info","title","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","current-price","current-price-reverse","current-price-tab","min-price","max-price","show-from-coin-lock","show-to-coin-lock","current-direct","onToAdd"])):Y("",!0),e.chainName=="Sui"?(q(),We(V,{key:4,"pool-info":e.poolInfo,"is-active":!e.showFromCoinLock&&!e.showToCoinLock,"is-auto-stake-farming":e.isAutoStakeFarming,onSendFarmsPoolInfo:e.getFarmsPoolInfo},null,8,["pool-info","is-active","is-auto-stake-farming","onSendFarmsPoolInfo"])):Y("",!0)])}const Yt=at(Ja,[["render",on]]),rn=it({components:{NewLiquidityLeft:Qt,NewLiquidityRight:Yt},setup(){zt(()=>{ki()});const e=Pt(),s=ut();return I(()=>s),{tickList:Ve,route:e}}});const sn={key:0,class:"loading-spin-liquidity loading-global"},ln={class:"privide-liquidity"};function un(e,s,fe,ne,$,se){var x,a;const X=Ut,z=Qt,N=Yt;return q(),G(yt,null,[!e.tickList&&((a=(x=e.route)==null?void 0:x.query)!=null&&a.poolAddress)?(q(),G("div",sn,[Fe(X)])):Y("",!0),r("div",ln,[Fe(z),Fe(N)])],64)}const Xn=at(rn,[["render",un],["__scopeId","data-v-1b76f12f"]]);export{Xn as default};
