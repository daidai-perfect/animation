import{a as io,b as $o,r as wo,c as yo,s as X,h as T,v as Mo,u as fo,j as ao,w as Ao,d as Z,m as Oo}from"./pool.c122be75.js";import{a as x,m as i,r as z,e as oo,o as t,f as e,h as s,i as P,v as h,u as $,c as N,w as M,S as Vo,B as ko,j as D,p as lo,k as ro,q as Io,t as eo,x as q,b as So,z as po,F as H,s as to,V as cs,D as bo,O as vo,U as Wo,N as Ro,y as qo,T as us}from"./entry.d5e2da81.js";/* empty css              */import{u as co}from"./farms.4f1bf2ec.js";import{_ as ms,a as Ho}from"./farms-valid-range.a160f2dd.js";import{_ as zo}from"./apr-tips.8691dc5e.js";import{i as Lo}from"./import-icon.de3e6c66.js";/* empty css              */import{N as Go}from"./no-data.72d0de95.js";import"./index.a2906dfe.js";import{_ as Jo}from"./img-connect-wallet_2x.8fbce00c.js";import{_ as Ko}from"./img-no-Positions_2x.f287a9d9.js";import{_ as _s}from"./upgrade-loading.84b20234.js";import{p as ps}from"./precision.a7a6c57b.js";import"./decimal.0bdeb344.js";import"./icon_rewards_2x.31565dd3.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const fs=x({setup(){const o=io(),d=i(()=>o),p=co(),u=i(()=>p),f=i(()=>Object.values(u.value.farmsRewardObj)),a=i(()=>f.value.reduce(function(K,R){const j=R&&R.amountUsd?R.amountUsd:0;return Number(j)>.01?Mo(Number(K)).plus(X(Number(j),2)).toString():Mo(Number(K)).plus(Number(j)).toString()},0)),l=i(()=>u.value.farmsPositionList),c=i(()=>u.value.farmsAllPositionLoading),v=i(()=>u.value.farmsPoolListLoading),y=$o(),m=wo("Sui"),_=yo("Sui"),{setIsShowSuccess:k,setIsShowRejected:C,setIsShowWaiting:n,setTransactionDesc:B,setTransactionTxid:S}=y,L=z(!1);return{farmsPoolListLoading:v,wallet:d,farms:u,totalRwadrdUsd:a,sFixD:X,claimAllPoolReward:async Y=>{L.value=!0;const K=[];l.value.forEach(R=>{R.positionSource=="farming"&&K.push({pool_id:R.pool_id,position_nft_id:R.id})}),S(""),B("Claim Rewards"),n(!0);try{const R=await m.batchHarvest(K),j={txbParams:R.payloadParams.txbParams,action:"FarmingBatchHarvest"},F=await _.signAndExecuteTransactionBlock(d.value.currentWallet,R.txb,j);console.log("0221###sui swap res###",F);let O=_.handleTx(F);if(O&&O.hash){S(O.hash),n(!1),k(!0);let g={res:O.res,title:"Claim",hash:O.hash};_.showTransitionPending(g),await _.watchTransaction(g)&&setTimeout(()=>{p.getFarmsPoolList()},4e3)}else n(!1),C(!0);L.value=!1}catch(R){console.log("Claim all error",R),n(!1),C(!0),L.value=!1}},loading:L,addCommom:T,farmsAllPositionLoading:c}}});const Qo=o=>(lo("data-v-3b594b69"),o=o(),ro(),o),hs={class:"farms-banner-bg"},vs={class:"farms-banner"},gs={class:"farms-banner-center"},bs=Qo(()=>s("div",{class:"title"},"Farms",-1)),$s=Qo(()=>s("div",{class:"desc"},"Stake your positions to earn higher yield.",-1)),ws={class:"claim-rewards"},ys={class:"claim-title"},ks={key:0,class:"loading-spin"},Is={key:1},Ps={key:2},Ss={class:"claim-content"};function Ls(o,d,p,u,f,a){const l=Vo,c=ko;return t(),e("div",hs,[s("div",vs,[s("div",gs,[bs,$s,s("div",ws,[s("div",ys,[o.farmsAllPositionLoading||o.farmsPoolListLoading?(t(),e("span",ks,[P(l)])):o.wallet.address?(t(),e("span",Is,h(Number(o.totalRwadrdUsd)>0&&Number(o.totalRwadrdUsd)<.01?"<$0.01":`$${("addCommom"in o?o.addCommom:$(T))(("sFixD"in o?o.sFixD:$(X))(o.totalRwadrdUsd||0,2))}`),1)):(t(),e("span",Ps,"--"))]),s("div",Ss,[o.wallet.address?(t(),N(c,{key:0,class:"claim-btn",loading:o.loading,disabled:Number(o.totalRwadrdUsd)==0||o.farmsAllPositionLoading,onClick:o.claimAllPoolReward},{default:M(()=>[D(" Claim All Rewards ")]),_:1},8,["loading","disabled","onClick"])):(t(),N(c,{key:1,class:"claim-btn",onClick:d[0]||(d[0]=v=>o.wallet.setIsShowWalletModal(!0))},{default:M(()=>[D("Connect")]),_:1}))])])])])])}const Xo=oo(fs,[["render",Ls],["__scopeId","data-v-3b594b69"]]),Cs=x({props:{poolInfo:{type:Object,default:()=>({})}},setup(){return{}}});const Ts={class:"pool"},Us={class:"pool-info"},js={class:"token-logo"},Os={alt:""},As={alt:""},Rs={class:"token-symbol"},Fs={class:"symbol"},Ds={class:"fee-rate"};function Ns(o,d,p,u,f,a){var v,y,m,_;const l=ms,c=Io("image");return t(),e("div",Ts,[s("div",Us,[s("div",js,[eo(s("img",Os,null,512),[[c,(v=o.poolInfo.coinA)==null?void 0:v.logo_url]]),eo(s("img",As,null,512),[[c,(y=o.poolInfo.coinB)==null?void 0:y.logo_url]])]),s("div",Rs,[s("div",Fs,h((m=o.poolInfo.coinA)==null?void 0:m.symbol)+" - "+h((_=o.poolInfo.coinB)==null?void 0:_.symbol),1),s("div",Ds,h(o.poolInfo.fee),1)])]),P(l,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const Yo=oo(Cs,[["render",Ns],["__scopeId","data-v-c027f63c"]]),Bs=x({props:{currentTab:{type:String,default:""},rewardInfo:{type:Object,default:()=>({})}},setup(){const o=fo(),d=i(()=>o);return{sFixD:X,addCommom:T,getCoinIcon:u=>{var f;return((f=d.value.tokensObj[u])==null?void 0:f.logo_url)||Lo("/image/coins/sui-unknown.png")}}}});const Es={key:0,class:"rewards-day"},Ms={class:"rewards-day-box"},Vs={alt:""};function Ws(o,d,p,u,f,a){const l=Io("image");return o.rewardInfo.allocate_point>0||o.currentTab!=="Live"?(t(),e("div",Es,[s("div",null,[s("div",Ms,[eo(s("img",Vs,null,512),[[l,o.getCoinIcon(o.rewardInfo.reward_coin)]]),s("span",null,h(("addCommom"in o?o.addCommom:$(T))(("sFixD"in o?o.sFixD:$(X))(o.rewardInfo.emission_per_day,4)))+" "+h(o.rewardInfo.symbol),1)])])])):q("",!0)}const Zo=oo(Bs,[["render",Ws],["__scopeId","data-v-48e4e83a"]]),qs=x({props:{positionInfo:{type:Object,default:()=>({})}},setup(o){const d=fo(),p=i(()=>d);return{addCommom:T,decimalUi:ao,fixD:Ao,getCoinIcon:f=>{var a;return((a=p.value.tokensObj[f])==null?void 0:a.logo_url)||Lo("/image/coins/sui-unknown.png")}}}});const Hs={class:"hover-rewarder"},zs={class:"rewarder-info"},Gs={class:"left-rewarder"},Js={alt:""},Ks={class:"right-rewarder"},Qs={class:"amount"},Xs={key:0,class:"amount-usd"},Ys={key:1,class:"amount-usd"},Zs={class:"rewarder-info"},xs={class:"left-rewarder"},on={alt:""},sn={class:"right-rewarder"},nn={class:"amount"},tn={key:0,class:"amount-usd"},en={key:1,class:"amount-usd"};function an(o,d,p,u,f,a){const l=Io("image");return t(),e("div",Hs,[s("div",zs,[s("div",Gs,[eo(s("img",Js,null,512),[[l,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinB.address:o.positionInfo.coinA.address)]]),s("span",null,h(o.positionInfo.needReverse?o.positionInfo.coinB.symbol:o.positionInfo.coinA.symbol),1)]),s("div",Ks,[s("div",Qs,h(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:$(T))(("decimalUi"in o?o.decimalUi:$(ao))(o.positionInfo.amountB,o.positionInfo.coinB.decimals)):("addCommom"in o?o.addCommom:$(T))(("decimalUi"in o?o.decimalUi:$(ao))(o.positionInfo.amountA,o.positionInfo.coinA.decimals))),1),o.positionInfo.needReverse?(t(),e("div",Ys,h(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("fixD"in o?o.fixD:$(Ao))(o.positionInfo.amountBUsd,2):"<$0.01"),1)):(t(),e("div",Xs,h(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("fixD"in o?o.fixD:$(Ao))(o.positionInfo.amountAUsd,2):"<$0.01"),1))])]),s("div",Zs,[s("div",xs,[eo(s("img",on,null,512),[[l,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinA.address:o.positionInfo.coinB.address)]]),s("span",null,h(o.positionInfo.needReverse?o.positionInfo.coinA.symbol:o.positionInfo.coinB.symbol),1)]),s("div",sn,[s("div",nn,h(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:$(T))(("decimalUi"in o?o.decimalUi:$(ao))(o.positionInfo.amountA,o.positionInfo.coinA.decimals)):("addCommom"in o?o.addCommom:$(T))(("decimalUi"in o?o.decimalUi:$(ao))(o.positionInfo.amountB,o.positionInfo.coinB.decimals))),1),o.positionInfo.needReverse?(t(),e("div",en,h(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("addCommom"in o?o.addCommom:$(T))(("decimalUi"in o?o.decimalUi:$(ao))(o.positionInfo.amountAUsd,2)):"<$0.01"),1)):(t(),e("div",tn,h(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("addCommom"in o?o.addCommom:$(T))(("decimalUi"in o?o.decimalUi:$(ao))(o.positionInfo.amountBUsd,2)):"<$0.01"),1))])])])}const xo=oo(qs,[["render",an],["__scopeId","data-v-9f1dd3a2"]]),ln=x({components:{FarmsPositionAmountTips:xo},props:{positionInfo:{type:Object,default:()=>({})},currentTab:{type:String,default:""}},setup(o){const d=io(),p=i(()=>d),u=co(),f=i(()=>u),a=yo("Sui"),l=wo("Sui"),c=z(!1),v=$o();i(()=>v);const y=So(),{setIsShowSuccess:m,setIsShowRejected:_,setIsShowWaiting:k,setTransactionDesc:C,setTransactionTxid:n}=v,B=async()=>{c.value=!0,n(""),C(`Stake ${o.positionInfo.name}`),k(!0);const g={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},w=j.value[o.positionInfo.clmmPool||o.positionInfo.poolAddress].id;try{const U=await l.farmsDeposit(g,w),V=await a.signAndExecuteTransactionBlock(p.value.currentWallet,U.txb,U.payloadParams);console.log("0221###sui swap res###",V),u.setFarmsLoadingObj(o.positionInfo.clmm_pool_id);let E=a.handleTx(V);if(E&&E.hash){n(E.hash),k(!1),m(!0);let no={res:E.res,title:"Staked",hash:E.hash};a.showTransitionPending(no),await a.watchTransaction(no)&&setTimeout(()=>{u.getPositionByPool(p.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),c.value=!1},2e3)}else k(!1),_(!0)}catch(U){console.log("farmsDeposit error",U),k(!1),_(!0),c.value=!1}},S=async()=>{c.value=!0,n(""),C(`Unstake ${o.positionInfo.name}`),k(!0);const g=j.value[o.positionInfo.clmmPool].id,w=o.positionInfo.id;try{const U=await l.farmsWithdraw(g,w),V=await a.signAndExecuteTransactionBlock(p.value.currentWallet,U.txb,U.payloadParams);console.log("0221###sui swap res###",V),u.setFarmsLoadingObj(o.positionInfo.clmm_pool_id);let E=a.handleTx(V);if(console.log(E,"unStaketx##"),E&&E.hash){n(E.hash),k(!1),m(!0);let no={res:E.res,title:"Unstaked",hash:E.hash};a.showTransitionPending(no),await a.watchTransaction(no)&&setTimeout(()=>{u.getPositionByPool(p.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),c.value=!1},2e3)}else k(!1),_(!0)}catch(U){console.log("farmsDeposit error",U),k(!1),_(!0),c.value=!1}},L=async()=>{c.value=!0,n(""),C("Claim rewards"),k(!0);const g={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const w=await l.harvestFarms(g),U=await a.signAndExecuteTransactionBlock(p.value.currentWallet,w.txb,w.payloadParams);u.setFarmsLoadingObj(o.positionInfo.clmm_pool_id),console.log("0221###sui swap res###",U);let V=a.handleTx(U);if(V&&V.hash){n(V.hash),k(!1),m(!0);let E={title:"Claim",res:V.res,hash:V.hash};a.showTransitionPending(E),await a.watchTransaction(E)&&setTimeout(()=>{u.getPositionByPool(p.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else k(!1),_(!0);c.value=!1}catch(w){console.log("farmsDeposit error",w),k(!1),_(!0),c.value=!1}},W=i(()=>f.value.farmsRewardObj),Y=fo(),K=i(()=>Y),R=i(()=>f.value.farmsLoadingObj),j=i(()=>f.value.farmsPoolObj);return{sFixD:X,stake:B,loading:c,unStake:S,router:y,claim:L,farmsRewardObj:W,getCoinIcon:g=>{var w;return((w=K.value.tokensObj[g])==null?void 0:w.logo_url)||Lo("/image/coins/sui-unknown.png")},toPositionDetails:g=>{g.positionSource=="clmm"?y.push(`/new-position-detail?collect=${g.collectionName}&token=${g.name}&address=${g.pool}&pos=${g.pos_object_id}`):y.push(`/new-position-detail?position_nft_id=${g.id}&positionSource=farming`)},farmsLoadingObj:R,addCommom:T}}}),os=""+globalThis.__publicAssetsURL("sui-image/position-active.png");const Co=o=>(lo("data-v-13189896"),o=o(),ro(),o),rn={class:"farms-position-item"},dn=Co(()=>s("thead",null,[s("tr",null,[s("th",null,"Position"),s("th",null,"Liquidity"),s("th",null,"Earnings"),s("th")])],-1)),cn={class:"position-info"},un={key:0,class:"status-bg"},mn=Co(()=>s("img",{src:os,alt:""},null,-1)),_n=[mn],pn={class:"status-text"},fn={class:"name-range"},hn=Co(()=>s("span",null,"Details",-1)),vn=Co(()=>s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})],-1)),gn=[hn,vn],bn={class:"liquidity"},$n={class:"rewards-day-box"},wn={alt:""},yn={key:1,class:"rewards-day"},kn={class:"action-btn"};function In(o,d,p,u,f,a){const l=Ho,c=xo,v=ko,y=cs,m=Io("image");return t(),e("div",rn,[s("table",null,[dn,s("tbody",null,[s("tr",null,[s("td",null,[s("div",cn,[s("div",{class:po(["position-status",o.positionInfo.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionInfo.positionStatus=="Active"?(t(),e("div",un,_n)):q("",!0),s("div",pn,h(o.positionInfo.positionStatus),1)],2),s("div",fn,[s("span",null,h(o.positionInfo.name),1),P(l,{"pool-info":o.positionInfo},null,8,["pool-info"])]),s("div",{class:"details",onClick:d[0]||(d[0]=_=>o.toPositionDetails(o.positionInfo))},gn)])]),s("td",null,[s("div",bn,[s("span",null,[D(h(o.positionInfo.positionUSD>0&&o.positionInfo.positionUSD<.01?"<$0.01":`~$${("addCommom"in o?o.addCommom:$(T))(("sFixD"in o?o.sFixD:$(X))(o.positionInfo.positionUSD,2))}`)+" ",1),P(c,{"position-info":o.positionInfo},null,8,["position-info"])])])]),s("td",null,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(t(!0),e(H,{key:0},to(o.positionInfo.rewards,_=>(t(),e("div",{key:_.rewarder_type,class:"rewards-day"},[s("div",null,[s("div",$n,[eo(s("img",wn,null,512),[[m,o.getCoinIcon(_.rewarder_type)]]),s("span",null,h(_.rewarderAmount),1)])])]))),128)):(t(),e("div",yn,"0"))]),s("td",null,[s("div",kn,[o.positionInfo.positionSource=="clmm"?(t(),e(H,{key:0},[o.positionInfo&&o.positionInfo.positionStatus!=="Active"?(t(),N(y,{key:0},{title:M(()=>[D("Farming rewards are only available for active positions.")]),default:M(()=>[P(v,{class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:M(()=>[D("Stake")]),_:1},8,["loading","disabled","onClick"])]),_:1})):(t(),N(v,{key:1,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:M(()=>[D("Stake")]),_:1},8,["loading","disabled","onClick"]))],64)):(t(),N(v,{key:1,class:"unstake-btn",onClick:o.unStake},{default:M(()=>[D("Unstake")]),_:1},8,["onClick"])),o.positionInfo.positionSource=="clmm"?(t(),N(v,{key:2,class:"claim-btn",disabled:!0},{default:M(()=>[D("↑ Claim")]),_:1})):(t(),N(v,{key:3,class:"claim-btn",disabled:o.positionInfo.positionRewardAmount==0,onClick:o.claim},{default:M(()=>[D("↑ Claim")]),_:1},8,["disabled","onClick"]))])])])])])])}const ss=oo(ln,[["render",In],["__scopeId","data-v-13189896"]]),Pn=x({components:{FarmsPositionItem:ss},props:{currentTab:{type:String,default:""},sortValue:{type:String,default:"APR"}},setup(o){const d=z({}),p=io(),u=i(()=>p),f=co(),a=i(()=>f),l=i(()=>a.value.farmsPoolList),c=i(()=>a.value.farmsPoolList),v=$o(),y=i(()=>v),m=i(()=>y.value.addressLpTokens),_=z([]),k=i(()=>a.value.myFarmsPoolList),C=G=>{let Q,J;o.currentTab=="My Farms"&&(Q=u.value.address?k.value:[]),o.currentTab=="Ended"&&(Q=a.value.farmsPoolList.filter(r=>r.status=="Ended")),o.currentTab=="Live"&&(Q=a.value.farmsPoolList.filter(r=>r.status=="Live")),G=="APR"?J=Q.sort((r,b)=>b.stable_farming.apr-r.stable_farming.apr):J=Q.sort((r,b)=>b.stable_farming.tvl-r.stable_farming.tvl),_.value=J.map(r=>{var b,I,A;return{...r,needReverse:r.is_forward===!1,liquidity:r.tvl_in_usd,vol:r.vol_in_usd_24h,stableFarmingApr:(r==null?void 0:r.stable_farming)&&((b=r==null?void 0:r.stable_farming)==null?void 0:b.apr)*100,apr:((I=r==null?void 0:r.apr_24h)==null?void 0:I.replace("%",""))||"--",is_display_rewarder:(A=r==null?void 0:r.rewarder)==null?void 0:A.is_display_rewarder}})};bo(()=>[c.value,o.sortValue,o.currentTab,k.value],([G,Q])=>{G&&G.length>0&&Q&&C(Q)},{immediate:!0});const n=G=>{if(d.value[G.clmm_pool_id])d.value[G.clmm_pool_id]=!1;else{if(d.value[G.clmm_pool_id]=!0,!u.value.address)return!1;f.getPositionByPool(u.value.address,G.clmm_pool_id,G.id)}},B=i(()=>a.value.farmsPositionObj),S=i(()=>a.value.farmsLoadingObj),L=i(()=>a.value.farmsUserUsd),W=i(()=>a.value.farmsRewardObj),Y=i(()=>a.value.farmsPositionList),K=i(()=>a.value.farmsAllPositionLoading),R=So(),j=wo("Sui"),F=yo("Sui"),{setIsShowSuccess:O,setIsShowRejected:g,setIsShowWaiting:w,setTransactionDesc:U,setTransactionTxid:V}=v,E=async G=>{const Q=[];Y.value.forEach(J=>{G==J.clmm_pool_id&&Q.push({pool_id:J.pool_id,position_nft_id:J.id})}),V(""),U("Claim rewards"),w(!0);try{const J=await j.batchHarvest(Q),r=await F.signAndExecuteTransactionBlock(u.value.currentWallet,J.txb,J.payloadParams);console.log("0221###sui swap res###",r);let b=F.handleTx(r);if(b&&b.hash){V(b.hash),w(!1),O(!0);let I={res:b.res,title:"Claim",hash:b.hash};F.showTransitionPending(I),await F.watchTransaction(I)&&setTimeout(()=>{f.getFarmsPoolList()},4e3)}else w(!1),g(!0)}catch(J){console.log("Claim all error",J),w(!1),g(!0)}},no=fo(),mo=i(()=>no),To=i(()=>mo.value.poolsObj);i(()=>mo.value.tokensObj);const Uo=z({}),ho=i(()=>a.value.farmsPoolObj);return{wallet:u,walletStore:p,farmsPoolList:l,openMore:n,openMoreObj:d,checkNullObj:Z,router:R,farmsPositionObj:B,farmsLoadingObj:S,farmsUserUsd:L,sFixD:X,farmsRewardObj:W,claimPoolReward:E,farmsAllPositionLoading:K,addCommom:T,addressLpTokens:m,poolsObj:To,rewardInfoObj:Uo,pageList:_,farmsPoolObj:ho}}});const uo=o=>(lo("data-v-36a27756"),o=o(),ro(),o),Sn={class:"farms-table"},Ln=uo(()=>s("thead",null,[s("tr",null,[s("th",null,"Pools"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")]),s("tr",{style:{height:"4px"}})],-1)),Cn={key:0},Tn=["onClick"],Un={class:"staked-tvl"},jn={class:"apr"},On={key:0,class:"apr-hover-box"},An={class:"farms-reward-box"},Rn={key:0,class:"my-staked"},Fn={key:0,class:"my-staked-loading"},Dn={key:0,class:"position-usd"},Nn={key:1,class:"position-usd"},Bn={key:2,class:"position-usd"},En={key:3,class:"position-num"},Mn={key:1,class:"my-staked"},Vn=uo(()=>s("div",{class:"position-usd"},"--",-1)),Wn=[Vn],qn={class:"earned"},Hn={key:0,class:"my-staked-loading"},zn={key:0,class:"ratio-bg"},Gn=uo(()=>s("div",{class:"ratio"},null,-1)),Jn=[Gn],Kn={key:1},Qn={key:2},Xn={key:3},Yn={key:2},Zn={class:"actions"},xn={class:"actions-btn"},ot=["onClick"],st=uo(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),nt=[st],tt={colspan:"7",style:{padding:"0 16px 16px"}},et={key:0,class:"farm-position-list"},at={key:0,class:"farm-position-loading"},it={key:1,class:"farm-position-list"},lt=uo(()=>s("tr",{style:{height:"8px"}},null,-1)),rt={key:1},dt={colspan:"7"},ct={key:0,class:"no-data"},ut=uo(()=>s("img",{src:Jo,alt:""},null,-1)),mt={key:1,class:"no-data"},_t=uo(()=>s("img",{src:Ko,alt:""},null,-1)),pt=uo(()=>s("span",null,"No farms found",-1)),ft=[_t,pt];function ht(o,d,p,u,f,a){const l=Yo,c=zo,v=Zo,y=Ro,m=ko,_=Vo,k=ss,C=Go;return t(),e("div",Sn,[s("table",null,[Ln,o.pageList&&o.pageList.length>0?(t(),e("tbody",Cn,[(t(!0),e(H,null,to(o.pageList,n=>{var B;return t(),e(H,{key:n.id},[s("tr",{onClick:S=>o.openMore(n)},[s("td",null,[P(l,{"pool-info":n},null,8,["pool-info"])]),s("td",null,[s("div",Un," $"+h(("addCommom"in o?o.addCommom:$(T))(n.stable_farming.tvl,2)),1)]),s("td",null,[s("div",jn,[n.isStableFarming||n.rewarderInfo&&n.rewarderInfo.length>0||(B=n==null?void 0:n.stable_farming)!=null&&B.stable_farming_pool?(t(),e("div",On,[P(c,{"l-item":n,"rewarder-info":n.rewarder.rewardList,class:"noHover apr-hover-con"},null,8,["l-item","rewarder-info"])])):q("",!0),s("span",null,h((n==null?void 0:n.total_apr)>0&&n.total_apr<1e-4?"<0.01%":`${("addCommom"in o?o.addCommom:$(T))(n.total_apr*100,2)}%`),1)])]),s("td",null,[s("div",An,[(t(!0),e(H,null,to(n.rewarders,S=>(t(),N(v,{key:S.reward_coin,"reward-info":S,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))])]),s("td",null,[o.wallet.address?(t(),e("div",Rn,[o.farmsLoadingObj[n.clmm_pool_id]||o.farmsAllPositionLoading?(t(),e("div",Fn,[P(y,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),e(H,{key:1},[o.farmsUserUsd&&o.farmsUserUsd[n.clmm_pool_id]&&o.farmsUserUsd[n.clmm_pool_id].amount>0&&o.farmsUserUsd[n.clmm_pool_id].amount>.01?(t(),e("div",Dn,h(Number(o.farmsUserUsd[n.clmm_pool_id].amount)>0&&Number(o.farmsUserUsd[n.clmm_pool_id].amount)<.01?"<$0.01":"$"+("addCommom"in o?o.addCommom:$(T))(o.farmsUserUsd[n.clmm_pool_id].amount,2)),1)):o.farmsUserUsd&&o.farmsUserUsd[n.clmm_pool_id]&&o.farmsUserUsd[n.clmm_pool_id].amount>0&&o.farmsUserUsd[n.clmm_pool_id].amount<.01?(t(),e("div",Nn," <$0.01 ")):(t(),e("div",Bn,"0")),o.farmsUserUsd&&o.farmsUserUsd[n.clmm_pool_id]&&o.farmsUserUsd[n.clmm_pool_id].positionNum?(t(),e("div",En,h(o.farmsUserUsd[n.clmm_pool_id].positionNum)+" "+h(o.farmsUserUsd[n.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):q("",!0)],64))])):(t(),e("div",Mn,Wn))]),s("td",null,[s("div",qn,[o.farmsLoadingObj[n.clmm_pool_id]||o.farmsAllPositionLoading?(t(),e("div",Hn,[P(y,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[n.clmm_pool_id]&&o.farmsRewardObj[n.clmm_pool_id].amountUsd?(t(),e(H,{key:1},[o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[n.clmm_pool_id]&&o.farmsRewardObj[n.clmm_pool_id].amountUsd>0?(t(),e("div",zn,Jn)):q("",!0),Number(o.farmsRewardObj[n.clmm_pool_id].amountUsd)>.01?(t(),e("span",Kn,"$"+h(("addCommom"in o?o.addCommom:$(T))(("sFixD"in o?o.sFixD:$(X))(o.farmsRewardObj[n.clmm_pool_id].amountUsd||0,2))),1)):Number(o.farmsRewardObj[n.clmm_pool_id].amountUsd)>0&&Number(o.farmsRewardObj[n.clmm_pool_id].amountUsd)<.01?(t(),e("span",Qn,"<$0.01")):(t(),e("span",Xn,"0"))],64)):(t(),e("span",Yn,"0"))])]),s("td",null,[s("div",Zn,[s("div",xn,[P(m,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsRewardObj[n.clmm_pool_id]||!o.farmsRewardObj[n.clmm_pool_id].amountUsd||o.farmsRewardObj[n.clmm_pool_id].amountUsd<=0||o.farmsLoadingObj[n.clmm_pool_id],onClick:vo(S=>o.claimPoolReward(n.clmm_pool_id),["stop"])},{default:M(()=>[D("Claim")]),_:2},1032,["disabled","onClick"]),P(m,{class:"add-liquidity-btn",onClick:vo(S=>o.router.push(`/liquidity/deposit?poolAddress=${n.clmm_pool_id}`),["stop"])},{default:M(()=>[D("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more",onClick:vo(S=>o.openMore(n),["stop"])},[(t(),e("svg",{class:po(["arrow-icon",o.openMoreObj[n.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},nt,2))],8,ot)])])],8,Tn),eo(s("tr",null,[s("td",tt,[o.wallet.address?(t(),e("div",et,[!("checkNullObj"in o?o.checkNullObj:$(Z))(o.farmsLoadingObj)&&o.farmsLoadingObj[n.clmm_pool_id]||o.farmsAllPositionLoading?(t(),e("div",at,[P(_)])):o.farmsPositionObj[n.clmm_pool_id]&&o.farmsPositionObj[n.clmm_pool_id].length>0?(t(!0),e(H,{key:1},to(o.farmsPositionObj[n.clmm_pool_id],S=>(t(),N(k,{key:S.clmm_position_id,"current-tab":o.currentTab,"position-info":{...S,clmm_pool_id:n.clmm_pool_id}},null,8,["current-tab","position-info"]))),128)):(t(),N(C,{key:2,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${n.clmm_pool_id}`},null,8,["add-liquidity-url"]))])):(t(),e("div",it,[P(C,{"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"})]))])],512),[[Wo,!("checkNullObj"in o?o.checkNullObj:$(Z))(o.openMoreObj)&&o.openMoreObj[n==null?void 0:n.clmm_pool_id]]]),lt],64)}),128))])):(t(),e("tbody",rt,[s("tr",null,[s("td",dt,[!o.wallet.connected&&o.currentTab=="My Farms"?(t(),e("div",ct,[ut,P(m,{class:"connect-wallet",onClick:d[0]||(d[0]=n=>o.wallet.setIsShowWalletModal(!0))},{default:M(()=>[D(h(o.$t("button.connectWallet")),1)]),_:1})])):o.pageList.length==0?(t(),e("div",mt,ft)):q("",!0)])])]))])])}const ns=oo(Pn,[["render",ht],["__scopeId","data-v-36a27756"]]),vt=x({props:{currentTab:{type:String,default:""}},setup(){const o=z(!1),d=io(),p=i(()=>d),u=co(),f=i(()=>u),a=i(()=>f.value.farmsPoolList);return{isShowMore:o,wallet:p,walletStore:d,farmsPoolList:a}}});const ts=o=>(lo("data-v-f521ea67"),o=o(),ro(),o),gt={class:"farms-table"},bt=ts(()=>s("thead",null,[s("tr",null,[s("th",null,"Pools"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")]),s("tr",{style:{height:"4px",background:"unset"}})],-1)),$t={class:"pool"},wt={class:"staked-tvl"},yt={class:"apr"},kt={class:"my-staked"},It={class:"actions"},Pt={class:"actions"},St={class:"actions"},Lt=ts(()=>s("tr",{style:{height:"8px",background:"unset !important"}},null,-1));function Ct(o,d,p,u,f,a){const l=Ro;return t(),e("div",gt,[s("table",null,[bt,s("tbody",null,[(t(),e(H,null,to(4,(c,v)=>(t(),e(H,{key:v},[s("tr",null,[s("td",null,[s("div",$t,[P(l,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1}),P(l,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",wt,[P(l,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",yt,[s("span",null,[P(l,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),s("td",null,[s("div",kt,[P(l,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",It,[P(l,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Pt,[P(l,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",St,[P(l,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),Lt],64))),64))])])])}const Tt=oo(vt,[["render",Ct],["__scopeId","data-v-f521ea67"]]),Ut=x({props:{positionStatus:{type:String,default:"Active"},positionInfo:{type:Object,default:()=>({})}},setup(){return{}}});const jt=o=>(lo("data-v-882c76c0"),o=o(),ro(),o),Ot={class:"position-info"},At={key:0,class:"status-bg"},Rt=jt(()=>s("img",{src:os,alt:""},null,-1)),Ft=[Rt],Dt={class:"status-text"},Nt={class:"name-range"};function Bt(o,d,p,u,f,a){const l=Ho;return t(),e("div",Ot,[s("div",{class:po(["position-status",o.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionStatus=="Active"?(t(),e("div",At,Ft)):q("",!0),s("div",Dt,h(o.positionStatus),1)],2),s("div",Nt,[s("span",null,h(o.positionInfo.name),1),o.positionStatus=="Active"?(t(),N(l,{key:0,"pool-info":o.positionInfo},null,8,["pool-info"])):q("",!0)])])}const Et=oo(Ut,[["render",Bt],["__scopeId","data-v-882c76c0"]]),Mt=x({props:{positionInfo:{type:Object,default:()=>({})},currentTab:{type:String,default:""}},setup(o){const d=fo(),p=i(()=>d),u=So(),f=j=>{var F;return((F=p.value.tokensObj[j])==null?void 0:F.logo_url)||Lo("/image/coins/sui-unknown.png")},a=yo("Sui"),l=wo("Sui"),c=z(!1),v=$o(),y=io(),m=co(),_=i(()=>y),{setIsShowSuccess:k,setIsShowRejected:C,setIsShowWaiting:n,setTransactionDesc:B,setTransactionTxid:S}=v,L=async()=>{c.value=!0,S(""),B("Claim rewards"),n(!0);const j={pool_id:R.value[o.positionInfo.clmmPool].id,position_nft_id:o.positionInfo.id};try{const F=await l.harvestFarms(j),O=await a.signAndExecuteTransactionBlock(_.value.currentWallet,F.txb,F.payloadParams);m.setFarmsLoadingObj(o.positionInfo.clmm_pool_id);let g=a.handleTx(O);if(g&&g.hash){S(g.hash),n(!1),k(!0);let w={title:"Claim",res:g.res,hash:g.hash};a.showTransitionPending(w),await a.watchTransaction(w)&&setTimeout(()=>{m.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else n(!1),C(!0);c.value=!1}catch(F){console.log("farmsDeposit error",F),n(!1),C(!0),c.value=!1}},W=async()=>{c.value=!0,S(""),B(`Unstake ${o.positionInfo.name}`),n(!0);const j=R.value[o.positionInfo.clmmPool].id,F=o.positionInfo.id;try{const O=await l.farmsWithdraw(j,F),g=await a.signAndExecuteTransactionBlock(_.value.currentWallet,O.txb,O.payloadParams);m.setFarmsLoadingObj(o.positionInfo.clmm_pool_id),console.log("0221###sui swap res###",g);let w=a.handleTx(g);if(w&&w.hash){S(w.hash),n(!1),k(!0);let U={res:w.res,title:"Unstaked",hash:w.hash};a.showTransitionPending(U),await a.watchTransaction(U)&&setTimeout(()=>{m.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),c.value=!1},2e3)}else n(!1),C(!0)}catch(O){console.log("farmsDeposit error",O),n(!1),C(!0),c.value=!1}},Y=async()=>{c.value=!0,S(""),B(`Stake ${o.positionInfo.name}`),n(!0);const j={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},F=R.value[o.positionInfo.clmmPool].id;try{const O=await l.farmsDeposit(j,F),g=await a.signAndExecuteTransactionBlock(_.value.currentWallet,O.txb,O.payloadParams);m.setFarmsLoadingObj(o.positionInfo.clmm_pool_id),console.log("0221###sui swap res###",g);let w=a.handleTx(g);if(w&&w.hash){S(w.hash),n(!1),k(!0);let U={res:w.res,title:"Staked",hash:w.hash};a.showTransitionPending(U),await a.watchTransaction(U)&&setTimeout(()=>{m.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),c.value=!1},2e3)}else n(!1),C(!0)}catch(O){console.log("farmsDeposit error",O),n(!1),C(!0),c.value=!1}},K=i(()=>m),R=i(()=>K.value.farmsPoolObj);return{getCoinIcon:f,router:u,claim:L,unStake:W,loading:c,stake:Y,sFixD:X,addCommom:T}}});const es=o=>(lo("data-v-a09e88b2"),o=o(),ro(),o),Vt={class:"farms-position"},Wt={class:"farms-position-box"},qt={class:"position-info-block"},Ht={class:"block-item"},zt=es(()=>s("div",{class:"leabl"},"Liquidity",-1)),Gt={class:"text"},Jt={class:"earnings"},Kt={class:"block-item"},Qt=es(()=>s("div",{class:"leabl"},"Earnings",-1)),Xt={class:"text"},Yt={key:0},Zt={alt:""},xt={key:1,class:"rewards-day"},oe={class:"unstake-btn-box"};function se(o,d,p,u,f,a){const l=Et,c=ko,v=Io("image");return t(),e("div",Vt,[s("div",Wt,[P(l,{"position-info":o.positionInfo},null,8,["position-info"])]),s("div",qt,[s("div",Ht,[zt,s("div",Gt,h(o.positionInfo.positionUSD>0&&o.positionInfo.positionUSD<.01?"<$0.01":`~$${("addCommom"in o?o.addCommom:$(T))(("sFixD"in o?o.sFixD:$(X))(o.positionInfo.positionUSD,2))}`),1)])]),s("div",Jt,[s("div",Kt,[Qt,s("div",Xt,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(t(!0),e(H,{key:0},to(o.positionInfo.rewards,y=>(t(),e("div",{key:y.rewarder_type,class:"rewards-day"},[y.rewarderAmount>0?(t(),e("div",Yt,[eo(s("img",Zt,null,512),[[v,o.getCoinIcon(y.rewarder_type)]]),s("span",null,h(y.rewarderAmount),1)])):q("",!0)]))),128)):(t(),e("div",xt,"--"))])]),o.positionInfo.positionSource=="clmm"?(t(),N(c,{key:0,class:"add-liquidity-btn claim-btn",onClick:d[0]||(d[0]=y=>o.router.push(`/new-position-detail?collect=${o.positionInfo.collectionName}&token=${o.positionInfo.name}&address=${o.positionInfo.pool}&pos=${o.positionInfo.pos_object_id}`))},{default:M(()=>[D("+ Add liquidity")]),_:1})):(t(),N(c,{key:1,class:"claim-btn",disabled:o.positionInfo.positionRewardAmount==0||o.currentTab=="Ended",onClick:o.claim},{default:M(()=>[D("↑ Claim")]),_:1},8,["disabled","onClick"]))]),s("div",oe,[s("div",null,[o.positionInfo.positionSource=="clmm"?(t(),N(c,{key:0,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:M(()=>[D("Stake")]),_:1},8,["loading","disabled","onClick"])):(t(),N(c,{key:1,class:"unstake-btn",onClick:o.unStake},{default:M(()=>[D("Unstake")]),_:1},8,["onClick"]))])])])}const as=oo(Mt,[["render",se],["__scopeId","data-v-a09e88b2"]]),ne=x({components:{FarmsH5Position:as},props:{currentTab:{type:String,default:""},sortValue:{type:String,default:"APR"}},setup(o){const d=z(!1),p=io(),u=i(()=>p),f=co(),a=i(()=>f),l=i(()=>o.currentTab=="My Farms"?u.value.address?a.value.myFarmsPoolList:[]:o.currentTab=="Ended"?a.value.farmsPoolList.filter(r=>r.status=="Ended"):a.value.farmsPoolList.filter(r=>r.status=="Live")),c=z([]),v=$o(),y=i(()=>v),m=i(()=>y.value.addressLpTokens),_=r=>{const b=l.value.map(I=>{const{stable_farming:A}=m.value[I.clmm_pool_id];return{...I,apr:A.apr,tvl:A.tvl}});r=="APR"?c.value=b.sort((I,A)=>A.apr-I.apr):c.value=b.sort((I,A)=>A.tvl-I.tvl)};bo(()=>[l.value,o.sortValue,m.value],([r,b,I])=>{r&&r.length>0&&b&&I&&!Z(I)&&_(b)},{immediate:!0});const k=i(()=>a.value.farmsUserUsd),C=i(()=>a.value.farmsRewardObj),n=i(()=>a.value.farmsPositionObj),B=i(()=>a.value.farmsPoolListLoading),S=i(()=>a.value.farmsPositionList),L=i(()=>a.value.farmsLoadingObj),W=i(()=>a.value.farmsAllPositionLoading),Y=z({}),K=r=>{if(Y.value[r.clmm_pool_id])Y.value[r.clmm_pool_id]=!1;else{if(Y.value[r.clmm_pool_id]=!0,!u.value.address)return!1;f.getPositionByPool(u.value.address,r.clmm_pool_id,r.id)}},R=wo("Sui"),j=yo("Sui"),{setIsShowSuccess:F,setIsShowRejected:O,setIsShowWaiting:g,setTransactionDesc:w,setTransactionTxid:U}=v,V=async r=>{const b=[];S.value.forEach(I=>{r==I.clmm_pool_id&&b.push({pool_id:I.pool_id,position_nft_id:I.id})}),U(""),w("Claim rewards"),g(!0);try{const I=await R.batchHarvest(b),A=await j.signAndExecuteTransactionBlock(u.value.currentWallet,I.txb,I.payloadParams);let _o=j.handleTx(A);if(_o&&_o.hash){U(_o.hash),g(!1),F(!0);let Po={res:_o.res,title:"Claim",hash:_o.hash};j.showTransitionPending(Po),await j.watchTransaction(Po)&&setTimeout(()=>{f.getFarmsPoolList()},4e3)}else g(!1),O(!0)}catch(I){console.log("Claim all error",I),g(!1),O(!0)}},E=So(),no=fo(),mo=i(()=>no),To=i(()=>mo.value.poolsObj),Uo=i(()=>mo.value.tokensObj),ho=z({}),G=(r,b)=>r&&b?ps.plus(Oo(r),Oo(b)):r||0,Q=r=>{let b=0;return r&&r.forEach(I=>{b+=Oo(String(I))}),String(ao(String(b),2))},J=(r,b,I)=>{Object.keys(r).forEach(A=>{var jo,Fo,Do;const _o=(jo=b[A])==null?void 0:jo.apr_7day,Po=G((Fo=b[A])==null?void 0:Fo.apr_7day,Q((Do=b[A])==null?void 0:Do.rewarder_apr));ho.value[A]={...r[A],apr:String(_o).replace("%",""),aprTotal:Po},ho.value[A].rewards=[],r[A].rewarderInfo.forEach((ls,No)=>{var Bo,Eo;const rs=(Bo=I[ls.coinAddress])==null?void 0:Bo.symbol,ds=(Eo=b[A])==null?void 0:Eo.rewarder_apr[No];ho.value[A].rewards.push({symbol:rs,rewarderApr:ds,rewarder_display:r[A][`rewarder_display${No+1}`]})})})};return bo(()=>[To.value,m.value,Uo.value],([r,b,I])=>{r&&!Z(r)&&b&&!Z(b)&&I&&!Z(I)&&J(r,b,I)},{immediate:!0}),{isShowMore:d,wallet:u,farmsPoolList:c,farmsUserUsd:k,sFixD:X,farmsRewardObj:C,farmsPositionObj:n,openMore:K,checkNullObj:Z,openMoreObj:Y,farmsPoolListLoading:B,claimPoolReward:V,router:E,addCommom:T,farmsLoadingObj:L,farmsAllPositionLoading:W,addressLpTokens:m,rewardInfoObj:ho}}});const so=o=>(lo("data-v-2450ccdd"),o=o(),ro(),o),te={key:0,class:"farms-pool-list"},ee={class:"farms-block"},ae={class:"item-block"},ie=so(()=>s("div",{class:"leabl"},"Staked TVL",-1)),le={class:"text"},re={class:"item-block apr"},de=so(()=>s("div",{class:"leabl"},"APR",-1)),ce={class:"text"},ue={class:"apr-hover-box"},me={class:"item-block"},_e=so(()=>s("div",{class:"leabl"},"Rewards / day",-1)),pe={class:"text"},fe={class:"item-block my-staked"},he=so(()=>s("div",{class:"leabl"},"My Staked",-1)),ve={key:0,class:"text"},ge={class:"position-usd"},be={key:0,class:"position-num"},$e={key:1,class:"text"},we=so(()=>s("div",{class:"position-usd"},"--",-1)),ye=[we],ke={class:"item-block"},Ie=so(()=>s("div",{class:"leabl"},"Earned",-1)),Pe={class:"text earned-box"},Se={class:"earned"},Le={key:0,class:"my-staked-loading"},Ce=so(()=>s("div",{class:"ratio-bg"},[s("div",{class:"ratio"})],-1)),Te={key:0},Ue={key:1},je={key:2},Oe={key:2},Ae={class:"add-liquidity-box"},Re=["onClick"],Fe=so(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),De=[Fe],Ne={key:1,class:"upgrade-loading"},Be={key:2,class:"no-data"},Ee=so(()=>s("img",{src:Jo,alt:""},null,-1)),Me={key:3,class:"no-data"},Ve=so(()=>s("img",{src:Ko,alt:""},null,-1)),We=so(()=>s("span",null,"No Data",-1)),qe=[Ve,We];function He(o,d,p,u,f,a){const l=Yo,c=zo,v=Zo,y=Ro,m=ko,_=as,k=Go,C=_s;return t(),e(H,null,[o.farmsPoolListLoading?o.farmsPoolListLoading?(t(),e("div",Ne,[P(C,{type:"poolsCard",loading:!0})])):q("",!0):(t(),e("div",te,[(t(!0),e(H,null,to(o.farmsPoolList,n=>{var B,S,L;return t(),e("div",{key:n.id,class:"farms-item"},[P(l,{"pool-info":n},null,8,["pool-info"]),s("div",ee,[s("div",ae,[ie,s("div",le,"$"+h(("addCommom"in o?o.addCommom:$(T))(n.tvl,2)),1)]),s("div",re,[de,s("div",ce,[D(h(n.total_apr>0&&n.total_apr<1e-4?"<0.01%":("addCommom"in o?o.addCommom:$(T))(n.total_apr*100,2))+"% ",1),s("div",ue,[n.isStableFarming||n.rewarderInfo&&n.rewarderInfo.length>0||(B=n==null?void 0:n.stable_farming)!=null&&B.stable_farming_pool?(t(),N(c,{key:0,"l-item":n,"rewarder-info":n.rewarder.rewardList,class:"noHover apr-hover-con"},null,8,["l-item","rewarder-info"])):q("",!0)])])]),s("div",me,[_e,s("div",pe,[(t(!0),e(H,null,to(n.rewarders,W=>(t(),N(v,{key:W.reward_coin,"reward-info":W,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))])]),s("div",fe,[he,o.wallet.address?(t(),e("div",ve,[s("div",ge,h(Number((S=o.farmsUserUsd[n.clmm_pool_id])==null?void 0:S.amount)>0&&Number((L=o.farmsUserUsd[n.clmm_pool_id])==null?void 0:L.amount)<.01?"<$0.01":"$"+("addCommom"in o?o.addCommom:$(T))(o.farmsUserUsd&&o.farmsUserUsd[n.clmm_pool_id]&&o.farmsUserUsd[n.clmm_pool_id].amount||0,2)),1),o.farmsUserUsd&&o.farmsUserUsd[n.clmm_pool_id]&&o.farmsUserUsd[n.clmm_pool_id].positionNum?(t(),e("div",be,h(o.farmsUserUsd[n.clmm_pool_id].positionNum)+" "+h(o.farmsUserUsd[n.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):q("",!0)])):(t(),e("div",$e,ye))]),s("div",ke,[Ie,s("div",Pe,[s("div",Se,[o.farmsLoadingObj[n.clmm_pool_id]||o.farmsAllPositionLoading?(t(),e("div",Le,[P(y,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[n.clmm_pool_id]&&o.farmsRewardObj[n.clmm_pool_id].amountUsd?(t(),e(H,{key:1},[Ce,o.farmsRewardObj[n.clmm_pool_id].amountUsd>.01?(t(),e("span",Te,"$"+h(("addCommom"in o?o.addCommom:$(T))(("sFixD"in o?o.sFixD:$(X))(o.farmsRewardObj[n.clmm_pool_id].amountUsd||0,2))),1)):o.farmsRewardObj[n.clmm_pool_id].amountUsd>0&&o.farmsRewardObj[n.clmm_pool_id].amountUsd<.01?(t(),e("span",Ue,"<$0.01")):(t(),e("span",je,"0"))],64)):(t(),e("span",Oe,"--"))]),P(m,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsRewardObj[n.clmm_pool_id]||o.farmsRewardObj[n.clmm_pool_id].amountUsd<=0,onClick:vo(W=>o.claimPoolReward(n.clmm_pool_id),["stop"])},{default:M(()=>[D("Claim")]),_:2},1032,["disabled","onClick"])])])]),s("div",Ae,[P(m,{class:"add-liquidity-btn",onClick:vo(W=>o.router.push(`/liquidity/deposit?poolAddress=${n.clmm_pool_id}`),["stop"])},{default:M(()=>[D("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more-btn",onClick:W=>o.openMore(n)},[(t(),e("svg",{class:po(["arrow-icon",!("checkNullObj"in o?o.checkNullObj:$(Z))(o.openMoreObj)&&o.openMoreObj[n==null?void 0:n.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},De,2))],8,Re),(t(!0),e(H,null,to(o.farmsPositionObj[n.clmm_pool_id],W=>eo((t(),N(_,{key:W.clmm_pool_id,"current-tab":o.currentTab,"position-info":{...W,clmm_pool_id:n.clmm_pool_id}},null,8,["current-tab","position-info"])),[[Wo,!("checkNullObj"in o?o.checkNullObj:$(Z))(o.openMoreObj)&&o.openMoreObj[n==null?void 0:n.clmm_pool_id]]])),128)),o.farmsPositionObj&&o.farmsPositionObj[n.clmm_pool_id]&&o.farmsPositionObj[n.clmm_pool_id].length==0?(t(),N(k,{key:0,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${n.clmm_pool_id}`},null,8,["add-liquidity-url"])):q("",!0),o.wallet.address?q("",!0):(t(),N(k,{key:1,"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"},null,8,["no-data-img"]))])}),128))])),!o.wallet.connected&&o.currentTab=="My Farms"?(t(),e("div",Be,[Ee,P(m,{class:"connect-wallet",onClick:d[0]||(d[0]=n=>o.wallet.setIsShowWalletModal(!0))},{default:M(()=>[D(h(o.$t("button.connectWallet")),1)]),_:1})])):o.farmsPoolList.length==0?(t(),e("div",Me,qe)):q("",!0)],64)}const is=oo(ne,[["render",He],["__scopeId","data-v-2450ccdd"]]),ze=x({setup(o,d){const p=z("Live"),u=z("TVL"),f=z(!1),a=z(!1),l=co(),c=i(()=>l),v=io(),y=i(()=>v),m=i(()=>p.value=="My Farms"?y.value.address?c.value.myFarmsPoolList:[]:p.value=="Ended"?c.value.farmsPoolList.filter(L=>L.status=="Ended"):c.value.farmsPoolList.filter(L=>L.status=="Live")),_=i(()=>c.value.farmsPoolList.filter(L=>L.status=="Ended")),k=i(()=>_.value.length>0?["Live","Ended","My Farms"]:["Live","My Farms"]),C=L=>m.value.length,n=()=>{f.value=!0,l.getFarmsPoolList(),setTimeout(()=>{f.value=!1},1e3)},B=L=>{p.value=L,d.emit("changeTab",L)},S=L=>{u.value=L,d.emit("changeSortValue",L)};return qo(()=>{document.addEventListener("click",()=>{a.value=!1})}),{isOpenList:a,tabList:k,currentTab:p,sortValue:u,clickRefresh:n,isRefresh:f,farmsPoolList:m,getListNum:C,changeTab:B,changeSortValue:S}}});const go=o=>(lo("data-v-29027bb0"),o=o(),ro(),o),Ge={class:"farms-tab"},Je={class:"tab-left"},Ke=["onClick"],Qe={key:0},Xe={class:"tab-right"},Ye={class:"sort-select"},Ze=go(()=>s("div",null,"Sort by",-1)),xe={class:"showSort"},oa=go(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),sa=go(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),na=[sa],ta={key:0,class:"sort-list"},ea=go(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),aa=go(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),ia={class:"refresh"},la=go(()=>s("use",{"xlink:href":"#icon-icon-refresh2"},null,-1)),ra=[la];function da(o,d,p,u,f,a){return t(),e("div",Ge,[s("div",Je,[(t(!0),e(H,null,to(o.tabList,l=>(t(),e("div",{key:l,class:po(["tab-item",o.currentTab==l?"tab-item-active":""]),onClick:c=>o.changeTab(l)},[s("span",null,h(l=="Ended"?"Finished":l),1),o.currentTab==l&&o.getListNum(l)?(t(),e("p",Qe,h(o.getListNum(l)),1)):q("",!0)],10,Ke))),128))]),s("div",Xe,[s("div",Ye,[s("div",{class:"sort-select-box",onClick:d[0]||(d[0]=vo(l=>o.isOpenList=!o.isOpenList,["stop"]))},[Ze,s("div",xe,[s("span",null,h(o.sortValue),1),oa,(t(),e("svg",{class:po(["arrow-icon",o.isOpenList?"arrow-icon-active":""]),"aria-hidden":"true"},na,2))])]),o.isOpenList?(t(),e("div",ta,[s("div",{class:"sort-item",onClick:d[1]||(d[1]=l=>o.changeSortValue("APR"))},[D("APR "),ea]),s("div",{class:"sort-item",onClick:d[2]||(d[2]=l=>o.changeSortValue("TVL"))},[D("TVL "),aa])])):q("",!0)]),s("div",ia,[(t(),e("svg",{"aria-hidden":"true",class:po(["refresh-icon",o.isRefresh?"refreshing":""]),onClick:d[3]||(d[3]=(...l)=>o.clickRefresh&&o.clickRefresh(...l))},ra,2))])])])}const ca=oo(ze,[["render",da],["__scopeId","data-v-29027bb0"]]),ua=x({components:{FarmsBanner:Xo,FarmsTabs:ca,FarmsTable:ns,FarmsH5List:is},setup(){const o=co(),d=i(()=>o),p=i(()=>d.value.farmsPoolListLoading),u=z("TVL"),f=i(()=>d.value.farmsPoolList),a=io(),l=i(()=>a),c=fo(),v=i(()=>c);bo(()=>[l.value.address,f.value,v.value.tokensObj,v.value.RATES],([m,_,k,C])=>{m&&_.length>0&&!Z(k)&&!Z(C)&&o.getPositionByAllPool(m)},{immediate:!0}),qo(()=>{o.getFarmsPoolList()}),bo(()=>l.value.address,m=>{m||o.logOut()},{immediate:!0});const y=z("Live");return{farmsPoolListLoading:p,currentTab:y,sortValue:u}}});const ma={class:"farm-container"},_a={class:"farm-container-center"};function pa(o,d,p,u,f,a){const l=Xo,c=us("FarmsTabs"),v=ns,y=Tt,m=is;return t(),e("div",ma,[P(l),s("div",_a,[P(c,{onChangeTab:d[0]||(d[0]=_=>{o.currentTab=_}),onChangeSortValue:d[1]||(d[1]=_=>{o.sortValue=_})}),o.farmsPoolListLoading?(t(),N(y,{key:1,"current-tab":o.currentTab},null,8,["current-tab"])):(t(),N(v,{key:0,"current-tab":o.currentTab,"sort-value":o.sortValue},null,8,["current-tab","sort-value"])),P(m,{"current-tab":o.currentTab,"sort-value":o.sortValue},null,8,["current-tab","sort-value"])])])}const Aa=oo(ua,[["render",pa],["__scopeId","data-v-656fe488"]]);export{Aa as default};
