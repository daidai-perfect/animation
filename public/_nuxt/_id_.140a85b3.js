import{_ as rn}from"./back.343ffe00.js";import{_ as dn}from"./refresh-icon.4e12d6c9.js";import{a as Xe,a1 as Ho,y as Ro,r as h,af as vn,e as Ve,Q as ao,o as a,c as Q,w as se,h as o,i as O,j as Be,v,f as c,F as Ze,E as ho,A as Pe,x as E,ag as mn,I as pn,B as Bo,p as ze,k as Ge,H as go,K as Do,l as f,q as $e,b as Lo,m as no,s as Uo,t as We,u as S,P as Eo,G as Wo,O as To,D as fo,C as cn,L as fn,z as jo,M as Xo,S as yn}from"./entry.ad32dc49.js";/* empty css              */import{a as bn,b as kn,_ as hn}from"./icon-error_2x.c0a55c63.js";import{u as xe,a as zo}from"./autoPool.c968178a.js";import{u as to,g as No,T as je,b as pe,p as Vo,a as Go,c as gn,V as qo,B as _n}from"./pool.f9585ea2.js";import{c as Je,u as _o,a as N,d as Re,s as T,b as $o}from"./sha256.de7acfa8.js";import{_ as wo}from"./token-warning.25c15a3a.js";import{_ as Yo}from"./auto-pool-apy-tips.24b88f64.js";/* empty css              */import{i as mo}from"./import-icon.de3e6c66.js";/* empty css              */import{_ as Ko}from"./assets-card.e525446c.js";import{_ as Qo}from"./coin-lock.bce36a9e.js";import{_ as Zo,a as Jo}from"./auto-pool-remove-modal.79cb7275.js";import"./index.31084607.js";import{D as l}from"./decimal.0bdeb344.js";/* empty css              *//* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.d1f48e3b.js";const $n=Xe({components:{Modal:Ho},setup(e,i){const{t:X,locale:z}=Ro(),L=xe(),q=["0.1","0.5","1"],m=h(L.slippage||.1),{setSlippage:A}=L,C=vn(),u=h(!1);function t(n,r){u.value=!1,m.value=r}function B(){A(m.value),i.emit("onClose",!1)}return{settingArr:q,changeActiveIndex:t,confirm:B,emit:C,slippage:m,t:X,isInput:u,inputChange:n=>{const r=new RegExp(/[^\d^\.]+/g);n.target.value=n.target.value.replace(r,""),m.value=n.target.value}}}});const xo=e=>(ze("data-v-ec8759be"),e=e(),Ge(),e),wn=xo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),In={class:"setting-container"},Sn={class:"title"},An=xo(()=>o("img",{src:hn,alt:""},null,-1)),Cn={class:"tag-list"},Pn={key:0,src:bn,alt:""},Tn={key:1,src:kn,alt:""},Nn={class:"footer"};function qn(e,i,X,z,L,q){const m=mn,A=pn,C=Bo,u=ao("Modal");return a(),Q(u,{title:"Settings",class:"setting",centered:"",visible:!0,width:"400px",onCancel:i[3]||(i[3]=t=>e.$emit("onClose"))},{closeIcon:se(()=>[wn]),footer:se(()=>[o("div",Nn,[O(C,{type:"cancel",class:"cancel-btn cancel-btn-new",onClick:i[2]||(i[2]=t=>e.$emit("onClose"))},{default:se(()=>[Be(v(e.$t("button.cancel")),1)]),_:1}),O(C,{class:"confirmbtn",disabled:Number(e.slippage)==0||Number(e.slippage)>1||Number(e.slippage)<.01,onClick:e.confirm},{default:se(()=>[Be(v(e.$t("button.confirm")),1)]),_:1},8,["disabled","onClick"])])]),default:se(()=>[o("div",In,[o("div",Sn,[An,o("span",null,v(e.$t("modal.slippageTolerance")),1)]),o("div",Cn,[(a(!0),c(Ze,null,ho(e.settingArr,(t,B)=>(a(),Q(m,{key:B,class:Pe(!e.isInput&&t==e.slippage?"tag-active":""),onClick:k=>e.changeActiveIndex(B,t)},{default:se(()=>[Be(v(t)+"% ",1)]),_:2},1032,["class","onClick"]))),128)),O(m,{class:Pe(["input-tag",e.isInput?"tag-active":""]),onClick:i[1]||(i[1]=t=>e.isInput=!0)},{default:se(()=>[O(A,{value:e.slippage,"onUpdate:value":i[0]||(i[0]=t=>e.slippage=t),placeholder:"",suffix:"%",class:Pe(["slippage-input",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-input-waring":Number(e.slippage)>1?"slippage-input-error":""]),onChange:e.inputChange},null,8,["value","class","onChange"])]),_:1},8,["class"])])]),Number(e.slippage)>.5&&Number(e.slippage)<1||Number(e.slippage)>1?(a(),c("div",{key:0,class:Pe(["slippage-hint",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-hint-waring":Number(e.slippage)>1?"slippage-hint-error":""])},[Number(e.slippage)>.5&&1>=Number(e.slippage)?(a(),c("img",Pn)):E("",!0),Number(e.slippage)>1?(a(),c("img",Tn)):E("",!0),o("p",null,v(Number(e.slippage)>.5&&1>=Number(e.slippage)?e.$t("tips.slippageTolerance2"):Number(e.slippage)>1?e.$t("tips.slippageTolerance1"):""),1)],2)):E("",!0)]),_:1})}const Rn=Ve($n,[["render",qn],["__scopeId","data-v-ec8759be"]]),Bn=Xe({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,i){const X=h(!1),z=h(null),L=h(0);let q=h(!1);const m=h(20);to();const A=xe(),C=h(!1);go(()=>{}),Do(()=>{clearInterval(z.value)});const u=()=>{q.value=!1,z.value=setInterval(()=>{var d;C.value||L.value<m.value&&(L.value+=1,L.value===m.value&&((d=e==null?void 0:e.poolInfo)!=null&&d.address&&k(),L.value=0))},1e3)},t=f(()=>A.slippage),B=()=>{i.emit("clearAll")},k=()=>{q.value||(q.value=!0,L.value=0,i.emit("clickRefresh"),setTimeout(()=>{q.value=!1},1e3))};$e(()=>e.poolInfo,d=>{d&&!z.value&&u()},{immediate:!0});const n=Lo(),r=no();return{refresh:q,clickRefresh:k,isShowSwapSetting:X,countdown:L,autoRefreshTime:m,slippage:t,clearAll:B,checkNullObj:Je,router:n,route:r}}});const Dn=e=>(ze("data-v-41ba3d57"),e=e(),Ge(),e),Ln={class:"title"},Un={class:"left"},On=Dn(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Mn={key:0,class:"deposit-progress"};function Fn(e,i,X,z,L,q){const m=rn,A=dn,C=Rn;return a(),c("div",Ln,[o("div",Un,[O(m)]),o("div",{class:Pe(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[o("div",{class:"slippage-icon",onClick:i[0]||(i[0]=u=>e.isShowSwapSetting=!0)},[On,o("span",null,v(e.slippage)+"%",1)]),e.route.name!=="liquidity-create"?(a(),c("div",Mn,[O(A,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])):E("",!0)],2),e.isShowSwapSetting?(a(),Q(C,{key:0,onOnClose:i[1]||(i[1]=u=>e.isShowSwapSetting=!1)})):E("",!0)])}const Vn=Ve(Bn,[["render",Fn],["__scopeId","data-v-41ba3d57"]]),Hn=Xe({components:{AutoPoolApyTips:Yo},setup(){const e=_o(),i=f(()=>e),X=to(),z=f(()=>X),L=xe(),q=f(()=>L),m=f(()=>i.value.theme),A=no(),C=h();$e(()=>[q.value.positionInfoObj,A.params.id],([r,d])=>{r&&!Je(r)&&d&&(C.value=r[d])},{immediate:!0,deep:!0});const u=f(()=>{var r;return(r=C.value)==null?void 0:r.needReverse}),t=r=>{var d;return(r==null?void 0:r.logoURI)||(r==null?void 0:r.logo_url)||((d=z.value.tokensObj[r==null?void 0:r.address])==null?void 0:d.logo_url)||(m.value==="default"?mo("/image/coins/unknown.png"):mo("/image/coins/sui-unknown.png"))},B=f(()=>{var r;return(r=C==null?void 0:C.value)==null?void 0:r.poolUSD}),k=f(()=>{var r,d;return q.value.apyObj&&((d=q.value.apyObj[(r=C.value)==null?void 0:r.id])==null?void 0:d.apr)||"--"}),n=f(()=>i.value.currentExplorer);return{positionInfo:C,needReverse:u,getCoinIcon:t,tvl:B,apy:k,addCommom:N,getExplorerUrl:No,currentExplorer:n}}});const Me=e=>(ze("data-v-3da9d59a"),e=e(),Ge(),e),En={class:"auto-pool-v2-info"},Wn={class:"pool-info"},jn={class:"left"},Xn={class:"coin-a"},zn={alt:""},Gn={class:"coin-b"},Yn={alt:""},Kn={class:"position-name"},Qn={key:0,class:"pool-fee"},Zn=Me(()=>o("span",null,"Fee tier",-1)),Jn={class:"vault-address"},xn=["href"],et=Me(()=>o("span",null,"Vault Address",-1)),ot=Me(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),nt=[et,ot],tt={class:"apy-and-tvl"},it={class:"apy"},st=Me(()=>o("div",{class:"apy-title"},"APY",-1)),at={class:"apy-text"},lt={class:"reward-coin"},ut=Me(()=>o("div",{class:"reward"},"Rewards",-1)),rt={class:"right"},dt={alt:""},vt={class:"tvl"},mt=Me(()=>o("div",{class:"tvl-title"},"TVL",-1)),pt={class:"tvl-text"},ct={class:"pool-info h5-pool-info"},ft={class:"left"},yt={class:"coin-a"},bt={alt:""},kt={class:"coin-b"},ht={alt:""},gt={class:"position-name"},_t={key:0,class:"pool-fee"},$t=Me(()=>o("span",null,"Fee tier",-1)),wt={class:"left"},It={class:"vault-address"},St=["href"],At=Me(()=>o("span",null,"Vault Address",-1)),Ct=Me(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Pt=[At,Ct],Tt={class:"apy-and-tvl"},Nt={class:"apy"},qt=Me(()=>o("div",{class:"apy-title"},"APY",-1)),Rt={class:"apy-text"},Bt={class:"reward-coin"},Dt=Me(()=>o("div",{class:"reward"},"Rewards",-1)),Lt={class:"right"},Ut={alt:""},Ot={class:"tvl"},Mt=Me(()=>o("div",{class:"tvl-title"},"TVL",-1)),Ft={class:"tvl-text"};function Vt(e,i,X,z,L,q){var t,B,k,n,r,d,y,P,p,$,U,M,x,le,ne,w,g,Z,te,ie,ue,W,ee,he,ye,re,I,D,ge,ce,de,b,H,Fe,fe,De,Le,we,Se,Ne,He,po,io,oo,Ae,lo;const m=wo,A=Yo,C=Eo,u=Uo("image");return a(),c("div",En,[o("div",Wn,[o("div",jn,[o("div",Xn,[We(o("img",zn,null,512),[[u,e.needReverse?e.getCoinIcon((B=e.positionInfo)==null?void 0:B.token_b):e.getCoinIcon((t=e.positionInfo)==null?void 0:t.token_a)]]),O(m,{address:e.needReverse?(d=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:d.address:(n=(k=e.positionInfo)==null?void 0:k.token_a)==null?void 0:n.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Gn,[We(o("img",Yn,null,512),[[u,e.needReverse?e.getCoinIcon((P=e.positionInfo)==null?void 0:P.token_a):e.getCoinIcon((y=e.positionInfo)==null?void 0:y.token_b)]]),O(m,{address:e.needReverse?(M=(U=e.positionInfo)==null?void 0:U.token_a)==null?void 0:M.address:($=(p=e.positionInfo)==null?void 0:p.token_b)==null?void 0:$.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Kn,v(e.needReverse?(le=(x=e.positionInfo)==null?void 0:x.token_b)==null?void 0:le.symbol:(w=(ne=e.positionInfo)==null?void 0:ne.token_a)==null?void 0:w.symbol)+" - "+v(e.needReverse?(Z=(g=e.positionInfo)==null?void 0:g.token_a)==null?void 0:Z.symbol:(ie=(te=e.positionInfo)==null?void 0:te.token_b)==null?void 0:ie.symbol),1),(ue=e.positionInfo)!=null&&ue.fee?(a(),c("div",Qn,[Zn,Be(" "+v(((W=e.positionInfo)==null?void 0:W.fee)*100)+"% ",1)])):E("",!0),o("div",Jn,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:S(No))(e.currentExplorer,"poolAddress",(ee=e.positionInfo)==null?void 0:ee.id),target:"_blank"},nt,8,xn)])]),o("div",tt,[o("div",it,[st,o("div",at,[Be(v(e.apy)+" ",1),O(A)])]),o("div",lt,[ut,O(C,{"overlay-class-name":"reward-coin-tips"},{title:se(()=>[Be("Rewards will be auto harvested and compounded to your position.")]),default:se(()=>{var Ye;return[o("div",rt,[(a(!0),c(Ze,null,ho((Ye=e.positionInfo)==null?void 0:Ye.rewardList,Ue=>(a(),c("div",{key:Ue,class:"coin-a"},[We(o("img",dt,null,512),[[u,e.getCoinIcon({address:Ue})]]),O(m,{address:Ue,"style-params":{width:"8px",height:"8px",right:"0px",bottom:"0px"}},null,8,["address"])]))),128))])]}),_:1})]),o("div",vt,[mt,o("div",pt,"$"+v(("addCommom"in e?e.addCommom:S(N))(e.tvl,2)),1)])])]),o("div",ct,[o("div",ft,[o("div",yt,[We(o("img",bt,null,512),[[u,e.needReverse?e.getCoinIcon((ye=e.positionInfo)==null?void 0:ye.token_b):e.getCoinIcon((he=e.positionInfo)==null?void 0:he.token_a)]]),O(m,{address:e.needReverse?(ge=(D=e.positionInfo)==null?void 0:D.token_b)==null?void 0:ge.address:(I=(re=e.positionInfo)==null?void 0:re.token_a)==null?void 0:I.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",kt,[We(o("img",ht,null,512),[[u,e.needReverse?e.getCoinIcon((de=e.positionInfo)==null?void 0:de.token_a):e.getCoinIcon((ce=e.positionInfo)==null?void 0:ce.token_b)]]),O(m,{address:e.needReverse?(fe=(Fe=e.positionInfo)==null?void 0:Fe.token_a)==null?void 0:fe.address:(H=(b=e.positionInfo)==null?void 0:b.token_b)==null?void 0:H.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",gt,v(e.needReverse?(Le=(De=e.positionInfo)==null?void 0:De.token_b)==null?void 0:Le.symbol:(Se=(we=e.positionInfo)==null?void 0:we.token_a)==null?void 0:Se.symbol)+" - "+v(e.needReverse?(He=(Ne=e.positionInfo)==null?void 0:Ne.token_a)==null?void 0:He.symbol:(io=(po=e.positionInfo)==null?void 0:po.token_b)==null?void 0:io.symbol),1),(oo=e.positionInfo)!=null&&oo.fee?(a(),c("div",_t,[$t,Be(" "+v(((Ae=e.positionInfo)==null?void 0:Ae.fee)*100)+"% ",1)])):E("",!0)]),o("div",wt,[o("div",It,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:S(No))(e.currentExplorer,"poolAddress",(lo=e.positionInfo)==null?void 0:lo.id),target:"_blank"},Pt,8,St)])]),o("div",Tt,[o("div",Nt,[qt,o("div",Rt,[Be(v(e.apy)+" ",1),O(A)])]),o("div",Bt,[Dt,O(C,{"overlay-class-name":"reward-coin-tips"},{title:se(()=>[Be("Rewards will be auto harvested and compounded to your position.")]),default:se(()=>{var Ye;return[o("div",Lt,[(a(!0),c(Ze,null,ho((Ye=e.positionInfo)==null?void 0:Ye.rewardList,Ue=>(a(),c("div",{key:Ue,class:"coin-a"},[We(o("img",Ut,null,512),[[u,e.getCoinIcon({address:Ue})]]),O(m,{address:Ue,"style-params":{width:"8px",height:"8px",right:"0px",bottom:"0px"}},null,8,["address"])]))),128))])]}),_:1})]),o("div",Ot,[Mt,o("div",Ft,"$"+v(("addCommom"in e?e.addCommom:S(N))(e.tvl,2)),1)])])])])}const en=Ve(Hn,[["render",Vt],["__scopeId","data-v-3da9d59a"]]),Ht=Xe({components:{Slider:Wo},setup(){const e=h(!0),i=to(),X=f(()=>i),z=xe(),L=f(()=>z),q=no(),m=h();$e(()=>[L.value.positionInfoObj,q.params.id],([k,n])=>{k&&!Je(k)&&n&&(m.value=k[n])},{immediate:!0,deep:!0});const A=f(()=>{var k;return(k=m.value)==null?void 0:k.needReverse}),C=k=>{var n;return(k==null?void 0:k.logoURI)||(k==null?void 0:k.logo_url)||((n=X.value.tokensObj[k==null?void 0:k.address])==null?void 0:n.logo_url)||mo("/image/coins/sui-unknown.png")},u=f(()=>{var y,P,p,$,U,M,x;const k=e.value?((y=m.value)==null?void 0:y.minPrice)&&T(m==null?void 0:m.value.minPrice,6):((P=m.value)==null?void 0:P.maxPrice)&&T(1/(m==null?void 0:m.value.maxPrice),6),n=e.value?((p=m.value)==null?void 0:p.maxPrice)&&T(($=m.value)==null?void 0:$.maxPrice,6):((U=m.value)==null?void 0:U.minPrice)&&T(1/(m==null?void 0:m.value.minPrice),6),r=(A.value?!e.value:e.value)?T((M=m.value)==null?void 0:M.price,6):T(1/((x=m.value)==null?void 0:x.price),6);let d={};return d[k]={label:"Min Price"},d[n]={label:"Max Price"},r>k&&r<n?d[r]={label:"Current Price"}:r<k?d[Number(k)+1e-9]={label:"Current Price"}:r>n&&(d[Number(n)-1e-9]={label:"Current Price"}),d}),t=f(()=>{var n,r;return(A.value?!e.value:e.value)?Re((n=m.value)==null?void 0:n.price,6):Re(1/((r=m.value)==null?void 0:r.price),6)}),B=f(()=>{var n,r;return(A.value?!e.value:e.value)?Re((n=m.value)==null?void 0:n.price,6):Re(1/((r=m.value)==null?void 0:r.price),6)});return{direct:e,positionInfo:m,needReverse:A,getCoinIcon:C,decimalUi:Re,addCommom:N,sFixD:T,marks:u,currentPrice:t,currentPriceResever:B}}});const Io=e=>(ze("data-v-2def8c34"),e=e(),Ge(),e),Et={class:"v2-position-range"},Wt={class:"position-range-top"},jt=Io(()=>o("div",null,"Position Range",-1)),Xt={class:"base-coin"},zt={key:0},Gt={alt:""},Yt={key:1},Kt={alt:""},Qt={key:2},Zt={key:3},Jt=Io(()=>o("p",null,"Base coin",-1)),xt={class:"coin-rate"},ei=Io(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),oi=Io(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ni=[ei,oi],ti={class:"position-range-bottom"},ii={class:"price-range"},si={class:"price-range-bg"},ai={key:0,class:"min-price"},li={key:0},ui={key:1},ri={key:1,class:"max-price"},di={key:0},vi={key:1},mi={key:0,class:"min-price"},pi={key:0},ci={key:1},fi={key:1,class:"max-price"},yi={key:0},bi={key:1};function ki(e,i,X,z,L,q){var u,t,B,k,n,r,d,y,P,p,$,U,M,x,le,ne,w,g,Z,te,ie,ue,W,ee,he,ye,re,I;const m=wo,A=ao("Slider"),C=Uo("image");return a(),c("div",Et,[o("div",Wt,[jt,o("div",Xt,[e.needReverse?(a(),c("div",Yt,[We(o("img",Kt,null,512),[[C,e.direct?e.getCoinIcon((y=e.positionInfo)==null?void 0:y.token_b):e.getCoinIcon((d=e.positionInfo)==null?void 0:d.token_a)]]),O(m,{address:e.direct?(U=($=e.positionInfo)==null?void 0:$.token_b)==null?void 0:U.address:(p=(P=e.positionInfo)==null?void 0:P.token_a)==null?void 0:p.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(a(),c("div",zt,[We(o("img",Gt,null,512),[[C,e.direct?e.getCoinIcon((u=e.positionInfo)==null?void 0:u.token_a):e.getCoinIcon((t=e.positionInfo)==null?void 0:t.token_b)]]),O(m,{address:e.direct?(k=(B=e.positionInfo)==null?void 0:B.token_a)==null?void 0:k.address:(r=(n=e.positionInfo)==null?void 0:n.token_b)==null?void 0:r.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),e.needReverse?(a(),c("span",Zt,v(e.direct?(g=(w=e.positionInfo)==null?void 0:w.token_b)==null?void 0:g.symbol:(te=(Z=e.positionInfo)==null?void 0:Z.token_a)==null?void 0:te.symbol),1)):(a(),c("span",Qt,v(e.direct?(x=(M=e.positionInfo)==null?void 0:M.token_a)==null?void 0:x.symbol:(ne=(le=e.positionInfo)==null?void 0:le.token_b)==null?void 0:ne.symbol),1)),Jt,o("div",xt,[o("div",{onClick:i[0]||(i[0]=D=>e.direct=!e.direct)},ni)])])]),o("div",ti,[o("div",ii,[o("div",si,[e.direct?(a(),Q(A,{key:0,value:e.currentPrice,class:Pe(["position-slider",e.currentPrice<Number(("sFixD"in e?e.sFixD:S(T))((ie=e.positionInfo)==null?void 0:ie.minPrice,6))||e.currentPrice>Number(("sFixD"in e?e.sFixD:S(T))((ue=e.positionInfo)==null?void 0:ue.maxPrice,6))?"hide-handler":""]),step:null,marks:e.marks,disabled:!0,min:Number(("decimalUi"in e?e.decimalUi:S(Re))((W=e.positionInfo)==null?void 0:W.minPrice,6)),max:Number(("decimalUi"in e?e.decimalUi:S(Re))((ee=e.positionInfo)==null?void 0:ee.maxPrice,6))},{mark:se(({label:D})=>{var ge,ce,de,b,H,Fe,fe,De,Le,we,Se,Ne;return[D=="Min Price"?(a(),c("div",ai,[o("div",null,v(D),1),e.direct?(a(),c("div",li,v(((ge=e.positionInfo)==null?void 0:ge.minPrice)&&("sFixD"in e?e.sFixD:S(T))((ce=e.positionInfo)==null?void 0:ce.minPrice,6)),1)):(a(),c("div",ui,v(((de=e.positionInfo)==null?void 0:de.maxPrice)&&("sFixD"in e?e.sFixD:S(T))(1/((b=e.positionInfo)==null?void 0:b.maxPrice),6)),1))])):E("",!0),D=="Max Price"?(a(),c("div",ri,[o("div",null,v(D),1),e.direct?(a(),c("div",di,v(((H=e.positionInfo)==null?void 0:H.maxPrice)&&("sFixD"in e?e.sFixD:S(T))((Fe=e.positionInfo)==null?void 0:Fe.maxPrice,6)),1)):(a(),c("div",vi,v(((fe=e.positionInfo)==null?void 0:fe.minPrice)&&("sFixD"in e?e.sFixD:S(T))(1/((De=e.positionInfo)==null?void 0:De.minPrice),6)),1))])):E("",!0),D=="Current Price"?(a(),c("div",{key:2,class:Pe(["current-price",e.currentPrice<Number(("sFixD"in e?e.sFixD:S(T))((Le=e.positionInfo)==null?void 0:Le.minPrice,6))?"current-price-left":e.currentPrice>Number(("sFixD"in e?e.sFixD:S(T))((we=e.positionInfo)==null?void 0:we.maxPrice,6))?"current-price-right":""])},[o("div",null,v(D),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(a(),c(Ze,{key:0},[Be(v(("addCommom"in e?e.addCommom:S(N))(("decimalUi"in e?e.decimalUi:S(Re))((Se=e.positionInfo)==null?void 0:Se.price,6))),1)],64)):(a(),c(Ze,{key:1},[Be(v(("addCommom"in e?e.addCommom:S(N))(("decimalUi"in e?e.decimalUi:S(Re))(1/((Ne=e.positionInfo)==null?void 0:Ne.price),6))),1)],64))])],2)):E("",!0)]}),_:1},8,["value","class","marks","min","max"])):(a(),Q(A,{key:1,value:e.currentPriceResever,class:Pe(["position-slider",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:S(T))(1/((he=e.positionInfo)==null?void 0:he.maxPrice),6))||e.currentPriceResever>Number(("sFixD"in e?e.sFixD:S(T))(1/((ye=e.positionInfo)==null?void 0:ye.minPrice),6))?"hide-handler":""]),step:null,min:Number(("decimalUi"in e?e.decimalUi:S(Re))(1/((re=e.positionInfo)==null?void 0:re.maxPrice),6)),max:Number(("decimalUi"in e?e.decimalUi:S(Re))(1/((I=e.positionInfo)==null?void 0:I.minPrice),6)),marks:e.marks,disabled:!0},{mark:se(({label:D})=>{var ge,ce,de,b,H,Fe,fe,De,Le,we,Se,Ne;return[D=="Min Price"?(a(),c("div",mi,[o("div",null,v(D),1),e.direct?(a(),c("div",pi,v(((ge=e.positionInfo)==null?void 0:ge.minPrice)&&("sFixD"in e?e.sFixD:S(T))((ce=e.positionInfo)==null?void 0:ce.minPrice,6)),1)):(a(),c("div",ci,v(((de=e.positionInfo)==null?void 0:de.maxPrice)&&("sFixD"in e?e.sFixD:S(T))(1/((b=e.positionInfo)==null?void 0:b.maxPrice),6)),1))])):E("",!0),D=="Max Price"?(a(),c("div",fi,[o("div",null,v(D),1),e.direct?(a(),c("div",yi,v(((H=e.positionInfo)==null?void 0:H.maxPrice)&&("sFixD"in e?e.sFixD:S(T))((Fe=e.positionInfo)==null?void 0:Fe.maxPrice,6)),1)):(a(),c("div",bi,v(((fe=e.positionInfo)==null?void 0:fe.minPrice)&&("sFixD"in e?e.sFixD:S(T))(1/((De=e.positionInfo)==null?void 0:De.minPrice),6)),1))])):E("",!0),D=="Current Price"?(a(),c("div",{key:2,class:Pe(["current-price current-price-direct",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:S(T))(1/((Le=e.positionInfo)==null?void 0:Le.maxPrice),6))?"current-price-left":e.currentPriceResever>Number(("sFixD"in e?e.sFixD:S(T))(1/((we=e.positionInfo)==null?void 0:we.minPrice),6))?"current-price-right":""])},[o("div",null,v(D),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(a(),c(Ze,{key:0},[Be(v(("addCommom"in e?e.addCommom:S(N))(("decimalUi"in e?e.decimalUi:S(Re))((Se=e.positionInfo)==null?void 0:Se.price,6))),1)],64)):(a(),c(Ze,{key:1},[Be(v(("addCommom"in e?e.addCommom:S(N))(("decimalUi"in e?e.decimalUi:S(Re))(1/((Ne=e.positionInfo)==null?void 0:Ne.price),6))),1)],64))])],2)):E("",!0)]}),_:1},8,["value","class","min","max","marks"]))])])])])}const on=Ve(Ht,[["render",ki],["__scopeId","data-v-2def8c34"]]),hi=Xe({components:{Modal:Ho},props:{positionInfo:{type:Object,default:()=>({})}},setup(e){const i=f(()=>{var z,L;const X=Math.ceil(((z=e.positionInfo)==null?void 0:z.poolUSD)/((L=e.positionInfo)==null?void 0:L.quoteUSD)*100);return Number(X)});return{sFixD:T,addCommom:N,ratio:i}}});const Oo=e=>(ze("data-v-766b1627"),e=e(),Ge(),e),gi=Oo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),_i={class:"deposit-slider"},$i={class:"info-block"},wi=Oo(()=>o("div",{class:"leabl"},"Current Deposit：",-1)),Ii={class:"text"},Si={class:"info-block"},Ai=Oo(()=>o("div",{class:"leabl"},"Max Capacity：",-1)),Ci={class:"text"};function Pi(e,i,X,z,L,q){const m=ao("Modal");return a(),Q(m,{width:"440px",visible:!0,footer:null,title:"Vault Capacity",onCancel:i[0]||(i[0]=A=>e.$emit("onClose"))},{closeIcon:se(()=>[gi]),default:se(()=>{var A,C,u,t;return[o("div",_i,[o("div",{class:"current-deposit",style:To({width:`${e.ratio>100?100:e.ratio}%`})},null,4)]),o("div",$i,[wi,o("div",Ii,v(("addCommom"in e?e.addCommom:S(N))(("sFixD"in e?e.sFixD:S(T))((A=e.positionInfo)==null?void 0:A.currentDeposit,2)))+" "+v((C=e.positionInfo)==null?void 0:C.quoteCoinInfo.symbol),1)]),o("div",Si,[Ai,o("div",Ci,v(("addCommom"in e?e.addCommom:S(N))(("sFixD"in e?e.sFixD:S(T))((u=e.positionInfo)==null?void 0:u.quoteUSD,2)))+" "+v((t=e.positionInfo)==null?void 0:t.quoteCoinInfo.symbol),1)])]}),_:1})}const nn=Ve(hi,[["render",Pi],["__scopeId","data-v-766b1627"]]),Ti=Xe({components:{AutoPoolV2PoolCapacity:nn},setup(){const e=to(),i=f(()=>e),X=xe(),z=f(()=>X),L=no(),q=h();$e(()=>[z.value.positionInfoObj,L.params.id],([u,t])=>{u&&!Je(u)&&t&&(q.value=u[t])},{immediate:!0,deep:!0});const m=f(()=>{var u;return(u=q.value)==null?void 0:u.needReverse}),A=u=>{var t;return(u==null?void 0:u.logoURI)||(u==null?void 0:u.logo_url)||((t=i.value.tokensObj[u==null?void 0:u.address])==null?void 0:t.logo_url)||mo("/image/coins/sui-unknown.png")},C=h(!1);return{needReverse:m,positionInfo:q,getCoinIcon:A,addCommom:N,isShowModal:C}}});const Ni=e=>(ze("data-v-b948d21b"),e=e(),Ge(),e),qi={class:"pool-composition"},Ri={class:"pool-composition-top"},Bi=Ni(()=>o("span",null,"Vault Composition",-1)),Di={class:"pool-composition-bottom"},Li={class:"token-ratio"},Ui={class:"before-coin"},Oi={alt:""},Mi={class:"after-coin"},Fi={alt:""},Vi={class:"token-num"},Hi={class:"num-box"},Ei={class:"num-box"};function Wi(e,i,X,z,L,q){var u,t,B,k,n,r,d,y,P,p,$,U,M,x,le,ne,w,g,Z,te,ie,ue,W,ee,he,ye,re,I,D;const m=wo,A=nn,C=Uo("image");return a(),c("div",qi,[o("div",Ri,[Bi,Number((u=e.positionInfo)==null?void 0:u.quoteUSD)>0?(a(),c("div",{key:0,class:"pool-capacity",onClick:i[0]||(i[0]=ge=>e.isShowModal=!0)},"Vault Capacity")):E("",!0)]),o("div",Di,[o("div",Li,[o("div",Ui,[o("div",null,[O(m,{address:e.needReverse?(n=(k=e.positionInfo)==null?void 0:k.token_b)==null?void 0:n.address:(B=(t=e.positionInfo)==null?void 0:t.token_a)==null?void 0:B.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),We(o("img",Oi,null,512),[[C,e.needReverse?e.getCoinIcon((d=e.positionInfo)==null?void 0:d.token_b):e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_a)]])]),o("span",null,v((y=e.positionInfo)==null?void 0:y.poolCoinARatio)+"%",1)]),o("div",Mi,[o("span",null,v((P=e.positionInfo)==null?void 0:P.poolCoinBRatio)+"%",1),o("div",null,[We(o("img",Fi,null,512),[[C,e.needReverse?e.getCoinIcon(($=e.positionInfo)==null?void 0:$.token_a):e.getCoinIcon((p=e.positionInfo)==null?void 0:p.token_b)]]),O(m,{address:e.needReverse?(le=(x=e.positionInfo)==null?void 0:x.token_a)==null?void 0:le.address:(M=(U=e.positionInfo)==null?void 0:U.token_b)==null?void 0:M.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),o("div",Vi,[o("div",{class:"token-a-bg",style:To({width:`${(ne=e.positionInfo)==null?void 0:ne.poolCoinARatio}%`})},null,4),o("div",{class:"token-b-bg",style:To({width:`${(w=e.positionInfo)==null?void 0:w.poolCoinBRatio}%`})},null,4),o("div",Hi,[o("div",null,v(("addCommom"in e?e.addCommom:S(N))((g=e.positionInfo)==null?void 0:g.poolCoinANum))+" "+v(e.needReverse?(ue=(ie=e.positionInfo)==null?void 0:ie.token_b)==null?void 0:ue.symbol:(te=(Z=e.positionInfo)==null?void 0:Z.token_a)==null?void 0:te.symbol),1),o("div",null,"$"+v(("addCommom"in e?e.addCommom:S(N))((W=e.positionInfo)==null?void 0:W.poolCoinAUSD)),1)]),o("div",Ei,[o("div",null,v(("addCommom"in e?e.addCommom:S(N))((ee=e.positionInfo)==null?void 0:ee.poolCoinBNum))+" "+v(e.needReverse?(I=(re=e.positionInfo)==null?void 0:re.token_a)==null?void 0:I.symbol:(ye=(he=e.positionInfo)==null?void 0:he.token_b)==null?void 0:ye.symbol),1),o("div",null,"$"+v(("addCommom"in e?e.addCommom:S(N))((D=e.positionInfo)==null?void 0:D.poolCoinBUSD)),1)])])]),e.isShowModal?(a(),Q(A,{key:0,"position-info":e.positionInfo,onOnClose:i[1]||(i[1]=ge=>e.isShowModal=!1)},null,8,["position-info"])):E("",!0)])}const tn=Ve(Ti,[["render",Wi],["__scopeId","data-v-b948d21b"]]),ji=Xe({setup(){const e=to(),i=f(()=>e),X=xe(),z=f(()=>X),L=no(),q=h();$e(()=>[z.value.positionInfoObj,L.params.id],([t,B])=>{t&&!Je(t)&&B&&(q.value=t[B])},{immediate:!0,deep:!0});const m=f(()=>{var t;return(t=q.value)==null?void 0:t.needReverse}),A=t=>{var B;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((B=i.value.tokensObj[t==null?void 0:t.address])==null?void 0:B.logo_url)||mo("/image/coins/sui-unknown.png")},C=$o(),u=f(()=>C);return{needReverse:m,positionInfo:q,getCoinIcon:A,addCommom:N,wallet:u}}});const yo=e=>(ze("data-v-e6fe05ad"),e=e(),Ge(),e),Xi={class:"my-liquidity"},zi={class:"my-liquidity-top"},Gi=yo(()=>o("div",null,"My Liquidity",-1)),Yi=yo(()=>o("p",null,"My share of pool",-1)),Ki={class:"my-liquidity-bottom"},Qi={class:"lp-token"},Zi=yo(()=>o("div",null,[o("span",null,"LP Token Balance ")],-1)),Ji={class:"lp-balance"},xi={class:"token-num-content"},es={class:"token-num token-a-num"},os={class:"logo"},ns=["src"],ts={class:"text"},is={class:"lp-logo"},ss=["src"],as=yo(()=>o("div",null,"Pooled Assets",-1)),ls={class:"token-num"},us={class:"logo"},rs=["src"],ds={class:"text"},vs=yo(()=>o("div",{class:"token-num-content-bg"},null,-1));function ms(e,i,X,z,L,q){var A,C,u,t,B,k,n,r,d,y,P,p,$,U,M,x,le,ne,w,g,Z,te,ie,ue,W,ee,he,ye,re;const m=wo;return a(),c("div",Xi,[o("div",zi,[Gi,o("div",null,[Yi,o("p",null,v(e.wallet.connected?(A=e.positionInfo)==null?void 0:A.myShare:"--")+"%",1)])]),o("div",Ki,[o("div",Qi,[Zi,o("div",null,[o("span",Ji,v(e.wallet.connected?("addCommom"in e?e.addCommom:S(N))((C=e.positionInfo)==null?void 0:C.myLiquidity):"--")+" LP",1),o("span",null,v(e.wallet.connected?((u=e.positionInfo)==null?void 0:u.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in e?e.addCommom:S(N))((t=e.positionInfo)==null?void 0:t.myLiquidityUSD)}`:"<$0.01":"--"),1)])]),o("div",xi,[o("div",es,[o("div",os,[o("img",{src:e.needReverse?e.getCoinIcon((k=e.positionInfo)==null?void 0:k.token_b):e.getCoinIcon((B=e.positionInfo)==null?void 0:B.token_a),alt:""},null,8,ns),O(m,{address:e.needReverse?(y=(d=e.positionInfo)==null?void 0:d.token_b)==null?void 0:y.address:(r=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:r.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),o("div",ts,[o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:S(N))((P=e.positionInfo)==null?void 0:P.amountA):"--")+" "+v(e.needReverse?(M=(U=e.positionInfo)==null?void 0:U.token_b)==null?void 0:M.symbol:($=(p=e.positionInfo)==null?void 0:p.token_a)==null?void 0:$.symbol),1),o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:S(N))((x=e.positionInfo)==null?void 0:x.myAmountAUSD):"--"),1)])]),o("div",is,[o("img",{src:e.getCoinIcon((le=e.positionInfo)==null?void 0:le.lpInfo),alt:""},null,8,ss),as]),o("div",ls,[o("div",us,[o("img",{src:e.needReverse?e.getCoinIcon((w=e.positionInfo)==null?void 0:w.token_a):e.getCoinIcon((ne=e.positionInfo)==null?void 0:ne.token_b),alt:""},null,8,rs),O(m,{address:e.needReverse?(ie=(te=e.positionInfo)==null?void 0:te.token_a)==null?void 0:ie.address:(Z=(g=e.positionInfo)==null?void 0:g.token_b)==null?void 0:Z.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),o("div",ds,[o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:S(N))((ue=e.positionInfo)==null?void 0:ue.amountB):"--")+" "+v(e.needReverse?(ye=(he=e.positionInfo)==null?void 0:he.token_a)==null?void 0:ye.symbol:(ee=(W=e.positionInfo)==null?void 0:W.token_b)==null?void 0:ee.symbol),1),o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:S(N))((re=e.positionInfo)==null?void 0:re.myAmountBUSD):"--"),1)])]),vs])])])}const sn=Ve(ji,[["render",ms],["__scopeId","data-v-e6fe05ad"]]),ps=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const cs={},an=e=>(ze("data-v-fcbc716b"),e=e(),Ge(),e),fs={class:"status"},ys=an(()=>o("img",{src:ps,alt:""},null,-1)),bs=an(()=>o("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),ks=[ys,bs];function hs(e,i){return a(),c("div",fs,ks)}const ln=Ve(cs,[["render",hs],["__scopeId","data-v-fcbc716b"]]),gs=Xe({components:{AutoPoolAddModal:Zo,AutoPoolV2PoolStatus:ln},setup(){const e=$o(),i=h(!1),X=_o(),z=f(()=>X),L=f(()=>z.value.chainName),q=f(()=>e),m=xe(),A=f(()=>m),C=to(),u=f(()=>C),t=h(),B=no(),k=h(!1),n=h(!1);$e(()=>[A.value.positionInfoObj,B.params.id],([_,j])=>{_&&!Je(_)&&j&&(t.value=_[j])},{immediate:!0,deep:!0});const r=f(()=>{var _;return(_=t.value)==null?void 0:_.needReverse}),d=h(),y=h(),P=h(),p=h(),$=h(!0),U=f(()=>q.value.assets&&d.value&&q.value.assets[d.value.address]?Vo(q.value.assets[d.value.address].balance,d.value.decimals):0),M=f(()=>q.value.assets&&y.value&&q.value.assets[y.value.address]?Vo(q.value.assets[y.value.address].balance,y.value.decimals):0),x=_=>{console.log("🚀🚀🚀 ~ file: auto-pool-v2-add.vue:358 ~ maxBtnSelect ~ maxBtnSelect:",d.value.symbol=="SUI",y.value.symbol=="SUI",_),_==="fromCoin"?($.value=!0,P.value=U.value>0?d.value.symbol=="SUI"?new l(Number(U.value)).sub(new l(.05)).lt(new l(0))?"0":new l(Number(U.value)).sub(new l(.5)).toString():String(U.value):""):($.value=!1,p.value=M.value>0?y.value.symbol=="SUI"?new l(Number(M.value)).sub(new l(.05)).lt(new l(0))?"0":new l(Number(M.value)).sub(new l(.5)).toString():String(M.value):"")},le=_=>{_==="fromCoin"?($.value=!0,P.value=U.value>0?T(new l(Number(U.value)).div(2).toString(),d.value.decimals).toString():""):($.value=!1,p.value=M.value>0?T(new l(Number(M.value)).div(2).toString(),y.value.decimals).toString():"")},ne=f(()=>L.value?Go(L.value):{}),w=f(()=>A.value.slippage),g=h("--"),Z=h("--"),te=_=>{const j=new l(t.value.autoPoolPositionInfo.liquidity),be=new l(_.toString());if(j.toNumber()>0&&be.toNumber()>0){const F=be.add(j),Ie=be.div(F).mul(100).toNumber(),s=gn(Ie),R=s==-1?2:s+2,ae=T(be.div(F).mul(100).toNumber(),R),G=new l(1).div(new l(Math.pow(10,t.value.lpInfo.decimals))).toString();Number(ae)<Number(G)?g.value=`<${G}`:g.value=ae}else be.toNumber()>0&&j.toNumber()<=0?g.value="100":g.value="--"},ie=_=>{if(t.value.total_supply==0){Z.value="";return}new l(_.toString());const j=new l(w.value).div(100),be=qo.get_lp_amount_by_liquidity({liquidity:t.value.liquidity,total_supply:t.value.total_supply},_.toString()),F=new l(Math.pow(10,t.value.lpInfo.decimals)),Ie=new l(be).div(F).toString(),s=new l(Ie).mul(j),R=new l(Ie).sub(s);Z.value=T(R.toString(),t.value.decimals)},ue=h(!1),W=h(!1),ee=h(""),he=h(),ye=h(!1),re=h(!1),I=h(!1),D=h(!1),ge=_=>{if(_=="Haedal")return"Haedal";if(_=="Volo")return"Volo";if(_=="aftermath")return"Aftermath"},ce=async()=>{if(!t.value)return;if(t.value.supportHaedalStake&&D.value&&p.value<10){re.value=!0;return}n.value=!1,ye.value=!0;const _=t.value.autoPoolPositionInfo.tick_lower_index,j=t.value.autoPoolPositionInfo.tick_upper_index,be=je.sqrtPriceX64ToTickIndex(new pe(t.value.current_sqrt_price));je.tickIndexToSqrtPriceX64(_),je.tickIndexToSqrtPriceX64(j),be<_&&(r.value?ue.value=!0:W.value=!0),be>j&&(r.value?W.value=!0:ue.value=!0);let F;if(P.value||p.value){$.value?F=new l(P.value).mul(Math.pow(10,d.value.decimals)).toString():F=new l(p.value).mul(Math.pow(10,y.value.decimals)).toString();let Ie,s=$.value;if(I.value||D.value){const me=new l(1);if(new l(F).lte(me))return n.value=!0,!1;console.log("1106###calculateDepositSwapAmount###params###",{lowerTick:_,upperTick:j,curSqrtPrice:new pe(t.value.current_sqrt_price),fix_amount_a:s,input_amount:F,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,clmm_pool:t.value.address,slippage:Number(w.value)/100,decimals:I.value?d.value.decimals:y.value.decimals,use_Haedal_stake:t.value.supportHaedalStake&&D.value,shouldRequestStake:!1});let V;try{V=await Ae.calculateDepositSwapAmount({lowerTick:_,upperTick:j,curSqrtPrice:new pe(t.value.current_sqrt_price),fix_amount_a:s,input_amount:F,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,clmm_pool:t.value.address,slippage:Number(w.value)/100,decimals:I.value?d.value.decimals:y.value.decimals,request_id:F,stakeProtocol:t.value.supportHaedalStake&&(D.value&&!t.value.isTokenA||I.value&&t.value.isTokenA)?t.value.stakeProtocol:"",shouldRequestStake:!1})}catch(K){console.log("calculateDepositSwapAmount",K)}if(V=="HaedalStakeSuiAmountError"){k.value=!1,re.value=!0;return}else if(V){if(V.request_id!==F)return;re.value=!1,k.value=t.value.supportHaedalStake?!1:V.is_exceed,Ie=new pe(V.afterSqrtPrice),F=V.fixAmountA===s?new pe(new l(F).sub(V.swapInAmount).toString()):new pe(V.swapOutAmount),he.value={swap_amount:V.swapInAmount,route_obj:V.route_obj,a2b:s,input_amount:F,stakeProtocol:V.stake_protocol},s=V.fixAmountA;const K=t.value.token_a.decimals,Y=t.value.token_b.decimals,J=new l(V.swapInAmount).div(new l(Math.pow(10,K))).toString(),_e=T(new l(V.swapOutAmountLimit).div(new l(Math.pow(10,Y))).toString(),Y),ke=r.value?t.value.token_b.symbol:t.value.token_a.symbol,Ce=r.value?t.value.token_a.symbol:t.value.token_b.symbol,Ke=`By depositing ${N(I.value?P.value:p.value)} ${I.value?ke:Ce},
            ${N(J)} ${I.value?ke:Ce}  will be traded for ${N(_e)} ${I.value?Ce:ke} and then added to the pool together.`,Te=`By depositing ${N(p.value)} ${Ce}, ${N(_e)} ${Ce} will be converted to ${ke} via ${ge(t.value.stakeProtocol)} 
            liquid staking and added to the pool together.`;ee.value=t.value.supportHaedalStake&&D.value?Te:Ke}else Ie=t.value.current_sqrt_price,F=new pe(F)}else k.value=!1,Ie=t.value.current_sqrt_price,F=new pe(F),ee.value="";let R,ae,G;const oe=ne.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:d.value,tokenB:y.value,lowerTick:_,upperTick:j,coinAmount:F,iscoinA:s,roundUp:!0,slippage:Number(w.value)/100,curSqrtPrice:new pe(Ie)});R=oe.liquidityAmount,ae=oe.tokenMaxA,G=oe.tokenMaxB,!I.value&&!D.value&&($.value?p.value=Number(G)>0?G:"":P.value=Number(ae)>0?ae:""),console.log("🚀🚀🚀 ~ file: auto-pool-v2-add.vue:734 ~ updateAmounts ~ liquidityAmount:",R.toString),te(R),ie(R),ye.value=!1}};$e(()=>t.value,_=>{_&&!Je(_)&&(d.value=_==null?void 0:_.token_a,y.value=_==null?void 0:_.token_b,ue.value=!1,W.value=!1,ce())},{immediate:!0});const de=f(()=>u.value.RATES),b=f(()=>{var _,j,be,F,Ie,s,R,ae;if((j=de.value[(_=d.value)==null?void 0:_.address])!=null&&j.price&&((F=de.value[(be=y.value)==null?void 0:be.address])!=null&&F.price)){const G=new l(P.value||0).mul(new l((s=de.value[(Ie=d.value)==null?void 0:Ie.address])==null?void 0:s.price)),oe=new l(p.value||0).mul(new l((ae=de.value[(R=y.value)==null?void 0:R.address])==null?void 0:ae.price));return G.add(oe).toNumber()}else return"--"});$e(()=>P.value,fo((_,j)=>{_?ce():(g.value="--",p.value="",Z.value="--")},500),{immediate:!0}),$e(()=>p.value,fo((_,j)=>{_?ce():(P.value="",g.value="--",Z.value="--")},500),{immediate:!0});const{t:H,locale:Fe}=Ro(),fe=f(()=>{var _,j;if(I.value||D.value){const be=I.value?P.value:p.value,F=I.value?d.value:y.value;if((_=de.value[F==null?void 0:F.address])!=null&&_.price)return new l(be||0).mul(new l((j=de.value[F==null?void 0:F.address])==null?void 0:j.price)).toNumber()}return 0}),De=f(()=>{const _=Number(P.value)>Number(U.value),j=Number(p.value)>Number(M.value);return!P.value&&!p.value?H("button.enterAmount"):t.value.supportHaedalStake&&D.value&&p.value<10?"Minimum deposit 10 SUI":_?H("button.insufficientBalance",{name:d.value.symbol}):j?H("button.insufficientBalance",{name:y.value.symbol}):k.value?H("button.insufficientLiquidity"):Number(t.value.remainingTokenUSD)!==0&&Number(t.value.quoteUSD)>0&&Number(b.value)>Number(t.value.remainingTokenUSD)?"Exceeded the max capacity":n.value?H("button.enterAmount"):"Add Liquidity"}),Le=f(()=>{const _=Number(P.value)>Number(U.value),j=Number(p.value)>Number(M.value);return!!(!P.value&&!p.value||_||j||P.value<=0&&p.value<=0||k.value||Ue.value!=="STATUS_RUNNING"||Number(t.value.remainingTokenUSD)!==0&&Number(t.value.quoteUSD)>0&&Number(b.value)>Number(t.value.remainingTokenUSD)||n.value||t.value.supportHaedalStake&&!D.value&&fe.value>1e4||!t.value.supportHaedalStake&&fe.value>1e4||re.value||t.value.supportHaedalStake&&D.value&&p.value<10)}),we=h(!1),{setIsShowSuccess:Se,setIsShowRejected:Ne,setIsShowWaiting:He,setTransactionDesc:po,setTransactionTxid:io,setPositiomNum:oo}=X,Ae=zo("Sui"),lo=async()=>{var G,oe,me,V;i.value=!1,we.value=!0,io("");const _=`${N(P.value)} ${(G=d.value)==null?void 0:G.symbol}`,j=`${N(p.value)} ${(oe=y.value)==null?void 0:oe.symbol}`;po(`Deposit ${P.value>0?_:""} ${p.value>0&&P.value>0?"and":""} ${p.value>0?j:""}`),He(!0);const be=$.value,F=t.value.autoPoolPositionInfo.tick_lower_index,Ie=t.value.autoPoolPositionInfo.tick_upper_index,s=je.sqrtPriceX64ToTickIndex(new pe(t.value.current_sqrt_price));let R;$.value?R=new l(P.value).mul(Math.pow(10,d.value.decimals)).toString():R=new l(p.value).mul(Math.pow(10,y.value.decimals)).toString();const ae=(V=(me=t==null?void 0:t.value)==null?void 0:me.rewarderInfo)==null?void 0:V.map(K=>K.coinAddress);try{const K={lowerTick:F,upperTick:Ie,coinAmount:R,fix_amount_a:be,slippage:Number(w.value)/100,curSqrtPrice:new pe(t.value.current_sqrt_price),id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:ae,swapParams:he.value,isOnlyA:I.value,isOnlyB:D.value,currentTickIndex:s,decimal_b:t.value.coinB.decimals,request_id:R,stakeProtocol:t.value.supportHaedalStake&&(D.value&&!t.value.isTokenA||I.value&&t.value.isTokenA)?t.value.stakeProtocol:"",shouldRequestStake:t.value.supportHaedalStake&&D.value,farming_pool:t.value.autoPoolPositionInfo.pool_id};console.log("🚀🚀🚀 ~ file: auto-pool-v2-add.vue:854 ~ toAdd ~ params.positionInfo.value.supportHaedalStake&&isOnlyB.value:",t.value.supportHaedalStake&&D.value);const Y=await Ae.deposit(K);console.log("🚀🚀🚀 ~ file: auto-pool-v2-add.vue:858 ~ toAdd ~ payload:",Y);const J=await ne.value.signAndExecuteTransactionBlock(q.value.currentWallet,Y);let _e=ne.value.handleTx(J);if(console.log("toAdd###tx###",_e),_e&&_e.hash){io(_e.hash),He(!1),Se(!0);const ke={title:"Supplied",desc:`Deposit ${P.value>0?_:""} ${p.value>0&&P.value>0?"and":""} ${p.value>0?j:""}`,hash:_e.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${P.value>0?_:""} ${p.value>0&&P.value>0?"and":""} ${p.value>0?j:""}`,isOnlyToken:I.value||D.value,isOnlyTokenInfo:I.value?d.value:y.value};L.value!=="Aptos"&&(ke.res=_e.res),ne.value.showTransitionPending(ke),await ne.value.watchTransaction(ke)&&setTimeout(()=>{m.updatePositionItem(t.value.id),ne.value.getAccount(q.value.address)},1e3),oo()}else He(!1),Ne(!0);P.value="",p.value="",we.value=!1}catch(K){P.value="",p.value="",console.log("addError###",K),we.value=!1,He(!1),Ne(!0)}},Ye=_=>{P.value="",p.value="",ee.value="",re.value=!1,_=="only-a-b"?(I.value=!1,D.value=!1):_=="only-a"?(I.value=!0,D.value=!1):(D.value=!0,I.value=!1)},Ue=f(()=>A.value.currentAutoPoolStatus),bo=h(),Ao=()=>{bo.value=window.setInterval(()=>{(P.value||p.value)&&ce()},2e4)};go(()=>{Ao()}),Do(()=>{window.clearInterval(bo.value)});const Co=cn(fn,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),Po="You can also choose to deposit in only one asset type. In that case,the vault will convert your asset to the required propositions using Cetus.Please note that trading fees & slippage will be applied. When slippage is involved,a certain amount of post-swap dust (no loss of funds) will be returned to you.",ve=f(()=>`When you deposit in only SUI tokens, a part of your SUI amount will be converted to ${d.value.symbol} via ${ge(t.value.stakeProtocol)} liquid staking services to match required liquidity compositions of the liquidity pool on Cetus. A certain amount of dust (no loss of funds) will be returned to you if slippage is involved.`);return{currentAutoPoolStatus:Ue,wallet:q,positionInfo:t,isShowAddModal:i,needReverse:r,fromCoin:d,toCoin:y,fromCoinAmount:P,toCoinAmount:p,fromCoinBlance:U,toCoinBlance:M,fixedFromCoin:$,maxBtnSelect:x,halfBtnSelect:le,totalAmountUSD:b,addCommom:N,shareOfPool:g,minimumReceivedLP:Z,addLiquidityBtnText:De,addLiquidityBtnDisabled:Le,toAdd:lo,showToCoinLock:W,showFromCoinLock:ue,isOnlyA:I,isOnlyB:D,onlyToken:Ye,onlyText:ee,onlyTokenUSD:fe,calculateLoading:ye,indicator:Co,depositTokenTips:Po,depositHaedalTokenTips:ve,loading:we}}});const eo=e=>(ze("data-v-7937e10e"),e=e(),Ge(),e),_s={class:"auto-pool-add"},$s={class:"auto-pool-add-content"},ws={class:"liquidity-action-tab"},Is=eo(()=>o("div",{class:"increase tab-active"},"Add",-1)),Ss={class:"only-token"},As=eo(()=>o("div",null,"Deposit Amounts",-1)),Cs=eo(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),Ps=eo(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),Ts={key:0,class:"card-item"},Ns={key:1,class:"card-item"},qs=eo(()=>o("span",null,"Pool Closed",-1)),Rs={key:0,class:"add-info"},Bs={key:0,class:"only-text"},Ds={class:"total-amount"},Ls=eo(()=>o("span",null,"Total Amount",-1)),Us={key:0},Os={class:"total-amount"},Ms=eo(()=>o("span",null,"Share of Pool",-1)),Fs={key:0},Vs={key:1,class:"total-amount"},Hs=eo(()=>o("span",null,"Minimum Received LP",-1)),Es={key:0},Ws={key:1,class:"add-info only-add-info"},js=eo(()=>o("div",{class:"only-text"}," Single-asset deposit can't be higher than $10,000 at a time. ",-1)),Xs=[js];function zs(e,i,X,z,L,q){var n,r,d,y,P,p,$,U,M,x,le,ne,w,g,Z,te,ie,ue,W,ee,he,ye,re;const m=Eo,A=Ko,C=Qo,u=ao("AutoPoolV2PoolStatus"),t=Bo,B=Xo,k=Zo;return a(),c("div",_s,[o("div",$s,[o("div",ws,[Is,o("div",{class:"remove",onClick:i[0]||(i[0]=jo(I=>e.$emit("changeCurrentTab"),["stop"]))},"Remove")]),o("div",Ss,[As,o("div",null,[o("div",{class:Pe(["only-a-b",!e.isOnlyA&&!e.isOnlyB?"active-only":""]),onClick:i[1]||(i[1]=I=>e.onlyToken("only-a-b"))},[o("span",null,v(e.needReverse?(y=(d=e.positionInfo)==null?void 0:d.token_b)==null?void 0:y.symbol:(r=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:r.symbol)+" + "+v(e.needReverse?(U=($=e.positionInfo)==null?void 0:$.token_a)==null?void 0:U.symbol:(p=(P=e.positionInfo)==null?void 0:P.token_b)==null?void 0:p.symbol),1)],2),o("div",{class:Pe(["only-a",e.isOnlyA?"active-only":""]),onClick:i[2]||(i[2]=I=>e.onlyToken("only-a"))},[o("span",null,v(e.needReverse?(ne=(le=e.positionInfo)==null?void 0:le.token_b)==null?void 0:ne.symbol:(x=(M=e.positionInfo)==null?void 0:M.token_a)==null?void 0:x.symbol)+" only",1),O(m,{placement:"bottom","arrow-point-at-center":""},{title:se(()=>[o("span",null,v(e.depositTokenTips),1)]),default:se(()=>[Cs]),_:1})],2),o("div",{class:Pe(["only-b",e.isOnlyB?"active-only":""]),onClick:i[3]||(i[3]=I=>e.onlyToken("only-b"))},[o("span",null,v(e.needReverse?(te=(Z=e.positionInfo)==null?void 0:Z.token_a)==null?void 0:te.symbol:(g=(w=e.positionInfo)==null?void 0:w.token_b)==null?void 0:g.symbol)+" only",1),O(m,{placement:"bottom","arrow-point-at-center":""},{title:se(()=>[o("span",null,v(e.positionInfo.supportHaedalStake?e.depositHaedalTokenTips:e.depositTokenTips),1)]),default:se(()=>[Ps]),_:1})],2)])]),o("div",{class:Pe(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(a(),c("div",Ts,[O(A,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":i[4]||(i[4]=I=>e.fromCoinAmount=I),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:i[5]||(i[5]=I=>e.maxBtnSelect("fromCoin")),onOnHalf:i[6]||(i[6]=I=>e.halfBtnSelect("fromCoin")),onOnInput:i[7]||(i[7]=I=>{e.fromCoinAmount=I}),onOnFocus:i[8]||(i[8]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.isOnlyA?(a(),Q(C,{key:0})):E("",!0)])):E("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(a(),c("div",Ns,[O(A,{modelValue:e.toCoinAmount,"onUpdate:modelValue":i[9]||(i[9]=I=>e.toCoinAmount=I),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:i[10]||(i[10]=I=>e.maxBtnSelect("toCoin")),onOnHalf:i[11]||(i[11]=I=>e.halfBtnSelect("toCoin")),onOnInput:i[12]||(i[12]=I=>{e.toCoinAmount=I}),onOnFocus:i[13]||(i[13]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.isOnlyB?(a(),Q(C,{key:0})):E("",!0)])):E("",!0)],2)]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(a(),Q(u,{key:0})):E("",!0),(ie=e.positionInfo)!=null&&ie.is_pause?(a(),Q(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:se(()=>[qs]),_:1})):e.wallet.connected?(a(),Q(t,{key:2,class:"big-btn liquidity-btn",disabled:e.loading||e.addLiquidityBtnDisabled,loading:e.loading,onClick:i[14]||(i[14]=I=>e.isShowAddModal=!0)},{default:se(()=>[o("span",null,v(e.addLiquidityBtnText),1)]),_:1},8,["disabled","loading"])):(a(),Q(t,{key:3,class:"big-btn liquidity-btn",onClick:i[15]||(i[15]=I=>e.wallet.setIsShowWalletModal(!0))},{default:se(()=>[o("span",null,v(e.$t("button.connectWallet")),1)]),_:1})),(((ue=e.positionInfo)==null?void 0:ue.quoteUSD)==0||Number((W=e.positionInfo)==null?void 0:W.remainingTokenUSD)>Number(e.totalAmountUSD))&&(Number(e.fromCoinAmount)>0||Number(e.toCoinAmount)>0)?(a(),c(Ze,{key:4},[e.positionInfo.supportHaedalStake&&e.isOnlyB||e.onlyTokenUSD<=1e4?(a(),c("div",Rs,[e.onlyText&&(e.isOnlyA&&e.fromCoinAmount>0||e.isOnlyB&&e.toCoinAmount>0)?(a(),c("div",Bs,v(e.onlyText),1)):E("",!0),o("div",Ds,[Ls,e.calculateLoading?(a(),Q(B,{key:1,paragraph:!1,active:""})):(a(),c("span",Us,v(Number(e.totalAmountUSD)>0&&Number(e.totalAmountUSD)<.01?"<$0.01":`$${("addCommom"in e?e.addCommom:S(N))(e.totalAmountUSD,2)}`),1))]),o("div",Os,[Ms,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(a(),c("span",Fs,v(e.shareOfPool)+"%",1)):(a(),Q(B,{key:1,paragraph:!1,active:""}))]),e.minimumReceivedLP?(a(),c("div",Vs,[Hs,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(a(),c("span",Es,v(("addCommom"in e?e.addCommom:S(N))(e.minimumReceivedLP))+" "+v(e.needReverse?(ee=e.toCoin)==null?void 0:ee.symbol:(he=e.fromCoin)==null?void 0:he.symbol)+"-"+v(e.needReverse?(ye=e.fromCoin)==null?void 0:ye.symbol:(re=e.toCoin)==null?void 0:re.symbol),1)):(a(),Q(B,{key:1,paragraph:!1,active:""}))])):E("",!0)])):e.positionInfo.supportHaedalStake&&!e.isOnlyB&&e.onlyTokenUSD>1e4||!e.positionInfo.supportHaedalStake&&e.onlyTokenUSD>1e4?(a(),c("div",Ws,Xs)):E("",!0)],64)):E("",!0),e.isShowAddModal?(a(),Q(k,{key:5,"pool-info":e.positionInfo,"from-coin":e.needReverse?e.positionInfo.token_b:e.positionInfo.token_a,"to-coin":e.needReverse?e.positionInfo.token_a:e.positionInfo.token_b,"from-coin-amount":e.needReverse?e.toCoinAmount:e.fromCoinAmount,"to-coin-amount":e.needReverse?e.fromCoinAmount:e.toCoinAmount,"total-amount":e.totalAmountUSD,"share-of-pool":e.shareOfPool,"minimum-received-l-p":e.minimumReceivedLP,"is-only-a":e.isOnlyA,"is-only-b":e.isOnlyB,onOnClose:i[16]||(i[16]=I=>e.isShowAddModal=!1),onToAdd:e.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):E("",!0)])}const Gs=Ve(gs,[["render",zs],["__scopeId","data-v-7937e10e"]]),Ys=Xe({components:{AutoPoolRemoveModal:Jo,AutoPoolV2PoolStatus:ln},setup(){const e=$o(),i=f(()=>e),X=_o(),z=f(()=>X),L=f(()=>k.value.slippage),q=f(()=>z.value.chainName),m=_n(),A=f(()=>m),C=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],u=h(25),t=no(),B=xe(),k=f(()=>B),n=f(()=>k.value.positionInfoObj[t.params.id]),r=f(()=>{var s;return(s=n.value)==null?void 0:s.needReverse}),d=h(),y=h(),P=h(!1),p=h(),$=f(()=>{var s;return(s=n.value)==null?void 0:s.myLiquidity}),U=h(!0),M=f(()=>q.value?Go(q.value):{}),x=h(),le=h(),ne=zo("Sui"),w=h(""),g=h(""),Z=h("--"),te=h(!1),ie=h(!1),ue=h(),W=h(!0),ee=h(),he=to(),ye=f(()=>he),re=f(()=>ye.value.RATES),I=h(!1),D=async()=>{if(U.value||!n.value||n.value.positionLiquidity==0)return;le.value=!1,I.value=!0;const s=n.value.autoPoolPositionInfo.tick_lower_index,R=n.value.autoPoolPositionInfo.tick_upper_index,ae=je.sqrtPriceX64ToTickIndex(new pe(n.value.current_sqrt_price));ae<s&&(r.value?te.value=!0:ie.value=!0),ae>R&&(r.value?ie.value=!0:te.value=!0);let G;if(w.value||g.value){W.value?G=new l(w.value).mul(Math.pow(10,d.value.decimals)).toString():G=new l(g.value).mul(Math.pow(10,y.value.decimals)).toString();let oe,me=W.value;if(b.value||H.value){b.value?Number(w.value)/Number(ve.value):Number(g.value)/Number(ve.value);const J=await ne.calculateRemoveSwapAmount({lowerTick:s,upperTick:R,curSqrtPrice:new pe(n.value.current_sqrt_price),fix_amount_a:me,receiveAmount:G,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(L.value)/100,decimals:b.value?d.value.decimals:y.value.decimals,liquidity:w.value==ve.value||g.value==ve.value?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:G});if(J){if(J.request_id!==G)return;x.value=J.is_exceed,G=new pe(J.swapOutAmount),oe=n.value.current_sqrt_price,ue.value={swap_amount:J.swapInAmount,liquidity:J.liquidity,a2b:!me,route_obj:J.route_obj},me=!me;const _e=n.value.token_a.decimals,ke=n.value.token_b.decimals,Ce=new l(J.swapInAmount).div(new l(Math.pow(10,_e))).toString(),Ke=T(new l(J.swapOutAmountLimit).div(new l(Math.pow(10,ke))).toString(),ke),Te=r.value?n.value.token_b.symbol:n.value.token_a.symbol,Oe=r.value?n.value.token_a.symbol:n.value.token_b.symbol;ee.value=w.value==ve.value||g.value==ve.value?`To withdraw ${N(b.value?w.value:g.value)} ${b.value?Te:Oe},
          ${N(b.value?n.value.amountB:n.value.amountA)} ${b.value?Oe:Te} 
           in the pool will be traded for ${Ce} ${b.value?Te:Oe}`:`To withdraw ${N(b.value?w.value:g.value)} ${b.value?Te:Oe},
          ${N(Ce)} ${b.value?Oe:Te}  in the pool will be traded for ${N(Ke)} ${b.value?Te:Oe}`}else{le.value=!0,ee.value="";return}}else x.value=!1,oe=n.value.current_sqrt_price,G=new pe(G);const{liquidityAmount:V,tokenMaxA:K,tokenMaxB:Y}=M.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:d.value,tokenB:y.value,lowerTick:s,upperTick:R,coinAmount:G,iscoinA:me,roundUp:!1,slippage:Number(L.value)/100,curSqrtPrice:new pe(oe)});if(!b.value&&!H.value&&(W.value?g.value=Number(Y)>0?Y:"":w.value=Number(K)>0?K:""),(b.value||H.value)&&(Number(w.value)>=Number(ve.value)||Number(g.value)>=Number(ve.value))){p.value=n.value.myLiquidity;const J=new l(100);Z.value=new l(n.value.myLiquidity).mul(new l(Math.pow(10,n.value.lpInfo.decimals))).toString(),ge.value=V.toString(),u.value=J.toNumber()}else{const J=qo.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},V.toString()),_e=new l(J).div(new l(Math.pow(10,n.value.lpInfo.decimals))).toString(),ke=new l(_e).div(new l($.value)).mul(100);p.value=new l($.value).mul(ke.div(100)).toString(),Z.value=J,ge.value=V.toString(),u.value=ke.toNumber()}I.value=!1}},ge=h(),ce=f(()=>{var s;return(s=n==null?void 0:n.value)==null?void 0:s.amountA}),de=f(()=>{var s;return(s=n==null?void 0:n.value)==null?void 0:s.amountB}),b=h(!1),H=h(!1),Fe=f(()=>{var me,V,K,Y;const s=((V=re.value[(me=d==null?void 0:d.value)==null?void 0:me.address])==null?void 0:V.price)||0,R=((Y=re.value[(K=y==null?void 0:y.value)==null?void 0:K.address])==null?void 0:Y.price)||0;let ae=w.value!=="--"&&w.value!==""?w.value:0,G=g.value!=="--"&&g.value!==""?g.value:0,oe="0";return s&&R&&(b.value||H.value?oe=new l(b.value?ae:G).mul(new l(b.value?s:R)).toString():oe=new l(ae).mul(new l(s)).add(new l(G).mul(new l(R))).toString()),oe>0&&oe<.01?"<$0.01":`$${N(T(oe,2))}`}),fe=async s=>{var _e,ke,Ce,Ke,Te,Oe,co,Ee,ko,Qe,uo;if(!U.value)return;U.value=!0,le.value=!1,(ke=(_e=n.value)==null?void 0:_e.token_a)==null||ke.decimals,(Ke=(Ce=n.value)==null?void 0:Ce.token_b)==null||Ke.decimals;const R=(Te=n.value)==null?void 0:Te.tick_lower_index,ae=(Oe=n.value)==null?void 0:Oe.tick_upper_index;je.tickIndexToSqrtPriceX64(R),je.tickIndexToSqrtPriceX64(ae);const G=(Ee=(co=n.value)==null?void 0:co.autoPoolPositionInfo)==null?void 0:Ee.tick_lower_index,oe=(Qe=(ko=n.value)==null?void 0:ko.autoPoolPositionInfo)==null?void 0:Qe.tick_upper_index,me=je.sqrtPriceX64ToTickIndex(new pe((uo=n==null?void 0:n.value)==null?void 0:uo.current_sqrt_price));me<G&&(r.value?te.value=!0:ie.value=!0),me>oe&&(r.value?ie.value=!0:te.value=!0);let V="",K,Y,J=W.value;if(b.value||H.value&&!te.value&&!ie.value){if(b.value){const so=new l(ve.value).mul(Math.pow(10,d.value.decimals)).mul(s.value).toString();Y=T(so,0),w.value=T(new l(ve.value).mul(s.value).toString(),d.value.decimals)}if(H.value){const so=new l(ve.value).mul(s.value).mul(Math.pow(10,y.value.decimals)).toString();Y=T(so,0),g.value=T(new l(ve.value).mul(s.value).toString(),y.value.decimals)}const qe=await ne.calculateRemoveSwapAmount({lowerTick:R,upperTick:ae,curSqrtPrice:new pe(n.value.current_sqrt_price),fix_amount_a:J,receiveAmount:Y,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(L.value)/100,decimals:b.value?d.value.decimals:y.value.decimals,liquidity:s.value==1?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:Y});if(qe){if(qe.request_id!==Y)return;x.value=qe.is_exceed,Y=new pe(qe.swapOutAmount),n.value.current_sqrt_price,ue.value={swap_amount:qe.swapInAmount,liquidity:qe.liquidity,route_obj:qe.route_obj,a2b:!J},J=!J;const so=n.value.token_a.decimals,Mo=n.value.token_b.decimals,un=new l(qe.swapInAmount).div(new l(Math.pow(10,so))).toString(),Fo=T(new l(qe.swapOutAmountLimit).div(new l(Math.pow(10,Mo))).toString(),Mo),ro=r.value?n.value.token_b.symbol:n.value.token_a.symbol,vo=r.value?n.value.token_a.symbol:n.value.token_b.symbol;ee.value=s.value==1?`To withdraw ${N(b.value?w.value:g.value)} ${b.value?ro:vo},
          ${N(b.value?n.value.amountB:n.value.amountA)} ${b.value?vo:ro}  in the pool will be traded for ${N(Fo)} ${b.value?ro:vo}`:`To withdraw ${N(b.value?w.value:g.value)} ${b.value?ro:vo},
          ${N(un)} ${b.value?vo:ro}  in the pool will be traded for ${N(Fo)} ${b.value?ro:vo}`,V=qe.liquidity}else n.value.current_sqrt_price,Y=new pe(Y),ee.value="",le.value=!0;Z.value=new l(n.value.myLiquidity).mul(new l(s.value)).toString(),p.value=new l(Z.value),ge.value=V}else{x.value=!1;const qe=new l(ce.value).mul(Math.pow(10,d.value.decimals)).mul(s.value).toString();Y=T(qe,0),w.value=T(new l(ce.value).mul(s.value).toString(),d.value.decimals);const so=new l(de.value).mul(s.value).mul(Math.pow(10,y.value.decimals)).toString();Y=T(so,0),g.value=T(new l(de.value).mul(s.value).toString(),y.value.decimals),n.value.current_sqrt_price,Y=new pe(Y),s.value!==1?K=new l(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(s.value).toString():K=new l(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),p.value=new l(K).div(Math.pow(10,n.value.lpInfo.decimals)),V=qo.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},K),Z.value=T(K,0),ge.value=T(V,0)}};$e(u,fo((s,R)=>{s!==R&&(Number(s)>100?u.value=100:s&&n.value?(u.value=s,fe({value:u.value/100})):(w.value="",g.value=""))},300)),$e(()=>w.value,fo((s,R)=>{s?D():!b.value&&!H.value&&(g.value="",u.value=0)},500),{immediate:!0}),$e(()=>g.value,fo((s,R)=>{s?D():!b.value&&!H.value&&(w.value="",u.value=0)},500),{immediate:!0});const De=Lo(),{setIsShowSuccess:Le,setIsShowRejected:we,setIsShowWaiting:Se,setTransactionDesc:Ne,setTransactionTxid:He,setPositiomNum:po,setTransactionDescText:io}=X,oo=h(!1),{t:Ae}=Ro(),lo=async()=>{var _e,ke,Ce,Ke,Te,Oe,co;oo.value=!0,He("");const s=Number(w.value)>0?`${N(w.value,d.value.decimals)} ${d.value.symbol}`:"",R=Number(g.value)>0?`${N(g.value,y.value.decimals)} ${y.value.symbol}`:"";Ne(Ae("tips.removeLiquidiyText",{from:r.value?R:s,and:Number(w.value)>0&&Number(g.value)>0?"and":"",to:r.value?s:R})),Se(!0);const ae=Ae("modal.removeLiquidityText2");io(ae);const G=n.value.autoPoolPositionInfo.tick_lower_index,oe=n.value.autoPoolPositionInfo.tick_upper_index,me=je.tickIndexToSqrtPriceX64(G),V=je.tickIndexToSqrtPriceX64(oe),K=(ke=(_e=n==null?void 0:n.value)==null?void 0:_e.rewarderInfo)==null?void 0:ke.map(Ee=>Ee.coinAddress);let Y;W.value?Y=new l(w.value).mul(Math.pow(10,d.value.decimals)).toString():Y=new l(g.value).mul(Math.pow(10,y.value.decimals)).toString();const J={lowerSqrtPrice:me,upperSqrtPrice:V,lpTokenAmount:Z.value,liquidity:ge.value,curSqrtPrice:new pe(((Ke=(Ce=n==null?void 0:n.value)==null?void 0:Ce.object)==null?void 0:Ke.current_sqrt_price)||((Te=n==null?void 0:n.value)==null?void 0:Te.current_sqrt_price)),slippage:Number(L.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coinTypeA,coinTypeB:n.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:K,swapParams:ue.value,fix_amount_a:W.value,isOnlyA:!te.value&&!ie.value?b.value:!1,isOnlyB:!ie.value&&!te.value?H.value:!1,lowerTick:G,upperTick:oe,receiveAmount:Y,sliderVal:u.value,positionInfo:n.value,maxLiquidity:n.value.positionLiquidity,farming_pool:n.value.autoPoolPositionInfo.pool_id};try{const Ee=await ne.remove(J),ko=await M.value.signAndExecuteTransactionBlock(i.value.currentWallet,Ee);let Qe=M.value.handleTx(ko);if(console.log("0331###remove###tx####",Qe),Qe&&Qe.hash){He(Qe.hash),Se(!1),Le(!0);const uo={title:Ae("common.removeLiquidity"),desc:"",hash:Qe.hash,descTransactions:`Remove ${s} ${Number(w.value)>0&&Number(g.value)>0?"and":""} ${R} from the pool`,sender:i.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${w.value} ${(Oe=d.value)==null?void 0:Oe.symbol} and ${g.value} ${(co=y.value)==null?void 0:co.symbol}`};uo.res=Qe.res,M.value.showTransitionPending(uo),await M.value.watchTransaction(uo)&&(w.value="",g.value="",p.value="",u.value=0,setTimeout(()=>{B.updatePositionItem(n.value.id),M.value.getAccount(i.value.address)},1e3),Number(u.value)==100&&t.name=="auto-pool-detail"&&De.push("/vaults"))}else Se(!1),we(!0);oo.value=!1}catch(Ee){console.log("Remove error",Ee),oo.value=!1,Se(!1),we(!0)}};$e(()=>n.value,(s,R)=>{s&&!Je(s)&&(d.value=s==null?void 0:s.token_a,y.value=s==null?void 0:s.token_b,(!R||R&&R.address!==s.address)&&(u.value=u.value>0?u.value:25,fe({value:u.value/100})),R&&R.current_sqrt_price!==s.current_sqrt_price&&(U.value?fe({value:u.value/100}):D()))},{immediate:!0});const Ye=f(()=>{if(n.value.positionLiquidity==0)return"Insufficient LP Amount";const s=Number(p.value)>Number($.value);return!w.value&&!g.value||!p.value||p.value<=0||!w.value&&b.value||!g.value&&H.value?Ae("button.enterAmount"):s?"Invalid Amount":x.value?Ae("button.insufficientLiquidity"):le.value?Ae("button.enterAmount"):b.value&&Number(w.value)>Number(ve.value)||H.value&&Number(g.value)>Number(ve.value)?"Invalid Amount":Ae("button.remove")}),Ue=f(()=>{var R;if(((R=n==null?void 0:n.value)==null?void 0:R.positionLiquidity)==0)return!0;const s=Number(p.value)>Number($.value);return!!(!w.value&&!g.value||Number(w.value)<=0&&b.value||Number(g.value)<=0&&H.value||!p.value||p.value<=0||s||x.value||be.value!=="STATUS_RUNNING"||le.value||b.value&&Number(w.value)>Number(ve.value)||H.value&&Number(g.value)>Number(ve.value))}),bo=s=>(s==null?void 0:s.logoURI)||(s==null?void 0:s.logo_url)||mo("/image/coins/sui-unknown.png"),Ao=s=>{w.value="",g.value="",U.value=!0,ee.value="",s=="only-a"?(b.value=!b.value,H.value=!1,W.value=!0):(H.value=!H.value,b.value=!1,W.value=!1)},Co=s=>{U.value=!0,u.value=100,s==="fromCoin"?W.value=!0:W.value=!1},Po=s=>{U.value=!0,u.value=50,s==="fromCoin"?W.value=!0:W.value=!1},ve=h(),_=async()=>{const s=n.value.token_a.decimals,R=n.value.token_b.decimals,ae=new l(ce.value).mul(new l(Math.pow(10,s))).toNumber(),G=new l(de.value).mul(new l(Math.pow(10,R))).toNumber(),oe=b.value?G:ae,me=b.value?y.value.address===n.value.token_a.address:d.value.address===n.value.token_a.address;try{const V=await A.value.swapRouterContract.getSwapRouter(b.value?y:d,b.value?d:y,oe,!0,Number(L.value)/100,"",void 0,[{pool_id:n.value.address,tick_lower:n.value.autoPoolPositionInfo.tick_lower_index,tick_upper:n.value.autoPoolPositionInfo.tick_upper_index,delta_liquidity:Number(n.value.positionLiquidity),is_increase:!1}]),K=new l(V.amountOut);ve.value=K.sub(K.mul(Number(L.value)/100)).add(new l(b.value?ce.value:de.value)).toString()}catch{if(b.value||H.value){let K=await M.value.preSwap({pool:{address:n.value.address,coinA:n.value.token_a,coinB:n.value.token_b},a2b:me,byAmountIn:!0,amount:oe});const Y=new l(K.estimatedAmountOut);ve.value=Y.sub(Y.mul(Number(L.value)/100)).add(new l(b.value?ce.value:de.value)).toString(),b.value?w.value=T(new l(ve.value).mul(u.value/100).toString(),d.value.decimals):g.value=T(new l(ve.value).mul(u.value/100).toString(),y.value.decimals),fe({value:u.value/100})}}fe({value:u.value/100})};$e(()=>[b.value,H.value,ce.value,de.value],([s,R])=>{s||R?_():fe({value:u.value/100})},{immediate:!0});const j=s=>`${s}%`,be=f(()=>k.value.currentAutoPoolStatus),F=h(),Ie=()=>{F.value=window.setInterval(()=>{(w.value||g.value)&&!U.value?D():fe({value:u.value/100})},2e4)};return go(()=>{Ie()}),Do(()=>{window.clearInterval(F.value)}),{removeLiquidityBtnText:Ye,removeLiquidityBtnDisabled:Ue,wallet:i,ratioArr:C,positionInfo:n,isShowRemoveModal:P,needReverse:r,fromCoin:d,toCoin:y,lpAmount:p,lpBalance:$,sliderVal:u,sFixD:T,isSlider:U,fromCoinAmount:w,toCoinAmount:g,setPercent:fe,toRemove:lo,addCommom:N,getCoinIcon:bo,isOnlyA:b,isOnlyB:H,onlyToken:Ao,fixedFromCoin:W,maxBtnSelect:Co,halfBtnSelect:Po,fromCoinBlance:ce,toCoinBlance:de,showFromCoinLock:te,showToCoinLock:ie,removeText:ee,onlyTokenBalance:ve,totalWithdraw:Fe,formatter:j,currentAutoPoolStatus:be,calculateLoading:I}}});const So=e=>(ze("data-v-2e8e80ba"),e=e(),Ge(),e),Ks={class:"auto-pool-add"},Qs={class:"auto-pool-add-content"},Zs={class:"liquidity-action-tab"},Js=So(()=>o("div",{class:"remove tab-active"},"Remove",-1)),xs={key:0,class:"card-item"},ea={key:1,class:"card-item"},oa={class:"remove-ratio"},na={class:"remove-ratio-select"},ta={key:0,class:"ratio"},ia={key:1,class:"ratio"},sa={class:"ratio-list"},aa=["onClick"],la=So(()=>o("span",null,"Pool Closed",-1)),ua={key:4,class:"remove-info"},ra={key:0,class:"remove-text total-amount"},da={class:"total-amount"},va=So(()=>o("span",null,"Total Withdraw",-1)),ma={key:0},pa={class:"total-amount"},ca=So(()=>o("span",null,"LP Burn Amount",-1)),fa={key:0};function ya(e,i,X,z,L,q){var n,r,d,y,P,p;const m=Ko,A=Qo,C=Wo,u=ao("AutoPoolV2PoolStatus"),t=Bo,B=Xo,k=Jo;return a(),c("div",Ks,[o("div",Qs,[o("div",Zs,[o("div",{class:"increase",onClick:i[0]||(i[0]=jo($=>e.$emit("changeCurrentTab"),["stop"]))},"Add"),Js]),o("div",{class:Pe(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(a(),c("div",xs,[O(m,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":i[1]||(i[1]=$=>e.fromCoinAmount=$),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.isOnlyA?e.onlyTokenBalance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:i[2]||(i[2]=$=>e.maxBtnSelect("fromCoin")),onOnHalf:i[3]||(i[3]=$=>e.halfBtnSelect("fromCoin")),onOnInput:i[4]||(i[4]=$=>{e.isSlider=!1,e.fromCoinAmount=$}),onOnFocus:i[5]||(i[5]=()=>{e.isSlider=!1,e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(a(),Q(A,{key:0})):E("",!0)])):E("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(a(),c("div",ea,[O(m,{modelValue:e.toCoinAmount,"onUpdate:modelValue":i[6]||(i[6]=$=>e.toCoinAmount=$),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.isOnlyB?e.onlyTokenBalance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:i[7]||(i[7]=$=>e.maxBtnSelect("toCoin")),onOnHalf:i[8]||(i[8]=$=>e.halfBtnSelect("toCoin")),onOnInput:i[9]||(i[9]=$=>{e.isSlider=!1,e.toCoinAmount=$}),onOnFocus:i[10]||(i[10]=()=>{e.isSlider=!1,e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(a(),Q(A,{key:0})):E("",!0)])):E("",!0)],2),o("div",oa,[o("div",na,[Number(e.lpBalance)>=Number(e.lpAmount)?(a(),c("div",ta,v(e.sliderVal>0&&Number(("sFixD"in e?e.sFixD:S(T))(e.sliderVal,2))<.01?"<0.01":("sFixD"in e?e.sFixD:S(T))(e.sliderVal,2))+"% ",1)):(a(),c("div",ia,"--")),o("div",sa,[(a(!0),c(Ze,null,ho(e.ratioArr,($,U)=>(a(),c("div",{key:U,class:Pe(["ratio-item",e.sliderVal==$.value?"ratio-item-active":""]),onClick:()=>{e.isSlider=!0,e.sliderVal=$.value}},v($.name),11,aa))),128))])]),O(C,{value:e.sliderVal,"onUpdate:value":i[11]||(i[11]=$=>e.sliderVal=$),"tip-formatter":e.formatter,onChange:i[12]||(i[12]=$=>e.isSlider=!0)},null,8,["value","tip-formatter"])])]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(a(),Q(u,{key:0})):E("",!0),(n=e.positionInfo)!=null&&n.is_pause?(a(),Q(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:se(()=>[la]),_:1})):e.wallet&&e.wallet.address?(a(),Q(t,{key:2,class:"big-btn liquidity-btn",disabled:e.removeLiquidityBtnDisabled,onClick:i[13]||(i[13]=$=>e.toRemove())},{default:se(()=>[o("span",null,v(e.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(a(),Q(t,{key:3,class:"big-btn liquidity-btn",onClick:i[14]||(i[14]=$=>e.wallet.setIsShowWalletModal(!0))},{default:se(()=>[o("span",null,v(e.$t("button.connectWallet")),1)]),_:1})),e.removeLiquidityBtnDisabled?E("",!0):(a(),c("div",ua,[e.removeText&&(e.isOnlyA&&Number(e.fromCoinAmount)>0||e.isOnlyB&&Number(e.toCoinAmount)>0)?(a(),c("div",ra,v(e.removeText),1)):E("",!0),o("div",da,[va,e.calculateLoading?(a(),Q(B,{key:1,paragraph:!1,active:""})):(a(),c("span",ma,v(e.totalWithdraw),1))]),o("div",pa,[ca,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(a(),c("span",fa,v(("addCommom"in e?e.addCommom:S(N))(("sFixD"in e?e.sFixD:S(T))(e.lpAmount,(r=e.positionInfo)==null?void 0:r.decimals)))+" "+v(e.needReverse?(d=e.toCoin)==null?void 0:d.symbol:(y=e.fromCoin)==null?void 0:y.symbol)+"-"+v(e.needReverse?(P=e.fromCoin)==null?void 0:P.symbol:(p=e.toCoin)==null?void 0:p.symbol),1)):(a(),Q(B,{key:1,paragraph:!1,active:""}))])])),e.isShowRemoveModal?(a(),Q(k,{key:5,"pool-info":e.positionInfo,"from-coin":e.positionInfo.token_a,"to-coin":e.positionInfo.token_b,onOnClose:i[15]||(i[15]=$=>e.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):E("",!0)])}const ba=Ve(Ys,[["render",ya],["__scopeId","data-v-2e8e80ba"]]),ka=Xe({components:{AutoPoolV2Info:en,AutoPoolV2PositionRange:on,AutoPoolV2PoolComposition:tn,AutoPoolV2PoolLiquidity:sn,AutoPoolV2PoolAdd:Gs,AutoPoolV2PoolRemove:ba},setup(){const e=xe(),i=to(),X=f(()=>i),z=_o(),L=f(()=>z),q=f(()=>e),m=no(),A=h();$e(()=>[q.value.positionInfoObj,m.params.id],([n,r])=>{n&&!Je(n)&&r&&(A.value=n[r],console.log(A.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const C=async()=>{console.log("重新获取数据"),e.getAutoPoolAPY(),e.getVault(m.params.id,"refresh")},u=h();$e(()=>m.query.action,n=>{n&&(u.value=n)},{immediate:!0}),go(()=>{}),$e(()=>[X.value.poolConfigList,q.value.autoPoolList],([n,r])=>{n&&n.length>0&&r&&r.length==0&&(e.getAutoPoolList(),e.getVault(m.params.id,!1))},{immediate:!0}),f(()=>L.value.chainName),Lo();const t=$o(),B=f(()=>t);$e(()=>B.value.address,n=>{n||e.logout()},{immediate:!0});const k=f(()=>q.value.autoPoolLoading);return{clickRefresh:C,currentTab:u,positionInfo:A,autoPoolLoading:k}}});const ha={class:"auto-pool-detail-v2"},ga={class:"detail-top"},_a={class:"detail-bottom pc-detail"},$a={class:"detail-bottom-left"},wa={class:"detail-bottom-right"},Ia={class:"h5-detail"},Sa={key:0,class:"loading-global"};function Aa(e,i,X,z,L,q){const m=Vn,A=en,C=on,u=tn,t=sn,B=ao("AutoPoolV2PoolAdd"),k=ao("AutoPoolV2PoolRemove"),n=yn;return a(),c("div",ha,[o("div",ga,[O(m,{"pool-info":e.positionInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"]),O(A)]),o("div",_a,[o("div",$a,[O(C),O(u),O(t)]),o("div",wa,[e.currentTab=="deposit"?(a(),Q(B,{key:0,onChangeCurrentTab:i[0]||(i[0]=r=>e.currentTab="remove")})):(a(),Q(k,{key:1,onChangeCurrentTab:i[1]||(i[1]=r=>e.currentTab="deposit")}))])]),o("div",Ia,[e.currentTab=="deposit"?(a(),Q(B,{key:0,onChangeCurrentTab:i[2]||(i[2]=r=>e.currentTab="remove")})):(a(),Q(k,{key:1,onChangeCurrentTab:i[3]||(i[3]=r=>e.currentTab="deposit")})),O(C),O(u),O(t)]),e.autoPoolLoading?(a(),c("div",Sa,[O(n)])):E("",!0)])}const Ka=Ve(ka,[["render",Aa],["__scopeId","data-v-41f3a71b"]]);export{Ka as default};
