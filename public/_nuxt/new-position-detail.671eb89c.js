import{_ as No}from"./new-position-title.e31b3462.js";import{_ as co}from"./token-warning.25c15a3a.js";import{_ as Ro}from"./status-block.ee60516f.js";import{u as Ge,e as Zo,n as Ko,d as ke,a as Q,c as me,s as Me,b as lo,k as Se}from"./sha256.de7acfa8.js";import{s as so,m as Vo,l as xo,b as en,a as on}from"./transform.c672907f.js";import{D as h}from"./decimal.0bdeb344.js";import{a as to,u as io,g as bo,b as Oe,p as Io,r as Oo,s as qo,T as Co,C as nn,e as tn}from"./pool.f9585ea2.js";import{a as Je,r as U,l as y,H as Lo,q as we,e as Qe,o as w,f as P,t as Pe,N as Bo,h as n,p as mo,k as vo,m as fo,s as wo,i as le,u as G,v as F,j as ce,x as de,y as yo,a4 as an,b as ro,C as Xe,L as sn,a7 as $o,O as So,w as Le,F as Ve,E as oo,B as uo,M as ln,A as ko,c as qe,D as rn,G as un,z as Mo,P as dn,$ as cn,K as mn,S as vn}from"./entry.ad32dc49.js";import{i as no}from"./import-icon.de3e6c66.js";import"./index.31084607.js";import{_ as po}from"./assets-card.e525446c.js";import{_ as fn}from"./coin-lock.bce36a9e.js";import{a as pn}from"./new-add-or-create.65e8700e.js";import{_ as hn,a as bn}from"./icon-Add-Liquidity_2x.0acb06cb.js";/* empty css              *//* empty css              */import{u as Uo}from"./notifi.6755daed.js";import{_ as kn}from"./apr-tips.15fae95c.js";import{u as jo}from"./farms.42704ce8.js";/* empty css              *//* empty css              */import"./back.343ffe00.js";import"./swap-setting.5405273f.js";/* empty css              */import"./icon-error_2x.c0a55c63.js";import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.d1f48e3b.js";import"./useWhale.39933463.js";import"./icon_rewards_2x.2d4d63c1.js";const go=Math.PI,_o=2*go,Ke=1e-6,gn=_o-Ke;function Eo(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=arguments[t]+e[t]}function _n(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Eo;const i=10**t;return function(a){this._+=a[0];for(let O=1,k=a.length;O<k;++O)this._+=Math.round(arguments[O]*i)/i+a[O]}}class wn{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Eo:_n(t)}moveTo(t,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,i){this._append`L${this._x1=+t},${this._y1=+i}`}quadraticCurveTo(t,i,a,O){this._append`Q${+t},${+i},${this._x1=+a},${this._y1=+O}`}bezierCurveTo(t,i,a,O,k,R){this._append`C${+t},${+i},${+a},${+O},${this._x1=+k},${this._y1=+R}`}arcTo(t,i,a,O,k){if(t=+t,i=+i,a=+a,O=+O,k=+k,k<0)throw new Error(`negative radius: ${k}`);let R=this._x1,v=this._y1,o=a-t,l=O-i,g=R-t,r=v-i,b=g*g+r*r;if(this._x1===null)this._append`M${this._x1=t},${this._y1=i}`;else if(b>Ke)if(!(Math.abs(r*o-l*g)>Ke)||!k)this._append`L${this._x1=t},${this._y1=i}`;else{let Y=a-R,se=O-v,ie=o*o+l*l,V=Y*Y+se*se,u=Math.sqrt(ie),p=Math.sqrt(b),$=k*Math.tan((go-Math.acos((ie+b-V)/(2*u*p)))/2),c=$/p,T=$/u;Math.abs(c-1)>Ke&&this._append`L${t+c*g},${i+c*r}`,this._append`A${k},${k},0,0,${+(r*Y>g*se)},${this._x1=t+T*o},${this._y1=i+T*l}`}}arc(t,i,a,O,k,R){if(t=+t,i=+i,a=+a,R=!!R,a<0)throw new Error(`negative radius: ${a}`);let v=a*Math.cos(O),o=a*Math.sin(O),l=t+v,g=i+o,r=1^R,b=R?O-k:k-O;this._x1===null?this._append`M${l},${g}`:(Math.abs(this._x1-l)>Ke||Math.abs(this._y1-g)>Ke)&&this._append`L${l},${g}`,a&&(b<0&&(b=b%_o+_o),b>gn?this._append`A${a},${a},0,1,${r},${t-v},${i-o}A${a},${a},0,1,${r},${this._x1=l},${this._y1=g}`:b>Ke&&this._append`A${a},${a},0,${+(b>=go)},${r},${this._x1=t+a*Math.cos(k)},${this._y1=i+a*Math.sin(k)}`)}rect(t,i,a,O){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}h${a=+a}v${+O}h${-a}Z`}toString(){return this._}}function eo(e){return function(){return e}}function yn(e){let t=3;return e.digits=function(i){if(!arguments.length)return t;if(i==null)t=null;else{const a=Math.floor(i);if(!(a>=0))throw new RangeError(`invalid digits: ${i}`);t=a}return e},()=>new wn(t)}function An(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Do(e){this._context=e}Do.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function In(e){return new Do(e)}function Cn(e){return e[0]}function $n(e){return e[1]}function Sn(e,t){var i=eo(!0),a=null,O=In,k=null,R=yn(v);e=typeof e=="function"?e:e===void 0?Cn:eo(e),t=typeof t=="function"?t:t===void 0?$n:eo(t);function v(o){var l,g=(o=An(o)).length,r,b=!1,Y;for(a==null&&(k=O(Y=R())),l=0;l<=g;++l)!(l<g&&i(r=o[l],l,o))===b&&((b=!b)?k.lineStart():k.lineEnd()),b&&k.point(+e(r,l,o),+t(r,l,o));if(Y)return k=null,Y+""||null}return v.x=function(o){return arguments.length?(e=typeof o=="function"?o:eo(+o),v):e},v.y=function(o){return arguments.length?(t=typeof o=="function"?o:eo(+o),v):t},v.defined=function(o){return arguments.length?(i=typeof o=="function"?o:eo(!!o),v):i},v.curve=function(o){return arguments.length?(O=o,a!=null&&(k=O(a)),v):O},v.context=function(o){return arguments.length?(o==null?a=k=null:k=O(a=o),v):a},v}function Po(){}function Fo(e){this._context=e}Fo.prototype={areaStart:Po,areaEnd:Po,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Pn(e){return new Fo(e)}function To(e,t,i){const a=new h(10).pow(t-i);return new h(1.0001).pow(e).mul(a)}const Tn=Je({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""}},setup(e,t){const i=U(1),a=U(""),O=U(""),k=y(()=>{var c,T,f;return r.sqrtPriceX64ToPrice((c=e.poolInfo)==null?void 0:c.current_sqrt_price,(T=e.poolInfo)==null?void 0:T.coinA.decimals,(f=e.poolInfo)==null?void 0:f.coinB.decimals).toString()}),R=y(()=>{let c=0;return e.direction?c=(Number(e.minPrice)/Number(k.value)-1)*100:c=(Number(e.minPrice)/Number(1/Number(k.value))-1)*100,c=c>0&&c<.1?.1:c,c=c<0&&c>-.1?-.1:c,c}),v=y(()=>{let c=0;return e.direction?c=(Number(e.maxPrice)/Number(k.value)-1)*100:c=(Number(e.maxPrice)/Number(1/Number(k.value))-1)*100,c=c>0&&c<.1?.1:c,c=c<0&&c>-.1?-.1:c,c}),o=Ge(),l=y(()=>o),g=y(()=>l.value.chainName?to(l.value.chainName):{}),{TickMath:r,getNearestTickByTick:b}=g.value,Y=()=>{const c=i.value/2;i.value=c,V(e.poolInfo,c)},se=()=>{const c=i.value*2;i.value=c,V(e.poolInfo,c)},ie=(c=[])=>{let T=6;const f=Math.abs(Number(c[0])-Number(c[c.length-1]));return f>=6?T=0:f>=1?T=1:f>=.1?T=2:f>=.01?T=3:f>=.001?T=4:f>=1e-4?T=5:f>=1e-5?T=6:f>=1e-6?T=7:f>=1e-7&&(T=8),T},V=(c,T=1)=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-chart.vue:189 ~ dataProcessing ~ zooms:",T),c&&c.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const f=Number(e.poolInfo.current_tick_index);let _=f+100*T,s=f-100*T,ae,K;if(e.maxPrice==="âˆž")K=g.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?K=r.priceToTickIndex(new h(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):K=r.priceToTickIndex(new h(1).div(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{K=443636}if(e.minPrice==="0")ae=g.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?ae=r.priceToTickIndex(new h(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):ae=r.priceToTickIndex(new h(1).div(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{ae=-443636}let ee=0;if(e.currentPriceTab!=="full range"){if(f>=ae&&f<=K){const B=f-ae,he=K-f;ee=Math.max(Math.abs(B),Math.abs(he))}else f<ae?ee=Math.abs(K-f):ee=Math.abs(f-ae);_=f+ee+100*T,s=f-ee-100*T}else{const B=(Math.abs(f)>5e3,2e4);_=f+B*T,s=f-B*T}s<-443636&&(s=-443636),_>443636&&(_=443636);const H=new h(c.liquidity).div(Math.pow(10,8)).toString(),C=e.tickList,M=[],N=[];let z={};for(let B=0;B<C.length;B++){if(z=C[B],z.index<=f&&z.index>=s){if(M.length<1&&B!==0){const he=C[B-1];M.unshift({...he,index:s})}M.unshift(z)}else if(z.index>f&&z.index<=_&&(N.push(z),M.length<1&&B!==0)){const he=C[B-1];M.push({...he,index:s})}if(z.index>_){const he=C[B];if(N.push({...he,index:_}),M.length<1&&B!==0){const _e=C[B-1];M.push({..._e,index:s})}break}}let x="0";for(let B=M.length-1;B>=0;B--)x=new h(x).plus(new h(M[B].liquidityNet.toString()).div(Math.pow(10,8))).toString(),M[B].liquityAmount=x;let J=H;for(let B=0;B<N.length;B++)J=new h(J).plus(new h(N[B].liquidityNet.toString()).div(Math.pow(10,8))).toString(),N[B].liquityAmount=J;let ne=[];const Z=C&&C.length>0?{index:f,liquityAmount:Number(H)}:{index:f,liquityAmount:0};(M.length>0||N.length>0)&&(ne=[...M.reverse(),Z,...N],e.direction||(ne=ne.reverse()));const pe=[];C.forEach(B=>{pe.push({...B,liquidityGross:B.liquidityGross.toString(),liquidityNet:B.liquidityNet.toString()})});for(let B=i.value;B<20;B++)if(_-s){i.value=i.value*4,V(e.poolInfo,i.value);break}console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-chart.vue:384 ~ dataProcessing ~ tickMin, tickMax, minPriceTick, maxPriceTick:",s,_,ae,K,f),p(ne,s,_,ae,K,f)}};let u=U(!0);Lo(()=>{document.body.clientWidth<750?u.value=!1:u.value=!0,window.onresize=()=>{document.body.clientWidth<750?u.value=!1:u.value=!0,V(e.poolInfo,i.value)}});const p=(c,T,f,_,s,ae)=>{let K,ee;e.direction?(K=e.before7dContractPriceLowest?r.priceToTickIndex(new h(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",ee=e.before7dContractPriceHighest?r.priceToTickIndex(new h(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(K=e.before7dContractPriceLowest?r.priceToTickIndex(new h(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",ee=e.before7dContractPriceHighest?r.priceToTickIndex(new h(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const H={top:30,right:35,bottom:20,left:55};let C,M;u.value,C=340-H.left-H.right,M=205-H.top-H.bottom;const N=f-T,z=parseInt(String(N/4));let x=[T+z/4,T+z,T+2*z,f-z,f-z/4];const J=T,ne=f,Z=C/(ne-J);e.currentPriceTab==="full range"&&(x=[T,T+2*z,f]);const pe=x.map(q=>e.direction?To(q,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new h(1).div(To(q,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString());ie(pe),so("#chart").selectAll("*").remove();const B=so("#chart").attr("width",C+H.left+H.right).attr("height",M+H.top+H.bottom).append("g").attr("transform",`translate(${H.left},${H.right})`),he=Vo(c,function(q){return Number(Math.abs(q.liquityAmount))})||0,_e=xo().range([0,M]).domain([he,0]);en().rangeRound([0,C]).padding(.1);const Be=B.append("g").attr("id","barsBox").selectAll("rect").data(c).enter().append("rect");l.value.theme=="default"?Be.attr("x",function(q,L){return L===0?0:e.direction?Math.abs(q.index-J)*Z:Math.abs(ne-q.index)*Z}).attr("y",function(q,L){return e.direction?L===c.length-1?0:_e(q.liquityAmount):L===c.length-1?0:_e(c[L+1].liquityAmount)}).attr("width",function(q,L){return L===0&&c.length===1&&q.liquityAmount>0?C:(e.direction,L!==c.length-1?Math.abs(c[L+1].index-q.index)*Z:0)}).attr("height",function(q,L){return L===0&&c.length===1&&q.liquityAmount>0?M:e.direction?L===c.length-1?0:M-_e(q.liquityAmount):L===c.length-1?0:M-_e(c[L+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):Be.attr("x",function(q,L){return L===0?0:e.direction?Math.abs(q.index-J)*Z:Math.abs(ne-q.index)*Z}).attr("y",function(q,L){return e.direction?L===c.length-1?0:_e(Math.abs(q.liquityAmount)):L===c.length-1?0:_e(Math.abs(c[L+1].liquityAmount))}).attr("width",function(q,L){return L===0&&c.length===1&&q.liquityAmount>0?C:(e.direction,L!==c.length-1?Math.abs(c[L+1].index-q.index)*Z:0)}).attr("height",function(q,L){if(L===0&&c.length===1&&q.liquityAmount>0)return M;if(e.direction)return L===c.length-1?0:Number(q.liquityAmount)?M-_e(Math.abs(q.liquityAmount)):0;{if(L===c.length-1)return 0;const ue=M-_e(Math.abs(c[L+1].liquityAmount));return Number(c[L+1].liquityAmount)?ue:0}}).attr("fill","#407497").attr("class","bars").attr("stroke-width",1).attr("stroke","#407497");const Ce=B.append("g");Ce.append("line").attr("x1",0).attr("y1",155).attr("x2",C).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D"),Ce.append("g");let d=0;e.direction?d=Math.abs(ae-J)*Z:d=Math.abs(ae-ne)*Z,(l.value.theme=="default"?B.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):B.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+d+", 0)"),so("#triangle").attr("width",8).attr("height",4);let A=[[0,0],[4,4],[8,0]],E=Sn().x(function(q){return q[0]}).y(function(q){return q[1]}).curve(Pn);const D=d-4;B.append("path").attr("d",E(A)).style("fill",l.value.theme=="default"?"#68FFD8":"#76C8FF").attr("transform","translate("+D+", 0)");let j,X,oe,te;e.direction?(j=_<J?-100:parseInt(String(Math.abs(_-J)*Z)),X=s<J?-100:parseInt(String(Math.abs(s-J)*Z)),oe=K<J?-100:Math.abs(K-J)*Z,te=ee<J?-100:Math.abs(ee-J)*Z):(X=_<J?-100:Math.abs(ne-_)*Z,j=s<J?-100:Math.abs(ne-s)*Z,te=K<J?-100:Math.abs(ne-K)*Z,oe=ee<J?-100:Math.abs(ne-ee)*Z),e.minPrice==="0"&&(j=0),e.maxPrice==="âˆž"&&(X=C),u.value?a.value=C-j+60+"px":a.value=C-j+52+"px",O.value=X+74+"px",K&&oe<C&&B.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+oe+", 0)"),ee&&te<C&&B.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+te+", 0)");const ve=on().extent([[0,0],[C,M]]).handleSize(30).on("end",Ae);B.append("g").attr("class","brush").call(ve).call(ve.move,[j,X]);function Ae(q){if(!q.sourceEvent||!q.selection)return;u.value?a.value=C-q.selection[0]+60+"px":a.value=C-q.selection[0]+52+"px",O.value=q.selection[1]+74+"px";let L,ue,ge=0,I=0;e.direction?(ge=b(parseInt(String(q.selection[0]/Z+J)),Number(e.poolInfo.tickSpacing)),L=r.tickIndexToPrice(ge,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),I=b(parseInt(String(q.selection[1]/Z+J)),Number(e.poolInfo.tickSpacing)),ue=r.tickIndexToPrice(I,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()):(I=b(ne-q.selection[0]/Z,Number(e.poolInfo.tickSpacing)),L=1/r.tickIndexToPrice(I,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),ge=b(ne-q.selection[1]/Z,Number(e.poolInfo.tickSpacing)),ue=1/r.tickIndexToPrice(ge,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()),t.emit("onChangeMinPrice",String(ke(String(L),6))),t.emit("onChangeMaxPrice",String(ke(String(ue),6)))}l.value.theme=="default"?so(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):so(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","rgba(255,255,255,0.7)")};U(""),we(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab,e.tickList],([c,T,f,_,s])=>{c&&T&&f&&_&&s&&s.length>0&&V(c,i.value)},{immediate:!0});const $=U(!0);return we(()=>e.chartLoading,(c,T)=>{c!==T&&($.value=c)},{immediate:!0,deep:!0}),{store:l,loading:$,zoomOut:Y,zoomIn:se,rangeSizeLower:R,rangeSizeUpper:v,rangeSizeLowerPosition:a,rangeSizeUpperPosition:O,decimalFormat:Zo,numberformat:Ko}}});const Nn=e=>(mo("data-v-9b92ecfc"),e=e(),vo(),e),Rn={class:"chart-box"},On={class:"chart"},qn=Nn(()=>n("svg",{id:"chart"},null,-1)),Ln=[qn];function Bn(e,t,i,a,O,k){return w(),P("div",Rn,[Pe(n("div",On,Ln,512),[[Bo,!e.loading]])])}const Wo=Qe(Tn,[["render",Bn],["__scopeId","data-v-9b92ecfc"]]),Mn=Je({components:{StatusBlock:Ro,NewPositionChart:Wo,TokenWarning:co},setup(e){const t=U(),i=U(),a=y(()=>{var f,_;return(_=(f=r.value)==null?void 0:f.poolInfo)==null?void 0:_.needReverse}),O=Ge(),k=y(()=>O),R=y(()=>k.value.currentExplorer),v=y(()=>k.value.theme),o=y(()=>k.value.chainName),l=io(),g=y(()=>l),r=U({}),b=fo();we(()=>[g.value.currentPositionInfo,o.value],([f,_])=>{var s;(_=="Aptos"&&f||_=="Sui"&&f&&(f==null?void 0:f.nftHash)==((s=b==null?void 0:b.query)==null?void 0:s.pos))&&(r.value=f,t.value=r.value.token_a,i.value=r.value.token_b)},{immediate:!0});const Y=f=>{var _;return(f==null?void 0:f.logoURI)||(f==null?void 0:f.logo_url)||((_=g.value.tokensObj[f==null?void 0:f.address])==null?void 0:_.logo_url)||(v.value==="default"?no("/image/coins/unknown.png"):no("/image/coins/sui-unknown.png"))},se=y(()=>o.value?to(o.value):{}),ie=U([]),V=async f=>{const{list:_}=await se.value.getTicks(f),s=_?se.value.getTickDataFromUrlData(_):[];ie.value=s};we(()=>[r.value,g.value.poolsObj],([f,_])=>{f&&!me(f)&&f.poolInfo&&_&&!me(_)&&V(_[f.poolAddress])},{immediate:!0});const u=U(!0),p=(f,_)=>f!=="0"&&_!=="âˆž"?Me(1/(1-Number((f/_)**.25)),2)+"x":"1x",$=y(()=>r.value.minPrice&&r.value.maxPrice?p(r.value.minPrice,r.value.maxPrice):"--"),c=y(()=>r.value.maxPrice!=="âˆž"?new h(1).div(new h(r.value.maxPrice)).toString():"âˆž"),T=y(()=>r.value.minPrice>0?new h(1).div(new h(r.value.minPrice)).toString():"0");return{needReverse:a,getCoinIcon:Y,theme:v,indexStore:O,direct:u,addCommom:Q,decimalUi:ke,tickList:ie,positionInfo:r,fromCoin:t,toCoin:i,getExplorerUrl:bo,lever:$,currentExplorer:R,minPriceResever:c,maxPriceResever:T}}}),Un=""+globalThis.__publicAssetsURL("image/aptos-price.png"),jn=""+globalThis.__publicAssetsURL("sui-image/sui-price.png"),En=""+globalThis.__publicAssetsURL("image/icon-arrow@2x.png"),Dn=""+globalThis.__publicAssetsURL("sui-image/icon-arrow@2x.png");const ze=e=>(mo("data-v-ce762523"),e=e(),vo(),e),Fn={class:"new-position-info"},Wn={class:"pool-info"},Hn={class:"left"},Xn={class:"coin-a"},zn={alt:""},Yn={class:"coin-b"},Gn={alt:""},Jn={class:"position-name"},Qn=["href"],Zn=ze(()=>n("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),Kn=[Zn],Vn={key:0,class:"pool-fee"},xn=ze(()=>n("span",null,"Fee tier",-1)),et={class:"right"},ot={class:"h5-pool-info"},nt={class:"coin-info"},tt={class:"coin-a"},it={alt:""},at={class:"coin-b"},st={alt:""},lt={class:"position-name"},rt=["href"],ut=ze(()=>n("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),dt=[ut],ct={key:0,class:"pool-fee"},mt={class:"price-info"},vt={class:"price-and-chart"},ft={class:"left"},pt={class:"current-price"},ht=ze(()=>n("span",null,"Current Price",-1)),bt={class:"coin-rate"},kt=ze(()=>n("div",null,[n("svg",{class:"icon icon-up","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),gt=ze(()=>n("div",null,[n("svg",{class:"icon icon-down","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),_t=[kt,gt],wt={key:0},yt={key:1},At={key:0,class:"position-range"},It=ze(()=>n("div",{class:"position-range-title"},"Position Range",-1)),Ct={key:0},$t={key:1},St={key:2,src:Un,alt:""},Pt={key:3,src:jn,alt:""},Tt={key:4},Nt={key:5},Rt={key:1,class:"position-range position-range-warp"},Ot={key:0,class:"position-range-title"},qt={key:1,class:"position-range-title"},Lt={key:2},Bt={key:3},Mt={class:"price-img"},Ut={key:0,src:En,alt:""},jt={key:1,src:Dn,alt:""},Et={key:4},Dt={key:5},Ft={class:"lever"},Wt=ze(()=>n("div",{class:"lever-title"},"Leverage",-1)),Ht={class:"lever-text"},Xt={class:"right"},zt=ze(()=>n("div",{class:"chat-mask"},null,-1));function Yt(e,t,i,a,O,k){var g,r,b,Y,se,ie,V,u,p,$,c,T,f,_,s,ae,K,ee,H,C,M,N,z,x,J,ne,Z,pe,B,he;const R=co,v=Ro,o=Wo,l=wo("image");return w(),P("div",Fn,[n("div",Wn,[n("div",Hn,[n("div",Xn,[Pe(n("img",zn,null,512),[[l,e.needReverse?e.getCoinIcon(e.positionInfo.token_b):e.getCoinIcon(e.positionInfo.token_a)]]),le(R,{address:e.needReverse?(Y=(b=e.positionInfo)==null?void 0:b.token_b)==null?void 0:Y.address:(r=(g=e.positionInfo)==null?void 0:g.token_a)==null?void 0:r.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),n("div",Yn,[Pe(n("img",Gn,null,512),[[l,e.needReverse?e.getCoinIcon(e.positionInfo.token_a):e.getCoinIcon(e.positionInfo.token_b)]]),le(R,{address:e.needReverse?(u=(V=e.positionInfo)==null?void 0:V.token_a)==null?void 0:u.address:(ie=(se=e.positionInfo)==null?void 0:se.token_b)==null?void 0:ie.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),n("div",Jn,[n("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:G(bo))(e.currentExplorer,"nftAddress",e.positionInfo.nftHash),target:"_blank"},F(($=(p=e.positionInfo)==null?void 0:p.name)==null?void 0:$.split("|")[1]),9,Qn)]),(w(),P("svg",{class:"copy-icon","aria-hidden":"true",onClick:t[0]||(t[0]=_e=>e.indexStore.copy(e.positionInfo.nftHash||e.positionInfo.clmm_position_id))},Kn)),e.positionInfo.fee?(w(),P("div",Vn,[xn,ce(" "+F(e.positionInfo.fee*100)+"% ",1)])):de("",!0)]),n("div",et,[le(v,{"current-status":(c=e.positionInfo)==null?void 0:c.currentStatus},null,8,["current-status"])])]),n("div",ot,[n("div",null,[n("div",nt,[n("div",tt,[Pe(n("img",it,null,512),[[l,e.needReverse?e.getCoinIcon(e.positionInfo.token_b):e.getCoinIcon(e.positionInfo.token_a)]]),le(R,{address:e.needReverse?(s=(_=e.positionInfo)==null?void 0:_.token_b)==null?void 0:s.address:(f=(T=e.positionInfo)==null?void 0:T.token_a)==null?void 0:f.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),n("div",at,[Pe(n("img",st,null,512),[[l,e.needReverse?e.getCoinIcon(e.positionInfo.token_a):e.getCoinIcon(e.positionInfo.token_b)]]),le(R,{address:e.needReverse?(H=(ee=e.positionInfo)==null?void 0:ee.token_a)==null?void 0:H.address:(K=(ae=e.positionInfo)==null?void 0:ae.token_b)==null?void 0:K.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])])]),n("div",lt,[n("div",null,[n("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:G(bo))(e.currentExplorer,"nftAddress",e.positionInfo.nftHash),target:"_blank"},F((M=(C=e.positionInfo)==null?void 0:C.name)==null?void 0:M.split("|")[1]),9,rt),(w(),P("svg",{class:"copy-icon","aria-hidden":"true",onClick:t[1]||(t[1]=_e=>e.indexStore.copy(e.positionInfo.nftHash))},dt))]),e.positionInfo.fee?(w(),P("div",ct,F(e.positionInfo.fee*100)+"% ",1)):de("",!0)])]),le(v,{"current-status":(N=e.positionInfo)==null?void 0:N.currentStatus},null,8,["current-status"])]),n("div",mt,[n("div",vt,[n("div",ft,[n("div",pt,[n("div",null,[ht,n("div",bt,[n("div",{onClick:t[2]||(t[2]=_e=>e.direct=!e.direct)},_t)])]),(e.needReverse?!e.direct:e.direct)?(w(),P("div",wt,[ce(F(("addCommom"in e?e.addCommom:G(Q))(("decimalUi"in e?e.decimalUi:G(ke))(e.positionInfo.currentPrice,6)))+" Â  ",1),n("span",null,F((z=e.toCoin)==null?void 0:z.symbol)+" per "+F((x=e.fromCoin)==null?void 0:x.symbol),1)])):(w(),P("div",yt,[ce(F(("addCommom"in e?e.addCommom:G(Q))(("decimalUi"in e?e.decimalUi:G(ke))(e.positionInfo.currentPriceReverse,6)))+" Â  ",1),n("span",null,F((J=e.fromCoin)==null?void 0:J.symbol)+" per "+F((ne=e.toCoin)==null?void 0:ne.symbol),1)]))]),e.positionInfo.minPrice&&e.positionInfo.minPrice.length<9&&e.positionInfo.maxPrice&&e.positionInfo.maxPrice.length?(w(),P("div",At,[It,n("div",null,[(e.needReverse?!e.direct:e.direct)?(w(),P("div",Ct,[ce(F(("addCommom"in e?e.addCommom:G(Q))(("decimalUi"in e?e.decimalUi:G(ke))(e.positionInfo.minPrice,6)))+" ",1),n("span",null,F(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)])):(w(),P("div",$t,[ce(F(((Z=e.positionInfo)==null?void 0:Z.minPrice)!=="0"?("addCommom"in e?e.addCommom:G(Q))(("decimalUi"in e?e.decimalUi:G(ke))(1/e.positionInfo.minPrice,6)):0)+" ",1),n("span",null,F(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol),1)])),e.theme=="default"?(w(),P("img",St)):(w(),P("img",Pt)),(e.needReverse?!e.direct:e.direct)?(w(),P("div",Tt,[ce(F(((pe=e.positionInfo)==null?void 0:pe.maxPrice)!=="âˆž"?("addCommom"in e?e.addCommom:G(Q))(("decimalUi"in e?e.decimalUi:G(ke))(e.positionInfo.maxPrice,6)):"âˆž")+" ",1),n("span",null,F(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)])):(w(),P("div",Nt,[ce(F(((B=e.positionInfo)==null?void 0:B.maxPrice)!=="âˆž"?("addCommom"in e?e.addCommom:G(Q))(("decimalUi"in e?e.decimalUi:G(ke))(1/e.positionInfo.maxPrice,6)):"âˆž")+" ",1),n("span",null,F(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol),1)]))])])):(w(),P("div",Rt,[(e.needReverse?!e.direct:e.direct)?(w(),P("span",Ot," Position Range ")):(w(),P("span",qt," Position Range ")),(e.needReverse?!e.direct:e.direct)?(w(),P("div",Lt,[ce(F(("addCommom"in e?e.addCommom:G(Q))(("decimalUi"in e?e.decimalUi:G(ke))(e.positionInfo.minPrice,6)))+" ",1),n("span",null,F(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)])):(w(),P("div",Bt,[ce(F(e.positionInfo.maxPrice!=="âˆž"?("addCommom"in e?e.addCommom:G(Q))(("decimalUi"in e?e.decimalUi:G(ke))(e.positionInfo.maxPriceResever,6)):"âˆž")+" ",1),n("span",null,F(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol),1)])),n("div",Mt,[e.theme=="default"?(w(),P("img",Ut)):(w(),P("img",jt))]),(e.needReverse?!e.direct:e.direct)?(w(),P("div",Et,[ce(F(e.positionInfo.maxPrice!=="âˆž"?("addCommom"in e?e.addCommom:G(Q))(("decimalUi"in e?e.decimalUi:G(ke))(e.positionInfo.maxPrice,6)):"âˆž")+" ",1),n("span",null,F(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)])):(w(),P("div",Dt,[ce(F(((he=e.positionInfo)==null?void 0:he.minPrice)!=="0"?("addCommom"in e?e.addCommom:G(Q))(("decimalUi"in e?e.decimalUi:G(ke))(e.positionInfo.minPriceResever,6)):0)+" ",1),n("span",null,F(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol),1),ce(" Â  ")]))])),n("div",Ft,[Wt,n("div",Ht,F(e.lever),1)])]),n("div",Xt,[le(o,{"pool-info":e.positionInfo.poolInfo,"tick-list":e.tickList,"min-price":e.needReverse?e.minPriceResever:e.positionInfo.minPrice,"max-price":e.needReverse?e.maxPriceResever:e.positionInfo.maxPrice,direction:!e.needReverse,"current-price-tab":"custom","chart-loading":!1},null,8,["pool-info","tick-list","min-price","max-price","direction"]),zt])])])])}const Ho=Qe(Mn,[["render",Yt],["__scopeId","data-v-ce762523"]]),Gt=Je({components:{TokenWarning:co},setup(e,t){const{t:i}=yo(),{$notify:a}=an(),O=Ge(),k=y(()=>O),R=io(),v=y(()=>R),o=U({}),l=U({}),g=U({}),r=y(()=>k.value.chainName),b=y(()=>r.value?to(r.value):{}),Y=fo(),se=U(!1),ie=async(d=null)=>{const m=d||o.value,A=v.value.addressLpTokens[m.poolAddress];if(A){const E=await b.value.getTickDataByIndex(A.ticks_handle,Number(m.tick_lower_index)),D=await b.value.getTickDataByIndex(A.ticks_handle,Number(m.tick_upper_index));let j={};r.value==="Aptos"?j=await b.value.getPosRewardersAmount({poolAddress:_.currentRoute.value.query.address,positionName:_.currentRoute.value.query.token,tickLowerData:E,tickUpperData:D}):j=await b.value.fetchPosRewardersAmount({poolAddress:m.poolAddress,positionId:m.pos_object_id||m.clmm_position_id,coinTypeA:m.coin_type_a||m.coinTypeA,coinTypeB:m.coin_type_b||m.coinTypeB,rewarderInfo:m.poolInfo.rewarder_infos});const X=[];let oe=new h(0);j.forEach((te,ve)=>{var ue,ge;const Ae=(ue=v.value.tokensObj[te.coin_address])==null?void 0:ue.decimals,q=te.amount_owed.toString();let L=new h(q).div(Math.pow(10,Ae)).toString();if(r.value=="Aptos"&&Number(L)>999999999&&(L="0"),m.poolInfo[`rewarder_display${ve+1}`]||Number(L)>0){const I=v.value.tokensObj[te.coin_address],W=((ge=v.value.RATES[te.coin_address])==null?void 0:ge.price)||0,S=new h(L).mul(W).toString();oe=new h(oe).plus(S),X.push({...te,...I,amount:Number(L)>0?L:0,amountUSD:Number(S)>0?Se(S,2):0,amountUSDText:S})}}),s.value=X}};we(()=>[v.value.currentPositionInfo,r.value],([d,m])=>{var A;m=="Aptos"&&d?(o.value=d,l.value=d==null?void 0:d.token_a,g.value=d==null?void 0:d.token_b):m=="Sui"&&d&&(d==null?void 0:d.nftHash)==((A=Y==null?void 0:Y.query)==null?void 0:A.pos)&&(o.value=d,l.value=d==null?void 0:d.token_a,g.value=d==null?void 0:d.token_b,se.value=!1)},{immediate:!0}),we(()=>[o.value,v.value.addressLpTokens],([d,m])=>{!me(d)&&!me(m)&&ie(d)},{immediate:!0});const V=y(()=>{var d,m,A,E,D,j,X,oe;if(o.value&&!me(o.value)&&v.value.RATES){const te=o.value.amountA*((m=v.value.RATES[(d=o.value)==null?void 0:d.token_a.address])==null?void 0:m.price),ve=o.value.amountB*((E=v.value.RATES[(A=o.value)==null?void 0:A.token_b.address])==null?void 0:E.price);if((j=v.value.RATES[(D=o.value)==null?void 0:D.token_a.address])!=null&&j.price&&((oe=v.value.RATES[(X=o.value)==null?void 0:X.token_b.address])!=null&&oe.price)){const Ae=Number(te+ve);return Ae>0&&Ae<.01?"<0.01":Q(Me(te+ve,2),2)}else return" --"}else return" --"}),u=y(()=>{var d,m;return(m=(d=o.value)==null?void 0:d.poolInfo)==null?void 0:m.needReverse}),p=y(()=>v.value.RATES),$=y(()=>{var d,m;if(p.value&&l.value&&g.value&&!me(p.value)&&!me(l.value)&&!me(g.value)){const A=[],E=Number(o.value.feeOwedA)||0,D=Number(o.value.feeOwedB)||0,j=new h(E).mul(((d=p.value[l.value.address])==null?void 0:d.price)||0),X=new h(D).mul(((m=p.value[g.value.address])==null?void 0:m.price)||0);return A.push({amount:E,amountUSD:j.toString()},{amount:D,amountUSD:X.toString()}),A}return[]}),c=y(()=>{var m,A;let d=new h(0);return(m=$==null?void 0:$.value)==null||m.forEach(E=>{d=d.add(new h(E.amount))}),r.value=="Sui"&&((A=s==null?void 0:s.value)==null||A.forEach(E=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-liquidity.vue:622 ~ canClaimYield ~ ele:",E),d=d.add(new h(E.amount))})),d.toNumber()}),T=y(()=>{var m,A;let d=new h(0);return(m=$==null?void 0:$.value)==null||m.forEach(E=>{d=d.add(new h(E.amountUSD))}),r.value=="Sui"&&((A=s==null?void 0:s.value)==null||A.forEach(E=>{d=d.add(new h(E.amountUSDText))})),d.toNumber()}),f=y(()=>{var m;let d=new h(0);return(m=s.value)==null||m.forEach(A=>{d=d.add(new h(A.amountUSDText))}),d.toNumber()}),_=ro(),s=U([]),{setIsShowSuccess:ae,setIsShowRejected:K,setIsShowWaiting:ee,setTransactionDesc:H,setTransactionTxid:C}=O,M=lo(),N=y(()=>M),z=async()=>{se.value=!0;let d={coinTypeA:o.value.poolInfo.coinTypeA,coinTypeB:o.value.poolInfo.coinTypeB,coinTypeC:"",coinTypeD:"",coinTypeE:"",pool_address:o.value.poolAddress,pos_index:o.value.index,rewarder_nums:s.value.length,collect_fee:!0};d.coinTypeC=s.value[0]?s.value[0].coin_address:"",d.coinTypeD=s.value[1]?s.value[1].coin_address:"",d.coinTypeE=s.value[2]?s.value[2].coin_address:"",ee(!0),H();try{let m;if(r.value==="Aptos"){const A=await b.value.getCollectRewarderTransactionPayload(d);m=await N.value.currentWallet.signAndSubmitTransaction(A)}else{d.pos_index=o.value.pos_object_id;const A=await b.value.getCollectRewarderTransactionPayload(d,o.value),E=await b.value.signAndExecuteTransactionBlock(N.value.currentWallet,A.txb,A.payloadParams);m=b.value.handleTx(E)}if(m&&m.hash){C(m.hash),ee(!1),ae(!0);const A={title:"Claim",desc:"",hash:m.hash,tit:"Rewards Claimed",icon:"icon-icon-Removed"};r.value!=="Aptos"&&(A.res=m.res),b.value.showTransitionPending(A),await b.value.watchTransaction(A)&&t.emit("getDetails")}else console.log("0310###toClaimRewards###else###"),ee(!1),K(!0),se.value=!1}catch(m){ee(!1),K(!0),se.value=!1,console.log(m,"error===>")}},x=U(!1),J=async()=>{x.value=!0;const d=s.value;let m={coinTypeA:o.value.poolInfo.coinTypeA,coinTypeB:o.value.poolInfo.coinTypeB,coinTypeC:"",coinTypeD:"",coinTypeE:"",pool_address:o.value.poolAddress,pos_index:o.value.index,rewarder_nums:d.length};m.coinTypeC=d[0]?d[0].coin_address:"",m.coinTypeD=d[1]?d[1].coin_address:"",m.coinTypeE=d[2]?d[2].coin_address:"";try{let A;if(r.value==="Aptos"){const E=await b.value.getCollectRewarderTransactionPayload(m);A=await N.value.currentWallet.signAndSubmitTransaction(E)}else{m.pos_index=o.value.pos_object_id;const E=await b.value.getCollectRewarderTransactionPayload(m),D=await b.value.signAndExecuteTransactionBlock(N.value.currentWallet,E.txb,E.payloadParams);A=b.value.handleTx(D)}if(A&&A.hash){C(A.hash),ee(!1),ae(!0);const E=d[0].amount+d[0].symbol,D=m.coinTypeD?" and "+d[1].amount+d[1].symbol:"",j=m.coinTypeE?" and "+d[2].amount+d[2].symbol:"",X={title:"Claim",desc:"",hash:A.hash,tit:"Rewards Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:d[0].address,numa:`+ ${Number(d[0].amount)}`,logoa:v.value.tokensObj&&d[0]&&d[0].address&&v.value.tokensObj[d[0].address]&&v.value.tokensObj[d[0].address].logoURI,tokenb:d[1]&&d[1].address,numb:m.coinTypeD?`+ ${Number(d[1].amount)}`:"",logob:m.coinTypeD?v.value.tokensObj&&d[1]&&d[1].address&&v.value.tokensObj[d[1].address]&&v.value.tokensObj[d[1].address].logoURI:"",tokenc:d[2]&&d[2].address,numc:m.coinTypeE?`+ ${Number(d[2].amount)}`:"",logoc:m.coinTypeE?v.value.tokensObj&&d[2]&&d[2].address&&v.value.tokensObj[d[2].address]&&v.value.tokensObj[d[2].address].logoURI:""},text:E+D+j};r.value!=="Aptos"&&(X.res=A.res),b.value.showTransitionPending(X),await b.value.watchTransaction(X)&&setTimeout(()=>{t.emit("getDetails"),b.value.getAccount(N.value.address)},3e3)}else console.log("0310###toClaimRewards###else###"),ee(!1),K(!0);x.value=!1}catch(A){console.log("0310###collectRewarderParams Error###",A),x.value=!1,ee(!1),K(!0)}},ne=y(()=>v.value.positionDetailCurrentTab),Z=y(()=>{var A,E,D,j,X,oe;const d=ke(u.value?(E=o.value)==null?void 0:E.amountB:(A=o.value)==null?void 0:A.amountA,u.value?(oe=(X=o.value)==null?void 0:X.token_b)==null?void 0:oe.decimals:(j=(D=o.value)==null?void 0:D.token_a)==null?void 0:j.decimals),m=u.value?v.value.positionActionAmount.toCoinAmount||0:v.value.positionActionAmount.fromCoinAmount||0;if(ne.value=="increase")return m?new h(d).add(new h(m)).toString():"";if(m){const te=new h(d).minus(new h(m)).toString();return te<0?"0":String(te)}else return""}),pe=y(()=>{var A,E,D,j,X,oe;const d=ke(u.value?(E=o.value)==null?void 0:E.amountA:(A=o.value)==null?void 0:A.amountB,u.value?(oe=(X=o.value)==null?void 0:X.token_a)==null?void 0:oe.decimals:(j=(D=o.value)==null?void 0:D.token_b)==null?void 0:j.decimals),m=u.value?v.value.positionActionAmount.fromCoinAmount||0:v.value.positionActionAmount.toCoinAmount||0;if(ne.value=="increase")return m?new h(d).add(new h(m)).toString():"";if(m){const te=new h(d).minus(new h(m)).toString();return te<0?"0":String(te)}else return""}),B=y(()=>u.value?v.value.positionActionAmount.toCoinAmount:v.value.positionActionAmount.fromCoinAmount),he=y(()=>u.value?v.value.positionActionAmount.fromCoinAmount:v.value.positionActionAmount.toCoinAmount),_e=d=>{var m;return(d==null?void 0:d.logoURI)||(d==null?void 0:d.logo_url)||((m=v.value.tokensObj[d==null?void 0:d.address])==null?void 0:m.logo_url)||(k.value.theme==="default"?no("/image/coins/unknown.png"):no("/image/coins/sui-unknown.png"))},je=y(()=>{var j,X,oe,te,ve,Ae,q,L,ue,ge,I,W;const{fromCoinAmount:d,toCoinAmount:m}=v.value.positionActionAmount,A=v.value.positionDetailCurrentTab,E=ke(u.value?(X=o.value)==null?void 0:X.amountB:(j=o.value)==null?void 0:j.amountA,u.value?(Ae=(ve=o.value)==null?void 0:ve.token_b)==null?void 0:Ae.decimals:(te=(oe=o.value)==null?void 0:oe.token_a)==null?void 0:te.decimals),D=ke(u.value?(L=o.value)==null?void 0:L.amountA:(q=o.value)==null?void 0:q.amountB,u.value?(W=(I=o.value)==null?void 0:I.token_a)==null?void 0:W.decimals:(ge=(ue=o.value)==null?void 0:ue.token_b)==null?void 0:ge.decimals);return r.value=="Sui"||A=="remove"&&r.value=="Aptos"&&d==E&&m==D}),Be=async()=>{se.value=!0;const d=Q(o.value.feeOwedA,o.value.token_a.decimals)==0?"":`${Se(o.value.feeOwedA,o.value.token_a.decimals)} ${o.value.token_a.symbol}`,m=Q(o.value.feeOwedB,o.value.token_b.decimals)==0?"":`${Se(o.value.feeOwedB,o.value.token_b.decimals)} ${o.value.token_b.symbol}`;H(i("newAdd.claimWaitingText",{from:u.value?m:d,and:Q(o.value.feeOwedA,o.value.token_a.decimals)==0||Q(o.value.feeOwedB,o.value.token_b.decimals)==0?"":"and",to:u.value?d:m})),ee(!0);let A;const E={pool:o.value.poolInfo,position:o.value};try{const D=await b.value.getCollectFeeTransactionPayload(E);if(r.value==="Aptos")A=await N.value.currentWallet.signAndSubmitTransaction(D);else{const j=await b.value.signAndExecuteTransactionBlock(N.value.currentWallet,D);A=b.value.handleTx(j)}if(A){C(A.hash),ee(!1),ae(!0);const j={title:"Claim",desc:"",hash:A.hash,tit:"Fees Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:`${o.value.token_a.address}`,numa:Q(o.value.feeOwedA,o.value.token_a.decimals)==0?"":`${Se(o.value.feeOwedA,o.value.token_a.decimals)}`,logoa:Q(o.value.feeOwedA,o.value.token_a.decimals)==0?"":v.value.tokensObj&&o.value&&o.value.token_a.address&&v.value.tokensObj[o.value.token_a.address]&&v.value.tokensObj[o.value.token_a.address].logoURI,tokenb:`${o.value.token_b.address}`,numb:Q(o.value.feeOwedB,o.value.token_b.decimals)==0?"":`${Se(o.value.feeOwedB,o.value.token_b.decimals)}`,logob:Q(o.value.feeOwedB,o.value.token_b.decimals)==0?"":v.value.tokensObj&&o.value&&o.value.token_b.address&&v.value.tokensObj[o.value.token_b.address]&&v.value.tokensObj[o.value.token_b.address].logoURI},text:`Claim ${Q(o.value.feeOwedA,o.value.token_a.decimals)==0?"":`${Se(o.value.feeOwedA,o.value.token_a.decimals)} ${o.value.token_a.symbol}`}  
              ${Q(o.value.feeOwedA,o.value.token_a.decimals)==0||Q(o.value.feeOwedB,o.value.token_b.decimals)==0?"":"and"} ${Q(o.value.feeOwedB,o.value.token_b.decimals)==0?"":`${Se(o.value.feeOwedB,o.value.token_b.decimals)} ${o.value.token_b.symbol}`}

            `};r.value!=="Aptos"&&(j.res=A.res),b.value.showTransitionPending(j);const X=await b.value.watchTransaction(j);console.log("0310##toClaim###transitionStatus####",X),X&&setTimeout(()=>{t.emit("getDetails")},1e3)}else ee(!1),K(!0),a.error({icon:Xe("svg",{class:{icon:!0},"aria-hidden":!0},[Xe("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),duration:4.5,message:Xe("div",{class:"notification-title"},[Xe("span",{innerHTML:$o.global.t("newAdd.claimFailed")},null)]),description:i("newAdd.somethingWrong"),class:"ant-notification-copy ant-notification-error"});se.value=!1,console.log("claim####test###",A)}catch(D){console.log("claim###error####",D),se.value=!1,ee(!1),K(!0),a.error({icon:Xe("svg",{class:{icon:!0},"aria-hidden":!0},[Xe("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Xe("div",{class:"notification-title"},[Xe("span",{innerHTML:$o.global.t("newAdd.claimFailed")},null)]),duration:4.5,description:i("newAdd.somethingWrong"),class:"ant-notification-copy ant-notification-error"})}},Ce=Xe(sn,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});return{amountUSD:V,needReverse:u,decimalUi:ke,pendingFees:$,positionInfo:o,pendingRewarderArr:s,pendingYieldAmount:T,toClaim:Be,claimAll:z,fromCoin:l,toCoin:g,showNum:Se,claimLoading:se,addCommom:Q,afterBase:Z,afterQuote:pe,fromCoinAmount:B,toCoinAmount:he,checkNullObj:me,getCoinIcon:_e,chainName:r,isShowAfterAmount:je,pendingRewarderAmount:f,toClaimRewards:J,rewarderLoading:x,indicator:Ce,canClaimYield:c}}});const Jt={class:"liquidity-card"},Qt={class:"liquidity-title"},Zt={class:"liquidity-usd"},Kt=n("span",null,"Liquidity",-1),Vt={class:"liquidity-ratio"},xt={class:"coin-ratio"},ei={class:"coin-a-ratio"},oi={class:"coin-b-ratio"},ni={class:"ratio-progress"},ti={class:"base-quote-num"},ii={class:"base-coin-num"},ai=n("span",null,"Base",-1),si={alt:""},li={key:0,class:"after"},ri={class:"quote-coin-num"},ui=n("span",null,"Quote",-1),di={alt:""},ci={key:0,class:"after"},mi={class:"pending-yield"},vi={class:"left"},fi={class:"pending-yield-title"},pi={key:0,class:"after"},hi={class:"right"},bi={class:"fees-rewards"},ki={class:"fees-rewards-item"},gi=n("span",null,"Fees",-1),_i={key:0,class:"after"},wi=n("span",null,"Fees",-1),yi={key:0,class:"after"},Ai=n("span",null,"Mining Rewards",-1),Ii={style:{"margin-top":"5px"}},Ci={alt:""},$i=n("span",null,"Mining Rewards",-1),Si={alt:""},Pi={key:0,class:"after"},Ti={key:0,class:"pending-yield"},Ni={class:"left"},Ri=n("div",{class:"pending-yield-title"},"Pending rewards",-1),Oi={key:0,class:"after"},qi={class:"right"},Li={key:1,class:"fees-rewards"},Bi={class:"fees-rewards-item"},Mi=n("span",null,"Mining Rewards",-1),Ui={alt:""},ji={key:0,class:"after"};function Ei(e,t,i,a,O,k){var g,r,b,Y,se,ie,V,u,p,$,c,T,f,_,s,ae,K,ee,H,C,M,N,z,x,J,ne,Z,pe,B,he,_e,je,Be,Ce,d,m,A,E,D,j,X,oe,te,ve,Ae,q,L,ue,ge,I,W,S,re,be,$e,Te,Ie,Ne,Ee,De,Ye,Re,Ue,Fe,We,Ze,ye;const R=co,v=uo,o=ln,l=wo("image");return w(),P("div",Jt,[n("div",Qt,[n("div",Zt,[Kt,n("div",null,"$"+F(e.amountUSD),1)]),n("div",Vt,[n("div",xt,[n("div",ei,[n("span",null,F(e.needReverse?(r=e.toCoin)==null?void 0:r.symbol:(g=e.fromCoin)==null?void 0:g.symbol),1),ce(" "+F(e.needReverse?(Y=e.positionInfo)==null?void 0:Y.toPercent:(b=e.positionInfo)==null?void 0:b.fromPercent)+"% ",1)]),n("div",oi,[n("span",null,F(e.needReverse?(ie=e.fromCoin)==null?void 0:ie.symbol:(se=e.toCoin)==null?void 0:se.symbol),1),ce(" "+F(e.needReverse?(u=e.positionInfo)==null?void 0:u.fromPercent:(V=e.positionInfo)==null?void 0:V.toPercent)+"% ",1)])]),n("div",ni,[n("div",{class:"from-percent",style:So({width:e.needReverse?(($=e.positionInfo)==null?void 0:$.toPercent)+"%":((p=e.positionInfo)==null?void 0:p.fromPercent)+"%"})},null,4),n("div",{class:"to-percent",style:So({width:e.needReverse?((T=e.positionInfo)==null?void 0:T.fromPercent)+"%":((c=e.positionInfo)==null?void 0:c.toPercent)+"%"})},null,4)])])]),n("div",ti,[n("div",ii,[ai,n("div",null,[Pe(n("img",si,null,512),[[l,(e.needReverse?(_=e.toCoin)==null?void 0:_.logo_url:(f=e.fromCoin)==null?void 0:f.logo_url)||e.getCoinIcon(e.needReverse?(ae=e.positionInfo)==null?void 0:ae.token_b:(s=e.positionInfo)==null?void 0:s.token_a)]]),le(R,{address:e.needReverse?(C=(H=e.positionInfo)==null?void 0:H.token_b)==null?void 0:C.address:(ee=(K=e.positionInfo)==null?void 0:K.token_a)==null?void 0:ee.address,"style-params":{width:"10px",height:"10px",left:"15px",bottom:"8px"}},null,8,["address"]),n("span",null,F(("addCommom"in e?e.addCommom:G(Q))(("decimalUi"in e?e.decimalUi:G(ke))(e.needReverse?(N=e.positionInfo)==null?void 0:N.amountB:(M=e.positionInfo)==null?void 0:M.amountA,e.needReverse?(ne=(J=e.positionInfo)==null?void 0:J.token_b)==null?void 0:ne.decimals:(x=(z=e.positionInfo)==null?void 0:z.token_a)==null?void 0:x.decimals))),1)]),e.afterBase&&!("checkNullObj"in e?e.checkNullObj:G(me))(e.positionInfo)?(w(),P("div",li,F(("addCommom"in e?e.addCommom:G(Q))(e.afterBase))+" after ",1)):de("",!0)]),n("div",ri,[ui,n("div",null,[Pe(n("img",di,null,512),[[l,(e.needReverse?(pe=e.fromCoin)==null?void 0:pe.logo_url:(Z=e.toCoin)==null?void 0:Z.logo_url)||e.getCoinIcon(e.needReverse?(he=e.positionInfo)==null?void 0:he.token_a:(B=e.positionInfo)==null?void 0:B.token_b)]]),le(R,{address:e.needReverse?(Ce=(Be=e.positionInfo)==null?void 0:Be.token_a)==null?void 0:Ce.address:(je=(_e=e.positionInfo)==null?void 0:_e.token_b)==null?void 0:je.address,"style-params":{width:"10px",height:"10px",left:"15px",bottom:"8px"}},null,8,["address"]),n("span",null,F(("addCommom"in e?e.addCommom:G(Q))(("decimalUi"in e?e.decimalUi:G(ke))(e.needReverse?(m=e.positionInfo)==null?void 0:m.amountA:(d=e.positionInfo)==null?void 0:d.amountB,e.needReverse?(j=(D=e.positionInfo)==null?void 0:D.token_a)==null?void 0:j.decimals:(E=(A=e.positionInfo)==null?void 0:A.token_b)==null?void 0:E.decimals))),1)]),e.afterQuote&&!("checkNullObj"in e?e.checkNullObj:G(me))(e.positionInfo)?(w(),P("div",ci,F(("addCommom"in e?e.addCommom:G(Q))(e.afterQuote))+" after ",1)):de("",!0)])]),n("div",mi,[n("div",vi,[n("div",fi,F(e.chainName=="Sui"?"Pending Yield":"Pending fees"),1),n("div",null,[ce(" $"+F(e.pendingYieldAmount>0&&e.pendingYieldAmount<.01?"<0.01":("addCommom"in e?e.addCommom:G(Q))(e.pendingYieldAmount,2))+" ",1),e.pendingYieldAmount>0?(w(),P("span",pi,"$0 after")):de("",!0)])]),n("div",hi,[le(v,{class:"claim-all",loading:e.claimLoading,disabled:e.claimLoading||e.canClaimYield==0,onClick:t[0]||(t[0]=fe=>e.chainName=="Sui"?e.claimAll():e.toClaim())},{default:Le(()=>[ce("Claim")]),_:1},8,["loading","disabled"])])]),n("div",bi,[n("div",ki,[n("div",null,[gi,n("div",null,[Pe(n("img",null,null,512),[[l,(e.needReverse?(oe=e.toCoin)==null?void 0:oe.logo_url:(X=e.fromCoin)==null?void 0:X.logo_url)||e.getCoinIcon(e.needReverse?(ve=e.positionInfo)==null?void 0:ve.token_b:(te=e.positionInfo)==null?void 0:te.token_a)]]),le(R,{address:e.needReverse?(ue=(L=e.positionInfo)==null?void 0:L.token_b)==null?void 0:ue.address:(q=(Ae=e.positionInfo)==null?void 0:Ae.token_a)==null?void 0:q.address,"style-params":{width:"10px",height:"10px",left:"15px",bottom:"8px"}},null,8,["address"]),n("span",null,F(e.needReverse?("showNum"in e?e.showNum:G(Se))(e.positionInfo.feeOwedB,(S=(W=e.positionInfo)==null?void 0:W.token_b)==null?void 0:S.decimals):("showNum"in e?e.showNum:G(Se))(e.positionInfo.feeOwedA,(I=(ge=e.positionInfo)==null?void 0:ge.token_a)==null?void 0:I.decimals)),1)]),(e.fromCoinAmount||e.toCoinAmount)&&!("checkNullObj"in e?e.checkNullObj:G(me))(e.positionInfo)&&e.isShowAfterAmount?(w(),P("div",_i," 0 after ")):de("",!0)]),n("div",null,[wi,n("div",null,[Pe(n("img",null,null,512),[[l,(e.needReverse?(be=e.fromCoin)==null?void 0:be.logo_url:(re=e.toCoin)==null?void 0:re.logo_url)||e.getCoinIcon(e.needReverse?(Te=e.positionInfo)==null?void 0:Te.token_a:($e=e.positionInfo)==null?void 0:$e.token_b)]]),le(R,{address:e.needReverse?(De=(Ee=e.positionInfo)==null?void 0:Ee.token_a)==null?void 0:De.address:(Ne=(Ie=e.positionInfo)==null?void 0:Ie.token_b)==null?void 0:Ne.address,"style-params":{width:"10px",height:"10px",left:"15px",bottom:"8px"}},null,8,["address"]),n("span",null,F(e.needReverse?("showNum"in e?e.showNum:G(Se))(e.positionInfo.feeOwedA,(Fe=(Ue=e.positionInfo)==null?void 0:Ue.token_a)==null?void 0:Fe.decimals):("showNum"in e?e.showNum:G(Se))(e.positionInfo.feeOwedB,(Re=(Ye=e.positionInfo)==null?void 0:Ye.token_b)==null?void 0:Re.decimals)),1)]),(e.fromCoinAmount||e.toCoinAmount)&&!("checkNullObj"in e?e.checkNullObj:G(me))(e.positionInfo)&&e.isShowAfterAmount?(w(),P("div",yi," 0 after ")):de("",!0)]),e.chainName=="Sui"?(w(),P(Ve,{key:0},[e.pendingRewarderArr.length==0&&((ye=(Ze=(We=e.positionInfo)==null?void 0:We.poolInfo)==null?void 0:Ze.rewarderInfo)==null?void 0:ye.length)>0?(w(!0),P(Ve,{key:0},oo(e.positionInfo.poolInfo.rewarderInfo,fe=>(w(),P("div",{key:fe.coinAddress},[Ai,n("div",Ii,[Pe(n("img",Ci,null,512),[[l,e.getCoinIcon({address:fe.coinAddress})]]),le(R,{address:fe.coinAddress,"style-params":{width:"10px",height:"10px",left:"15px",bottom:"8px"}},null,8,["address"]),le(o,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])]))),128)):de("",!0),(w(!0),P(Ve,null,oo(e.pendingRewarderArr,fe=>(w(),P("div",{key:fe},[$i,n("div",null,[Pe(n("img",Si,null,512),[[l,fe.logo_url]]),le(R,{address:fe.address,"style-params":{width:"10px",height:"10px",left:"15px",bottom:"8px"}},null,8,["address"]),n("span",null,F(fe.amount>0?("showNum"in e?e.showNum:G(Se))(fe.amount,fe.decimals):0),1)]),(e.fromCoinAmount||e.toCoinAmount)&&!("checkNullObj"in e?e.checkNullObj:G(me))(e.positionInfo)&&e.isShowAfterAmount?(w(),P("div",Pi," 0 after ")):de("",!0)]))),128))],64)):de("",!0)])]),e.chainName=="Aptos"&&e.pendingRewarderAmount>0?(w(),P("div",Ti,[n("div",Ni,[Ri,n("div",null,[ce(" $"+F(e.pendingRewarderAmount>0&&e.pendingRewarderAmount<.01?"<0.01":("addCommom"in e?e.addCommom:G(Q))(e.pendingRewarderAmount,2))+" ",1),e.pendingRewarderAmount>0?(w(),P("span",Oi,"$0 after")):de("",!0)])]),n("div",qi,[le(v,{class:"claim-all",loading:e.rewarderLoading,disabled:e.rewarderLoading||e.pendingRewarderAmount==0,onClick:e.toClaimRewards},{default:Le(()=>[ce("Claim")]),_:1},8,["loading","disabled","onClick"])])])):de("",!0),e.chainName=="Aptos"&&e.pendingRewarderAmount>0?(w(),P("div",Li,[n("div",Bi,[(w(!0),P(Ve,null,oo(e.pendingRewarderArr,fe=>(w(),P("div",{key:fe},[Mi,n("div",null,[Pe(n("img",Ui,null,512),[[l,fe.logo_url]]),le(R,{address:fe.address,"style-params":{width:"10px",height:"10px",left:"15px",bottom:"8px"}},null,8,["address"]),n("span",null,F(fe.amount),1)]),(e.fromCoinAmount||e.toCoinAmount)&&!("checkNullObj"in e?e.checkNullObj:G(me))(e.positionInfo)&&e.isShowAfterAmount?(w(),P("div",ji," 0 after ")):de("",!0)]))),128))])])):de("",!0)])}const Xo=Qe(Gt,[["render",Ei]]),Di=Je({components:{AssetsCard:po},setup(e,t){const i=U(""),a=U(""),O=Ge(),k=y(()=>O),R=y(()=>k.value.theme),v=io(),o=y(()=>v),l=U(!1),g=U(!1),r=U(!0),b=y(()=>k.value.chainName),Y=y(()=>b.value?to(b.value):{}),se=lo(),ie=y(()=>se),V=y(()=>k.value.slippage),u=U(),p=U(),$=y(()=>ie.value.assets&&u.value&&ie.value.assets[u.value.address]?Io(ie.value.assets[u.value.address].balance,u.value.decimals):0),c=y(()=>ie.value.assets&&p.value&&ie.value.assets[p.value.address]?Io(ie.value.assets[p.value.address].balance,p.value.decimals):0),T=m=>{m==="fromCoin"?(r.value=!0,b.value==="Aptos"?i.value=$.value>0?u.value.symbol=="APT"?new h(Number($.value)).sub(new h(.1)).lt(new h(0))?"0":new h(Number($.value)).sub(new h(.1)).toString():String($.value):"":i.value=$.value>0?u.value.symbol=="SUI"?new h(Number($.value)).sub(new h(.05)).lt(new h(0))?"0":new h(Number($.value)).sub(new h(.05)).toString():String($.value):""):(r.value=!1,b.value==="Aptos"?a.value=c.value>0?p.value.symbol=="APT"?new h(Number(c.value)).sub(new h(.1)).lt(new h(0))?"0":new h(Number(c.value)).sub(new h(.1)).toString():String(c.value):"":a.value=c.value>0?p.value.symbol=="SUI"?new h(Number(c.value)).sub(new h(.05)).lt(new h(0))?"0":new h(Number(c.value)).sub(new h(.05)).toString():String(c.value):"")},f=m=>{m==="fromCoin"?(r.value=!0,i.value=Me(new h(Number($.value)).div(2).toString(),u.value.decimals).toString()):(r.value=!1,a.value=Me(new h(Number(c.value)).div(2).toString(),p.value.decimals).toString())},_=U({}),s=U(!0),ae=U({}),K=U(),ee=U(),H=()=>{var L;if(!_.value||!i.value&&!a.value)return;const{TickMath:m,TickUtil:A}=Y.value;let E=_.value.minPrice,D=_.value.maxPrice.indexOf("+")>0?"âˆž":_.value.maxPrice,j=Number(_.value.tick_lower_index),X=Number(_.value.tick_upper_index);const oe=Number(_.value.current_tick_index);let te,ve,Ae=Number(E).toString(),q=_.value.maxPrice.indexOf("+")>0||_.value.maxPrice==="âˆž"?"âˆž":Number(D);if(Ae=="0"&&q=="âˆž"?(j=Number(_.value.tick_lower_index),X=Number(_.value.tick_upper_index)):(te=m.priceToSqrtPriceX64(new h(E),u.value.decimals,p.value.decimals),ve=m.priceToSqrtPriceX64(new h(D),u.value.decimals,p.value.decimals)),K.value=j,ee.value=X,D!=="âˆž"&&j>=X){l.value=!0,i.value="",g.value=!0,a.value="";return}if(D=="âˆž"||oe>=j&&oe<=X){l.value=!1,g.value=!1;let ue;if(i.value||a.value){if(r.value){const be=new h(i.value).mul(Math.pow(10,u.value.decimals)).toString();ue=new Oe(be)}else{const be=new h(a.value).mul(Math.pow(10,p.value.decimals)).toString();ue=new Oe(be)}const{liquidityAmount:ge,tokenMaxA:I,tokenMaxB:W,tokenMaxAOrigin:S,tokenMaxBOrigin:re}=Y.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:u.value,tokenB:p.value,lowerTick:j,upperTick:X,coinAmount:ue,iscoinA:s.value?r.value:!r.value,roundUp:!0,slippage:Number(V.value)/100,curSqrtPrice:new Oe(_.value.current_sqrt_price)});ae.value={liquidityAmount:ge,tokenMaxA:I,tokenMaxB:W,tokenMaxAOrigin:S,tokenMaxBOrigin:re},s.value?r.value?a.value=Number(W)>0?W:"":i.value=Number(I)>0?I:"":r.value?a.value=I:i.value=W}}else if(oe>X){if(i.value="",l.value=!0,g.value=!1,i.value||a.value){let ue;const ge=new h(a.value).mul(Math.pow(10,(L=p.value)==null?void 0:L.decimals)).toString();ue=new Oe(ge),ae.value={liquidityAmount:Oo(te,ve,ue),tokenMaxA:0,tokenMaxB:a.value}}}else if(oe<j){if(l.value=!1,g.value=!0,a.value="",i.value||a.value){let ue;const ge=new h(i.value).mul(Math.pow(10,u.value.decimals)).toString();ue=new Oe(ge),ae.value={liquidityAmount:qo(te,ve,ue),tokenMaxA:i.value,tokenMaxB:0}}}else l.value=!0,i.value="",g.value=!0,a.value="";v.setPositionActionAmount({fromCoinAmount:i,toCoinAmount:a})};we(()=>o.value.currentPositionInfo,m=>{if(m&&!me(m)){_.value=m,u.value=_.value.token_a,p.value=_.value.token_b;let A=Number(_.value.tick_lower_index),E=Number(_.value.tick_upper_index);const D=Number(_.value.current_tick_index);(m.maxPrice.indexOf("+")>0||m.maxPrice==="âˆž"?"âˆž":m.maxPrice)=="âˆž"||D>=A&&D<=E?(l.value=!1,g.value=!1):D>E?(i.value="",l.value=!0,g.value=!1):D<A?(l.value=!1,g.value=!0,a.value=""):(l.value=!0,i.value="",g.value=!0,a.value=""),H()}},{immediate:!0}),we(i,(m,A)=>{m&&H(),m==""&&(a.value="")}),we(a,(m,A)=>{m&&H(),m==""&&(i.value="")});const C=y(()=>{var m,A;return(A=(m=_.value)==null?void 0:m.poolInfo)==null?void 0:A.needReverse}),M=y(()=>o.value.RATES),N=y(()=>{var X,oe,te,ve;const m=((oe=M.value[(X=u.value)==null?void 0:X.address])==null?void 0:oe.price)||0,A=((ve=M.value[(te=p.value)==null?void 0:te.address])==null?void 0:ve.price)||0,E=new h(m).mul(new h(i.value||0)),D=new h(A).mul(new h(a.value||0)),j=E.add(D);return j.toNumber()?j.toNumber()>0&&j.toNumber()>.01?Q(j.toString(),2):"<0.01":"--"}),z=U(!1),{t:x,locale:J}=yo(),ne=y(()=>{const m=Number(i.value)>Number($.value),A=Number(a.value)>Number(c.value);return!i.value&&!a.value?x("button.enterAmount"):m?x("button.insufficientBalance",{name:u.value.symbol}):A?x("button.insufficientBalance",{name:p.value.symbol}):x("newAdd.addMore")}),Z=y(()=>{const m=Number(i.value)>Number($.value),A=Number(a.value)>Number(c.value);return!!(!i.value&&!a.value||m||A)}),{setIsShowSuccess:pe,setIsShowRejected:B,setIsShowWaiting:he,setTransactionDesc:_e,setTransactionTxid:je,setPositiomNum:Be}=O,Ce=U(!1);return{theme:R,showFromCoinLock:l,showToCoinLock:g,toCoinAmount:a,fromCoinAmount:i,fromCoinBlance:$,toCoinBlance:c,fromCoin:u,toCoin:p,maxBtnSelect:T,halfBtnSelect:f,fixedFromCoin:r,needReverse:C,totalAmount:N,wallet:ie,addLiquidityBtnText:ne,isShowLiquidityModal:z,indexStore:O,positionInfo:_,actionLoading:Ce,toAdd:async()=>{var X,oe,te,ve,Ae,q,L,ue,ge,I;z.value=!1,Ce.value=!0,je("");const m=l.value?"":`${i.value} ${(X=u.value)==null?void 0:X.symbol}`,A=g.value?"":`${a.value} ${(oe=p.value)==null?void 0:oe.symbol}`;_e(x("tips.increaseLiquiditySuccess",{from:C.value?A:m,and:!l.value&&!g.value?"and":"",to:C.value?m:A})),he(!0);const E=r.value,D=_.value.poolInfo.rewarder_infos;let j={};j.coinTypeC=D[0]?D[0].coinAddress:"",j.coinTypeD=D[1]?D[1].coinAddress:"",j.coinTypeE=D[2]?D[2].coinAddress:"";try{const W=await Y.value.getAddLiquidityTransactionPayload({pool:{poolAddress:_.value.poolAddress,token_a:_.value.token_a,token_b:_.value.token_b},amount:E?ae.value.tokenMaxA:ae.value.tokenMaxB,fix_amount_a:E,tick_lower:K.value,tick_upper:ee.value,index:b.value==="Aptos"?_.value.index:_.value.pos_object_id,slippage:Number(V.value)/100,roundUp:!0,collect_fee:!0,...j,curSqrtPrice:new Oe(_==null?void 0:_.value.poolInfo.current_sqrt_price),positionInfo:_});let S;if(b.value==="Aptos")S=await ie.value.currentWallet.signAndSubmitTransaction(W);else{const re=await Y.value.signAndExecuteTransactionBlock(ie.value.currentWallet,W==null?void 0:W.txb,W==null?void 0:W.payloadParams);S=Y.value.handleTx(re)}if(console.log("toAdd###tx###",S),S&&S.hash){je(S.hash),he(!1),pe(!0);const re={title:"Supplied",desc:x("tips.addLiquiditySuccessText",{from:l.value?"":`${i.value} ${(te=u.value)==null?void 0:te.symbol}`,and:!l.value&&!g.value?"and":"",to:g.value?"":`${a.value} ${(ve=p.value)==null?void 0:ve.symbol}`}),hash:S.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",tokenInfo:{tokena:C.value?`${(q=p.value)==null?void 0:q.address}`:`${(Ae=u.value)==null?void 0:Ae.address}`,numa:C.value?`- ${a.value}`:`- ${i.value}`,logoa:C.value?o.value.tokensObj&&p.value&&p.value.address&&o.value.tokensObj[p.value.address]&&o.value.tokensObj[p.value.address].logoURI:o.value.tokensObj&&u.value&&u.value.address&&o.value.tokensObj[u.value.address]&&o.value.tokensObj[u.value.address].logoURI,tokenb:C.value?`${(ue=u.value)==null?void 0:ue.address}`:`${(L=p.value)==null?void 0:L.address}`,numb:C.value?`- ${i.value}`:`- ${a.value}`,logob:C.value?o.value.tokensObj&&u.value&&u.value.address&&o.value.tokensObj[u.value.address]&&o.value.tokensObj[u.value.address].logoURI:o.value.tokensObj&&p.value&&p.value.address&&o.value.tokensObj[p.value.address]&&o.value.tokensObj[p.value.address].logoURI},text:`Deopsit ${l.value?"":`${i.value} ${(ge=u.value)==null?void 0:ge.symbol}`} ${!l.value&&!g.value?"and":""} ${g.value?"":`${a.value} ${(I=p.value)==null?void 0:I.symbol}`}`};b.value!=="Aptos"&&(re.res=S.res),Y.value.showTransitionPending(re),await Y.value.watchTransaction(re)&&setTimeout(()=>{t.emit("getDetails"),Y.value.getAccount(ie.value.address)},1e3),Be()}else he(!1),B(!0);i.value="",a.value="",Ce.value=!1}catch(W){i.value="",a.value="",console.log("addError###",W),Ce.value=!1,he(!1),B(!0)}},addLiquidityBtnDisabled:Z,poolStore:v}}});const Fi={class:"new-position-asset"},Wi={class:"add-or-remove"},Hi={class:"liquidity-action-tab"},Xi=n("div",{class:"increase tab-active"}," Increase ",-1),zi={class:"card-item"},Yi={class:"card-item"},Gi={key:0,class:"add",src:hn},Ji={key:1,class:"add",src:bn},Qi={class:"total-amount"},Zi=n("span",null,"Total Amount",-1);function Ki(e,t,i,a,O,k){var g;const R=po,v=fn,o=uo,l=pn;return w(),P("div",Fi,[n("div",Wi,[n("div",Hi,[Xi,n("div",{class:"remove",onClick:t[0]||(t[0]=r=>e.poolStore.setPositionDetailCurrentTab("remove"))}," Remove ")]),n("div",{class:ko(e.needReverse?"card-container reverse":"card-container")},[n("div",zi,[le(R,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[1]||(t[1]=r=>e.fromCoinAmount=r),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:t[2]||(t[2]=r=>e.maxBtnSelect("fromCoin")),onOnHalf:t[3]||(t[3]=r=>e.halfBtnSelect("fromCoin")),onOnInput:t[4]||(t[4]=r=>{e.fromCoinAmount=r}),onOnFocus:t[5]||(t[5]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(w(),qe(v,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin},null,8,["from-coin","to-coin"])):de("",!0)]),n("div",Yi,[le(R,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[6]||(t[6]=r=>e.toCoinAmount=r),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:t[7]||(t[7]=r=>e.maxBtnSelect("toCoin")),onOnHalf:t[8]||(t[8]=r=>e.halfBtnSelect("toCoin")),onOnInput:t[9]||(t[9]=r=>{e.toCoinAmount=r}),onOnFocus:t[10]||(t[10]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(w(),qe(v,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin},null,8,["from-coin","to-coin"])):de("",!0)]),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme=="default"?(w(),P("img",Gi)):de("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme!=="default"?(w(),P("img",Ji)):de("",!0)],2),n("div",Qi,[Zi,n("span",null,"$"+F(e.totalAmount),1)])]),e.wallet.connected?(w(),qe(o,{key:0,class:"big-btn liquidity-btn",disabled:e.addLiquidityBtnDisabled,loading:e.actionLoading,onClick:t[11]||(t[11]=r=>e.isShowLiquidityModal=!0)},{default:Le(()=>[n("span",null,F(e.addLiquidityBtnText),1)]),_:1},8,["disabled","loading"])):(w(),qe(o,{key:1,class:"big-btn",onClick:t[12]||(t[12]=r=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:Le(()=>[n("span",null,F(e.$t("button.connectWallet")),1)]),_:1})),e.isShowLiquidityModal?(w(),qe(l,{key:2,title:e.$t("button.increase"),"is-increase":!0,"from-coin":e.needReverse?e.toCoin:e.fromCoin,"to-coin":e.needReverse?e.fromCoin:e.toCoin,"from-coin-amount":e.needReverse?e.toCoinAmount:e.fromCoinAmount,"to-coin-amount":e.needReverse?e.fromCoinAmount:e.toCoinAmount,"min-price":e.positionInfo.minPrice,"max-price":e.positionInfo.maxPrice,"current-price":e.positionInfo.currentPrice,"current-price-reverse":1/e.positionInfo.currentPrice,"pool-info":(g=e.positionInfo)==null?void 0:g.poolInfo,"show-from-coin-lock":e.showFromCoinLock,"show-to-coin-lock":e.showToCoinLock,"position-total-amount":e.positionInfo.totalAmountUSD,"fixed-from-coin":!0,"tick-lower":e.positionInfo.tick_lower_index,"tick-upper":e.positionInfo.tick_upper_index,"current-price-tab":"custom",onToAdd:e.toAdd,onOnClose:t[13]||(t[13]=r=>e.isShowLiquidityModal=!1)},null,8,["title","from-coin","to-coin","from-coin-amount","to-coin-amount","min-price","max-price","current-price","current-price-reverse","pool-info","show-from-coin-lock","show-to-coin-lock","position-total-amount","tick-lower","tick-upper","onToAdd"])):de("",!0)])}const zo=Qe(Di,[["render",Ki]]),Vi=Je({components:{AssetsCard:po},setup(e,t){const i=U(""),a=U(""),O=Ge(),k=y(()=>O),R=y(()=>k.value.theme),v=io(),o=y(()=>v),l=U(!1),g=U(!1),r=U(!0),b=y(()=>k.value.chainName),Y=y(()=>b.value?to(b.value):{}),se=lo(),ie=y(()=>se),V=y(()=>k.value.slippage),u=U(),p=U(),$=y(()=>{var I,W;return(W=(I=s.value)==null?void 0:I.poolInfo)==null?void 0:W.needReverse}),c=y(()=>{var I;return ke(s==null?void 0:s.value.amountA,(I=s==null?void 0:s.value.token_a)==null?void 0:I.decimals)}),T=y(()=>{var I;return ke(s==null?void 0:s.value.amountB,(I=s==null?void 0:s.value.token_b)==null?void 0:I.decimals)}),f=I=>{I==="fromCoin"?r.value=!0:r.value=!1,N.value=100,x({value:1})},_=I=>{I==="fromCoin"?(r.value=!0,i.value=Me(new h(Number(c.value)).div(2).toString(),u.value.decimals).toString()):(r.value=!1,a.value=Me(new h(Number(T.value)).div(2).toString(),p.value.decimals).toString()),C.value=!1},s=U({}),ae=U(!0),K=U({}),ee=U(),H=U(),C=U(!0),M=()=>{var Ye;if(C.value||!s.value||!i.value&&!a.value||Number(i.value)>Number(c.value)||Number(a.value)>Number(T.value))return;if(i.value==c.value&&a.value==T.value){N.value=100,x({value:1}),C.value=!0;return}const{TickMath:I,TickUtil:W}=Y.value;let S=s.value.minPrice,re=s.value.maxPrice.indexOf("+")>0?"âˆž":s.value.maxPrice,be=Number(s.value.tick_lower_index),$e=Number(s.value.tick_upper_index);const Te=Number(s.value.current_tick_index);let Ie,Ne,Ee=Number(S).toString(),De=s.value.maxPrice.indexOf("+")>0||s.value.maxPrice==="âˆž"?"âˆž":Number(re);if(Ee=="0"&&De=="âˆž"?(be=Number(s.value.tick_lower_index),$e=Number(s.value.tick_upper_index)):(Ie=I.priceToSqrtPriceX64(new h(S),u.value.decimals,p.value.decimals),Ne=I.priceToSqrtPriceX64(new h(re),u.value.decimals,p.value.decimals)),ee.value=be,H.value=$e,re!=="âˆž"&&be>=$e){l.value=!0,i.value="",g.value=!0,a.value="";return}if(re=="âˆž"||Te>=be&&Te<=$e){l.value=!1,g.value=!1;let Re;if(i.value||a.value){if(r.value){const fe=new h(i.value).mul(Math.pow(10,u.value.decimals)).toString();Re=new Oe(fe)}else{const fe=new h(a.value).mul(Math.pow(10,p.value.decimals)).toString();Re=new Oe(fe)}const{liquidityAmount:Ue,tokenMaxA:Fe,tokenMaxB:We,tokenMaxAOrigin:Ze,tokenMaxBOrigin:ye}=Y.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:u.value,tokenB:p.value,lowerTick:be,upperTick:$e,coinAmount:Re,iscoinA:ae.value?r.value:!r.value,roundUp:b.value!="Sui",slippage:Number(V.value)/100,curSqrtPrice:new Oe(s.value.current_sqrt_price)});K.value={liquidityAmount:Ue,tokenMaxA:Fe,tokenMaxB:We,tokenMaxAOrigin:Ze,tokenMaxBOrigin:ye},ae.value?r.value?a.value=Number(We)>0?We:"":i.value=Number(Fe)>0?Fe:"":r.value?a.value=Fe:i.value=We}}else if(Te>$e){if(i.value="",l.value=!0,g.value=!1,i.value||a.value){let Re;const Ue=new h(a.value).mul(Math.pow(10,(Ye=p.value)==null?void 0:Ye.decimals)).toString();Re=new Oe(Ue),K.value={liquidityAmount:Oo(Ie,Ne,Re),tokenMaxA:0,tokenMaxB:a.value}}}else if(Te<be){if(l.value=!1,g.value=!0,a.value="",i.value||a.value){let Re;const Ue=new h(i.value).mul(Math.pow(10,u.value.decimals)).toString();Re=new Oe(Ue),K.value={liquidityAmount:qo(Ie,Ne,Re),tokenMaxA:i.value,tokenMaxB:0}}}else l.value=!0,g.value=!0;C.value=!1,N.value=new h(K.value.liquidityAmount.toString()).div(s.value.liquidity).mul(100).toNumber().toFixed(2),z.value=K.value.liquidityAmount,v.setPositionActionAmount({fromCoinAmount:i,toCoinAmount:a})},N=U(50),z=U("0"),x=I=>{if(!C.value)return;C.value=!0;const W=s.value.token_a.decimals,S=s.value.token_b.decimals,re=s.value.tick_lower_index,be=s.value.tick_upper_index,$e=Co.tickIndexToSqrtPriceX64(re),Te=Co.tickIndexToSqrtPriceX64(be);let Ie="";I.value!==1?Ie=new h(s.value.liquidity).mul(I.value).toString():Ie=s.value.liquidity,Ie=Me(Ie,0)||"0",z.value=Ie;const Ne=nn.getCoinAmountFromLiquidity(new Oe(Ie),new Oe(s.value.current_sqrt_price),$e,Te,b.value!="Sui"),Ee=new h(Ne.coinA.toString()).div(Math.pow(10,W)).toString(),De=new h(Ne.coinB.toString()).div(Math.pow(10,S)).toString();i.value=Number(Ee)>0?Ee:"",a.value=Number(De)>0?De:"",v.setPositionActionAmount({fromCoinAmount:i,toCoinAmount:a})};we(()=>o.value.currentPositionInfo,I=>{if(I&&!me(I)){s.value=I,u.value=s.value.token_a,p.value=s.value.token_b,x({value:N.value/100});let W=Number(s.value.tick_lower_index),S=Number(s.value.tick_upper_index);const re=Number(s.value.current_tick_index);(I.maxPrice.indexOf("+")>0||I.maxPrice==="âˆž"?"âˆž":I.maxPrice)=="âˆž"||re>=W&&re<=S?(l.value=!1,g.value=!1):re>S?(i.value="",l.value=!0,g.value=!1):re<W?(l.value=!1,g.value=!0,a.value=""):(l.value=!0,i.value="",g.value=!0,a.value=""),M()}},{immediate:!0}),we(i,(I,W)=>{I&&M(),I==""&&(a.value="",N.value=0)}),we(a,(I,W)=>{I&&M(),I==""&&(i.value="",N.value=0)});const J=y(()=>o.value.RATES),ne=y(()=>{var $e,Te,Ie,Ne;const I=((Te=J.value[($e=u.value)==null?void 0:$e.address])==null?void 0:Te.price)||0,W=((Ne=J.value[(Ie=p.value)==null?void 0:Ie.address])==null?void 0:Ne.price)||0,S=new h(I).mul(new h(i.value||0)),re=new h(W).mul(new h(a.value||0)),be=S.add(re);return Q(be.toString(),2)}),Z=U(!1),{t:pe,locale:B}=yo(),he=y(()=>{const I=Number(i.value)>Number(c.value),W=Number(a.value)>Number(T.value);return!i.value&&!a.value?pe("button.enterAmount"):I||W?"Invalid Amount":pe("button.remove")}),_e=y(()=>{const I=Number(i.value)>Number(c.value),W=Number(a.value)>Number(T.value);return!!(!i.value&&!a.value||I||W)}),{setIsShowSuccess:je,setIsShowRejected:Be,setIsShowWaiting:Ce,setTransactionDesc:d,setTransactionTxid:m,setPositiomNum:A,setTransactionDescText:E}=O,D=U(!1);we(N,rn((I,W)=>{I!==W&&(Number(I)>100?N.value=100:I&&s.value?(N.value=I,x({value:N.value/100})):(i.value="",a.value=""))},300)),we(V,I=>{I&&s.value&&x({value:N.value/100})});const j=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],X=Uo(),oe=y(()=>X),te=y(()=>oe.value.status),ve=U(!1),Ae=I=>{I.sources.forEach(S=>{const{pool_address:re,position_index:be}=JSON.parse(S.blockchainAddress);re==s.value.poolAddress&&Number(be)==Number(s.value.index)&&(ve.value=!0)})},q=async()=>{await X.getSources();let I;oe.value.allSources.forEach(W=>{const{pool_address:S,position_index:re}=JSON.parse(W.blockchainAddress);S==s.value.poolAddress&&re==s.value.index&&(I=W.id)}),X.deleteSource(I)};we(()=>[oe.value.sourceGroups,s.value],([I,W])=>{I&&I.sources&&I.sources.length>0&&W&&!me(W)&&Ae(I)},{immediate:!0,deep:!0});const L=ro(),ue=fo();return{theme:R,showFromCoinLock:l,showToCoinLock:g,toCoinAmount:a,fromCoinAmount:i,fromCoinBlance:c,toCoinBlance:T,fromCoin:u,toCoin:p,maxBtnSelect:f,halfBtnSelect:_,fixedFromCoin:r,needReverse:$,totalAmount:ne,wallet:ie,addLiquidityBtnText:he,isShowLiquidityModal:Z,indexStore:O,positionInfo:s,actionLoading:D,addLiquidityBtnDisabled:_e,sliderVal:N,ratioArr:j,setPercent:x,poolStore:v,isSlider:C,toRemove:async()=>{var be,$e,Te,Ie,Ne,Ee,De,Ye,Re,Ue,Fe,We,Ze;D.value=!0,m("");const I=Q(i.value,u.value.decimals)==0?"":`${ke(i.value,u.value.decimals)} ${u.value.symbol}`,W=Q(a.value,p.value.decimals)==0?"":`${ke(a.value,p.value.decimals)} ${p.value.symbol}`;d(pe("tips.removeLiquidiyText",{from:$.value?W:I,and:Q(i.value,u.value.decimals)==0||Q(a.value,p.value.decimals)==0?"":"and",to:$.value?I:W})),Ce(!0);const S=s.value.poolInfo.rewarder_infos,re=S&&S.length>0&&b.value=="Sui"||S&&S.length>0&&N.value==100?pe("modal.removeLiquidityText1"):pe("modal.removeLiquidityText2");E(re);try{let ye={};ye={pool:{...s.value.poolInfo,coinA:s.value.token_a,coinB:s.value.token_b},coinTypeA:s.value.poolInfo.coinTypeA,coinTypeB:s.value.poolInfo.coinTypeB,position:s.value,delta_liquidity:N.value==100?new Oe(s.value.liquidity):new Oe(Me(z.value,0)),slippage:Number(V.value),rewards_num:S.length,positionInfo:s.value},ye.coinTypeC=S[0]?S[0].coinAddress:"",ye.coinTypeD=S[1]?S[1].coinAddress:"",ye.coinTypeE=S[2]?S[2].coinAddress:"";const fe=await Y.value.getRemoveLiquidityTransactionPayload(ye);let He;if(b.value==="Aptos")He=await ie.value.currentWallet.signAndSubmitTransaction(fe);else{const ao=await Y.value.signAndExecuteTransactionBlock(ie.value.currentWallet,fe.txb,fe==null?void 0:fe.payloadParams);He=Y.value.handleTx(ao),console.log("0331###remove###tx####",He)}if(He&&He.hash){m(He.hash),Ce(!1),je(!0);const ao={title:pe("common.removeLiquidity"),desc:"",hash:He.hash,descTransactions:`Remove ${i.value} ${(be=u.value)==null?void 0:be.symbol} and ${a.value} ${($e=p.value)==null?void 0:$e.symbol} 
             from the pool`,sender:ie.value.address,chainName:b.value,tit:"Liquidity Removed",icon:"icon-icon-Removed",tokenInfo:{tokena:$.value?`${(Ie=p.value)==null?void 0:Ie.address}`:`${(Te=u.value)==null?void 0:Te.address}`,numa:$.value?`+ ${a.value}`:`+ ${i.value}`,logoa:$.value?o.value.tokensObj&&p.value&&p.value.address&&o.value.tokensObj[p.value.address]&&o.value.tokensObj[p.value.address].logoURI:o.value.tokensObj&&u.value&&u.value.address&&o.value.tokensObj[u.value.address]&&o.value.tokensObj[u.value.address].logoURI,tokenb:$.value?`${(Ne=u.value)==null?void 0:Ne.address}`:`${(Ee=p.value)==null?void 0:Ee.address}`,numb:$.value?`+ ${i.value}`:`+ ${a.value}`,logob:$.value?o.value.tokensObj&&u.value&&u.value.address&&o.value.tokensObj[u.value.address]&&o.value.tokensObj[u.value.address].logoURI:o.value.tokensObj&&p.value&&p.value.address&&o.value.tokensObj[p.value.address]&&o.value.tokensObj[p.value.address].logoURI},text:`Withdraw ${i.value} ${(De=u.value)==null?void 0:De.symbol} and ${a.value} ${(Ye=p.value)==null?void 0:Ye.symbol}`};b.value!=="Aptos"&&(ao.res=He.res),Y.value.showTransitionPending(ao);const Ao=await Y.value.watchTransaction(ao);if(S.value&&S.value.length>0&&(Number((Re=S[0])==null?void 0:Re.amount)!==0||ye.coinTypeD&&Number((Ue=S[1])==null?void 0:Ue.amount)!==0||ye.coinTypeE&&Number((Fe=S[2])==null?void 0:Fe.amount)!==0)){const ho={title:pe("common.removeLiquidity"),desc:"",hash:He.hash,tit:"Rewards Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:S[0].symbol,numa:`+ ${Number(S[0].amount)}`,logoa:o.value.tokensObj&&S[0]&&S[0].address&&o.value.tokensObj[S[0].address]&&o.value.tokensObj[S[0].address].logoURI,tokenb:ye.coinTypeD?S[1].symbol:"",numb:ye.coinTypeD?`+ ${Number(S[1].amount)}`:"",logob:ye.coinTypeD?o.value.tokensObj&&S[1]&&S[1].address&&o.value.tokensObj[S[1].address]&&o.value.tokensObj[S[1].address].logoURI:"",tokenc:ye.coinTypeE?S[2].symbol:"",numc:ye.coinTypeE?`+ ${Number(S[2].amount)}`:"",logoc:ye.coinTypeE?o.value.tokensObj&&S[2]&&S[2].address&&o.value.tokensObj[S[2].address]&&o.value.tokensObj[S[2].address].logoURI:""},text:`Withdraw ${i.value} ${(We=u.value)==null?void 0:We.symbol} and ${a.value} ${(Ze=p.value)==null?void 0:Ze.symbol}`},Qo=await Y.value.setTransations(ho)}if(Se(s.value.feeOwedA,s.value.token_a.decimals)!==0||Se(s.value.feeOwedB,s.value.token_b.decimals)!==0){const ho={title:"Claim",desc:"",hash:He.hash,chainName:b.value,tit:"Fees Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:`${s.value.token_a.symbol}`,numa:Q(s.value.feeOwedA,s.value.token_a.decimals)==0?"":`+ ${Se(s.value.feeOwedA,s.value.token_a.decimals)}`,logoa:Q(s.value.feeOwedA,s.value.token_a.decimals)==0?"":o.value.tokensObj&&s.value&&s.value.token_a.address&&o.value.tokensObj[s.value.token_a.address]&&o.value.tokensObj[s.value.token_a.address].logoURI,tokenb:`${s.value.token_b.symbol}`,numb:Q(s.value.feeOwedB,s.value.token_b.decimals)==0?"":`+ ${Se(s.value.feeOwedB,s.value.token_b.decimals)}`,logob:Q(s.value.feeOwedB,s.value.token_b.decimals)==0?"":o.value.tokensObj&&s.value&&s.value.token_b.address&&o.value.tokensObj[s.value.token_b.address]&&o.value.tokensObj[s.value.token_b.address].logoURI}},Qo=await Y.value.setTransations(ho)}Ao&&Number(N.value)==100&&te.value=="authenticated"&&ve.value&&(await X.subscribePosition({pool_address:s.value.poolAddress,position_index:s.value.index},s.value.nftHash,!1),q()),Ao&&(i.value="",a.value="",setTimeout(()=>{Number(N.value)!==100&&t.emit("getDetails")},3e3),setTimeout(()=>{Number(N.value)!==100&&t.emit("getDetails")},6e3),Number(N.value)==100&&ue.name=="new-position-detail"&&(b.value==="Aptos"?L.push("/position"):L.push("/pool/position")),N.value=0)}else Ce(!1),Be(!0);D.value=!1}catch(ye){console.log("Remove error",ye),D.value=!1,Ce(!1),Be(!0)}},sFixD:Me}}});const xi={class:"new-position-asset"},ea={class:"add-or-remove"},oa={class:"liquidity-action-tab"},na=n("div",{class:"remove tab-active"},"Remove",-1),ta={class:"card-item"},ia={key:0,class:"assets-card-mask"},aa={class:"card-item"},sa={key:0,class:"assets-card-mask"},la={class:"remove-ratio"},ra=n("div",{class:"remove-ratio-title"},"Amount",-1),ua={class:"remove-ratio-select"},da={key:0,class:"ratio"},ca={key:1,class:"ratio"},ma={class:"ratio-list"},va=["onClick"];function fa(e,t,i,a,O,k){const R=po,v=un,o=uo;return w(),P("div",xi,[n("div",ea,[n("div",oa,[n("div",{class:"increase",onClick:t[0]||(t[0]=l=>e.poolStore.setPositionDetailCurrentTab("increase"))}," Increase "),na]),n("div",{class:ko(e.needReverse?"card-container reverse":"card-container")},[n("div",ta,[le(R,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[1]||(t[1]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,havehalf:!1,"amount-leabl":"Available",onOnMax:t[2]||(t[2]=l=>e.maxBtnSelect("fromCoin")),onOnHalf:t[3]||(t[3]=l=>e.halfBtnSelect("fromCoin")),onOnInput:t[4]||(t[4]=l=>{e.fromCoinAmount=l,e.fixedFromCoin=!0,e.isSlider=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.fromCoinBlance==0?(w(),P("div",ia)):de("",!0)]),n("div",aa,[le(R,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[5]||(t[5]=l=>e.toCoinAmount=l),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,havehalf:!1,"amount-leabl":"Available",onOnMax:t[6]||(t[6]=l=>e.maxBtnSelect("toCoin")),onOnHalf:t[7]||(t[7]=l=>e.halfBtnSelect("toCoin")),onOnInput:t[8]||(t[8]=l=>{e.toCoinAmount=l,e.fixedFromCoin=!1,e.isSlider=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.toCoinBlance==0?(w(),P("div",sa)):de("",!0)])],2),n("div",la,[ra,n("div",ua,[Number(e.fromCoinBlance)>=Number(e.fromCoinAmount)&&Number(e.toCoinBlance)>=Number(e.toCoinAmount)?(w(),P("div",da,F(e.sliderVal>0&&Number(("sFixD"in e?e.sFixD:G(Me))(e.sliderVal,2))<.01?"<0.01":("sFixD"in e?e.sFixD:G(Me))(e.sliderVal,2))+"% ",1)):(w(),P("div",ca," -- ")),n("div",ma,[(w(!0),P(Ve,null,oo(e.ratioArr,(l,g)=>(w(),P("div",{key:g,class:ko(["ratio-item",e.sliderVal==l.value?"ratio-item-active":""]),onClick:()=>{e.isSlider=!0,e.sliderVal=l.value}},F(l.name),11,va))),128))])]),le(v,{value:e.sliderVal,"onUpdate:value":t[9]||(t[9]=l=>e.sliderVal=l)},null,8,["value"])])]),e.wallet.connected?(w(),qe(o,{key:0,class:"big-btn liquidity-btn",loading:e.actionLoading,disabled:e.addLiquidityBtnDisabled,onClick:e.toRemove},{default:Le(()=>[n("span",null,F(e.addLiquidityBtnText),1)]),_:1},8,["loading","disabled","onClick"])):(w(),qe(o,{key:1,class:"big-btn",onClick:t[10]||(t[10]=l=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:Le(()=>[n("span",null,F(e.$t("button.connectWallet")),1)]),_:1}))])}const Yo=Qe(Vi,[["render",fa]]),pa=Je({setup(){const e=io(),t=y(()=>e),i=jo(),a=y(()=>i),O=ro(),k=y(()=>t.value.currentPositionInfo),R=U(),v=H=>{var C;return((C=t.value.tokensObj[H])==null?void 0:C.logo_url)||no("/image/coins/sui-unknown.png")},o=tn("Sui"),l=U(),g=async H=>{l.value=0;try{const C=await o.calculateFarmingRewards([{pool_id:H.pool_id,position_nft_id:H.id}]),M=[];let N=new h(0);C[H.id].forEach((z,x)=>{var Z;const J=(Z=t.value.tokensObj[z.rewarder_type])==null?void 0:Z.decimals;let ne=new h(z.rewarder_amount).div(Math.pow(10,J)).toString();Number(ne)>0&&b.value.rewarders[x]&&(N=N.add(ne),M.push({...z,rewarderAmount:ne,rewarderAmountPer:ne}))}),l.value=N,R.value=M}catch(C){console.log(C,"getRewarder")}},r=y(()=>a.value.farmsPoolObj),b=y(()=>r.value[k.value.poolAddress]);we(()=>[k.value,r.value,b.value],([H,C,M])=>{var N;!me(H)&&H.positionSource=="farming"&&!me(M)?g(H):!me(C)&&!me(H)&&(R.value=(N=C[H.poolAddress])==null?void 0:N.rewarders)},{immediate:!0});const Y=lo(),se=y(()=>Y),ie=Ge(),V=to("Sui"),{setIsShowSuccess:u,setIsShowRejected:p,setIsShowWaiting:$,setTransactionDesc:c,setTransactionTxid:T}=ie,f=U(!1),_=async()=>{f.value=!0,T(""),c("Claim rewards"),$(!0);const H={pool_id:k.value.pool_id,position_nft_id:k.value.id};try{const C=await o.harvestFarms(H),M=await V.signAndExecuteTransactionBlock(se.value.currentWallet,C.txb,C.payloadParams);console.log("0221###sui swap res###",M);let N=V.handleTx(M);if(N&&N.hash){T(N.hash),$(!1),u(!0);let z={title:"Claim",res:N.res,hash:N.hash};V.showTransitionPending(z),await V.watchTransaction(z)&&setTimeout(()=>{g(k.value)},2e3)}else $(!1),p(!0);f.value=!1}catch(C){console.log("farmsDeposit error",C),$(!1),p(!0),f.value=!1}},s=async()=>{f.value=!0,T(""),c(`Unstake ${k.value.name}`),$(!0);const H=k.value.pool_id,C=k.value.id;try{const M=await o.farmsWithdraw(H,C),N=await V.signAndExecuteTransactionBlock(se.value.currentWallet,M.txb,M.payloadParams);console.log("0221###sui swap res###",N);let z=V.handleTx(N);if(z&&z.hash){T(z.hash),$(!1),u(!0);let x={res:z.res,title:"Unstake",hash:z.hash};V.showTransitionPending(x),await V.watchTransaction(x)&&setTimeout(()=>{O.replace(`/new-position-detail?token=${k.value.tokenName}&address=${k.value.clmm_pool_id}&pos=${k.value.clmm_position_id}`),t.value.setCurrentPositionInfo(k.value.clmm_pool_id,"",k.value.tokenName,"Sui",k.value.clmm_position_id),l.value=0,f.value=!1},2e3)}else $(!1),p(!0)}catch(M){console.log("farmsDeposit error",M),$(!1),p(!0),f.value=!1}},ae=async()=>{f.value=!0,T(""),c(`Stake ${k.value.name}`),$(!0);const H={clmm_pool_id:k.value.poolAddress,clmm_position_id:k.value.pos_object_id,coinTypeA:k.value.coin_type_a,coinTypeB:k.value.coin_type_b},C=r.value[k.value.poolAddress].id;try{const M=await o.farmsDeposit(H,C),N=await V.signAndExecuteTransactionBlock(se.value.currentWallet,M.txb,M.payloadParams);console.log("0221###sui swap res###",N);let z=V.handleTx(N);if(z&&z.hash){T(z.hash),$(!1),u(!0);let x={res:z.res,title:"Staked",hash:z.hash};V.showTransitionPending(x);const J=await V.watchTransaction(x,!0);let ne;J!=null&&J.status&&setTimeout(async()=>{var Z,pe;(pe=(Z=J==null?void 0:J.res)==null?void 0:Z.events)==null||pe.forEach(B=>{B.type.indexOf("::pool::DepositEvent")>-1&&(ne=B.parsedJson.wrapped_position_id)}),O.replace(`/new-position-detail?position_nft_id=${ne}&positionSource=farming`),await t.value.setCurrentPositionInfo("","","","Sui",ne,"farming"),f.value=!1},2e3)}else $(!1),p(!0)}catch(M){console.log("farmsDeposit error",M),$(!1),p(!0),f.value=!1}},K=y(()=>ie),ee=y(()=>K.value.addressLpTokens);return{getCoinIcon:v,rewardList:R,sFixD:Me,addCommom:Q,claim:_,unStake:s,loading:f,totalRewardAmount:l,currentPositionInfo:k,stake:ae,farmsPoolObj:r,addressLpTokens:ee,farmsPoolInfo:b}}});const xe=e=>(mo("data-v-deedd8aa"),e=e(),vo(),e),ha={key:0,class:"farms-position-detail"},ba={class:"farms-top"},ka=xe(()=>n("div",{class:"left"},[n("div",{class:"title"},"Farming"),n("div",{class:"desc"},"Stake Position to Earn")],-1)),ga={class:"right"},_a={class:"apr"},wa={class:"apr-tips-box"},ya=xe(()=>n("span",null,"View",-1)),Aa=xe(()=>n("svg",{class:"arrow-icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_arrow"})],-1)),Ia=[ya,Aa],Ca={class:"farms-bottom"},$a=xe(()=>n("div",{class:"title"},"Farming Rewards",-1)),Sa={key:0,class:"reward-list"},Pa={key:0,class:"rewards-item-bg"},Ta={class:"rewards-item-box"},Na={alt:""},Ra={key:1},Oa={class:"rewards-item-bg"},qa={class:"rewards-item-box"},La={alt:""},Ba=xe(()=>n("span",null,"0",-1)),Ma={key:1,class:"reward-list"},Ua={key:0,class:"rewards-item-bg"},ja={class:"rewards-item-box"},Ea={alt:""},Da=xe(()=>n("span",null,"0",-1)),Fa={key:1},Wa={class:"rewards-item-bg"},Ha={class:"rewards-item-box"},Xa={alt:""},za=xe(()=>n("span",null,"0",-1)),Ya={class:"actions-box"};function Ga(e,t,i,a,O,k){var g,r;const R=kn,v=uo,o=dn,l=wo("image");return e.farmsPoolObj&&e.farmsPoolObj[e.currentPositionInfo.poolAddress]&&e.farmsPoolObj[e.currentPositionInfo.poolAddress].status=="Live"||e.currentPositionInfo.positionSource=="farming"?(w(),P("div",ha,[n("div",ba,[ka,n("div",ga,[n("div",_a,[ce(" APRÂ  "),n("span",null,[ce(F(("addCommom"in e?e.addCommom:G(Q))(e.farmsPoolInfo.total_apr*100,2))+"%Â  ",1),n("div",wa,[le(R,{"l-item":e.farmsPoolInfo,"rewarder-info":(r=(g=e.farmsPoolInfo)==null?void 0:g.rewarder)==null?void 0:r.rewardList},null,8,["l-item","rewarder-info"])])])]),n("div",{class:"view",onClick:t[0]||(t[0]=b=>e.$router.push("/farms"))},Ia)])]),n("div",Ca,[$a,e.rewardList&&e.rewardList.length>0?(w(),P("div",Sa,[(w(!0),P(Ve,null,oo(e.rewardList,b=>(w(),P("div",{key:b,class:"rewards-item"},[e.currentPositionInfo.positionSource=="farming"?(w(),P("div",Pa,[n("div",Ta,[Pe(n("img",Na,null,512),[[l,e.getCoinIcon(b.rewarder_type)]]),n("span",null,F(("addCommom"in e?e.addCommom:G(Q))(b.rewarderAmount||0)),1)])])):(w(),P("div",Ra,[n("div",Oa,[n("div",qa,[Pe(n("img",La,null,512),[[l,e.getCoinIcon(b.reward_coin)]]),Ba])])]))]))),128))])):(w(),P("div",Ma,[(w(!0),P(Ve,null,oo(e.currentPositionInfo.rewards,b=>(w(),P("div",{key:b,class:"rewards-item"},[e.currentPositionInfo.positionSource=="farming"?(w(),P("div",Ua,[n("div",ja,[Pe(n("img",Ea,null,512),[[l,e.getCoinIcon(b.rewarder_type)]]),Da])])):(w(),P("div",Fa,[n("div",Wa,[n("div",Ha,[Pe(n("img",Xa,null,512),[[l,e.getCoinIcon(b.reward_coin)]]),za])])]))]))),128))])),n("div",Ya,[e.currentPositionInfo&&e.currentPositionInfo.positionSource=="farming"?(w(),qe(v,{key:0,class:"unstake-btn",loading:e.loading,onClick:e.unStake},{default:Le(()=>[ce("Unstake")]),_:1},8,["loading","onClick"])):de("",!0),e.currentPositionInfo&&e.currentPositionInfo.positionSource=="clmm"&&e.currentPositionInfo.currentStatus!=="Active"?(w(),qe(o,{key:1},{title:Le(()=>[ce("Farming rewards are only available for active positions.")]),default:Le(()=>[le(v,{class:"unstake-btn",loading:e.loading,disabled:!0,onClick:e.stake},{default:Le(()=>[ce("Stake")]),_:1},8,["loading","onClick"])]),_:1})):e.currentPositionInfo&&e.currentPositionInfo.positionSource=="clmm"?(w(),qe(v,{key:2,class:"unstake-btn",loading:e.loading,onClick:e.stake},{default:Le(()=>[ce("Stake")]),_:1},8,["loading","onClick"])):de("",!0),le(v,{class:"unstake-btn btn-margin",loading:e.loading,disabled:e.totalRewardAmount==0||e.currentPositionInfo&&e.currentPositionInfo.positionSource!=="farming",onClick:Mo(e.claim,["stop"])},{default:Le(()=>[ce("â†‘ Claim")]),_:1},8,["loading","disabled","onClick"])])])])):de("",!0)}const Go=Qe(pa,[["render",Ga],["__scopeId","data-v-deedd8aa"]]),Ja=Je({props:{positionInfo:{type:Object,default:()=>({})}},setup(e){const t=Uo(),i=y(()=>t),a=y(()=>i.value.status),O=Ge(),k=U(!1);we(()=>a.value,l=>{l=="authenticated",k.value=!1},{immediate:!0});const R=U(!1),v=async()=>{R.value=!R.value;const l={pool_address:e.positionInfo.poolAddress||e.positionInfo.clmm_pool_id,position_index:e.positionInfo.index||e.positionInfo.name.split("-")[1]},g=e.positionInfo.clmm_position_id||e.positionInfo.nftHash;try{await t.subscribePosition(l,g,R.value)}catch{R.value=!R.value}},o=l=>{const g=l.sources;console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-notifi.vue:172 ~ getPositionNotifiStatus ~ sources:",g),R.value=g.some(r=>JSON.parse(r.blockchainAddress).pool_address==e.positionInfo.poolAddress&&Number(JSON.parse(r.blockchainAddress).position_index)==(Number(e.positionInfo.index)||Number(e.positionInfo.name.split("-")[1])))};return ro(),we(()=>[i.value.sourceGroups,e.positionInfo],([l,g])=>{R.value=!1,l&&l.length>0&&l[0]&&g&&!me(g)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-notifi.vue:206 ~ setup ~ getPositionNotifiStatus:"),o(l[0]))},{immediate:!0,deep:!0}),{importIcon:no,isShowSetUp:k,changeSwitch:v,checked:R,notifiStatus:a,store:O}}});const Qa=e=>(mo("data-v-1a37a36d"),e=e(),vo(),e),Za={class:"range-alerts"},Ka={class:"range-alerts-top"},Va={class:"title"},xa=Qa(()=>n("div",{class:"title-all"},[n("span",{class:"Range"},"Range Alerts")],-1)),es={key:1,class:"h5-switch-box"},os={class:"range-alerts-bottom"},ns={key:0,class:"pc-switch-box"};function ts(e,t,i,a,O,k){const R=uo,v=cn;return w(),P("div",Za,[n("div",Ka,[n("div",Va,[xa,e.isShowSetUp||e.notifiStatus!=="authenticated"?(w(),qe(R,{key:0,class:"range-alerts-button",onClick:t[0]||(t[0]=Mo(o=>e.store.setIsShowNotifi(!0),["stop"]))},{default:Le(()=>[ce(" Set up ")]),_:1})):de("",!0),!e.isShowSetUp&&e.notifiStatus=="authenticated"?(w(),P("div",es,[le(v,{class:"range-alerts-switch",checked:e.checked,disabled:e.notifiStatus!=="authenticated",onChange:e.changeSwitch},null,8,["checked","disabled","onChange"])])):de("",!0)])]),n("div",os,[ce(" Receive alerts via Telegram, SMS, or email when this position goes out of range. "),!e.isShowSetUp&&e.notifiStatus=="authenticated"?(w(),P("div",ns,[le(v,{class:"range-alerts-switch",checked:e.checked,disabled:e.notifiStatus!=="authenticated",onChange:e.changeSwitch},null,8,["checked","disabled","onChange"])])):de("",!0)])])}const Jo=Qe(Ja,[["render",ts],["__scopeId","data-v-1a37a36d"]]),is=Je({components:{NewPositionTitle:No,NewPositionInfo:Ho,NewPositionLiquidity:Xo,NewPositionAssetAdd:zo,NewPositionAssetRemove:Yo,NewPositionNotifi:Jo,FarmsPositionDetail:Go},setup(){const e=U(),t=U(),i=U(),a=Ge(),O=y(()=>a),k=y(()=>O.value.chainName),R=io(),v=y(()=>R),o=jo(),l=ro();Lo(()=>{e.value={},R.setPositionActionAmount({fromCoinAmount:"",toCoinAmount:""}),v.value.setCurrentPositionLoading(!0),o.getFarmsPoolList()});const g=async()=>{v.value.setCurrentPositionLoading(!0);const u=l.currentRoute.value.query.token||"",p=l.currentRoute.value.query.collect||"",$=l.currentRoute.value.query.address||"",c=l.currentRoute.value.query.pos||"",T=l.currentRoute.value.query.id||"",f=l.currentRoute.value.query.positionSource||"",_=l.currentRoute.value.query.position_nft_id||"";k.value==="Aptos"?u&&p&&$&&v.value.setCurrentPositionInfo($,p,u,k.value):u&&$&&c?v.value.setCurrentPositionInfo($,p,u,k.value,c):T&&!f?v.value.setCurrentPositionInfo("","","",k.value,T):v.value.setCurrentPositionInfo("","","",k.value,_,f)};we(()=>v.value.poolConfigObj,u=>{u&&!me(u)&&g()},{immediate:!0});const r=y(()=>v.value.currentPositionLoading),b=y(()=>{var p,$,c;const u=((c=($=(p=l==null?void 0:l.currentRoute)==null?void 0:p.value)==null?void 0:$.query)==null?void 0:c.address)||"";return u&&v.value.addressLpTokens&&!me(v.value.addressLpTokens)&&v.value.addressLpTokens[u]?v.value.addressLpTokens[u]:null});we(()=>b.value,(u,p)=>{u&&!me(u)&&(e.value=u),u&&!me(u)&&u.current_sqrt_price!==(p==null?void 0:p.current_sqrt_price)&&g()},{immediate:!0});const Y=fo();we(()=>[v.value.currentPositionInfo,k.value],([u,p])=>{var $;(p=="Aptos"&&u||p=="Sui"&&u&&(u==null?void 0:u.nftHash)==(($=Y==null?void 0:Y.query)==null?void 0:$.pos))&&(e.value=u,t.value=e.value.token_a,i.value=e.value.token_b)},{immediate:!0});const se=y(()=>v.value.positionDetailCurrentTab),ie=lo();y(()=>ie),y(()=>O.value.theme);const V=()=>{g()};return mn(()=>{R.clearCurrentPositionInfo()}),{positionInfo:e,fromCoin:t,toCoin:i,getDetails:g,currentPositionLoading:r,positionDetailCurrentTab:se,clickRefresh:V,chainName:k}}});const as={class:"new-position-detail"},ss={class:"new-position-content"},ls={class:"left"},rs={class:"right"},us={class:"loading-global"};function ds(e,t,i,a,O,k){const R=No,v=Ho,o=Xo,l=zo,g=Yo,r=Go,b=Jo,Y=vn;return w(),P("div",as,[le(R,{onClickRefresh:e.clickRefresh},null,8,["onClickRefresh"]),n("div",ss,[n("div",ls,[le(v),le(o,{class:"pc-module",onGetDetails:e.getDetails},null,8,["onGetDetails"])]),n("div",rs,[e.positionDetailCurrentTab=="increase"?(w(),qe(l,{key:0,onGetDetails:e.getDetails},null,8,["onGetDetails"])):(w(),qe(g,{key:1,onGetDetails:e.getDetails},null,8,["onGetDetails"])),le(o,{class:"h5-module",onGetDetails:e.getDetails},null,8,["onGetDetails"]),e.chainName=="Sui"?(w(),qe(r,{key:2})):de("",!0),e.positionInfo&&e.positionInfo.minPrice!=="0"&&e.positionInfo.maxPrice!=="âˆž"&&e.chainName=="Sui"?(w(),qe(b,{key:3,"position-info":e.positionInfo},null,8,["position-info"])):de("",!0)])]),Pe(n("div",us,[le(Y)],512),[[Bo,e.currentPositionLoading]])])}const Ds=Qe(is,[["render",ds],["__scopeId","data-v-2fdfeeff"]]);export{Ds as default};
