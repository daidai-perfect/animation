import{b as ut,l as ai,n as bt,j as ue,c as wt,u as Bt,h as $e,d as K,s as ht,T as st,F as oi,a as ri,o as je,p as $t,q as si}from"./pool.8ef3a10d.js";import{a as nt,r as q,m as T,y as Ut,D as Ie,e as at,o as N,f as G,t as jt,U as li,h as r,G as kt,v as J,u as ne,x as Q,c as Ee,p as Ct,k as Pt,S as zt,i as Fe,w as xe,j as Ye,V as St,l as Ht,K as Tt,C as Xt,q as ui,F as yt,s as Ft,z as ft,Z as ci,$ as di,b as mi,B as vi}from"./entry.0d91eea8.js";/* empty css              */import{s as dt,m as fi,l as gi,b as pi,a as bi}from"./transform.c672907f.js";import{D as o}from"./decimal.0bdeb344.js";/* empty css              */import{d as Et,_ as Wt,c as Dt,a as Zt,b as hi}from"./new-liquidity-title.c04ba682.js";import{i as _t}from"./import-icon.de3e6c66.js";/* empty css              */import{positionError as it,fromCoin as k,toCoin as p,tickList as tt,currentPrice as lt,currentPriceReverse as mt,direction as ve,currentPriceTab as Z,defaultMinPrice as gt,defaultMaxPrice as pt,minPrice as L,maxPrice as y,toggle as Gt,isStableFarmingRange as Be,isInputTotalAmount as He,priceConfigObj as Qe,fromCoinAmount as C,toCoinAmount as P,fixedFromCoin as Te,resetTickList as Ot,resetData as ki}from"./data.5daecfff.js";import{u as It}from"./farms.fae494ad.js";import{_ as Kt}from"./icon_farms_2x.8debcb30.js";import{_ as yi}from"./coin-lock.9706c1ca.js";import{_ as _i}from"./coin-select.a0e151cb.js";import{_ as wi}from"./viewDetail.b5d3897c.js";import{_ as Ci}from"./token-warning-modal.59edae4a.js";import{a as Pi}from"./new-add-or-create.1f271fb6.js";import{u as Si}from"./notifi.ae9b1bed.js";import{_ as Ti,a as Ii}from"./icon-Add-Liquidity_2x.0acb06cb.js";import"./img-lock_2x.a28135f4.js";import"./index.1ea61039.js";/* empty css              */import"./token-warning.a21370a9.js";import"./swap-setting.489ffc50.js";import"./icon-warning_2x.18837743.js";import"./icon-error_2x.6237b570.js";import"./img-lock_2x.f8d0351d.js";import"./token-warning_2x.34cd881d.js";import"./img-no-Positions_2x.66b11cb8.js";import"./img-no-Positions_2x.5d150f18.js";import"./status-block.ccfd1a05.js";import"./icon-arrow_2x.948aedb2.js";import"./icon-arrow_2x.4ffddb8e.js";import"./icon-selected_3x.09e9a6f0.js";import"./useWhale.70b8eadb.js";function Rt(e,s,fe){const ae=new o(10).pow(s-fe);return new o(1.0001).pow(e).mul(ae)}const Ni=nt({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""},zoom:{type:Number,default:1}},setup(e,s){const fe=q(""),ae=q(""),M=T(()=>{var n,w,m,W,U,ee;return(n=e.poolInfo)!=null&&n.current_sqrt_price&&((w=e.poolInfo)!=null&&w.coinA)&&((m=e.poolInfo)!=null&&m.coinB)?a.sqrtPriceX64ToPrice((W=e.poolInfo)==null?void 0:W.current_sqrt_price,(U=e.poolInfo)==null?void 0:U.coinA.decimals,(ee=e.poolInfo)==null?void 0:ee.coinB.decimals).toString():"0"}),se=T(()=>{let n=0;return e.direction?n=(Number(e.minPrice)/Number(M.value)-1)*100:n=(Number(e.minPrice)/Number(1/Number(M.value))-1)*100,n=n>0&&n<.1?.1:n,n=n<0&&n>-.1?-.1:n,n}),F=T(()=>{let n=0;return e.direction?n=(Number(e.maxPrice)/Number(M.value)-1)*100:n=(Number(e.maxPrice)/Number(1/Number(M.value))-1)*100,n=n>0&&n<.1?.1:n,n=n<0&&n>-.1?-.1:n,n}),z=ut(),A=T(()=>z),x=T(()=>A.value.chainName?wt(A.value.chainName):{}),{TickMath:a,getNearestTickByTick:v}=x.value,O=(n=[])=>{let w=6;const m=Math.abs(Number(n[0])-Number(n[n.length-1]));return m>=6?w=0:m>=1?w=1:m>=.1?w=2:m>=.01?w=3:m>=.001?w=4:m>=1e-4?w=5:m>=1e-5?w=6:m>=1e-6?w=7:m>=1e-7&&(w=8),w},ye=(n,w=1)=>{if(n&&n.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const m=Number(e.poolInfo.current_tick_index);let W=m+100*w,U=m-100*w,ee,h;if(e.maxPrice==="âˆž")h=x.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?h=a.priceToTickIndex(new o(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):h=a.priceToTickIndex(new o(1).div(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{h=443636}if(e.minPrice==="0")ee=x.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?ee=a.priceToTickIndex(new o(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):ee=a.priceToTickIndex(new o(1).div(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{ee=-443636}let we=0;if(e.currentPriceTab!=="full range"){if(m>=ee&&m<=h){const I=m-ee,ce=h-m;we=Math.max(Math.abs(I),Math.abs(ce))}else m<ee?we=Math.abs(h-m):we=Math.abs(m-ee);W=m+we+100*w,U=m-we-100*w}else{const I=(Math.abs(m)>5e3,2e4);W=m+I*w,U=m-I*w}U<-443636&&(U=-443636),W>443636&&(W=443636);const g=new o(n.liquidity).div(Math.pow(10,8)).toString(),$=e.tickList,H=[],Pe=[];let _={};for(let I=0;I<$.length;I++){if(_=$[I],_.index<=m&&_.index>=U){if(H.length<1&&I!==0){const ce=$[I-1];H.unshift({...ce,index:U,source:"left"})}H.unshift(_)}else if(_.index>m&&_.index<=W&&(Pe.push(_),H.length<1&&I!==0)){const ce=$[I-1];H.push({...ce,index:U,source:"left"})}if(_.index>W){const ce=$[I];if(Pe.push({...ce,index:W,source:"right"}),H.length<1&&I!==0){const Ge=$[I-1];H.push({...Ge,index:U,source:"left"})}break}}let j="0";for(let I=H.length-1;I>=0;I--)j=new o(j).plus(new o(H[I].liquidityNet.toString()).div(Math.pow(10,8))).toString(),H[I].liquityAmount=j;let te=g;for(let I=0;I<Pe.length;I++)te=new o(te).plus(new o(Pe[I].liquidityNet.toString()).div(Math.pow(10,8))).toString(),Pe[I].liquityAmount=te;let le=[];const E=$&&$.length>0?{index:m,liquityAmount:Number(g)}:{index:m,liquityAmount:0};(H.length>0||Pe.length>0)&&(le=[...H.reverse(),E,...Pe],e.direction||(le=le.reverse()));const ze=[];$.forEach(I=>{ze.push({...I,liquidityGross:I.liquidityGross.toString(),liquidityNet:I.liquidityNet.toString()})}),X(le,U,W,ee,h,m)}};let _e=q(!1);const V=q(!1);Ut(()=>{const n=document.body.clientWidth;V.value=!0,n<750?_e.value=!1:_e.value=!0,window.onresize=()=>{document.body.clientWidth<750?_e.value=!1:_e.value=!0,ye(e.poolInfo,e.zoom)}});const X=(n,w,m,W,U,ee)=>{let h,we;e.direction?(h=Number(e.before7dContractPriceLowest)!==0?a.priceToTickIndex(new o(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",we=Number(e.before7dContractPriceHighest)!==0?a.priceToTickIndex(new o(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(h=Number(e.before7dContractPriceLowest)!==0?a.priceToTickIndex(new o(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",we=Number(e.before7dContractPriceHighest)!==0?a.priceToTickIndex(new o(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const g={top:30,right:35,bottom:20,left:80};let $,H;_e.value?($=460-g.left-g.right,H=205-g.top-g.bottom):($=340-g.left-g.right,H=205-g.top-g.bottom);const Pe=m-w,_=parseInt(String(Pe/4));let j=[w+_/4,w+_,w+2*_,m-_,m-_/4];const te=w,le=m,E=$/(le-te);e.currentPriceTab==="full range"&&(j=[w,w+2*_,m]);const ze=j.map(u=>e.direction?Rt(u,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new o(1).div(Rt(u,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString()),I=O(ze);dt("#chart").selectAll("*").remove();const ce=dt("#chart").attr("width",$+g.left+g.right).attr("height",H+g.top+g.bottom).append("g").attr("transform",`translate(${g.left},${g.right})`),Ge=fi(n,function(u){return Number(Math.abs(u.liquityAmount))})||0,Le=gi().range([0,H]).domain([Ge,0]);pi().rangeRound([0,$]).padding(.1);const Ve=ce.append("g").attr("id","barsBox").selectAll("rect").data(n).enter().append("rect");A.value.theme=="default"?Ve.attr("x",function(u,c){return c===0?0:e.direction?Math.abs(u.index-te)*E:Math.abs(le-u.index)*E}).attr("y",function(u,c){return e.direction?c===n.length-1?0:Le(u.liquityAmount):c===n.length-1?0:Le(n[c+1].liquityAmount)}).attr("width",function(u,c){return c===0&&n.length===1&&u.liquityAmount>0?$:(e.direction,c!==n.length-1?Math.abs(n[c+1].index-u.index)*E:0)}).attr("height",function(u,c){return c===0&&n.length===1&&u.liquityAmount>0?H:e.direction?c===n.length-1?0:H-Le(u.liquityAmount):c===n.length-1?0:H-Le(n[c+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):Ve.attr("x",function(u,c){return c===0?0:e.direction?Math.abs(u.index-te)*E:Math.abs(le-u.index)*E}).attr("y",function(u,c){return e.direction?c===n.length-1?0:Le(Math.abs(u.liquityAmount)):c===n.length-1?0:Le(Math.abs(n[c+1].liquityAmount))}).attr("width",function(u,c){return c===0&&n.length===1&&u.liquityAmount>0?$:(e.direction,c!==n.length-1?Math.abs(n[c+1].index-u.index)*E:0)}).attr("height",function(u,c){if(c===0&&n.length===1&&u.liquityAmount>0)return H;if(e.direction)return c===n.length-1?0:Number(u.liquityAmount)?H-Le(Math.abs(u.liquityAmount)):0;{if(c===n.length-1)return 0;const Ae=H-Le(Math.abs(n[c+1].liquityAmount));return Number(n[c+1].liquityAmount)?Ae:0}}).attr("fill",function(u,c){return"#417494"}).attr("class","bars").attr("stroke-width",1).attr("stroke",function(u,c){return"#417494"});const Ke=ce.append("g");Ke.append("line").attr("x1",0).attr("y1",155).attr("x2",$).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const Je=Ke.append("g");let Y=0;if(e.direction){for(let u=0;u<j.length;u++){const c=ue(ze[u],I)||"0";ze.push(c);const Ae=Math.abs(j[u]-te)*E;let oe=0;for(let Ce=0;Ce<c.length;Ce++)c[Ce]==="1"?oe+=4.02:c[Ce]==="."?oe+=2.64:c[Ce]==="7"?oe+=5.48:oe+=6;Je.append("text").text(c).attr("x",Ae-oe/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}Y=Math.abs(ee-te)*E}else{for(let u=j.length-1;u>=0;u--){const c=ue(ze[u],I)||0;ze.push(c);const Ae=Math.abs(j[u]-le)*E;let oe=0;for(let Ce=0;Ce<c.length;Ce++)c[Ce]==="1"?oe+=4.02:c[Ce]==="."?oe+=2.64:c[Ce]==="7"?oe+=5.48:oe+=6;Je.append("text").text(c).attr("x",Ae-oe/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}Y=Math.abs(ee-le)*E}(A.value.theme=="default"?ce.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):ce.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+Y+", 0)");let t,d,b,S;e.direction?(t=W<te?-100:parseInt(String(Math.abs(W-te)*E)),d=U<te?-100:parseInt(String(Math.abs(U-te)*E)),b=h<te?-100:Math.abs(h-te)*E,S=we<te?-100:Math.abs(we-te)*E):(d=W<te?-100:Math.abs(le-W)*E,t=U<te?-100:Math.abs(le-U)*E,S=h>le?-100:Math.abs(le-h)*E,b=we>le?-100:Math.abs(le-we)*E),e.minPrice==="0"&&(t=0),e.maxPrice==="âˆž"&&(d=$),_e.value?fe.value=$-t+94+"px":fe.value=$-t+87+"px",ae.value=d+98+"px",h&&b<$&&ce.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+b+", 0)"),we&&S<$&&ce.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+S+", 0)");const R=ce.append("g").attr("id","left-handle"),B=ce.append("g").attr("id","right-handle");A.value.theme=="default"?(R.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),R.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),R.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),R.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),B.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),B.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),B.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),B.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(R.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),R.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),R.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),R.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),B.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),B.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),B.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),B.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),R.attr("transform","translate("+t+", 0)"),B.attr("transform","translate("+d+", 0)");const Ne=bi().extent([[0,0],[$,H]]).handleSize(30).on("end",et);ce.append("g").attr("class","brush").call(Ne).call(Ne.move,[t,d]);function et(u){if(!u.sourceEvent||!u.selection)return;R.attr("transform","translate("+u.selection[0]+", 0)"),B.attr("transform","translate("+u.selection[1]+", 0)"),_e.value,fe.value=$-u.selection[0]+87+"px",ae.value=u.selection[1]+74+"px";let c,Ae,oe=0,Ce=0;e.direction?(oe=v(parseInt(String(u.selection[0]/E+te)),Number(e.poolInfo.tickSpacing)),c=a.tickIndexToPrice(oe,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),Ce=v(parseInt(String(u.selection[1]/E+te)),Number(e.poolInfo.tickSpacing)),Ae=a.tickIndexToPrice(Ce,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()):(Ce=v(le-u.selection[0]/E,Number(e.poolInfo.tickSpacing)),c=1/a.tickIndexToPrice(Ce,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),oe=v(le-u.selection[1]/E,Number(e.poolInfo.tickSpacing)),Ae=1/a.tickIndexToPrice(oe,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()),s.emit("onChangeMinPrice",String(ue(String(c),6))),s.emit("onChangeMaxPrice",String(ue(String(Ae),6)))}A.value.theme=="default"?dt(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):dt(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632")};return q(""),Ie(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab,e.zoom,e.tickList],([n,w,m,W,U,ee])=>{n&&w&&m&&(n!=null&&n.liquidity)&&ye(n,U)},{immediate:!0}),{store:A,loading:V,rangeSizeLower:se,rangeSizeUpper:F,rangeSizeLowerPosition:fe,rangeSizeUpperPosition:ae,decimalFormat:ai,numberformat:bt}}});const Ai=e=>(Ct("data-v-662ad41d"),e=e(),Pt(),e),Li={class:"chart-box"},qi={class:"chart"},Mi=Ai(()=>r("svg",{id:"chart"},null,-1));function $i(e,s,fe,ae,M,se){const F=zt;return N(),G("div",Li,[jt(r("div",qi,[e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="âˆž"?(N(),G("div",{key:0,class:"range-size range-size-lower",style:kt({right:e.rangeSizeLowerPosition})},J(("numberformat"in e?e.numberformat:ne(bt))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):Q("",!0),e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="âˆž"?(N(),G("div",{key:1,class:"range-size range-size-upper",style:kt({left:e.rangeSizeUpperPosition})},J(("numberformat"in e?e.numberformat:ne(bt))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):Q("",!0),Mi],512),[[li,!e.chartLoading]]),e.chartLoading?(N(),Ee(F,{key:0})):Q("",!0)])}const Jt=at(Ni,[["render",$i],["__scopeId","data-v-662ad41d"]]),Fi=nt({props:{lever:{type:String,default:""}},setup(){return{}}});const Oi=e=>(Ct("data-v-47f26f4b"),e=e(),Pt(),e),Ri={class:"lever"},Bi=Oi(()=>r("div",{class:"lever-title"},[r("span",null,"Leverage"),r("svg",{"aria-hidden":"true",class:"icon"},[r("use",{"xlink:href":"#icon-icon-tips1"})])],-1)),Ui={class:"lever-text"};function ji(e,s,fe,ae,M,se){const F=St;return N(),G("div",Ri,[Fe(F,{"overlay-class-name":"lever-tooltip"},{title:xe(()=>[Ye("This parameter indicates the concentration rate of your liquidity relative to a full range position.")]),default:xe(()=>[Bi]),_:1}),r("div",Ui,J(e.lever),1)])}const zi=at(Fi,[["render",ji],["__scopeId","data-v-47f26f4b"]]),Hi=nt({components:{NewLiquidityD3Chart:Jt,NewLiquidityPrice:Et},setup(){const{t:e,locale:s}=Ht(),fe=q("liquidity"),ae=ut(),M=T(()=>ae),se=T(()=>M.value.chainName),F=Bt(),z=T(()=>F),A=T(()=>M.value.chainName?wt(M.value.chainName):{});Ut(()=>{it.value=!1});const x=Tt(),a=T(()=>{let t=null;for(let d=0;d<z.value.poolConfigList.length;d++){const b=z.value.poolConfigList[d];b.address==x.query.poolAddress&&(t=b)}return t}),v=T(()=>{let t=null;for(const d in z.value.poolsObj){const b=z.value.poolsObj[d];b.address==x.query.poolAddress&&(t=b)}return t}),O=q(),ye=q(!0),_e=async(t,d)=>{if(ye.value=!0,d){tt.value=[],X.value=[],Be.value=!1;const b=t.token_a.decimals,S=t.token_b.decimals;st.tickIndexToPrice(t.current_tick_index,b,S),lt.value=st.sqrtPriceX64ToPrice((t==null?void 0:t.current_sqrt_price)||(t==null?void 0:t.object.current_sqrt_price),b,S).toString(),mt.value=new o(1).div(st.sqrtPriceX64ToPrice((t==null?void 0:t.current_sqrt_price)||(t==null?void 0:t.object.current_sqrt_price),b,S)).toString(),k.value=t.needReverse?t.token_b:t.token_a,p.value=t.needReverse?t.token_a:t.token_b,O.value=t.needReverse,t.token_a.address.toLowerCase()===k.value.address.toLowerCase()&&t.token_b.address.toLowerCase()===p.value.address.toLowerCase()?ve.value=!0:ve.value=!1;let R={poolAddress:t.address,coinTypeA:t.coin_a_address,coinTypeB:t.coin_b_address};const{list:B,address:Ne}=await A.value.getTicks(R);tt.value=B&&Ne==t.address?A.value.getTickDataFromUrlData(B):[],ye.value=!1,w(t)}},V=t=>{var S,R;const d=t.token_a.decimals,b=t.token_b.decimals;lt.value=st.sqrtPriceX64ToPrice((t==null?void 0:t.current_sqrt_price)||((S=t==null?void 0:t.object)==null?void 0:S.current_sqrt_price),d,b).toString(),mt.value=new o(1).div(st.sqrtPriceX64ToPrice((t==null?void 0:t.current_sqrt_price)||((R=t==null?void 0:t.object)==null?void 0:R.current_sqrt_price),d,b)).toString()},X=q([]),n=q(),w=async t=>{const d=t.token_a.decimals,b=t.token_b.decimals;let S=z.value.poolPriceConfigObj&&z.value.poolPriceConfigObj[t.address]&&z.value.poolPriceConfigObj[t.address].recommend_ranges||{};const R=z.value.poolPriceConfigObj&&z.value.poolPriceConfigObj[t.address]&&z.value.poolPriceConfigObj[t.address].type||"";let B,Ne;const et=oi(t.current_tick_index,t.tickSpacing);n.value=t.current_tick_index,B=et-Number(t.type=="unstable"?Number(t.tickSpacing)*2:Number(t.tickSpacing)*3),Ne=et+Number(t.type=="unstable"?Number(t.tickSpacing)*2:Number(t.tickSpacing)*3);const u=A.value.TickMath.tickIndexToPrice(B,d,b).toString(),c=A.value.TickMath.tickIndexToPrice(Ne,d,b).toString();S["full range"]={lower:A.value.TickUtil.getMinIndex(Number(v.value.tickSpacing)),upper:A.value.TickUtil.getMaxIndex(Number(v.value.tickSpacing))},S.custom={lower:B,upper:Ne,minPrice:u,maxPrice:c};const Ae=[];for(let oe in S)S[oe]&&Ae.push({...S[oe],key:oe});R&&Ae&&Ae.length>2?t.isSelfBuilt?Z.value="custom":R=="stable"?Z.value="suggested":Z.value="passive":Z.value="custom",X.value=Ae||{},Qe.value=S,U({key:Z.value,...S[Z.value]})},m=q(""),W=q(""),U=t=>{Z.value=t.key.toLowerCase();const d=v.value.token_a.decimals,b=v.value.token_b.decimals,{lower:S,upper:R}=t;He.value=!1;const B=A.value.TickMath.tickIndexToPrice(S,d,b).toString(),Ne=A.value.TickMath.tickIndexToPrice(R,d,b).toString();if(t.key=="full range"){m.value=S,W.value=R,ee();return}ve.value?(gt.value=String(B),L.value=String(B),pt.value=String(Ne),y.value=String(Ne),m.value=S,W.value=R):(gt.value=new o(1).div(new o(Ne)).toString(),L.value=new o(1).div(new o(Ne)).toString(),pt.value=new o(1).div(new o(B)).toString(),y.value=new o(1).div(new o(B)).toString(),m.value=A.value.TickMath.priceToTickIndex(new o(1/Number(Ne)),d,b),W.value=A.value.TickMath.priceToTickIndex(new o(1/Number(B)),d,b))},ee=t=>{L.value="0",y.value="âˆž"};Ie(()=>v.value,(t,d)=>{(!d&&t&&!K(t)||d&&t&&d.address!==t.address)&&_e(t,!d||t.address!==d.address),t&&!K(t)&&V(t),t||(tt.value=[])},{immediate:!0}),Xt(()=>{k.value=q(),p.value=q(),tt.value=[]}),Ie(()=>[a.value,v.value,z.value.recommendRangesObj],(t,d)=>{var b,S;(!d||t[0]&&t[1]&&t[2]&&!K(t[0])&&!K(t[1]&&!K(t[2]))||((b=t[0])==null?void 0:b.address)!==((S=d[0])==null?void 0:S.address))&&t[0]&&t[2]&&!K(t[0])&&!K(t[2])&&F.setSinglePool(t[0],t[2],se.value)},{immediate:!0,deep:!0});const h=t=>{if(se.value=="Sui")switch(t){case"passive":return"/sui-image/icon_ conservative@2x.png";case"active":return"/sui-image/icon_active@2x.png";case"full range":return"/sui-image/icon_fullrange@2x.png";case"custom":return"/sui-image/icon_costom@2x.png";case"suggested":return"/sui-image/icon_stabel@2x.png"}else switch(t){case"passive":return"/image/icon_ conservative@2x.png";case"active":return"/image/icon_active@2x.png";case"full range":return"/image/icon_fullrange@2x.png";case"custom":return"/image/icon_costom@2x.png";case"suggested":return"/image/icon_stabel@2x.png"}},we=t=>{switch(t){case"suggested":return e("newAdd.suggested");case"active":return e("newAdd.active");case"passive":return e("newAdd.conservative");case"full range":return e("newAdd.fullRange");case"custom":return e("newAdd.custom")}},g=t=>{var b,S;const d=z.value.poolPriceConfigObj&&z.value.poolPriceConfigObj[(b=v.value)==null?void 0:b.address]&&z.value.poolPriceConfigObj[(S=v.value)==null?void 0:S.address].type||"";if(X.value.length>2)if(d=="unstable")switch(t){case"active":return{top:"38%"};case"passive":return{top:"13%"};case"full range":return{top:"63%"};case"custom":return{top:"87%"}}else switch(t){case"suggested":return{top:"25%"};case"full range":return{top:"49%"};case"custom":return{top:"75%"}}else if(d=="unstable")switch(t){case"active":return{top:"38%"};case"passive":return{top:"13%"};case"full range":return{top:"63%"};case"custom":return{top:"87%"}}else switch(t){case"full range":return{top:"35%"};case"custom":return{top:"60%"}}},$=q(1),H=()=>{const t=$.value/2;$.value=t},Pe=()=>{const t=$.value*2;$.value=t},_=T(()=>{var t,d,b;return!v.value||K(M.value.addressHistTokens)||!M.value.addressHistTokens[(t=v.value)==null?void 0:t.poolAddress]?null:Object.fromEntries((b=M.value.addressHistTokens[(d=v.value)==null?void 0:d.poolAddress])==null?void 0:b.data.map(S=>[S.key,S.value]))}),j=q(30),te=q("30D"),le=T(()=>ve.value?_.value&&ue(j.value==7?_.value.before_7_d_contract_price_lowest:j.value==24?_.value.before_24_h_contract_price_lowest:_.value.before_30_d_contract_price_lowest,6)||0:_.value&&ue(new o(1).div(j.value==7?_.value.before_7_d_contract_price_highest:j.value==24?_.value.before_24_h_contract_price_highest:_.value.before_30_d_contract_price_highest).toString(),6)||0),E=T(()=>ve.value?_.value&&ue(j.value==7?_.value.before_7_d_contract_price_highest:j.value==24?_.value.before_24_h_contract_price_highest:_.value.before_30_d_contract_price_highest,6)||0:(_.value&&ue(1/Number(j.value==7?_.value.before_7_d_contract_price_lowest:j.value==24?_.value.before_24_h_contract_price_lowest:_.value.before_30_d_contract_price_lowest),6))==1/0?0:_.value&&ue(1/Number(j.value==7?_.value.before_7_d_contract_price_lowest:j.value==24?_.value.before_24_h_contract_price_lowest:_.value.before_30_d_contract_price_lowest),6)||0),ze=T(()=>{const t=Number(L.value),d=Number(y.value);if(L.value=="0"&&y.value=="âˆž"||Z.value=="full range")return"1x";if(L.value==y.value||Z.value=="full range")return"--";if(L.value&&y.value&&L.value!=="0"&&y.value!=="âˆž"){const b=ht(1/(1-Number((t/d)**.25)),2);return Number(b)>0?b+"x":"--"}else return 1}),I=T(()=>{var t,d,b,S,R,B;return((t=k.value)==null?void 0:t.isSelfBuilt)||((d=p.value)==null?void 0:d.isSelfBuilt)||((S=z.value.tokensObj[(b=k.value)==null?void 0:b.address])==null?void 0:S.isSelfBuilt)||((B=z.value.tokensObj[(R=p.value)==null?void 0:R.address])==null?void 0:B.isSelfBuilt)}),ce=(t,d)=>{t!==L.value&&Z.value=="full range"?U({key:"custom",...X.value.custom}):Z.value!=="full range"&&Z.value!=="custom"?(Z.value="custom",L.value=t):L.value=t,Y.value&&(Be.value?(ve.value&&L.value!==Y.value.minPrice&&(Be.value=!1),!ve.value&&Number(L.value)!==1/Number(Y.value.maxPrice)&&(Be.value=!1)):(ve.value&&L.value==Y.value.minPrice&&y.value==Y.value.maxPrice&&(Be.value=!0),!ve.value&&Number(L.value)==1/Number(Y.value.maxPrice)&&Number(y.value)==1/Number(Y.value.minPrice)&&(Be.value=!0)))},Ge=(t,d)=>{t!==y.value&&Z.value=="full range"?U({key:"custom",...X.value.custom}):Z.value!=="full range"&&Z.value!=="custom"?(Z.value="custom",t=="0"?y.value="âˆž":y.value=t):t=="0"?y.value="âˆž":y.value=t,Y.value&&(Be.value?(ve.value&&y.value!==Y.value.maxPrice&&(Be.value=!1),!ve.value&&Number(y.value)!==1/Number(Y.value.minPrice)&&(Be.value=!1)):(ve.value&&L.value==Y.value.minPrice&&y.value==Y.value.maxPrice&&(Be.value=!0),!ve.value&&Number(L.value)==1/Number(Y.value.maxPrice)&&Number(y.value)==1/Number(Y.value.minPrice)&&(Be.value=!0)))},Le=t=>{var d;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((d=z.value.tokensObj[t==null?void 0:t.address])==null?void 0:d.logo_url)||(M.value.theme==="default"?_t("/image/coins/unknown.png"):_t("/image/coins/sui-unknown.png"))},ot=t=>{switch(t){case"active":return e("newAdd.activeTips");case"passive":return e("newAdd.passiveTips");case"full range":return e("newAdd.fullRangTips");case"suggested":return e("newAdd.suggestedTips");case"custom":return e("newAdd.customTips")}},Ve=[{label:"24H",value:24},{label:"7D",value:7},{label:"30D",value:30}],Ke=It(),Je=T(()=>Ke),Y=T(()=>{var t;return Je.value.farmsPoolObj[(t=v==null?void 0:v.value)==null?void 0:t.address]}),rt=T(()=>z.value.poolPriceConfigObj);return Ie(()=>[Be.value,v.value,X.value,rt.value,Y.value,ve.value],(t,d)=>{var b,S;if(t[0]&&t[4]&&!K(t[4]))Z.value="custom",L.value=t[5]?t[4].minPrice:String(1/t[4].maxPrice),y.value=t[5]?t[4].maxPrice:String(1/t[4].minPrice);else if(t[1]&&!K(t[1])&&t[2]&&!K(t[2])&&t[3]&&!K(t[3])&&t[4]&&!K(t[4])){t[3]&&t[3][(b=t[1])==null?void 0:b.address]&&t[3][(S=t[1])==null?void 0:S.address].type;const R=t[2].filter(B=>B.key===(t[2].length==4?"passive":"suggested"));R!=null&&R[0]&&(!d||d[0]!==t[0])&&U({...R[0]})}},{immediate:!0}),{positionError:it,getCoinIcon:Le,chainName:se,store:M,currentTab:fe,currentPrice:lt,currentPriceReverse:mt,fromCoin:k,toCoin:p,direction:ve,needReverse:O,addCommom:$e,decimalUi:ue,priceTablList:X,currentPriceTab:Z,sliderStyle:g,poolInfo:v,tickList:tt,getPriceTabImage:h,getPriceTabText:we,defaultMinPrice:gt,defaultMaxPrice:pt,minPrice:L,maxPrice:y,currentTick:n,chartLoading:ye,zoomOut:H,zoomIn:Pe,zoom:$,priceTab:U,before7dContractPriceLowest:le,before7dContractPriceHighest:E,aprRewardsTime:te,lever:ze,aprRewardsParameter:j,isSelfBuilt:I,priceRangeChangeMin:ce,priceRangeChangeMax:Ge,toggle:Gt,getPirceTabTips:ot,timeList:Ve,farmsPoolInfo:Y,checkNullObj:K,isStableFarmingRange:Be}}});const Xi={class:"new-liquidity-left"},Ei=r("span",{class:"selectRange"},"Select Range",-1),Wi={class:"price-info"},Di={class:"left"},Zi={class:"base-coin"},Gi={class:"base-coin-title"},Ki=r("span",null,"Base coin",-1),Ji=r("svg",{class:"icon icon-up","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-exchange_up1"})],-1),Qi=r("svg",{class:"icon icon-down","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-exchange_down1"})],-1),Yi=[Ji,Qi],xi={class:"base-coin-bottom"},Vi={alt:""},en={class:"current-price"},tn=r("div",{class:"current-price-title"},"Current Price",-1),nn={key:0,class:"from-pre-to"},an={class:"right"},on={class:"price-range"},rn={class:"left"},sn={class:"price-slider"},ln={class:"slider"},un=r("div",{class:"slider-ratio-content"},null,-1),cn=[un],dn={class:"price-tab-list"},mn=["onClick"],vn=["src"],fn={class:"right"},gn={class:"price-zoom"},pn={class:"current-price"},bn=r("div",{class:"current-price-title"},"Current Price",-1),hn={key:0,class:"from-pre-to"},kn={class:"price-zoom-right"},yn={class:"leverage"},_n=r("div",{class:"left"},null,-1),wn={class:"right"},Cn={class:"right-time"},Pn={key:0,class:"day-7-price-range"},Sn=r("i",null,null,-1),Tn={class:"gray"},In={class:"time-list"},Nn=["onClick"],An={class:"right-price-h5"},Ln={class:"range pc-range"},qn={key:0,class:"stable-farming-range pc-stable-farming-range"},Mn=r("img",{src:Kt},null,-1),$n={class:"check-box-active"},Fn={key:1,class:"stable-farming-range h5-stable-farming-range"},On=r("span",null,[r("img",{src:Kt}),Ye(" Farm rewards rangeï¼š ")],-1),Rn={class:"check-box-active"},Bn={key:2,class:"position-tips"},Un=["src"],jn={class:"error"};function zn(e,s,fe,ae,M,se){var O,ye,_e,V,X,n,w,m,W,U,ee;const F=St,z=Jt,A=zi,x=ci,a=Et,v=ui("image");return N(),G("div",Xi,[Ei,r("div",Wi,[r("div",Di,[r("div",Zi,[r("div",Gi,[Ki,r("div",{class:"change-price",onClick:s[0]||(s[0]=(...h)=>e.toggle&&e.toggle(...h))},Yi)]),r("div",xi,[jt(r("img",Vi,null,512),[[v,e.getCoinIcon(e.fromCoin)]]),r("span",null,J((O=e.fromCoin)==null?void 0:O.symbol),1)])]),r("div",en,[tn,r("div",null,[r("span",null,J(e.poolInfo?e.direction?("addCommom"in e?e.addCommom:ne($e))(("decimalUi"in e?e.decimalUi:ne(ue))(e.currentPrice,6)):("addCommom"in e?e.addCommom:ne($e))(("decimalUi"in e?e.decimalUi:ne(ue))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(N(),G("span",nn,J((ye=e.toCoin)==null?void 0:ye.symbol)+" per "+J((_e=e.fromCoin)==null?void 0:_e.symbol),1)):Q("",!0)])])]),r("div",an,[e.currentTab=="liquidity"?(N(),G("div",{key:0,class:"zoom-out",onClick:s[1]||(s[1]=(...h)=>e.zoomOut&&e.zoomOut(...h))}," + ")):Q("",!0),e.currentTab=="liquidity"?(N(),G("div",{key:1,class:"zoom-in",onClick:s[2]||(s[2]=(...h)=>e.zoomIn&&e.zoomIn(...h))}," - ")):Q("",!0)])]),r("div",on,[r("div",rn,[r("div",sn,[r("div",ln,[r("div",{class:"slider-ratio",style:kt(e.sliderStyle(e.currentPriceTab))},cn,4)])]),r("div",dn,[(N(!0),G(yt,null,Ft(e.priceTablList,h=>(N(),G("div",{key:h.key,class:ft(["price-tab-item",e.currentPriceTab==h.key?"price-tab-item-active":""]),onClick:we=>e.priceTab(h)},[Fe(F,{placement:"bottom","arrow-point-at-center":""},{title:xe(()=>[Ye(J(e.getPirceTabTips(h.key)),1)]),default:xe(()=>[r("img",{src:e.getPriceTabImage(h.key),alt:""},null,8,vn),r("span",null,J(e.getPriceTabText(h.key)),1)]),_:2},1024)],10,mn))),128))])]),r("div",fn,[r("div",gn,[r("div",pn,[bn,r("div",null,[r("span",null,J(e.poolInfo?e.direction&&!e.needReverse?("addCommom"in e?e.addCommom:ne($e))(("decimalUi"in e?e.decimalUi:ne(ue))(e.currentPrice,6)):("addCommom"in e?e.addCommom:ne($e))(("decimalUi"in e?e.decimalUi:ne(ue))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(N(),G("span",hn,J(e.direction&&!e.needReverse?`${(V=e.fromCoin)==null?void 0:V.symbol} per ${(X=e.toCoin)==null?void 0:X.symbol}`:`${(n=e.toCoin)==null?void 0:n.symbol} per ${(w=e.fromCoin)==null?void 0:w.symbol}`),1)):Q("",!0)])]),r("div",kn,[e.currentTab=="liquidity"?(N(),G("div",{key:0,class:"zoom-out",onClick:s[3]||(s[3]=(...h)=>e.zoomOut&&e.zoomOut(...h))}," + ")):Q("",!0),e.currentTab=="liquidity"?(N(),G("div",{key:1,class:"zoom-in",onClick:s[4]||(s[4]=(...h)=>e.zoomIn&&e.zoomIn(...h))}," - ")):Q("",!0)])]),e.poolInfo?(N(),Ee(z,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direction,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,zoom:e.zoom,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","zoom","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):Q("",!0)])]),r("div",yn,[_n,r("div",wn,[r("div",Cn,[e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(N(),G("div",Pn,[Sn,r("span",Tn,J(e.aprRewardsParameter==7?"7D":e.aprRewardsParameter==24?"24H":"30D")+" Price Range",1),r("span",null,J(("addCommom"in e?e.addCommom:ne($e))(("decimalUi"in e?e.decimalUi:ne(ue))(e.before7dContractPriceLowest,6)))+" - "+J(("addCommom"in e?e.addCommom:ne($e))(("decimalUi"in e?e.decimalUi:ne(ue))(e.before7dContractPriceHighest,6))),1)])):Q("",!0),r("div",In,[(N(!0),G(yt,null,Ft(e.timeList,h=>(N(),G("div",{key:h.value,class:ft(["time-item",h.value==e.aprRewardsParameter?"time-item-active":""]),onClick:we=>e.aprRewardsParameter=h.value},J(h.label),11,Nn))),128))])]),r("div",An,[r("span",null,J(("addCommom"in e?e.addCommom:ne($e))(("decimalUi"in e?e.decimalUi:ne(ue))(e.before7dContractPriceLowest,6)))+" - "+J(("addCommom"in e?e.addCommom:ne($e))(("decimalUi"in e?e.decimalUi:ne(ue))(e.before7dContractPriceHighest,6))),1)])])]),r("div",{class:ft(["apr-and-price",e.positionError&&e.poolInfo?"padding-apr-and-price":""])},[Fe(A,{lever:e.lever},null,8,["lever"]),r("div",Ln,[e.farmsPoolInfo&&!("checkNullObj"in e?e.checkNullObj:ne(K))(e.farmsPoolInfo)&&e.fromCoin&&e.toCoin?(N(),G("div",qn,[r("span",null,[Mn,Ye(" Farm rewards rangeï¼š"+J(("decimalUi"in e?e.decimalUi:ne(ue))(e.direction?e.farmsPoolInfo.minPrice:1/e.farmsPoolInfo.maxPrice,6))+" - "+J(("decimalUi"in e?e.decimalUi:ne(ue))(e.direction?e.farmsPoolInfo.maxPrice:1/e.farmsPoolInfo.minPrice,6))+" "+J((m=e.toCoin)==null?void 0:m.symbol)+" per "+J((W=e.fromCoin)==null?void 0:W.symbol),1)]),r("div",$n,[Fe(x,{class:"range-alerts-switch",checked:e.isStableFarmingRange,onClick:s[5]||(s[5]=h=>e.isStableFarmingRange=!e.isStableFarmingRange)},null,8,["checked"])])])):Q("",!0),e.farmsPoolInfo&&!("checkNullObj"in e?e.checkNullObj:ne(K))(e.farmsPoolInfo)&&e.fromCoin&&e.toCoin?(N(),G("div",Fn,[On,r("div",Rn,[Ye(J(("decimalUi"in e?e.decimalUi:ne(ue))(e.direction?e.farmsPoolInfo.minPrice:1/e.farmsPoolInfo.maxPrice,6))+" - "+J(("decimalUi"in e?e.decimalUi:ne(ue))(e.direction?e.farmsPoolInfo.maxPrice:1/e.farmsPoolInfo.minPrice,6))+" "+J((U=e.toCoin)==null?void 0:U.symbol)+" per "+J((ee=e.fromCoin)==null?void 0:ee.symbol)+" ",1),Fe(x,{class:"range-alerts-switch",checked:e.isStableFarmingRange,onClick:s[6]||(s[6]=h=>e.isStableFarmingRange=!e.isStableFarmingRange)},null,8,["checked"])])])):Q("",!0),Fe(a,{min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direction,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["min","max","from-coin","to-coin","direct","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice"]),e.positionError&&e.poolInfo?(N(),G("div",Bn,[r("img",{src:("importIcon"in e?e.importIcon:ne(_t))("/image/icon-tips-error@2x.png"),alt:""},null,8,Un),r("p",jn,J(e.$t("tips.positionError")),1)])):Q("",!0)])],2)])}const Qt=at(Hi,[["render",zn]]),Hn=nt({props:{poolInfo:{type:Object,default:()=>({})},isActive:{type:Boolean,default:!0}},setup(e,s){const fe=It(),ae=q(!1),M=q(),se=q(!0),F=ut(),z=T(()=>F),A=T(()=>z.value.newTopPoolsObj);Ie(()=>e.poolInfo,v=>{v&&!K(v)&&fe.getFarmsPoolList()},{immediate:!0});const x=v=>{var _e,V,X,n;const O=v[(_e=e==null?void 0:e.poolInfo)==null?void 0:_e.poolAddress]||{};let ye=0;O&&!K(O)&&((X=(V=O==null?void 0:O.stable_farming)==null?void 0:V.stable_rewarder)==null||X.forEach(w=>{w.amount_second>0&&(ye+=w.amount_second)}),ye>0?(ae.value=!0,M.value={id:O.stable_farming.stable_farming_pool,clmm_pool_id:(n=e==null?void 0:e.poolInfo)==null?void 0:n.poolAddress},s.emit("sendFarmsPoolInfo",se.value&&e.isActive?M.value:"")):ae.value=!1)};return Ie(()=>[A.value,e.poolInfo],([v,O])=>{v&&!K(v)&&O&&!K(O)&&x(v)},{immediate:!0}),Ie(()=>[e.isActive,se.value,M.value],([v,O,ye])=>{s.emit("sendFarmsPoolInfo",O&&e.isActive?ye:"")},{immediate:!0}),{isShowAutoStake:ae,changeIsOpen:()=>{se.value=!se.value,s.emit("sendFarmsPoolInfo",se.value&&e.isActive?M.value:"")},isOpen:se}}}),Xn=""+globalThis.__publicAssetsURL("sui-image/farming_huo.png"),En=""+globalThis.__publicAssetsURL("sui-image/icon_sel@2x.png");const Nt=e=>(Ct("data-v-9d2d8cb8"),e=e(),Pt(),e),Wn={key:0,class:"farms-auto-stake"},Dn=Nt(()=>r("img",{class:"farms-icon",src:Xn,alt:""},null,-1)),Zn=Nt(()=>r("div",{class:"desc"},"Automatically stake your position into the farm to enjoy higher yield.",-1)),Gn={key:0,src:En,alt:""},Kn=Nt(()=>r("div",{class:"check-box"},null,-1));function Jn(e,s,fe,ae,M,se){const F=St;return e.isShowAutoStake?(N(),G("div",Wn,[Dn,Zn,e.isActive?(N(),G("div",{key:0,class:"check-box-active",onClick:s[0]||(s[0]=(...z)=>e.changeIsOpen&&e.changeIsOpen(...z))},[e.isOpen?(N(),G("img",Gn)):Q("",!0)])):(N(),Ee(F,{key:1,"overlay-style":{"min-width":"200px"}},di({default:xe(()=>[Kn]),_:2},[e.isActive?void 0:{name:"title",fn:xe(()=>[Ye("Farming rewards only available for active positions.")]),key:"0"}]),1024))])):Q("",!0)}const Qn=at(Hn,[["render",Jn],["__scopeId","data-v-9d2d8cb8"]]),Yn=nt({components:{NewLiquidityTitle:Wt,NewLiquidityAssetsCard:Dt,NewLiquidityDepositRatio:Zt},setup(){const{t:e,locale:s}=Ht(),fe=ut(),ae=T(()=>fe),M=T(()=>ae.value.chainName),se=Bt(),F=T(()=>se),z=ri(),A=T(()=>z),x=Tt(),a=T(()=>{let i=null;for(const l in F.value.poolsObj){const f=F.value.poolsObj[l];f.address==x.query.poolAddress&&(i=f)}return console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:272 ~ constpoolInfo:any=computed ~ info:",i),i}),v=q(!1),O=q(!1),ye=T(()=>ae.value.theme),_e=async(i,l)=>{k.value=i.needReverse?i.token_b:i.token_a,p.value=i.needReverse?i.token_a:i.token_b,C.value="",P.value=""},V=T(()=>A.value.assets&&k.value&&A.value.assets[k.value.address]?$t(A.value.assets[k.value.address].balance,k.value.decimals):"0"),X=T(()=>A.value.assets&&p.value&&A.value.assets[p.value.address]?$t(A.value.assets[p.value.address].balance,p.value.decimals):"0"),n=i=>{i==="fromCoin"?(Te.value=!0,M.value==="Aptos"?C.value=Number(V.value)>0?k.value.symbol=="APT"?new o(Number(V.value)).sub(new o(.1)).lt(new o(0))?"0":new o(Number(V.value)).sub(new o(.1)).toString():String(V.value):"":C.value=Number(V.value)>0?k.value.symbol=="SUI"?new o(Number(V.value)).sub(new o(.05)).lt(new o(0))?"0":new o(Number(V.value)).sub(new o(.05)).toString():String(V.value):""):(Te.value=!1,M.value==="Aptos"?P.value=Number(X.value)>0?p.value.symbol=="APT"?new o(Number(X.value)).sub(new o(.1)).lt(new o(0))?"0":new o(Number(X.value)).sub(new o(.1)).toString():String(X.value):"":P.value=Number(X.value)>0?p.value.symbol=="SUI"?new o(Number(X.value)).sub(new o(.05)).lt(new o(0))?"0":new o(Number(X.value)).sub(new o(.05)).toString():String(X.value):"")},w=i=>{i==="fromCoin"?(Te.value=!0,C.value=Number(V.value)>0?ht(new o(Number(V.value)).div(2).toString(),k.value.decimals).toString():""):(Te.value=!1,P.value=Number(X.value)>0?ht(new o(Number(X.value)).div(2).toString(),p.value.decimals).toString():"")},m=q(),W=q(),U=q(),ee=q(!1),h=i=>{var l,f,de,D;m.value=i,i==="fromCoin"?(W.value=((l=p.value)==null?void 0:l.address)||"",U.value=x.query.actions=="new-position"?(f=k.value)==null?void 0:f.address:a.value.needReverse?a.value.token_b.address:a.value.token_a.address):(W.value=((de=k.value)==null?void 0:de.address)||"",U.value=x.query.actions=="new-position"?(D=p.value)==null?void 0:D.address:a.value.needReverse?a.value.token_a.address:a.value.token_b.address),ee.value=!0},we=i=>{var de,D,ge,pe,me,be,he,Se;const l=a.value.needReverse?a.value.token_b:a.value.token_a,f=a.value.needReverse?a.value.token_a:a.value.token_b;m.value==="fromCoin"?(((de=k.value)==null?void 0:de.address)===(l==null?void 0:l.address)||!((D=k.value)!=null&&D.address)?(p.value&&i.address.toLowerCase()===((ge=p)==null?void 0:ge.value.address.toLowerCase())&&(p.value=null),k.value=i):(k.value&&i.address.toLowerCase()===((pe=k)==null?void 0:pe.value.address.toLowerCase())&&(k.value=null),p.value=i),x.query.action||(x.query.fee="")):((me=p.value)==null?void 0:me.address)===(f==null?void 0:f.address)||!((be=p.value)!=null&&be.address)?(k.value&&i.address.toLowerCase()===((he=k)==null?void 0:he.value.address.toLowerCase())&&(k.value=null),p.value=i):(p.value&&i.address.toLowerCase()===((Se=p)==null?void 0:Se.value.address.toLowerCase())&&(p.value=null),k.value=i),ee.value=!1},g=T(()=>ae.value.chainName?wt(ae.value.chainName):{}),$=T(()=>ae.value.slippage),H=q(),Pe=async()=>{var Ue,Me,Oe,We;if(He.value||!L.value&&!y.value)return!1;if(!C.value&&!P.value&&!L.value&&!y.value)return;const i=a.value||{};if(K(i))return;const{TickUtil:l,TickMath:f,getNearestTickByTick:de}=g.value,D=i==null?void 0:i.token_a.decimals,ge=i==null?void 0:i.token_b.decimals;let pe,me,be,he,Se,qe,Xe,Ze,ke=i==null?void 0:i.current_tick_index,ie;if(i.token_a.address.toLowerCase()===k.value.address.toLowerCase()&&i.token_b.address.toLowerCase()===p.value.address.toLowerCase()?ie=!0:ie=!1,L.value==="0"&&y.value==="âˆž")be=l.getMinIndex(Number(i.tickSpacing)),he=l.getMaxIndex(Number(i.tickSpacing)),Se=f.tickIndexToSqrtPriceX64(be),qe=f.tickIndexToSqrtPriceX64(he);else if(Z.value=="custom"){ie?(pe=L.value,me=y.value):(pe=y.value!=="âˆž"?new o(1).div(y.value).toString():1/0,me=new o(1).div(L.value).toString());try{Xe=new o(pe).equals(new o(0))?-443636:f.priceToTickIndex(new o(pe),D,ge)}catch{Xe=-443636}try{Ze=f.priceToTickIndex(new o(me),D,ge)}catch{Ze=443636}be=de(Xe,Number(i.tickSpacing),!0),he=de(Ze,Number(i.tickSpacing),!0);try{Se=f.priceToSqrtPriceX64(new o(pe),D,ge)}catch{(me===1/0||me==="âˆž")&&(Se=f.tickIndexToSqrtPriceX64(l.getMinIndex(Number(i.tickSpacing))))}try{qe=f.priceToSqrtPriceX64(new o(me),D,ge)}catch{(me===1/0||me==="âˆž")&&(qe=f.tickIndexToSqrtPriceX64(l.getMaxIndex(Number(i.tickSpacing))))}}else be=(Ue=Qe.value[Z.value])==null?void 0:Ue.lower,he=(Me=Qe.value[Z.value])==null?void 0:Me.upper,Se=f.tickIndexToSqrtPriceX64(be),qe=f.tickIndexToSqrtPriceX64(he);if(y.value!=="âˆž"&&be>=he){v.value=!0,C.value="",O.value=!0,P.value="";return}if(y.value==="âˆž"||ke>=be&&ke<he){v.value=!1,O.value=!1;let re;if(C.value||P.value){if(Te.value){const vt=new o(C.value).mul(Math.pow(10,k.value.decimals)).toString();re=new je(vt)}else{const vt=new o(P.value).mul(Math.pow(10,p.value.decimals)).toString();re=new je(vt)}f.tickIndexToSqrtPriceX64(a.value.current_tick_index);const{liquidityAmount:Re,tokenMaxA:De,tokenMaxB:ct,tokenMaxAOrigin:ii,tokenMaxBOrigin:ni}=g.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:i.token_a,tokenB:i.token_b,lowerTick:be,upperTick:he,coinAmount:re,iscoinA:ie?Te.value:!Te.value,roundUp:!0,slippage:Number($.value)/100,curSqrtPrice:new je(a.value.current_sqrt_price)});H.value={liquidityAmount:Re,tokenMaxA:De,tokenMaxB:ct,tokenMaxAOrigin:ii,tokenMaxBOrigin:ni},ie?Te.value?P.value=Number(ct)>0?ct:"":C.value=Number(De)>0?De:"":Te.value?P.value=De:C.value=ct}}else if(ke>=he){if(ie?C.value="":P.value="",v.value=ie,O.value=!ie,C.value||P.value){let re;if(ie){const Re=new o(P.value).mul(Math.pow(10,(Oe=p.value)==null?void 0:Oe.decimals)).toString();re=new je(Re),H.value={liquidityAmount:g.value.estimateLiquidityForCoinB(Se,qe,re),tokenMaxA:0,tokenMaxB:P.value}}else{const Re=new o(C.value).mul(Math.pow(10,(We=k.value)==null?void 0:We.decimals)).toString();re=new je(Re),H.value={liquidityAmount:g.value.estimateLiquidityForCoinB(Se,qe,re),tokenMaxA:0,tokenMaxB:C.value}}}}else if(ke<be){if(v.value=!ie,O.value=ie,ie?P.value="":C.value="",C.value||P.value){let re;if(ie){const Re=new o(C.value).mul(Math.pow(10,k.value.decimals)).toString();re=new je(Re),H.value={liquidityAmount:g.value.estimateLiquidityForCoinA(Se,qe,re),tokenMaxA:C.value,tokenMaxB:0}}else{const Re=new o(P.value).mul(Math.pow(10,p.value.decimals)).toString();re=new je(Re),H.value={liquidityAmount:g.value.estimateLiquidityForCoinA(Se,qe,re),tokenMaxA:P.value,tokenMaxB:0}}}}else v.value=!0,C.value="",O.value=!0,P.value=""};Ie(()=>a.value,(i,l)=>{(!l&&i&&!K(i)||l&&i&&l.address!==i.address)&&_e(i,!l||i.address!==l.address),i&&!K(i)&&Pe()},{immediate:!0}),Ie(C,(i,l)=>{i==""&&Te.value&&(P.value=""),i&&Te.value&&!He.value&&Pe()}),Ie(P,(i,l)=>{i==""&&!Te.value&&(C.value=""),i&&!Te.value&&!He.value&&Pe()}),Ie(()=>ve.value,(i,l)=>{Pe()}),Ie(()=>[k.value,p.value],([i,l])=>{i&&l&&(v.value=!1,O.value=!1)});const _=q("--"),j=T(()=>F.value.RATES),te=()=>{const i=j.value&&j.value[k.value.address]&&j.value[k.value.address].price,l=j.value&&j.value[p.value.address]&&j.value[p.value.address].price;if(i&&l){const f=new o(C.value>0?C.value:0).mul(i),de=new o(P.value>0?P.value:0).mul(l),D=f.add(de).toNumber();_.value=D>0&&D<.01?"<$0.01":"$"+$e(D,2)}else _.value="--"};Ie(()=>[C.value,P.value,He.value],([i,l,f])=>{(i||l)&&!f?te():(!i||!l)&&!f&&(_.value="--")},{immediate:!0});const le=q(),E=async()=>{var ie,Ue;if(!L.value&&!y.value)return!1;if(!C.value&&!P.value&&!L.value&&!y.value)return;const i=a.value;if(K(i))return;const{TickUtil:l,TickMath:f,getNearestTickByTick:de}=g.value,D=i==null?void 0:i.token_a.decimals,ge=i==null?void 0:i.token_b.decimals;let pe,me,be,he,Se,qe,Xe;if(i.token_a.address.toLowerCase()===k.value.address.toLowerCase()&&i.token_b.address.toLowerCase()===p.value.address.toLowerCase()?Xe=!0:Xe=!1,L.value==="0"&&y.value==="âˆž")be=l.getMinIndex(Number(i.tickSpacing)),he=l.getMaxIndex(Number(i.tickSpacing));else if(Z.value=="custom"){Xe?(pe=Number(L.value),me=Number(y.value)):(pe=new o(1).div(y.value).toString(),me=new o(1).div(L.value).toString());try{Se=pe==0?-443636:f.priceToTickIndex(new o(pe),D,ge)}catch{Se=-443636}try{qe=f.priceToTickIndex(new o(me),D,ge)}catch{qe=443636}be=de(Se,Number(i.tickSpacing),!0),he=de(qe,Number(i.tickSpacing),!0)}else be=(ie=Qe.value[Z.value])==null?void 0:ie.lower,he=(Ue=Qe.value[Z.value])==null?void 0:Ue.upper;const Ze=j.value[i==null?void 0:i.token_a.address].price,ke=j.value[i==null?void 0:i.token_b.address].price;ve.value?new je(i.current_sqrt_price):new je(1/i.current_sqrt_price);try{const{amountA:Me,amountB:Oe,tokenAmountsInfo:We}=await g.value.estCoinAmountsFromTotalAmount({lowerTick:be,upperTick:he,decimalsA:D,decimalsB:ge,curSqrtPrice:new je(i.current_sqrt_price),totalAmount:_.value.replace(/[^\d.]/g,""),tokenPriceA:Ze,tokenPriceB:ke});le.value=We,i.needReverse?ve.value?(C.value=Me,P.value=Oe):(C.value=Oe,P.value=Me):(C.value=Me,P.value=Oe)}catch(Me){console.log(Me,"e===>")}};Ie([L,y],([i,l])=>{He.value?He.value&&E():Pe(),l!=="âˆž"&&Number(i)!==0&&Number(l)!==0&&Number(i)>=Number(l)?it.value=!0:it.value=!1,Number(i)==0&&Number(l)==0&&lt.value&&(it.value=!0)},{deep:!0,immediate:!0});const ze=i=>{const l=i.replace(/[^\d.]/g,""),f="$"+$e(l);He.value=!0,_.value=f,l>0?E():(C.value="",P.value="")},I=q(!1),{setTransactionTxid:ce,setTransactionDesc:Ge,setIsShowWaiting:Le,setIsShowSuccess:ot,setPositiomNum:Ve,setIsShowRejected:Ke}=fe,Je=Si(),Y=T(()=>F.value.currentPositionInfo),rt=q(!1),t=q(!0),d=It(),b=T(()=>d),S=T(()=>b.value.farmsPoolObj);Ie(()=>[S.value,a.value],([i,l])=>{i&&!K(i)&&l&&!K(l)&&(i[l.address]||(t.value=!1))},{immediate:!0});const R=q(),B=q(),Ne=i=>{R.value=i,i?t.value=!0:t.value=!1},et=async(i,l,f,de)=>{try{l=="farming"?await F.value.setCurrentPositionInfo("","","","Sui",f,"farming"):await F.value.setCurrentPositionInfo(i,"","",M.value,de),await si(3e3),t.value?await Je.subscribePosition({pool_address:Y.value.clmm_pool_id,position_index:Y.value.name.split("-")[1]},Y.value.clmm_position_id):await Je.subscribePosition({pool_address:Y.value.poolAddress,position_index:Y.value.index},Y.value.nftHash)}catch(D){console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:1151 ~ notifiSubscribePosition ~ error:",D)}},u=async i=>{var Se,qe,Xe,Ze;I.value=!1,F.value.currentPositionInfo={},ce(""),Ge(e("tips.increaseLiquiditySuccess",{from:v.value?"":`${$e(C.value)} ${(Se=k.value)==null?void 0:Se.symbol}`,and:!v.value&&!O.value?"and":"",to:O.value?"":`${$e(P.value)} ${(qe=p.value)==null?void 0:qe.symbol}`})),Le(!0);const l=ve.value?Te.value:!Te.value;let f,de,D,ge,pe,me;const be=a.value.token_a.decimals,he=a.value.token_b.decimals;if(L.value==="0"&&y.value==="âˆž")D=g.value.TickUtil.getMinIndex(Number(a.value.tickSpacing)),ge=g.value.TickUtil.getMaxIndex(Number(a.value.tickSpacing));else if(Z.value=="custom"){ve.value?(f=L.value,de=y.value):(f=new o(1).div(y.value).toString(),de=new o(1).div(L.value).toString());try{pe=f==0?g.value.TickUtil.getMinIndex(Number(a.value.tickSpacing)):g.value.TickMath.priceToTickIndex(new o(f),be,he)}catch{pe=g.value.TickUtil.getMinIndex(Number(a.value.tickSpacing))}try{me=g.value.TickMath.priceToTickIndex(new o(de),be,he)}catch{me=g.value.TickUtil.getMaxIndex(Number(a.value.tickSpacing))}D=g.value.getNearestTickByTick(pe,Number(a.value.tickSpacing),!0),ge=g.value.getNearestTickByTick(me,Number(a.value.tickSpacing),!0)}else D=Qe.value[Z.value].lower,ge=Qe.value[Z.value].upper;try{let ke;He.value?ke=await g.value.getCreateAddLiquidityPayload({pool:a.value,curSqrtPrice:new je(a.value.current_sqrt_price),tickLower:D,tickUpper:ge,slippage:Number($.value)/100,tokenAmounts:le.value}):ke=await g.value.getAddLiquidityTransactionPayload({pool:{poolAddress:a.value.poolAddress,token_a:a.value.token_a,token_b:a.value.token_b},amount:Te.value?C.value:P.value,fix_amount_a:l,tick_lower:D,tick_upper:ge,index:0,slippage:Number($.value)/100,roundUp:!0,collect_fee:!1,curSqrtPrice:new je(a.value.current_sqrt_price),farmPoolInfo:R.value});let ie;if(M.value==="Aptos")ie=await A.value.currentWallet.signAndSubmitTransaction(ke);else{const Ue=await g.value.signAndExecuteTransactionBlock(A.value.currentWallet,ke==null?void 0:ke.txb,ke==null?void 0:ke.payloadParams);ie=g.value.handleTx(Ue)}if(console.log("0410###tx###",ie),ie&&ie.hash){ce(ie.hash),Le(!1),ot(!0);let Ue;a.value.needReverse?a.value.token_a.address.toLowerCase()===k.value.address.toLowerCase()&&a.value.token_b.address.toLowerCase()===p.value.address.toLowerCase()?Ue=!1:Ue=!0:a.value.token_a.address.toLowerCase()===k.value.address.toLowerCase()&&a.value.token_b.address.toLowerCase()===p.value.address.toLowerCase()?Ue=!0:Ue=!1;const Me={title:"Supplied",desc:e("tips.addLiquiditySuccessText",{from:v.value?"":`${$e(C.value)} ${(Xe=k.value)==null?void 0:Xe.symbol}`,and:!v.value&&!O.value?"and":"",to:O.value?"":`${$e(P.value)} ${(Ze=p.value)==null?void 0:Ze.symbol}`}),hash:ie.hash,tit:"Position Created",icon:"icon-icon-Position-Created"};M.value!=="Aptos"&&(Me.res=ie.res),g.value.showTransitionPending(Me),console.log(Me,"toAdd params###");const Oe=await g.value.watchTransaction(Me,!0);if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:1295 ~ toAdd ~ watchInfo:",Oe),Oe.status){ot(!1),F.value.setCurrentPositionLoading(!0);let We,re;M.value==="Aptos"?B.value={token_a:a.value.token_a,token_b:a.value.token_b,minPrice:L.value,maxPrice:y.value,pool:a.value.address,collection:Oe.nftInfo[0].data.id.collection,tokenName:Oe.nftInfo[0].data.name}:(re=Oe.nftInfo,console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:1319 ~ toAdd ~ nftInfo:",re),t.value?(Oe.res.events.forEach(De=>{De.type.indexOf("::pool::DepositEvent")>-1&&(We=De.parsedJson.wrapped_position_id)}),B.value={token_a:a.value.needReverse?a.value.token_b:a.value.token_a,token_b:a.value.needReverse?a.value.token_a:a.value.token_b,minPrice:L.value,maxPrice:y.value,id:We,clmm_pool_id:a.value.address,pool:a.value.address}):B.value={token_a:a.value.needReverse?a.value.token_b:a.value.token_a,token_b:a.value.needReverse?a.value.token_a:a.value.token_b,minPrice:L.value,maxPrice:y.value,pos_object_id:re.position,pool:a.value.address},console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:1389 ~ toAdd ~ positionInfoDetail:",B.value)),rt.value=!0;const Re=a.value.poolAddress;setTimeout(()=>{if(i){const De=We?"farming":"clmm";console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:1400 ~ setTimeout ~ poolInfo.value.poolAddress:",Re),et(Re,De,We,re==null?void 0:re.position)}},3e3),setTimeout(()=>{se.updateCurrentPools(Re,M.value),g.value.getAccount(A.value.address)},3e3),setTimeout(async()=>{Ot(g,a)},7e3)}Ve()}else Le(!1),Ke(!0);C.value="",P.value=""}catch(ke){C.value="",P.value="",console.log("0330###Add liquidity Error###",ke),Le(!1),Ke(!0)}},c=T(()=>!!(!C.value&&!P.value||Number(C.value)>Number(V.value)||Number(P.value)>Number(X.value)||oe.value!==e("button.addLiquidity")&&oe.value!==e("newAdd.preview")||a.value&&a.value&&a.value.is_pause||Number(C.value)<=0&&Number(P.value)<=0||!v.value&&Number(C.value)==0||!O.value&&Number(P.value)==0)),Ae=T(()=>!k.value||!p.value),oe=T(()=>a.value&&a.value.is_pause?"Pool Closed":!k.value||!p.value||Ae.value?e("modal.selectTokenModalTitle"):Number(C.value)>Number(V.value)?e("button.insufficientBalance",{name:k.value.symbol}):Number(P.value)>Number(X.value)?e("button.insufficientBalance",{name:p.value.symbol}):!Number(C.value)&&!Number(P.value)?e("button.enterAmount"):y.value!=="âˆž"&&Number(L.value)>=Number(y.value)?e("newAdd.invalidRange"):e("button.addLiquidity")),Ce=q({}),At=q({}),Lt=q(!1),qt=(i,l)=>{const f=localStorage.getItem(i.address);console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:1523 ~ getTokenSource ~ pools.value.tokensObj:",F.value.tokensObj&&F.value.tokensObj[i.address]&&F.value.tokensObj[i.address].isSelfBuilt&&!f),F.value.tokensObj&&F.value.tokensObj[i.address]&&F.value.tokensObj[i.address].isSelfBuilt&&!f&&(l=="fromCoin"&&(Ce.value=i),l=="toCoin"&&(At.value=i),Lt.value=!0)};Ie(()=>[k.value,p.value],([i,l])=>{i&&!K(i)&&qt(i,"fromCoin"),l&&!K(l)&&qt(l,"toCoin")},{immediate:!0});const Mt=mi(),xt=()=>{M.value!=="Aptos"?Mt.push("/pool/list"):Mt.push("/pools")},Vt=i=>{He.value,u(i)},ei=()=>{x.query.action!=="create-pool"&&x.query.actions!=="new-position"&&(Ot(g,a),Pe(),se.updateCurrentPools(a.value.poolAddress,M.value)),se.setPoolConfigList(M.value,ae.value.filterCoinsObj)},ti=T(()=>{var f,de,D,ge,pe,me;const i=(D=j.value[(de=(f=k)==null?void 0:f.value)==null?void 0:de.address])==null?void 0:D.price,l=(me=j.value[(pe=(ge=p)==null?void 0:ge.value)==null?void 0:pe.address])==null?void 0:me.price;return!!(i&&l)});return Ie(()=>[x,F.value.tokensObj],([i,l])=>{var f;l&&!K(l)&&(p.value||(p.value=F.value.tokensObj[(f=i==null?void 0:i.query)==null?void 0:f.toCoin]))},{immediate:!0,deep:!0}),{positionError:it,decimalUi:ue,poolInfo:a,fromCoinAmount:C,toCoinAmount:P,fromCoin:k,toCoin:p,theme:ye,showFromCoinLock:v,showToCoinLock:O,fromCoinBlance:V,toCoinBlance:X,maxBtnSelect:n,halfBtnSelect:w,fixedFromCoin:Te,openCoinSelect:h,currentCoinKey:m,existingCoins:W,lastSelectCoin:U,showCoinSelect:ee,onCoinSelect:we,liquidityTotalAmount:_,toggle:Gt,onInput:ze,isInputTotalAmount:He,isViewDetail:rt,addLiquidityBtnDisabled:c,addLiquidityBtnText:oe,isShowTokenWarning:Lt,chainName:M,closeTokenWarning:xt,warningFromCoin:Ce,warningToCoin:At,isShowLiquidityModal:I,currentPrice:lt,currentPriceReverse:mt,currentPriceTab:Z,minPrice:L,maxPrice:y,toAdd:u,direction:ve,wallet:A,getAddLiquidityType:Vt,clickRefresh:ei,isShowtotalAmount:ti,isAutoStakeFarming:t,farmPoolInfo:R,getFarmsPoolInfo:Ne,positionInfoDetail:B}}});const xn={class:"new-liquidity-right"},Vn={class:"deposit-title"},ea={class:"card-container"},ta={key:0,class:"lock"},ia={class:"card-item"},na={class:"card-item"},aa={key:0,class:"total-amount"},oa=r("span",null,"Total Amount",-1);function ra(e,s,fe,ae,M,se){const F=Wt,z=hi,A=Dt,x=yi,a=Zt,v=vi,O=_i,ye=wi,_e=Ci,V=Pi,X=Qn;return N(),G("div",xn,[r("div",Vn,[Fe(F,{"pool-info":e.poolInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"])]),r("div",ea,[e.positionError?(N(),G("div",ta,[Fe(z)])):Q("",!0),r("div",ia,[Fe(A,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":s[0]||(s[0]=n=>e.fromCoinAmount=n),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:s[1]||(s[1]=n=>e.maxBtnSelect("fromCoin")),onOnHalf:s[2]||(s[2]=n=>e.halfBtnSelect("fromCoin")),onOnInput:s[3]||(s[3]=n=>{e.fromCoinAmount=n,e.fixedFromCoin=!0,e.isInputTotalAmount=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.positionError?(N(),Ee(x,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])):Q("",!0)]),r("div",na,[Fe(A,{modelValue:e.toCoinAmount,"onUpdate:modelValue":s[4]||(s[4]=n=>e.toCoinAmount=n),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:s[5]||(s[5]=n=>e.maxBtnSelect("toCoin")),onOnHalf:s[6]||(s[6]=n=>e.halfBtnSelect("toCoin")),onOnInput:s[7]||(s[7]=n=>{e.toCoinAmount=n,e.fixedFromCoin=!1,e.isInputTotalAmount=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.positionError?(N(),Ee(x,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])):Q("",!0)]),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme=="default"?(N(),G("img",{key:1,class:"add",src:Ti,alt:"",onClick:s[8]||(s[8]=(...n)=>e.toggle&&e.toggle(...n))})):Q("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme!=="default"?(N(),G("img",{key:2,class:"add",src:Ii,alt:"",onClick:s[9]||(s[9]=(...n)=>e.toggle&&e.toggle(...n))})):Q("",!0)]),e.isShowtotalAmount?(N(),G("div",aa,[oa,r("span",null,J(e.liquidityTotalAmount)+" ",1)])):Q("",!0),Fe(a,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"fixed-from-coin":e.fixedFromCoin,"is-input-total-amount":e.isInputTotalAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price-tab":e.currentPriceTab,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","fixed-from-coin","is-input-total-amount","min-price","max-price","current-price-tab","current-price","current-price-reverse"]),Fe(v,{class:"add-liquidity-btn",disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,onClick:s[10]||(s[10]=n=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:xe(()=>[Ye(J(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),e.showCoinSelect?(N(),Ee(O,{key:1,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:s[11]||(s[11]=n=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):Q("",!0),e.isViewDetail?(N(),Ee(ye,{key:2,"pool-info":e.poolInfo,"farm-pool-info":e.farmPoolInfo,"position-info":e.positionInfoDetail,"is-auto-stake-farming":e.isAutoStakeFarming,onOnClose:s[12]||(s[12]=n=>e.isViewDetail=!1)},null,8,["pool-info","farm-pool-info","position-info","is-auto-stake-farming"])):Q("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(N(),Ee(_e,{key:3,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,"is-import-modal":!0,onClose:e.closeTokenWarning,onClickContinue:s[13]||(s[13]=n=>e.isShowTokenWarning=!1)},null,8,["from-coin","to-coin","onClose"])):Q("",!0),e.isShowLiquidityModal?(N(),Ee(V,{key:4,"pool-info":e.poolInfo,title:e.$t("button.addLiquidity"),"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"current-price-tab":e.currentPriceTab,"min-price":e.minPrice,"max-price":e.maxPrice,"show-from-coin-lock":e.showFromCoinLock,"show-to-coin-lock":e.showToCoinLock,"current-direct":e.direction,"is-increase":!1,onToAdd:e.getAddLiquidityType,onOnClose:s[14]||(s[14]=n=>e.isShowLiquidityModal=!1)},null,8,["pool-info","title","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","current-price","current-price-reverse","current-price-tab","min-price","max-price","show-from-coin-lock","show-to-coin-lock","current-direct","onToAdd"])):Q("",!0),e.chainName=="Sui"?(N(),Ee(X,{key:5,"pool-info":e.poolInfo,"is-active":!e.showFromCoinLock&&!e.showToCoinLock,"is-auto-stake-farming":e.isAutoStakeFarming,onSendFarmsPoolInfo:e.getFarmsPoolInfo},null,8,["pool-info","is-active","is-auto-stake-farming","onSendFarmsPoolInfo"])):Q("",!0)])}const Yt=at(Yn,[["render",ra]]),sa=nt({components:{NewLiquidityLeft:Qt,NewLiquidityRight:Yt},setup(){Xt(()=>{ki()});const e=Tt(),s=ut();return T(()=>s),{tickList:tt,route:e}}});const la={key:0,class:"loading-spin-liquidity loading-global"},ua={class:"privide-liquidity"};function ca(e,s,fe,ae,M,se){var x,a;const F=zt,z=Qt,A=Yt;return N(),G(yt,null,[!e.tickList&&((a=(x=e.route)==null?void 0:x.query)!=null&&a.poolAddress)?(N(),G("div",la,[Fe(F)])):Q("",!0),r("div",ua,[Fe(z),Fe(A)])],64)}const Za=at(sa,[["render",ca],["__scopeId","data-v-1b76f12f"]]);export{Za as default};
