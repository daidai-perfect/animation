import{_ as dn}from"./refresh-icon.4e12d6c9.js";import{_ as cn}from"./assets-card.e525446c.js";import{h as ge,u as Fe,c as be,s as ie,a as H,j as Ge,d as fe,l as Ye,b as mn,e as vn}from"./sha256.de7acfa8.js";import{e as Ee,a as Ke,C as Po,L as Ro,r as C,l as P,q as oe,s as Ue,o as i,f as p,h as o,c as Y,x as B,t as V,j as J,v as u,A as se,F as Te,u as Z,S as Oo,M as Mo,p as je,k as Le,a4 as fn,i as Ce,w as ce,P as Bo,a1 as To,Q as Fo,E as Io,B as Eo,b as pn,y as hn,H as gn,K as Cn,D as Ze}from"./entry.ad32dc49.js";import"./index.31084607.js";/* empty css              */import{u as De,a as so,g as Uo,B as bn,b as ze,p as No}from"./pool.f9585ea2.js";import{i as pe}from"./import-icon.de3e6c66.js";import{D as a}from"./decimal.0bdeb344.js";import{_ as wn}from"./route-view.38ae6396.js";import{_ as kn}from"./network-tips.936b8070.js";import{_ as yn}from"./coin-select.16cee704.js";import{_ as An}from"./swap-setting.5405273f.js";/* empty css              */import{_ as _n}from"./token-warning-modal.27181cc2.js";import{_ as Sn}from"./img-leverage_2x.1c577303.js";/* empty css              */import"./token-warning.25c15a3a.js";/* empty css              */import"./img-no-Positions_2x.e49449a4.js";import"./img-no-Positions_2x.e3a6f95b.js";/* empty css              */import"./icon-error_2x.c0a55c63.js";import"./icon-selected_3x.09e9a6f0.js";async function $n(e,h){var U,Q,f;const I=e==="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":e,m=`${ge.Sui.api}/v2/sui/coin/kline?coin_address=${I}&interval=day&market=${h}`;try{const N=await $fetch(m);return console.log("0621###getprice###res###",N),{price:((Q=(U=N==null?void 0:N.data)==null?void 0:U.list)==null?void 0:Q.reverse())||[],daily_rate:(f=N==null?void 0:N.data)==null?void 0:f.daily_rate.replace("%","")}}catch{return{price:[],daily_rate:""}}}async function In(e){try{const{prices:h}=await $fetch(`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&id=${e}&days=7&interval=daily`,{headers:{Connection:"keep-alive",Accept:"*/*"}}),m=(await $fetch(`https://api.coingecko.com/api/v3/coins/markets?ids=${e}&vs_currency=usd&price_change_percentage=24h`,{headers:{Connection:"keep-alive",Accept:"*/*"}}))[0].price_change_percentage_24h,U=[];return h.forEach(Q=>{U.push({price:new a(Q[1]).toString(),timestamp:Q[0]})}),{price:U,daily_rate:m}}catch{return{price:[],daily_rate:""}}}const Nn=Ke({props:{swapLoading:{type:Boolean,default:!1},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},impact:{type:String,default:""},insufficientLiquidity:{type:Boolean,default:!1},oneToAmount:{type:String,default:""},oneFromAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})},suiSwapFee:{type:String,default:""},swapRouterLoading:{type:Boolean,default:!1}},setup(e){const h=Po(Ro,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),I=C(!1),m=Fe(),U=P(()=>m),Q=P(()=>U.value.slippage),f=P(()=>U.isShowRouterModal),N=De(),k=P(()=>N),X=so("Sui"),K=C(0),x=C([]),_=C({});oe(()=>e.suiPreSwapdata,async n=>{var t;if(n&&!be(n)){let w=[];(t=n==null?void 0:n.splitPaths)==null||t.forEach(O=>{O==null||O.basePaths.forEach(async W=>{w.push(W.label)})});const{splitPaths:g}=n,$=g&&g[0]&&g[0].basePaths;if(g&&g.length==1&&$&&$.length==2){const O=$[0].toCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":$[0].toCoin;_.value=k.value.tokensObj[O]||(await X.getTokenListByCoinType[O])[0]}else _.value="";x.value=Array.from(new Set(w)),K.value=x.value.length}},{immediate:!0});const F=C(0),l=C(0);oe(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,Q.value],([n,t,w,g,$,O])=>{if(n&&t&&w&&g&&O)if($){const W=new a(t).mul(new a(O/100));l.value=new a(t).sub(W).toString()}else{const W=new a(n).mul(new a(O/100));F.value=new a(n).add(W).toString()}},{immediate:!0});const ee=n=>{var t;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((t=k.value.tokensObj[n==null?void 0:n.address])==null?void 0:t.logo_url)||(U.theme==="default"?pe("/image/coins/unknown.png"):pe("/image/coins/sui-unknown.png"))},ne=P(()=>{var n,t,w,g,$,O,W,S,q;return(w=(t=k==null?void 0:k.value)==null?void 0:t.tokensObj[(n=e.fromCoin)==null?void 0:n.address])!=null&&w.pyth_id&&((O=($=k==null?void 0:k.value)==null?void 0:$.tokensObj[(g=e.fromCoin)==null?void 0:g.address])==null?void 0:O.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(q=(S=k==null?void 0:k.value)==null?void 0:S.tokensObj[(W=e.fromCoin)==null?void 0:W.address])!=null&&q.coingecko_id?"coingecko":null}),y=P(()=>{var n,t,w,g,$,O,W,S,q;return(w=(t=k==null?void 0:k.value)==null?void 0:t.tokensObj[(n=e.toCoin)==null?void 0:n.address])!=null&&w.pyth_id&&((O=($=k==null?void 0:k.value)==null?void 0:$.tokensObj[(g=e.toCoin)==null?void 0:g.address])==null?void 0:O.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(q=(S=k==null?void 0:k.value)==null?void 0:S.tokensObj[(W=e.toCoin)==null?void 0:W.address])!=null&&q.coingecko_id?"coingecko":null}),G=C(""),j=async()=>{const n=k.value.tokenExternalPriceObj[e.fromCoin.address],t=k.value.tokenExternalPriceObj[e.toCoin.address];if(n&&t){const w=new a(n).div(new a(t)),g=new a(e.oneToAmount.replace(new RegExp(/,/g),"")).sub(w).div(w).mul(100);let $=Math.abs(ie(g,2));w.toNumber()<Number(e.oneToAmount.replace(new RegExp(/,/g),""))?G.value="":(G.value=g>0&&g<=.01?"0.01":$,console.log(n,t,g.toString(),"##367"))}else G.value=""},b=n=>{if(n<5)return"color-s";if(n>=5&&n<10)return"color-w";if(n>=10)return"color-e"};return oe(()=>[e.oneToAmount,k.value.tokenExternalPriceObj],([n,t])=>{n&&t&&!be(t)&&j()},{immediate:!0,deep:!0}),{sFixD:ie,getCoinIcon:ee,indicator:h,rateChange:I,slippage:Q,isShowRouterModal:f,indexStore:m,maximumSold:F,minimumReceived:l,addCommom:H,pathLength:K,sourcesArr:x,coinTypeB:_,priceExangeRate:G,getTextColor:b,formCoinMarket:ne,toCoinMarket:y}}}),re=e=>(je("data-v-92dbae9c"),e=e(),Le(),e),Pn={key:0,class:"swap-info"},Rn={class:"loading-swap"},On={key:1,class:"swap-rate"},Mn={key:0},Bn={key:0,class:"after-amount"},Tn={key:1},Fn={key:0,class:"after-amount"},En=re(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Un=re(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),jn=[En,Un],Ln={key:2,class:"swap-exchange-rate"},Dn={class:"swap-exchange-rate-content"},Wn={key:0},qn=["href"],Jn=re(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Qn=[Jn],Xn={key:1},Hn=["href"],Yn=re(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Zn=[Yn],zn={key:0},Gn=["href"],Kn=re(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Vn=[Kn],xn={key:1},et=["href"],ot=re(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),nt=[ot],tt={key:2},st=["href"],at=re(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),it=[at],lt={key:3},rt=["href"],ut=re(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),dt=[ut],ct={key:3},mt={class:"trade-info"},vt={class:"trade-block"},ft=re(()=>o("div",{class:"lebal"},"Price Impact",-1)),pt={key:0,class:"icon","aria-hidden":"true"},ht=re(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),gt=[ht],Ct={class:"trade-block"},bt={class:"lebal"},wt={key:0,class:"text"},kt={class:"trade-block"},yt=re(()=>o("div",{class:"lebal"},"Fee",-1)),At={key:0,class:"text"},_t={key:0,class:"trade-block"},St=re(()=>o("div",{class:"lebal"},"Route",-1)),$t={key:0,class:"text text-box"},It=["src"],Nt=["src"],Pt={key:1,class:"text text-box"},Rt=["src"],Ot=["src"],Mt=re(()=>o("img",{src:wn,alt:""},null,-1));function Bt(e,h,I,m,U,Q){var X,K,x,_;const f=Oo,N=Mo,k=Ue("image");return e.swapLoading||Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&!e.insufficientLiquidity?(i(),p("div",Pn,[o("div",Rn,[e.swapLoading||e.swapRouterLoading?(i(),Y(f,{key:0,size:"small",indicator:e.indicator},null,8,["indicator"])):B("",!0),e.swapLoading?B("",!0):(i(),p("div",On,[e.rateChange?(i(),p("span",Tn,[e.fromCoinAmount&&e.toCoinAmount?(i(),p("span",Fn,[V(o("img",null,null,512),[[k,e.getCoinIcon(e.toCoin)]]),J(" 1 "+u(e.toCoin.symbol)+" â‰ˆ ",1),V(o("img",null,null,512),[[k,e.getCoinIcon(e.fromCoin)]]),J(u(e.oneFromAmount==1/0?0:e.oneFromAmount)+" "+u(e.fromCoin.symbol),1)])):(i(),Y(f,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(i(),p("span",Mn,[V(o("img",null,null,512),[[k,e.getCoinIcon(e.fromCoin)]]),J(" 1 "+u(e.fromCoin.symbol)+" â‰ˆ ",1),e.fromCoinAmount&&e.toCoinAmount?(i(),p("span",Bn,[V(o("img",null,null,512),[[k,e.getCoinIcon(e.toCoin)]]),J(u(e.oneToAmount==1/0?0:e.oneToAmount)+" "+u(e.toCoin.symbol),1)])):(i(),Y(f,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"right",onClick:h[0]||(h[0]=F=>e.rateChange=!e.rateChange)},jn)])),!e.swapLoading&&e.priceExangeRate!==""&&e.priceExangeRate>10?(i(),p("div",Ln,[o("div",Dn,[o("p",null,[o("span",{class:se(e.getTextColor(e.priceExangeRate))},"Within ~"+u(e.priceExangeRate)+"% of",3)]),e.formCoinMarket=="pyth"&&e.toCoinMarket=="pyth"?(i(),p("span",Wn,[J("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.fromCoin.pyth_id}&ids[]=${e.toCoin.pyth_id}`,target:"_blank"},Qn,8,qn)])):e.formCoinMarket=="coingecko"&&e.toCoinMarket=="coingecko"?(i(),p("span",Xn,[J("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.fromCoin.coingecko_id},${e.toCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},Zn,8,Hn)])):e.formCoinMarket!==e.toCoinMarket?(i(),p(Te,{key:2},[e.formCoinMarket=="pyth"?(i(),p("span",zn,[J("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.fromCoin.pyth_id}`,target:"_blank"},Vn,8,Gn)])):e.formCoinMarket=="coingecko"?(i(),p("span",xn,[J("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.fromCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},nt,8,et)])):B("",!0),e.toCoinMarket=="coingecko"?(i(),p("span",tt,[J("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.toCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},it,8,st)])):e.toCoinMarket=="pyth"?(i(),p("span",lt,[J("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.toCoin.pyth_id}`,target:"_blank"},dt,8,rt)])):B("",!0)],64)):B("",!0)])])):e.swapLoading?(i(),p("span",ct,"Best route and price")):B("",!0)]),o("div",mt,[o("div",vt,[ft,e.swapRouterLoading?(i(),Y(N,{key:1,paragraph:!1,active:""})):(i(),p("div",{key:0,class:se(["text",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[J(u(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(i(),p("svg",pt,gt)):B("",!0)],2))]),o("div",Ct,[o("div",bt,u(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swapRouterLoading?(i(),Y(N,{key:1,paragraph:!1,active:""})):(i(),p("div",wt,u(e.fixedFromCoin?("addCommom"in e?e.addCommom:Z(H))(("sFixD"in e?e.sFixD:Z(ie))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:Z(H))(("sFixD"in e?e.sFixD:Z(ie))(e.maximumSold,e.fromCoin.decimals)))+" "+u(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",kt,[yt,e.swapRouterLoading?(i(),Y(N,{key:1,paragraph:!1,active:""})):(i(),p("div",At,u(e.suiSwapFee)+" "+u(e.fromCoin.symbol),1))]),e.insufficientLiquidity?B("",!0):(i(),p("div",_t,[St,e.swapRouterLoading?(i(),Y(N,{key:1,paragraph:!1,active:""})):(i(),p("div",{key:0,class:"text",onClick:h[1]||(h[1]=F=>e.indexStore.setIsShowRouterModal(!e.isShowRouterModal))},[!e.swapRouterLoading&&e.suiPreSwapdata&&e.suiPreSwapdata.splitPaths&&e.suiPreSwapdata.splitPaths.length==1?(i(),p("div",$t,[o("span",null,u(e.fromCoin.symbol)+" "+u(e.coinTypeB&&((X=e.coinTypeB)!=null&&X.symbol)?`> ${(K=e.coinTypeB)==null?void 0:K.symbol}`:"")+" > "+u(e.toCoin.symbol),1),o("img",{src:e.sourcesArr[0]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,It),e.sourcesArr[1]?(i(),p("img",{key:0,src:e.sourcesArr[1]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,Nt)):B("",!0)])):e.swapRouterLoading?B("",!0):(i(),p("div",Pt,[J(u((_=(x=e.suiPreSwapdata)==null?void 0:x.splitPaths)==null?void 0:_.length)+" Streams ",1),e.sourcesArr[0]?(i(),p("img",{key:0,src:e.sourcesArr[0]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,Rt)):B("",!0),e.sourcesArr[1]?(i(),p("img",{key:1,src:e.sourcesArr[1]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,Ot)):B("",!0)])),Mt]))]))])])):B("",!0)}const Tt=Ee(Nn,[["render",Bt],["__scopeId","data-v-92dbae9c"]]),Ft={props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""},market:{type:String,default:""}},setup(e,h){const{$echarts:I}=fn();let m=null,U;const Q=C(!0),f=Fe(),N=P(()=>f),k=P(()=>N.value.chainName),X=P(()=>ge[k.value]),K=De(),x=P(()=>K),_=(n,t,w)=>{U={xAxis:{type:"category",boundaryGap:!1,show:!1,data:t},yAxis:{type:"value",show:!1,min:function(g){return g.min-g.min*.1},max:function(g){return g.max+g.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:N.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function(g){return`<div class="chart-tip">
              <div>${g&&g[0]&&g[0].name}</div>
              <div>$${fe(g&&g[0]&&g[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:N.value.chainName=="Aptos"?"#0C4535":"#2E546D"},{offset:1,color:N.value.chainName=="Aptos"?"#151817":"#1B1B1B"}]},series:[{data:n,type:"line",showSymbol:!1,areaStyle:{},lineStyle:{color:N.value.chainName=="Aptos"?"#68FFD8":"#76C8FF",width:2,type:"solid"}}]},U&&m.clear(),U&&m.setOption(U,!0),m.resize(),Q.value=!1},F=C(""),l=C(""),ee=async n=>{var W,S,q;const t=[],w=[],{price:g,daily_rate:$}=k.value==="Aptos"?await In(n):await $n(n,e.market);k.value=="Sui"&&K.setTokenExternalPrice(e.coin.address,(W=g[g.length-1])==null?void 0:W.price),F.value=$,l.value=g&&g.length>=1&&g[g.length-1].price,k.value==="Aptos"?g.forEach(d=>{t.push(d.price);const c=Ye(Number(d.timestamp),"MD"),ve=Ye(Number(d.timestamp),"HM");w.push(c+" "+ve)}):g.forEach(d=>{t.push(d.price);const c=Ye(new a(d.timestamp).mul(1e3).toNumber(),"MD"),ve=Ye(new a(d.timestamp).mul(1e3).toNumber(),"HM");w.push(c+" "+ve)});let O=document.getElementById(`main${(S=e.coin)==null?void 0:S.name}`);m=I.init(O),_(t,w,(q=e.coin)==null?void 0:q.name)};oe(()=>e.id,(n,t)=>{n&&(F.value="",l.value="",setTimeout(()=>{ee(n)},1e3))},{immediate:!0});const ne=C(""),y=C(""),G=C(""),j=C("");return oe(()=>[x.value.tokensObj,e.coin],([n,t])=>{var w,g;n&&t&&n[t.address]&&(y.value=((w=n[t.address])==null?void 0:w.labels)&&((g=n[t.address])==null?void 0:g.labels[0]),ne.value=n[t.address].name,G.value=n[t.address].symbol,j.value=n[t.address].address)},{immediate:!0,deep:!0}),oe(()=>e.refresh,n=>{n&&ee(e.id)}),{theme:P(()=>N.value.theme),store:f,importIcon:pe,fixD:Ge,config:X,price_rate_24h:F,nowPrice:l,coinName:ne,coinLabels:y,coinSymbol:G,address:j,decimalUi:fe}}},Et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAk1BMVEUAAADn2v/m2//r2//v4//n2v/55P/n2v/o3P//+P/m2v/n2f/n2v/n2v/n2v/n2v/n2v/o2//p2//n3f/o3v/n2f/n2v/n2v/n2v/n2v/n2//o2v/q3f/r4f/u3f/n2v/o2v/n2//p3P/o3P/m2v/n2v/n2f/n2v/o2f/n2//r3f/t3P/n2v/m2v/o2v/r3v/m2f/tUDLHAAAAMHRSTlMAl5oyFNMJqSwFhvvr5d7Yr2FGNSD0zb2lkIltOhkOxoJoT0D48aJzWFYlHeB8Wief0nHAAAABSElEQVQ4y52Q53LCMBCEZWK5g0swBpveQknZ93+6rFxAHkSYyf6x9+67JqHLKxOZRzJJbWHStkCn0Fo8pG0XuvJv0dciBjVZb+dZeoxABb38MlbpXeucr5z2QwdUf8vX1h0ByLT9aAeCGlez4Ozw5zoE4nvFBJB0yymUhqp0B2DT5ec0O+YlWlUMJsCqAwJA8jNV1W4RAnuvqepeYwWsOR/AkfM9ji8YjYBTC3wCZyEq1jvKnoCQP8X90j0wF2IGuM2jArjUE8sWAPAmxACwavtDf623XJsBtoqa2zcm4MI8Ag7iNZkBeAcVc8cUOPhPgJjP4I/UzkYgKtWxpQqaAGfMvvUATIUBaOQHAEb2M2CZcj4OnrhJasDYXYVQ9Vpe2LJ/BeWyf4/oAXlC25e9uI0IqswRJulX/BOwXgG2JPCCIPA3sXmM/QK1PTc8LGCPoAAAAABJRU5ErkJggg==",Ut="data:image/png;base64,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";const jt=e=>(je("data-v-405f73ff"),e=e(),Le(),e),Lt={class:"token-info"},Dt={class:"token-info-padding"},Wt={class:"token-info-header"},qt={class:"left"},Jt=["onerror"],Qt={class:"name"},Xt={class:"desc"},Ht={key:0},Yt={class:"right"},Zt={class:"price-info"},zt={key:0,src:Et,alt:""},Gt={key:1,src:Ut,alt:""},Kt={class:"token-info-footer"},Vt={class:"left"},xt={class:"address"},es={key:0,class:"pc-address"},os={key:1,class:"pc-address"},ns={class:"h5-address"},ts=jt(()=>o("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),ss=[ts],as={class:"right"},is=["id"];function ls(e,h,I,m,U,Q){var k;const f=Bo,N=Ue("image");return i(),p("div",Lt,[o("div",Dt,[o("div",Wt,[o("div",qt,[V(o("img",{onerror:m.theme=="default"?m.importIcon("/image/coins/unknown.png"):m.importIcon("/image/coins/sui-unknown.png")},null,8,Jt),[[N,I.coin.logoURI||m.importIcon(`/image/coins/${I.coin.symbol.toLowerCase()}.png`)]]),o("div",null,[o("div",Qt,u(m.coinSymbol),1),o("div",Xt,[o("span",null,[J(u(m.coinName)+" ",1),m.theme!=="sui"?(i(),p("span",Ht,u(m.coinLabels?`(${m.coinLabels})`:""),1)):B("",!0)])])])]),o("div",Yt,[Ce(f,{placement:"top","arrow-point-at-center":""},{title:ce(()=>[J(u(I.market==="pyth"?"Data source: Pyth Network":"Data source: CoinGecko"),1)]),default:ce(()=>[o("div",Zt,[I.market==="pyth"?(i(),p("img",zt)):(i(),p("img",Gt)),o("span",null,"$"+u(m.nowPrice?Number(m.nowPrice)<1?m.decimalUi(m.nowPrice,4):m.fixD(m.nowPrice,2):"--"),1),m.price_rate_24h?(i(),p("i",{key:2,class:se(m.price_rate_24h>0?"up":m.price_rate_24h<0?"down":"up")},u(m.price_rate_24h>0?`+ ${m.fixD(m.price_rate_24h,2)}`:m.price_rate_24h<0?+`${m.fixD(m.price_rate_24h,2)}`:`+${m.fixD(m.price_rate_24h,2)}`)+"%",3)):B("",!0)])]),_:1})])]),o("div",Kt,[o("div",Vt,[o("div",xt,[I.coin&&m.address!=="0x2::sui::SUI"?(i(),p("span",es,u(I.coin&&I.coin.address.substr(0,13))+" ... "+u(I.coin&&I.coin.address.substr(I.coin.address.length-13,13)),1)):(i(),p("span",os,u(I.coin&&I.coin.address),1)),o("span",ns,u(I.coin&&I.coin.address.substr(0,4))+" ... "+u(I.coin&&I.coin.address.substr(I.coin.address.length-4,4)),1),(i(),p("svg",{class:"icon","aria-hidden":"true",onClick:h[0]||(h[0]=X=>m.store.copy(I.coin&&I.coin.address))},ss))])]),o("div",as,[o("div",{id:`main${(k=I.coin)==null?void 0:k.name}`,class:"main"},null,8,is)])])])])}const rs=Ee(Ft,[["render",ls],["__scopeId","data-v-405f73ff"]]);const us=Ke({components:{Modal:To},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e){const h=De(),I=so("Sui"),m=P(()=>h);P(()=>{var _,F;return(F=(_=m.value)==null?void 0:_.poolInfo)==null?void 0:F.needReverse});const U=C([]),Q=C({});oe(()=>[e.suiPreSwapdata,e.fromCoin,e.toCoin],async([_,F,l])=>{if(_&&!be(_)){let ee=[];_.splitPaths.sort((b,n)=>n.outputAmount-b.outputAmount);for(let b=0;b<_.splitPaths.length;b++){const n=_.splitPaths[b],t={...n,amountIn:new a(n.inputAmount).div(new a(Math.pow(10,F.decimals))).toString(),amountOut:new a(n.outputAmount).div(new a(Math.pow(10,l.decimals))).toString()};let w=[];for(let g=0;g<n.basePaths.length;g++){const $=n.basePaths[g],O=$.fromCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":$.fromCoin,W=$.toCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":$.toCoin,S=m.value.tokensObj[O]||(await I.getTokenListByCoinType([O]))[0],q=m.value.tokensObj[W]||(await I.getTokenListByCoinType([W]))[0];($==null?void 0:$.label)=="Deepbook"?w.push({...$,...m.value.routerPoolConfigObj[$.poolAddress],feeRate:new a($.feeRate).div(new a(Math.pow(10,9))),coin_a:S,coin_b:q}):w.push({...$,...m.value.routerPoolConfigObj[$.poolAddress],feeRate:new a($.feeRate).div(new a(Math.pow(10,6)))})}ee.push({...t,basePaths:w})}U.value=ee;const ne=[];let y=new a(0);ee.forEach(b=>{const n=new a(b.percent).gt(0)?new a(b.percent).div(100).mul(100).toString():0,t=ie(n,2);y=y.plus(t);const w=t.split(".");ne.push({value:t,int:w[0],decimal:w[1],pathIndex:b.pathIndex})});let G=new a(100).minus(y).toNumber();const j=ne.sort((b,n)=>Number(n.decimal)-Number(b.decimal));if(G)for(let b=0;b<j.length&&G;b++)j[b].value=new a(j[b].value).plus(.01).toString(),G=new a(G).minus(.01).toNumber();Q.value=Object.fromEntries(j.map((b,n)=>[b.pathIndex,b]))}},{immediate:!0});const f=Fe(),N=P(()=>f),k=_=>{var F;return(_==null?void 0:_.logoURI)||(_==null?void 0:_.logo_url)||((F=m.value.tokensObj[(_==null?void 0:_.address)=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":_==null?void 0:_.address])==null?void 0:F.logo_url)||(N.value.theme==="default"?pe("/image/coins/unknown.png"):pe("/image/coins/sui-unknown.png"))},X=async _=>{const F=(await I.getTokenListByCoinType([_]))[0];return F&&!be(F)?F==null?void 0:F.logo_url:""},K=P(()=>m.value.tokensObj),x=P(()=>N.value.currentExplorer);return{addCommom:H,routerStep:U,getCoinIcon:k,getDeepBookLogo:X,percentObj:Q,tokensObj:K,store:N,getExplorerUrl:Uo,currentExplorer:x}}}),we=e=>(je("data-v-087b9a70"),e=e(),Le(),e),ds=we(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),cs={class:"route-top"},ms={class:"token-a"},vs={alt:""},fs={class:"token-num"},ps={class:"token-symbol"},hs={class:"token-b"},gs={class:"token-num"},Cs={class:"token-symbol"},bs={alt:""},ws={class:"route-bottom"},ks=we(()=>o("div",{class:"left-round"},null,-1)),ys=we(()=>o("div",{class:"right-round"},null,-1)),As={class:"percent-text"},_s={class:"amount"},Ss={class:"symbol"},$s={class:"percent-ratio"},Is={class:"percent-text"},Ns={class:"amount"},Ps={class:"symbol"},Rs={class:"pool-info-box"},Os={key:0,class:"icon","aria-hidden":"true"},Ms=we(()=>o("use",{"xlink:href":"#icon-icon_on1"},null,-1)),Bs=[Ms],Ts={class:"pool-info"},Fs={class:"pool-info-top"},Es={class:"token-a-img",alt:""},Us={class:"token-b-img",alt:""},js={class:"source"},Ls=["src"],Ds={class:"pool-info-detail"},Ws={class:"pool-address"},qs=we(()=>o("span",null,"Pool Address",-1)),Js=["href"],Qs=["onClick"],Xs=we(()=>o("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),Hs=[Xs],Ys={key:0,class:"token-info-detail"},Zs={alt:""},zs={class:"token-name"},Gs={class:"token-address"},Ks=["onClick"],Vs=we(()=>o("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),xs=[Vs],ea={class:"token-symbol"},oa={class:"token-info-detail"},na={alt:""},ta={class:"token-name"},sa={class:"token-address"},aa=["onClick"],ia=we(()=>o("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),la=[ia],ra={class:"token-symbol"};function ua(e,h,I,m,U,Q){const f=Fo("Modal"),N=Ue("image");return i(),Y(f,{title:"Route",width:"600px",visible:!0,footer:null,onCancel:h[0]||(h[0]=k=>e.$emit("onClose"))},{closeIcon:ce(()=>[ds]),default:ce(()=>{var k,X,K,x;return[o("div",cs,[o("div",ms,[V(o("img",vs,null,512),[[N,(k=e.fromCoin)==null?void 0:k.logo_url]]),o("span",fs,u(("addCommom"in e?e.addCommom:Z(H))(e.fromCoinAmount)),1),o("span",ps,u((X=e.fromCoin)==null?void 0:X.symbol),1)]),o("div",hs,[o("span",gs,u(("addCommom"in e?e.addCommom:Z(H))(e.toCoinAmount)),1),o("span",Cs,u((K=e.toCoin)==null?void 0:K.symbol),1),V(o("img",bs,null,512),[[N,(x=e.toCoin)==null?void 0:x.logo_url]])])]),o("div",ws,[ks,ys,(i(!0),p(Te,null,Io(e.routerStep,(_,F)=>(i(),p("div",{key:F,class:se(["route-path",F!==0?"route-path-active":""])},[o("div",{class:se(["percent",F!==0?"percent-active":""])},[o("div",As,[o("div",_s,u(("addCommom"in e?e.addCommom:Z(H))(_.amountIn)),1),o("div",Ss,u(e.fromCoin.symbol),1),o("span",$s,"("+u(e.percentObj&&e.percentObj[_.pathIndex].value)+"%)",1)]),o("div",Is,[o("div",Ns,u(("addCommom"in e?e.addCommom:Z(H))(_.amountOut)),1),o("div",Ps,u(e.toCoin.symbol),1)])],2),o("div",Rs,[_.basePaths&&_.basePaths.length>1?(i(),p("svg",Os,Bs)):B("",!0),(i(!0),p(Te,null,Io(_.basePaths,(l,ee)=>{var ne,y,G,j,b,n,t,w,g,$,O,W,S,q,d,c,ve,Oe,We,qe;return i(),p("div",{key:ee},[o("div",Ts,[o("div",Fs,[V(o("img",Es,null,512),[[N,l.label=="Cetus"?e.getCoinIcon({address:l.fromCoin}):(ne=l==null?void 0:l.coin_a)==null?void 0:ne.logo_url]]),V(o("img",Us,null,512),[[N,l.label=="Cetus"?e.getCoinIcon({address:l.toCoin}):(y=l==null?void 0:l.coin_b)==null?void 0:y.logo_url]]),o("span",null,u((l==null?void 0:l.feeRate)*100)+"%",1)]),o("div",js,[o("img",{src:l.label=="Cetus"?"/sui-image/logo_cetus@2x.png":"/sui-image/logo_deepbook@2x.png",alt:""},null,8,Ls),o("span",null,u(l.label=="Cetus"?"Cetus":"DeepBook"),1)]),o("div",{class:se(["pool-info-detail-box",_.basePaths.length==1?"pool-info-detail-box-center":ee==0?"pool-info-detail-box-left":"pool-info-detail-box-right"])},[o("div",Ds,[o("div",Ws,[qs,o("p",null,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:Z(Uo))(e.currentExplorer,"poolAddress",l==null?void 0:l.poolAddress),target:"_blank"},u(l&&((G=l==null?void 0:l.poolAddress)==null?void 0:G.substr(0,6)))+" ... "+u(l&&((j=l==null?void 0:l.poolAddress)==null?void 0:j.substr(l.poolAddress.length-6,6))),9,Js),(i(),p("svg",{class:"copy-icon","aria-hidden":"true",onClick:Ne=>e.store.copy(l==null?void 0:l.poolAddress)},Hs,8,Qs))])]),l.coin_a&&l.coin_a?(i(),p("div",Ys,[V(o("img",Zs,null,512),[[N,(b=l==null?void 0:l.coin_a)==null?void 0:b.logo_url]]),o("div",null,[o("div",null,[o("span",zs,u((n=l==null?void 0:l.coin_a)==null?void 0:n.symbol),1),o("p",Gs,[o("span",null,u((w=(t=l==null?void 0:l.coin_a)==null?void 0:t.address)==null?void 0:w.substr(0,4))+" ... "+u(l&&((O=(g=l==null?void 0:l.coin_a)==null?void 0:g.address)==null?void 0:O.substr((($=l==null?void 0:l.coin_a)==null?void 0:$.address.length)-4,4))),1),(i(),p("svg",{class:"copy-icon","aria-hidden":"true",onClick:Ne=>{var he;return e.store.copy((he=l==null?void 0:l.coin_a)==null?void 0:he.address)}},xs,8,Ks))])]),o("div",ea,u((W=l==null?void 0:l.coin_a)==null?void 0:W.name),1)])])):B("",!0),o("div",oa,[V(o("img",na,null,512),[[N,(S=l==null?void 0:l.coin_b)==null?void 0:S.logo_url]]),o("div",null,[o("div",null,[o("span",ta,u((q=l==null?void 0:l.coin_b)==null?void 0:q.symbol),1),o("p",sa,[o("span",null,u((c=(d=l==null?void 0:l.coin_b)==null?void 0:d.address)==null?void 0:c.substr(0,4))+" ... "+u(l&&((We=(ve=l==null?void 0:l.coin_b)==null?void 0:ve.address)==null?void 0:We.substr(((Oe=l==null?void 0:l.coin_b)==null?void 0:Oe.address.length)-4,4))),1),(i(),p("svg",{class:"copy-icon","aria-hidden":"true",onClick:Ne=>{var he;return e.store.copy((he=l==null?void 0:l.coin_b)==null?void 0:he.address)}},la,8,aa))])]),o("div",ra,u((qe=l==null?void 0:l.coin_b)==null?void 0:qe.name),1)])])])],2)])])}),128))])],2))),128))])]}),_:1})}const da=Ee(us,[["render",ua],["__scopeId","data-v-087b9a70"]]),ca=Ke({components:{Modal:To},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},slippage:{type:String,default:""},impact:{type:Number,required:!1},fixedFromCoin:{type:Boolean,default:!1},fee:{type:String,required:!1},formatFee:{type:String,default:""},isShowAccept:{type:Boolean,default:!1},swapLoading:{type:Boolean,required:!1},oneFromAmount:{type:String,default:""},oneToAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e,h){const I=De(),m=P(()=>I),U=Fe(),Q=P(()=>U),f=b=>{var n;return(b==null?void 0:b.logoURI)||(b==null?void 0:b.logo_url)||((n=m.value.tokensObj[b==null?void 0:b.address])==null?void 0:n.logo_url)||(Q.value.theme==="default"?pe("/image/coins/unknown.png"):pe("/image/coins/sui-unknown.png"))},N=C(!1),k=P(()=>Q.value.chainName),X=async()=>{h.emit("to-swap")};C([]);const K=C(0),x=C(""),_=C(""),F=P(()=>Q.value.slippage);oe(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,F.value],([b,n,t,w,g,$])=>{if(b&&n&&t&&w&&$)if(g){const O=new a(n).mul(new a($/100));_.value=new a(n).sub(O).toString()}else{const O=new a(b).mul(new a($/100));x.value=new a(b).add(O).toString()}},{immediate:!0});const l=C(""),ee=P(()=>{var b,n,t,w,g,$,O,W,S;return(t=(n=m==null?void 0:m.value)==null?void 0:n.tokensObj[(b=e.fromCoin)==null?void 0:b.address])!=null&&t.pyth_id&&(($=(g=m==null?void 0:m.value)==null?void 0:g.tokensObj[(w=e.fromCoin)==null?void 0:w.address])==null?void 0:$.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(S=(W=m==null?void 0:m.value)==null?void 0:W.tokensObj[(O=e.fromCoin)==null?void 0:O.address])!=null&&S.coingecko_id?"coingecko":null}),ne=P(()=>{var b,n,t,w,g,$,O,W,S;return(t=(n=m==null?void 0:m.value)==null?void 0:n.tokensObj[(b=e.toCoin)==null?void 0:b.address])!=null&&t.pyth_id&&(($=(g=m==null?void 0:m.value)==null?void 0:g.tokensObj[(w=e.toCoin)==null?void 0:w.address])==null?void 0:$.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(S=(W=m==null?void 0:m.value)==null?void 0:W.tokensObj[(O=e.toCoin)==null?void 0:O.address])!=null&&S.coingecko_id?"coingecko":null}),y=async()=>{const b=m.value.tokenExternalPriceObj[e.fromCoin.address],n=m.value.tokenExternalPriceObj[e.toCoin.address];if(b&&n){const t=new a(b).div(new a(n)),w=new a(e.oneToAmount.replace(new RegExp(/,/g),"")).sub(t).div(t).mul(100);let g=Math.abs(ie(w,2));t.toNumber()<Number(e.oneToAmount.replace(new RegExp(/,/g),""))?l.value="":l.value=w>0&&w<=.01?"0.01":g}else l.value=""},G=b=>{if(b<5)return"color-s";if(b>=5&&b<10)return"color-w";if(b>=10)return"color-e"};oe(()=>[e.oneToAmount,m.value.tokenExternalPriceObj,k.value],([b,n,t])=>{b&&n&&!be(n)&&t!=="Aptos"&&y()},{immediate:!0,deep:!0});const j=C(!1);return{getCoinIcon:f,addCommom:H,sFixD:ie,rateChange:N,chainName:k,clickNextBtn:X,pathLength:K,maximumSold:x,minimumReceived:_,decimalUi:fe,getTextColor:G,priceExangeRate:l,formCoinMarket:ee,toCoinMarket:ne,readWithin:j}}}),ma=""+globalThis.__publicAssetsURL("sui-image/within-error.png");const ae=e=>(je("data-v-8cffddfe"),e=e(),Le(),e),va=ae(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),fa={class:"new-swap-contnet"},pa={class:"coin-info"},ha={class:"from-coin-info"},ga={class:"left"},Ca={class:"coin-amount"},ba={class:"coin-symbol"},wa={class:"right"},ka={class:"to-coin-info"},ya={class:"left"},Aa={class:"coin-amount"},_a={class:"coin-symbol"},Sa={class:"right"},$a=ae(()=>o("div",{class:"to-swap-logo"},null,-1)),Ia={class:"coin-rate"},Na={key:0,class:"coin-rate-box"},Pa={class:"left"},Ra=ae(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Oa=ae(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Ma=[Ra,Oa],Ba={key:1,class:"coin-rate-box"},Ta={class:"left"},Fa=ae(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Ea=ae(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Ua=[Fa,Ea],ja={key:2,class:"within-tips-box"},La={class:"within-tips"},Da={key:0},Wa=["href"],qa=ae(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Ja=[qa],Qa={key:1},Xa=["href"],Ha=ae(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Ya=[Ha],Za={key:0},za=["href"],Ga=ae(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Ka=[Ga],Va={key:1},xa=["href"],ei=ae(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),oi=[ei],ni={key:2},ti=["href"],si=ae(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),ai=[si],ii={key:3},li=["href"],ri=ae(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),ui=[ri],di={class:"bottom"},ci={class:"induction"},mi={class:"item"},vi={class:"induction-text"},fi={class:"induction-value"},pi={class:"item"},hi={class:"induction-text"},gi={class:"induction-value"},Ci={class:"item"},bi={class:"induction-text"},wi={key:0,class:"icon","aria-hidden":"true"},ki=ae(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),yi=[ki],Ai={class:"item"},_i={class:"induction-text"},Si={key:0,class:"induction-value"},$i={key:1,class:"induction-value"},Ii={key:0,class:"within-desc"},Ni=ae(()=>o("div",{class:"within-top"},[o("img",{src:ma,alt:""}),o("span",null,"The exchange rate of this order deviates from the market price by a large percentage. Are you sure you want to continue the swap?")],-1)),Pi={class:"within-bottom"},Ri={key:0,class:"price-updated"},Oi=ae(()=>o("span",null,"Price updated",-1));function Mi(e,h,I,m,U,Q){const f=Eo,N=Fo("Modal"),k=Ue("image");return i(),Y(N,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal",onCancel:h[7]||(h[7]=X=>e.$emit("on-close"))},{closeIcon:ce(()=>[va]),default:ce(()=>[o("div",fa,[o("div",pa,[o("div",ha,[o("div",ga,[o("div",Ca,u(e.fromCoinAmount&&("addCommom"in e?e.addCommom:Z(H))(e.fromCoinAmount)),1),o("div",ba,u(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",wa,[V(o("img",null,null,512),[[k,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]])])]),o("div",ka,[o("div",ya,[o("div",Aa,u(e.toCoinAmount&&("addCommom"in e?e.addCommom:Z(H))(e.toCoinAmount)),1),o("div",_a,u(e.toCoin&&e.toCoin.symbol),1)]),o("div",Sa,[V(o("img",null,null,512),[[k,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]])]),$a]),o("div",Ia,[e.rateChange?(i(),p("div",Ba,[o("div",Ta,[V(o("img",null,null,512),[[k,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,"1 "+u(e.toCoin&&e.toCoin.symbol)+" â‰ˆ",1),V(o("img",null,null,512),[[k,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,u(e.oneFromAmount)+" "+u(e.fromCoin.symbol),1)]),o("div",{class:"right",onClick:h[1]||(h[1]=X=>e.rateChange=!e.rateChange)},Ua)])):(i(),p("div",Na,[o("div",Pa,[V(o("img",null,null,512),[[k,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,"1 "+u(e.fromCoin&&e.fromCoin.symbol)+" â‰ˆ",1),V(o("img",null,null,512),[[k,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,u(e.oneToAmount)+" "+u(e.toCoin.symbol),1)]),o("div",{class:"right",onClick:h[0]||(h[0]=X=>e.rateChange=!e.rateChange)},Ma)])),e.chainName=="Sui"&&e.priceExangeRate&&Number(e.priceExangeRate)>10?(i(),p("div",ja,[o("div",La,[o("p",null,[o("span",{class:se(e.getTextColor(e.priceExangeRate))},"Within ~"+u(e.priceExangeRate)+"% of",3)]),e.formCoinMarket=="pyth"&&e.toCoinMarket=="pyth"?(i(),p("span",Da,[J("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.fromCoin.pyth_id}&ids[]=${e.toCoin.pyth_id}`,target:"_blank"},Ja,8,Wa)])):e.formCoinMarket=="coingecko"&&e.toCoinMarket=="coingecko"?(i(),p("span",Qa,[J("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.fromCoin.coingecko_id},${e.toCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},Ya,8,Xa)])):e.formCoinMarket!==e.toCoinMarket?(i(),p(Te,{key:2},[e.formCoinMarket=="pyth"?(i(),p("span",Za,[J("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.fromCoin.pyth_id}`,target:"_blank"},Ka,8,za)])):e.formCoinMarket=="coingecko"?(i(),p("span",Va,[J("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.fromCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},oi,8,xa)])):B("",!0),e.toCoinMarket=="coingecko"?(i(),p("span",ni,[J("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.toCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},ai,8,ti)])):e.toCoinMarket=="pyth"?(i(),p("span",ii,[J("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.toCoin.pyth_id}`,target:"_blank"},ui,8,li)])):B("",!0)],64)):B("",!0)])])):B("",!0)])]),o("div",di,[o("div",ci,[o("div",mi,[o("div",vi,u(e.$t("modal.slippageTolerance")),1),o("div",fi,u(e.slippage)+"%",1)]),o("div",pi,[o("div",hi,u(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",gi,u(e.fixedFromCoin?("addCommom"in e?e.addCommom:Z(H))(("sFixD"in e?e.sFixD:Z(ie))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:Z(H))(("sFixD"in e?e.sFixD:Z(ie))(e.maximumSold,e.fromCoin.decimals)))+" "+u(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),o("div",Ci,[o("div",bi,u(e.$t("common.priceImpact")),1),o("div",{class:se(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[J(u(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(i(),p("svg",wi,yi)):B("",!0)],2)]),o("div",Ai,[o("div",_i,u(e.$t("common.fee")),1),e.chainName=="Aptos"?(i(),p("div",Si,u(e.formatFee)+" "+u(e.fromCoin.symbol)+" ("+u(e.fee*100)+"%) ",1)):(i(),p("div",$i,u(e.fee)+" "+u(e.fromCoin.symbol),1))])])]),e.chainName=="Sui"&&e.priceExangeRate&&Number(e.priceExangeRate)>10?(i(),p("div",Ii,[Ni,o("div",Pi,[o("div",{class:se(["within-btn",e.readWithin?"within-btn-active":""]),onClick:h[2]||(h[2]=X=>e.readWithin=!0)},"Yes, please continue.",2),o("div",{class:"within-btn",onClick:h[3]||(h[3]=X=>e.$emit("on-close"))},"No, cancel it.")])])):B("",!0)]),e.isShowAccept?(i(),p("div",Ri,[Oi,Ce(f,{class:"accept-btn",loading:e.swapLoading,onClick:h[4]||(h[4]=X=>e.$emit("accept"))},{default:ce(()=>[J("Accept")]),_:1},8,["loading"])])):e.chainName=="Sui"?(i(),Y(f,{key:1,class:"big-btn swap-confirm-btn",disabled:Number(e.priceExangeRate)>10&&!e.readWithin,onClick:h[5]||(h[5]=X=>e.clickNextBtn())},{default:ce(()=>[J(u(e.$t("button.confirmSwap")),1)]),_:1},8,["disabled"])):e.chainName=="Aptos"?(i(),Y(f,{key:2,class:"big-btn swap-confirm-btn",onClick:h[6]||(h[6]=X=>e.clickNextBtn())},{default:ce(()=>[J(u(e.$t("button.confirmSwap")),1)]),_:1})):B("",!0)]),_:1},8,["title"])}const Bi=Ee(ca,[["render",Mi],["__scopeId","data-v-8cffddfe"]]),Ti=Ke({setup(){const e=pn(),h=Po(Ro,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:I,locale:m}=hn(),U=Fe(),Q=De(),f=P(()=>Q);let N=C(!1),k=C(!0),X=C(!1),K=C(!1),x=C(!1),_=C(!1);const F=C("fromCoin"),l=C(""),ee=C(""),ne=C(!1),y=C(!0),G=C(!1),j=C(!1),b=C(!1),n=C(""),t=C(""),w=C(20),g=C(0),$=C(null),O=C(!1),W=P(()=>U.slippage),S=P(()=>U.chainName),q=P(()=>S.value?so(S.value):{}),d=C(),c=C(),ve=P(()=>ge&&ge[S.value]&&ge[S.value].hasRouter),Oe=P(()=>Q.getPoolInfoSuccess),We=P(()=>{var s;return T.value&&((s=T.value)!=null&&s.is_pause)?"Pool Closed":!d.value||!c.value?I("modal.selectTokenModalTitle"):!Number(n.value)&&!Number(t.value)?I("button.enterAmount"):!ve.value&&!T.value&&Oe.value?"Pool Not Found":ve.value&&_e.value?"No Available Route":O.value?I("button.insufficientLiquidity"):Number(n.value)>Number(de.value)?I("button.insufficientBalance",{name:d.value.symbol}):I("button.swap")}),qe=s=>{var v,r,A,M;F.value=s,s==="fromCoin"?(l.value=((v=c.value)==null?void 0:v.address)||"",ee.value=((r=d.value)==null?void 0:r.address)||""):(l.value=((A=d.value)==null?void 0:A.address)||"",ee.value=((M=c.value)==null?void 0:M.address)||""),ne.value=!0},Ne=C({}),he=C({}),jo=s=>{F.value==="fromCoin"?(Ne.value=s,oo(s)):(he.value=s,oo(s))},Lo=s=>{s==="fromCoin"?(y.value=!0,S.value==="Aptos"?n.value=de.value>0?d.value.symbol=="APT"?new a(Number(de.value)).sub(new a(.1)).lt(new a(0))?"0":new a(Number(de.value)).sub(new a(.1)).toString():String(de.value):"":n.value=de.value>0?d.value.symbol=="SUI"?new a(Number(de.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(de.value)).sub(new a(.05)).toString():String(de.value):""):(y.value=!1,S.value==="Aptos"?t.value=me.value>0?c.value.symbol=="APT"?new a(Number(me.value)).sub(new a(.1)).lt(new a(0))?"0":new a(Number(me.value)).sub(new a(.1)).toString():String(me.value):"":t.value=me.value>0?c.value.symbol=="SUI"?new a(Number(me.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(me.value)).sub(new a(.05)).toString():String(me.value):"")},Do=s=>{s==="fromCoin"?(y.value=!0,n.value=de.value>0?ie(new a(Number(de.value)).div(2).toString(),d.value.decimals).toString():""):(y.value=!1,t.value=me.value>0?ie(new a(Number(me.value)).div(2).toString(),c.value.decimals).toString():"")},Ve=C(!1);gn(()=>{ao(),window.addEventListener("updateSwapParams",s=>{Ve.value=!Ve.value})}),Cn(()=>{clearInterval($.value)});const xe=P(()=>U),eo=()=>{k.value||!T.value&&!ve.value||(clearInterval($.value),Q.setPoolConfigList(xe.value.chainName,xe.value.filterCoinsObj),g.value=0,k.value=!0,T.value&&Q.updateCurrentPools(T.value.poolAddress,S.value),Me.value||$e(y.value?n.value:t.value),ue.value.address&&q.value.getAccount(ue.value.address),U.getStatsData(S.value,xe.value.filterCoinsObj),setTimeout(()=>{k.value=!1,ao()},1e3))},ao=()=>{$.value=setInterval(()=>{k.value=!1,G.value||g.value<w.value&&(g.value+=1,g.value===w.value&&(S.value=="Aptos"?(T.value&&T.value.poolAddress&&Q.updateCurrentPools(T.value.poolAddress,S.value),eo()):_.value||eo(),g.value=0,k.value=!0))},1e3)};oe(y,Ze((s,v)=>{y.value=s},500));const Pe=C(!1);oe(n,Ze((s,v)=>{s&&s!==0&&y.value&&(g.value=0,$e(s)),s==""&&y.value&&(t.value="")},800)),oe(t,Ze((s,v)=>{s&&s!==0&&!y.value&&(g.value=0,$e(s)),s==""&&!y.value&&(n.value="")},800));const Je=C(1e-4),Qe=async s=>{let v=s;if(S.value==="Aptos"&&!v.current_sqrt_price&&n.value&&t.value){const r=await q.value.getPools([v.address]);r&&r[0]&&(v={...s,...r[0],fee:Number(r[0].fee_rate)/1e6})}if(v.current_sqrt_price&&n.value&&t.value){const A=(d.value.address===v.coinA.address&&c.value.address===v.coinB.address?0:1)==0,M=new a(n.value),R=new a(t.value),D=M.sub(M.mul(new a(v.fee))),z=R.div(D);return q.value.getPriceImpactPct(v,z.toString(),A)}return"--"},io=C(0),lo=C(0),ro=C(),Re=C({}),Wo=async s=>{if(T.value&&(Me.value=!0,!(y.value&&Number(n.value)==0)&&!(!y.value&&Number(t.value)==0))){if(d.value&&c.value&&(n.value||t.value)){j.value=!0,b.value=!0,O.value=!1;const v=d.value.address===T.value.coinA.address&&c.value.address===T.value.coinB.address?0:1;try{let r=await q.value.preSwap({pool:T.value,a2b:v==0,byAmountIn:y.value,amount:y.value?n.value:t.value});O.value=r==null?void 0:r.isExceed,ro.value=r==null?void 0:r.estimatedFeeAmount,y.value?(t.value=r.estimatedAmountOut,Ae.value=(Number(r.estimatedAmountOut)/s).toString(),ye.value=(s/Number(r.estimatedAmountOut)).toString()):(n.value=r.estimatedAmountIn,Ae.value=(s/Number(r.estimatedAmountIn)).toString(),ye.value=(Number(r.estimatedAmountIn)/s).toString()),io.value=new a(t.value).div(n.value).toString(),lo.value=new a(n.value).div(t.value).toString(),Je.value=S.value=="Aptos"?await Qe(T.value):await Qe(Re.value||T.value),j.value=!1,b.value=!1}catch(r){console.log("pre swap error1",r),j.value=!1,b.value=!1}}else y.value?t.value="":n.value="",j.value=!1,b.value=!1;Me.value=!1}},qo=mn(),ue=P(()=>qo),Jo=C({}),ye=C(""),Ae=C(""),de=P(()=>ue.value.assets&&d.value&&ue.value.assets[d.value.address]?No(ue.value.assets[d.value.address].balance,d.value.decimals):0),me=P(()=>ue.value.assets&&c.value&&ue.value.assets[c.value.address]?No(ue.value.assets[c.value.address].balance,c.value.decimals):0);oe(()=>f.value.tokensObj,async s=>{if(!be(s)){const v=e?e.currentRoute.value.query.to:"",r=e?e.currentRoute.value.query.from:"";r?d.value=await q.value.getTokenBySymbol(s,r):!r&&!d.value&&(d.value=await q.value.getTokenBySymbol(s,ge[S.value].swapDefaultPair.fromCoin)),v?c.value=await q.value.getTokenBySymbol(s,v):!v&&!c.value&&(c.value=await q.value.getTokenBySymbol(s,ge[S.value].swapDefaultPair.toCoin)),!r&&v&&(d.value="")}},{immediate:!0});const T=P(()=>{var s,v,r,A,M;if(d.value&&c.value){let R=null,D={};if(Object.values(f.value.poolConfigList).forEach(L=>{var E,te,le,Ie;(L.coinA.address.toUpperCase()===((E=d.value.address)==null?void 0:E.toUpperCase())&&L.coinB.address.toUpperCase()===((te=c.value.address)==null?void 0:te.toUpperCase())||L.coinB.address.toUpperCase()===((le=d.value.address)==null?void 0:le.toUpperCase())&&L.coinA.address.toUpperCase()===((Ie=c.value.address)==null?void 0:Ie.toUpperCase()))&&(D[L.address]={...L})}),S.value=="Aptos"&&f.value.poolsObj&&!be(f.value.poolsObj))for(const L in f.value.poolsObj){const E=f.value.poolsObj[L];(E.token_a.address.toUpperCase()===((s=d.value.address)==null?void 0:s.toUpperCase())&&E.token_b.address.toUpperCase()===((v=c.value.address)==null?void 0:v.toUpperCase())||E.token_b.address.toUpperCase()===((r=d.value.address)==null?void 0:r.toUpperCase())&&E.token_a.address.toUpperCase()===((A=c.value.address)==null?void 0:A.toUpperCase()))&&(D[E.address]={...E})}const z=Object.values(D).sort((L,E)=>L.fee-E.fee);for(let L=0;L<z.length;L++)if(!((M=z[L])!=null&&M.is_pause)){R=z[L];break}return R&&!be(R)?(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1094 ~ poolInfo ~ info:",R),R):null}return null}),uo=C(!0),co=C(!1),Qo=async s=>{s&&S.value=="Aptos"&&($e(y.value?n.value:t.value),co.value=!0,s.coinA.symbol.toLowerCase()===d.value.symbol.toLowerCase()&&s.coinB.symbol.toLowerCase()===c.value.symbol.toLowerCase()?uo.value=!0:uo.value=!1,O.value=!1)};oe(()=>T.value,(s,v)=>{s&&(!v||s.address!==v.address||s.current_sqrt_price!==v.current_sqrt_price)&&Qo(s)},{immediate:!0,deep:!0});const Xo=P(()=>f.value.tokensObj&&d.value&&d.value.address&&f.value.tokensObj[d.value.address]&&f.value.tokensObj[d.value.address].logoURI),Ho=P(()=>f.value.tokensObj&&c.value&&c.value.address&&f.value.tokensObj[c.value.address]&&f.value.tokensObj[c.value.address].logoURI),Yo=P(()=>S.value==="Aptos"?f.value.tokensObj&&d.value&&d.value.address&&f.value.tokensObj[d.value.address]&&f.value.tokensObj[d.value.address].coingecko_id||null:f.value.tokensObj&&d.value&&d.value.address||null),Zo=P(()=>S.value==="Aptos"?f.value.tokensObj&&c.value&&c.value.address&&f.value.tokensObj[c.value.address]&&f.value.tokensObj[c.value.address].coingecko_id||null:f.value.tokensObj&&c.value&&c.value.address||null),zo=P(()=>{var s,v,r,A,M,R,D,z,L;return(r=(v=f==null?void 0:f.value)==null?void 0:v.tokensObj[(s=d==null?void 0:d.value)==null?void 0:s.address])!=null&&r.pyth_id&&((R=(M=f==null?void 0:f.value)==null?void 0:M.tokensObj[(A=d==null?void 0:d.value)==null?void 0:A.address])==null?void 0:R.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(L=(z=f==null?void 0:f.value)==null?void 0:z.tokensObj[(D=d==null?void 0:d.value)==null?void 0:D.address])!=null&&L.coingecko_id?"coingecko":null}),Go=P(()=>{var s,v,r,A,M,R,D,z,L;return(r=(v=f==null?void 0:f.value)==null?void 0:v.tokensObj[(s=c==null?void 0:c.value)==null?void 0:s.address])!=null&&r.pyth_id&&((R=(M=f==null?void 0:f.value)==null?void 0:M.tokensObj[(A=c==null?void 0:c.value)==null?void 0:A.address])==null?void 0:R.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(L=(z=f==null?void 0:f.value)==null?void 0:z.tokensObj[(D=c==null?void 0:c.value)==null?void 0:D.address])!=null&&L.coingecko_id?"coingecko":null}),Ko=P(()=>{var A,M;const s=new a(n.value),v=new a(S.value=="Aptos"?(A=T==null?void 0:T.value)==null?void 0:A.fee:(M=Re==null?void 0:Re.value)==null?void 0:M.fee),r=s.mul(v).toString();return Number(r)<1/Math.pow(10,d.value.decimals)?`<${new a(1).div(new a(Math.pow(10,d.value.decimals))).toString()}`:ie(r,d.value.decimals)}),{setIsShowSuccess:Vo,setIsShowRejected:mo,setIsShowWaiting:Xe,setTransactionDesc:xo,setTransactionTxid:vo}=U,en=async()=>{var v,r,A,M,R,D,z,L;_.value=!1,j.value=!0,clearInterval(Be),window.clearInterval(Be),vo(""),xo(I("tips.swapping",{from:`${H(n.value)} ${(v=d.value)==null?void 0:v.symbol}`,to:`${H(t.value)} ${(r=c.value)==null?void 0:r.symbol}`})),Xe(!0);let s;S.value=="Aptos"&&(s=d.value.address===T.value.token_a.address&&c.value.address===T.value.token_b.address?0:1);try{let E;S.value=="Aptos"?E=await q.value.getSwapTransactionPayload({pool:T.value,a2b:s==0,byAmountIn:y.value,amount:y.value?n.value:t.value,slippage:Number(W.value)/100}):E=await q.value.getSwapRouterPayload(He.value,Number(W.value)/100),console.log("0221####swap###swapPayload###",E);let te;if(S.value==="Aptos")te=await ue.value.currentWallet.signAndSubmitTransaction(E);else{const le=await q.value.signAndExecuteTransactionBlock(ue.value.currentWallet,E==null?void 0:E.txb,E==null?void 0:E.payloadParams);console.log("0221###sui swap res###",le),te=q.value.handleTx(le),console.log("0221###swap###sui##tx###",te)}if(te&&te.hash){vo(te.hash),Xe(!1),Vo(!0);const le={title:I("tips.swap"),desc:I("tips.swapSuccessText",{from:`${H(n.value)} ${(A=d.value)==null?void 0:A.symbol}`,to:`${H(t.value)} ${(M=c.value)==null?void 0:M.symbol}`}),hash:te.hash,tit:"Swap",type:"liquidity",action:"swap",isHaveSui:d.value.address==ge[S.value].currentChainTokenAddress||c.value.address==ge[S.value].currentChainTokenAddress,icon:"icon-icon-swap1",tokenInfo:{tokena:`${(R=d.value)==null?void 0:R.address}`,numa:`- ${n.value}`,logoa:f.value.tokensObj&&d.value&&d.value.address&&f.value.tokensObj[d.value.address]&&f.value.tokensObj[d.value.address].logoURI,tokenb:`${(D=c.value)==null?void 0:D.address}`,numb:`+ ${t.value}`,logob:f.value.tokensObj&&c.value&&c.value.address&&f.value.tokensObj[c.value.address]&&f.value.tokensObj[c.value.address].logoURI},text:`Pay ${n.value} ${(z=d.value)==null?void 0:z.symbol} to receive ${t.value} ${(L=c.value)==null?void 0:L.symbol}`};S.value!=="Aptos"&&(le.res=te.res),q.value.showTransitionPending(le);const Ie=await q.value.watchTransaction(le);console.log("0221###swap###transitionStatus####",Ie),Ie&&setTimeout(()=>{S.value=="Aptos"&&Q.updateCurrentPools(T.value.poolAddress,S.value),q.value.getAccount(ue.value.address)},1e3)}else Xe(!1),mo(!0);n.value="",t.value="",j.value=!1}catch(E){n.value="",t.value="",console.log("Swap Error###",E),j.value=!1,Xe(!1),mo(!0)}},on=s=>{var v;return(s==null?void 0:s.logoURI)||(s==null?void 0:s.logo_url)||((v=f.value.tokensObj[s==null?void 0:s.address])==null?void 0:v.logo_url)||(U.theme==="default"?pe("/image/coins/unknown.png"):pe("/image/coins/sui-unknown.png"))},fo=C([]);oe(()=>[d.value,c.value,f.value.poolConfigList],([s,v,r])=>{if(r&&r.length>0&&s&&v){const A=[];r.forEach(M=>{var R,D,z,L;(M.coinA.address.toUpperCase()===((R=s.address)==null?void 0:R.toUpperCase())&&M.coinB.address.toUpperCase()===((D=v.address)==null?void 0:D.toUpperCase())||M.coinB.address.toUpperCase()===((z=s.address)==null?void 0:z.toUpperCase())&&M.coinA.address.toUpperCase()===((L=v.address)==null?void 0:L.toUpperCase()))&&(M!=null&&M.is_pause||A.push(M.address))}),fo.value=A}},{immediate:!0});const oo=s=>{console.log("ðŸš€ ~ getTokenSource ~ token:",s);const v=U.importTokenListObj;f.value.tokensObj&&f.value.tokensObj[s.address]&&f.value.tokensObj[s.address].isSelfBuilt&&!(v!=null&&v.hasOwnProperty(s==null?void 0:s.address))?no.value=!0:(F.value==="fromCoin"?(n.value="",c.value&&s.address.toLowerCase()===(c==null?void 0:c.value.address.toLowerCase())&&(c.value=null),d.value=s):(d.value&&(t.value="",s.address.toLowerCase()===(d==null?void 0:d.value.address.toLowerCase())&&(d.value=null)),c.value=s),po())},no=C(!1),po=()=>{he.value={},Ne.value={},no.value=!1},nn=P(()=>U.isShowRouterModal),to=C([]),ho=C(""),tn=C(!1),go=bn();P(()=>go);const _e=C(!1),He=C({}),Co=C(""),bo=C(),wo=s=>{const{splitPaths:v}=s;let r=new a(0);v.forEach((M,R)=>{const D=M.basePaths[0],z=D.label==="Cetus"?new a(D.feeRate).div(Math.pow(10,6)):new a(D.feeRate).div(Math.pow(10,9)),L=new a(D.inputAmount).div(Math.pow(10,d.value.decimals)).mul(z);if(r=r.add(L),M.basePaths[1]){const E=M.basePaths[1],te=D.direction?D.currentPrice:new a(1).div(D.currentPrice),le=E.direction?E.currentPrice:new a(1).div(M.basePaths[1].currentPrice),Ie=E.label==="Cetus"?new a(E.feeRate).div(Math.pow(10,6)):new a(E.feeRate).div(Math.pow(10,9)),un=new a(E.outputAmount).div(Math.pow(10,c.value.decimals)).mul(Ie).div(te.mul(le));r=r.add(un)}});const A=r.toNumber();bo.value=A,Co.value=A>0&&A<1e-6?"<0.000001":H(ie(A,d.value.decimals))},ko=(s,v)=>v.minus(s).div(v).mul(100),yo=async s=>{const{splitPaths:v}=s;let r=new a(0);v.forEach((A,M)=>{if(A.basePaths.length===1){const R=A.basePaths[0],D=new a(R.outputAmount).div(Math.pow(10,R.toDecimal)),z=new a(R.inputAmount).div(Math.pow(10,R.fromDecimal)),L=D.div(z),E=R.direction?new a(R.currentPrice):new a(1).div(R.currentPrice),te=ko(L,E).mul(new a(A.percent).div(100));r=r.add(te)}else{const R=A.basePaths[0].direction?new a(A.basePaths[0].currentPrice):new a(1).div(A.basePaths[0].currentPrice),D=A.basePaths[1].direction?new a(A.basePaths[1].currentPrice):new a(1).div(A.basePaths[1].currentPrice),z=R.mul(D),L=new a(A.basePaths[1].outputAmount).div(Math.pow(10,A.basePaths[1].toDecimal)),E=new a(A.basePaths[0].inputAmount).div(Math.pow(10,A.basePaths[0].fromDecimal)),te=L.div(E),le=ko(te,z).mul(new a(A.percent).div(100));r=r.add(le)}}),Je.value=Number(ie(r.toNumber(),2))},Me=C(!1),Ao=async s=>{if(Me.value=!0,d.value&&c.value&&(Number(n.value)>0||Number(t.value)>0)){(!n.value&&t.value||n.value&&!t.value)&&(j.value=!0),Pe.value=!0,_e.value=!1;let v;T.value&&(v=d.value.address===T.value.coinA.address&&c.value.address===T.value.coinB.address?0:1);try{let r;if(y.value){const D=new a(n.value).mul(Math.pow(10,d.value.decimals)).toString();r=new ze(D)}else{const D=new a(t.value).mul(Math.pow(10,c.value.decimals)).toString();r=new ze(D)}const A=Number(W.value)/100,M=T.value?{poolAddresses:fo.value,coinTypeA:T.value.coin_a_address,coinTypeB:T.value.coin_b_address,decimalsA:T.value.coinA.decimals,decimalsB:T.value.coinB.decimals,a2b:v==0,byAmountIn:y.value,amount:r.toString()}:"",R=await q.value.getSwapRouter(d,c,r,y.value,A,"",T.value?M:"");if(R&&!R.isExceed&&R.splitPaths&&R.splitPaths.length==0){_e.value=!0;return}if(R){if(He.value=R,to.value=R.paths,O.value=R.isExceed,R.isExceed){j.value=!1,_e.value=!1,y.value?t.value="":n.value="";return}wo(R),y.value?n.value&&(t.value=new a(R.outputAmount).div(new a(Math.pow(10,c.value.decimals))).toString()):t.value&&(n.value=new a(R.inputAmount).div(new a(Math.pow(10,d.value.decimals))).toString()),console.log(t.value,"###toCoinAmount.value"),ye.value=H(fe(new a(n.value).div(new a(t.value).toString()),d.value.decimals)),Ae.value=H(fe(new a(t.value).div(n.value).toString(),c.value.decimals)),yo(R),j.value=!1,_e.value=!1,Pe.value=!1}else j.value=!1,_e.value=!0,Pe.value=!1}catch(r){console.log("pre swap error2",r),j.value=!1,Pe.value=!1}}else y.value?t.value="":n.value="",j.value=!1,Pe.value=!1;Me.value=!1},Se=C(!1),_o=async s=>{try{let v;if(y.value){const M=new a(n.value).mul(Math.pow(10,d.value.decimals)).toString();v=new ze(M)}else{const M=new a(t.value).mul(Math.pow(10,c.value.decimals)).toString();v=new ze(M)}const r=Number(W.value)/100,A=await q.value.getSwapRouter(d,c,v,y.value,r,"");A&&(He.value=A,to.value=A.paths,O.value=A.isExceed,ho.value=A.amountIn,wo(A),ye.value=H(fe(new a(n.value).div(new a(t.value).toString()),d.value.decimals)),Ae.value=H(fe(new a(t.value).div(n.value).toString(),c.value.decimals)),yo(A),y.value?t.value!==A.amountOut&&(Se.value=!0,t.value=A.amountOut):n.value!==A.amountIn&&(Se.value=!0,n.value=A.amountIn))}catch(v){console.log("pre swap error3",v)}},sn=async s=>{if(d.value&&c.value&&(n.value||t.value)){const v=d.value.address===T.value.coinA.address&&c.value.address===T.value.coinB.address?0:1;try{let r=await q.value.preSwap({pool:T.value,a2b:v==0,byAmountIn:y.value,amount:y.value?n.value:t.value});O.value=r==null?void 0:r.isExceed,ro.value=r==null?void 0:r.estimatedFeeAmount,y.value?(Ae.value=(Number(r.estimatedAmountOut)/r.estimatedAmountIn).toString(),ye.value=(r.estimatedAmountIn/Number(r.estimatedAmountOut)).toString()):(Ae.value=(Number(r.estimatedAmountOut)/Number(r.estimatedAmountIn)).toString(),ye.value=(Number(r.estimatedAmountIn)/Number(r.estimatedAmountOut)).toString()),y.value?t.value!==r.estimatedAmountOut&&(Se.value=!0,t.value=r.estimatedAmountOut):n.value!==r.estimatedAmountIn&&(Se.value=!0,n.value=r.estimatedAmountIn),Je.value=S.value=="Aptos"?await Qe(T.value):await Qe(Re.value||T.value),j.value=!1,b.value=!1}catch(r){console.log("pre swap error4",r),j.value=!1,b.value=!1}}else j.value=!1,b.value=!1};let Be=C(null);oe(()=>_.value,s=>{s?Be.value=setInterval(()=>{S.value=="Aptos"?sn(y.value):_o(y.value)},3e3):(clearInterval(Be.value),window.clearInterval(Be.value))},{immediate:!0});const $e=async s=>{S.value=="Aptos"?Wo(s):Ao()};oe(()=>Ve.value,s=>{(Number(n.value)>0||Number(t.value)>0)&&$e(y.value?n.value:t.value)},{immediate:!0});const an=P(()=>go),So=P(()=>an.value.isInitRouter);oe(()=>So.value,s=>{s||(g.value=0,$e(y.value?n.value:t.value))},{immediate:!0}),oe(()=>[d.value,c.value],([s,v])=>{if(s&&v&&(g.value=0,$e(y.value?n.value:t.value)),s||v){const r=`/swap?from=${s==null?void 0:s.address}&to=${v==null?void 0:v.address}`;e.push(r)}},{immediate:!0});function ln(s,v=500){let r=null;return function(...A){clearTimeout(r),r=setTimeout(()=>{s.call(this,...A)},v)}}const rn=ln($o);function $o(){const s=d.value;d.value=c.value,c.value=s,N.value=!0,y.value=!y.value,y.value?(n.value=t.value,t.value=""):(t.value=n.value,n.value=""),setTimeout(()=>{N.value=!1},300)}return{closeSwapConfirmModal:()=>{_.value=!1,Se.value=!1},updateAccept:()=>{Se.value=!1},clickExchange:$o,debounceClickExchange:rn,closeTokenWarning:po,isShowTokenWarning:no,getTokenSource:oo,hasPool:co,getPoolInfoSuccess:Oe,halfBtnSelect:Do,formCoinId:Yo,toCoinId:Zo,formCoinMarket:zo,toCoinMarket:Go,fromCoinUrl:Xo,toCoinUrl:Ho,t:I,indicator:h,wallet:ue,currentLpInfo:Jo,fixD:Ge,decimalFormat:vn,impact:Je,oneFromAmount:ye,oneToAmount:Ae,importIcon:pe,clickRefresh:eo,refresh:k,change:N,isShowAddress:X,isShowSwapSetting:K,fromCoin:d,toCoin:c,slippage:W,openCoinSelect:qe,onCoinSelect:jo,existingCoins:l,lastSelectCoin:ee,currentCoinKey:F,showCoinSelect:ne,fromCoinAmount:n,toCoinAmount:t,maxBtnSelect:Lo,fixedFromCoin:y,swapBtnText:We,toSwap:en,loading:G,swaping:j,autoRefreshTime:w,countdown:g,marketTimer:$,rateChange:x,isSwapConfirmMpdal:_,fromCoinBlance:de,toCoinBlance:me,poolInfo:T,chainName:S,swapRouterLoading:Pe,formatFee:Ko,calculating:b,currentRate:io,currentRateReverse:lo,getCoinIcon:on,toAddLiquidiPoolInfo:Re,decimalUi:fe,warningToCoin:he,warningFromCoin:Ne,isShowRouterModal:nn,toSwapLoading:tn,insufficientLiquidity:O,routerPool:to,routerTotalAmounts:ho,store:U,suiPreSwapdata:He,suiSwapFee:bo,suiSwapFeeUi:Co,addCommom:H,debounce:Ze,notFoundRouter:_e,getSuiAmountAccept:_o,isShowAccept:Se,getSuiAmount:Ao,isInitSwapRouter:So}}});const ke=e=>(je("data-v-ddd94326"),e=e(),Le(),e),Fi={class:"swap-container"},Ei={class:"title"},Ui={class:"left"},ji={class:"right title-right"},Li=ke(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Di={class:"swap-card"},Wi={class:"card-container"},qi=ke(()=>o("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),Ji=[qi],Qi={key:1,class:"induction"},Xi={key:0,class:"exchange-rate-btn"},Hi={key:0},Yi={key:0},Zi={key:0},zi={key:1},Gi={key:0},Ki=ke(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Vi=ke(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),xi=[Ki,Vi],el={class:"item"},ol={class:"induction-text"},nl={key:0,class:"icon","aria-hidden":"true"},tl=ke(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),sl=[tl],al={class:"item"},il={class:"induction-text"},ll={key:0,class:"induction-value"},rl={class:"item"},ul={class:"induction-text"},dl={key:0,class:"induction-value"},cl={key:0,class:"icon","aria-hidden":"true"},ml=ke(()=>o("use",{"xlink:href":"#icon-icon-swap"},null,-1)),vl=[ml],fl={key:2,class:"token-info-container"},pl={class:"token-info-title"},hl=ke(()=>o("span",{class:"coingecko"},"Price Reference",-1)),gl=ke(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1));function Cl(e,h,I,m,U,Q){var n,t;const f=dn,N=cn,k=Tt,X=Oo,K=Mo,x=Eo,_=kn,F=yn,l=An,ee=Bo,ne=rs,y=_n,G=da,j=Bi,b=Ue("image");return i(),p("div",Fi,[o("div",Ei,[o("div",Ui,u(e.$t("menu.swap")),1),o("div",ji,[o("div",{class:"slippage-icon",onClick:h[0]||(h[0]=w=>e.isShowSwapSetting=!0)},[Li,o("span",null,u(e.slippage)+"%",1)]),Ce(f,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),o("div",Di,[o("div",Wi,[o("div",{class:se(["card-item",!e.fixedFromCoin&&(e.swapRouterLoading||e.swaping)?"card-item-mask":""])},[Ce(N,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":h[1]||(h[1]=w=>e.fromCoinAmount=w),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From",onOnMax:h[2]||(h[2]=w=>e.maxBtnSelect("fromCoin")),onOnHalf:h[3]||(h[3]=w=>e.halfBtnSelect("fromCoin")),onOnInput:h[4]||(h[4]=w=>{e.fromCoinAmount=w,e.fixedFromCoin=!0}),onOnSelect:h[5]||(h[5]=w=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])],2),o("div",{class:se(["card-item",e.fixedFromCoin&&(e.swapRouterLoading||e.swaping)?"card-item-mask":""])},[Ce(N,{modelValue:e.toCoinAmount,"onUpdate:modelValue":h[6]||(h[6]=w=>e.toCoinAmount=w),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",havehalf:!1,onOnInput:h[7]||(h[7]=w=>{e.toCoinAmount=w,e.fixedFromCoin=!1}),onOnSelect:h[8]||(h[8]=w=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])],2),o("img",{class:se(e.change?"gang animationex":"gang"),src:Sn,alt:""},null,2),o("div",{class:se(["exchange",e.chainName=="Sui"?"sui-exchange":""]),onClick:h[9]||(h[9]=(...w)=>e.debounceClickExchange&&e.debounceClickExchange(...w))},[(i(),p("svg",{class:se(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Ji,2))],2)]),e.chainName=="Sui"&&!e.notFoundRouter?(i(),Y(k,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.impact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFeeUi,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):e.poolInfo&&e.fromCoinAmount&&e.toCoinAmount&&e.fromCoinAmount!=="0"&&e.toCoinAmount!=="0"&&e.swapBtnText!==e.$t("button.poolNotFound")?(i(),p("div",Qi,[Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(i(),p("div",Xi,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(i(),p("span",zi,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(i(),p("span",Gi,[V(o("img",null,null,512),[[b,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),J(" 1 "+u(e.toCoin.symbol)+" â‰ˆ ",1),V(o("img",null,null,512),[[b,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),o("span",null,u(("addCommom"in e?e.addCommom:Z(H))(("decimalUi"in e?e.decimalUi:Z(fe))(e.currentRateReverse,e.fromCoin.decimals),e.fromCoin.decimals)),1),J(" Â "+u(e.fromCoin.symbol),1)])):(i(),Y(X,{key:1,indicator:e.indicator},null,8,["indicator"]))])):B("",!0):(i(),p("span",Hi,[V(o("img",null,null,512),[[b,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),J(" 1 "+u(e.fromCoin.symbol)+" â‰ˆ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(i(),p("span",Yi,[V(o("img",null,null,512),[[b,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),e.calculating?B("",!0):(i(),p("span",Zi,u(("addCommom"in e?e.addCommom:Z(H))(("decimalUi"in e?e.decimalUi:Z(fe))(e.currentRate,e.toCoin.decimals))),1)),e.calculating?(i(),Y(X,{key:1,indicator:e.indicator},null,8,["indicator"])):B("",!0),J(" Â "+u(e.toCoin.symbol),1)])):(i(),Y(X,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"icon-change",onClick:h[10]||(h[10]=w=>e.rateChange=!e.rateChange)},xi)])):B("",!0),Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(i(),p(Te,{key:1},[o("div",el,[o("div",ol,u(e.$t("common.priceImpact")),1),e.swaping?(i(),Y(K,{key:1,paragraph:!1,active:""})):(i(),p("div",{key:0,class:se(["induction-value",Number(e.impact)<1?"impact-s":Number(e.impact)<10&&Number(e.impact)>1?"impact-w":"impact-e"])},[J(u(Number(e.impact)<.01?"<0.01":Number(e.impact)>100?"100":e.impact)+"% ",1),e.impact>=10?(i(),p("svg",nl,sl)):B("",!0)],2))]),o("div",al,[o("div",il,u(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swaping?(i(),Y(K,{key:1,paragraph:!1,active:""})):(i(),p("div",ll,u(e.fixedFromCoin?("addCommom"in e?e.addCommom:Z(H))(("fixD"in e?e.fixD:Z(Ge))(Number(e.toCoinAmount)-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals),e.toCoin.decimals):("addCommom"in e?e.addCommom:Z(H))(("fixD"in e?e.fixD:Z(Ge))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals),e.fromCoin.decimals))+" "+u(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",rl,[o("div",ul,u(e.$t("common.fee")),1),e.swaping?(i(),Y(K,{key:1,paragraph:!1,active:""})):(i(),p("div",dl,u(("addCommom"in e?e.addCommom:Z(H))(e.formatFee,e.fromCoin.decimals))+" "+u(e.fromCoin.symbol)+" ("+u(e.chainName=="Aptos"?e.poolInfo.fee*100:((n=e.toAddLiquidiPoolInfo)==null?void 0:n.fee)*100)+"%) ",1))])],64)):B("",!0)])):B("",!0)]),Ce(x,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((t=e.poolInfo)==null?void 0:t.is_pause)||e.swapRouterLoading:!1,class:"big-btn",loading:e.chainName=="Aptos"?e.swaping:(Number(e.fromCoinAmount)>0||Number(e.toCoinAmount)>0)&&e.isInitSwapRouter,onClick:h[11]||(h[11]=w=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:ce(()=>[e.wallet.connected?(i(),p("svg",cl,vl)):B("",!0),o("span",null,u(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),Ce(_),e.showCoinSelect?(i(),Y(F,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"have-import-btn":!0,onOnSelect:e.onCoinSelect,onOnClose:h[12]||(h[12]=w=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):B("",!0),e.isShowSwapSetting?(i(),Y(l,{key:1,onOnClose:h[13]||(h[13]=w=>e.isShowSwapSetting=!1)})):B("",!0),e.chainName&&(e.formCoinMarket||e.toCoinMarket)?(i(),p("div",fl,[o("div",pl,[hl,Ce(ee,{placement:"top","arrow-point-at-center":""},{title:ce(()=>[J(" The following price is only an external reference from 3rd party data providers, which does not reflect actual data on Cetus. ")]),default:ce(()=>[gl]),_:1})]),e.fromCoin&&e.formCoinMarket?(i(),Y(ne,{key:0,id:e.formCoinId,coin:e.fromCoin,market:e.formCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):B("",!0),e.toCoin&&e.toCoinMarket?(i(),Y(ne,{key:1,id:e.toCoinId,coin:e.toCoin,market:e.toCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):B("",!0)])):B("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(i(),Y(y,{key:3,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,"is-import-modal":!0,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):B("",!0),e.isShowRouterModal?(i(),Y(G,{key:4,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,onOnClose:h[14]||(h[14]=w=>e.store.setIsShowRouterModal(!1))},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount"])):B("",!0),e.isSwapConfirmMpdal?(i(),Y(j,{key:5,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.impact,"fixed-from-coin":e.fixedFromCoin,fee:e.chainName=="Sui"?e.suiSwapFeeUi:e.poolInfo.fee,"format-fee":e.chainName=="Sui"?e.suiSwapFeeUi:e.formatFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,"one-from-amount":e.oneFromAmount,"one-to-amount":e.oneToAmount,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","one-from-amount","one-to-amount","onOnClose","onToSwap","onAccept"])):B("",!0)])}const Hl=Ee(Ti,[["render",Cl],["__scopeId","data-v-ddd94326"]]);export{Hl as default};
