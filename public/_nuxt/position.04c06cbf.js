import{_ as We}from"./upgrade-select-input.1a59349e.js";import{_ as Me}from"./upgrade-loading.877a98fc.js";import{_ as ze}from"./upgrade-position-item.f21557b6.js";import{a as te,q as Se,o as a,f as r,F as I,s as x,x as Y,h as s,t as X,v as b,u as D,e as oe,r as w,m as y,c as ee,w as Z,i as F,j as se,R as Re,B as we,p as ce,k as ve,l as Ae,V as Le,D as H,z as be,O as ke,Y as He,P as Je,U as Ze,G as Ke,N as Qe,b as Xe,y as Ie,C as xe,$ as es,W as ss,T as ts}from"./entry.b66a9ef5.js";import{J as G,b as Ce,j as os,c as as,a as Te,u as me,h as $e,e as ns,d as ls}from"./pool.e2dd35c1.js";import{u as is}from"./notifi.35121870.js";import{i as ue}from"./import-icon.de3e6c66.js";import"./index.8d1c7ae6.js";import{_ as rs}from"./route-view.376cf91f.js";/* empty css              *//* empty css              *//* empty css              */import{_ as De}from"./icon-selected_3x.09e9a6f0.js";import{_ as us}from"./token-warning.fd222bfb.js";import{D as N}from"./decimal.0bdeb344.js";import{N as ds}from"./no-data.74fedcaa.js";import{_ as je}from"./icon_on_2x.5e96733d.js";import{_ as cs}from"./img-no-Positions_2x.dbb1628a.js";import{_ as vs}from"./img-no-Positions_2x.bb773a2a.js";import{_ as ms}from"./img-connect-wallet_2x.eac87777.js";import{_ as _s}from"./img-connect-wallet_2x.c7f414e0.js";import"./coin-select.cb09c085.js";/* empty css              */import"./token-warning_2x.959a8efb.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";import"./status-block.0de623f8.js";import"./farms-valid-range.baae416c.js";import"./farms.d0df7386.js";import"./icon_farms_2x.95c929e1.js";import"./icon_rewards_2x.a13f08af.js";import"./icon-arrow_2x.948aedb2.js";import"./icon-arrow_2x.4ffddb8e.js";import"./farms.b6d8ac0a.js";import"./useWhale.ef902a84.js";const ps={key:0,class:"claim-list"},fs={class:"left"},hs={alt:""},gs={class:"right"},ys=te({__name:"claim-list",props:{myClaimList:{type:Object,default:()=>[]}},setup(e){return(p,k)=>{const C=Se("image");return e.myClaimList&&e.myClaimList.length>0?(a(),r("div",ps,[(a(!0),r(I,null,x(e.myClaimList,m=>(a(),r("div",{key:m,class:"claim-item"},[s("div",fs,[X(s("img",hs,null,512),[[C,m.logo_url]]),s("span",null,b(m.symbol),1)]),s("div",gs,[s("span",null,b(D(G)(m.amount,m.decimals,!0,!1,!1)),1),s("span",null,b(D(G)(m.amountUSD,2,!1,!1)),1)])]))),128))])):Y("",!0)}}});const Ye=oe(ys,[["__scopeId","data-v-c3e2798b"]]),le=w(!1),de=w(!1),Ee=Ce(),{setIsShowSuccess:ws,setIsShowRejected:Ne,setIsShowWaiting:ge,setTransactionDesc:bs,setTransactionTxid:Oe}=Ee,ks=os("Sui"),ye=as("Sui"),$s=Te(),Pe=y(()=>$s),Be=me(),Ss=y(()=>Be),Cs=y(()=>Ee),Us=async e=>{de.value=!0;try{const p=[],k=[];e.forEach(d=>{const E=d.rewarderInfo.filter(f=>f.emissionsEveryDay>0).map(f=>f.coinAddress);d.positionSource=="clmm"?p.push({pool_id:d.pool,pos_id:d.pos_object_id,collect_fee:!0,rewarder_coin_types:E,coinTypeA:d.coin_type_a,coinTypeB:d.coin_type_b}):k.push({pool_id:d.pool_id,position_nft_id:d.id,clmm_pool_id:d.clmm_pool_id,collect_fee:!0,collect_frams_rewarder:!1,clmm_rewarder_types:E,coinTypeA:d.coinTypeA,coinTypeB:d.coinTypeB})}),Oe(""),bs("Claim Yield"),ge(!0);const C=await ks.batchHarvestAndClmmFee(k,p),m=await ye.signAndExecuteTransactionBlock(Pe.value.currentWallet,C.txb,C.payloadParams),L=ye.handleTx(m);if(L&&L.hash){Oe(L.hash),ge(!1),ws(!0);const d={title:"Claim",desc:"Claim Yield",hash:L.hash};d.res=L.res,ye.showTransitionPending(d),await ye.watchTransaction(d)&&setTimeout(()=>{Be.getMyPositons(Pe.value.address,Ss.value.poolsObj,Cs.value.chainName)},1e3)}else ge(!1),Ne(!0);de.value=!1,le.value=!1}catch(p){de.value=!1,ge(!1),Ne(!0),le.value=!1,console.log("batchHarvestAndClmmFee error:",p)}},Ue=e=>(ce("data-v-8e7a4ef5"),e=e(),ve(),e),Ls={class:"claim-yield-content"},Ns={class:"total-claim"},Os=Ue(()=>s("div",null,"Total Claim",-1)),Ps={class:"total-claim-usd"},Rs=Ue(()=>s("svg",{"aria-hidden":"true",class:"back-icon"},[s("use",{"xlink:href":"#icon-icon-back"})],-1)),As=Ue(()=>s("span",null,"Back",-1)),Ts=[Rs,As],Ds=te({__name:"claim-yield",props:{pendingYield:{type:Number,default:0},myClaimList:{type:Object,default:()=>[]},myClaimPositionList:{type:Object,default:()=>[]}},setup(e){return(p,k)=>{const C=we;return a(),ee(D(Re),{title:"Claim Yield",visible:!0,footer:null,width:"440px",onCancel:k[2]||(k[2]=m=>p.$emit("close"))},{default:Z(()=>[s("div",Ls,[s("div",Ns,[Os,s("div",Ps,b(e.pendingYield>0&&e.pendingYield<.01?"<$0.01":`$${D($e)(e.pendingYield,2)}`),1)]),F(Ye,{"my-claim-list":e.myClaimList},null,8,["my-claim-list"]),s("div",{class:"choose-amount",onClick:k[0]||(k[0]=m=>p.$emit("chooseAmount"))},Ts),F(C,{class:"confirm-btn",loading:D(de),onClick:k[1]||(k[1]=m=>D(Us)(e.myClaimPositionList))},{default:Z(()=>[se("Confirm")]),_:1},8,["loading"])])]),_:1})}}});const js=oe(Ds,[["__scopeId","data-v-8e7a4ef5"]]),Ys=te({props:{fromCoin:{type:Object,default:null},toCoin:{type:Object,default:null},feeTier:{type:Number,default:0}},setup(e){const p=Ce(),k=y(()=>p),{t:C}=Ae(),m=me(),L=y(()=>m),d=y(()=>L.value.tokensObj&&e.fromCoin.address&&L.value.tokensObj[e.fromCoin.address]&&L.value.tokensObj[e.fromCoin.address].logoURI),E=y(()=>L.value.tokensObj&&e.toCoin.address&&L.value.tokensObj[e.toCoin.address]&&L.value.tokensObj[e.toCoin.address].logoURI);return{t:C,store:k,importIcon:ue,fromCoinUrl:d,toCoinUrl:E,getCoinIcon:U=>{var _;return(U==null?void 0:U.logoURI)||(U==null?void 0:U.logo_url)||((_=L.value.tokensObj[U==null?void 0:U.address])==null?void 0:_.logo_url)||(k.value.theme==="default"?ue("/image/coins/unknown.png"):ue("/image/coins/sui-unknown.png"))}}}});const Es={class:"coin-logo"},Bs={class:"img-box"},Fs={class:"token-a"},Gs={key:0},qs={class:"token-b"},Vs={key:0},Ws={key:0};function Ms(e,p,k,C,m,L){var f,U;const d=us,E=Se("image");return a(),r("div",Es,[s("div",Bs,[s("div",Fs,[e.fromCoin?X((a(),r("img",Gs,null,512)),[[E,e.fromCoinUrl?e.fromCoinUrl:e.getCoinIcon(e.fromCoin)]]):Y("",!0),F(d,{address:e.fromCoin&&e.fromCoin.address,"style-params":{width:"8px",height:"8px",left:"15px",bottom:"0px"}},null,8,["address"])]),s("div",qs,[e.toCoin?X((a(),r("img",Vs,null,512)),[[E,e.toCoinUrl?e.toCoinUrl:e.getCoinIcon(e.toCoin)]]):Y("",!0),F(d,{address:e.toCoin&&e.toCoin.address,"style-params":{width:"8px",height:"8px",left:"15px",bottom:"0px"}},null,8,["address"])])]),X(s("span",{class:"coin-name"},b(e.$t("common.selectPool")),513),[[Le,!e.fromCoin||!e.toCoin]]),X(s("span",{class:"coin-name"},b((f=e.fromCoin)==null?void 0:f.symbol)+" - "+b((U=e.toCoin)==null?void 0:U.symbol),513),[[Le,e.fromCoin&&e.toCoin]]),e.feeTier?(a(),r("p",Ws,b(e.feeTier)+"%",1)):Y("",!0)])}const zs=oe(Ys,[["render",Ms],["__scopeId","data-v-747c398d"]]),Fe=e=>(ce("data-v-4237fa3c"),e=e(),ve(),e),Hs={class:"fees-and-reward"},Js={key:0,class:"fees"},Zs={class:"fees-title"},Ks=Fe(()=>s("div",null,"Fees",-1)),Qs={alt:""},Xs={class:"symbol"},Is={class:"amount"},xs={class:"amount-usd"},et={key:1,class:"fees"},st={class:"fees-title"},tt=Fe(()=>s("div",null,"Mining rewards",-1)),ot={alt:""},at={class:"symbol"},nt={class:"amount"},lt={class:"amount-usd"},it=te({__name:"fees-and-reward",props:{pendingRewarderList:{type:Object,default:()=>[]},pendingFeesList:{type:Object,default:()=>[]},rewarderUsd:{type:String,default:""},feeOwedUsd:{type:String,default:""}},setup(e){return(p,k)=>{const C=Se("image");return a(),r("div",Hs,[e.feeOwedUsd&&e.feeOwedUsd>0?(a(),r("div",Js,[s("div",Zs,[Ks,s("div",null,b(D(G)(e.feeOwedUsd,2,!1,!1)),1)]),(a(!0),r(I,null,x(e.pendingFeesList,m=>(a(),r("div",{key:m,class:"fees-details"},[s("div",null,[X(s("img",Qs,null,512),[[C,m.logo_url]]),s("span",Xs,b(m.symbol),1)]),s("div",null,[s("span",Is,b(D(G)(m.amount,m.decimals,!0,!1,!1)),1),s("span",xs,"("+b(D(G)(m.amountUSD,2,!1,!1))+")",1)])]))),128))])):Y("",!0),e.rewarderUsd&&e.rewarderUsd>0?(a(),r("div",et,[s("div",st,[tt,s("div",null,b(D(G)(e.rewarderUsd,2,!1,!1)),1)]),(a(!0),r(I,null,x(e.pendingRewarderList,m=>(a(),r("div",{key:m,class:"fees-details"},[s("div",null,[X(s("img",ot,null,512),[[C,m.logo_url]]),s("span",at,b(m.symbol),1)]),s("div",null,[s("span",nt,b(D(G)(m.amount,m.decimals,!0,!1,!1)),1),s("span",lt,"("+b(D(G)(m.amountUSD,2,!1,!1))+")",1)])]))),128))])):Y("",!0)])}}});const rt=oe(it,[["__scopeId","data-v-4237fa3c"]]),_e=e=>(ce("data-v-5c834a7c"),e=e(),ve(),e),ut={class:"yield-details-box"},dt={class:"yield-details"},ct={class:"total-claim"},vt=_e(()=>s("div",null,"Pending Yield",-1)),mt={class:"total-claim-usd"},_t={class:"position-detail"},pt={class:"position-detail-top"},ft=_e(()=>s("div",{class:"left"},"Position",-1)),ht={class:"right"},gt=_e(()=>s("span",null,"Hide yield < ",-1)),yt={class:"position-detail-bottom"},wt={class:"left"},bt={class:"top"},kt=["onClick"],$t={key:0,src:De},St={class:"bottom"},Ct={class:"right"},Ut={key:0,class:"yield-amount"},Lt={key:1,class:"yield-amount-zero"},Nt={class:"select"},Ot={class:"all"},Pt=_e(()=>s("span",null,"Select all",-1)),Rt={class:"amount-selected"},At=_e(()=>s("div",null,"Amount selected",-1)),Tt=te({__name:"yield-details",props:{positionShowList:{type:Object,default:()=>[]},isShowYiedlDetails:{type:Boolean,default:!1}},emits:["showClaimYiedl"],setup(e,{emit:p}){const k=w(!0),C=w(!0),m=p,L=e,d=w(.01),E=w(),f=w([]),U=me(),_=y(()=>U),$=y(()=>_.value.rewarderObj),A=y(()=>_.value.feeOwedObj),O=w([]),T=w("all"),W=w([]),M=u=>{const i=[];O.value=[];let n=new N(0);const l=[];u.forEach(g=>{var V,o,t,v,P,B;const S=((V=$.value[g.tokenName])==null?void 0:V.pendingRewarder)||0,c=((o=A.value[g.tokenName])==null?void 0:o.feeOwed)||0,j=new N(isNaN(S)?0:S).add(new N(isNaN(c)?0:c)).toString();n=n.add(new N(isNaN(S)?0:S)).add(new N(isNaN(c)?0:c)),Number(j)>0&&l.push(g),k.value&&Number(j)>Number(d.value)&&i.push({...g,totalRewardUsd:j,pendingRewarderList:(t=$.value[g.tokenName])==null?void 0:t.pendingRewarderArr,pendingFeesList:(v=A.value[g.tokenName])==null?void 0:v.feesResult,rewarderUsd:S,feeOwedUsd:c}),k.value||i.push({...g,totalRewardUsd:j,pendingRewarderList:(P=$.value[g.tokenName])==null?void 0:P.pendingRewarderArr,pendingFeesList:(B=A.value[g.tokenName])==null?void 0:B.feesResult,rewarderUsd:S,feeOwedUsd:c})}),W.value=l,i.forEach(g=>{g.totalRewardUsd>0&&O.value.push(g.tokenName)}),k.value?O.value.length!==i.length?T.value="":T.value="all":O.value.length!==l.length?T.value="":T.value="all",C.value=!1,E.value=n,f.value=i.sort((g,S)=>S.totalRewardUsd-g.totalRewardUsd)},ie=y(()=>_.value.getPendingFeeSuccess),K=y(()=>_.value.getRewardSuccess);H(()=>[L.positionShowList,d.value,ie.value,K.value,k.value],([u,i,n,l])=>{u&&u.length>0&&n&&l&&M(u)},{immediate:!0});const ae=u=>{const i=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,4})?).*$");u.target.value=u.target.value.replace(i,"$1"),d.value=u.target.value},re=()=>{(!d.value||d.value<.01)&&(d.value=.01)},J=u=>{const i=u.tokenName,n=O.value.indexOf(i);n>-1?O.value.splice(n,1):O.value.push(i),k.value?O.value.length!==f.value.length?T.value="":T.value="all":O.value.length!==W.value.length?T.value="":T.value="all"},Q=()=>{T.value="all",f.value.forEach(u=>{!O.value.includes(u.tokenName)&&u.totalRewardUsd>0&&O.value.push(u.tokenName)})},R=y(()=>{let u=new N(0);return T.value=="all"?f.value.forEach(i=>{var g,S;const n=((g=$.value[i.tokenName])==null?void 0:g.pendingRewarder)||0,l=((S=A.value[i.tokenName])==null?void 0:S.feeOwed)||0;u=u.add(new N(isNaN(n)?0:n)).add(new N(isNaN(l)?0:l))}):O.value.forEach(i=>{var g,S;const n=((g=$.value[i])==null?void 0:g.pendingRewarder)||0,l=((S=A.value[i])==null?void 0:S.feeOwed)||0;u=u.add(new N(isNaN(n)?0:n)).add(new N(isNaN(l)?0:l))}),u.toString()}),h=()=>{const u=[];f.value.forEach(i=>{O.value.includes(i.tokenName)&&u.push(i)}),m("showClaimYiedl",u)};return(u,i)=>{const n=He,l=Je,g=Ze,S=we;return a(),ee(D(Re),{title:"Details",footer:null,visible:e.isShowYiedlDetails,width:"440px","wrap-class-name":"details-modal",onCancel:i[2]||(i[2]=c=>u.$emit("close"))},{default:Z(()=>[s("div",ut,[s("div",dt,[s("div",ct,[vt,s("div",mt,[s("span",null,b(D(G)(E.value,2,!1,!1)),1)])]),s("div",_t,[s("div",pt,[ft,s("div",ht,[F(n,{class:"range-alerts-switch",checked:k.value,onClick:i[0]||(i[0]=()=>{k.value=!k.value,C.value=!1})},null,8,["checked"]),gt,F(l,{value:`$${d.value}`,onChange:ae,onBlur:re},null,8,["value"])])]),s("div",yt,[f.value&&f.value.length>0?(a(!0),r(I,{key:0},x(f.value,c=>(a(),r("div",{key:c,class:"position-item"},[s("div",wt,[s("div",bt,[s("div",{class:be(["radio",c.totalRewardUsd<=0?"radio-disable":""]),onClick:j=>c.totalRewardUsd>0?J(c):""},[(T.value=="all"||O.value.includes(c.tokenName))&&c.totalRewardUsd>0?(a(),r("img",$t)):Y("",!0)],10,kt),F(zs,{"from-coin":c.needReverse?c.token_b:c.token_a,"to-coin":c.needReverse?c.token_a:c.token_b,"fee-tier":c.fee*1e3},null,8,["from-coin","to-coin","fee-tier"])]),s("div",St,b(c.tokenName),1)]),s("div",Ct,[c.totalRewardUsd>0?(a(),r("div",Ut,[F(g,{placement:"bottomRight","overlay-class-name":"yield-amount-tooltip"},{title:Z(()=>[F(rt,{"pending-fees-list":c.pendingFeesList,"pending-rewarder-list":c.pendingRewarderList,"rewarder-usd":c.rewarderUsd,"fee-owed-usd":c.feeOwedUsd},null,8,["pending-fees-list","pending-rewarder-list","rewarder-usd","fee-owed-usd"])]),default:Z(()=>[se(b(D(G)(c.totalRewardUsd,2,!1,!1))+" ",1)]),_:2},1024)])):(a(),r("div",Lt,b(D(G)(c.totalRewardUsd,2,!1,!1)),1))])]))),128)):(a(),ee(ds,{key:1,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found"}))])])]),s("div",Nt,[s("div",Ot,[s("div",{class:"radio",onClick:Q},[T.value=="all"?(a(),r("img",{key:0,src:De,onClick:i[1]||(i[1]=ke(()=>{O.value=[],T.value=""},["stop"]))})):Y("",!0)]),Pt]),s("div",Rt,[At,s("div",null,b(D(G)(R.value,2,!1,!1)),1)])]),F(S,{class:"claim-yield-btn",disabled:R.value=="0",onClick:h},{default:Z(()=>[se("Claim Yield")]),_:1},8,["disabled"])])]),_:1},8,["visible"])}}});const Dt=oe(Tt,[["__scopeId","data-v-5c834a7c"]]),Ge=e=>(ce("data-v-826d7f95"),e=e(),ve(),e),jt={class:"total-info"},Yt={class:"total-liquidity"},Et=Ge(()=>s("span",null,"Total Liquidity",-1)),Bt={key:0,class:"skeleton-box"},Ft={key:1,class:"total-liquidity-usd"},Gt={class:"pending-yield"},qt=Ge(()=>s("div",null,"Pending Yield",-1)),Vt={key:0,class:"skeleton-box"},Wt={key:1},Mt={key:0,class:"claim-list-box"},zt={class:"claim-list-content"},Ht=te({__name:"total-position",setup(e){const p=w(!1),k=me(),C=y(()=>k),m=y(()=>C.value.rewarderObj),L=y(()=>C.value.feeOwedObj),d=y(()=>C.value.positionShowList),E=y(()=>C.value.myPositionsLoading),f=y(()=>C.value.getPendingFeeSuccess),U=y(()=>C.value.getRewardSuccess),_=w(0),$=w(0),A=w(!0),O=w([]),T=w([]),W=w([]),M=R=>{let h=new N(0);const u=[];R.forEach(i=>{h=h.add(new N(isNaN(i.amountUSD)?0:i.amountUSD)),u.push(i.tokenName)}),O.value=u,_.value=h.toNumber()},ie=(R,h)=>{let u=new N(0);const i=[];O.value.forEach(l=>{var c,j,V,o;const g=((c=R[l])==null?void 0:c.pendingRewarder)||0,S=((j=h[l])==null?void 0:j.feeOwed)||0;u=u.add(new N(isNaN(g)?0:g)).add(new N(isNaN(S)?0:S)),(V=R[l])!=null&&V.pendingRewarderArr&&i.push(...R[l].pendingRewarderArr),(o=h[l])!=null&&o.feesResult&&i.push(...h[l].feesResult)});const n={};i.forEach(l=>{n[l.address]?n[l.address]={...l,amountUSD:new N(n[l.address].amountUSD).add(isNaN(l.amountUSD)?0:l.amountUSD).toString(),amount:new N(n[l.address].amount).add(isNaN(l.amountUSD)?0:l.amountUSD).toString()}:(n[l.address]={},n[l.address]={...l,amountUSD:new N(0).add(isNaN(l.amountUSD)?0:l.amountUSD).toString(),amount:new N(0).add(l.amount).toString()})}),W.value=Object.values(n).filter(l=>l.amount>0).sort((l,g)=>g.amountUSD-l.amountUSD),$.value=u.toNumber(),A.value=!1};H(()=>d.value,R=>{R&&R.length>0?M(R):M([])},{immediate:!0}),H(()=>[f.value,U.value,O.value,m.value,L.value],([R,h,u,i,n])=>{R&&h?ie(i,n):A.value=!0},{immediate:!0,deep:!0});const K=w(),ae=w(),re=R=>{p.value=!1,le.value=!0;let h=new N(0);const u=[],i={};R.forEach(n=>{var c,j,V,o;const l=n.tokenName,g=((c=m.value[l])==null?void 0:c.pendingRewarder)||0,S=((j=L.value[l])==null?void 0:j.feeOwed)||0;h=h.add(new N(g)).add(new N(S)),(V=m.value[l])!=null&&V.pendingRewarderArr&&u.push(...m.value[l].pendingRewarderArr),(o=L.value[l])!=null&&o.feesResult&&u.push(...L.value[l].feesResult)}),u.forEach(n=>{i[n.address]?i[n.address]={...n,amountUSD:new N(i[n.address].amountUSD).add(isNaN(n.amountUSD)?0:n.amountUSD).toString(),amount:new N(i[n.address].amount).add(isNaN(n.amountUSD)?0:n.amountUSD).toString()}:(i[n.address]={},i[n.address]={...n,amountUSD:new N(0).add(isNaN(n.amountUSD)?0:n.amountUSD).toString(),amount:new N(0).add(n.amount).toString()})}),K.value=h.toNumber(),T.value=Object.values(i).filter(n=>n.amount>0).sort((n,l)=>l.amountUSD-n.amountUSD),ae.value=R},J=w(1),Q=()=>{$.value>0&&(p.value=!0,J.value=J.value==1?2:1)};return(R,h)=>{const u=Qe,i=we;return a(),r("div",jt,[s("div",Yt,[Et,!_.value&&E.value?(a(),r("div",Bt,[F(u,{class:"upgrade-text-skeleton",active:"",paragraph:!1})])):(a(),r("span",Ft,b(_.value>0&&_.value<.01?"<$0.01":`$${D($e)(_.value,2)}`),1))]),s("div",Gt,[qt,A.value?(a(),r("div",Vt,[F(u,{class:"upgrade-text-skeleton",active:"",paragraph:!1})])):(a(),r("div",Wt,[s("span",{class:"pending-yield-usd",style:Ke($.value<=0?{border:"none"}:{}),onClick:Q},[se(b($.value>0&&$.value<.01?"<$0.01":`$${D($e)($.value,2)}`)+" ",1),$.value>0?(a(),r("div",Mt,[s("div",zt,[F(Ye,{"my-claim-list":W.value},null,8,["my-claim-list"])])])):Y("",!0)],4),$.value>0?(a(),r("img",{key:0,src:rs,alt:"",onClick:Q})):Y("",!0),F(i,{class:"claim-all-btn",disabled:$.value<=0,loading:D(de),onClick:Q},{default:Z(()=>[se("Claim All")]),_:1},8,["disabled","loading"])]))]),D(le)?(a(),ee(js,{key:0,"pending-yield":K.value,"my-claim-list":T.value,"my-claim-position-list":ae.value,onClose:h[0]||(h[0]=n=>le.value=!1),onChooseAmount:h[1]||(h[1]=()=>{le.value=!1,p.value=!0})},null,8,["pending-yield","my-claim-list","my-claim-position-list"])):Y("",!0),(a(),ee(Dt,{key:J.value,"position-show-list":d.value,"is-show-yiedl-details":p.value,onClose:h[2]||(h[2]=()=>{p.value=!1}),onShowClaimYiedl:re},null,8,["position-show-list","is-show-yiedl-details"]))])}}});const Jt=oe(Ht,[["__scopeId","data-v-826d7f95"]]),Zt=te({components:{TotalPosition:Jt},setup(){const e=w(!1),{t:p}=Ae(),k=w(["position"]),C=Xe(),m=w(""),L=Ce(),d=y(()=>L),E=y(()=>d.value.chainName?ns[d.value.chainName]:{});let f=w([]);const U=me(),_=y(()=>U),$=Te(),A=y(()=>$),O=w(!1),T=w(p("tab.all")),W=w([p("tab.layerZero"),p("tab.wormhole"),p("tab.celer")]),M=w(!0),ie=w("TVL"),K=()=>{e.value=!0,f.value=[],A.value.address&&(U.setPools(u.value.poolConfigList,d.value.chainName),U.getMyPositons(A.value.address,_.value.poolsObj,d.value.chainName)),setTimeout(()=>{e.value=!1},1e3)},ae=y(()=>{const o=Array.from(new Set(_.value.poolConfigList.flatMap(t=>!(t!=null&&t.category)||(t==null?void 0:t.category)==""?"All":t==null?void 0:t.category)));return console.log(o,"newArr"),o.length<=1?[]:o}),re=o=>{_.value.setCurrentPoolTab(o)};H(()=>d.value.isRefresh,o=>{var t,v,P,B;o&&((B=(P=(v=(t=C==null?void 0:C.currentRoute)==null?void 0:t.value)==null?void 0:v.name)==null?void 0:P.split("-"))==null?void 0:B[1])=="position"&&K()}),Ie(()=>{f.value=[],document.addEventListener("click",()=>{O.value=!1}),U.setMyPositionsLoading(!0)}),xe(()=>{document.addEventListener("click",()=>{O.value=!1})}),es(()=>{A.value.connected||(f.value=[])});const J=()=>{e.value=!0;let o=[];_.value.myPositions.forEach(t=>{var ne,pe,fe,he;d.value.addressLpTokens[t.address];let v=t.positionSource=="farming",P,B;const q=t.amountA*((ne=_.value.RATES[t.token_a.address])==null?void 0:ne.price),z=t.amountB*((pe=_.value.RATES[t.token_b.address])==null?void 0:pe.price);(fe=_.value.RATES[t.token_a.address])!=null&&fe.price&&((he=_.value.RATES[t.token_b.address])!=null&&he.price)?(P=q+z,B=q+z):(P=" --",B=0),console.log(_.value.currentPoolTab,"##pools.value.currentPoolTab"),(_.value.currentPoolTab=="All"||_.value.currentPoolTab!=="All"&&t.category==_.value.currentPoolTab)&&o.push({...t,amountUSD:P,amountUSDOrigin:B,tokenARates:q,tokenBRates:z,isStableFarming:v})}),T.value!="All"?M.value?(f.value=o.sort((t,v)=>Number(v.amountUSDOrigin)-Number(t.amountUSDOrigin)),e.value=!1):(f.value=o.sort((t,v)=>Number(t.amountUSDOrigin)-Number(v.amountUSDOrigin)),e.value=!1):M.value?(f.value=o.sort((t,v)=>v.amountUSDOrigin-t.amountUSDOrigin),e.value=!1):(f.value=o.sort((t,v)=>t.amountUSDOrigin-v.amountUSDOrigin),e.value=!1),console.log(f.value,"list.value========>")};H(()=>[_.value.myPositions,_.value.RATES],([o,t])=>{o&&t&&(console.log("0605==>updateLpList9099999"),J())},{immediate:!0}),H(()=>[A.value.address,_.value.poolConfigList,_.value.poolsObj,d.value.chainName],([o,t,v,P])=>{var B,q,z;o&&t&&t.length>0&&P&&(P!=null&&P.toLowerCase().includes((B=t[0])==null?void 0:B.chain))&&!ls(v)&&(P==="Aptos"?t.length===Object.values(v).length:(z=(q=Object.values(v)[0])==null?void 0:q.chain)!=null&&z.includes("sui"))&&(console.log(v,t,"0605==>getMyPositons9099999"),U.getMyPositons(A.value.address,v,P))},{immediate:!0,deep:!0}),H(()=>A.value.address,o=>{o||U.setMyPositions()},{immediate:!0}),H(()=>[T.value,M.value,_.value.currentPoolTab],([o])=>{J()});const Q=o=>{const t=[];W.value.forEach((v,P)=>{v==o?t[P]=T.value:t[P]=v}),W.value=t,T.value=o},R=is(),h=y(()=>R),u=y(()=>U),i=async o=>{await R.getSourceGroups();const t=h.value.sourceGroups&&h.value.sourceGroups.length>0&&h.value.sourceGroups[0]&&h.value.sourceGroups[0].sources||[];console.log(t,"####source"),console.log(o,"###myPositions");for(let v=0;v<t.length;v++){const{pool_address:P,position_index:B}=JSON.parse(t[v].blockchainAddress);let q=!1,z;for(let ne=0;ne<o.length;ne++){const{poolAddress:pe,index:fe,positionSource:he,name:Ve}=o[ne];P==pe&&Number(he=="clmm"?fe:Ve.split("-")[1])==Number(B)&&(q=!0),z={pool_address:P,position_index:B}}q||await R.subscribePosition(z,"",!1,!1)}},n=async()=>{await R.getSourceGroups();const o=h.value.sourceGroups&&h.value.sourceGroups.length>0&&h.value.sourceGroups[0]&&h.value.sourceGroups[0].sources||[];for(let t=0;t<o.length;t++){const{pool_address:v,position_index:P}=JSON.parse(o[t].blockchainAddress),{name:B}=o[t],q={pool_address:v,position_index:P};await R.subscribePosition(q,B,!1,!1)}},l=y(()=>u.value.myPositionsLoading);H(()=>u.value.myPositions,(o,t)=>{E.value.hasNotifi&&(o&&o.length>0&&t&&t.length!==o.length?i(o):o&&o.length==0&&!l.value&&n())},{immediate:!0});const g=o=>{var t;return(o==null?void 0:o.logoURI)||(o==null?void 0:o.logo_url)||((t=_.value.tokensObj[o==null?void 0:o.address])==null?void 0:t.logo_url)||(d.value.theme==="default"?ue("/image/coins/unknown.png"):ue("/image/coins/sui-unknown.png"))},S=w(null),c=y(()=>S.value&&S.value.firstToken?S.value.firstToken:null),j=y(()=>S.value&&S.value.lastToken?S.value.lastToken:null),V=y(()=>{let o=[];o=f.value;const t=o.filter((v,P)=>c.value&&j.value?v.coinA.symbol==c.value.symbol&&v.coinB.symbol==j.value.symbol||v.coinA.symbol==j.value.symbol&&v.coinB.symbol==c.value.symbol:c.value?v.coinA.symbol.toLowerCase().includes(c.value.symbol.toLowerCase())||v.coinB.symbol.toLowerCase().includes(c.value.symbol.toLowerCase()):j.value?v.coinA.symbol.toLowerCase().includes(j.value.symbol.toLowerCase())||v.coinB.symbol.toLowerCase().includes(j.value.symbol.toLowerCase()):o);return _.value.myPositionsLoading||(L.setPositiomAmount(t.length),U.setPositionShowList(t)),t});return ss(()=>{L.setPositiomAmount("--"),U.setPositionShowList([])}),{tabArr:ae,changeTab:re,showList:V,childTokenSelectRef:S,firstToken:c,lastToken:j,getCoinIcon:g,changeSortLabel:Q,label:O,labelList:W,labelValue:T,select:M,selectValue:ie,t:p,pools:_,store:d,wallet:A,list:f,clickRefresh:K,refresh:e,current:k,router:C,searchKey:m}}});const qe=e=>(ce("data-v-0eb16e50"),e=e(),ve(),e),Kt={class:"upgrade-position-list-container"},Qt={class:"position-card-top"},Xt={class:"content-top"},It={class:"content-top-left"},xt={key:0,class:"tag-list"},eo=["onClick"],so={class:"content-top-right"},to={class:"value"},oo=qe(()=>s("use",{"xlink:href":"#icon-icon_on"},null,-1)),ao=[oo],no={key:0,class:"select-item"},lo=["onClick"],io={class:"search-select-box"},ro=qe(()=>s("span",null,"TVL",-1)),uo={key:0,src:je,alt:""},co={key:1,class:"fan-img",src:je,alt:""},vo={key:0,class:"upgrade-loading"},mo={key:1,class:"position-list"},_o={key:2,class:"no-data"},po={key:0,src:cs,alt:""},fo={key:1,src:vs,alt:""},ho={key:3,class:"no-data"},go={key:0,src:ms,alt:""},yo={key:1,src:_s,alt:""};function wo(e,p,k,C,m,L){const d=ts("TotalPosition"),E=We,f=Me,U=ze,_=we;return a(),r("div",Kt,[s("div",Qt,[e.wallet&&e.wallet.address?(a(),ee(d,{key:0})):Y("",!0),s("div",Xt,[s("div",It,[e.tabArr.length>1?(a(),r("div",xt,[(a(!0),r(I,null,x(e.tabArr,($,A)=>(a(),r("div",{key:A,class:be(["tag-item",$==e.pools.currentPoolTab?`tag-active tab-num-${e.tabArr.length}`:`tab-num-${e.tabArr.length}`]),onClick:O=>e.changeTab($)},b($),11,eo))),128))])):Y("",!0),F(E,{ref:"childTokenSelectRef"},null,512)]),s("div",so,[e.store.theme=="default"?(a(),r("div",{key:0,class:"search-label",onClick:p[0]||(p[0]=ke($=>e.label=!e.label,["stop"]))},[s("span",null,b(e.$t("newAdd.label")),1),s("div",to,b(e.labelValue),1),(a(),r("svg",{"aria-hidden":"true",class:be(e.label?"show-icon icon":"icon")},ao,2)),e.label?(a(),r("div",no,[(a(!0),r(I,null,x(e.labelList,($,A)=>(a(),r("div",{key:A,class:"select-menu-item",onClick:O=>e.changeSortLabel($)},b($),9,lo))),128))])):Y("",!0)])):Y("",!0),s("div",io,[s("div",{class:"search-select",onClick:p[1]||(p[1]=ke($=>e.select=!e.select,["stop"]))},[se(b(e.$t("newAdd.sortBy"))+" ",1),s("div",null,[ro,e.select?(a(),r("img",uo)):(a(),r("img",co))])])])])])]),e.pools.myPositionsLoading&&e.wallet.connected?(a(),r("div",vo,[F(f,{loading:e.pools.myPositionsLoading,type:"position"},null,8,["loading"])])):Y("",!0),e.showList&&e.showList.length>0&&e.wallet.connected&&!e.pools.myPositionsLoading?(a(),r("div",mo,[(a(!0),r(I,null,x(e.showList,($,A)=>(a(),ee(U,{key:A,"p-item":$},null,8,["p-item"]))),128))])):Y("",!0),e.showList&&e.showList.length<=0&&!e.pools.myPositionsLoading&&e.wallet.connected?(a(),r("div",_o,[e.store.theme=="default"?(a(),r("img",po)):(a(),r("img",fo)),s("span",null,b(e.$t("common.noLiquidityPositions")),1)])):Y("",!0),e.wallet.connected?Y("",!0):(a(),r("div",ho,[e.store.theme=="default"?(a(),r("img",go)):(a(),r("img",yo)),F(_,{class:"connect-wallet",onClick:p[2]||(p[2]=$=>e.wallet.setIsShowWalletModal(!0))},{default:Z(()=>[se(b(e.$t("button.connectWallet")),1)]),_:1})]))])}const ta=oe(Zt,[["render",wo],["__scopeId","data-v-0eb16e50"]]);export{ta as default};
