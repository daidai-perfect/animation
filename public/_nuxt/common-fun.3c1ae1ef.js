import{c as u,e as O,a as E,t as w,d as R}from"./sha256.de7acfa8.js";import{p as F}from"./precision.a7a6c57b.js";const D=(a,e)=>a&&e?F.plus(w(a),w(e)):a||0,T=a=>{let e=0;return a&&a.forEach(l=>{e+=w(String(l))}),String(R(String(e),2))};function P(a,e,l){var i;const p=[],r=a?l.value.addressLpTokens[a.address]:null;let f,c,g,t,_=[],s=[],b,v;if(r&&(f=r.rewarder_apr[0]?Number(r.rewarder_apr[0].substring(0,r.rewarder_apr[0].length-1)):0,c=r.rewarder_apr[1]?Number(r.rewarder_apr[1].substring(0,r.rewarder_apr[1].length-1)):0,g=r.rewarder_apr[2]?Number(r.rewarder_apr[2].substring(0,r.rewarder_apr[2].length-1)):0,t=f+c+g,r.stable_farming&&r.stable_farming.stable_rewarder.map(n=>{n.amount_second>0&&(b=!0)}),v=r.stable_farming&&r.stable_farming.apr*100),a!=null&&a.rewarder_infos||a!=null&&a.rewarderInfo?s=(a==null?void 0:a.rewarder_infos)||(a==null?void 0:a.rewarderInfo):!u(e.value.addressLpTokens)&&!u(e.value.tokensObj)&&!u(e.value.RATES)&&!u(l.value.newTopPoolsObj)&&(s=(a==null?void 0:a.address)&&e.value.addressLpTokens[a==null?void 0:a.address]&&e.value.addressLpTokens[a==null?void 0:a.address].rewarder_infos||[]),s&&s.length>0){s.forEach((d,h)=>{var A,S,N;const k=(A=e.value.tokensObj[d.coinAddress])==null?void 0:A.decimals,o=O(d.emissionsEveryDay/Math.pow(10,k),4),j=Number(o)>0?E(o):o,I=O(Number(o)*e.value.RATES[d.coinAddress]&&e.value.RATES[d.coinAddress].price,4);p.push({...d,logoUrl:(S=e.value.tokensObj[d.coinAddress])==null?void 0:S.logoURI,day:j,dayUSD:I,symbol:(N=e.value.tokensObj[d.coinAddress])==null?void 0:N.symbol,rewarders:r?r.rewarder_apr[h].replace("%",""):"",rewarder_display:a[`rewarder_display${h+1}`],resultDay:o})});const n=p.filter(d=>d.rewarder_display);(!s||s.length<1||JSON.stringify(s)!==JSON.stringify(n))&&(_=n),console.log(_,n,JSON.stringify(s)!==JSON.stringify(n),"resultresult")}const y={...a,rewardes:_,liqidity:l.value.chainName==="Aptos"?r?r.pure_tvl_in_usd||r.tvl_in_usd:"--":r?r.pure_tvl_in_usd:"--",vol:r?r.vol_in_usd_24h:"--",apr:r&&r.apr_7day?(i=r.apr_7day)==null?void 0:i.replace("%",""):"--",fee:a&&a.fee?a.fee:"--",aprNum:r&&r.apr_7day?String(Number(r.apr_7day.substring(0,r.apr_7day.length-1))+t):"--",rewarder_apr:T(r&&r.rewarder_apr),aprTotal:D(r&&r.apr_7day,r&&T(r.rewarder_apr)),rewarders0:r&&r.rewarder_apr[0],rewarders1:r&&r.rewarder_apr[1],rewarders2:r&&r.rewarder_apr[2],labels:a!=null&&a.labels?a.labels:[],isFarming:a==null?void 0:a.isFarming,fee_24_h:r?r.fee_24_h:"--",isStableFarming:b,stableFarmingApr:v};return e.value.setCurrentPoolMoreInfo(y),y}export{P as g};
