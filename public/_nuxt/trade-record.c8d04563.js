import{_ as Zt}from"./token-warning.45fa5629.js";import{m as w,W as pa,a6 as ga,r as p,b as ea,K as fa,D as pe,a as Se,q as kt,o as i,f as g,h as e,t as ge,i as j,v as o,x as Q,u as l,U as at,z as re,S as vt,p as Ee,k as Re,e as Oe,c as Z,w as ae,j as V,R as It,P as Mt,B as st,J as ha,L as ya,l as ba,y as wa,C as $a,a8 as Lt,F as ie,s as Te,Q as Ft,O as dt,a4 as xa,G as Tt,V as Et,I as ta}from"./entry.7427f084.js";/* empty css              */import{D as m}from"./decimal.0bdeb344.js";import{e as K,a3 as ka,a4 as Sa,a as Je,a5 as Oa,a6 as Ca,u as _t,b as ot,c as mt,d as Be,g as zt,h as Y,a7 as $e,s as Ye,p as Wt,a8 as Vt,a9 as Ke,f as Rt,a2 as bt}from"./pool.04cdd6ce.js";import{_ as La}from"./token-warning-modal.69c6aa60.js";/* empty css              *//* empty css              */import{_ as Ta}from"./img-leverage_2x.1c577303.js";import{_ as Ia}from"./refresh-icon.4b760057.js";import{_ as Yt}from"./assets-card.d130a611.js";import{_ as Ma}from"./coin-select.e8d9f4dc.js";import{V as Ea,B as qt}from"./bignumber.18500642.js";/* empty css              */import{_ as Ra}from"./img-no-Positions_2x.0d17adc1.js";import{_ as Pa}from"./img-connect-wallet_2x.9e9e2fdc.js";const Na=""+globalThis.__publicAssetsURL("sui-image/img-no-data@2x.png");function De(t){const c={fullRpcUrl:localStorage.getItem(`${t}-currentRpclocal2`)||K[t||"Sui"].fullRpcUrl,simulationAccount:K[t||"Sui"].simulationAccount,cetus_config:K[t||"Sui"].cetus_config,clmm_pool:K[t||"Sui"].clmm_pool,integrate:K[t||"Sui"].integrate,deepbook:K[t||"Sui"].deepbook,deepbook_endpoint_v2:K[t||"Sui"].deepbook_endpoint_v2,aggregatorUrl:K[t||"Sui"].aggregatorUrl,swapCountUrl:K[t||"Sui"].swapCountUrl},u={launchpad:K[t||"Sui"].launchpad,ido:K[t||"Sui"].ido,xcetus:K[t||"Sui"].xcetus,xcetus_dividends:K[t||"Sui"].xcetus_dividends,cetus_faucet:K[t||"Sui"].cetus_faucet,xtoken:K[t||"Sui"].xtoken,xtoken_dividends:K[t||"Sui"].xtoken_dividends,token_faucet:K[t||"Sui"].token_faucet,booster:K[t||"Sui"].booster,maker_bonus:K[t||"Sui"].maker_bonus,liquidity_stratefy:K[t||"Sui"].liquidity_stratefy,vaults:K[t||"Sui"].vaults,frams:K[t||"Sui"].frams,limit_order:K[t||"Sui"].limit_order};console.log("defaultNetworkOptions####",c);const b=new ka(c),_=new Sa(u,b),S=Je(),L=w(()=>S);pa(()=>{L.value.address&&(b.senderAddress=L.value.address)});const M=async()=>await _.LimitOrder.getLimitOrderTokenList(),s=async()=>await _.LimitOrder.getLimitOrderPoolList(),O=async()=>{try{return await _.LimitOrder.getOwnerLimitOrderList(_.ClmmSDK.senderAddress,"all")}catch(k){console.log("ðŸš€ðŸš€ðŸš€ ~ file: useLimitOrder.ts:71 ~ getOwnerLimitOrderList ~ error:",k)}},E=k=>({transactionBlock:k,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),a=async k=>{const{pay_coin_amount:I,price:q,expired_ts:se,pay_coin_type:ee,target_coin_type:f,pay_decimal:J,target_decimal:X}=k,A=new m(I).mul(Math.pow(10,J)).toNumber();console.log("useLimitOrder placeLimitOrder params##",k);const r=await _.LimitOrder.placeLimitOrder({pay_coin_amount:A,price:q,expired_ts:se,pay_coin_type:ee=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":ee,target_coin_type:f=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":f,pay_decimal:J,target_decimal:X});return console.log("useLimitOrder placeLimitOrder payload##",r),E(r)},T=async k=>{console.log("cancelOrdersByOwner params",k);const I=await _.LimitOrder.cancelOrdersByOwner(k);return E(I)},P=async k=>await _.LimitOrder.getLimitOrderLogs(k),$=async k=>{const I=await _.LimitOrder.claimTargetCoin({order_id:k.order_id,pay_coin_type:k.pay_coin_type,target_coin_type:k.target_coin_type});return E(I)},x=async k=>await _.LimitOrder.getLimitOrderClaimLogs(k);return{getLimitOrderTokenList:M,getLimitOrderPoolList:s,getOwnerLimitOrderList:O,placeLimitOrder:a,rateToPrice:Oa.rateToPrice,cancelOrdersByOwner:T,getLimitOrderLogs:P,claimTargetCoin:$,getLimitOrderClaimLogs:x}}const wt="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",Pe=ga("LimitOrder",{state:()=>({limitTokenList:[],limitTokenObj:{},limitOrderPoolList:[],limitOrderList:[],orderNum:0,orderListLoading:!1,limitTokenMinAmountObj:{},limitOrderHistoryList:[],historyNum:0,orderHistoryObj:{},cancelOrderId:"",orderHistoryLoading:!1,currentOrderClaimHistory:[],claimHistoryLoading:!0,RATES:{},marketPriceLoading:!0,haveMarket:!0}),actions:{async getTokenMinAmount(){const c=await De("Sui").getLimitOrderTokenList();this.limitTokenMinAmountObj=Object.fromEntries(c.map((u,b)=>[u.coin_type==wt?"0x2::sui::SUI":u.coin_type,u])),console.log(c,"store limitorder getLimitgetTokenMinAmount###")},async getPoolList(){const c=await De("Sui").getLimitOrderPoolList();this.limitOrderPoolList=c.map(u=>({indexer_id:u.indexer_id,pay_coin_type:u.pay_coin_type==wt?"0x2::sui::SUI":u.pay_coin_type,target_coin_type:u.target_coin_type==wt?"0x2::sui::SUI":u.target_coin_type})),console.log(c,"store limitorder getLimitOrderPoolList###")},async getOrderList(){console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:42 ~ getOrderList ~ getOrderList:");const t=De("Sui");this.orderListLoading=!0;try{const c=await t.getOwnerLimitOrderList();console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:46 ~ getOrderList ~ result:",c);const u=c.data.filter(b=>b.status=="PartialCompleted"||b.status=="Running")||[];this.limitOrderList=u.sort((b,_)=>_.created_ts-b.created_ts),console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:52 ~ getOrderList ~ this.limitOrderList:",this.limitOrderList),this.orderListLoading=!1,this.cancelOrderId=""}catch(c){console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:53 ~ getOrderList ~ e:",c),this.orderListLoading=!1,this.cancelOrderId=""}},async getTokenList(){const c=(await fetch(`${K.Sui.api}/v2/sui/coin_metadata`,{method:"POST",body:JSON.stringify({})}).then(u=>u.json())).data.list||[];this.limitTokenList=c,this.limitTokenObj=Object.fromEntries(c.map((u,b)=>[u.coin_type==wt?"0x2::sui::SUI":u.coin_type,u])),console.log(c,"store limitorder getLimitOrderTokenList###")},async getLimitOrderLogs(){},async getLimitOrderHistory(t){this.orderHistoryLoading=!0;const{data:c}=await fetch(`${K.Sui.api}/v2/sui/limit_order?wallet_address=${t}`).then(b=>b.json()),u=c.list||[];this.limitOrderHistoryList=u||[],this.orderHistoryLoading=!1},async getLimitOrderClaimHistory(t){this.currentOrderClaimHistory=[],this.claimHistoryLoading=!0;const u=await De("Sui").getLimitOrderClaimLogs(t.id);this.currentOrderClaimHistory=u.map(b=>{const _=new m(b.parsedJson.claimed_amount).div(Math.pow(10,t.target_coin_info.decimals));return{...b,...b.parsedJson,claimed_amount:_}}),console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:105 ~ getLimitOrderClaimHistory ~ currentOrderClaimHistory:",this.currentOrderClaimHistory),this.claimHistoryLoading=!1},setOrderNum(t){this.orderNum=t},setHistoryNum(t){this.historyNum=t},setLimitOrderLoading(t){this.cancelOrderId=t},async setRates(t){this.marketPriceLoading=!0;let c={};if(t&&t.includes("Sui"))try{c=await $fetch(`${K.Sui.api}/v2/sui/price`)}catch(_){console.log("sui pric api error ###",_),c={data:{prices:Ca}}}else c=await $fetch(`${K.Aptos.api}/v2/price`);const u=c.data.prices||[],b=[];u.forEach(_=>{_.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?b.push({..._},{..._,base_symbol:"0x2::sui::SUI"}):b.push(_)}),this.RATES=Object.fromEntries(b.map(_=>[_.base_symbol,_])),this.marketPriceLoading=!1},setHaveMarket(t){this.haveMarket=t}}}),h=p(),y=p(),Aa=_t(),Ua=w(()=>Aa),aa=ot(),Ha=w(()=>aa),Kt=w(()=>Ha.value.chainName),tt=mt("Sui");ea();const Ba=fa(),sa=p(!0);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-data.ts:53 ~ route:",Ba);pe(()=>[Ua.value.tokensObj,sa.value],async([t,c])=>{if(!Be(t)){const u=zt("from"),b=zt("to");console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-data.ts:61 ~ routerCoinTo:",u,b),u&&b?h.value=t[u]||await tt.getTokenBySymbol(t,u):!u&&!h.value&&(h.value=t[K[Kt.value].swapDefaultPair.fromCoin]),u&&b?y.value=t[b]||await tt.getTokenBySymbol(t,b):!b&&!y.value&&(y.value=t[K[Kt.value].swapDefaultPair.toCoin])}},{});const{setTransactionTxid:Da,setIsShowWaiting:$t,setIsShowSuccess:ja,setIsShowRejected:Jt,setTransactionDesc:Fa}=aa,Gt=p(!1),ct=Pe(),za=w(()=>ct),Wa=w(()=>za.value.limitOrderList),Va=Je(),Qt=w(()=>Va),Pt=async(t,c=!1)=>{const u=De("Sui");try{Fa("Canceling order"),$t(!0);const _=c?Wa.value.map(s=>({order_id:s.id,pay_coin_type:s.pay_coin_type,target_coin_type:s.target_coin_type})):[{order_id:t.id,pay_coin_type:t.pay_coin_type,target_coin_type:t.target_coin_type}];ct.setLimitOrderLoading(c?"all":t.id),console.log("cacelLimitOrder parmas",_);const S=await u.cancelOrdersByOwner(_),L=await tt.signAndExecuteTransactionBlock(Qt.value.currentWallet,S),M=tt.handleTx(L);if(M&&M.hash){Da(M.hash),$t(!1),ja(!0),Gt.value=!1;const s={title:"Transaction",desc:"Order cancelled successfully",hash:M.hash,icon:"icon-icon-Increased"};s.res=M.res,tt.showTransitionPending(s),await tt.watchTransaction(s)&&setTimeout(()=>{tt.getAccount(Qt.value.address),ct.getOrderList()},2e3)}else $t(!1),Jt(!0),ct.setLimitOrderLoading("")}catch(b){$t(!1),Jt(!0),Gt.value=!1,ct.setLimitOrderLoading(""),console.log("trade-data.ts cancel error##",b)}},xt=p(!1),oe=p(!0),D=p(),W=p();function Xt(){xt.value=!0;const t=h.value;h.value=y.value,y.value=t,oe.value=!oe.value;const c=D.value,u=W.value;oe.value?(D.value=W.value,W.value=c):(W.value=D.value,D.value=u),setTimeout(()=>{xt.value=!1},300)}pe(()=>sa.value,()=>{D.value="",W.value=""},{immediate:!0});const Ya=t=>(Ee("data-v-bd53eb9a"),t=t(),Re(),t),qa={class:"switch-direction"},Ka={class:"left"},Ja={key:0,class:"token-info"},Ga={key:0},Qa={key:1,class:"token-info"},Xa={alt:""},Za={alt:""},es={key:0,class:"chart-no-data"},ts=Ya(()=>e("img",{src:Na,alt:""},null,-1)),as=["src","onload"],ss=Se({__name:"trade-chart",setup(t){const c=p(!0);p(!0),p(),p(),p();const u=Pe(),b=w(()=>u);w(()=>b.value.RATES),w(()=>b.value.marketPriceLoading);const _=w(()=>b.value.haveMarket);p(),p();const S=ot(),L=w(()=>S),M=w(()=>L.value.addressLpTokens),s=_t(),O=w(()=>s),E=w(()=>O.value.openPool),a=p(),T=()=>{var $;const P=[];if(($=E==null?void 0:E.value)==null||$.forEach(x=>{var k,I,q,se,ee,f,J,X;if(x.coinA.address.toUpperCase()===((I=(k=h==null?void 0:h.value)==null?void 0:k.address)==null?void 0:I.toUpperCase())&&x.coinB.address.toUpperCase()===((se=(q=y==null?void 0:y.value)==null?void 0:q.address)==null?void 0:se.toUpperCase())||x.coinB.address.toUpperCase()===((f=(ee=h==null?void 0:h.value)==null?void 0:ee.address)==null?void 0:f.toUpperCase())&&x.coinA.address.toUpperCase()===((X=(J=y==null?void 0:y.value)==null?void 0:J.address)==null?void 0:X.toUpperCase())){const A=(M==null?void 0:M.value[x.address])||{};A&&!Be(A)&&P.push({...x,pure_tvl_in_usd:A.pure_tvl_in_usd})}}),P&&P.length>0){const x=P.sort((k,I)=>k.pure_tvl_in_usd-I.pure_tvl_in_usd)[0];return a.value=x,console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-chart.vue:327 ~ poolInfo ~ result:",x),!1}a.value=null};return pe(()=>[E.value,M.value,h.value,y.value],([P,$])=>{P&&P.length>0&&$&&!Be($)&&T()},{immediate:!0}),(P,$)=>{var q,se,ee,f,J,X,A,r,z,C,U,H,v,R,N,te,F,le,ve,_e,ne,he,Ne,xe,Ze,Fe,et,Ae,be,fe,ce,ye,we,Ce,de,ke,ze,Ue,gt;const x=Zt,k=vt,I=kt("image");return i(),g("div",{class:re(["trade-chart",!c.value&&!a.value?"trade-chart-no-pool":""])},[e("div",qa,[e("div",Ka,[a.value?(i(),g("div",Ja,[e("div",null,[ge(e("img",null,null,512),[[I,(q=a.value)!=null&&q.needReverse?(ee=(se=a.value)==null?void 0:se.token_b)==null?void 0:ee.logo_url:(J=(f=a.value)==null?void 0:f.token_a)==null?void 0:J.logo_url]]),j(x,{address:(X=a.value)!=null&&X.needReverse?(r=(A=a.value)==null?void 0:A.token_b)==null?void 0:r.address:(C=(z=a.value)==null?void 0:z.token_a)==null?void 0:C.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[ge(e("img",null,null,512),[[I,(U=a.value)!=null&&U.needReverse?(v=(H=a.value)==null?void 0:H.token_a)==null?void 0:v.logo_url:(N=(R=a.value)==null?void 0:R.token_b)==null?void 0:N.logo_url]]),j(x,{address:(te=a.value)!=null&&te.needReverse?(le=(F=a.value)==null?void 0:F.token_a)==null?void 0:le.address:(_e=(ve=a.value)==null?void 0:ve.token_b)==null?void 0:_e.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),a.value?(i(),g("span",Ga,o((ne=a.value)!=null&&ne.needReverse?(Ne=(he=a.value)==null?void 0:he.token_b)==null?void 0:Ne.symbol:(Ze=(xe=a.value)==null?void 0:xe.token_a)==null?void 0:Ze.symbol)+" / "+o((Fe=a.value)!=null&&Fe.needReverse?(Ae=(et=a.value)==null?void 0:et.token_a)==null?void 0:Ae.symbol:(fe=(be=a.value)==null?void 0:be.token_b)==null?void 0:fe.symbol),1)):Q("",!0)])):l(h)&&l(y)?(i(),g("div",Qa,[e("div",null,[ge(e("img",Xa,null,512),[[I,(ce=l(h))==null?void 0:ce.logo_url]]),j(x,{address:(ye=l(h))==null?void 0:ye.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[ge(e("img",Za,null,512),[[I,(we=l(y))==null?void 0:we.logo_url]]),j(x,{address:(Ce=l(y))==null?void 0:Ce.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("span",null,o((de=l(h))==null?void 0:de.symbol)+" / "+o((ke=l(y))==null?void 0:ke.symbol),1)])):Q("",!0)])]),!c.value&&!a.value?(i(),g("div",es,[ts,e("span",null,o(_.value?"Price chart is currently not available for this pair, but you can still place your limit orders.":"No data avaliable"),1)])):Q("",!0),ge(e("iframe",{id:"geckoterminal-embed",ref:"myFrame",class:"frame",height:"100%",width:"100%",title:"GeckoTerminal Embed",frameborder:"0",allow:"clipboard-write",allowfullscreen:"",src:`https://birdeye.so/tv-widget/${(Ue=(ze=a.value)==null?void 0:ze.token_a)==null?void 0:Ue.address}/${(gt=a.value)==null?void 0:gt.address}?chain=sui`,onload:()=>{c.value=!1}},null,8,as),[[at,!c.value&&a.value]]),ge(j(k,null,null,512),[[at,c.value]])],2)}}});const ci=Oe(ss,[["__scopeId","data-v-bd53eb9a"]]),la=t=>(Ee("data-v-2c8f9476"),t=t(),Re(),t),ls={class:"custom-expiry"},ns={class:"input-box"},os=la(()=>e("div",{class:"minutes"},"Hours",-1)),is={class:"input-box"},us=la(()=>e("div",{class:"minutes"},"Minutes",-1)),rs=Se({__name:"custom-expires-modal",setup(t){const c=p(),u=p(),b=p({}),_=(s,O)=>{const E=(s||0)*60+Number(O||0),a=Math.floor(E/(60*24)),T=Math.floor(E%(60*24)/60),P=E%60;let $="";a>0&&($+=a+"d "),T>0&&($+=T+"h "),P>0&&($+=P+"m "),b.value={timeText:$.trim()||"0 m",time:E*60*1e3}};pe(()=>[c.value,u.value],([s,O])=>{_(s,O)},{immediate:!0});const S=s=>{const O=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,0}})?).*$");s.target.value=s.target.value.replace(O,"$1"),c.value=s.target.value,console.log(c.value,"##inputChange")},L=s=>{const O=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,0}})?).*$");s.target.value=s.target.value.replace(O,"$1"),u.value=s.target.value},M=w(()=>!c.value&&!u.value||Number(c.value)==0&&!u.value||Number(u.value)==0&&!c.value||Number(c.value)==0&&Number(u.value)==0);return(s,O)=>{const E=Mt,a=st;return i(),Z(l(It),{title:"Custom Expiry Period",visible:!0,width:"440px",footer:null,onCancel:O[3]||(O[3]=T=>s.$emit("closeModal"))},{default:ae(()=>[e("div",ls,[e("div",ns,[j(E,{value:c.value,"onUpdate:value":O[0]||(O[0]=T=>c.value=T),placeholder:"0",onChange:S},null,8,["value"]),os]),e("div",is,[j(E,{value:u.value,"onUpdate:value":O[1]||(O[1]=T=>u.value=T),placeholder:"0",onChange:L},null,8,["value"]),us]),j(a,{class:"set-period",disabled:M.value,onClick:O[2]||(O[2]=T=>s.$emit("sendTime",b.value))},{default:ae(()=>[V("Set Period")]),_:1},8,["disabled"])])]),_:1})}}});const cs=Oe(rs,[["__scopeId","data-v-2c8f9476"]]),Ge=t=>(Ee("data-v-e18eb10d"),t=t(),Re(),t),ds=Ge(()=>e("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),vs=[ds],_s={class:"trade-cofirm-content"},ms={class:"coin-info"},ps={class:"from-coin-info"},gs={class:"left"},fs={class:"coin-amount"},hs={class:"coin-symbol"},ys={class:"right"},bs={class:"to-coin-info"},ws={class:"left"},$s={class:"coin-amount"},xs={class:"coin-symbol"},ks={class:"right"},Ss=Ge(()=>e("div",{class:"to-swap-logo"},null,-1)),Os={class:"trade-info"},Cs={class:"price"},Ls=Ge(()=>e("div",{class:"lebal"},"Pirce",-1)),Ts={class:"text"},Is={key:0},Ms={key:1},Es=Ge(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),Rs=Ge(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),Ps=[Es,Rs],Ns={class:"expires-in"},As=Ge(()=>e("div",{class:"lebal"},"Expires in",-1)),Us={class:"text"},Hs=Ge(()=>e("div",{class:"trade-tips1"}," You will receive exactly what you have specified if your order is fully filled in the end. ",-1)),Bs=Ge(()=>e("div",{class:"trade-tips2"}," Please note that your order may not be filled immediately after the price is triggered, depending on pending sequence and liquidity depth. ",-1)),Ds=Se({__name:"trade-confirm",props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},direction:{type:Boolean,default:!1},price:{type:String,default:""},currentExpires:{type:String,default:""}},emits:["to-trade","close"],setup(t,{emit:c}){const u=t,b=c,_=p(!1),S=w(()=>new m(1).div(new m(u.price)).toString()),L=async()=>{b("to-trade")};return(M,s)=>{const O=st,E=kt("image");return i(),Z(l(It),{title:"Review your order",width:"440px",footer:null,visible:!0,class:"trade-confirm-modal"},{closeIcon:ae(()=>[(i(),g("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:s[0]||(s[0]=a=>b("close"))},vs))]),default:ae(()=>{var a,T,P,$,x,k,I,q;return[e("div",_s,[e("div",ms,[e("div",ps,[e("div",gs,[e("div",fs,o(t.fromCoinAmount&&l(Y)(t.fromCoinAmount)),1),e("div",hs,o(t.fromCoin&&t.fromCoin.symbol),1)]),e("div",ys,[ge(e("img",null,null,512),[[E,t.fromCoin&&t.fromCoin.logo_url]])])]),e("div",bs,[e("div",ws,[e("div",$s,o(t.toCoinAmount&&l(Y)(t.toCoinAmount)),1),e("div",xs,o(t.toCoin&&t.toCoin.symbol),1)]),e("div",ks,[ge(e("img",null,null,512),[[E,t.toCoin&&t.toCoin.logo_url]])]),Ss])]),e("div",Os,[e("div",Cs,[Ls,e("div",Ts,[t.direction?(i(),g("span",Ms,o(l(Y)(l($e)(_.value?S.value:t.price,9)))+" "+o(_.value?(k=t.fromCoin)==null?void 0:k.symbol:(x=t.toCoin)==null?void 0:x.symbol)+" per "+o(_.value?(q=t.toCoin)==null?void 0:q.symbol:(I=t.fromCoin)==null?void 0:I.symbol),1)):(i(),g("span",Is,o(l(Y)(l($e)(_.value?S.value:t.price,9)))+" "+o(_.value?(T=t.toCoin)==null?void 0:T.symbol:(a=t.fromCoin)==null?void 0:a.symbol)+" per "+o(_.value?($=t.fromCoin)==null?void 0:$.symbol:(P=t.toCoin)==null?void 0:P.symbol),1)),e("div",{class:"right",onClick:s[1]||(s[1]=se=>_.value=!_.value)},Ps)])]),e("div",Ns,[As,e("div",Us,o(t.currentExpires),1)])]),Hs,Bs]),j(O,{class:"big-btn trade-confirm-btn",onClick:s[2]||(s[2]=se=>L())},{default:ae(()=>[V(" Place Order ")]),_:1})]}),_:1})}}});const js=Oe(Ds,[["__scopeId","data-v-e18eb10d"]]),it=t=>(Ee("data-v-9d61c309"),t=t(),Re(),t),Fs={class:"trade-card"},zs={class:"trade-content"},Ws={class:"trade-card-title"},Vs={class:"trade-tab"},Ys=["onClick"],qs={class:"trade-card-content"},Ks={class:"card-item"},Js={class:"card-item"},Gs=it(()=>e("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),Qs=[Gs],Xs={class:"sell-setting"},Zs={class:"sell-rate"},el={class:"top"},tl={key:0,class:"direction-text"},al={key:1,class:"direction-text"},sl={class:"bottom"},ll={class:"coin-symbol"},nl=it(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),ol=it(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),il=[nl,ol],ul={class:"top"},rl=it(()=>e("span",null,"Expiry in",-1)),cl=it(()=>e("use",{"xlink:href":"#icon-icon-tips2"},null,-1)),dl=[cl],vl={class:"bottom"},_l=it(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),ml=[_l],pl=["onClick"],gl={class:"market-price-tips"},fl=Se({__name:"trade-card",setup(t){const c=ha(ya,{style:{fontSize:"14px",marginLeft:"4px",color:"#75c8ff"},spin:!0}),{t:u}=ba(),b=["Limit Order"],_=p("Limit Order"),S=Je(),L=w(()=>S),M=w(()=>L.value.assets&&h.value&&L.value.assets[h.value.address]?Wt(L.value.assets[h.value.address].balance,h.value.decimals):0),s=w(()=>L.value.assets&&y.value&&L.value.assets[y.value.address]?Wt(L.value.assets[y.value.address].balance,y.value.decimals):0),O=d=>{d==="fromCoin"?(oe.value=!0,D.value=M.value>0?h.value.symbol=="SUI"?new m(Number(M.value)).sub(new m(.05)).lt(new m(0))?"0":new m(Number(M.value)).sub(new m(.05)).toString():String(M.value):""):(oe.value=!1,W.value=s.value>0?y.value.symbol=="SUI"?new m(Number(s.value)).sub(new m(.05)).lt(new m(0))?"0":new m(Number(s.value)).sub(new m(.05)).toString():String(s.value):"")},E=d=>{d==="fromCoin"?(oe.value=!0,D.value=M.value>0?Ye(new m(Number(M.value)).div(2).toString(),h.value.decimals).toString():""):(oe.value=!1,W.value=s.value>0?Ye(new m(Number(s.value)).div(2).toString(),y.value.decimals).toString():"")},a=p(""),T=p(""),P=p(""),$=p(!1),x=d=>{var n,G,ue,me;a.value=d,d==="fromCoin"?(T.value=((n=y.value)==null?void 0:n.address)||"",P.value=((G=h.value)==null?void 0:G.address)||""):(T.value=((ue=h.value)==null?void 0:ue.address)||"",P.value=((me=y.value)==null?void 0:me.address)||""),$.value=!0},k=["5 Minutes","10 Minutes","30 Minutes","1 Hour","1 Day","3 Days","7 Days","1 Month","Custom"],I=d=>{switch(d){case"5 Minutes":return 3e5;case"10 Minutes":return 6e5;case"30 Minutes":return 18e5;case"1 Hour":return 36e5;case"1 Day":return 864e5;case"7 Days":return 6048e5;case"1 Month":return 2592e6;default:return 0}},q=p(!1),se=p("7 Days"),ee=p(!1),f=p(),J=p(0),X=d=>{se.value=d.timeText,J.value=d.time,ee.value=!1},A=p(),r=d=>{A.value=a.value==="fromCoin"?h.value:y.value;let n=!1;a.value==="fromCoin"?(D.value="",y.value&&d.address.toLowerCase()===(y==null?void 0:y.value.address.toLowerCase())&&(y.value=h.value,n=!0),h.value=d):(h.value&&(W.value="",d.address.toLowerCase()===(h==null?void 0:h.value.address.toLowerCase())&&(h.value=y.value,n=!0)),y.value=d),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:416 ~ onCoinSelect ~ toCoin.value:",y.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:453 ~ onCoinSelect ~ fromCoin.value:",h.value),n||(ce.value=!1),$.value=!1},z=p(20),C=p(0),U=p(null),H=p(!1),v=()=>{H.value||(clearInterval(U.value),L.value.address&&(ne.getOrderList(),be.getAccount(L.value.address)),we.value||de.value?Ct():ft(!1),C.value=0,H.value=!0,setTimeout(()=>{H.value=!1,R()},1e3))},R=()=>{U.value=setInterval(()=>{H.value=!1,C.value<z.value&&(C.value+=1,C.value===z.value&&v())},1e3)};wa(()=>{R(),window.addEventListener("click",()=>{q.value=!1})}),$a(()=>{clearInterval(U.value)});const N=()=>{if(oe.value&&(!D.value||D.value==0)||!oe.value&&(!W.value||W.value==0))return!1;if(f.value<=0&&lt.value)return oe.value?W.value="":D.value="",!1;if(Number(D.value)<=0&&Number(W.value)<=0)return!1;if(f.value<=0&&!lt.value&&D.value>0&&W.value>0)return console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:480 ~ updateAmounts ~ fromCoinAmount.value&&toCoinAmount.value:",D.value>0&&W.value>0),f.value=ce.value?$e(new m(W.value||0).div(new m(D.value||0)).toString()):$e(new m(D.value||0).div(new m(W.value||0)).toString()),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:497 ~ updateAmounts ~ fixedFromCoin.value :",oe.value),!1;if(f.value<=0&&!lt.value)return!1;oe.value?ce.value?W.value=Ye(new m(D.value).mul(new m(f.value||0)).toString(),y.value.decimals):W.value=Ye(new m(D.value).div(new m(f.value||0)).toString(),y.value.decimals):ce.value?D.value=Ye(new m(W.value).div(new m(f.value||0)).toString(),h.value.decimals):D.value=Ye(new m(W.value).mul(new m(f.value||0)).toString(),h.value.decimals)};pe(D,Lt((d,n)=>{d&&d!==0&&oe.value&&N(),d==""&&oe.value&&(W.value="")},100)),pe(f,Lt((d,n)=>{d&&d!==0&&N(),d==""&&oe.value&&(W.value="")},100)),pe(W,Lt((d,n)=>{d&&d!==0&&!oe.value&&N(),d==""&&!oe.value&&(D.value="")},100));const te=_t(),F=w(()=>te),le=w(()=>{var ue;const n=(ue=F.value.RATES[h.value.address])==null?void 0:ue.price,G=new m(n||0).mul(D.value||0).toNumber();if(n){if(G<5&&n)return!0}else return!1;return!1}),ve=w(()=>!h.value||!y.value?u("modal.selectTokenModalTitle"):Ue.value?!Number(D.value)||!Number(W.value)?u("button.enterAmount"):le.value?"Order size should be higher than $5":Number(D.value)>Number(M.value)?u("button.insufficientBalance",{name:h.value.symbol}):"Place Limit Order":"No Available Route"),_e=w(()=>!!(!h.value||!y.value||!f.value||le.value||!Number(D.value)&&!Number(W.value)||Number(D.value)>Number(M.value)||Number(D.value)==0||Number(W.value)==0||!Ue.value)),ne=Pe();w(()=>ne);const he=ot(),{setTransactionTxid:Ne,setIsShowWaiting:xe,setIsShowSuccess:Ze,setIsShowRejected:Fe,setTransactionDesc:et}=he,Ae=p(!1),be=mt("Sui"),fe=async()=>{yt.value=!1;const d=De("Sui"),n=Date.parse(new Date().toString())+(I(se.value)||J.value);try{et("Creating order"),xe(!0);const ue={pay_coin_amount:D.value,price:ce.value?f.value:new m(1).div(new m(f.value)).toString(),expired_ts:n,pay_coin_type:h.value.address,target_coin_type:y.value.address,pay_decimal:h.value.decimals,target_decimal:y.value.decimals};console.log("placeLimitOrder parmas",ue);const me=await d.placeLimitOrder(ue),rt=await be.signAndExecuteTransactionBlock(L.value.currentWallet,me),Ie=be.handleTx(rt);if(Ie&&Ie.hash){Ne(Ie.hash),xe(!1),Ze(!0),Ae.value=!1;const He={title:"Transaction",desc:"Order placed successfully",hash:Ie.hash,icon:"icon-icon-Increased"};He.res=Ie.res,be.showTransitionPending(He),await be.watchTransaction(He)&&setTimeout(()=>{be.getAccount(L.value.address),ne.getOrderList()},1e3)}else xe(!1),Fe(!0)}catch(G){xe(!1),Fe(!0),Ae.value=!1,console.log("trade-card openOrder error##",G)}},ce=p(!1),ye=p(),we=p(""),Ce=p(),de=p("0"),ke=p(""),ze=p(),Ue=p(!0),gt=async()=>{var G,ue;let d;if(oe.value){const me=new m(1).mul(Math.pow(10,(G=h==null?void 0:h.value)==null?void 0:G.decimals)).toString();d=new qt(me)}else{const me=new m(1).mul(Math.pow(10,(ue=y==null?void 0:y.value)==null?void 0:ue.decimals)).toString();d=new qt(me)}const n=await be.getBestRouterByServer(h,y,d,oe.value,L.value.address,!1,!1);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:805 ~ getTokenRouter ~ res:",n),n&&n.splitPaths&&n.splitPaths.length>0?(Ue.value=!0,ne.setHaveMarket(!0)):(Ue.value=!1,ne.setHaveMarket(!1))},ua=async()=>{var Ie,He;const n=(await $fetch(`${K.Sui.api}/v2/sui/price?base_symbol_address_pair=${Vt(h.value.address)},${Vt(y.value.address)}`)).data.prices||[],G=[];n.forEach(Me=>{Me.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?G.push({...Me,base_symbol:"0x2::sui::SUI"}):G.push(Me)});const ue=Object.fromEntries(G.map(Me=>[Me.base_symbol,Me]));console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:872 ~ setMarketPriceFromRate ~ RATES:",ue);const me=new m((Ie=ue[y.value.address])==null?void 0:Ie.price),rt=new m((He=ue[h.value.address])==null?void 0:He.price);return{inputAmount:me,outputAmount:rt}},St=p(!1),ft=async d=>{d||(St.value=!0);let n;try{n=await ua()}catch(G){console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:787 ~ setMarketPrice ~ error:",G)}if(de.value="",console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:794 ~ setMarketPrice ~ res:",n),!n||n.outputAmount.toNumber()<=0&&n.inputAmount.toNumber()<=0)return ze.value=!1,ke.value="",we.value="",de.value="",!1;ze.value=!0,d?ye.value=ce.value?$e(n.outputAmount.div(n.inputAmount).toString()):$e(n.inputAmount.div(n.outputAmount).toString()):f.value=ce.value?$e(n.outputAmount.div(n.inputAmount).toString()):$e(n.inputAmount.div(n.outputAmount).toString()),setTimeout(()=>{St.value=!1},1e3)},Ot=p(!1),Ct=async()=>{Ot.value=!0,await ft(!0),ke.value="",we.value="",de.value="";const d=new m(f.value).sub(new m(ye.value)).div(new m(ye.value)).mul(100);de.value=d.toNumber().toFixed(2);const n=Math.abs(d.toNumber()).toFixed(2);we.value=`Limit order price is ${n}% ${de.value>0?"higher":"lower"} than the market.`,ce.value?f.value>ye.value?(ke.value="",Ce.value="#68FFD8"):ye.value>f.value&&(ke.value=`Your limit order price is ${n}% ${de.value>0?"higher":"lower"} than market. You are selling at a much higher rate. We recommend you to use`,Ce.value="#ffb62d"):f.value>ye.value?(ke.value=`Your limit order price is ${n}% ${de.value>0?"higher":"lower"} than market. You are buying at a much lower rate. We recommend you to use`,Ce.value="#ffb62d"):ye.value>f.value&&(ke.value="",Ce.value="#68FFD8"),Ot.value=!1};pe(()=>[h.value,y.value],([d,n])=>{d&&n&&(f.value="",ft(!1))},{immediate:!0});const lt=p(!1),ra=d=>{const n=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,18})?).*$");d.target.value=d.target.value.replace(n,"$1"),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1002 ~ priceChange ~ e.target.value:",d.target.value),f.value=d.target.value,ke.value="",we.value="",de.value="",lt.value=!0,f.value&&f.value>0&&Ue.value&&Ct()},ca=()=>{ce.value=!ce.value,f.value=$e(new m(1).div(new m(f.value)).toString()),f.value>0&&Ue.value&&Ct()},We=p(),Ve=p(),ht=p(!1),Ut=(d,n)=>{var ue,me;const G=he.importTokenListObj;d&&!Be(d)&&F.value.tokensObj&&F.value.tokensObj[d.address]&&F.value.tokensObj[d.address].isSelfBuilt&&!(G!=null&&G.hasOwnProperty(d==null?void 0:d.address))&&(We.value=d),n&&!Be(n)&&F.value.tokensObj&&F.value.tokensObj[n.address]&&F.value.tokensObj[n.address].isSelfBuilt&&!(G!=null&&G.hasOwnProperty(n==null?void 0:n.address))&&(Ve.value=n),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1034 ~ getTokenSource ~ warningFromCoin.value:",We.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1046 ~ getTokenSource ~ warningToCoin.value:",Ve.value),((ue=We==null?void 0:We.value)!=null&&ue.address||(me=Ve==null?void 0:Ve.value)!=null&&me.address)&&(ht.value=!0)};pe(()=>[h.value,y.value],([d,n])=>{d&&!Be(d)&&Ut(d,{}),n&&!Be(n)&&Ut({},n)},{immediate:!0});const da=()=>{a.value==="fromCoin"?h.value=A.value:y.value=A.value,ht.value=!1,We.value="",Ve.value=""},va=w(()=>{var d,n;return`/swap?from=${(d=h==null?void 0:h.value)==null?void 0:d.address}&to=${(n=y==null?void 0:y.value)==null?void 0:n.address}`}),_a=ea();pe(()=>[h.value,y.value],([d,n])=>{if(d&&n){if(gt(),N(),d||n){const G=`/limit/${d==null?void 0:d.address}-${n==null?void 0:n.address}`;_a.push(G)}}else ne.setHaveMarket(!1)},{immediate:!0});const yt=p(!1);return(d,n)=>{var He,Me,Ht,Bt;const G=vt,ue=Et,me=st,rt=Mt,Ie=La;return i(),g("div",Fs,[e("div",zs,[e("div",Ws,[e("div",Vs,[(i(),g(ie,null,Te(b,B=>e("div",{key:B,class:re([_.value==B?"trade-tab-item-active":"","trade-tab-item"]),onClick:ma=>{var Dt,jt;return B=="Swap"?d.$router.push(`/swap?fromCoin=${(Dt=l(h))==null?void 0:Dt.address}&toCoin=${(jt=l(y))==null?void 0:jt.address}`):_.value=B}},[e("span",null,o(B),1),j(Ea,{top:"15px"})],10,Ys)),64))]),j(Ia,{loading:H.value,"auto-refresh-time":z.value,countdown:C.value,"tooltip-placement":"left",onClickRefresh:v},null,8,["loading","auto-refresh-time","countdown"])]),e("div",qs,[e("div",Ks,[j(Yt,{modelValue:l(D),"onUpdate:modelValue":n[0]||(n[0]=B=>Ft(D)?D.value=B:null),"input-value":l(D),"coin-symbol":l(h)?l(h).symbol:null,"coin-name":l(h)?l(h).name:null,balance:M.value,"coin-icon":l(h)?l(h).logo_url:"",address:l(h)?l(h).address:"","swap-direction":"From",onOnMax:n[1]||(n[1]=B=>O("fromCoin")),onOnHalf:n[2]||(n[2]=B=>E("fromCoin")),onOnInput:n[3]||(n[3]=B=>{D.value=B,oe.value=!0,lt.value=!1}),onOnSelect:n[4]||(n[4]=B=>x("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),e("div",Js,[j(Yt,{modelValue:l(W),"onUpdate:modelValue":n[5]||(n[5]=B=>Ft(W)?W.value=B:null),"input-value":l(W),havemax:!1,"coin-symbol":l(y)?l(y).symbol:null,"coin-name":l(y)?l(y).name:null,balance:s.value,"swap-direction":"To","coin-icon":l(y)?l(y).logo_url:"",address:l(y)?l(y).address:"",havehalf:!1,onOnInput:n[6]||(n[6]=B=>{W.value=B,oe.value=!1,lt.value=!1}),onOnSelect:n[7]||(n[7]=B=>x("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),e("img",{class:re(l(xt)?"gang animationex":"gang"),src:Ta,alt:""},null,2),e("div",{class:"exchange sui-exchange",onClick:n[8]||(n[8]=dt((...B)=>l(Xt)&&l(Xt)(...B),["stop"]))},[(i(),g("svg",{class:re(l(xt)?"icon animationex":"icon"),"aria-hidden":"true"},Qs,2))])]),e("div",Xs,[e("div",Zs,[e("div",el,[e("div",null,[ce.value?(i(),g("div",tl," Sell "+o((He=l(h))==null?void 0:He.symbol)+" at rate",1)):(i(),g("div",al,"Buy "+o((Me=l(y))==null?void 0:Me.symbol)+" at rate ",1)),Ot.value?(i(),Z(G,{key:2,indicator:l(c)},null,8,["indicator"])):(i(),Z(ue,{key:3},xa({default:ae(()=>[f.value&&ye.value&&ze.value&&Number(de.value)!==0?(i(),g("div",{key:0,class:"rate",style:Tt({color:Ce.value})},o(Number(de.value)>0&&Number(de.value)<1e4?`+${de.value}`:Number(de.value)>1e4?">10000":de.value)+"% ",5)):Q("",!0)]),_:2},[we.value?{name:"title",fn:ae(()=>[V(o(we.value),1)]),key:"0"}:void 0]),1024))]),ze.value?(i(),Z(me,{key:0,loading:St.value,class:"set-market max-btn",onClick:n[9]||(n[9]=B=>ft(!1))},{default:ae(()=>[V("Market")]),_:1},8,["loading"])):Q("",!0)]),e("div",sl,[j(rt,{value:f.value,"onUpdate:value":n[10]||(n[10]=B=>f.value=B),placeholder:"0.0",onOnInput:n[11]||(n[11]=()=>{oe.value=!0}),onChange:ra},null,8,["value"]),e("div",ll,[e("span",null,o(ce.value?(Ht=l(y))==null?void 0:Ht.symbol:(Bt=l(h))==null?void 0:Bt.symbol),1),e("div",{class:"right",onClick:ca},il)])])]),e("div",{class:"sell-expires",onClick:n[13]||(n[13]=dt(B=>q.value=!q.value,["stop"]))},[e("div",ul,[rl,j(ue,{"overlay-class-name":"expiry-tooltip",placement:"left"},{title:ae(()=>[V("No extra cancellation fee will be charged for order expiry or cancellation. Gas will be consumed upon manual cancellation.")]),default:ae(()=>[(i(),g("svg",{class:"icon","aria-hidden":"true",onClick:n[12]||(n[12]=dt(()=>{},["stop"]))},dl))]),_:1})]),e("div",vl,[e("span",null,o(se.value),1),(i(),g("svg",{class:"icon","aria-hidden":"true",style:Tt(q.value?{transform:"rotate(180deg)"}:{})},ml,4))]),e("div",{class:"expires-list",style:Tt(q.value?{display:"block"}:{})},[(i(),g(ie,null,Te(k,B=>e("div",{key:B,class:re(["expirer-item",B==se.value?"expirer-item-active":""]),onClick:ma=>B=="Custom"?ee.value=!0:se.value=B},o(B),11,pl)),64))],4)])]),ge(e("div",gl,[V(o(ke.value)+" ",1),e("span",{onClick:n[14]||(n[14]=B=>d.$router.push(va.value))},"Cetus Swap"),V(" instead. ")],512),[[at,f.value&&ye.value&&Number(de.value)!==0&&ke.value&&ze.value]])]),L.value&&L.value.address?(i(),Z(me,{key:0,disabled:_e.value,class:re(["place-order-btn",ve.value&&ve.value.length>40?"place-order-btn-size":""]),loading:Ae.value,onClick:n[15]||(n[15]=B=>yt.value=!0)},{default:ae(()=>[V(o(ve.value),1)]),_:1},8,["disabled","class","loading"])):(i(),Z(me,{key:1,class:"place-order-btn",onClick:n[16]||(n[16]=B=>L.value.setIsShowWalletModal(!0))},{default:ae(()=>[V("Connect wallet")]),_:1})),ee.value?(i(),Z(cs,{key:2,onCloseModal:n[17]||(n[17]=B=>ee.value=!1),onSendTime:X})):Q("",!0),$.value?(i(),Z(Ma,{key:3,"existing-coins":T.value,"last-select-coin":P.value,"have-import-btn":!0,onOnSelect:r,onOnClose:n[18]||(n[18]=B=>$.value=!1)},null,8,["existing-coins","last-select-coin"])):Q("",!0),ht.value?(i(),Z(Ie,{key:4,"from-coin":We.value,"to-coin":Ve.value,"is-import-modal":!0,onClose:da,onClickContinue:n[19]||(n[19]=()=>{ht.value=!1,We.value="",Ve.value=""})},null,8,["from-coin","to-coin"])):Q("",!0),yt.value?(i(),Z(js,{key:5,"from-coin":l(h),"to-coin":l(y),"from-coin-amount":l(D),"to-coin-amount":l(W),direction:ce.value,price:f.value,"current-expires":se.value,onClose:n[20]||(n[20]=B=>yt.value=!1),onToTrade:fe},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","direction","price","current-expires"])):Q("",!0)])}}});const di=Oe(fl,[["__scopeId","data-v-9d61c309"]]),na=t=>(Ee("data-v-1c5863ed"),t=t(),Re(),t),hl={key:0,class:"no-data"},yl=na(()=>e("img",{src:Ra,alt:""},null,-1)),bl={key:1,class:"no-data"},wl=na(()=>e("img",{src:Pa,alt:""},null,-1)),$l=Se({__name:"trade-no-data",props:["platform"],setup(t){const c=Je(),u=_=>{switch(_){case"orders":return"You don't have any open orders yet.";case"history":return"You don't have any order history.";case"claim":return"No History."}},b=w(()=>c);return(_,S)=>{const L=st;return b.value&&b.value.address?(i(),g("div",hl,[yl,e("span",null,o(u(t.platform)),1)])):(i(),g("div",bl,[wl,j(L,{class:"connect-wallet",onClick:S[0]||(S[0]=M=>b.value.setIsShowWalletModal(!0))},{default:ae(()=>[V("Connect Wallet")]),_:1})]))}}});const Nt=Oe($l,[["__scopeId","data-v-1c5863ed"]]),xl={class:"trade-info"},kl={alt:""},Sl={alt:""},Ol=Se({__name:"trade-info",props:{order:{type:Object,default:()=>({})}},setup(t){return(c,u)=>{var S,L,M,s,O,E,a,T,P,$,x,k,I,q;const b=Zt,_=kt("image");return i(),g("div",xl,[e("div",null,[ge(e("img",kl,null,512),[[_,(L=(S=t.order)==null?void 0:S.pay_coin_info)==null?void 0:L.logo_url]]),j(b,{address:(s=(M=t.order)==null?void 0:M.pay_coin_info)==null?void 0:s.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[ge(e("img",Sl,null,512),[[_,(E=(O=t.order)==null?void 0:O.target_coin_info)==null?void 0:E.logo_url]]),j(b,{address:(T=(a=t.order)==null?void 0:a.target_coin_info)==null?void 0:T.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("span",null,o(l(Y)((P=t.order)==null?void 0:P.total_pay_amount))+" "+o((x=($=t.order)==null?void 0:$.pay_coin_info)==null?void 0:x.symbol)+" â†’ "+o(l(Y)((k=t.order)==null?void 0:k.totalBuyNum))+" "+o((q=(I=t.order)==null?void 0:I.target_coin_info)==null?void 0:q.symbol),1)])}}});const pt=Oe(Ol,[["__scopeId","data-v-bb33266f"]]),Qe=t=>(Ee("data-v-34840059"),t=t(),Re(),t),Cl={class:"claim-modal-content"},Ll=Qe(()=>e("div",{class:"desc"}," For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ",-1)),Tl={class:"order-info-detail"},Il={class:"order-info"},Ml=Qe(()=>e("div",{class:"label"},"Price",-1)),El={class:"text"},Rl=Qe(()=>e("div",{class:"label"},"Filled size",-1)),Pl={class:"text"},Nl=Qe(()=>e("div",{class:"label"},"Expiry",-1)),Al={class:"text"},Ul={class:"tab"},Hl=["onClick"],Bl={key:0,class:"claim-content"},Dl={class:"inp-box"},jl=Qe(()=>e("div",{class:"top"},[e("div",{class:"avalibale-claim"},"Avalibale to claim")],-1)),Fl={class:"bottom"},zl={class:"token-info"},Wl={alt:""},Vl={key:1,class:"history-list"},Yl={class:"amount"},ql=Qe(()=>e("div",{class:"label"},"Amount",-1)),Kl={class:"text"},Jl={alt:""},Gl={class:"time"},Ql=Qe(()=>e("div",{class:"label"},"Time",-1)),Xl={class:"text"},Zl=["href"],en=Qe(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link2"})],-1)),tn=[en],an={key:2,class:"loading-box"},sn=Se({__name:"trade-claim-modal",props:{order:{type:Object,default:()=>({})}},emits:["closeModal"],setup(t,{emit:c}){const u=t,b=["Claim","History"],_=p("Claim"),S=p(),L=U=>{const H=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${u.order.target_coin_info.decimals}})?).*$`);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:128 ~ props.order.target_coin_info.decimals:",u.order.target_coin_info.decimals),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:128 ~ reg:",H),S.value=U.target.value.replace(H,"$1")},M=p(!0);pe(()=>u.order.target_balance,U=>{U&&U>0&&M.value?(S.value=U,M.value=!1):S.value=0},{immediate:!0});const s=w(()=>!!(S.value>u.order.target_balance||f.value||!S.value||u.order.target_balance==0)),O=w(()=>S.value>u.order.target_balance?"Maximum amount that can be withdrawn":S.value?"Confirm Claim":"Claim"),E=ot(),a=w(()=>E),T=Je(),P=w(()=>T),$=De("Sui"),{setTransactionTxid:x,setIsShowWaiting:k,setIsShowSuccess:I,setIsShowRejected:q,setTransactionDesc:se}=E,ee=mt("Sui"),f=p(!1),J=Pe(),X=w(()=>J),A=async()=>{var U,H;f.value=!0;try{const v=`Claim ${Y(S.value)} ${(H=(U=u.order)==null?void 0:U.target_coin_info)==null?void 0:H.symbol}`;se(v),k(!0);const R={order_id:u.order.id,pay_coin_type:u.order.pay_coin_type,target_coin_type:u.order.target_coin_type};console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:194 ~ confirmClaim ~ params:",R);const N=await $.claimTargetCoin(R),te=await ee.signAndExecuteTransactionBlock(P.value.currentWallet,N),F=ee.handleTx(te);if(F&&F.hash){x(F.hash),k(!1),I(!0);const le={title:"Transaction",desc:"Claim successfully",hash:F.hash,icon:"icon-icon-Increased"};le.res=F.res,ee.showTransitionPending(le),await ee.watchTransaction(le)&&(setTimeout(()=>{ee.getAccount(P.value.address),J.getOrderList()},2e3),setTimeout(()=>{S.value=0,f.value=!1},4e3))}else k(!1),q(!0)}catch(v){console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:222 ~ confirmClaim ~ error:",v),k(!1),q(!0),f.value=!1}};pe(()=>_.value,U=>{U=="History"&&J.getLimitOrderClaimHistory(u.order)},{immediate:!0});const r=w(()=>X.value.currentOrderClaimHistory),z=w(()=>a.value.currentExplorer),C=w(()=>X.value.claimHistoryLoading);return(U,H)=>{const v=Mt,R=st,N=vt,te=kt("image");return i(),Z(l(It),{title:"Claim",visible:!0,width:"440px",footer:null,onCancel:H[1]||(H[1]=F=>U.$emit("closeModal"))},{default:ae(()=>{var F,le,ve,_e,ne,he,Ne,xe,Ze,Fe,et,Ae,be;return[e("div",Cl,[Ll,e("div",Tl,[j(pt,{order:t.order},null,8,["order"]),e("div",Il,[e("div",null,[Ml,e("div",El,o(l(Y)(t.order.reseverRate))+" "+o((le=(F=t.order)==null?void 0:F.pay_coin_info)==null?void 0:le.symbol)+" per "+o((_e=(ve=t.order)==null?void 0:ve.target_coin_info)==null?void 0:_e.symbol),1)]),e("div",null,[Rl,e("div",Pl,[V(o(l(Y)((ne=t.order)==null?void 0:ne.obtained_amount))+"/"+o(l(Y)((he=t.order)==null?void 0:he.totalBuyNum))+" "+o((xe=(Ne=t.order)==null?void 0:Ne.target_coin_info)==null?void 0:xe.symbol)+" ",1),e("span",null,"("+o((Ze=t.order)==null?void 0:Ze.obtainedRatio)+"%)",1)])]),e("div",null,[Nl,e("div",Al,o(l(Ke)(t.order.expire_ts,""))+" (UTC) ",1)])])]),e("div",Ul,[(i(),g(ie,null,Te(b,fe=>e("div",{key:fe,class:re(["tab-item",_.value==fe?"tab-item-active":""]),onClick:ce=>_.value=fe},o(fe),11,Hl)),64))]),_.value=="Claim"?(i(),g("div",Bl,[e("div",Dl,[jl,e("div",Fl,[j(v,{value:S.value,"onUpdate:value":H[0]||(H[0]=fe=>S.value=fe),disabled:"",onChange:L},null,8,["value"]),e("div",zl,[ge(e("img",Wl,null,512),[[te,(et=(Fe=t.order)==null?void 0:Fe.target_coin_info)==null?void 0:et.logo_url]]),e("span",null,o((be=(Ae=t.order)==null?void 0:Ae.target_coin_info)==null?void 0:be.symbol),1)])])]),j(R,{disabled:s.value,class:"claim-btn",loading:f.value,onClick:A},{default:ae(()=>[V(o(O.value),1)]),_:1},8,["disabled","loading"])])):(i(),g("div",Vl,[!C.value&&r.value&&r.value.length>0?(i(!0),g(ie,{key:0},Te(r.value,fe=>{var ce,ye,we,Ce;return i(),g("div",{key:fe.digest,class:"history-item"},[e("div",Yl,[ql,e("div",Kl,[ge(e("img",Jl,null,512),[[te,(ye=(ce=t.order)==null?void 0:ce.target_coin_info)==null?void 0:ye.logo_url]]),e("span",null,o(l(Y)(fe.claimed_amount))+" "+o((Ce=(we=t.order)==null?void 0:we.target_coin_info)==null?void 0:Ce.symbol),1)])]),e("div",Gl,[Ql,e("div",Xl,[e("span",null,o(l(Ke)(Number(fe.timestampMs),""))+" (UTC)",1),e("a",{target:"_blank",href:l(Rt)(z.value,"tx",fe.digest)},tn,8,Zl)])])])}),128)):!C.value&&r.value&&r.value.length==0?(i(),Z(Nt,{key:1,platform:"claim"})):C.value&&r.value&&r.value.length==0?(i(),g("div",an,[j(N)])):Q("",!0)]))])]}),_:1})}}});const oa=Oe(sn,[["__scopeId","data-v-34840059"]]),ut=t=>(Ee("data-v-90bf50cb"),t=t(),Re(),t),ln={class:"trade-order-card-list"},nn={class:"order-info"},on=ut(()=>e("div",{class:"label"},"Price",-1)),un={class:"text"},rn=["onClick"],cn=ut(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),dn=ut(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),vn=[cn,dn],_n=ut(()=>e("div",{class:"label"},"Filled size",-1)),mn={class:"text"},pn=ut(()=>e("div",{class:"label"},"Expiry",-1)),gn={class:"text"},fn=ut(()=>e("div",{class:"trade-claim-btn trade-claim-btn-disabled"},"Claim",-1)),hn=Se({__name:"trade-order-card",props:{pageList:{type:Object,default:()=>({})}},setup(t){const c=p(),u=p(!1),b=Pe(),_=w(()=>b),S=w(()=>_.value.cancelOrderId);return(L,M)=>{const s=Et,O=st,E=oa;return i(),g("div",ln,[(i(!0),g(ie,null,Te(t.pageList,a=>{var T,P,$,x,k;return i(),g("div",{key:a.id,class:"trade-order-card"},[j(pt,{order:a},null,8,["order"]),e("div",nn,[e("div",null,[on,e("div",un,[a.direction?(i(),g(ie,{key:0},[V(o(l(Y)(a==null?void 0:a.rate))+" "+o((T=a==null?void 0:a.target_coin_info)==null?void 0:T.symbol)+" per "+o((P=a==null?void 0:a.pay_coin_info)==null?void 0:P.symbol),1)],64)):(i(),g(ie,{key:1},[V(o(l(Y)(a==null?void 0:a.reseverRate))+" "+o(($=a==null?void 0:a.pay_coin_info)==null?void 0:$.symbol)+" per "+o((x=a==null?void 0:a.target_coin_info)==null?void 0:x.symbol),1)],64)),e("div",{class:"right",onClick:I=>a.direction=!a.direction},vn,8,rn)])]),e("div",null,[_n,e("div",mn,[V(o(l(Y)(a==null?void 0:a.obtained_amount))+"/"+o(l(Y)(a==null?void 0:a.totalBuyNum))+" "+o((k=a==null?void 0:a.target_coin_info)==null?void 0:k.symbol)+" ",1),e("span",null,"("+o(a==null?void 0:a.obtainedRatio)+"%)",1)])]),e("div",null,[pn,e("div",gn,o(l(Ke)(a.created_ts,""))+" (UTC)",1)])]),a.target_balance==0&&a.obtained_amount==0?(i(),Z(s,{key:0},{title:ae(()=>[V(" For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ")]),default:ae(()=>[fn]),_:1})):(i(),Z(O,{key:1,class:"trade-claim-btn",onClick:()=>{c.value=a,u.value=!0}},{default:ae(()=>[V("Claim")]),_:2},1032,["onClick"])),j(O,{class:"trade-cancel-btn",loading:S.value=="all"||S.value==a.id,onClick:I=>l(Pt)(a)},{default:ae(()=>[V("Cancel")]),_:2},1032,["loading","onClick"])])}),128)),u.value?(i(),Z(E,{key:0,order:c.value,onCloseModal:M[0]||(M[0]=a=>u.value=!1)},null,8,["order"])):Q("",!0)])}}});const yn=Oe(hn,[["__scopeId","data-v-90bf50cb"]]),At=t=>(Ee("data-v-ac01d2bd"),t=t(),Re(),t),bn={class:"trade-orders"},wn={key:0},$n=At(()=>e("thead",null,[e("tr",null,[e("th",null,"Order info"),e("th",null,"Price"),e("th",null,"Filled size"),e("th",null,"Expiry"),e("th",null,"Action")])],-1)),xn={class:"order-price"},kn=["onClick"],Sn=At(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),On=At(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),Cn=[Sn,On],Ln={class:"filled-size"},Tn={class:"action"},In={key:4,class:"loading-box"},Mn=Se({__name:"trade-orders",setup(t){const c=Je(),u=w(()=>c),b=Pe(),_=w(()=>b),S=w(()=>_.value.limitOrderList),L=_t(),M=w(()=>L),s=w(()=>M.value.tokensObj);pe(()=>u.value.address,A=>{A&&b.getOrderList()},{immediate:!0});const O=p(1),E=p(10),a=p([]),T=p([]),P=De("Sui"),$=w(()=>_.value.orderListLoading),x=p(1),k=mt("Sui"),I=p(),q=A=>{I.value={...I.value,[A.id]:A}},se=async()=>{const A=E.value*O.value-E.value;let r=O.value*E.value;r=r>S.value.length?S.value.length:r;const z=S.value;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:147 ~ updateOrderList ~ ordersList.value:",S.value),console.log("trade-card updateOrderList tokenObj",s.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:257 ~ updateOrderList ~ orderDirectObj.value:",I.value),z.length>0){const C=[],U=z.filter((v,R)=>R>=A&&R<r);for(let v=0;v<U.length;v++){const R=U[v];console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:176 ~ updateOrderList ~ order.pay_coin_type:",await k.getTokenListByCoinType[R.pay_coin_type]);const N=s.value[R.pay_coin_type]||(await k.getTokenListByCoinType([R.pay_coin_type]))[0],te=s.value[R.target_coin_type]||(await k.getTokenListByCoinType([R.target_coin_type]))[0];console.log(R,"order###"),console.log(N.decimals,"##pay_coin_info.decimals");const F=$e(P.rateToPrice(R.rate,N.decimals,te.decimals).toString(),N.decimals),le=new m(R.total_pay_amount).div(Math.pow(10,N.decimals)).toString(),ve=new m(R.total_pay_amount).mul(new m(Math.pow(10,18))).div(new m(R.rate)).ceil().div(new m(Math.pow(10,te.decimals))).toString(),_e=new m(R.total_pay_amount).mul(new m(F)).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:166 ~ updateOrderList ~ totalBuyNum:",ve,_e);const ne=new m(R.obtained_amount).div(Math.pow(10,te.decimals)).toString(),he=Ye(new m(ne).div(new m(ve)).mul(100).toString(),2),Ne=new m(R.target_balance).div(Math.pow(10,te.decimals)).toString(),xe=$e(new m(1).div(new m(F)).toString());console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:217 ~ updateOrderList ~ new Decimal(1).div(new Decimal(rate)).toString():",new m(1).div(new m(F)).toString()),C.push({...R,pay_coin_info:N,target_coin_info:te,total_pay_amount:le,rate:F,totalBuyNum:ve,obtained_amount:ne,obtainedRatio:he,target_balance:Ne,reseverRate:xe,direction:I.value&&I.value[R.id]&&I.value[R.id].direction||!1})}a.value=C,x.value==1;const H=C.filter(v=>{var R;return v.id==((R=f==null?void 0:f.value)==null?void 0:R.id)});console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:254 ~ updateOrderList ~ filterList:",H[0]),f.value=H&&H.length>0?H[0]:""}T.value=z,b.setOrderNum(z.length),console.log("allList",T.value),console.log("pageList",a.value)},ee=(A,r)=>{console.log(A,"page"),O.value=A};pe(()=>[S.value,O.value,s.value,u.value.address],([A,r,z,C])=>{A&&A.length>0&&z&&!Be(z)&&C?se():(a.value=[],T.value=[],b.setOrderNum(0))},{immediate:!0});const f=p(),J=p(!1),X=w(()=>_.value.cancelOrderId);return(A,r)=>{const z=st,C=Et,U=ta,H=vt;return i(),g("div",bn,[u.value&&u.value.address&&a.value&&a.value.length>0?(i(),g("table",wn,[$n,e("tbody",null,[(i(!0),g(ie,null,Te(a.value,v=>{var R,N,te,F,le;return i(),g("tr",{key:v.id},[e("td",null,[j(pt,{order:v},null,8,["order"])]),e("td",null,[e("div",xn,[v.direction?(i(),g(ie,{key:0},[V(o(l(Y)(v==null?void 0:v.rate))+" "+o((R=v==null?void 0:v.target_coin_info)==null?void 0:R.symbol)+" per "+o((N=v==null?void 0:v.pay_coin_info)==null?void 0:N.symbol),1)],64)):(i(),g(ie,{key:1},[V(o(l(Y)(v==null?void 0:v.reseverRate))+" "+o((te=v==null?void 0:v.pay_coin_info)==null?void 0:te.symbol)+" per "+o((F=v==null?void 0:v.target_coin_info)==null?void 0:F.symbol),1)],64)),e("div",{class:"right",onClick:()=>{v.direction=!v.direction,q(v)}},Cn,8,kn)])]),e("td",null,[e("div",Ln,[V(o(l(Y)(v==null?void 0:v.obtained_amount))+"/"+o(l(Y)(v==null?void 0:v.totalBuyNum))+" "+o((le=v==null?void 0:v.target_coin_info)==null?void 0:le.symbol)+" ",1),e("span",null,"("+o(v==null?void 0:v.obtainedRatio)+"%)",1)])]),e("td",null,o(l(Ke)(v==null?void 0:v.expire_ts,""))+" (UTC)",1),e("td",null,[e("div",Tn,[j(C,{"overlay-class-name":"expiry-tooltip"},{title:ae(()=>[V(" For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ")]),default:ae(()=>[j(z,{class:"trade-claim-btn",disabled:v.target_balance==0&&v.obtained_amount==0,onClick:()=>{f.value=v,J.value=!0}},{default:ae(()=>[V("Claim")]),_:2},1032,["disabled","onClick"])]),_:2},1024),j(z,{class:"trade-cancel-btn",loading:X.value=="all"||X.value==v.id,onClick:ve=>l(Pt)(v)},{default:ae(()=>[V("Cancel")]),_:2},1032,["loading","onClick"])])])])}),128))])])):Q("",!0),u.value&&u.value.address&&a.value&&a.value.length>0?(i(),Z(yn,{key:1,"page-list":a.value},null,8,["page-list"])):Q("",!0),(a.value&&a.value.length==0||!u.value.address)&&!$.value?(i(),Z(Nt,{key:2,platform:"orders"})):Q("",!0),a.value&&a.value.length>0?(i(),g("div",{key:3,class:re(["pagination",a.value&&a.value.length>0&&$.value?"loading-pagination":""])},[j(U,{current:O.value,"onUpdate:current":r[0]||(r[0]=v=>O.value=v),"page-size":E.value,simple:"",total:T.value&&T.value.length,onChange:ee},null,8,["current","page-size","total"])],2)):Q("",!0),a.value&&a.value.length==0&&$.value?(i(),g("div",In,[j(H)])):Q("",!0),a.value&&a.value.length>0&&$.value?(i(),Z(H,{key:5,class:"order-spin"})):Q("",!0),J.value?(i(),Z(oa,{key:6,order:f.value,onCloseModal:r[1]||(r[1]=v=>J.value=!1)},null,8,["order"])):Q("",!0)])}}});const En=Oe(Mn,[["__scopeId","data-v-ac01d2bd"]]),nt=t=>{switch(t){case"Running":return{class:"order-running",path:"#icon-icon_completed"};case"Completed":return{class:"order-running",path:"#icon-icon_completed"};case"Cancelled":return{class:"order-cancelled",path:"#icon-icon_cancelled"};default:return{class:"",path:""}}},qe=t=>{switch(t){case"OrderPlacedEvent":return{path:"#icon-tx_add1",class:"order-status-create",text:"Create"};case"OrderCanceledEvent":return{path:"#icon-icon_cancelled",class:"order-status-cancel",text:"Cancel"};case"FlashLoanEvent":return{path:"#icon-tx_swap1",class:"order-status-trade",text:"Trade"};default:return{path:"",class:"",text:""}}},Rn=Pe(),Le=p({}),ia=(t,c)=>{Le.value[c]?Le.value[c]=!1:(Le.value[c]=!0,Rn.getLimitOrderLogs(t)),console.log(Le.value,"##isShowPosition.value")},je=t=>(Ee("data-v-0adef64c"),t=t(),Re(),t),Pn={class:"history-card-list"},Nn={class:"history-info"},An=je(()=>e("div",{class:"label"},"Limit price",-1)),Un={class:"text"},Hn=["onClick"],Bn=je(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),Dn=je(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),jn=[Bn,Dn],Fn=je(()=>e("div",{class:"label"},"Expiry",-1)),zn={class:"text"},Wn=je(()=>e("div",{class:"label"},"Filled size",-1)),Vn={class:"text"},Yn=je(()=>e("div",{class:"label"},"Status",-1)),qn={class:"text"},Kn=["onClick"],Jn=["xlink:href"],Gn=je(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Qn=[Gn],Xn={class:"order-log-num"},Zn={class:"order-status"},eo=["xlink:href"],to={class:"create-ts"},ao={key:0},so={key:1},lo={class:"view-trans"},no=["href"],oo=je(()=>e("span",null,"View Txn.",-1)),io=je(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link2"})],-1)),uo=[oo,io],ro=Se({__name:"trade-history-card",props:{pageList:{type:Object,default:()=>[]}},setup(t){const c=ot(),u=w(()=>c),b=w(()=>u.value.currentExplorer),_=Pe(),S=w(()=>_);return w(()=>S.value.orderHistoryObj),(L,M)=>(i(),g("div",Pn,[(i(!0),g(ie,null,Te(t.pageList,(s,O)=>{var E,a,T,P,$;return i(),g("div",{key:s.expire_ts,class:"history-card-item"},[j(pt,{order:s},null,8,["order"]),e("div",Nn,[e("div",null,[An,e("div",Un,[s.direction?(i(),g(ie,{key:1},[V(o(l(Y)(s==null?void 0:s.reseverRate))+" "+o((T=s==null?void 0:s.pay_coin_info)==null?void 0:T.symbol)+" per "+o((P=s==null?void 0:s.target_coin_info)==null?void 0:P.symbol),1)],64)):(i(),g(ie,{key:0},[V(o(l(Y)(s==null?void 0:s.rate))+" "+o((E=s==null?void 0:s.target_coin_info)==null?void 0:E.symbol)+" per "+o((a=s==null?void 0:s.pay_coin_info)==null?void 0:a.symbol),1)],64)),e("div",{class:"right",onClick:dt(x=>s.direction=!s.direction,["stop"])},jn,8,Hn)])]),e("div",null,[Fn,e("div",zn,o(l(Ke)(s==null?void 0:s.expire_ts,""))+" (UTC)",1)]),e("div",null,[Wn,e("div",Vn,[V(o(l(Y)(s==null?void 0:s.transaction_volume))+"/"+o(l(Y)(s==null?void 0:s.total_pay_amount))+" "+o(($=s==null?void 0:s.pay_coin_info)==null?void 0:$.symbol)+" ",1),e("span",null,"("+o(s==null?void 0:s.transaction_ratio)+"%)",1)])]),e("div",null,[Yn,e("div",qn,[e("div",{class:"order-status",onClick:x=>l(ia)(s,O)},[(i(),g("svg",{class:re(["order-status-icon",l(nt)(s.status).class]),"aria-hidden":"true"},[e("use",{"xlink:href":l(nt)(s.status).path},null,8,Jn)],2)),e("span",{class:re(l(nt)(s.status).class)},o(s.status),3),(i(),g("svg",{class:re(["arrow-icon",l(Le)[O]?"open-arrow":""]),"aria-hidden":"true"},Qn,2))],8,Kn)])])]),l(Le)[O]?(i(!0),g(ie,{key:0},Te(s.events,x=>{var k,I,q;return i(),g("div",{key:x,class:"order-log"},[e("div",Xn,[e("div",Zn,[e("div",null,[(i(),g("svg",{class:re(["status-icon",l(qe)(x.type).class]),"aria-hidden":"true"},[e("use",{"xlink:href":l(qe)(x.type).path},null,8,eo)],2)),e("span",{class:re(["text-status",l(qe)(x.type).class])},o(l(qe)(x.type).text),3)]),e("div",to,o(l(Ke)(Number(x.block_time),""))+" (UTC) ",1)]),e("div",null,[x.type=="FlashLoanEvent"?(i(),g("span",ao,"+"+o(l(Y)(x.amount))+" "+o((k=s==null?void 0:s.buy_coin_info)==null?void 0:k.symbol)+" "+o((I=s==null?void 0:s.target_coin_info)==null?void 0:I.symbol),1)):(i(),g("span",so,o(x.type=="OrderPlacedEvent"?"-":"+")+o(l(Y)(x.amount))+" "+o((q=s==null?void 0:s.pay_coin_info)==null?void 0:q.symbol),1)),e("div",lo,[e("a",{href:l(Rt)(b.value,"tx",x.tx),target:"_blank"},uo,8,no)])])])])}),128)):Q("",!0)])}),128))]))}});const co=Oe(ro,[["__scopeId","data-v-0adef64c"]]),Xe=t=>(Ee("data-v-1b1e082a"),t=t(),Re(),t),vo={class:"trade-history"},_o={key:0},mo=Xe(()=>e("thead",null,[e("tr",null,[e("th",null,"Order info"),e("th",null,"Limit price"),e("th",null,"Expiry"),e("th",null,"Filled size"),e("th",null,"Status")])],-1)),po=["onClick"],go={class:"order-price"},fo=["onClick"],ho=Xe(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),yo=Xe(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),bo=[ho,yo],wo={class:"order-status"},$o=["xlink:href"],xo=Xe(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),ko=[xo],So={class:"order-log"},Oo={class:"order-log-num"},Co=["xlink:href"],Lo={key:0},To={key:1},Io=Xe(()=>e("td",null,null,-1)),Mo=Xe(()=>e("td",null,null,-1)),Eo={class:"create-ts"},Ro={class:"view-trans"},Po=["href"],No=Xe(()=>e("span",null,"View Transaction",-1)),Ao=Xe(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link2"})],-1)),Uo=[No,Ao],Ho={style:{height:"4px",background:"unset"}},Bo={class:"tr-line",style:{height:"24px",background:"unset"}},Do={key:4,class:"loading-box"},jo=Se({__name:"trade-history",setup(t){const c=ot(),u=w(()=>c),b=w(()=>u.value.currentExplorer),_=Pe(),S=w(()=>_),L=w(()=>S.value.limitOrderHistoryList);w(()=>S.value.orderHistoryObj);const M=Je(),s=w(()=>M),O=_t(),E=w(()=>O),a=w(()=>E.value.tokensObj);pe(()=>s.value.address,f=>{f&&_.getLimitOrderLogs()},{immediate:!0});const T=p(1),P=p(10),$=p([]),x=p([]),k=De("Sui"),I=w(()=>S.value.orderHistoryLoading),q=mt("Sui"),se=async()=>{const f=P.value*T.value-P.value;let J=T.value*P.value;J=J>L.value.length?L.value.length:J;const X=L.value;console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:174 ~ updateOrderList ~ result:",X),console.log("trade-card updateOrderList tokenObj",a.value);const A=[];if(X.length>0){const r=X.filter((z,C)=>C>=f&&C<J);for(let z=0;z<r.length;z++){const C=r[z];console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:188 ~ updateOrderList ~ order:",C,C.order_id);const U=a.value[bt(C.pay_coin,!1)]||await q.getTokenBySymbol({},bt(C.pay_coin,!1)),H=a.value[bt(C.target_coin,!1)]||await q.getTokenBySymbol({},bt(C.target_coin,!1)),v=$e(k.rateToPrice(C.rate,U.decimals,H.decimals).toString(),U.decimals);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:211 ~ updateOrderList ~ rate:",v);const R=new m(C.total_pay_amount).div(Math.pow(10,U.decimals)).toString(),N=new m(C.remaining_amount).div(Math.pow(10,U.decimals)).toString(),te=new m(R).sub(new m(N)).toString(),F=new m(C.total_pay_amount).mul(new m(Math.pow(10,18))).div(new m(C.rate)).ceil().div(new m(Math.pow(10,H.decimals))).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:226 ~ updateOrderList ~ order.rate:",C.rate);const le=$e(new m(1).div(new m(v)).toString()),ve=C.events.map(_e=>{const ne=_e.event_type.split("::")[2];let he="";return ne=="OrderPlacedEvent"?he=new m(_e.amount).div(Math.pow(10,U.decimals)).toString():ne=="FlashLoanEvent"?he=new m(_e.amount).div(Math.pow(10,H.decimals)).toString():ne=="OrderCanceledEvent"&&(he=new m(_e.amount).div(Math.pow(10,U.decimals)).toString()),{..._e,amount:he,type:ne}}).sort((_e,ne)=>ne.block_time-_e.block_time);A.push({...C,pay_coin_info:U,target_coin_info:H,total_pay_amount:R,rate:v,remaining_amount:N,transaction_ratio:Ye(new m(C.total_pay_amount).sub(new m(C.remaining_amount)).div(new m(C.total_pay_amount)).mul(100).toString(),2),transaction_volume:te,status:C.cancel_reason==0?"Completed":"Cancelled",events:ve,totalBuyNum:F,reseverRate:le,direction:!0})}$.value=A}x.value=X,_.setHistoryNum(X.length),console.log("allList",x.value),console.log("pageList",$.value)},ee=(f,J)=>{console.log(f,"page"),T.value=f};return pe(()=>[L.value,T.value,a.value,s.value.address],([f,J,X,A])=>{f&&f.length>0&&X&&!Be(X)&&A?se():($.value=[],x.value=[],_.setHistoryNum(0))},{immediate:!0}),pe(()=>s.value.address,f=>{f&&_.getLimitOrderHistory(f)},{immediate:!0}),(f,J)=>{const X=ta,A=vt;return i(),g("div",vo,[s.value&&s.value.address&&$.value&&$.value.length>0?(i(),g("table",_o,[mo,e("tbody",null,[(i(!0),g(ie,null,Te($.value,(r,z)=>{var C,U,H,v,R;return i(),g(ie,{key:r.id},[e("tr",{class:re(["order",z!==$.value.length-1?"order-border":""]),onClick:N=>l(ia)(r,z)},[e("td",null,[j(pt,{order:r},null,8,["order"])]),e("td",null,[e("div",go,[r.direction?(i(),g(ie,{key:1},[V(o(l(Y)(r==null?void 0:r.reseverRate))+" "+o((H=r==null?void 0:r.pay_coin_info)==null?void 0:H.symbol)+" per "+o((v=r==null?void 0:r.target_coin_info)==null?void 0:v.symbol),1)],64)):(i(),g(ie,{key:0},[V(o(l(Y)(r==null?void 0:r.rate))+" "+o((C=r==null?void 0:r.target_coin_info)==null?void 0:C.symbol)+" per "+o((U=r==null?void 0:r.pay_coin_info)==null?void 0:U.symbol),1)],64)),e("div",{class:"right",onClick:dt(N=>r.direction=!r.direction,["stop"])},bo,8,fo)])]),e("td",null,o(l(Ke)(r==null?void 0:r.expire_ts,""))+" (UTC)",1),e("td",null,[V(o(l(Y)(r==null?void 0:r.transaction_volume))+"/"+o(l(Y)(r==null?void 0:r.total_pay_amount))+" "+o((R=r==null?void 0:r.pay_coin_info)==null?void 0:R.symbol)+" ",1),e("span",null,"("+o(r==null?void 0:r.transaction_ratio)+"%)",1)]),e("td",null,[e("div",wo,[(i(),g("svg",{class:re(["order-status-icon",l(nt)(r.status).class]),"aria-hidden":"true"},[e("use",{"xlink:href":l(nt)(r.status).path},null,8,$o)],2)),e("span",{class:re(l(nt)(r.status).class)},o(r.status),3),(i(),g("svg",{class:re(["arrow-icon",l(Le)[z]?"open-arrow":""]),"aria-hidden":"true"},ko,2))])])],10,po),l(Le)[z]?(i(),g(ie,{key:0},[(i(!0),g(ie,null,Te(r.events,N=>{var te,F,le;return i(),g(ie,{key:N},[ge(e("tr",So,[e("td",null,[e("div",Oo,[(i(),g("svg",{class:re(["status-icon",l(qe)(N.type).class]),"aria-hidden":"true"},[e("use",{"xlink:href":l(qe)(N.type).path},null,8,Co)],2)),e("span",{class:re(["text-status",l(qe)(N.type).class])},o(l(qe)(N.type).text),3),N.type=="FlashLoanEvent"?(i(),g("span",Lo,"+"+o(l(Y)(N.amount))+" "+o((te=r==null?void 0:r.buy_coin_info)==null?void 0:te.symbol)+" "+o((F=r==null?void 0:r.target_coin_info)==null?void 0:F.symbol),1)):(i(),g("span",To,o(N.type=="OrderPlacedEvent"?"-":"+")+o(l(Y)(N.amount))+" "+o((le=r==null?void 0:r.pay_coin_info)==null?void 0:le.symbol),1))])]),Io,Mo,e("td",null,[e("span",Eo,o(l(Ke)(Number(N.block_time),""))+" (UTC)",1)]),e("td",null,[e("div",Ro,[e("a",{href:l(Rt)(b.value,"tx",N.tx),target:"_blank"},Uo,8,Po)])])],512),[[at,l(Le)[z]]]),ge(e("tr",Ho,null,512),[[at,l(Le)[z]]])],64)}),128)),ge(e("tr",Bo,null,512),[[at,l(Le)[z]]])],64)):Q("",!0)],64)}),128))])])):Q("",!0),s.value&&s.value.address&&$.value&&$.value.length>0?(i(),Z(co,{key:1,"page-list":$.value},null,8,["page-list"])):Q("",!0),$.value&&$.value.length==0&&!I.value?(i(),Z(Nt,{key:2,platform:"history"})):Q("",!0),$.value&&$.value.length>0?(i(),g("div",{key:3,class:re(["pagination",$.value&&$.value.length>0&&I.value?"loading-pagination":""])},[j(X,{current:T.value,"onUpdate:current":J[0]||(J[0]=r=>T.value=r),"page-size":P.value,simple:"",total:x.value&&x.value.length,onChange:ee},null,8,["current","page-size","total"])],2)):Q("",!0),$.value&&$.value.length==0&&I.value?(i(),g("div",Do,[j(A)])):Q("",!0),$.value&&$.value.length>0&&I.value?(i(),Z(A,{key:5,class:"order-spin"})):Q("",!0)])}}});const Fo=Oe(jo,[["__scopeId","data-v-1b1e082a"]]),zo={class:"trade-order"},Wo={class:"order-or-history"},Vo={class:"tab-list"},Yo=["onClick"],qo=Se({__name:"trade-record",setup(t){const c=p("orders"),u=[{id:"orders",name:"Open Orders"},{id:"history",name:"Order History"}],b=Je(),_=w(()=>b),S=Pe(),L=w(()=>S),M=w(()=>L.value.orderNum),s=w(()=>L.value.historyNum);return(O,E)=>(i(),g("div",zo,[e("div",Wo,[e("div",Vo,[(i(),g(ie,null,Te(u,a=>e("div",{key:a.id,class:re(["tab-item",c.value==a.id?"tab-item-active":""]),onClick:T=>c.value=a.id},[V(o(a.name)+" ",1),ge(e("div",{class:"tab-num"},o(c.value=="orders"?M.value:s.value),513),[[at,c.value==a.id&&_.value&&_.value.address]])],10,Yo)),64))]),c.value=="orders"&&_.value&&_.value.address&&M.value>0?(i(),g("div",{key:0,class:"clear-all",onClick:E[0]||(E[0]=a=>l(Pt)({},!0))},"Cancel All")):Q("",!0)]),c.value=="orders"?(i(),Z(En,{key:0})):(i(),Z(Fo,{key:1}))]))}});const vi=Oe(qo,[["__scopeId","data-v-745025d2"]]);export{ci as T,di as a,vi as b,sa as t,Pe as u};
