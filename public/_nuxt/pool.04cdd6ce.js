var pT=Object.defineProperty;var gT=(e,t,n)=>t in e?pT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var We=(e,t,n)=>(gT(e,typeof t!="symbol"?t+"":t,n),n);import{a6 as ff,ab as mT,ac as Hp,ad as Na,ae as _T,K as bT,a5 as vo,J as Tt,a7 as Mi,af as yT,m as xo,W as Ty}from"./entry.7427f084.js";import{D as ie}from"./decimal.0bdeb344.js";const e_=5,Kp=ff("wallet",{state:()=>({loading:!1,autoRefreshTime:e_,countdown:0,connected:!1,aptosConnected:!1,suiConnected:!1,address:"",aptosAddress:"",suiAddress:"",platform:"",isShowWalletModal:!1,walletName:"",aptosWalletName:"",suiWalletName:"",currentWallet:null,aptosCurrentWallet:null,suiCurrentWallet:null,walletIcon:"",aptosWalletIcon:"",suiWalletIcon:"",switchWallet:!1,assets:{},walletIconName:"",aptosWalletIconName:"",suiWalletIconName:"",walletNetwork:"",isShowWalletCard:"",accountObj:null}),actions:{setLoading(e){e&&(this.countdown=e_),this.loading=e,e||(this.countdown=0)},setCountdown(e){this.countdown=e},setWalletStatus(){this.connected=!0},setSwitchWallet(e){this.switchWallet=e},setIsShowWalletModal(e){this.isShowWalletModal=e},setWalletInfo(e,t){this.connected=e,this.platform=t},setCurrentWallet(e){e.wallet?(this.currentWallet=e.wallet,this.connected=e.isConnected,this.address=e.account,this.walletIcon=e.icon,this.walletName=e.wallet.name,e.platform==="Sui"?(this.suiCurrentWallet=e.wallet,this.suiConnected=e.isConnected,this.suiAddress=e.account,this.suiWalletIcon=e.icon,this.suiWalletName=e.wallet.name,this.walletName=e.walletName,this.accountObj=e.accountObj):(this.aptosCurrentWallet=e.wallet,this.aptosConnected=e.isConnected,this.aptosAddress=e.account,this.aptosWalletIcon=e.icon,this.aptosWalletName=e.wallet.name)):(this.currentWallet=null,this.connected=!1,this.address="",this.walletIcon="",this.walletName="",e.platform==="Sui"?(this.suiCurrentWallet=null,this.suiConnected=!1,this.suiAddress="",this.suiWalletIcon="",this.suiWalletName="",this.accountObj=null):(this.aptosCurrentWallet=null,this.aptosConnected=!1,this.aptosAddress="",this.aptosWalletIcon="",this.aptosWalletName=""))},setAssets(e){this.assets=e},setWalletIconName(e){this.walletIconName=e,localStorage.setItem("walletIconName",e)},setNetwork(e){this.walletNetwork=e,console.log(this.walletNetwork,"====>this.walletNetwork")},setIsShowWalletCard(e){this.isShowWalletCard=e}}});function Ay(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var dr={},wT={get exports(){return dr},set exports(e){dr=e}};const vT={},xT=Object.freeze(Object.defineProperty({__proto__:null,default:vT},Symbol.toStringTag,{value:"Module"})),Wp=mT(xT);(function(e){(function(t){var n=function(v){var B,I=new Float64Array(16);if(v)for(B=0;B<v.length;B++)I[B]=v[B];return I},i=function(){throw new Error("no PRNG")},s=new Uint8Array(16),r=new Uint8Array(32);r[0]=9;var o=n(),a=n([1]),c=n([56129,1]),d=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function m(v,B,I,g){v[B]=I>>24&255,v[B+1]=I>>16&255,v[B+2]=I>>8&255,v[B+3]=I&255,v[B+4]=g>>24&255,v[B+5]=g>>16&255,v[B+6]=g>>8&255,v[B+7]=g&255}function _(v,B,I,g,$){var ee,Z=0;for(ee=0;ee<$;ee++)Z|=v[B+ee]^I[g+ee];return(1&Z-1>>>8)-1}function x(v,B,I,g){return _(v,B,I,g,16)}function C(v,B,I,g){return _(v,B,I,g,32)}function k(v,B,I,g){for(var $=g[0]&255|(g[1]&255)<<8|(g[2]&255)<<16|(g[3]&255)<<24,ee=I[0]&255|(I[1]&255)<<8|(I[2]&255)<<16|(I[3]&255)<<24,Z=I[4]&255|(I[5]&255)<<8|(I[6]&255)<<16|(I[7]&255)<<24,oe=I[8]&255|(I[9]&255)<<8|(I[10]&255)<<16|(I[11]&255)<<24,Se=I[12]&255|(I[13]&255)<<8|(I[14]&255)<<16|(I[15]&255)<<24,Me=g[4]&255|(g[5]&255)<<8|(g[6]&255)<<16|(g[7]&255)<<24,Be=B[0]&255|(B[1]&255)<<8|(B[2]&255)<<16|(B[3]&255)<<24,Qt=B[4]&255|(B[5]&255)<<8|(B[6]&255)<<16|(B[7]&255)<<24,Xe=B[8]&255|(B[9]&255)<<8|(B[10]&255)<<16|(B[11]&255)<<24,bt=B[12]&255|(B[13]&255)<<8|(B[14]&255)<<16|(B[15]&255)<<24,wt=g[8]&255|(g[9]&255)<<8|(g[10]&255)<<16|(g[11]&255)<<24,Bt=I[16]&255|(I[17]&255)<<8|(I[18]&255)<<16|(I[19]&255)<<24,Pt=I[20]&255|(I[21]&255)<<8|(I[22]&255)<<16|(I[23]&255)<<24,vt=I[24]&255|(I[25]&255)<<8|(I[26]&255)<<16|(I[27]&255)<<24,St=I[28]&255|(I[29]&255)<<8|(I[30]&255)<<16|(I[31]&255)<<24,xt=g[12]&255|(g[13]&255)<<8|(g[14]&255)<<16|(g[15]&255)<<24,Ze=$,nt=ee,Ke=Z,Qe=oe,et=Se,Fe=Me,ae=Be,ce=Qt,Te=Xe,be=bt,ve=wt,Ce=Bt,_t=Pt,Lt=vt,Ht=St,Nt=xt,K,Xt=0;Xt<20;Xt+=2)K=Ze+_t|0,et^=K<<7|K>>>32-7,K=et+Ze|0,Te^=K<<9|K>>>32-9,K=Te+et|0,_t^=K<<13|K>>>32-13,K=_t+Te|0,Ze^=K<<18|K>>>32-18,K=Fe+nt|0,be^=K<<7|K>>>32-7,K=be+Fe|0,Lt^=K<<9|K>>>32-9,K=Lt+be|0,nt^=K<<13|K>>>32-13,K=nt+Lt|0,Fe^=K<<18|K>>>32-18,K=ve+ae|0,Ht^=K<<7|K>>>32-7,K=Ht+ve|0,Ke^=K<<9|K>>>32-9,K=Ke+Ht|0,ae^=K<<13|K>>>32-13,K=ae+Ke|0,ve^=K<<18|K>>>32-18,K=Nt+Ce|0,Qe^=K<<7|K>>>32-7,K=Qe+Nt|0,ce^=K<<9|K>>>32-9,K=ce+Qe|0,Ce^=K<<13|K>>>32-13,K=Ce+ce|0,Nt^=K<<18|K>>>32-18,K=Ze+Qe|0,nt^=K<<7|K>>>32-7,K=nt+Ze|0,Ke^=K<<9|K>>>32-9,K=Ke+nt|0,Qe^=K<<13|K>>>32-13,K=Qe+Ke|0,Ze^=K<<18|K>>>32-18,K=Fe+et|0,ae^=K<<7|K>>>32-7,K=ae+Fe|0,ce^=K<<9|K>>>32-9,K=ce+ae|0,et^=K<<13|K>>>32-13,K=et+ce|0,Fe^=K<<18|K>>>32-18,K=ve+be|0,Ce^=K<<7|K>>>32-7,K=Ce+ve|0,Te^=K<<9|K>>>32-9,K=Te+Ce|0,be^=K<<13|K>>>32-13,K=be+Te|0,ve^=K<<18|K>>>32-18,K=Nt+Ht|0,_t^=K<<7|K>>>32-7,K=_t+Nt|0,Lt^=K<<9|K>>>32-9,K=Lt+_t|0,Ht^=K<<13|K>>>32-13,K=Ht+Lt|0,Nt^=K<<18|K>>>32-18;Ze=Ze+$|0,nt=nt+ee|0,Ke=Ke+Z|0,Qe=Qe+oe|0,et=et+Se|0,Fe=Fe+Me|0,ae=ae+Be|0,ce=ce+Qt|0,Te=Te+Xe|0,be=be+bt|0,ve=ve+wt|0,Ce=Ce+Bt|0,_t=_t+Pt|0,Lt=Lt+vt|0,Ht=Ht+St|0,Nt=Nt+xt|0,v[0]=Ze>>>0&255,v[1]=Ze>>>8&255,v[2]=Ze>>>16&255,v[3]=Ze>>>24&255,v[4]=nt>>>0&255,v[5]=nt>>>8&255,v[6]=nt>>>16&255,v[7]=nt>>>24&255,v[8]=Ke>>>0&255,v[9]=Ke>>>8&255,v[10]=Ke>>>16&255,v[11]=Ke>>>24&255,v[12]=Qe>>>0&255,v[13]=Qe>>>8&255,v[14]=Qe>>>16&255,v[15]=Qe>>>24&255,v[16]=et>>>0&255,v[17]=et>>>8&255,v[18]=et>>>16&255,v[19]=et>>>24&255,v[20]=Fe>>>0&255,v[21]=Fe>>>8&255,v[22]=Fe>>>16&255,v[23]=Fe>>>24&255,v[24]=ae>>>0&255,v[25]=ae>>>8&255,v[26]=ae>>>16&255,v[27]=ae>>>24&255,v[28]=ce>>>0&255,v[29]=ce>>>8&255,v[30]=ce>>>16&255,v[31]=ce>>>24&255,v[32]=Te>>>0&255,v[33]=Te>>>8&255,v[34]=Te>>>16&255,v[35]=Te>>>24&255,v[36]=be>>>0&255,v[37]=be>>>8&255,v[38]=be>>>16&255,v[39]=be>>>24&255,v[40]=ve>>>0&255,v[41]=ve>>>8&255,v[42]=ve>>>16&255,v[43]=ve>>>24&255,v[44]=Ce>>>0&255,v[45]=Ce>>>8&255,v[46]=Ce>>>16&255,v[47]=Ce>>>24&255,v[48]=_t>>>0&255,v[49]=_t>>>8&255,v[50]=_t>>>16&255,v[51]=_t>>>24&255,v[52]=Lt>>>0&255,v[53]=Lt>>>8&255,v[54]=Lt>>>16&255,v[55]=Lt>>>24&255,v[56]=Ht>>>0&255,v[57]=Ht>>>8&255,v[58]=Ht>>>16&255,v[59]=Ht>>>24&255,v[60]=Nt>>>0&255,v[61]=Nt>>>8&255,v[62]=Nt>>>16&255,v[63]=Nt>>>24&255}function T(v,B,I,g){for(var $=g[0]&255|(g[1]&255)<<8|(g[2]&255)<<16|(g[3]&255)<<24,ee=I[0]&255|(I[1]&255)<<8|(I[2]&255)<<16|(I[3]&255)<<24,Z=I[4]&255|(I[5]&255)<<8|(I[6]&255)<<16|(I[7]&255)<<24,oe=I[8]&255|(I[9]&255)<<8|(I[10]&255)<<16|(I[11]&255)<<24,Se=I[12]&255|(I[13]&255)<<8|(I[14]&255)<<16|(I[15]&255)<<24,Me=g[4]&255|(g[5]&255)<<8|(g[6]&255)<<16|(g[7]&255)<<24,Be=B[0]&255|(B[1]&255)<<8|(B[2]&255)<<16|(B[3]&255)<<24,Qt=B[4]&255|(B[5]&255)<<8|(B[6]&255)<<16|(B[7]&255)<<24,Xe=B[8]&255|(B[9]&255)<<8|(B[10]&255)<<16|(B[11]&255)<<24,bt=B[12]&255|(B[13]&255)<<8|(B[14]&255)<<16|(B[15]&255)<<24,wt=g[8]&255|(g[9]&255)<<8|(g[10]&255)<<16|(g[11]&255)<<24,Bt=I[16]&255|(I[17]&255)<<8|(I[18]&255)<<16|(I[19]&255)<<24,Pt=I[20]&255|(I[21]&255)<<8|(I[22]&255)<<16|(I[23]&255)<<24,vt=I[24]&255|(I[25]&255)<<8|(I[26]&255)<<16|(I[27]&255)<<24,St=I[28]&255|(I[29]&255)<<8|(I[30]&255)<<16|(I[31]&255)<<24,xt=g[12]&255|(g[13]&255)<<8|(g[14]&255)<<16|(g[15]&255)<<24,Ze=$,nt=ee,Ke=Z,Qe=oe,et=Se,Fe=Me,ae=Be,ce=Qt,Te=Xe,be=bt,ve=wt,Ce=Bt,_t=Pt,Lt=vt,Ht=St,Nt=xt,K,Xt=0;Xt<20;Xt+=2)K=Ze+_t|0,et^=K<<7|K>>>32-7,K=et+Ze|0,Te^=K<<9|K>>>32-9,K=Te+et|0,_t^=K<<13|K>>>32-13,K=_t+Te|0,Ze^=K<<18|K>>>32-18,K=Fe+nt|0,be^=K<<7|K>>>32-7,K=be+Fe|0,Lt^=K<<9|K>>>32-9,K=Lt+be|0,nt^=K<<13|K>>>32-13,K=nt+Lt|0,Fe^=K<<18|K>>>32-18,K=ve+ae|0,Ht^=K<<7|K>>>32-7,K=Ht+ve|0,Ke^=K<<9|K>>>32-9,K=Ke+Ht|0,ae^=K<<13|K>>>32-13,K=ae+Ke|0,ve^=K<<18|K>>>32-18,K=Nt+Ce|0,Qe^=K<<7|K>>>32-7,K=Qe+Nt|0,ce^=K<<9|K>>>32-9,K=ce+Qe|0,Ce^=K<<13|K>>>32-13,K=Ce+ce|0,Nt^=K<<18|K>>>32-18,K=Ze+Qe|0,nt^=K<<7|K>>>32-7,K=nt+Ze|0,Ke^=K<<9|K>>>32-9,K=Ke+nt|0,Qe^=K<<13|K>>>32-13,K=Qe+Ke|0,Ze^=K<<18|K>>>32-18,K=Fe+et|0,ae^=K<<7|K>>>32-7,K=ae+Fe|0,ce^=K<<9|K>>>32-9,K=ce+ae|0,et^=K<<13|K>>>32-13,K=et+ce|0,Fe^=K<<18|K>>>32-18,K=ve+be|0,Ce^=K<<7|K>>>32-7,K=Ce+ve|0,Te^=K<<9|K>>>32-9,K=Te+Ce|0,be^=K<<13|K>>>32-13,K=be+Te|0,ve^=K<<18|K>>>32-18,K=Nt+Ht|0,_t^=K<<7|K>>>32-7,K=_t+Nt|0,Lt^=K<<9|K>>>32-9,K=Lt+_t|0,Ht^=K<<13|K>>>32-13,K=Ht+Lt|0,Nt^=K<<18|K>>>32-18;v[0]=Ze>>>0&255,v[1]=Ze>>>8&255,v[2]=Ze>>>16&255,v[3]=Ze>>>24&255,v[4]=Fe>>>0&255,v[5]=Fe>>>8&255,v[6]=Fe>>>16&255,v[7]=Fe>>>24&255,v[8]=ve>>>0&255,v[9]=ve>>>8&255,v[10]=ve>>>16&255,v[11]=ve>>>24&255,v[12]=Nt>>>0&255,v[13]=Nt>>>8&255,v[14]=Nt>>>16&255,v[15]=Nt>>>24&255,v[16]=ae>>>0&255,v[17]=ae>>>8&255,v[18]=ae>>>16&255,v[19]=ae>>>24&255,v[20]=ce>>>0&255,v[21]=ce>>>8&255,v[22]=ce>>>16&255,v[23]=ce>>>24&255,v[24]=Te>>>0&255,v[25]=Te>>>8&255,v[26]=Te>>>16&255,v[27]=Te>>>24&255,v[28]=be>>>0&255,v[29]=be>>>8&255,v[30]=be>>>16&255,v[31]=be>>>24&255}function S(v,B,I,g){k(v,B,I,g)}function P(v,B,I,g){T(v,B,I,g)}var z=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function X(v,B,I,g,$,ee,Z){var oe=new Uint8Array(16),Se=new Uint8Array(64),Me,Be;for(Be=0;Be<16;Be++)oe[Be]=0;for(Be=0;Be<8;Be++)oe[Be]=ee[Be];for(;$>=64;){for(S(Se,oe,Z,z),Be=0;Be<64;Be++)v[B+Be]=I[g+Be]^Se[Be];for(Me=1,Be=8;Be<16;Be++)Me=Me+(oe[Be]&255)|0,oe[Be]=Me&255,Me>>>=8;$-=64,B+=64,g+=64}if($>0)for(S(Se,oe,Z,z),Be=0;Be<$;Be++)v[B+Be]=I[g+Be]^Se[Be];return 0}function G(v,B,I,g,$){var ee=new Uint8Array(16),Z=new Uint8Array(64),oe,Se;for(Se=0;Se<16;Se++)ee[Se]=0;for(Se=0;Se<8;Se++)ee[Se]=g[Se];for(;I>=64;){for(S(Z,ee,$,z),Se=0;Se<64;Se++)v[B+Se]=Z[Se];for(oe=1,Se=8;Se<16;Se++)oe=oe+(ee[Se]&255)|0,ee[Se]=oe&255,oe>>>=8;I-=64,B+=64}if(I>0)for(S(Z,ee,$,z),Se=0;Se<I;Se++)v[B+Se]=Z[Se];return 0}function te(v,B,I,g,$){var ee=new Uint8Array(32);P(ee,g,$,z);for(var Z=new Uint8Array(8),oe=0;oe<8;oe++)Z[oe]=g[oe+16];return G(v,B,I,Z,ee)}function N(v,B,I,g,$,ee,Z){var oe=new Uint8Array(32);P(oe,ee,Z,z);for(var Se=new Uint8Array(8),Me=0;Me<8;Me++)Se[Me]=ee[Me+16];return X(v,B,I,g,$,Se,oe)}var R=function(v){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var B,I,g,$,ee,Z,oe,Se;B=v[0]&255|(v[1]&255)<<8,this.r[0]=B&8191,I=v[2]&255|(v[3]&255)<<8,this.r[1]=(B>>>13|I<<3)&8191,g=v[4]&255|(v[5]&255)<<8,this.r[2]=(I>>>10|g<<6)&7939,$=v[6]&255|(v[7]&255)<<8,this.r[3]=(g>>>7|$<<9)&8191,ee=v[8]&255|(v[9]&255)<<8,this.r[4]=($>>>4|ee<<12)&255,this.r[5]=ee>>>1&8190,Z=v[10]&255|(v[11]&255)<<8,this.r[6]=(ee>>>14|Z<<2)&8191,oe=v[12]&255|(v[13]&255)<<8,this.r[7]=(Z>>>11|oe<<5)&8065,Se=v[14]&255|(v[15]&255)<<8,this.r[8]=(oe>>>8|Se<<8)&8191,this.r[9]=Se>>>5&127,this.pad[0]=v[16]&255|(v[17]&255)<<8,this.pad[1]=v[18]&255|(v[19]&255)<<8,this.pad[2]=v[20]&255|(v[21]&255)<<8,this.pad[3]=v[22]&255|(v[23]&255)<<8,this.pad[4]=v[24]&255|(v[25]&255)<<8,this.pad[5]=v[26]&255|(v[27]&255)<<8,this.pad[6]=v[28]&255|(v[29]&255)<<8,this.pad[7]=v[30]&255|(v[31]&255)<<8};R.prototype.blocks=function(v,B,I){for(var g=this.fin?0:2048,$,ee,Z,oe,Se,Me,Be,Qt,Xe,bt,wt,Bt,Pt,vt,St,xt,Ze,nt,Ke,Qe=this.h[0],et=this.h[1],Fe=this.h[2],ae=this.h[3],ce=this.h[4],Te=this.h[5],be=this.h[6],ve=this.h[7],Ce=this.h[8],_t=this.h[9],Lt=this.r[0],Ht=this.r[1],Nt=this.r[2],K=this.r[3],Xt=this.r[4],ln=this.r[5],fn=this.r[6],Kt=this.r[7],sn=this.r[8],rn=this.r[9];I>=16;)$=v[B+0]&255|(v[B+1]&255)<<8,Qe+=$&8191,ee=v[B+2]&255|(v[B+3]&255)<<8,et+=($>>>13|ee<<3)&8191,Z=v[B+4]&255|(v[B+5]&255)<<8,Fe+=(ee>>>10|Z<<6)&8191,oe=v[B+6]&255|(v[B+7]&255)<<8,ae+=(Z>>>7|oe<<9)&8191,Se=v[B+8]&255|(v[B+9]&255)<<8,ce+=(oe>>>4|Se<<12)&8191,Te+=Se>>>1&8191,Me=v[B+10]&255|(v[B+11]&255)<<8,be+=(Se>>>14|Me<<2)&8191,Be=v[B+12]&255|(v[B+13]&255)<<8,ve+=(Me>>>11|Be<<5)&8191,Qt=v[B+14]&255|(v[B+15]&255)<<8,Ce+=(Be>>>8|Qt<<8)&8191,_t+=Qt>>>5|g,Xe=0,bt=Xe,bt+=Qe*Lt,bt+=et*(5*rn),bt+=Fe*(5*sn),bt+=ae*(5*Kt),bt+=ce*(5*fn),Xe=bt>>>13,bt&=8191,bt+=Te*(5*ln),bt+=be*(5*Xt),bt+=ve*(5*K),bt+=Ce*(5*Nt),bt+=_t*(5*Ht),Xe+=bt>>>13,bt&=8191,wt=Xe,wt+=Qe*Ht,wt+=et*Lt,wt+=Fe*(5*rn),wt+=ae*(5*sn),wt+=ce*(5*Kt),Xe=wt>>>13,wt&=8191,wt+=Te*(5*fn),wt+=be*(5*ln),wt+=ve*(5*Xt),wt+=Ce*(5*K),wt+=_t*(5*Nt),Xe+=wt>>>13,wt&=8191,Bt=Xe,Bt+=Qe*Nt,Bt+=et*Ht,Bt+=Fe*Lt,Bt+=ae*(5*rn),Bt+=ce*(5*sn),Xe=Bt>>>13,Bt&=8191,Bt+=Te*(5*Kt),Bt+=be*(5*fn),Bt+=ve*(5*ln),Bt+=Ce*(5*Xt),Bt+=_t*(5*K),Xe+=Bt>>>13,Bt&=8191,Pt=Xe,Pt+=Qe*K,Pt+=et*Nt,Pt+=Fe*Ht,Pt+=ae*Lt,Pt+=ce*(5*rn),Xe=Pt>>>13,Pt&=8191,Pt+=Te*(5*sn),Pt+=be*(5*Kt),Pt+=ve*(5*fn),Pt+=Ce*(5*ln),Pt+=_t*(5*Xt),Xe+=Pt>>>13,Pt&=8191,vt=Xe,vt+=Qe*Xt,vt+=et*K,vt+=Fe*Nt,vt+=ae*Ht,vt+=ce*Lt,Xe=vt>>>13,vt&=8191,vt+=Te*(5*rn),vt+=be*(5*sn),vt+=ve*(5*Kt),vt+=Ce*(5*fn),vt+=_t*(5*ln),Xe+=vt>>>13,vt&=8191,St=Xe,St+=Qe*ln,St+=et*Xt,St+=Fe*K,St+=ae*Nt,St+=ce*Ht,Xe=St>>>13,St&=8191,St+=Te*Lt,St+=be*(5*rn),St+=ve*(5*sn),St+=Ce*(5*Kt),St+=_t*(5*fn),Xe+=St>>>13,St&=8191,xt=Xe,xt+=Qe*fn,xt+=et*ln,xt+=Fe*Xt,xt+=ae*K,xt+=ce*Nt,Xe=xt>>>13,xt&=8191,xt+=Te*Ht,xt+=be*Lt,xt+=ve*(5*rn),xt+=Ce*(5*sn),xt+=_t*(5*Kt),Xe+=xt>>>13,xt&=8191,Ze=Xe,Ze+=Qe*Kt,Ze+=et*fn,Ze+=Fe*ln,Ze+=ae*Xt,Ze+=ce*K,Xe=Ze>>>13,Ze&=8191,Ze+=Te*Nt,Ze+=be*Ht,Ze+=ve*Lt,Ze+=Ce*(5*rn),Ze+=_t*(5*sn),Xe+=Ze>>>13,Ze&=8191,nt=Xe,nt+=Qe*sn,nt+=et*Kt,nt+=Fe*fn,nt+=ae*ln,nt+=ce*Xt,Xe=nt>>>13,nt&=8191,nt+=Te*K,nt+=be*Nt,nt+=ve*Ht,nt+=Ce*Lt,nt+=_t*(5*rn),Xe+=nt>>>13,nt&=8191,Ke=Xe,Ke+=Qe*rn,Ke+=et*sn,Ke+=Fe*Kt,Ke+=ae*fn,Ke+=ce*ln,Xe=Ke>>>13,Ke&=8191,Ke+=Te*Xt,Ke+=be*K,Ke+=ve*Nt,Ke+=Ce*Ht,Ke+=_t*Lt,Xe+=Ke>>>13,Ke&=8191,Xe=(Xe<<2)+Xe|0,Xe=Xe+bt|0,bt=Xe&8191,Xe=Xe>>>13,wt+=Xe,Qe=bt,et=wt,Fe=Bt,ae=Pt,ce=vt,Te=St,be=xt,ve=Ze,Ce=nt,_t=Ke,B+=16,I-=16;this.h[0]=Qe,this.h[1]=et,this.h[2]=Fe,this.h[3]=ae,this.h[4]=ce,this.h[5]=Te,this.h[6]=be,this.h[7]=ve,this.h[8]=Ce,this.h[9]=_t},R.prototype.finish=function(v,B){var I=new Uint16Array(10),g,$,ee,Z;if(this.leftover){for(Z=this.leftover,this.buffer[Z++]=1;Z<16;Z++)this.buffer[Z]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(g=this.h[1]>>>13,this.h[1]&=8191,Z=2;Z<10;Z++)this.h[Z]+=g,g=this.h[Z]>>>13,this.h[Z]&=8191;for(this.h[0]+=g*5,g=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=g,g=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=g,I[0]=this.h[0]+5,g=I[0]>>>13,I[0]&=8191,Z=1;Z<10;Z++)I[Z]=this.h[Z]+g,g=I[Z]>>>13,I[Z]&=8191;for(I[9]-=8192,$=(g^1)-1,Z=0;Z<10;Z++)I[Z]&=$;for($=~$,Z=0;Z<10;Z++)this.h[Z]=this.h[Z]&$|I[Z];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,ee=this.h[0]+this.pad[0],this.h[0]=ee&65535,Z=1;Z<8;Z++)ee=(this.h[Z]+this.pad[Z]|0)+(ee>>>16)|0,this.h[Z]=ee&65535;v[B+0]=this.h[0]>>>0&255,v[B+1]=this.h[0]>>>8&255,v[B+2]=this.h[1]>>>0&255,v[B+3]=this.h[1]>>>8&255,v[B+4]=this.h[2]>>>0&255,v[B+5]=this.h[2]>>>8&255,v[B+6]=this.h[3]>>>0&255,v[B+7]=this.h[3]>>>8&255,v[B+8]=this.h[4]>>>0&255,v[B+9]=this.h[4]>>>8&255,v[B+10]=this.h[5]>>>0&255,v[B+11]=this.h[5]>>>8&255,v[B+12]=this.h[6]>>>0&255,v[B+13]=this.h[6]>>>8&255,v[B+14]=this.h[7]>>>0&255,v[B+15]=this.h[7]>>>8&255},R.prototype.update=function(v,B,I){var g,$;if(this.leftover){for($=16-this.leftover,$>I&&($=I),g=0;g<$;g++)this.buffer[this.leftover+g]=v[B+g];if(I-=$,B+=$,this.leftover+=$,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(I>=16&&($=I-I%16,this.blocks(v,B,$),B+=$,I-=$),I){for(g=0;g<I;g++)this.buffer[this.leftover+g]=v[B+g];this.leftover+=I}};function M(v,B,I,g,$,ee){var Z=new R(ee);return Z.update(I,g,$),Z.finish(v,B),0}function A(v,B,I,g,$,ee){var Z=new Uint8Array(16);return M(Z,0,I,g,$,ee),x(v,B,Z,0)}function h(v,B,I,g,$){var ee;if(I<32)return-1;for(N(v,0,B,0,I,g,$),M(v,16,v,32,I-32,v),ee=0;ee<16;ee++)v[ee]=0;return 0}function y(v,B,I,g,$){var ee,Z=new Uint8Array(32);if(I<32||(te(Z,0,32,g,$),A(B,16,B,32,I-32,Z)!==0))return-1;for(N(v,0,B,0,I,g,$),ee=0;ee<32;ee++)v[ee]=0;return 0}function E(v,B){var I;for(I=0;I<16;I++)v[I]=B[I]|0}function U(v){var B,I,g=1;for(B=0;B<16;B++)I=v[B]+g+65535,g=Math.floor(I/65536),v[B]=I-g*65536;v[0]+=g-1+37*(g-1)}function L(v,B,I){for(var g,$=~(I-1),ee=0;ee<16;ee++)g=$&(v[ee]^B[ee]),v[ee]^=g,B[ee]^=g}function H(v,B){var I,g,$,ee=n(),Z=n();for(I=0;I<16;I++)Z[I]=B[I];for(U(Z),U(Z),U(Z),g=0;g<2;g++){for(ee[0]=Z[0]-65517,I=1;I<15;I++)ee[I]=Z[I]-65535-(ee[I-1]>>16&1),ee[I-1]&=65535;ee[15]=Z[15]-32767-(ee[14]>>16&1),$=ee[15]>>16&1,ee[14]&=65535,L(Z,ee,1-$)}for(I=0;I<16;I++)v[2*I]=Z[I]&255,v[2*I+1]=Z[I]>>8}function Q(v,B){var I=new Uint8Array(32),g=new Uint8Array(32);return H(I,v),H(g,B),C(I,0,g,0)}function O(v){var B=new Uint8Array(32);return H(B,v),B[0]&1}function b(v,B){var I;for(I=0;I<16;I++)v[I]=B[2*I]+(B[2*I+1]<<8);v[15]&=32767}function j(v,B,I){for(var g=0;g<16;g++)v[g]=B[g]+I[g]}function Ae(v,B,I){for(var g=0;g<16;g++)v[g]=B[g]-I[g]}function ue(v,B,I){var g,$,ee=0,Z=0,oe=0,Se=0,Me=0,Be=0,Qt=0,Xe=0,bt=0,wt=0,Bt=0,Pt=0,vt=0,St=0,xt=0,Ze=0,nt=0,Ke=0,Qe=0,et=0,Fe=0,ae=0,ce=0,Te=0,be=0,ve=0,Ce=0,_t=0,Lt=0,Ht=0,Nt=0,K=I[0],Xt=I[1],ln=I[2],fn=I[3],Kt=I[4],sn=I[5],rn=I[6],Gn=I[7],xn=I[8],Ln=I[9],Nn=I[10],Fn=I[11],Qn=I[12],Ei=I[13],Pi=I[14],Ci=I[15];g=B[0],ee+=g*K,Z+=g*Xt,oe+=g*ln,Se+=g*fn,Me+=g*Kt,Be+=g*sn,Qt+=g*rn,Xe+=g*Gn,bt+=g*xn,wt+=g*Ln,Bt+=g*Nn,Pt+=g*Fn,vt+=g*Qn,St+=g*Ei,xt+=g*Pi,Ze+=g*Ci,g=B[1],Z+=g*K,oe+=g*Xt,Se+=g*ln,Me+=g*fn,Be+=g*Kt,Qt+=g*sn,Xe+=g*rn,bt+=g*Gn,wt+=g*xn,Bt+=g*Ln,Pt+=g*Nn,vt+=g*Fn,St+=g*Qn,xt+=g*Ei,Ze+=g*Pi,nt+=g*Ci,g=B[2],oe+=g*K,Se+=g*Xt,Me+=g*ln,Be+=g*fn,Qt+=g*Kt,Xe+=g*sn,bt+=g*rn,wt+=g*Gn,Bt+=g*xn,Pt+=g*Ln,vt+=g*Nn,St+=g*Fn,xt+=g*Qn,Ze+=g*Ei,nt+=g*Pi,Ke+=g*Ci,g=B[3],Se+=g*K,Me+=g*Xt,Be+=g*ln,Qt+=g*fn,Xe+=g*Kt,bt+=g*sn,wt+=g*rn,Bt+=g*Gn,Pt+=g*xn,vt+=g*Ln,St+=g*Nn,xt+=g*Fn,Ze+=g*Qn,nt+=g*Ei,Ke+=g*Pi,Qe+=g*Ci,g=B[4],Me+=g*K,Be+=g*Xt,Qt+=g*ln,Xe+=g*fn,bt+=g*Kt,wt+=g*sn,Bt+=g*rn,Pt+=g*Gn,vt+=g*xn,St+=g*Ln,xt+=g*Nn,Ze+=g*Fn,nt+=g*Qn,Ke+=g*Ei,Qe+=g*Pi,et+=g*Ci,g=B[5],Be+=g*K,Qt+=g*Xt,Xe+=g*ln,bt+=g*fn,wt+=g*Kt,Bt+=g*sn,Pt+=g*rn,vt+=g*Gn,St+=g*xn,xt+=g*Ln,Ze+=g*Nn,nt+=g*Fn,Ke+=g*Qn,Qe+=g*Ei,et+=g*Pi,Fe+=g*Ci,g=B[6],Qt+=g*K,Xe+=g*Xt,bt+=g*ln,wt+=g*fn,Bt+=g*Kt,Pt+=g*sn,vt+=g*rn,St+=g*Gn,xt+=g*xn,Ze+=g*Ln,nt+=g*Nn,Ke+=g*Fn,Qe+=g*Qn,et+=g*Ei,Fe+=g*Pi,ae+=g*Ci,g=B[7],Xe+=g*K,bt+=g*Xt,wt+=g*ln,Bt+=g*fn,Pt+=g*Kt,vt+=g*sn,St+=g*rn,xt+=g*Gn,Ze+=g*xn,nt+=g*Ln,Ke+=g*Nn,Qe+=g*Fn,et+=g*Qn,Fe+=g*Ei,ae+=g*Pi,ce+=g*Ci,g=B[8],bt+=g*K,wt+=g*Xt,Bt+=g*ln,Pt+=g*fn,vt+=g*Kt,St+=g*sn,xt+=g*rn,Ze+=g*Gn,nt+=g*xn,Ke+=g*Ln,Qe+=g*Nn,et+=g*Fn,Fe+=g*Qn,ae+=g*Ei,ce+=g*Pi,Te+=g*Ci,g=B[9],wt+=g*K,Bt+=g*Xt,Pt+=g*ln,vt+=g*fn,St+=g*Kt,xt+=g*sn,Ze+=g*rn,nt+=g*Gn,Ke+=g*xn,Qe+=g*Ln,et+=g*Nn,Fe+=g*Fn,ae+=g*Qn,ce+=g*Ei,Te+=g*Pi,be+=g*Ci,g=B[10],Bt+=g*K,Pt+=g*Xt,vt+=g*ln,St+=g*fn,xt+=g*Kt,Ze+=g*sn,nt+=g*rn,Ke+=g*Gn,Qe+=g*xn,et+=g*Ln,Fe+=g*Nn,ae+=g*Fn,ce+=g*Qn,Te+=g*Ei,be+=g*Pi,ve+=g*Ci,g=B[11],Pt+=g*K,vt+=g*Xt,St+=g*ln,xt+=g*fn,Ze+=g*Kt,nt+=g*sn,Ke+=g*rn,Qe+=g*Gn,et+=g*xn,Fe+=g*Ln,ae+=g*Nn,ce+=g*Fn,Te+=g*Qn,be+=g*Ei,ve+=g*Pi,Ce+=g*Ci,g=B[12],vt+=g*K,St+=g*Xt,xt+=g*ln,Ze+=g*fn,nt+=g*Kt,Ke+=g*sn,Qe+=g*rn,et+=g*Gn,Fe+=g*xn,ae+=g*Ln,ce+=g*Nn,Te+=g*Fn,be+=g*Qn,ve+=g*Ei,Ce+=g*Pi,_t+=g*Ci,g=B[13],St+=g*K,xt+=g*Xt,Ze+=g*ln,nt+=g*fn,Ke+=g*Kt,Qe+=g*sn,et+=g*rn,Fe+=g*Gn,ae+=g*xn,ce+=g*Ln,Te+=g*Nn,be+=g*Fn,ve+=g*Qn,Ce+=g*Ei,_t+=g*Pi,Lt+=g*Ci,g=B[14],xt+=g*K,Ze+=g*Xt,nt+=g*ln,Ke+=g*fn,Qe+=g*Kt,et+=g*sn,Fe+=g*rn,ae+=g*Gn,ce+=g*xn,Te+=g*Ln,be+=g*Nn,ve+=g*Fn,Ce+=g*Qn,_t+=g*Ei,Lt+=g*Pi,Ht+=g*Ci,g=B[15],Ze+=g*K,nt+=g*Xt,Ke+=g*ln,Qe+=g*fn,et+=g*Kt,Fe+=g*sn,ae+=g*rn,ce+=g*Gn,Te+=g*xn,be+=g*Ln,ve+=g*Nn,Ce+=g*Fn,_t+=g*Qn,Lt+=g*Ei,Ht+=g*Pi,Nt+=g*Ci,ee+=38*nt,Z+=38*Ke,oe+=38*Qe,Se+=38*et,Me+=38*Fe,Be+=38*ae,Qt+=38*ce,Xe+=38*Te,bt+=38*be,wt+=38*ve,Bt+=38*Ce,Pt+=38*_t,vt+=38*Lt,St+=38*Ht,xt+=38*Nt,$=1,g=ee+$+65535,$=Math.floor(g/65536),ee=g-$*65536,g=Z+$+65535,$=Math.floor(g/65536),Z=g-$*65536,g=oe+$+65535,$=Math.floor(g/65536),oe=g-$*65536,g=Se+$+65535,$=Math.floor(g/65536),Se=g-$*65536,g=Me+$+65535,$=Math.floor(g/65536),Me=g-$*65536,g=Be+$+65535,$=Math.floor(g/65536),Be=g-$*65536,g=Qt+$+65535,$=Math.floor(g/65536),Qt=g-$*65536,g=Xe+$+65535,$=Math.floor(g/65536),Xe=g-$*65536,g=bt+$+65535,$=Math.floor(g/65536),bt=g-$*65536,g=wt+$+65535,$=Math.floor(g/65536),wt=g-$*65536,g=Bt+$+65535,$=Math.floor(g/65536),Bt=g-$*65536,g=Pt+$+65535,$=Math.floor(g/65536),Pt=g-$*65536,g=vt+$+65535,$=Math.floor(g/65536),vt=g-$*65536,g=St+$+65535,$=Math.floor(g/65536),St=g-$*65536,g=xt+$+65535,$=Math.floor(g/65536),xt=g-$*65536,g=Ze+$+65535,$=Math.floor(g/65536),Ze=g-$*65536,ee+=$-1+37*($-1),$=1,g=ee+$+65535,$=Math.floor(g/65536),ee=g-$*65536,g=Z+$+65535,$=Math.floor(g/65536),Z=g-$*65536,g=oe+$+65535,$=Math.floor(g/65536),oe=g-$*65536,g=Se+$+65535,$=Math.floor(g/65536),Se=g-$*65536,g=Me+$+65535,$=Math.floor(g/65536),Me=g-$*65536,g=Be+$+65535,$=Math.floor(g/65536),Be=g-$*65536,g=Qt+$+65535,$=Math.floor(g/65536),Qt=g-$*65536,g=Xe+$+65535,$=Math.floor(g/65536),Xe=g-$*65536,g=bt+$+65535,$=Math.floor(g/65536),bt=g-$*65536,g=wt+$+65535,$=Math.floor(g/65536),wt=g-$*65536,g=Bt+$+65535,$=Math.floor(g/65536),Bt=g-$*65536,g=Pt+$+65535,$=Math.floor(g/65536),Pt=g-$*65536,g=vt+$+65535,$=Math.floor(g/65536),vt=g-$*65536,g=St+$+65535,$=Math.floor(g/65536),St=g-$*65536,g=xt+$+65535,$=Math.floor(g/65536),xt=g-$*65536,g=Ze+$+65535,$=Math.floor(g/65536),Ze=g-$*65536,ee+=$-1+37*($-1),v[0]=ee,v[1]=Z,v[2]=oe,v[3]=Se,v[4]=Me,v[5]=Be,v[6]=Qt,v[7]=Xe,v[8]=bt,v[9]=wt,v[10]=Bt,v[11]=Pt,v[12]=vt,v[13]=St,v[14]=xt,v[15]=Ze}function ke(v,B){ue(v,B,B)}function mt(v,B){var I=n(),g;for(g=0;g<16;g++)I[g]=B[g];for(g=253;g>=0;g--)ke(I,I),g!==2&&g!==4&&ue(I,I,B);for(g=0;g<16;g++)v[g]=I[g]}function st(v,B){var I=n(),g;for(g=0;g<16;g++)I[g]=B[g];for(g=250;g>=0;g--)ke(I,I),g!==1&&ue(I,I,B);for(g=0;g<16;g++)v[g]=I[g]}function kt(v,B,I){var g=new Uint8Array(32),$=new Float64Array(80),ee,Z,oe=n(),Se=n(),Me=n(),Be=n(),Qt=n(),Xe=n();for(Z=0;Z<31;Z++)g[Z]=B[Z];for(g[31]=B[31]&127|64,g[0]&=248,b($,I),Z=0;Z<16;Z++)Se[Z]=$[Z],Be[Z]=oe[Z]=Me[Z]=0;for(oe[0]=Be[0]=1,Z=254;Z>=0;--Z)ee=g[Z>>>3]>>>(Z&7)&1,L(oe,Se,ee),L(Me,Be,ee),j(Qt,oe,Me),Ae(oe,oe,Me),j(Me,Se,Be),Ae(Se,Se,Be),ke(Be,Qt),ke(Xe,oe),ue(oe,Me,oe),ue(Me,Se,Qt),j(Qt,oe,Me),Ae(oe,oe,Me),ke(Se,oe),Ae(Me,Be,Xe),ue(oe,Me,c),j(oe,oe,Be),ue(Me,Me,oe),ue(oe,Be,Xe),ue(Be,Se,$),ke(Se,Qt),L(oe,Se,ee),L(Me,Be,ee);for(Z=0;Z<16;Z++)$[Z+16]=oe[Z],$[Z+32]=Me[Z],$[Z+48]=Se[Z],$[Z+64]=Be[Z];var bt=$.subarray(32),wt=$.subarray(16);return mt(bt,bt),ue(wt,wt,bt),H(v,wt),0}function ut(v,B){return kt(v,B,r)}function ft(v,B){return i(B,32),ut(v,B)}function Et(v,B,I){var g=new Uint8Array(32);return kt(g,I,B),P(v,s,g,z)}var pi=h,se=y;function fe(v,B,I,g,$,ee){var Z=new Uint8Array(32);return Et(Z,$,ee),pi(v,B,I,g,Z)}function Re(v,B,I,g,$,ee){var Z=new Uint8Array(32);return Et(Z,$,ee),se(v,B,I,g,Z)}var Pe=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Le(v,B,I,g){for(var $=new Int32Array(16),ee=new Int32Array(16),Z,oe,Se,Me,Be,Qt,Xe,bt,wt,Bt,Pt,vt,St,xt,Ze,nt,Ke,Qe,et,Fe,ae,ce,Te,be,ve,Ce,_t=v[0],Lt=v[1],Ht=v[2],Nt=v[3],K=v[4],Xt=v[5],ln=v[6],fn=v[7],Kt=B[0],sn=B[1],rn=B[2],Gn=B[3],xn=B[4],Ln=B[5],Nn=B[6],Fn=B[7],Qn=0;g>=128;){for(et=0;et<16;et++)Fe=8*et+Qn,$[et]=I[Fe+0]<<24|I[Fe+1]<<16|I[Fe+2]<<8|I[Fe+3],ee[et]=I[Fe+4]<<24|I[Fe+5]<<16|I[Fe+6]<<8|I[Fe+7];for(et=0;et<80;et++)if(Z=_t,oe=Lt,Se=Ht,Me=Nt,Be=K,Qt=Xt,Xe=ln,bt=fn,wt=Kt,Bt=sn,Pt=rn,vt=Gn,St=xn,xt=Ln,Ze=Nn,nt=Fn,ae=fn,ce=Fn,Te=ce&65535,be=ce>>>16,ve=ae&65535,Ce=ae>>>16,ae=(K>>>14|xn<<32-14)^(K>>>18|xn<<32-18)^(xn>>>41-32|K<<32-(41-32)),ce=(xn>>>14|K<<32-14)^(xn>>>18|K<<32-18)^(K>>>41-32|xn<<32-(41-32)),Te+=ce&65535,be+=ce>>>16,ve+=ae&65535,Ce+=ae>>>16,ae=K&Xt^~K&ln,ce=xn&Ln^~xn&Nn,Te+=ce&65535,be+=ce>>>16,ve+=ae&65535,Ce+=ae>>>16,ae=Pe[et*2],ce=Pe[et*2+1],Te+=ce&65535,be+=ce>>>16,ve+=ae&65535,Ce+=ae>>>16,ae=$[et%16],ce=ee[et%16],Te+=ce&65535,be+=ce>>>16,ve+=ae&65535,Ce+=ae>>>16,be+=Te>>>16,ve+=be>>>16,Ce+=ve>>>16,Ke=ve&65535|Ce<<16,Qe=Te&65535|be<<16,ae=Ke,ce=Qe,Te=ce&65535,be=ce>>>16,ve=ae&65535,Ce=ae>>>16,ae=(_t>>>28|Kt<<32-28)^(Kt>>>34-32|_t<<32-(34-32))^(Kt>>>39-32|_t<<32-(39-32)),ce=(Kt>>>28|_t<<32-28)^(_t>>>34-32|Kt<<32-(34-32))^(_t>>>39-32|Kt<<32-(39-32)),Te+=ce&65535,be+=ce>>>16,ve+=ae&65535,Ce+=ae>>>16,ae=_t&Lt^_t&Ht^Lt&Ht,ce=Kt&sn^Kt&rn^sn&rn,Te+=ce&65535,be+=ce>>>16,ve+=ae&65535,Ce+=ae>>>16,be+=Te>>>16,ve+=be>>>16,Ce+=ve>>>16,bt=ve&65535|Ce<<16,nt=Te&65535|be<<16,ae=Me,ce=vt,Te=ce&65535,be=ce>>>16,ve=ae&65535,Ce=ae>>>16,ae=Ke,ce=Qe,Te+=ce&65535,be+=ce>>>16,ve+=ae&65535,Ce+=ae>>>16,be+=Te>>>16,ve+=be>>>16,Ce+=ve>>>16,Me=ve&65535|Ce<<16,vt=Te&65535|be<<16,Lt=Z,Ht=oe,Nt=Se,K=Me,Xt=Be,ln=Qt,fn=Xe,_t=bt,sn=wt,rn=Bt,Gn=Pt,xn=vt,Ln=St,Nn=xt,Fn=Ze,Kt=nt,et%16===15)for(Fe=0;Fe<16;Fe++)ae=$[Fe],ce=ee[Fe],Te=ce&65535,be=ce>>>16,ve=ae&65535,Ce=ae>>>16,ae=$[(Fe+9)%16],ce=ee[(Fe+9)%16],Te+=ce&65535,be+=ce>>>16,ve+=ae&65535,Ce+=ae>>>16,Ke=$[(Fe+1)%16],Qe=ee[(Fe+1)%16],ae=(Ke>>>1|Qe<<32-1)^(Ke>>>8|Qe<<32-8)^Ke>>>7,ce=(Qe>>>1|Ke<<32-1)^(Qe>>>8|Ke<<32-8)^(Qe>>>7|Ke<<32-7),Te+=ce&65535,be+=ce>>>16,ve+=ae&65535,Ce+=ae>>>16,Ke=$[(Fe+14)%16],Qe=ee[(Fe+14)%16],ae=(Ke>>>19|Qe<<32-19)^(Qe>>>61-32|Ke<<32-(61-32))^Ke>>>6,ce=(Qe>>>19|Ke<<32-19)^(Ke>>>61-32|Qe<<32-(61-32))^(Qe>>>6|Ke<<32-6),Te+=ce&65535,be+=ce>>>16,ve+=ae&65535,Ce+=ae>>>16,be+=Te>>>16,ve+=be>>>16,Ce+=ve>>>16,$[Fe]=ve&65535|Ce<<16,ee[Fe]=Te&65535|be<<16;ae=_t,ce=Kt,Te=ce&65535,be=ce>>>16,ve=ae&65535,Ce=ae>>>16,ae=v[0],ce=B[0],Te+=ce&65535,be+=ce>>>16,ve+=ae&65535,Ce+=ae>>>16,be+=Te>>>16,ve+=be>>>16,Ce+=ve>>>16,v[0]=_t=ve&65535|Ce<<16,B[0]=Kt=Te&65535|be<<16,ae=Lt,ce=sn,Te=ce&65535,be=ce>>>16,ve=ae&65535,Ce=ae>>>16,ae=v[1],ce=B[1],Te+=ce&65535,be+=ce>>>16,ve+=ae&65535,Ce+=ae>>>16,be+=Te>>>16,ve+=be>>>16,Ce+=ve>>>16,v[1]=Lt=ve&65535|Ce<<16,B[1]=sn=Te&65535|be<<16,ae=Ht,ce=rn,Te=ce&65535,be=ce>>>16,ve=ae&65535,Ce=ae>>>16,ae=v[2],ce=B[2],Te+=ce&65535,be+=ce>>>16,ve+=ae&65535,Ce+=ae>>>16,be+=Te>>>16,ve+=be>>>16,Ce+=ve>>>16,v[2]=Ht=ve&65535|Ce<<16,B[2]=rn=Te&65535|be<<16,ae=Nt,ce=Gn,Te=ce&65535,be=ce>>>16,ve=ae&65535,Ce=ae>>>16,ae=v[3],ce=B[3],Te+=ce&65535,be+=ce>>>16,ve+=ae&65535,Ce+=ae>>>16,be+=Te>>>16,ve+=be>>>16,Ce+=ve>>>16,v[3]=Nt=ve&65535|Ce<<16,B[3]=Gn=Te&65535|be<<16,ae=K,ce=xn,Te=ce&65535,be=ce>>>16,ve=ae&65535,Ce=ae>>>16,ae=v[4],ce=B[4],Te+=ce&65535,be+=ce>>>16,ve+=ae&65535,Ce+=ae>>>16,be+=Te>>>16,ve+=be>>>16,Ce+=ve>>>16,v[4]=K=ve&65535|Ce<<16,B[4]=xn=Te&65535|be<<16,ae=Xt,ce=Ln,Te=ce&65535,be=ce>>>16,ve=ae&65535,Ce=ae>>>16,ae=v[5],ce=B[5],Te+=ce&65535,be+=ce>>>16,ve+=ae&65535,Ce+=ae>>>16,be+=Te>>>16,ve+=be>>>16,Ce+=ve>>>16,v[5]=Xt=ve&65535|Ce<<16,B[5]=Ln=Te&65535|be<<16,ae=ln,ce=Nn,Te=ce&65535,be=ce>>>16,ve=ae&65535,Ce=ae>>>16,ae=v[6],ce=B[6],Te+=ce&65535,be+=ce>>>16,ve+=ae&65535,Ce+=ae>>>16,be+=Te>>>16,ve+=be>>>16,Ce+=ve>>>16,v[6]=ln=ve&65535|Ce<<16,B[6]=Nn=Te&65535|be<<16,ae=fn,ce=Fn,Te=ce&65535,be=ce>>>16,ve=ae&65535,Ce=ae>>>16,ae=v[7],ce=B[7],Te+=ce&65535,be+=ce>>>16,ve+=ae&65535,Ce+=ae>>>16,be+=Te>>>16,ve+=be>>>16,Ce+=ve>>>16,v[7]=fn=ve&65535|Ce<<16,B[7]=Fn=Te&65535|be<<16,Qn+=128,g-=128}return g}function at(v,B,I){var g=new Int32Array(8),$=new Int32Array(8),ee=new Uint8Array(256),Z,oe=I;for(g[0]=1779033703,g[1]=3144134277,g[2]=1013904242,g[3]=2773480762,g[4]=1359893119,g[5]=2600822924,g[6]=528734635,g[7]=1541459225,$[0]=4089235720,$[1]=2227873595,$[2]=4271175723,$[3]=1595750129,$[4]=2917565137,$[5]=725511199,$[6]=4215389547,$[7]=327033209,Le(g,$,B,I),I%=128,Z=0;Z<I;Z++)ee[Z]=B[oe-I+Z];for(ee[I]=128,I=256-128*(I<112?1:0),ee[I-9]=0,m(ee,I-8,oe/536870912|0,oe<<3),Le(g,$,ee,I),Z=0;Z<8;Z++)m(v,8*Z,g[Z],$[Z]);return 0}function Je(v,B){var I=n(),g=n(),$=n(),ee=n(),Z=n(),oe=n(),Se=n(),Me=n(),Be=n();Ae(I,v[1],v[0]),Ae(Be,B[1],B[0]),ue(I,I,Be),j(g,v[0],v[1]),j(Be,B[0],B[1]),ue(g,g,Be),ue($,v[3],B[3]),ue($,$,u),ue(ee,v[2],B[2]),j(ee,ee,ee),Ae(Z,g,I),Ae(oe,ee,$),j(Se,ee,$),j(Me,g,I),ue(v[0],Z,oe),ue(v[1],Me,Se),ue(v[2],Se,oe),ue(v[3],Z,Me)}function rt(v,B,I){var g;for(g=0;g<4;g++)L(v[g],B[g],I)}function Yt(v,B){var I=n(),g=n(),$=n();mt($,B[2]),ue(I,B[0],$),ue(g,B[1],$),H(v,g),v[31]^=O(I)<<7}function ht(v,B,I){var g,$;for(E(v[0],o),E(v[1],a),E(v[2],a),E(v[3],o),$=255;$>=0;--$)g=I[$/8|0]>>($&7)&1,rt(v,B,g),Je(B,v),Je(v,v),rt(v,B,g)}function ct(v,B){var I=[n(),n(),n(),n()];E(I[0],l),E(I[1],f),E(I[2],a),ue(I[3],l,f),ht(v,I,B)}function Vt(v,B,I){var g=new Uint8Array(64),$=[n(),n(),n(),n()],ee;for(I||i(B,32),at(g,B,32),g[0]&=248,g[31]&=127,g[31]|=64,ct($,g),Yt(v,$),ee=0;ee<32;ee++)B[ee+32]=v[ee];return 0}var It=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Ot(v,B){var I,g,$,ee;for(g=63;g>=32;--g){for(I=0,$=g-32,ee=g-12;$<ee;++$)B[$]+=I-16*B[g]*It[$-(g-32)],I=Math.floor((B[$]+128)/256),B[$]-=I*256;B[$]+=I,B[g]=0}for(I=0,$=0;$<32;$++)B[$]+=I-(B[31]>>4)*It[$],I=B[$]>>8,B[$]&=255;for($=0;$<32;$++)B[$]-=I*It[$];for(g=0;g<32;g++)B[g+1]+=B[g]>>8,v[g]=B[g]&255}function Sn(v){var B=new Float64Array(64),I;for(I=0;I<64;I++)B[I]=v[I];for(I=0;I<64;I++)v[I]=0;Ot(v,B)}function qt(v,B,I,g){var $=new Uint8Array(64),ee=new Uint8Array(64),Z=new Uint8Array(64),oe,Se,Me=new Float64Array(64),Be=[n(),n(),n(),n()];at($,g,32),$[0]&=248,$[31]&=127,$[31]|=64;var Qt=I+64;for(oe=0;oe<I;oe++)v[64+oe]=B[oe];for(oe=0;oe<32;oe++)v[32+oe]=$[32+oe];for(at(Z,v.subarray(32),I+32),Sn(Z),ct(Be,Z),Yt(v,Be),oe=32;oe<64;oe++)v[oe]=g[oe];for(at(ee,v,I+64),Sn(ee),oe=0;oe<64;oe++)Me[oe]=0;for(oe=0;oe<32;oe++)Me[oe]=Z[oe];for(oe=0;oe<32;oe++)for(Se=0;Se<32;Se++)Me[oe+Se]+=ee[oe]*$[Se];return Ot(v.subarray(32),Me),Qt}function dn(v,B){var I=n(),g=n(),$=n(),ee=n(),Z=n(),oe=n(),Se=n();return E(v[2],a),b(v[1],B),ke($,v[1]),ue(ee,$,d),Ae($,$,v[2]),j(ee,v[2],ee),ke(Z,ee),ke(oe,Z),ue(Se,oe,Z),ue(I,Se,$),ue(I,I,ee),st(I,I),ue(I,I,$),ue(I,I,ee),ue(I,I,ee),ue(v[0],I,ee),ke(g,v[0]),ue(g,g,ee),Q(g,$)&&ue(v[0],v[0],p),ke(g,v[0]),ue(g,g,ee),Q(g,$)?-1:(O(v[0])===B[31]>>7&&Ae(v[0],o,v[0]),ue(v[3],v[0],v[1]),0)}function Si(v,B,I,g){var $,ee=new Uint8Array(32),Z=new Uint8Array(64),oe=[n(),n(),n(),n()],Se=[n(),n(),n(),n()];if(I<64||dn(Se,g))return-1;for($=0;$<I;$++)v[$]=B[$];for($=0;$<32;$++)v[$+32]=g[$];if(at(Z,v,I),Sn(Z),ht(oe,Se,Z),ct(Se,B.subarray(32)),Je(oe,Se),Yt(ee,oe),I-=64,C(B,0,ee,0)){for($=0;$<I;$++)v[$]=0;return-1}for($=0;$<I;$++)v[$]=B[$+64];return I}var un=32,D=24,W=32,Y=16,ne=32,he=32,re=32,me=32,je=32,Ee=D,_e=W,le=Y,ge=64,Ie=32,Ve=64,ze=32,He=64;t.lowlevel={crypto_core_hsalsa20:P,crypto_stream_xor:N,crypto_stream:te,crypto_stream_salsa20_xor:X,crypto_stream_salsa20:G,crypto_onetimeauth:M,crypto_onetimeauth_verify:A,crypto_verify_16:x,crypto_verify_32:C,crypto_secretbox:h,crypto_secretbox_open:y,crypto_scalarmult:kt,crypto_scalarmult_base:ut,crypto_box_beforenm:Et,crypto_box_afternm:pi,crypto_box:fe,crypto_box_open:Re,crypto_box_keypair:ft,crypto_hash:at,crypto_sign:qt,crypto_sign_keypair:Vt,crypto_sign_open:Si,crypto_secretbox_KEYBYTES:un,crypto_secretbox_NONCEBYTES:D,crypto_secretbox_ZEROBYTES:W,crypto_secretbox_BOXZEROBYTES:Y,crypto_scalarmult_BYTES:ne,crypto_scalarmult_SCALARBYTES:he,crypto_box_PUBLICKEYBYTES:re,crypto_box_SECRETKEYBYTES:me,crypto_box_BEFORENMBYTES:je,crypto_box_NONCEBYTES:Ee,crypto_box_ZEROBYTES:_e,crypto_box_BOXZEROBYTES:le,crypto_sign_BYTES:ge,crypto_sign_PUBLICKEYBYTES:Ie,crypto_sign_SECRETKEYBYTES:Ve,crypto_sign_SEEDBYTES:ze,crypto_hash_BYTES:He,gf:n,D:d,L:It,pack25519:H,unpack25519:b,M:ue,A:j,S:ke,Z:Ae,pow2523:st,add:Je,set25519:E,modL:Ot,scalarmult:ht,scalarbase:ct};function it(v,B){if(v.length!==un)throw new Error("bad key size");if(B.length!==D)throw new Error("bad nonce size")}function gt(v,B){if(v.length!==re)throw new Error("bad public key size");if(B.length!==me)throw new Error("bad secret key size")}function ot(){for(var v=0;v<arguments.length;v++)if(!(arguments[v]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function nn(v){for(var B=0;B<v.length;B++)v[B]=0}t.randomBytes=function(v){var B=new Uint8Array(v);return i(B,v),B},t.secretbox=function(v,B,I){ot(v,B,I),it(I,B);for(var g=new Uint8Array(W+v.length),$=new Uint8Array(g.length),ee=0;ee<v.length;ee++)g[ee+W]=v[ee];return h($,g,g.length,B,I),$.subarray(Y)},t.secretbox.open=function(v,B,I){ot(v,B,I),it(I,B);for(var g=new Uint8Array(Y+v.length),$=new Uint8Array(g.length),ee=0;ee<v.length;ee++)g[ee+Y]=v[ee];return g.length<32||y($,g,g.length,B,I)!==0?null:$.subarray(W)},t.secretbox.keyLength=un,t.secretbox.nonceLength=D,t.secretbox.overheadLength=Y,t.scalarMult=function(v,B){if(ot(v,B),v.length!==he)throw new Error("bad n size");if(B.length!==ne)throw new Error("bad p size");var I=new Uint8Array(ne);return kt(I,v,B),I},t.scalarMult.base=function(v){if(ot(v),v.length!==he)throw new Error("bad n size");var B=new Uint8Array(ne);return ut(B,v),B},t.scalarMult.scalarLength=he,t.scalarMult.groupElementLength=ne,t.box=function(v,B,I,g){var $=t.box.before(I,g);return t.secretbox(v,B,$)},t.box.before=function(v,B){ot(v,B),gt(v,B);var I=new Uint8Array(je);return Et(I,v,B),I},t.box.after=t.secretbox,t.box.open=function(v,B,I,g){var $=t.box.before(I,g);return t.secretbox.open(v,B,$)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var v=new Uint8Array(re),B=new Uint8Array(me);return ft(v,B),{publicKey:v,secretKey:B}},t.box.keyPair.fromSecretKey=function(v){if(ot(v),v.length!==me)throw new Error("bad secret key size");var B=new Uint8Array(re);return ut(B,v),{publicKey:B,secretKey:new Uint8Array(v)}},t.box.publicKeyLength=re,t.box.secretKeyLength=me,t.box.sharedKeyLength=je,t.box.nonceLength=Ee,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(v,B){if(ot(v,B),B.length!==Ve)throw new Error("bad secret key size");var I=new Uint8Array(ge+v.length);return qt(I,v,v.length,B),I},t.sign.open=function(v,B){if(ot(v,B),B.length!==Ie)throw new Error("bad public key size");var I=new Uint8Array(v.length),g=Si(I,v,v.length,B);if(g<0)return null;for(var $=new Uint8Array(g),ee=0;ee<$.length;ee++)$[ee]=I[ee];return $},t.sign.detached=function(v,B){for(var I=t.sign(v,B),g=new Uint8Array(ge),$=0;$<g.length;$++)g[$]=I[$];return g},t.sign.detached.verify=function(v,B,I){if(ot(v,B,I),B.length!==ge)throw new Error("bad signature size");if(I.length!==Ie)throw new Error("bad public key size");var g=new Uint8Array(ge+v.length),$=new Uint8Array(ge+v.length),ee;for(ee=0;ee<ge;ee++)g[ee]=B[ee];for(ee=0;ee<v.length;ee++)g[ee+ge]=v[ee];return Si($,g,g.length,I)>=0},t.sign.keyPair=function(){var v=new Uint8Array(Ie),B=new Uint8Array(Ve);return Vt(v,B),{publicKey:v,secretKey:B}},t.sign.keyPair.fromSecretKey=function(v){if(ot(v),v.length!==Ve)throw new Error("bad secret key size");for(var B=new Uint8Array(Ie),I=0;I<B.length;I++)B[I]=v[32+I];return{publicKey:B,secretKey:new Uint8Array(v)}},t.sign.keyPair.fromSeed=function(v){if(ot(v),v.length!==ze)throw new Error("bad seed size");for(var B=new Uint8Array(Ie),I=new Uint8Array(Ve),g=0;g<32;g++)I[g]=v[g];return Vt(B,I,!0),{publicKey:B,secretKey:I}},t.sign.publicKeyLength=Ie,t.sign.secretKeyLength=Ve,t.sign.seedLength=ze,t.sign.signatureLength=ge,t.hash=function(v){ot(v);var B=new Uint8Array(He);return at(B,v,v.length),B},t.hash.hashLength=He,t.verify=function(v,B){return ot(v,B),v.length===0||B.length===0||v.length!==B.length?!1:_(v,0,B,0,v.length)===0},t.setPRNG=function(v){i=v},function(){var v=typeof self<"u"?self.crypto||self.msCrypto:null;if(v&&v.getRandomValues){var B=65536;t.setPRNG(function(I,g){var $,ee=new Uint8Array(g);for($=0;$<g;$+=B)v.getRandomValues(ee.subarray($,$+Math.min(g-$,B)));for($=0;$<g;$++)I[$]=ee[$];nn(ee)})}else typeof Ay<"u"&&(v=Wp,v&&v.randomBytes&&t.setPRNG(function(I,g){var $,ee=v.randomBytes(g);for($=0;$<g;$++)I[$]=ee[$];nn(ee)}))}()})(e.exports?e.exports:self.nacl=self.nacl||{})})(wT);var Ji={},ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.output=ui.exists=ui.hash=ui.bytes=ui.bool=ui.number=void 0;function bl(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}ui.number=bl;function ky(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}ui.bool=ky;function Gp(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}ui.bytes=Gp;function Sy(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");bl(e.outputLen),bl(e.blockLen)}ui.hash=Sy;function Ey(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}ui.exists=Ey;function Py(e,t){Gp(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}ui.output=Py;const TT={number:bl,bool:ky,bytes:Gp,hash:Sy,exists:Ey,output:Py};ui.default=TT;var cc={},Cy={},ca={},hf={};Object.defineProperty(hf,"__esModule",{value:!0});hf.crypto=void 0;hf.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=hf,n=S=>new Uint8Array(S.buffer,S.byteOffset,S.byteLength);e.u8=n;const i=S=>new Uint32Array(S.buffer,S.byteOffset,Math.floor(S.byteLength/4));e.u32=i;const s=S=>new DataView(S.buffer,S.byteOffset,S.byteLength);e.createView=s;const r=(S,P)=>S<<32-P|S>>>P;if(e.rotr=r,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},(S,P)=>P.toString(16).padStart(2,"0"));function a(S){if(!(S instanceof Uint8Array))throw new Error("Uint8Array expected");let P="";for(let z=0;z<S.length;z++)P+=o[S[z]];return P}e.bytesToHex=a;function c(S){if(typeof S!="string")throw new TypeError("hexToBytes: expected string, got "+typeof S);if(S.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const P=new Uint8Array(S.length/2);for(let z=0;z<P.length;z++){const X=z*2,G=S.slice(X,X+2),te=Number.parseInt(G,16);if(Number.isNaN(te)||te<0)throw new Error("Invalid byte sequence");P[z]=te}return P}e.hexToBytes=c;const d=async()=>{};e.nextTick=d;async function u(S,P,z){let X=Date.now();for(let G=0;G<S;G++){z(G);const te=Date.now()-X;te>=0&&te<P||(await(0,e.nextTick)(),X+=te)}}e.asyncLoop=u;function l(S){if(typeof S!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof S}`);return new TextEncoder().encode(S)}e.utf8ToBytes=l;function f(S){if(typeof S=="string"&&(S=l(S)),!(S instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof S})`);return S}e.toBytes=f;function p(...S){if(!S.every(X=>X instanceof Uint8Array))throw new Error("Uint8Array list expected");if(S.length===1)return S[0];const P=S.reduce((X,G)=>X+G.length,0),z=new Uint8Array(P);for(let X=0,G=0;X<S.length;X++){const te=S[X];z.set(te,G),G+=te.length}return z}e.concatBytes=p;class m{clone(){return this._cloneInto()}}e.Hash=m;const _=S=>Object.prototype.toString.call(S)==="[object Object]"&&S.constructor===Object;function x(S,P){if(P!==void 0&&(typeof P!="object"||!_(P)))throw new TypeError("Options should be object or undefined");return Object.assign(S,P)}e.checkOpts=x;function C(S){const P=X=>S().update(f(X)).digest(),z=S();return P.outputLen=z.outputLen,P.blockLen=z.blockLen,P.create=()=>S(),P}e.wrapConstructor=C;function k(S){const P=(X,G)=>S(G).update(f(X)).digest(),z=S({});return P.outputLen=z.outputLen,P.blockLen=z.blockLen,P.create=X=>S(X),P}e.wrapConstructorWithOpts=k;function T(S=32){if(t.crypto.web)return t.crypto.web.getRandomValues(new Uint8Array(S));if(t.crypto.node)return new Uint8Array(t.crypto.node.randomBytes(S).buffer);throw new Error("The environment doesn't have randomBytes function")}e.randomBytes=T})(ca);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=void 0;const t=ui,n=ca;class i extends n.Hash{constructor(o,a){super(),this.finished=!1,this.destroyed=!1,t.default.hash(o);const c=(0,n.toBytes)(a);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const d=this.blockLen,u=new Uint8Array(d);u.set(c.length>d?o.create().update(c).digest():c);for(let l=0;l<u.length;l++)u[l]^=54;this.iHash.update(u),this.oHash=o.create();for(let l=0;l<u.length;l++)u[l]^=106;this.oHash.update(u),u.fill(0)}update(o){return t.default.exists(this),this.iHash.update(o),this}digestInto(o){t.default.exists(this),t.default.bytes(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:a,iHash:c,finished:d,destroyed:u,blockLen:l,outputLen:f}=this;return o=o,o.finished=d,o.destroyed=u,o.blockLen=l,o.outputLen=f,o.oHash=a._cloneInto(o.oHash),o.iHash=c._cloneInto(o.iHash),o}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const s=(r,o,a)=>new i(r,o).update(a).digest();e.hmac=s,e.hmac.create=(r,o)=>new i(r,o)})(Cy);Object.defineProperty(cc,"__esModule",{value:!0});cc.pbkdf2Async=cc.pbkdf2=void 0;const yu=ui,AT=Cy,Xa=ca;function Iy(e,t,n,i){yu.default.hash(e);const s=(0,Xa.checkOpts)({dkLen:32,asyncTick:10},i),{c:r,dkLen:o,asyncTick:a}=s;if(yu.default.number(r),yu.default.number(o),yu.default.number(a),r<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=(0,Xa.toBytes)(t),d=(0,Xa.toBytes)(n),u=new Uint8Array(o),l=AT.hmac.create(e,c),f=l._cloneInto().update(d);return{c:r,dkLen:o,asyncTick:a,DK:u,PRF:l,PRFSalt:f}}function By(e,t,n,i,s){return e.destroy(),t.destroy(),i&&i.destroy(),s.fill(0),n}function kT(e,t,n,i){const{c:s,dkLen:r,DK:o,PRF:a,PRFSalt:c}=Iy(e,t,n,i);let d;const u=new Uint8Array(4),l=(0,Xa.createView)(u),f=new Uint8Array(a.outputLen);for(let p=1,m=0;m<r;p++,m+=a.outputLen){const _=o.subarray(m,m+a.outputLen);l.setInt32(0,p,!1),(d=c._cloneInto(d)).update(u).digestInto(f),_.set(f.subarray(0,_.length));for(let x=1;x<s;x++){a._cloneInto(d).update(f).digestInto(f);for(let C=0;C<_.length;C++)_[C]^=f[C]}}return By(a,c,o,d,f)}cc.pbkdf2=kT;async function ST(e,t,n,i){const{c:s,dkLen:r,asyncTick:o,DK:a,PRF:c,PRFSalt:d}=Iy(e,t,n,i);let u;const l=new Uint8Array(4),f=(0,Xa.createView)(l),p=new Uint8Array(c.outputLen);for(let m=1,_=0;_<r;m++,_+=c.outputLen){const x=a.subarray(_,_+c.outputLen);f.setInt32(0,m,!1),(u=d._cloneInto(u)).update(l).digestInto(p),x.set(p.subarray(0,x.length)),await(0,Xa.asyncLoop)(s-1,o,C=>{c._cloneInto(u).update(p).digestInto(p);for(let k=0;k<x.length;k++)x[k]^=p[k]})}return By(c,d,a,u,p)}cc.pbkdf2Async=ST;var dc={},zd={};Object.defineProperty(zd,"__esModule",{value:!0});zd.SHA2=void 0;const Mh=ui,Gc=ca;function ET(e,t,n,i){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,i);const s=BigInt(32),r=BigInt(4294967295),o=Number(n>>s&r),a=Number(n&r),c=i?4:0,d=i?0:4;e.setUint32(t+c,o,i),e.setUint32(t+d,a,i)}let PT=class extends Gc.Hash{constructor(t,n,i,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=i,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Gc.createView)(this.buffer)}update(t){Mh.default.exists(this);const{view:n,buffer:i,blockLen:s}=this;t=(0,Gc.toBytes)(t);const r=t.length;for(let o=0;o<r;){const a=Math.min(s-this.pos,r-o);if(a===s){const c=(0,Gc.createView)(t);for(;s<=r-o;o+=s)this.process(c,o);continue}i.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Mh.default.exists(this),Mh.default.output(t,this),this.finished=!0;const{buffer:n,view:i,blockLen:s,isLE:r}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(i,0),o=0);for(let l=o;l<s;l++)n[l]=0;ET(i,s-8,BigInt(this.length*8),r),this.process(i,0);const a=(0,Gc.createView)(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,u=this.get();if(d>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<d;l++)a.setUint32(4*l,u[l],r)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const i=t.slice(0,n);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:i,length:s,finished:r,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=r,t.destroyed=o,s%n&&t.buffer.set(i),t}};zd.SHA2=PT;Object.defineProperty(dc,"__esModule",{value:!0});dc.sha224=dc.sha256=void 0;const CT=zd,cs=ca,IT=(e,t,n)=>e&t^~e&n,BT=(e,t,n)=>e&t^e&n^t&n,OT=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Fr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),zr=new Uint32Array(64);let Oy=class extends CT.SHA2{constructor(){super(64,32,8,!1),this.A=Fr[0]|0,this.B=Fr[1]|0,this.C=Fr[2]|0,this.D=Fr[3]|0,this.E=Fr[4]|0,this.F=Fr[5]|0,this.G=Fr[6]|0,this.H=Fr[7]|0}get(){const{A:t,B:n,C:i,D:s,E:r,F:o,G:a,H:c}=this;return[t,n,i,s,r,o,a,c]}set(t,n,i,s,r,o,a,c){this.A=t|0,this.B=n|0,this.C=i|0,this.D=s|0,this.E=r|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let l=0;l<16;l++,n+=4)zr[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const f=zr[l-15],p=zr[l-2],m=(0,cs.rotr)(f,7)^(0,cs.rotr)(f,18)^f>>>3,_=(0,cs.rotr)(p,17)^(0,cs.rotr)(p,19)^p>>>10;zr[l]=_+zr[l-7]+m+zr[l-16]|0}let{A:i,B:s,C:r,D:o,E:a,F:c,G:d,H:u}=this;for(let l=0;l<64;l++){const f=(0,cs.rotr)(a,6)^(0,cs.rotr)(a,11)^(0,cs.rotr)(a,25),p=u+f+IT(a,c,d)+OT[l]+zr[l]|0,_=((0,cs.rotr)(i,2)^(0,cs.rotr)(i,13)^(0,cs.rotr)(i,22))+BT(i,s,r)|0;u=d,d=c,c=a,a=o+p|0,o=r,r=s,s=i,i=p+_|0}i=i+this.A|0,s=s+this.B|0,r=r+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,d=d+this.G|0,u=u+this.H|0,this.set(i,s,r,o,a,c,d,u)}roundClean(){zr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},$T=class extends Oy{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};dc.sha256=(0,cs.wrapConstructor)(()=>new Oy);dc.sha224=(0,cs.wrapConstructor)(()=>new $T);var ys={},$y={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.add=e.toBig=e.split=e.fromBig=void 0;const t=BigInt(2**32-1),n=BigInt(32);function i(N,R=!1){return R?{h:Number(N&t),l:Number(N>>n&t)}:{h:Number(N>>n&t)|0,l:Number(N&t)|0}}e.fromBig=i;function s(N,R=!1){let M=new Uint32Array(N.length),A=new Uint32Array(N.length);for(let h=0;h<N.length;h++){const{h:y,l:E}=i(N[h],R);[M[h],A[h]]=[y,E]}return[M,A]}e.split=s;const r=(N,R)=>BigInt(N>>>0)<<n|BigInt(R>>>0);e.toBig=r;const o=(N,R,M)=>N>>>M,a=(N,R,M)=>N<<32-M|R>>>M,c=(N,R,M)=>N>>>M|R<<32-M,d=(N,R,M)=>N<<32-M|R>>>M,u=(N,R,M)=>N<<64-M|R>>>M-32,l=(N,R,M)=>N>>>M-32|R<<64-M,f=(N,R)=>R,p=(N,R)=>N,m=(N,R,M)=>N<<M|R>>>32-M,_=(N,R,M)=>R<<M|N>>>32-M,x=(N,R,M)=>R<<M-32|N>>>64-M,C=(N,R,M)=>N<<M-32|R>>>64-M;function k(N,R,M,A){const h=(R>>>0)+(A>>>0);return{h:N+M+(h/2**32|0)|0,l:h|0}}e.add=k;const T=(N,R,M)=>(N>>>0)+(R>>>0)+(M>>>0),S=(N,R,M,A)=>R+M+A+(N/2**32|0)|0,P=(N,R,M,A)=>(N>>>0)+(R>>>0)+(M>>>0)+(A>>>0),z=(N,R,M,A,h)=>R+M+A+h+(N/2**32|0)|0,X=(N,R,M,A,h)=>(N>>>0)+(R>>>0)+(M>>>0)+(A>>>0)+(h>>>0),G=(N,R,M,A,h,y)=>R+M+A+h+y+(N/2**32|0)|0,te={fromBig:i,split:s,toBig:e.toBig,shrSH:o,shrSL:a,rotrSH:c,rotrSL:d,rotrBH:u,rotrBL:l,rotr32H:f,rotr32L:p,rotlSH:m,rotlSL:_,rotlBH:x,rotlBL:C,add:k,add3L:T,add3H:S,add4L:P,add4H:z,add5H:G,add5L:X};e.default=te})($y);Object.defineProperty(ys,"__esModule",{value:!0});ys.sha384=ys.sha512_256=ys.sha512_224=ys.sha512=ys.SHA512=void 0;const RT=zd,Wt=$y,pf=ca,[UT,MT]=Wt.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Hr=new Uint32Array(80),Kr=new Uint32Array(80);let Hd=class extends RT.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:i,Bl:s,Ch:r,Cl:o,Dh:a,Dl:c,Eh:d,El:u,Fh:l,Fl:f,Gh:p,Gl:m,Hh:_,Hl:x}=this;return[t,n,i,s,r,o,a,c,d,u,l,f,p,m,_,x]}set(t,n,i,s,r,o,a,c,d,u,l,f,p,m,_,x){this.Ah=t|0,this.Al=n|0,this.Bh=i|0,this.Bl=s|0,this.Ch=r|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=d|0,this.El=u|0,this.Fh=l|0,this.Fl=f|0,this.Gh=p|0,this.Gl=m|0,this.Hh=_|0,this.Hl=x|0}process(t,n){for(let T=0;T<16;T++,n+=4)Hr[T]=t.getUint32(n),Kr[T]=t.getUint32(n+=4);for(let T=16;T<80;T++){const S=Hr[T-15]|0,P=Kr[T-15]|0,z=Wt.default.rotrSH(S,P,1)^Wt.default.rotrSH(S,P,8)^Wt.default.shrSH(S,P,7),X=Wt.default.rotrSL(S,P,1)^Wt.default.rotrSL(S,P,8)^Wt.default.shrSL(S,P,7),G=Hr[T-2]|0,te=Kr[T-2]|0,N=Wt.default.rotrSH(G,te,19)^Wt.default.rotrBH(G,te,61)^Wt.default.shrSH(G,te,6),R=Wt.default.rotrSL(G,te,19)^Wt.default.rotrBL(G,te,61)^Wt.default.shrSL(G,te,6),M=Wt.default.add4L(X,R,Kr[T-7],Kr[T-16]),A=Wt.default.add4H(M,z,N,Hr[T-7],Hr[T-16]);Hr[T]=A|0,Kr[T]=M|0}let{Ah:i,Al:s,Bh:r,Bl:o,Ch:a,Cl:c,Dh:d,Dl:u,Eh:l,El:f,Fh:p,Fl:m,Gh:_,Gl:x,Hh:C,Hl:k}=this;for(let T=0;T<80;T++){const S=Wt.default.rotrSH(l,f,14)^Wt.default.rotrSH(l,f,18)^Wt.default.rotrBH(l,f,41),P=Wt.default.rotrSL(l,f,14)^Wt.default.rotrSL(l,f,18)^Wt.default.rotrBL(l,f,41),z=l&p^~l&_,X=f&m^~f&x,G=Wt.default.add5L(k,P,X,MT[T],Kr[T]),te=Wt.default.add5H(G,C,S,z,UT[T],Hr[T]),N=G|0,R=Wt.default.rotrSH(i,s,28)^Wt.default.rotrBH(i,s,34)^Wt.default.rotrBH(i,s,39),M=Wt.default.rotrSL(i,s,28)^Wt.default.rotrBL(i,s,34)^Wt.default.rotrBL(i,s,39),A=i&r^i&a^r&a,h=s&o^s&c^o&c;C=_|0,k=x|0,_=p|0,x=m|0,p=l|0,m=f|0,{h:l,l:f}=Wt.default.add(d|0,u|0,te|0,N|0),d=a|0,u=c|0,a=r|0,c=o|0,r=i|0,o=s|0;const y=Wt.default.add3L(N,M,h);i=Wt.default.add3H(y,te,R,A),s=y|0}({h:i,l:s}=Wt.default.add(this.Ah|0,this.Al|0,i|0,s|0)),{h:r,l:o}=Wt.default.add(this.Bh|0,this.Bl|0,r|0,o|0),{h:a,l:c}=Wt.default.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:d,l:u}=Wt.default.add(this.Dh|0,this.Dl|0,d|0,u|0),{h:l,l:f}=Wt.default.add(this.Eh|0,this.El|0,l|0,f|0),{h:p,l:m}=Wt.default.add(this.Fh|0,this.Fl|0,p|0,m|0),{h:_,l:x}=Wt.default.add(this.Gh|0,this.Gl|0,_|0,x|0),{h:C,l:k}=Wt.default.add(this.Hh|0,this.Hl|0,C|0,k|0),this.set(i,s,r,o,a,c,d,u,l,f,p,m,_,x,C,k)}roundClean(){Hr.fill(0),Kr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};ys.SHA512=Hd;let DT=class extends Hd{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},jT=class extends Hd{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},qT=class extends Hd{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};ys.sha512=(0,pf.wrapConstructor)(()=>new Hd);ys.sha512_224=(0,pf.wrapConstructor)(()=>new DT);ys.sha512_256=(0,pf.wrapConstructor)(()=>new jT);ys.sha384=(0,pf.wrapConstructor)(()=>new qT);var Vp={};(function(e){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64urlnopad=e.base64url=e.base64=e.base32crockford=e.base32hex=e.base32=e.base16=e.utils=e.assertNumber=void 0;function t(R){if(!Number.isSafeInteger(R))throw new Error(`Wrong integer: ${R}`)}e.assertNumber=t;function n(...R){const M=(y,E)=>U=>y(E(U)),A=Array.from(R).reverse().reduce((y,E)=>y?M(y,E.encode):E.encode,void 0),h=R.reduce((y,E)=>y?M(y,E.decode):E.decode,void 0);return{encode:A,decode:h}}function i(R){return{encode:M=>{if(!Array.isArray(M)||M.length&&typeof M[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return M.map(A=>{if(A<0||A>=R.length)throw new Error(`Digit index outside alphabet: ${A} (alphabet: ${R.length})`);return R[A]})},decode:M=>{if(!Array.isArray(M)||M.length&&typeof M[0]!="string")throw new Error("alphabet.decode input should be array of strings");return M.map(A=>{if(typeof A!="string")throw new Error(`alphabet.decode: not string element=${A}`);const h=R.indexOf(A);if(h===-1)throw new Error(`Unknown letter: "${A}". Allowed: ${R}`);return h})}}}function s(R=""){if(typeof R!="string")throw new Error("join separator should be string");return{encode:M=>{if(!Array.isArray(M)||M.length&&typeof M[0]!="string")throw new Error("join.encode input should be array of strings");for(let A of M)if(typeof A!="string")throw new Error(`join.encode: non-string input=${A}`);return M.join(R)},decode:M=>{if(typeof M!="string")throw new Error("join.decode input should be string");return M.split(R)}}}function r(R,M="="){if(typeof M!="string")throw new Error("padding chr should be string");return{encode(A){if(!Array.isArray(A)||A.length&&typeof A[0]!="string")throw new Error("padding.encode input should be array of strings");for(let h of A)if(typeof h!="string")throw new Error(`padding.encode: non-string input=${h}`);for(;A.length*R%8;)A.push(M);return A},decode(A){if(!Array.isArray(A)||A.length&&typeof A[0]!="string")throw new Error("padding.encode input should be array of strings");for(let y of A)if(typeof y!="string")throw new Error(`padding.decode: non-string input=${y}`);let h=A.length;if(h*R%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;h>0&&A[h-1]===M;h--)if(!((h-1)*R%8))throw new Error("Invalid padding: string has too much padding");return A.slice(0,h)}}}function o(R){if(typeof R!="function")throw new Error("normalize fn should be function");return{encode:M=>M,decode:M=>R(M)}}function a(R,M,A){if(M<2)throw new Error(`convertRadix: wrong from=${M}, base cannot be less than 2`);if(A<2)throw new Error(`convertRadix: wrong to=${A}, base cannot be less than 2`);if(!Array.isArray(R))throw new Error("convertRadix: data should be array");if(!R.length)return[];let h=0;const y=[],E=Array.from(R);for(E.forEach(U=>{if(U<0||U>=M)throw new Error(`Wrong integer: ${U}`)});;){let U=0,L=!0;for(let H=h;H<E.length;H++){const Q=E[H],O=M*U+Q;if(!Number.isSafeInteger(O)||M*U/M!==U||O-Q!==M*U)throw new Error("convertRadix: carry overflow");U=O%A;const b=Math.floor(O/A);if(E[H]=b,!Number.isSafeInteger(b)||b*A+U!==O)throw new Error("convertRadix: carry overflow");if(L)b?L=!1:h=H;else continue}if(y.push(U),L)break}for(let U=0;U<R.length-1&&R[U]===0;U++)y.push(0);return y.reverse()}const c=(R,M)=>M?c(M,R%M):R,d=(R,M)=>R+(M-c(R,M));function u(R,M,A,h){if(!Array.isArray(R))throw new Error("convertRadix2: data should be array");if(M<=0||M>32)throw new Error(`convertRadix2: wrong from=${M}`);if(A<=0||A>32)throw new Error(`convertRadix2: wrong to=${A}`);if(d(M,A)>32)throw new Error(`convertRadix2: carry overflow from=${M} to=${A} carryBits=${d(M,A)}`);let y=0,E=0;const U=2**A-1,L=[];for(const H of R){if(H>=2**M)throw new Error(`convertRadix2: invalid data word=${H} from=${M}`);if(y=y<<M|H,E+M>32)throw new Error(`convertRadix2: carry overflow pos=${E} from=${M}`);for(E+=M;E>=A;E-=A)L.push((y>>E-A&U)>>>0);y&=2**E-1}if(y=y<<A-E&U,!h&&E>=M)throw new Error("Excess padding");if(!h&&y)throw new Error(`Non-zero padding: ${y}`);return h&&E>0&&L.push(y>>>0),L}function l(R){return{encode:M=>{if(!(M instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return a(Array.from(M),2**8,R)},decode:M=>{if(!Array.isArray(M)||M.length&&typeof M[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(a(M,R,2**8))}}}function f(R,M=!1){if(R<=0||R>32)throw new Error("radix2: bits should be in (0..32]");if(d(8,R)>32||d(R,8)>32)throw new Error("radix2: carry overflow");return{encode:A=>{if(!(A instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return u(Array.from(A),8,R,!M)},decode:A=>{if(!Array.isArray(A)||A.length&&typeof A[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(u(A,R,8,M))}}}function p(R){if(typeof R!="function")throw new Error("unsafeWrapper fn should be function");return function(...M){try{return R.apply(null,M)}catch{}}}function m(R,M){if(typeof M!="function")throw new Error("checksum fn should be function");return{encode(A){if(!(A instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const h=M(A).slice(0,R),y=new Uint8Array(A.length+R);return y.set(A),y.set(h,A.length),y},decode(A){if(!(A instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const h=A.slice(0,-R),y=M(h).slice(0,R),E=A.slice(-R);for(let U=0;U<R;U++)if(y[U]!==E[U])throw new Error("Invalid checksum");return h}}}e.utils={alphabet:i,chain:n,checksum:m,radix:l,radix2:f,join:s,padding:r},e.base16=n(f(4),i("0123456789ABCDEF"),s("")),e.base32=n(f(5),i("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),r(5),s("")),e.base32hex=n(f(5),i("0123456789ABCDEFGHIJKLMNOPQRSTUV"),r(5),s("")),e.base32crockford=n(f(5),i("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),s(""),o(R=>R.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),e.base64=n(f(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),r(6),s("")),e.base64url=n(f(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),r(6),s("")),e.base64urlnopad=n(f(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),s(""));const _=R=>n(l(58),i(R),s(""));e.base58=_("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=_("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=_("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const x=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(R){let M="";for(let A=0;A<R.length;A+=8){const h=R.subarray(A,A+8);M+=e.base58.encode(h).padStart(x[h.length],"1")}return M},decode(R){let M=[];for(let A=0;A<R.length;A+=11){const h=R.slice(A,A+11),y=x.indexOf(h.length),E=e.base58.decode(h);for(let U=0;U<E.length-y;U++)if(E[U]!==0)throw new Error("base58xmr: wrong padding");M=M.concat(Array.from(E.slice(E.length-y)))}return Uint8Array.from(M)}};const C=R=>n(m(4,M=>R(R(M))),e.base58);e.base58check=C;const k=n(i("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),s("")),T=[996825010,642813549,513874426,1027748829,705979059];function S(R){const M=R>>25;let A=(R&33554431)<<5;for(let h=0;h<T.length;h++)(M>>h&1)===1&&(A^=T[h]);return A}function P(R,M,A=1){const h=R.length;let y=1;for(let E=0;E<h;E++){const U=R.charCodeAt(E);if(U<33||U>126)throw new Error(`Invalid prefix (${R})`);y=S(y)^U>>5}y=S(y);for(let E=0;E<h;E++)y=S(y)^R.charCodeAt(E)&31;for(let E of M)y=S(y)^E;for(let E=0;E<6;E++)y=S(y);return y^=A,k.encode(u([y%2**30],30,5,!1))}function z(R){const M=R==="bech32"?1:734539939,A=f(5),h=A.decode,y=A.encode,E=p(h);function U(O,b,j=90){if(typeof O!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof O}`);if(!Array.isArray(b)||b.length&&typeof b[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof b}`);const Ae=O.length+7+b.length;if(j!==!1&&Ae>j)throw new TypeError(`Length ${Ae} exceeds limit ${j}`);const ue=O.toLowerCase(),ke=P(ue,b,M);return`${ue}1${k.encode(b)}${ke}`}function L(O,b=90){if(typeof O!="string")throw new Error(`bech32.decode input should be string, not ${typeof O}`);if(O.length<8||b!==!1&&O.length>b)throw new TypeError(`Wrong string length: ${O.length} (${O}). Expected (8..${b})`);const j=O.toLowerCase();if(O!==j&&O!==O.toUpperCase())throw new Error("String must be lowercase or uppercase");O=j;const Ae=O.lastIndexOf("1");if(Ae===0||Ae===-1)throw new Error('Letter "1" must be present between prefix and data only');const ue=O.slice(0,Ae),ke=O.slice(Ae+1);if(ke.length<6)throw new Error("Data must be at least 6 characters long");const mt=k.decode(ke).slice(0,-6),st=P(ue,mt,M);if(!ke.endsWith(st))throw new Error(`Invalid checksum in ${O}: expected "${st}"`);return{prefix:ue,words:mt}}const H=p(L);function Q(O){const{prefix:b,words:j}=L(O,!1);return{prefix:b,words:j,bytes:h(j)}}return{encode:U,decode:L,decodeToBytes:Q,decodeUnsafe:H,fromWords:h,fromWordsUnsafe:E,toWords:y}}e.bech32=z("bech32"),e.bech32m=z("bech32m"),e.utf8={encode:R=>new TextDecoder().decode(R),decode:R=>new TextEncoder().encode(R)},e.hex=n(f(4),i("0123456789abcdef"),s(""),o(R=>{if(typeof R!="string"||R.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof R} with length ${R.length}`);return R.toLowerCase()}));const X={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},G="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",te=(R,M)=>{if(typeof R!="string"||!X.hasOwnProperty(R))throw new TypeError(G);if(!(M instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return X[R].encode(M)};e.bytesToString=te,e.str=e.bytesToString;const N=(R,M)=>{if(!X.hasOwnProperty(R))throw new TypeError(G);if(typeof M!="string")throw new TypeError("stringToBytes() expects string");return X[R].decode(M)};e.stringToBytes=N,e.bytes=e.stringToBytes})(Vp);Object.defineProperty(Ji,"__esModule",{value:!0});var Ry=Ji.mnemonicToSeedSync=Ji.mnemonicToSeed=Ji.validateMnemonic=Ji.entropyToMnemonic=Ji.mnemonicToEntropy=Ji.generateMnemonic=void 0;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const Uy=ui,My=cc,LT=dc,Dy=ys,NT=ca,wu=Vp,FT=e=>e[0]==="";function jy(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function Xp(e){const t=jy(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function qy(e){Uy.default.bytes(e,16,20,24,28,32)}function zT(e,t=128){if(Uy.default.number(t),t%32!==0||t>256)throw new TypeError("Invalid entropy");return Fy((0,NT.randomBytes)(t/8),e)}Ji.generateMnemonic=zT;const HT=e=>{const t=8-e.length/4;return new Uint8Array([(0,LT.sha256)(e)[0]>>t<<t])};function Ly(e){if(!Array.isArray(e)||e.length!==2**11||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(t=>{if(typeof t!="string")throw new Error(`Wordlist: non-string element: ${t}`)}),wu.utils.chain(wu.utils.checksum(1,HT),wu.utils.radix2(11,!0),wu.utils.alphabet(e))}function Ny(e,t){const{words:n}=Xp(e),i=Ly(t).decode(n);return qy(i),i}Ji.mnemonicToEntropy=Ny;function Fy(e,t){return qy(e),Ly(t).encode(e).join(FT(t)?"":" ")}Ji.entropyToMnemonic=Fy;function KT(e,t){try{Ny(e,t)}catch{return!1}return!0}Ji.validateMnemonic=KT;const zy=e=>jy(`mnemonic${e}`);function WT(e,t=""){return(0,My.pbkdf2Async)(Dy.sha512,Xp(e).nfkd,zy(t),{c:2048,dkLen:64})}Ji.mnemonicToSeed=WT;function GT(e,t=""){return(0,My.pbkdf2)(Dy.sha512,Xp(e).nfkd,zy(t),{c:2048,dkLen:64})}Ry=Ji.mnemonicToSeedSync=GT;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const VT=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Dh=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ys=(e,t)=>e<<32-t|e>>>t,XT=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!XT)throw new Error("Non little-endian hardware is not supported");const JT=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Hy(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=JT[e[n]];return t}function Ky(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),r=Number.parseInt(s,16);if(Number.isNaN(r)||r<0)throw new Error("Invalid byte sequence");t[n]=r}return t}function ZT(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Kd(e){if(typeof e=="string"&&(e=ZT(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}let Jp=class{clone(){return this._cloneInto()}};function Wd(e){const t=i=>e().update(Kd(i)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function YT(e){const t=(i,s)=>e(s).update(Kd(i)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=i=>e(i),t}function W0(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function QT(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Wy(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function e3(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");W0(e.outputLen),W0(e.blockLen)}function t3(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function n3(e,t){Wy(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Zi={number:W0,bool:QT,bytes:Wy,hash:e3,exists:t3,output:n3};function i3(e,t,n,i){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,i);const s=BigInt(32),r=BigInt(4294967295),o=Number(n>>s&r),a=Number(n&r),c=i?4:0,d=i?0:4;e.setUint32(t+c,o,i),e.setUint32(t+d,a,i)}let Gy=class extends Jp{constructor(t,n,i,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=i,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Dh(this.buffer)}update(t){Zi.exists(this);const{view:n,buffer:i,blockLen:s}=this;t=Kd(t);const r=t.length;for(let o=0;o<r;){const a=Math.min(s-this.pos,r-o);if(a===s){const c=Dh(t);for(;s<=r-o;o+=s)this.process(c,o);continue}i.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Zi.exists(this),Zi.output(t,this),this.finished=!0;const{buffer:n,view:i,blockLen:s,isLE:r}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(i,0),o=0);for(let c=o;c<s;c++)n[c]=0;i3(i,s-8,BigInt(this.length*8),r),this.process(i,0);const a=Dh(t);this.get().forEach((c,d)=>a.setUint32(4*d,c,r))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const i=t.slice(0,n);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:i,length:s,finished:r,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=r,t.destroyed=o,s%n&&t.buffer.set(i),t}};const s3=(e,t,n)=>e&t^~e&n,r3=(e,t,n)=>e&t^e&n^t&n,o3=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Wr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Gr=new Uint32Array(64);let a3=class extends Gy{constructor(){super(64,32,8,!1),this.A=Wr[0]|0,this.B=Wr[1]|0,this.C=Wr[2]|0,this.D=Wr[3]|0,this.E=Wr[4]|0,this.F=Wr[5]|0,this.G=Wr[6]|0,this.H=Wr[7]|0}get(){const{A:t,B:n,C:i,D:s,E:r,F:o,G:a,H:c}=this;return[t,n,i,s,r,o,a,c]}set(t,n,i,s,r,o,a,c){this.A=t|0,this.B=n|0,this.C=i|0,this.D=s|0,this.E=r|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let l=0;l<16;l++,n+=4)Gr[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const f=Gr[l-15],p=Gr[l-2],m=Ys(f,7)^Ys(f,18)^f>>>3,_=Ys(p,17)^Ys(p,19)^p>>>10;Gr[l]=_+Gr[l-7]+m+Gr[l-16]|0}let{A:i,B:s,C:r,D:o,E:a,F:c,G:d,H:u}=this;for(let l=0;l<64;l++){const f=Ys(a,6)^Ys(a,11)^Ys(a,25),p=u+f+s3(a,c,d)+o3[l]+Gr[l]|0,_=(Ys(i,2)^Ys(i,13)^Ys(i,22))+r3(i,s,r)|0;u=d,d=c,c=a,a=o+p|0,o=r,r=s,s=i,i=p+_|0}i=i+this.A|0,s=s+this.B|0,r=r+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,d=d+this.G|0,u=u+this.H|0,this.set(i,s,r,o,a,c,d,u)}roundClean(){Gr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const c3=Wd(()=>new a3),vu=BigInt(2**32-1),G0=BigInt(32);function Vy(e,t=!1){return t?{h:Number(e&vu),l:Number(e>>G0&vu)}:{h:Number(e>>G0&vu)|0,l:Number(e&vu)|0}}function d3(e,t=!1){let n=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:r,l:o}=Vy(e[s],t);[n[s],i[s]]=[r,o]}return[n,i]}const u3=(e,t)=>BigInt(e>>>0)<<G0|BigInt(t>>>0),l3=(e,t,n)=>e>>>n,f3=(e,t,n)=>e<<32-n|t>>>n,h3=(e,t,n)=>e>>>n|t<<32-n,p3=(e,t,n)=>e<<32-n|t>>>n,g3=(e,t,n)=>e<<64-n|t>>>n-32,m3=(e,t,n)=>e>>>n-32|t<<64-n,_3=(e,t)=>t,b3=(e,t)=>e,y3=(e,t,n)=>e<<n|t>>>32-n,w3=(e,t,n)=>t<<n|e>>>32-n,v3=(e,t,n)=>t<<n-32|e>>>64-n,x3=(e,t,n)=>e<<n-32|t>>>64-n;function T3(e,t,n,i){const s=(t>>>0)+(i>>>0);return{h:e+n+(s/2**32|0)|0,l:s|0}}const A3=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),k3=(e,t,n,i)=>t+n+i+(e/2**32|0)|0,S3=(e,t,n,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),E3=(e,t,n,i,s)=>t+n+i+s+(e/2**32|0)|0,P3=(e,t,n,i,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0)+(s>>>0),C3=(e,t,n,i,s,r)=>t+n+i+s+r+(e/2**32|0)|0,$t={fromBig:Vy,split:d3,toBig:u3,shrSH:l3,shrSL:f3,rotrSH:h3,rotrSL:p3,rotrBH:g3,rotrBL:m3,rotr32H:_3,rotr32L:b3,rotlSH:y3,rotlSL:w3,rotlBH:v3,rotlBL:x3,add:T3,add3L:A3,add3H:k3,add4L:S3,add4H:E3,add5H:C3,add5L:P3},[Xy,Jy,Zy]=[[],[],[]],I3=BigInt(0),Vc=BigInt(1),B3=BigInt(2),O3=BigInt(7),$3=BigInt(256),R3=BigInt(113);for(let e=0,t=Vc,n=1,i=0;e<24;e++){[n,i]=[i,(2*n+3*i)%5],Xy.push(2*(5*i+n)),Jy.push((e+1)*(e+2)/2%64);let s=I3;for(let r=0;r<7;r++)t=(t<<Vc^(t>>O3)*R3)%$3,t&B3&&(s^=Vc<<(Vc<<BigInt(r))-Vc);Zy.push(s)}const[U3,M3]=$t.split(Zy,!0),t_=(e,t,n)=>n>32?$t.rotlBH(e,t,n):$t.rotlSH(e,t,n),n_=(e,t,n)=>n>32?$t.rotlBL(e,t,n):$t.rotlSL(e,t,n);function D3(e,t=24){const n=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,d=n[c],u=n[c+1],l=t_(d,u,1)^n[a],f=n_(d,u,1)^n[a+1];for(let p=0;p<50;p+=10)e[o+p]^=l,e[o+p+1]^=f}let s=e[2],r=e[3];for(let o=0;o<24;o++){const a=Jy[o],c=t_(s,r,a),d=n_(s,r,a),u=Xy[o];s=e[u],r=e[u+1],e[u]=c,e[u+1]=d}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=U3[i],e[1]^=M3[i]}n.fill(0)}let Yy=class Qy extends Jp{constructor(t,n,i,s=!1,r=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=i,this.enableXOF=s,this.rounds=r,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Zi.number(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=VT(this.state)}keccak(){D3(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Zi.exists(this);const{blockLen:n,state:i}=this;t=Kd(t);const s=t.length;for(let r=0;r<s;){const o=Math.min(n-this.pos,s-r);for(let a=0;a<o;a++)i[this.pos++]^=t[r++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:i,blockLen:s}=this;t[i]^=n,n&128&&i===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Zi.exists(this,!1),Zi.bytes(t),this.finish();const n=this.state,{blockLen:i}=this;for(let s=0,r=t.length;s<r;){this.posOut>=i&&this.keccak();const o=Math.min(i-this.posOut,r-s);t.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Zi.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Zi.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:i,outputLen:s,rounds:r,enableXOF:o}=this;return t||(t=new Qy(n,i,s,o,r)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=r,t.suffix=i,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}};const Oo=(e,t,n)=>Wd(()=>new Yy(t,e,n));Oo(6,144,224/8);const uc=Oo(6,136,256/8);Oo(6,104,384/8);Oo(6,72,512/8);Oo(1,144,224/8);Oo(1,136,256/8);Oo(1,104,384/8);Oo(1,72,512/8);const ew=(e,t,n)=>YT((i={})=>new Yy(t,e,i.dkLen===void 0?n:i.dkLen,!0));ew(31,168,128/8);ew(31,136,256/8);let tw=class extends Jp{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Zi.hash(t);const i=Kd(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,r=new Uint8Array(s);r.set(i.length>s?t.create().update(i).digest():i);for(let o=0;o<r.length;o++)r[o]^=54;this.iHash.update(r),this.oHash=t.create();for(let o=0;o<r.length;o++)r[o]^=106;this.oHash.update(r),r.fill(0)}update(t){return Zi.exists(this),this.iHash.update(t),this}digestInto(t){Zi.exists(this),Zi.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:i,finished:s,destroyed:r,blockLen:o,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=r,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=i._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Zp=(e,t,n)=>new tw(e,t).update(n).digest();Zp.create=(e,t)=>new tw(e,t);const[j3,q3]=$t.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Vr=new Uint32Array(80),Xr=new Uint32Array(80);let Yp=class extends Gy{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:i,Bl:s,Ch:r,Cl:o,Dh:a,Dl:c,Eh:d,El:u,Fh:l,Fl:f,Gh:p,Gl:m,Hh:_,Hl:x}=this;return[t,n,i,s,r,o,a,c,d,u,l,f,p,m,_,x]}set(t,n,i,s,r,o,a,c,d,u,l,f,p,m,_,x){this.Ah=t|0,this.Al=n|0,this.Bh=i|0,this.Bl=s|0,this.Ch=r|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=d|0,this.El=u|0,this.Fh=l|0,this.Fl=f|0,this.Gh=p|0,this.Gl=m|0,this.Hh=_|0,this.Hl=x|0}process(t,n){for(let T=0;T<16;T++,n+=4)Vr[T]=t.getUint32(n),Xr[T]=t.getUint32(n+=4);for(let T=16;T<80;T++){const S=Vr[T-15]|0,P=Xr[T-15]|0,z=$t.rotrSH(S,P,1)^$t.rotrSH(S,P,8)^$t.shrSH(S,P,7),X=$t.rotrSL(S,P,1)^$t.rotrSL(S,P,8)^$t.shrSL(S,P,7),G=Vr[T-2]|0,te=Xr[T-2]|0,N=$t.rotrSH(G,te,19)^$t.rotrBH(G,te,61)^$t.shrSH(G,te,6),R=$t.rotrSL(G,te,19)^$t.rotrBL(G,te,61)^$t.shrSL(G,te,6),M=$t.add4L(X,R,Xr[T-7],Xr[T-16]),A=$t.add4H(M,z,N,Vr[T-7],Vr[T-16]);Vr[T]=A|0,Xr[T]=M|0}let{Ah:i,Al:s,Bh:r,Bl:o,Ch:a,Cl:c,Dh:d,Dl:u,Eh:l,El:f,Fh:p,Fl:m,Gh:_,Gl:x,Hh:C,Hl:k}=this;for(let T=0;T<80;T++){const S=$t.rotrSH(l,f,14)^$t.rotrSH(l,f,18)^$t.rotrBH(l,f,41),P=$t.rotrSL(l,f,14)^$t.rotrSL(l,f,18)^$t.rotrBL(l,f,41),z=l&p^~l&_,X=f&m^~f&x,G=$t.add5L(k,P,X,q3[T],Xr[T]),te=$t.add5H(G,C,S,z,j3[T],Vr[T]),N=G|0,R=$t.rotrSH(i,s,28)^$t.rotrBH(i,s,34)^$t.rotrBH(i,s,39),M=$t.rotrSL(i,s,28)^$t.rotrBL(i,s,34)^$t.rotrBL(i,s,39),A=i&r^i&a^r&a,h=s&o^s&c^o&c;C=_|0,k=x|0,_=p|0,x=m|0,p=l|0,m=f|0,{h:l,l:f}=$t.add(d|0,u|0,te|0,N|0),d=a|0,u=c|0,a=r|0,c=o|0,r=i|0,o=s|0;const y=$t.add3L(N,M,h);i=$t.add3H(y,te,R,A),s=y|0}({h:i,l:s}=$t.add(this.Ah|0,this.Al|0,i|0,s|0)),{h:r,l:o}=$t.add(this.Bh|0,this.Bl|0,r|0,o|0),{h:a,l:c}=$t.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:d,l:u}=$t.add(this.Dh|0,this.Dl|0,d|0,u|0),{h:l,l:f}=$t.add(this.Eh|0,this.El|0,l|0,f|0),{h:p,l:m}=$t.add(this.Fh|0,this.Fl|0,p|0,m|0),{h:_,l:x}=$t.add(this.Gh|0,this.Gl|0,_|0,x|0),{h:C,l:k}=$t.add(this.Hh|0,this.Hl|0,C|0,k|0),this.set(i,s,r,o,a,c,d,u,l,f,p,m,_,x,C,k)}roundClean(){Vr.fill(0),Xr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},L3=class extends Yp{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},N3=class extends Yp{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};const nw=Wd(()=>new Yp);Wd(()=>new L3);Wd(()=>new N3);var V0={},F3={get exports(){return V0},set exports(e){V0=e}},yl={},z3={get exports(){return yl},set exports(e){yl=e}},iw=function(t,n){return function(){for(var s=new Array(arguments.length),r=0;r<s.length;r++)s[r]=arguments[r];return t.apply(n,s)}},H3=iw,Qp=Object.prototype.toString,eg=function(e){return function(t){var n=Qp.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function da(e){return e=e.toLowerCase(),function(n){return eg(n)===e}}function tg(e){return Array.isArray(e)}function wl(e){return typeof e>"u"}function K3(e){return e!==null&&!wl(e)&&e.constructor!==null&&!wl(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var sw=da("ArrayBuffer");function W3(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&sw(e.buffer),t}function G3(e){return typeof e=="string"}function V3(e){return typeof e=="number"}function rw(e){return e!==null&&typeof e=="object"}function zu(e){if(eg(e)!=="object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}var X3=da("Date"),J3=da("File"),Z3=da("Blob"),Y3=da("FileList");function ng(e){return Qp.call(e)==="[object Function]"}function Q3(e){return rw(e)&&ng(e.pipe)}function eA(e){var t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||Qp.call(e)===t||ng(e.toString)&&e.toString()===t)}var tA=da("URLSearchParams");function nA(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function iA(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function ig(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),tg(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}function X0(){var e={};function t(s,r){zu(e[r])&&zu(s)?e[r]=X0(e[r],s):zu(s)?e[r]=X0({},s):tg(s)?e[r]=s.slice():e[r]=s}for(var n=0,i=arguments.length;n<i;n++)ig(arguments[n],t);return e}function sA(e,t,n){return ig(t,function(s,r){n&&typeof s=="function"?e[r]=H3(s,n):e[r]=s}),e}function rA(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function oA(e,t,n,i){e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)}function aA(e,t,n){var i,s,r,o={};t=t||{};do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)r=i[s],o[r]||(t[r]=e[r],o[r]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t}function cA(e,t,n){e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;var i=e.indexOf(t,n);return i!==-1&&i===n}function dA(e){if(!e)return null;var t=e.length;if(wl(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n}var uA=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),Ai={isArray:tg,isArrayBuffer:sw,isBuffer:K3,isFormData:eA,isArrayBufferView:W3,isString:G3,isNumber:V3,isObject:rw,isPlainObject:zu,isUndefined:wl,isDate:X3,isFile:J3,isBlob:Z3,isFunction:ng,isStream:Q3,isURLSearchParams:tA,isStandardBrowserEnv:iA,forEach:ig,merge:X0,extend:sA,trim:nA,stripBOM:rA,inherits:oA,toFlatObject:aA,kindOf:eg,kindOfTest:da,endsWith:cA,toArray:dA,isTypedArray:uA,isFileList:Y3},ka=Ai;function i_(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var ow=function(t,n,i){if(!n)return t;var s;if(i)s=i(n);else if(ka.isURLSearchParams(n))s=n.toString();else{var r=[];ka.forEach(n,function(c,d){c===null||typeof c>"u"||(ka.isArray(c)?d=d+"[]":c=[c],ka.forEach(c,function(l){ka.isDate(l)?l=l.toISOString():ka.isObject(l)&&(l=JSON.stringify(l)),r.push(i_(d)+"="+i_(l))}))}),s=r.join("&")}if(s){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t},lA=Ai;function gf(){this.handlers=[]}gf.prototype.use=function(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};gf.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};gf.prototype.forEach=function(t){lA.forEach(this.handlers,function(i){i!==null&&t(i)})};var fA=gf,hA=Ai,pA=function(t,n){hA.forEach(t,function(s,r){r!==n&&r.toUpperCase()===n.toUpperCase()&&(t[n]=s,delete t[r])})},aw=Ai;function lc(e,t,n,i,s){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s)}aw.inherits(lc,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var cw=lc.prototype,dw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){dw[e]={value:e}});Object.defineProperties(lc,dw);Object.defineProperty(cw,"isAxiosError",{value:!0});lc.from=function(e,t,n,i,s,r){var o=Object.create(cw);return aw.toFlatObject(e,o,function(c){return c!==Error.prototype}),lc.call(o,e.message,t,n,i,s),o.name=e.name,r&&Object.assign(o,r),o};var Cc=lc,uw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ps=Ai;function gA(e,t){t=t||new FormData;var n=[];function i(r){return r===null?"":Ps.isDate(r)?r.toISOString():Ps.isArrayBuffer(r)||Ps.isTypedArray(r)?typeof Blob=="function"?new Blob([r]):Buffer.from(r):r}function s(r,o){if(Ps.isPlainObject(r)||Ps.isArray(r)){if(n.indexOf(r)!==-1)throw Error("Circular reference detected in "+o);n.push(r),Ps.forEach(r,function(c,d){if(!Ps.isUndefined(c)){var u=o?o+"."+d:d,l;if(c&&!o&&typeof c=="object"){if(Ps.endsWith(d,"{}"))c=JSON.stringify(c);else if(Ps.endsWith(d,"[]")&&(l=Ps.toArray(c))){l.forEach(function(f){!Ps.isUndefined(f)&&t.append(u,i(f))});return}}s(c,u)}}),n.pop()}else t.append(o,i(r))}return s(e),t}var lw=gA,jh,s_;function mA(){if(s_)return jh;s_=1;var e=Cc;return jh=function(n,i,s){var r=s.config.validateStatus;!s.status||!r||r(s.status)?n(s):i(new e("Request failed with status code "+s.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))},jh}var qh,r_;function _A(){if(r_)return qh;r_=1;var e=Ai;return qh=e.isStandardBrowserEnv()?function(){return{write:function(i,s,r,o,a,c){var d=[];d.push(i+"="+encodeURIComponent(s)),e.isNumber(r)&&d.push("expires="+new Date(r).toGMTString()),e.isString(o)&&d.push("path="+o),e.isString(a)&&d.push("domain="+a),c===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(i){var s=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),qh}var bA=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},yA=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t},wA=bA,vA=yA,fw=function(t,n){return t&&!wA(n)?vA(t,n):n},Lh,o_;function xA(){if(o_)return Lh;o_=1;var e=Ai,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Lh=function(i){var s={},r,o,a;return i&&e.forEach(i.split(`
`),function(d){if(a=d.indexOf(":"),r=e.trim(d.substr(0,a)).toLowerCase(),o=e.trim(d.substr(a+1)),r){if(s[r]&&t.indexOf(r)>=0)return;r==="set-cookie"?s[r]=(s[r]?s[r]:[]).concat([o]):s[r]=s[r]?s[r]+", "+o:o}}),s},Lh}var Nh,a_;function TA(){if(a_)return Nh;a_=1;var e=Ai;return Nh=e.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),s;function r(o){var a=o;return n&&(i.setAttribute("href",a),a=i.href),i.setAttribute("href",a),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return s=r(window.location.href),function(a){var c=e.isString(a)?r(a):a;return c.protocol===s.protocol&&c.host===s.host}}():function(){return function(){return!0}}(),Nh}var Fh,c_;function mf(){if(c_)return Fh;c_=1;var e=Cc,t=Ai;function n(i){e.call(this,i??"canceled",e.ERR_CANCELED),this.name="CanceledError"}return t.inherits(n,e,{__CANCEL__:!0}),Fh=n,Fh}var zh,d_;function AA(){return d_||(d_=1,zh=function(t){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}),zh}var Hh,u_;function l_(){if(u_)return Hh;u_=1;var e=Ai,t=mA(),n=_A(),i=ow,s=fw,r=xA(),o=TA(),a=uw,c=Cc,d=mf(),u=AA();return Hh=function(f){return new Promise(function(m,_){var x=f.data,C=f.headers,k=f.responseType,T;function S(){f.cancelToken&&f.cancelToken.unsubscribe(T),f.signal&&f.signal.removeEventListener("abort",T)}e.isFormData(x)&&e.isStandardBrowserEnv()&&delete C["Content-Type"];var P=new XMLHttpRequest;if(f.auth){var z=f.auth.username||"",X=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";C.Authorization="Basic "+btoa(z+":"+X)}var G=s(f.baseURL,f.url);P.open(f.method.toUpperCase(),i(G,f.params,f.paramsSerializer),!0),P.timeout=f.timeout;function te(){if(P){var M="getAllResponseHeaders"in P?r(P.getAllResponseHeaders()):null,A=!k||k==="text"||k==="json"?P.responseText:P.response,h={data:A,status:P.status,statusText:P.statusText,headers:M,config:f,request:P};t(function(E){m(E),S()},function(E){_(E),S()},h),P=null}}if("onloadend"in P?P.onloadend=te:P.onreadystatechange=function(){!P||P.readyState!==4||P.status===0&&!(P.responseURL&&P.responseURL.indexOf("file:")===0)||setTimeout(te)},P.onabort=function(){P&&(_(new c("Request aborted",c.ECONNABORTED,f,P)),P=null)},P.onerror=function(){_(new c("Network Error",c.ERR_NETWORK,f,P,P)),P=null},P.ontimeout=function(){var A=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",h=f.transitional||a;f.timeoutErrorMessage&&(A=f.timeoutErrorMessage),_(new c(A,h.clarifyTimeoutError?c.ETIMEDOUT:c.ECONNABORTED,f,P)),P=null},e.isStandardBrowserEnv()){var N=(f.withCredentials||o(G))&&f.xsrfCookieName?n.read(f.xsrfCookieName):void 0;N&&(C[f.xsrfHeaderName]=N)}"setRequestHeader"in P&&e.forEach(C,function(A,h){typeof x>"u"&&h.toLowerCase()==="content-type"?delete C[h]:P.setRequestHeader(h,A)}),e.isUndefined(f.withCredentials)||(P.withCredentials=!!f.withCredentials),k&&k!=="json"&&(P.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&P.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&P.upload&&P.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(T=function(M){P&&(_(!M||M&&M.type?new d:M),P.abort(),P=null)},f.cancelToken&&f.cancelToken.subscribe(T),f.signal&&(f.signal.aborted?T():f.signal.addEventListener("abort",T))),x||(x=null);var R=u(G);if(R&&["http","https","file"].indexOf(R)===-1){_(new c("Unsupported protocol "+R+":",c.ERR_BAD_REQUEST,f));return}P.send(x)})},Hh}var Kh,f_;function kA(){return f_||(f_=1,Kh=null),Kh}var ni=Ai,h_=pA,p_=Cc,SA=uw,EA=lw,PA={"Content-Type":"application/x-www-form-urlencoded"};function g_(e,t){!ni.isUndefined(e)&&ni.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function CA(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=l_()),e}function IA(e,t,n){if(ni.isString(e))try{return(t||JSON.parse)(e),ni.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}var _f={transitional:SA,adapter:CA(),transformRequest:[function(t,n){if(h_(n,"Accept"),h_(n,"Content-Type"),ni.isFormData(t)||ni.isArrayBuffer(t)||ni.isBuffer(t)||ni.isStream(t)||ni.isFile(t)||ni.isBlob(t))return t;if(ni.isArrayBufferView(t))return t.buffer;if(ni.isURLSearchParams(t))return g_(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var i=ni.isObject(t),s=n&&n["Content-Type"],r;if((r=ni.isFileList(t))||i&&s==="multipart/form-data"){var o=this.env&&this.env.FormData;return EA(r?{"files[]":t}:t,o&&new o)}else if(i||s==="application/json")return g_(n,"application/json"),IA(t);return t}],transformResponse:[function(t){var n=this.transitional||_f.transitional,i=n&&n.silentJSONParsing,s=n&&n.forcedJSONParsing,r=!i&&this.responseType==="json";if(r||s&&ni.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(r)throw o.name==="SyntaxError"?p_.from(o,p_.ERR_BAD_RESPONSE,this,null,this.response):o}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:kA()},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ni.forEach(["delete","get","head"],function(t){_f.headers[t]={}});ni.forEach(["post","put","patch"],function(t){_f.headers[t]=ni.merge(PA)});var sg=_f,BA=Ai,OA=sg,$A=function(t,n,i){var s=this||OA;return BA.forEach(i,function(o){t=o.call(s,t,n)}),t},Wh,m_;function hw(){return m_||(m_=1,Wh=function(t){return!!(t&&t.__CANCEL__)}),Wh}var __=Ai,Gh=$A,RA=hw(),UA=sg,MA=mf();function Vh(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new MA}var DA=function(t){Vh(t),t.headers=t.headers||{},t.data=Gh.call(t,t.data,t.headers,t.transformRequest),t.headers=__.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),__.forEach(["delete","get","head","post","put","patch","common"],function(s){delete t.headers[s]});var n=t.adapter||UA.adapter;return n(t).then(function(s){return Vh(t),s.data=Gh.call(t,s.data,s.headers,t.transformResponse),s},function(s){return RA(s)||(Vh(t),s&&s.response&&(s.response.data=Gh.call(t,s.response.data,s.response.headers,t.transformResponse))),Promise.reject(s)})},Wi=Ai,pw=function(t,n){n=n||{};var i={};function s(u,l){return Wi.isPlainObject(u)&&Wi.isPlainObject(l)?Wi.merge(u,l):Wi.isPlainObject(l)?Wi.merge({},l):Wi.isArray(l)?l.slice():l}function r(u){if(Wi.isUndefined(n[u])){if(!Wi.isUndefined(t[u]))return s(void 0,t[u])}else return s(t[u],n[u])}function o(u){if(!Wi.isUndefined(n[u]))return s(void 0,n[u])}function a(u){if(Wi.isUndefined(n[u])){if(!Wi.isUndefined(t[u]))return s(void 0,t[u])}else return s(void 0,n[u])}function c(u){if(u in n)return s(t[u],n[u]);if(u in t)return s(void 0,t[u])}var d={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return Wi.forEach(Object.keys(t).concat(Object.keys(n)),function(l){var f=d[l]||r,p=f(l);Wi.isUndefined(p)&&f!==c||(i[l]=p)}),i},Xh,b_;function gw(){return b_||(b_=1,Xh={version:"0.27.2"}),Xh}var jA=gw().version,_o=Cc,rg={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){rg[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});var y_={};rg.transitional=function(t,n,i){function s(r,o){return"[Axios v"+jA+"] Transitional option '"+r+"'"+o+(i?". "+i:"")}return function(r,o,a){if(t===!1)throw new _o(s(o," has been removed"+(n?" in "+n:"")),_o.ERR_DEPRECATED);return n&&!y_[o]&&(y_[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(r,o,a):!0}};function qA(e,t,n){if(typeof e!="object")throw new _o("options must be an object",_o.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(e),s=i.length;s-- >0;){var r=i[s],o=t[r];if(o){var a=e[r],c=a===void 0||o(a,r,e);if(c!==!0)throw new _o("option "+r+" must be "+c,_o.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new _o("Unknown option "+r,_o.ERR_BAD_OPTION)}}var LA={assertOptions:qA,validators:rg},mw=Ai,NA=ow,w_=fA,v_=DA,bf=pw,FA=fw,_w=LA,Sa=_w.validators;function fc(e){this.defaults=e,this.interceptors={request:new w_,response:new w_}}fc.prototype.request=function(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=bf(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var i=n.transitional;i!==void 0&&_w.assertOptions(i,{silentJSONParsing:Sa.transitional(Sa.boolean),forcedJSONParsing:Sa.transitional(Sa.boolean),clarifyTimeoutError:Sa.transitional(Sa.boolean)},!1);var s=[],r=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(n)===!1||(r=r&&p.synchronous,s.unshift(p.fulfilled,p.rejected))});var o=[];this.interceptors.response.forEach(function(p){o.push(p.fulfilled,p.rejected)});var a;if(!r){var c=[v_,void 0];for(Array.prototype.unshift.apply(c,s),c=c.concat(o),a=Promise.resolve(n);c.length;)a=a.then(c.shift(),c.shift());return a}for(var d=n;s.length;){var u=s.shift(),l=s.shift();try{d=u(d)}catch(f){l(f);break}}try{a=v_(d)}catch(f){return Promise.reject(f)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};fc.prototype.getUri=function(t){t=bf(this.defaults,t);var n=FA(t.baseURL,t.url);return NA(n,t.params,t.paramsSerializer)};mw.forEach(["delete","get","head","options"],function(t){fc.prototype[t]=function(n,i){return this.request(bf(i||{},{method:t,url:n,data:(i||{}).data}))}});mw.forEach(["post","put","patch"],function(t){function n(i){return function(r,o,a){return this.request(bf(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}fc.prototype[t]=n(),fc.prototype[t+"Form"]=n(!0)});var zA=fc,Jh,x_;function HA(){if(x_)return Jh;x_=1;var e=mf();function t(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(o){i=o});var s=this;this.promise.then(function(r){if(s._listeners){var o,a=s._listeners.length;for(o=0;o<a;o++)s._listeners[o](r);s._listeners=null}}),this.promise.then=function(r){var o,a=new Promise(function(c){s.subscribe(c),o=c}).then(r);return a.cancel=function(){s.unsubscribe(o)},a},n(function(o){s.reason||(s.reason=new e(o),i(s.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]},t.prototype.unsubscribe=function(i){if(this._listeners){var s=this._listeners.indexOf(i);s!==-1&&this._listeners.splice(s,1)}},t.source=function(){var i,s=new t(function(o){i=o});return{token:s,cancel:i}},Jh=t,Jh}var Zh,T_;function KA(){return T_||(T_=1,Zh=function(t){return function(i){return t.apply(null,i)}}),Zh}var Yh,A_;function WA(){if(A_)return Yh;A_=1;var e=Ai;return Yh=function(n){return e.isObject(n)&&n.isAxiosError===!0},Yh}var k_=Ai,GA=iw,Hu=zA,VA=pw,XA=sg;function bw(e){var t=new Hu(e),n=GA(Hu.prototype.request,t);return k_.extend(n,Hu.prototype,t),k_.extend(n,t),n.create=function(s){return bw(VA(e,s))},n}var zi=bw(XA);zi.Axios=Hu;zi.CanceledError=mf();zi.CancelToken=HA();zi.isCancel=hw();zi.VERSION=gw().version;zi.toFormData=lw;zi.AxiosError=Cc;zi.Cancel=zi.CanceledError;zi.all=function(t){return Promise.all(t)};zi.spread=KA();zi.isAxiosError=WA();z3.exports=zi;yl.default=zi;(function(e){e.exports=yl})(F3);const JA=Hp(V0);async function ZA(e){var t;const{params:n,method:i,url:s,headers:r,body:o,overrides:a}=e,c={headers:r,method:i,url:s,params:n,data:o,withCredentials:(t=a==null?void 0:a.WITH_CREDENTIALS)!=null?t:!0};try{const d=await JA(c);return{status:d.status,statusText:d.statusText,data:d.data,headers:d.headers,config:d.config}}catch(d){const u=d;if(u.response)return u.response;throw d}}var J0={},YA={get exports(){return J0},set exports(e){J0=e}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function s(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function r(c,d,u,l,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,l||c,f),m=n?n+d:d;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],p]:c._events[m].push(p):(c._events[m]=p,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new i:delete c._events[d]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var d=[],u,l;if(this._eventsCount===0)return d;for(l in u=this._events)t.call(u,l)&&d.push(n?l.slice(1):l);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},a.prototype.listeners=function(d){var u=n?n+d:d,l=this._events[u];if(!l)return[];if(l.fn)return[l.fn];for(var f=0,p=l.length,m=new Array(p);f<p;f++)m[f]=l[f].fn;return m},a.prototype.listenerCount=function(d){var u=n?n+d:d,l=this._events[u];return l?l.fn?1:l.length:0},a.prototype.emit=function(d,u,l,f,p,m){var _=n?n+d:d;if(!this._events[_])return!1;var x=this._events[_],C=arguments.length,k,T;if(x.fn){switch(x.once&&this.removeListener(d,x.fn,void 0,!0),C){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,u),!0;case 3:return x.fn.call(x.context,u,l),!0;case 4:return x.fn.call(x.context,u,l,f),!0;case 5:return x.fn.call(x.context,u,l,f,p),!0;case 6:return x.fn.call(x.context,u,l,f,p,m),!0}for(T=1,k=new Array(C-1);T<C;T++)k[T-1]=arguments[T];x.fn.apply(x.context,k)}else{var S=x.length,P;for(T=0;T<S;T++)switch(x[T].once&&this.removeListener(d,x[T].fn,void 0,!0),C){case 1:x[T].fn.call(x[T].context);break;case 2:x[T].fn.call(x[T].context,u);break;case 3:x[T].fn.call(x[T].context,u,l);break;case 4:x[T].fn.call(x[T].context,u,l,f);break;default:if(!k)for(P=1,k=new Array(C-1);P<C;P++)k[P-1]=arguments[P];x[T].fn.apply(x[T].context,k)}}return!0},a.prototype.on=function(d,u,l){return r(this,d,u,l,!1)},a.prototype.once=function(d,u,l){return r(this,d,u,l,!0)},a.prototype.removeListener=function(d,u,l,f){var p=n?n+d:d;if(!this._events[p])return this;if(!u)return o(this,p),this;var m=this._events[p];if(m.fn)m.fn===u&&(!f||m.once)&&(!l||m.context===l)&&o(this,p);else{for(var _=0,x=[],C=m.length;_<C;_++)(m[_].fn!==u||f&&!m[_].once||l&&m[_].context!==l)&&x.push(m[_]);x.length?this._events[p]=x.length===1?x[0]:x:o(this,p)}return this},a.prototype.removeAllListeners=function(d){var u;return d?(u=n?n+d:d,this._events[u]&&o(this,u)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})(YA);var yw=Object.defineProperty,QA=Object.getOwnPropertyDescriptor,yf=(e,t)=>{for(var n in t)yw(e,n,{get:t[n],enumerable:!0})},wn=(e,t,n,i)=>{for(var s=i>1?void 0:i?QA(t,n):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(s=(i?o(t,n,s):o(s))||s);return i&&s&&yw(t,n,s),s},ek=/^m(\/[0-9]+')+$/,ww=e=>e.replace("'",""),tk="ed25519 seed",nk=2147483648,vw=e=>{const n=Zp.create(nw,tk).update(Ky(e)).digest(),i=n.slice(0,32),s=n.slice(32);return{key:i,chainCode:s}},xw=({key:e,chainCode:t},n)=>{const i=new ArrayBuffer(4);new DataView(i).setUint32(0,n);const s=new Uint8Array(i),r=new Uint8Array([0]),o=new Uint8Array([...r,...e,...s]),a=Zp.create(nw,t).update(o).digest(),c=a.slice(0,32),d=a.slice(32);return{key:c,chainCode:d}},ik=(e,t=!0)=>{const i=dr.sign.keyPair.fromSeed(e).secretKey.subarray(32),s=new Uint8Array([0]);return t?new Uint8Array([...s,...i]):i},Tw=e=>ek.test(e)?!e.split("/").slice(1).map(ww).some(Number.isNaN):!1,Aw=(e,t,n=nk)=>{if(!Tw(e))throw new Error("Invalid derivation path");const{key:i,chainCode:s}=vw(t);return e.split("/").slice(1).map(ww).map(o=>parseInt(o,10)).reduce((o,a)=>xw(o,a+n),{key:i,chainCode:s})},sk="1.20.0";async function td(e){return new Promise(t=>{setTimeout(t,e)})}var S_="/v1";function rk(e){let t=`${e}`;return t.endsWith("/")&&(t=t.substring(0,t.length-1)),t.endsWith(S_)||(t=`${t}${S_}`),t}var kw=2e5,Sw=20,Ew=20,vl="0x1::aptos_coin::AptosCoin";function wf(e){let t,n,i;return typeof e=="object"?(t=e.hashFunction,n=e.ttlMs,i=e.tags):t=e,(s,r,o)=>{if(o.value!=null)o.value=E_(o.value,t,n,i);else if(o.get!=null)o.get=E_(o.get,t,n,i);else throw new Error("Only put a Memoize() decorator on a method or get accessor.")}}function Pw(e,t){return wf({ttlMs:e,hashFunction:t})}var Ku=new Map;function ok(e){const t=new Set;for(const n of e){const i=Ku.get(n);if(i)for(const s of i)t.has(s)||(s.clear(),t.add(s))}return t.size}function E_(e,t,n=0,i){const s=Symbol("__memoized_map__");return function(...r){let o;const a=this;a.hasOwnProperty(s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!1,writable:!1,value:new Map});const c=a[s];if(Array.isArray(i))for(const d of i)Ku.has(d)?Ku.get(d).push(c):Ku.set(d,[c]);if(t||r.length>0||n>0){let d;t===!0?d=r.map(f=>f.toString()).join("!"):t?d=t.apply(a,r):d=r[0];const u=`${d}__timestamp`;let l=!1;if(n>0)if(!c.has(u))l=!0;else{const f=c.get(u);l=Date.now()-f>n}c.has(d)&&!l?o=c.get(d):(o=e.apply(a,r),c.set(d,o),n>0&&c.set(u,Date.now()))}else{const d=a;c.has(d)?o=c.get(d):(o=e.apply(a,r),c.set(d,o))}return o}}var og=class extends Error{constructor(e,t,n){super(n),this.name="AptosApiError",this.url=t.url,this.status=t.status,this.statusText=t.statusText,this.data=t.data,this.request=e}},ak={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable"};async function ck(e,t,n,i,s,r){const o={...r==null?void 0:r.HEADERS,"x-aptos-client":`aptos-ts-sdk/${sk}`,"content-type":i??"application/json"};return r!=null&&r.TOKEN&&(o.Authorization=`Bearer ${r==null?void 0:r.TOKEN}`),await ZA({url:e,method:t,body:n,params:s,headers:o,overrides:r})}async function ag(e){const{url:t,endpoint:n,method:i,body:s,contentType:r,params:o,overrides:a}=e,c=`${t}/${n??""}`,d=await ck(c,i,s,r,o,a),u={status:d.status,statusText:d.statusText,data:d.data,headers:d.headers,config:d.config,url:c};if(u.status>=200&&u.status<300)return u;const l=ak[u.status];throw new og(e,u,l??"Generic Error")}async function Ri(e){return await ag({...e,method:"GET"})}async function zo(e){return await ag({...e,method:"POST"})}async function P_(e){const t=[];let n;const i=e.params;for(;;){i.start=n;const s=await Ri({url:e.url,endpoint:e.endpoint,params:i,originMethod:e.originMethod,overrides:e.overrides});if(n=s.headers["x-aptos-cursor"],delete s.headers,t.push(...s.data),n==null)break}return t}var xl={mainnet:"https://indexer.mainnet.aptoslabs.com/v1/graphql",testnet:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",devnet:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql"},Cw={mainnet:"https://fullnode.mainnet.aptoslabs.com/v1",testnet:"https://fullnode.testnet.aptoslabs.com/v1",devnet:"https://fullnode.devnet.aptoslabs.com/v1",local:"http://localhost:8080/v1"},Z0={"https://fullnode.mainnet.aptoslabs.com/v1":"mainnet","https://fullnode.testnet.aptoslabs.com/v1":"testnet","https://fullnode.devnet.aptoslabs.com/v1":"devnet","http://localhost:8080/v1":"local"},Iw=(e=>(e.MAINNET="mainnet",e.TESTNET="testnet",e.DEVNET="devnet",e.LOCAL="local",e))(Iw||{}),De=class{static fromBuffer(t){return De.fromUint8Array(t)}static fromUint8Array(t){return new De(Hy(t))}static ensure(t){return typeof t=="string"?new De(t):t}constructor(t){t.startsWith("0x")?this.hexString=t:this.hexString=`0x${t}`}hex(){return this.hexString}noPrefix(){return this.hexString.slice(2)}toString(){return this.hex()}toShortString(){return`0x${this.hexString.replace(/^0x0*/,"")}`}toUint8Array(){return Uint8Array.from(Ky(this.noPrefix()))}},pt={};yf(pt,{AccountAddress:()=>cn,AccountAuthenticator:()=>Ao,AccountAuthenticatorEd25519:()=>lg,AccountAuthenticatorMultiEd25519:()=>fg,ArgumentABI:()=>Zd,AuthenticationKey:()=>na,ChainId:()=>Cf,ChangeSet:()=>Sk,Ed25519PublicKey:()=>ps,Ed25519Signature:()=>nr,EntryFunction:()=>Xo,EntryFunctionABI:()=>hc,FeePayerRawTransaction:()=>Sf,Identifier:()=>vi,Module:()=>Rw,ModuleId:()=>ta,MultiAgentRawTransaction:()=>kf,MultiEd25519PublicKey:()=>Gd,MultiEd25519Signature:()=>vf,MultiSig:()=>mg,MultiSigTransactionPayload:()=>gg,RawTransaction:()=>ga,RawTransactionWithData:()=>_g,RotationProofChallenge:()=>Pk,Script:()=>Af,ScriptABI:()=>qf,SignedTransaction:()=>Vd,StructTag:()=>Po,Transaction:()=>Uw,TransactionArgument:()=>Js,TransactionArgumentAddress:()=>Mf,TransactionArgumentBool:()=>jf,TransactionArgumentU128:()=>Rf,TransactionArgumentU16:()=>Bf,TransactionArgumentU256:()=>Uf,TransactionArgumentU32:()=>Of,TransactionArgumentU64:()=>$f,TransactionArgumentU8:()=>If,TransactionArgumentU8Vector:()=>Df,TransactionAuthenticator:()=>Ic,TransactionAuthenticatorEd25519:()=>xf,TransactionAuthenticatorFeePayer:()=>ug,TransactionAuthenticatorMultiAgent:()=>dg,TransactionAuthenticatorMultiEd25519:()=>Tf,TransactionPayload:()=>Xd,TransactionPayloadEntryFunction:()=>Pf,TransactionPayloadMultisig:()=>bg,TransactionPayloadScript:()=>Ef,TransactionScriptABI:()=>Lf,TypeArgumentABI:()=>Jd,TypeTag:()=>xi,TypeTagAddress:()=>So,TypeTagBool:()=>la,TypeTagParser:()=>pa,TypeTagParserError:()=>$w,TypeTagSigner:()=>hg,TypeTagStruct:()=>Eo,TypeTagU128:()=>ha,TypeTagU16:()=>Bc,TypeTagU256:()=>$c,TypeTagU32:()=>Oc,TypeTagU64:()=>fa,TypeTagU8:()=>Mr,TypeTagVector:()=>Rc,UserTransaction:()=>yg,WriteSet:()=>Ek,objectStructTag:()=>xk,optionStructTag:()=>vk,stringStructTag:()=>pg});var Bw={};yf(Bw,{Deserializer:()=>cg,Serializer:()=>On,bcsSerializeBool:()=>bk,bcsSerializeBytes:()=>fo,bcsSerializeFixedBytes:()=>wk,bcsSerializeStr:()=>yk,bcsSerializeU128:()=>mk,bcsSerializeU16:()=>pk,bcsSerializeU256:()=>_k,bcsSerializeU32:()=>gk,bcsSerializeU8:()=>Y0,bcsSerializeUint64:()=>hk,bcsToBytes:()=>Ks,deserializeVector:()=>Li,serializeVector:()=>wi,serializeVectorWithFunc:()=>fk});var dk=2**8-1,uk=2**16-1,Sd=2**32-1,Ja=BigInt(2**64)-BigInt(1),Ow=BigInt(2**128)-BigInt(1),lk=BigInt(2**256)-BigInt(1),On=class{constructor(){this.buffer=new ArrayBuffer(64),this.offset=0}ensureBufferWillHandleSize(t){for(;this.buffer.byteLength<this.offset+t;){const n=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(n).set(new Uint8Array(this.buffer)),this.buffer=n}}serialize(t){this.ensureBufferWillHandleSize(t.length),new Uint8Array(this.buffer,this.offset).set(t),this.offset+=t.length}serializeWithFunction(t,n,i){this.ensureBufferWillHandleSize(n);const s=new DataView(this.buffer,this.offset);t.apply(s,[0,i,!0]),this.offset+=n}serializeStr(t){const n=new TextEncoder;this.serializeBytes(n.encode(t))}serializeBytes(t){this.serializeU32AsUleb128(t.length),this.serialize(t)}serializeFixedBytes(t){this.serialize(t)}serializeBool(t){if(typeof t!="boolean")throw new Error("Value needs to be a boolean");const n=t?1:0;this.serialize(new Uint8Array([n]))}serializeU8(t){this.serialize(new Uint8Array([t]))}serializeU16(t){this.serializeWithFunction(DataView.prototype.setUint16,2,t)}serializeU32(t){this.serializeWithFunction(DataView.prototype.setUint32,4,t)}serializeU64(t){const n=BigInt(t.toString())&BigInt(Sd),i=BigInt(t.toString())>>BigInt(32);this.serializeU32(Number(n)),this.serializeU32(Number(i))}serializeU128(t){const n=BigInt(t.toString())&Ja,i=BigInt(t.toString())>>BigInt(64);this.serializeU64(n),this.serializeU64(i)}serializeU256(t){const n=BigInt(t.toString())&Ow,i=BigInt(t.toString())>>BigInt(128);this.serializeU128(n),this.serializeU128(i)}serializeU32AsUleb128(t){let n=t;const i=[];for(;n>>>7;)i.push(n&127|128),n>>>=7;i.push(n),this.serialize(new Uint8Array(i))}getBytes(){return new Uint8Array(this.buffer).slice(0,this.offset)}};wn([ua(0,dk)],On.prototype,"serializeU8",1);wn([ua(0,uk)],On.prototype,"serializeU16",1);wn([ua(0,Sd)],On.prototype,"serializeU32",1);wn([ua(BigInt(0),Ja)],On.prototype,"serializeU64",1);wn([ua(BigInt(0),Ow)],On.prototype,"serializeU128",1);wn([ua(BigInt(0),lk)],On.prototype,"serializeU256",1);wn([ua(0,Sd)],On.prototype,"serializeU32AsUleb128",1);function ua(e,t,n){return(i,s,r)=>{const o=r.value;return r.value=function(c){const d=BigInt(c.toString());if(d>BigInt(t.toString())||d<BigInt(e.toString()))throw new Error(n||"Value is out of range");o.apply(this,[c])},r}}var cg=class{constructor(t){this.buffer=new ArrayBuffer(t.length),new Uint8Array(this.buffer).set(t,0),this.offset=0}read(t){if(this.offset+t>this.buffer.byteLength)throw new Error("Reached to the end of buffer");const n=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,n}deserializeStr(){const t=this.deserializeBytes();return new TextDecoder().decode(t)}deserializeBytes(){const t=this.deserializeUleb128AsU32();return new Uint8Array(this.read(t))}deserializeFixedBytes(t){return new Uint8Array(this.read(t))}deserializeBool(){const t=new Uint8Array(this.read(1))[0];if(t!==1&&t!==0)throw new Error("Invalid boolean value");return t===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){const t=this.deserializeU32(),n=this.deserializeU32();return BigInt(BigInt(n)<<BigInt(32)|BigInt(t))}deserializeU128(){const t=this.deserializeU64(),n=this.deserializeU64();return BigInt(n<<BigInt(64)|t)}deserializeU256(){const t=this.deserializeU128(),n=this.deserializeU128();return BigInt(n<<BigInt(128)|t)}deserializeUleb128AsU32(){let t=BigInt(0),n=0;for(;t<Sd;){const i=this.deserializeU8();if(t|=BigInt(i&127)<<BigInt(n),!(i&128))break;n+=7}if(t>Sd)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(t)}};function wi(e,t){t.serializeU32AsUleb128(e.length),e.forEach(n=>{n.serialize(t)})}function fk(e,t){const n=new On;n.serializeU32AsUleb128(e.length);const i=n[t];return e.forEach(s=>{i.call(n,s)}),n.getBytes()}function Li(e,t){const n=e.deserializeUleb128AsU32(),i=[];for(let s=0;s<n;s+=1)i.push(t.deserialize(e));return i}function Ks(e){const t=new On;return e.serialize(t),t.getBytes()}function hk(e){const t=new On;return t.serializeU64(e),t.getBytes()}function Y0(e){const t=new On;return t.serializeU8(e),t.getBytes()}function pk(e){const t=new On;return t.serializeU16(e),t.getBytes()}function gk(e){const t=new On;return t.serializeU32(e),t.getBytes()}function mk(e){const t=new On;return t.serializeU128(e),t.getBytes()}function _k(e){const t=new On;return t.serializeU256(e),t.getBytes()}function bk(e){const t=new On;return t.serializeBool(e),t.getBytes()}function yk(e){const t=new On;return t.serializeStr(e),t.getBytes()}function fo(e){const t=new On;return t.serializeBytes(e),t.getBytes()}function wk(e){const t=new On;return t.serializeFixedBytes(e),t.getBytes()}var ds=class{constructor(t){if(t.length!==ds.LENGTH)throw new Error("Expected address of length 32");this.address=t}static fromHex(t){let n=De.ensure(t);n.noPrefix().length%2!==0&&(n=new De(`0${n.noPrefix()}`));const i=n.toUint8Array();if(i.length>ds.LENGTH)throw new Error("Hex string is too long. Address's length is 32 bytes.");if(i.length===ds.LENGTH)return new ds(i);const s=new Uint8Array(ds.LENGTH);return s.set(i,ds.LENGTH-i.length),new ds(s)}static isValid(t){if(t==="")return!1;let n=De.ensure(t);return n.noPrefix().length%2!==0&&(n=new De(`0${n.noPrefix()}`)),n.toUint8Array().length<=ds.LENGTH}toHexString(){return De.fromUint8Array(this.address).hex()}serialize(t){t.serializeFixedBytes(this.address)}static deserialize(t){return new ds(t.deserializeFixedBytes(ds.LENGTH))}static standardizeAddress(t){const n=t.toLowerCase();return`0x${(n.startsWith("0x")?n.slice(2):n).padStart(64,"0")}`}},cn=ds;cn.LENGTH=32;cn.CORE_CODE_ADDRESS=ds.fromHex("0x1");var Wu=class{constructor(t){if(t.length!==Wu.LENGTH)throw new Error(`Ed25519PublicKey length should be ${Wu.LENGTH}`);this.value=t}toBytes(){return this.value}serialize(t){t.serializeBytes(this.value)}static deserialize(t){const n=t.deserializeBytes();return new Wu(n)}},ps=Wu;ps.LENGTH=32;var Gu=class{constructor(t){if(this.value=t,t.length!==Gu.LENGTH)throw new Error(`Ed25519Signature length should be ${Gu.LENGTH}`)}serialize(t){t.serializeBytes(this.value)}static deserialize(t){const n=t.deserializeBytes();return new Gu(n)}},nr=Gu;nr.LENGTH=64;var Q0=32,Gd=class{constructor(t,n){if(this.public_keys=t,this.threshold=n,n>Q0)throw new Error(`"threshold" cannot be larger than ${Q0}`)}toBytes(){const t=new Uint8Array(this.public_keys.length*ps.LENGTH+1);return this.public_keys.forEach((n,i)=>{t.set(n.value,i*ps.LENGTH)}),t[this.public_keys.length*ps.LENGTH]=this.threshold,t}serialize(t){t.serializeBytes(this.toBytes())}static deserialize(t){const n=t.deserializeBytes(),i=n[n.length-1],s=[];for(let r=0;r<n.length-1;r+=ps.LENGTH){const o=r;s.push(new ps(n.subarray(o,o+ps.LENGTH)))}return new Gd(s,i)}},nd=class{constructor(t,n){if(this.signatures=t,this.bitmap=n,n.length!==nd.BITMAP_LEN)throw new Error(`"bitmap" length should be ${nd.BITMAP_LEN}`)}toBytes(){const t=new Uint8Array(this.signatures.length*nr.LENGTH+nd.BITMAP_LEN);return this.signatures.forEach((n,i)=>{t.set(n.value,i*nr.LENGTH)}),t.set(this.bitmap,this.signatures.length*nr.LENGTH),t}static createBitmap(t){const i=new Uint8Array([0,0,0,0]),s=new Set;return t.forEach(r=>{if(r>=Q0)throw new Error(`Invalid bit value ${r}.`);if(s.has(r))throw new Error("Duplicated bits detected.");s.add(r);const o=Math.floor(r/8);let a=i[o];a|=128>>r%8,i[o]=a}),i}serialize(t){t.serializeBytes(this.toBytes())}static deserialize(t){const n=t.deserializeBytes(),i=n.subarray(n.length-4),s=[];for(let r=0;r<n.length-i.length;r+=nr.LENGTH){const o=r;s.push(new nr(n.subarray(o,o+nr.LENGTH)))}return new nd(s,i)}},vf=nd;vf.BITMAP_LEN=4;var Ic=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return xf.load(t);case 1:return Tf.load(t);case 2:return dg.load(t);case 3:return ug.load(t);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${n}`)}}},xf=class extends Ic{constructor(t,n){super(),this.public_key=t,this.signature=n}serialize(t){t.serializeU32AsUleb128(0),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const n=ps.deserialize(t),i=nr.deserialize(t);return new xf(n,i)}},Tf=class extends Ic{constructor(t,n){super(),this.public_key=t,this.signature=n}serialize(t){t.serializeU32AsUleb128(1),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const n=Gd.deserialize(t),i=vf.deserialize(t);return new Tf(n,i)}},dg=class extends Ic{constructor(t,n,i){super(),this.sender=t,this.secondary_signer_addresses=n,this.secondary_signers=i}serialize(t){t.serializeU32AsUleb128(2),this.sender.serialize(t),wi(this.secondary_signer_addresses,t),wi(this.secondary_signers,t)}static load(t){const n=Ao.deserialize(t),i=Li(t,cn),s=Li(t,Ao);return new dg(n,i,s)}},ug=class extends Ic{constructor(e,t,n,i){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=n,this.fee_payer=i}serialize(e){e.serializeU32AsUleb128(3),this.sender.serialize(e),wi(this.secondary_signer_addresses,e),wi(this.secondary_signers,e),this.fee_payer.address.serialize(e),this.fee_payer.authenticator.serialize(e)}static load(e){const t=Ao.deserialize(e),n=Li(e,cn),i=Li(e,Ao),s=cn.deserialize(e),r=Ao.deserialize(e),o={address:s,authenticator:r};return new ug(t,n,i,o)}},Ao=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return lg.load(t);case 1:return fg.load(t);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${n}`)}}},lg=class extends Ao{constructor(t,n){super(),this.public_key=t,this.signature=n}serialize(t){t.serializeU32AsUleb128(0),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const n=ps.deserialize(t),i=nr.deserialize(t);return new lg(n,i)}},fg=class extends Ao{constructor(t,n){super(),this.public_key=t,this.signature=n}serialize(t){t.serializeU32AsUleb128(1),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const n=Gd.deserialize(t),i=vf.deserialize(t);return new fg(n,i)}},vi=class{constructor(t){this.value=t}serialize(t){t.serializeStr(this.value)}static deserialize(t){const n=t.deserializeStr();return new vi(n)}},xi=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return la.load(t);case 1:return Mr.load(t);case 2:return fa.load(t);case 3:return ha.load(t);case 4:return So.load(t);case 5:return hg.load(t);case 6:return Rc.load(t);case 7:return Eo.load(t);case 8:return Bc.load(t);case 9:return Oc.load(t);case 10:return $c.load(t);default:throw new Error(`Unknown variant index for TypeTag: ${n}`)}}},la=class extends xi{serialize(t){t.serializeU32AsUleb128(0)}static load(t){return new la}},Mr=class extends xi{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new Mr}},Bc=class extends xi{serialize(t){t.serializeU32AsUleb128(8)}static load(t){return new Bc}},Oc=class extends xi{serialize(t){t.serializeU32AsUleb128(9)}static load(t){return new Oc}},fa=class extends xi{serialize(t){t.serializeU32AsUleb128(2)}static load(t){return new fa}},ha=class extends xi{serialize(t){t.serializeU32AsUleb128(3)}static load(t){return new ha}},$c=class extends xi{serialize(t){t.serializeU32AsUleb128(10)}static load(t){return new $c}},So=class extends xi{serialize(t){t.serializeU32AsUleb128(4)}static load(t){return new So}},hg=class extends xi{serialize(t){t.serializeU32AsUleb128(5)}static load(t){return new hg}},Rc=class extends xi{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(6),this.value.serialize(t)}static load(t){const n=xi.deserialize(t);return new Rc(n)}},Eo=class extends xi{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(7),this.value.serialize(t)}static load(t){const n=Po.deserialize(t);return new Eo(n)}isStringTypeTag(){return this.value.module_name.value==="string"&&this.value.name.value==="String"&&this.value.address.toHexString()===cn.CORE_CODE_ADDRESS.toHexString()}},Po=class{constructor(t,n,i,s){this.address=t,this.module_name=n,this.name=i,this.type_args=s}static fromString(t){const n=new pa(t).parseTypeTag();return new Po(n.value.address,n.value.module_name,n.value.name,n.value.type_args)}serialize(t){this.address.serialize(t),this.module_name.serialize(t),this.name.serialize(t),wi(this.type_args,t)}static deserialize(t){const n=cn.deserialize(t),i=vi.deserialize(t),s=vi.deserialize(t),r=Li(t,xi);return new Po(n,i,s,r)}},pg=new Po(cn.fromHex("0x1"),new vi("string"),new vi("String"),[]);function vk(e){return new Po(cn.fromHex("0x1"),new vi("option"),new vi("Option"),[e])}function xk(e){return new Po(cn.fromHex("0x1"),new vi("object"),new vi("Object"),[e])}function ho(e){throw new $w(e)}function C_(e){return!!e.match(/\s/)}function I_(e){return!!e.match(/[_A-Za-z0-9]/g)}function Tk(e){return!!e.match(/T\d+/g)}function Ak(e,t){const n=e[t];if(n===":"){if(e.slice(t,t+2)==="::")return[["COLON","::"],2];ho("Unrecognized token.")}else{if(n==="<")return[["LT","<"],1];if(n===">")return[["GT",">"],1];if(n===",")return[["COMMA",","],1];if(C_(n)){let i="";for(let s=t;s<e.length;s+=1){const r=e[s];if(C_(r))i=`${i}${r}`;else break}return[["SPACE",i],i.length]}else if(I_(n)){let i="";for(let s=t;s<e.length;s+=1){const r=e[s];if(I_(r))i=`${i}${r}`;else break}return Tk(i)?[["GENERIC",i],i.length]:[["IDENT",i],i.length]}}throw new Error("Unrecognized token.")}function kk(e){let t=0;const n=[];for(;t<e.length;){const[i,s]=Ak(e,t);i[0]!=="SPACE"&&n.push(i),t+=s}return n}var pa=class{constructor(t,n){this.typeTags=[],this.tokens=kk(t),this.typeTags=n||[]}consume(t){const n=this.tokens.shift();(!n||n[1]!==t)&&ho("Invalid type tag.")}consumeWholeGeneric(){for(this.consume("<");this.tokens[0][1]!==">";)this.tokens[0][1]==="<"&&this.consumeWholeGeneric(),this.tokens.shift();this.consume(">")}parseCommaList(t,n){const i=[];for(this.tokens.length<=0&&ho("Invalid type tag.");this.tokens[0][1]!==t&&(i.push(this.parseTypeTag()),!(this.tokens.length>0&&this.tokens[0][1]===t||(this.consume(","),this.tokens.length>0&&this.tokens[0][1]===t&&n)));)this.tokens.length<=0&&ho("Invalid type tag.");return i}parseTypeTag(){this.tokens.length===0&&ho("Invalid type tag.");const[t,n]=this.tokens.shift();if(n==="u8")return new Mr;if(n==="u16")return new Bc;if(n==="u32")return new Oc;if(n==="u64")return new fa;if(n==="u128")return new ha;if(n==="u256")return new $c;if(n==="bool")return new la;if(n==="address")return new So;if(n==="vector"){this.consume("<");const i=this.parseTypeTag();return this.consume(">"),new Rc(i)}if(n==="string")return new Eo(pg);if(t==="IDENT"&&(n.startsWith("0x")||n.startsWith("0X"))){const i=cn.fromHex(n);this.consume("::");const[s,r]=this.tokens.shift();s!=="IDENT"&&ho("Invalid type tag."),this.consume("::");const[o,a]=this.tokens.shift();if(o!=="IDENT"&&ho("Invalid type tag."),cn.CORE_CODE_ADDRESS.toHexString()===i.toHexString()&&r==="object"&&a==="Object")return this.consumeWholeGeneric(),new So;let c=[];this.tokens.length>0&&this.tokens[0][1]==="<"&&(this.consume("<"),c=this.parseCommaList(">",!0),this.consume(">"));const d=new Po(i,new vi(r),new vi(a),c);return new Eo(d)}if(t==="GENERIC"){this.typeTags.length===0&&ho("Can't convert generic type since no typeTags were specified.");const i=parseInt(n.substring(1),10);return new pa(this.typeTags[i]).parseTypeTag()}throw new Error("Invalid type tag.")}},$w=class extends Error{constructor(e){super(e),this.name="TypeTagParserError"}},ga=class{constructor(t,n,i,s,r,o,a){this.sender=t,this.sequence_number=n,this.payload=i,this.max_gas_amount=s,this.gas_unit_price=r,this.expiration_timestamp_secs=o,this.chain_id=a}serialize(t){this.sender.serialize(t),t.serializeU64(this.sequence_number),this.payload.serialize(t),t.serializeU64(this.max_gas_amount),t.serializeU64(this.gas_unit_price),t.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(t)}static deserialize(t){const n=cn.deserialize(t),i=t.deserializeU64(),s=Xd.deserialize(t),r=t.deserializeU64(),o=t.deserializeU64(),a=t.deserializeU64(),c=Cf.deserialize(t);return new ga(n,i,s,r,o,a,c)}},Af=class{constructor(t,n,i){this.code=t,this.ty_args=n,this.args=i}serialize(t){t.serializeBytes(this.code),wi(this.ty_args,t),wi(this.args,t)}static deserialize(t){const n=t.deserializeBytes(),i=Li(t,xi),s=Li(t,Js);return new Af(n,i,s)}},Xo=class{constructor(t,n,i,s){this.module_name=t,this.function_name=n,this.ty_args=i,this.args=s}static natural(t,n,i,s){return new Xo(ta.fromStr(t),new vi(n),i,s)}static natual(t,n,i,s){return Xo.natural(t,n,i,s)}serialize(t){this.module_name.serialize(t),this.function_name.serialize(t),wi(this.ty_args,t),t.serializeU32AsUleb128(this.args.length),this.args.forEach(n=>{t.serializeBytes(n)})}static deserialize(t){const n=ta.deserialize(t),i=vi.deserialize(t),s=Li(t,xi),r=t.deserializeUleb128AsU32(),o=[];for(let c=0;c<r;c+=1)o.push(t.deserializeBytes());const a=o;return new Xo(n,i,s,a)}},gg=class{constructor(t){this.transaction_payload=t}serialize(t){t.serializeU32AsUleb128(0),this.transaction_payload.serialize(t)}static deserialize(t){return t.deserializeUleb128AsU32(),new gg(Xo.deserialize(t))}},mg=class{constructor(t,n){this.multisig_address=t,this.transaction_payload=n}serialize(t){this.multisig_address.serialize(t),this.transaction_payload===void 0?t.serializeBool(!1):(t.serializeBool(!0),this.transaction_payload.serialize(t))}static deserialize(t){const n=cn.deserialize(t),i=t.deserializeBool();let s;return i&&(s=gg.deserialize(t)),new mg(n,s)}},Rw=class{constructor(t){this.code=t}serialize(t){t.serializeBytes(this.code)}static deserialize(t){const n=t.deserializeBytes();return new Rw(n)}},ta=class{constructor(t,n){this.address=t,this.name=n}static fromStr(t){const n=t.split("::");if(n.length!==2)throw new Error("Invalid module id.");return new ta(cn.fromHex(new De(n[0])),new vi(n[1]))}serialize(t){this.address.serialize(t),this.name.serialize(t)}static deserialize(t){const n=cn.deserialize(t),i=vi.deserialize(t);return new ta(n,i)}},Sk=class{serialize(t){throw new Error("Not implemented.")}static deserialize(t){throw new Error("Not implemented.")}},Ek=class{serialize(t){throw new Error("Not implmented.")}static deserialize(t){throw new Error("Not implmented.")}},Vd=class{constructor(t,n){this.raw_txn=t,this.authenticator=n}serialize(t){this.raw_txn.serialize(t),this.authenticator.serialize(t)}static deserialize(t){const n=ga.deserialize(t),i=Ic.deserialize(t);return new Vd(n,i)}},_g=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return kf.load(t);case 1:return Sf.load(t);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${n}`)}}},kf=class extends _g{constructor(t,n){super(),this.raw_txn=t,this.secondary_signer_addresses=n}serialize(t){t.serializeU32AsUleb128(0),this.raw_txn.serialize(t),wi(this.secondary_signer_addresses,t)}static load(t){const n=ga.deserialize(t),i=Li(t,cn);return new kf(n,i)}},Sf=class extends _g{constructor(e,t,n){super(),this.raw_txn=e,this.secondary_signer_addresses=t,this.fee_payer_address=n}serialize(e){e.serializeU32AsUleb128(1),this.raw_txn.serialize(e),wi(this.secondary_signer_addresses,e),this.fee_payer_address.serialize(e)}static load(e){const t=ga.deserialize(e),n=Li(e,cn),i=cn.deserialize(e);return new Sf(t,n,i)}},Xd=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return Ef.load(t);case 2:return Pf.load(t);case 3:return bg.load(t);default:throw new Error(`Unknown variant index for TransactionPayload: ${n}`)}}},Ef=class extends Xd{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(0),this.value.serialize(t)}static load(t){const n=Af.deserialize(t);return new Ef(n)}},Pf=class extends Xd{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(2),this.value.serialize(t)}static load(t){const n=Xo.deserialize(t);return new Pf(n)}},bg=class extends Xd{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(3),this.value.serialize(t)}static load(t){const n=mg.deserialize(t);return new bg(n)}},Cf=class{constructor(t){this.value=t}serialize(t){t.serializeU8(this.value)}static deserialize(t){const n=t.deserializeU8();return new Cf(n)}},Js=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return If.load(t);case 1:return $f.load(t);case 2:return Rf.load(t);case 3:return Mf.load(t);case 4:return Df.load(t);case 5:return jf.load(t);case 6:return Bf.load(t);case 7:return Of.load(t);case 8:return Uf.load(t);default:throw new Error(`Unknown variant index for TransactionArgument: ${n}`)}}},If=class extends Js{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(0),t.serializeU8(this.value)}static load(t){const n=t.deserializeU8();return new If(n)}},Bf=class extends Js{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(6),t.serializeU16(this.value)}static load(t){const n=t.deserializeU16();return new Bf(n)}},Of=class extends Js{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(7),t.serializeU32(this.value)}static load(t){const n=t.deserializeU32();return new Of(n)}},$f=class extends Js{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(1),t.serializeU64(this.value)}static load(t){const n=t.deserializeU64();return new $f(n)}},Rf=class extends Js{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(2),t.serializeU128(this.value)}static load(t){const n=t.deserializeU128();return new Rf(n)}},Uf=class extends Js{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(8),t.serializeU256(this.value)}static load(t){const n=t.deserializeU256();return new Uf(n)}},Mf=class extends Js{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(3),this.value.serialize(t)}static load(t){const n=cn.deserialize(t);return new Mf(n)}},Df=class extends Js{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(4),t.serializeBytes(this.value)}static load(t){const n=t.deserializeBytes();return new Df(n)}},jf=class extends Js{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(5),t.serializeBool(this.value)}static load(t){const n=t.deserializeBool();return new jf(n)}},Uw=class{getHashSalt(){const t=uc.create();return t.update("APTOS::Transaction"),t.digest()}static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return yg.load(t);default:throw new Error(`Unknown variant index for Transaction: ${n}`)}}},yg=class extends Uw{constructor(t){super(),this.value=t}hash(){const t=uc.create();return t.update(this.getHashSalt()),t.update(Ks(this)),t.digest()}serialize(t){t.serializeU32AsUleb128(0),this.value.serialize(t)}static load(t){return new yg(Vd.deserialize(t))}},Jd=class{constructor(t){this.name=t}serialize(t){t.serializeStr(this.name)}static deserialize(t){const n=t.deserializeStr();return new Jd(n)}},Zd=class{constructor(t,n){this.name=t,this.type_tag=n}serialize(t){t.serializeStr(this.name),this.type_tag.serialize(t)}static deserialize(t){const n=t.deserializeStr(),i=xi.deserialize(t);return new Zd(n,i)}},qf=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return Lf.load(t);case 1:return hc.load(t);default:throw new Error(`Unknown variant index for TransactionPayload: ${n}`)}}},Lf=class extends qf{constructor(t,n,i,s,r){super(),this.name=t,this.doc=n,this.code=i,this.ty_args=s,this.args=r}serialize(t){t.serializeU32AsUleb128(0),t.serializeStr(this.name),t.serializeStr(this.doc),t.serializeBytes(this.code),wi(this.ty_args,t),wi(this.args,t)}static load(t){const n=t.deserializeStr(),i=t.deserializeStr(),s=t.deserializeBytes(),r=Li(t,Jd),o=Li(t,Zd);return new Lf(n,i,s,r,o)}},hc=class extends qf{constructor(t,n,i,s,r){super(),this.name=t,this.module_name=n,this.doc=i,this.ty_args=s,this.args=r}serialize(t){t.serializeU32AsUleb128(1),t.serializeStr(this.name),this.module_name.serialize(t),t.serializeStr(this.doc),wi(this.ty_args,t),wi(this.args,t)}static load(t){const n=t.deserializeStr(),i=ta.deserialize(t),s=t.deserializeStr(),r=Li(t,Jd),o=Li(t,Zd);return new hc(n,i,s,r,o)}},$a=class{constructor(t){if(t.length!==$a.LENGTH)throw new Error("Expected a byte array of length 32");this.bytes=t}static fromMultiEd25519PublicKey(t){const n=t.toBytes(),i=new Uint8Array(n.length+1);i.set(n),i.set([$a.MULTI_ED25519_SCHEME],n.length);const s=uc.create();return s.update(i),new $a(s.digest())}static fromEd25519PublicKey(t){const n=t.value,i=new Uint8Array(n.length+1);i.set(n),i.set([$a.ED25519_SCHEME],n.length);const s=uc.create();return s.update(i),new $a(s.digest())}derivedAddress(){return De.fromUint8Array(this.bytes)}},na=$a;na.LENGTH=32;na.MULTI_ED25519_SCHEME=1;na.ED25519_SCHEME=0;na.DERIVE_RESOURCE_ACCOUNT_SCHEME=255;var Pk=class{constructor(t,n,i,s,r,o,a){this.accountAddress=t,this.moduleName=n,this.structName=i,this.sequenceNumber=s,this.originator=r,this.currentAuthKey=o,this.newPublicKey=a}serialize(t){this.accountAddress.serialize(t),t.serializeStr(this.moduleName),t.serializeStr(this.structName),t.serializeU64(this.sequenceNumber),this.originator.serialize(t),this.currentAuthKey.serialize(t),t.serializeBytes(this.newPublicKey)}},Vu=class{static fromAptosAccountObject(t){return new Vu(De.ensure(t.privateKeyHex).toUint8Array(),t.address)}static isValidPath(t){return/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'+$/.test(t)}static fromDerivePath(t,n){if(!Vu.isValidPath(t))throw new Error("Invalid derivation path");const i=n.trim().split(/\s+/).map(r=>r.toLowerCase()).join(" "),{key:s}=Aw(t,Hy(Ry(i)));return new Vu(s)}constructor(t,n){t?this.signingKey=dr.sign.keyPair.fromSeed(t.slice(0,32)):this.signingKey=dr.sign.keyPair(),this.accountAddress=De.ensure(n||this.authKey().hex())}address(){return this.accountAddress}authKey(){const t=new ps(this.signingKey.publicKey);return na.fromEd25519PublicKey(t).derivedAddress()}static getResourceAccountAddress(t,n){const i=Ks(cn.fromHex(t)),s=new Uint8Array([...i,...n,na.DERIVE_RESOURCE_ACCOUNT_SCHEME]),r=uc.create();return r.update(s),De.fromUint8Array(r.digest())}static getCollectionID(t,n){const i=new TextEncoder().encode(`${t}::${n}`),s=c3.create();return s.update(i),De.fromUint8Array(s.digest())}pubKey(){return De.fromUint8Array(this.signingKey.publicKey)}signBuffer(t){const n=dr.sign.detached(t,this.signingKey.secretKey);return De.fromUint8Array(n)}signHexString(t){const n=De.ensure(t).toUint8Array();return this.signBuffer(n)}verifySignature(t,n){const i=De.ensure(t).toUint8Array(),s=De.ensure(n).toUint8Array();return dr.sign.detached.verify(i,s,this.signingKey.publicKey)}toPrivateKeyObject(){return{address:this.address().hex(),publicKeyHex:this.pubKey().hex(),privateKeyHex:De.fromUint8Array(this.signingKey.secretKey.slice(0,32)).hex()}}},Ed=Vu;wn([wf()],Ed.prototype,"authKey",1);function Rs(e){return e instanceof Ed?e.address():De.ensure(e)}var Yd=`
    fragment CurrentTokenOwnershipFields on current_token_ownerships_v2 {
  token_standard
  token_properties_mutated_v1
  token_data_id
  table_type_v1
  storage_id
  property_version_v1
  owner_address
  last_transaction_version
  last_transaction_timestamp
  is_soulbound_v2
  is_fungible_v2
  amount
  current_token_data {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `,Ck=`
    fragment TokenDataFields on current_token_datas {
  creator_address
  collection_name
  description
  metadata_uri
  name
  token_data_id_hash
  collection_data_id_hash
}
    `,Ik=`
    fragment CollectionDataFields on current_collection_datas {
  metadata_uri
  supply
  description
  collection_name
  collection_data_id_hash
  table_handle
  creator_address
}
    `,Mw=`
    fragment TokenActivitiesFields on token_activities_v2 {
  after_value
  before_value
  entry_function_id_str
  event_account_address
  event_index
  from_address
  is_fungible_v2
  property_version_v1
  to_address
  token_amount
  token_data_id
  token_standard
  transaction_timestamp
  transaction_version
  type
}
    `,Bk=`
    query getAccountCoinsDataCount($address: String) {
  current_fungible_asset_balances_aggregate(
    where: {owner_address: {_eq: $address}}
  ) {
    aggregate {
      count
    }
  }
}
    `,Ok=`
    query getAccountCoinsData($where_condition: current_fungible_asset_balances_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_fungible_asset_balances_order_by!]) {
  current_fungible_asset_balances(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    amount
    asset_type
    is_frozen
    is_primary
    last_transaction_timestamp
    last_transaction_version
    owner_address
    storage_id
    token_standard
    metadata {
      token_standard
      symbol
      supply_aggregator_table_key_v1
      supply_aggregator_table_handle_v1
      project_uri
      name
      last_transaction_version
      last_transaction_timestamp
      icon_uri
      decimals
      creator_address
      asset_type
    }
  }
}
    `,$k=`
    query getAccountCurrentTokens($address: String!, $offset: Int, $limit: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $address}, amount: {_gt: 0}}
    order_by: [{last_transaction_version: desc}, {creator_address: asc}, {collection_name: asc}, {name: asc}]
    offset: $offset
    limit: $limit
  ) {
    amount
    current_token_data {
      ...TokenDataFields
    }
    current_collection_data {
      ...CollectionDataFields
    }
    last_transaction_version
    property_version
  }
}
    ${Ck}
${Ik}`,Rk=`
    query getAccountTokensCount($where_condition: current_token_ownerships_v2_bool_exp, $offset: Int, $limit: Int) {
  current_token_ownerships_v2_aggregate(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    aggregate {
      count
    }
  }
}
    `,Uk=`
    query getAccountTransactionsCount($address: String) {
  account_transactions_aggregate(where: {account_address: {_eq: $address}}) {
    aggregate {
      count
    }
  }
}
    `,Mk=`
    query getAccountTransactionsData($where_condition: account_transactions_bool_exp!, $offset: Int, $limit: Int, $order_by: [account_transactions_order_by!]) {
  account_transactions(
    where: $where_condition
    order_by: $order_by
    limit: $limit
    offset: $offset
  ) {
    token_activities_v2 {
      ...TokenActivitiesFields
    }
    transaction_version
    account_address
  }
}
    ${Mw}`,Dk=`
    query getCollectionData($where_condition: current_collections_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collections_v2_order_by!]) {
  current_collections_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    collection_id
    collection_name
    creator_address
    current_supply
    description
    last_transaction_timestamp
    last_transaction_version
    max_supply
    mutable_description
    mutable_uri
    table_handle_v1
    token_standard
    total_minted_v2
    uri
  }
}
    `,jk=`
    query getCollectionsWithOwnedTokens($where_condition: current_collection_ownership_v2_view_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collection_ownership_v2_view_order_by!]) {
  current_collection_ownership_v2_view(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      mutable_description
      max_supply
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
    collection_id
    collection_name
    collection_uri
    creator_address
    distinct_tokens
    last_transaction_version
    owner_address
    single_token_uri
  }
}
    `,qk=`
    query getCurrentObjects($where_condition: current_objects_bool_exp, $offset: Int, $limit: Int, $order_by: [current_objects_order_by!]) {
  current_objects(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    allow_ungated_transfer
    state_key_hash
    owner_address
    object_address
    last_transaction_version
    last_guid_creation_num
    is_deleted
  }
}
    `,Lk=`
    query getDelegatedStakingActivities($delegatorAddress: String, $poolAddress: String) {
  delegated_staking_activities(
    where: {delegator_address: {_eq: $delegatorAddress}, pool_address: {_eq: $poolAddress}}
  ) {
    amount
    delegator_address
    event_index
    event_type
    pool_address
    transaction_version
  }
}
    `,Nk=`
    query getIndexerLedgerInfo {
  ledger_infos {
    chain_id
  }
}
    `,Fk=`
    query getNumberOfDelegators($poolAddress: String) {
  num_active_delegator_per_pool(
    where: {pool_address: {_eq: $poolAddress}, num_active_delegator: {_gt: "0"}}
    distinct_on: pool_address
  ) {
    num_active_delegator
    pool_address
  }
}
    `,zk=`
    query getOwnedTokens($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${Yd}`,Hk=`
    query getOwnedTokensByTokenData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${Yd}`,Kk=`
    query getTokenActivities($where_condition: token_activities_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [token_activities_v2_order_by!]) {
  token_activities_v2(
    where: $where_condition
    order_by: $order_by
    offset: $offset
    limit: $limit
  ) {
    ...TokenActivitiesFields
  }
}
    ${Mw}`,Wk=`
    query getTokenActivitiesCount($token_id: String) {
  token_activities_v2_aggregate(where: {token_data_id: {_eq: $token_id}}) {
    aggregate {
      count
    }
  }
}
    `,Gk=`
    query getTokenCurrentOwnerData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${Yd}`,Vk=`
    query getTokenData($where_condition: current_token_datas_v2_bool_exp, $offset: Int, $limit: Int, $order_by: [current_token_datas_v2_order_by!]) {
  current_token_datas_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `,Xk=`
    query getTokenOwnedFromCollection($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${Yd}`,Jk=`
    query getTokenOwnersData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${Yd}`,Zk=`
    query getTopUserTransactions($limit: Int) {
  user_transactions(limit: $limit, order_by: {version: desc}) {
    version
  }
}
    `,Yk=`
    query getUserTransactions($where_condition: user_transactions_bool_exp!, $offset: Int, $limit: Int, $order_by: [user_transactions_order_by!]) {
  user_transactions(
    order_by: $order_by
    where: $where_condition
    limit: $limit
    offset: $offset
  ) {
    version
  }
}
    `;function Nf(e,t,n){if(!(t!=null&&t.includes(typeof e)))throw new Error(n||`Invalid arg: ${e} type should be ${t instanceof Array?t.join(" or "):t}`)}function wg(e){if(Nf(e,["boolean","string"]),typeof e=="boolean")return e;if(e==="true")return!0;if(e==="false")return!1;throw new Error("Invalid boolean string.")}function Jo(e){if(Nf(e,["number","string"]),typeof e=="number")return e;const t=Number.parseInt(e,10);if(Number.isNaN(t))throw new Error("Invalid number string.");return t}function Zo(e){return Nf(e,["number","bigint","string"]),BigInt(e)}function Ff(e,t,n){vg(e,t,n)}function vg(e,t,n,i){if(t instanceof la)n.serializeBool(wg(e));else if(t instanceof Mr)n.serializeU8(Jo(e));else if(t instanceof Bc)n.serializeU16(Jo(e));else if(t instanceof Oc)n.serializeU32(Jo(e));else if(t instanceof fa)n.serializeU64(Zo(e));else if(t instanceof ha)n.serializeU128(Zo(e));else if(t instanceof $c)n.serializeU256(Zo(e));else if(t instanceof So)Dw(e,n);else if(t instanceof Rc)Qk(e,t,n);else if(t instanceof Eo)e4(e,t,n);else throw new Error("Unsupported arg type.")}function Dw(e,t){let n;if(typeof e=="string"||e instanceof De)n=cn.fromHex(e);else if(e instanceof cn)n=e;else throw new Error("Invalid account address.");n.serialize(t)}function Qk(e,t,n,i){if(t.value instanceof Mr){if(e instanceof Uint8Array){n.serializeBytes(e);return}if(e instanceof De){n.serializeBytes(e.toUint8Array());return}if(typeof e=="string"){n.serializeStr(e);return}}if(!Array.isArray(e))throw new Error("Invalid vector args.");n.serializeU32AsUleb128(e.length),e.forEach(s=>vg(s,t.value,n))}function e4(e,t,n,i){const{address:s,module_name:r,name:o,type_args:a}=t.value,c=`${De.fromUint8Array(s.address).toShortString()}::${r.value}::${o.value}`;if(c==="0x1::string::String")Nf(e,["string"]),n.serializeStr(e);else if(c==="0x1::object::Object")Dw(e,n);else if(c==="0x1::option::Option"){if(a.length!==1)throw new Error(`Option has the wrong number of type arguments ${a.length}`);t4(e,a[0],n)}else throw new Error("Unsupported struct type in function argument")}function t4(e,t,n,i){e==null?n.serializeU32AsUleb128(0):(n.serializeU32AsUleb128(1),vg(e,t,n))}function jw(e,t){if(t instanceof la)return new jf(wg(e));if(t instanceof Mr)return new If(Jo(e));if(t instanceof Bc)return new Bf(Jo(e));if(t instanceof Oc)return new Of(Jo(e));if(t instanceof fa)return new $f(Zo(e));if(t instanceof ha)return new Rf(Zo(e));if(t instanceof $c)return new Uf(Zo(e));if(t instanceof So){let n;if(typeof e=="string"||e instanceof De)n=cn.fromHex(e);else if(e instanceof cn)n=e;else throw new Error("Invalid account address.");return new Mf(n)}if(t instanceof Rc&&t.value instanceof Mr){if(!(e instanceof Uint8Array))throw new Error(`${e} should be an instance of Uint8Array`);return new Df(e)}throw new Error("Unknown type for TransactionArgument.")}var n4="APTOS::RawTransaction",B_="APTOS::RawTransactionWithData",qs=class{constructor(t,n){this.rawTxnBuilder=n,this.signingFunction=t}build(t,n,i){if(!this.rawTxnBuilder)throw new Error("this.rawTxnBuilder doesn't exist.");return this.rawTxnBuilder.build(t,n,i)}static getSigningMessage(t){const n=uc.create();if(t instanceof ga)n.update(n4);else if(t instanceof kf)n.update(B_);else if(t instanceof Sf)n.update(B_);else throw new Error("Unknown transaction type.");const i=n.digest(),s=Ks(t),r=new Uint8Array(i.length+s.length);return r.set(i),r.set(s,i.length),r}},Xu=class extends qs{constructor(t,n,i){super(t,i),this.publicKey=n}rawToSigned(t){const n=qs.getSigningMessage(t),i=this.signingFunction(n),s=new xf(new ps(this.publicKey),i);return new Vd(t,s)}sign(t){return Ks(this.rawToSigned(t))}},qw=class extends qs{constructor(t,n){super(t),this.publicKey=n}rawToSigned(t){const n=qs.getSigningMessage(t),i=this.signingFunction(n),s=new Tf(this.publicKey,i);return new Vd(t,s)}sign(t){return Ks(this.rawToSigned(t))}},Tl=class{constructor(t,n){this.abiMap=new Map,t.forEach(i=>{const s=new cg(i),r=qf.deserialize(s);let o;if(r instanceof hc){const a=r,{address:c,name:d}=a.module_name;o=`${De.fromUint8Array(c.address).toShortString()}::${d.value}::${a.name}`}else o=r.name;if(this.abiMap.has(o))throw new Error("Found conflicting ABI interfaces");this.abiMap.set(o,r)}),this.builderConfig={maxGasAmount:BigInt(kw),expSecFromNow:Sw,...n}}static toBCSArgs(t,n){if(t.length!==n.length)throw new Error("Wrong number of args provided.");return n.map((i,s)=>{const r=new On;return Ff(i,t[s].type_tag,r),r.getBytes()})}static toTransactionArguments(t,n){if(t.length!==n.length)throw new Error("Wrong number of args provided.");return n.map((i,s)=>jw(i,t[s].type_tag))}setSequenceNumber(t){this.builderConfig.sequenceNumber=BigInt(t)}buildTransactionPayload(t,n,i){const s=n.map(a=>new pa(a).parseTypeTag());let r;if(!this.abiMap.has(t))throw new Error(`Cannot find function: ${t}`);const o=this.abiMap.get(t);if(o instanceof hc){const a=o,c=Tl.toBCSArgs(a.args,i);r=new Pf(new Xo(a.module_name,new vi(a.name),s,c))}else if(o instanceof Lf){const a=o,c=Tl.toTransactionArguments(a.args,i);r=new Ef(new Af(a.code,s,c))}else throw new Error("Unknown ABI format.");return r}build(t,n,i){const{sender:s,sequenceNumber:r,gasUnitPrice:o,maxGasAmount:a,expSecFromNow:c,chainId:d}=this.builderConfig;if(!o)throw new Error("No gasUnitPrice provided.");const u=s instanceof cn?s:cn.fromHex(s),l=BigInt(Math.floor(Date.now()/1e3)+Number(c)),f=this.buildTransactionPayload(t,n,i);if(f)return new ga(u,BigInt(r),f,BigInt(a),BigInt(o),l,new Cf(Number(d)));throw new Error("Invalid ABI.")}},In=class{constructor(t,n){this.aptosClient=t,this.builderConfig=n}async fetchABI(t){const i=(await this.aptosClient.getAccountModules(t)).map(r=>r.abi).flatMap(r=>r.exposed_functions.filter(o=>o.is_entry).map(o=>({fullName:`${r.address}::${r.name}::${o.name}`,...o}))),s=new Map;return i.forEach(r=>{s.set(r.fullName,r)}),s}async build(t,n,i){if(t=(S=>S.replace(/^0[xX]0*/g,"0x"))(t),t.split("::").length!==3)throw new Error("'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coin::transfer");const[o,a]=t.split("::"),c=await this.fetchABI(o);if(!c.has(t))throw new Error(`${t} doesn't exist.`);const d=c.get(t),l=d.params.filter(S=>S!=="signer"&&S!=="&signer").map((S,P)=>new Zd(`var${P}`,new pa(S,n).parseTypeTag())),f=new hc(d.name,ta.fromStr(`${o}::${a}`),"",d.generic_type_params.map((S,P)=>new Jd(`${P}`)),l),{sender:p,...m}=this.builderConfig,_=p instanceof cn?De.fromUint8Array(p.address):p,[{sequence_number:x},C,{gas_estimate:k}]=await Promise.all([m!=null&&m.sequenceNumber?Promise.resolve({sequence_number:m==null?void 0:m.sequenceNumber}):this.aptosClient.getAccount(_),m!=null&&m.chainId?Promise.resolve(m==null?void 0:m.chainId):this.aptosClient.getChainId(),m!=null&&m.gasUnitPrice?Promise.resolve({gas_estimate:m==null?void 0:m.gasUnitPrice}):this.aptosClient.estimateGasPrice()]);return new Tl([Ks(f)],{sender:p,sequenceNumber:x,chainId:C,gasUnitPrice:BigInt(k),...m}).build(t,n,i)}};wn([Pw(10*60*1e3)],In.prototype,"fetchABI",1);var Ra=class{constructor(t,n,i=!1){if(!t)throw new Error("Node URL cannot be empty.");i?this.nodeUrl=t:this.nodeUrl=rk(t),this.config=n==null?{}:{...n}}async getAccount(t){const{data:n}=await Ri({url:this.nodeUrl,endpoint:`accounts/${De.ensure(t).hex()}`,originMethod:"getAccount",overrides:{...this.config}});return n}async getAccountTransactions(t,n){const{data:i}=await Ri({url:this.nodeUrl,endpoint:`accounts/${De.ensure(t).hex()}/transactions`,originMethod:"getAccountTransactions",params:{start:n==null?void 0:n.start,limit:n==null?void 0:n.limit},overrides:{...this.config}});return i}async getAccountModules(t,n){return await P_({url:this.nodeUrl,endpoint:`accounts/${t}/modules`,params:{ledger_version:n==null?void 0:n.ledgerVersion,limit:1e3},originMethod:"getAccountModules",overrides:{...this.config}})}async getAccountModule(t,n,i){const{data:s}=await Ri({url:this.nodeUrl,endpoint:`accounts/${De.ensure(t).hex()}/module/${n}`,originMethod:"getAccountModule",params:{ledger_version:i==null?void 0:i.ledgerVersion},overrides:{...this.config}});return s}async getAccountResources(t,n){return await P_({url:this.nodeUrl,endpoint:`accounts/${t}/resources`,params:{ledger_version:n==null?void 0:n.ledgerVersion,limit:9999},originMethod:"getAccountResources",overrides:{...this.config}})}async getAccountResource(t,n,i){const{data:s}=await Ri({url:this.nodeUrl,endpoint:`accounts/${De.ensure(t).hex()}/resource/${n}`,originMethod:"getAccountResource",params:{ledger_version:i==null?void 0:i.ledgerVersion},overrides:{...this.config}});return s}static generateBCSTransaction(t,n){return new Xu(s=>{const r=t.signBuffer(s);return new pt.Ed25519Signature(r.toUint8Array())},t.pubKey().toUint8Array()).sign(n)}static generateBCSSimulation(t,n){return new Xu(s=>{const r=new Uint8Array(64);return new pt.Ed25519Signature(r)},t.pubKey().toUint8Array()).sign(n)}async generateTransaction(t,n,i){const s={sender:t};if(i!=null&&i.sequence_number&&(s.sequenceNumber=i.sequence_number),i!=null&&i.gas_unit_price&&(s.gasUnitPrice=i.gas_unit_price),i!=null&&i.max_gas_amount&&(s.maxGasAmount=i.max_gas_amount),i!=null&&i.expiration_timestamp_secs){const o=Number.parseInt(i.expiration_timestamp_secs,10);s.expSecFromNow=o-Math.floor(Date.now()/1e3)}return new In(this,s).build(n.function,n.type_arguments,n.arguments)}async generateFeePayerTransaction(t,n,i,s=[],r){const o=await this.generateTransaction(t,n,r),a=s.map(d=>cn.fromHex(d));return new pt.FeePayerRawTransaction(o,a,cn.fromHex(i))}async submitFeePayerTransaction(t,n,i,s=[]){const r=new pt.TransactionAuthenticatorFeePayer(n,t.secondary_signer_addresses,s,{address:t.fee_payer_address,authenticator:i}),o=Ks(new pt.SignedTransaction(t.raw_txn,r));return await this.submitSignedBCSTransaction(o)}async signMultiTransaction(t,n){const i=new pt.Ed25519Signature(t.signBuffer(qs.getSigningMessage(n)).toUint8Array()),s=new pt.AccountAuthenticatorEd25519(new pt.Ed25519PublicKey(t.signingKey.publicKey),i);return Promise.resolve(s)}async signTransaction(t,n){return Promise.resolve(Ra.generateBCSTransaction(t,n))}async getEventsByCreationNumber(t,n,i){const{data:s}=await Ri({url:this.nodeUrl,endpoint:`accounts/${De.ensure(t).hex()}/events/${n}`,originMethod:"getEventsByCreationNumber",params:{start:i==null?void 0:i.start,limit:i==null?void 0:i.limit},overrides:{...this.config}});return s}async getEventsByEventHandle(t,n,i,s){const{data:r}=await Ri({url:this.nodeUrl,endpoint:`accounts/${De.ensure(t).hex()}/events/${n}/${i}`,originMethod:"getEventsByEventHandle",params:{start:s==null?void 0:s.start,limit:s==null?void 0:s.limit},overrides:{...this.config}});return r}async submitTransaction(t){return this.submitSignedBCSTransaction(t)}async simulateTransaction(t,n,i){let s;return t instanceof Ed?s=Ra.generateBCSSimulation(t,n):t instanceof Gd?s=new qw(()=>{const{threshold:o}=t,a=[],c=[];for(let u=0;u<o;u+=1)a.push(u),c.push(new pt.Ed25519Signature(new Uint8Array(64)));const d=pt.MultiEd25519Signature.createBitmap(a);return new pt.MultiEd25519Signature(c,d)},t).sign(n):s=new Xu(()=>{const o=new Uint8Array(64);return new pt.Ed25519Signature(o)},t.toBytes()).sign(n),this.submitBCSSimulation(s,i)}async submitSignedBCSTransaction(t){const{data:n}=await zo({url:this.nodeUrl,body:t,endpoint:"transactions",originMethod:"submitSignedBCSTransaction",contentType:"application/x.aptos.signed_transaction+bcs",overrides:{...this.config}});return n}async submitBCSSimulation(t,n){var i,s,r;const o={estimate_gas_unit_price:(i=n==null?void 0:n.estimateGasUnitPrice)!=null?i:!1,estimate_max_gas_amount:(s=n==null?void 0:n.estimateMaxGasAmount)!=null?s:!1,estimate_prioritized_gas_unit_price:(r=n==null?void 0:n.estimatePrioritizedGasUnitPrice)!=null?r:!1},{data:a}=await zo({url:this.nodeUrl,body:t,endpoint:"transactions/simulate",params:o,originMethod:"submitBCSSimulation",contentType:"application/x.aptos.signed_transaction+bcs",overrides:{...this.config}});return a}async getTransactions(t){var n;const{data:i}=await Ri({url:this.nodeUrl,endpoint:"transactions",originMethod:"getTransactions",params:{start:(n=t==null?void 0:t.start)==null?void 0:n.toString(),limit:t==null?void 0:t.limit},overrides:{...this.config}});return i}async getTransactionByHash(t){const{data:n}=await Ri({url:this.nodeUrl,endpoint:`transactions/by_hash/${t}`,originMethod:"getTransactionByHash",overrides:{...this.config}});return n}async getTransactionByVersion(t){const{data:n}=await Ri({url:this.nodeUrl,endpoint:`transactions/by_version/${t}`,originMethod:"getTransactionByVersion",overrides:{...this.config}});return n}async transactionPending(t){try{return(await this.getTransactionByHash(t)).type==="pending_transaction"}catch(n){if((n==null?void 0:n.status)===404)return!0;throw n}}async waitForTransactionWithResult(t,n){var i,s;const r=(i=n==null?void 0:n.timeoutSecs)!=null?i:Ew,o=(s=n==null?void 0:n.checkSuccess)!=null?s:!1;let a=!0,c=0,d;for(;a&&!(c>=r);){try{if(d=await this.getTransactionByHash(t),a=d.type==="pending_transaction",!a)break}catch(u){const l=u instanceof Fi,f=l&&u.status!==404&&u.status>=400&&u.status<500;if(!l||f)throw u}await td(1e3),c+=1}if(d===void 0)throw new Error(`Waiting for transaction ${t} failed`);if(a)throw new Lw(`Waiting for transaction ${t} timed out after ${r} seconds`,d);if(!o)return d;if(!(d!=null&&d.success))throw new Nw(`Transaction ${t} failed with an error: ${d.vm_status}`,d);return d}async waitForTransaction(t,n){await this.waitForTransactionWithResult(t,n)}async getLedgerInfo(){const{data:t}=await Ri({url:this.nodeUrl,originMethod:"getLedgerInfo",overrides:{...this.config}});return t}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getTableItem(t,n,i){var s;return(await zo({url:this.nodeUrl,body:n,endpoint:`tables/${t}/item`,originMethod:"getTableItem",params:{ledger_version:(s=i==null?void 0:i.ledgerVersion)==null?void 0:s.toString()},overrides:{...this.config}})).data}async generateRawTransaction(t,n,i){const[{sequence_number:s},r,{gas_estimate:o}]=await Promise.all([i!=null&&i.providedSequenceNumber?Promise.resolve({sequence_number:i.providedSequenceNumber}):this.getAccount(t),this.getChainId(),i!=null&&i.gasUnitPrice?Promise.resolve({gas_estimate:i.gasUnitPrice}):this.estimateGasPrice()]),{maxGasAmount:a,gasUnitPrice:c,expireTimestamp:d}={maxGasAmount:BigInt(kw),gasUnitPrice:BigInt(o),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+Sw),...i};return new pt.RawTransaction(pt.AccountAddress.fromHex(t),BigInt(s),n,a,c,d,new pt.ChainId(r))}async generateSignSubmitTransaction(t,n,i){const s=await this.generateRawTransaction(t.address(),n,i),r=Ra.generateBCSTransaction(t,s);return(await this.submitSignedBCSTransaction(r)).hash}async signAndSubmitTransaction(t,n){const i=Ra.generateBCSTransaction(t,n);return(await this.submitSignedBCSTransaction(i)).hash}async publishPackage(t,n,i,s){const r=new On;wi(i,r);const o=new pt.TransactionPayloadEntryFunction(pt.EntryFunction.natural("0x1::code","publish_package_txn",[],[fo(n),r.getBytes()]));return this.generateSignSubmitTransaction(t,o,s)}async createResourceAccountAndPublishPackage(t,n,i,s,r){const o=new On;wi(s,o);const a=new pt.TransactionPayloadEntryFunction(pt.EntryFunction.natural("0x1::resource_account","create_resource_account_and_publish_package",[],[fo(n),fo(i),o.getBytes()]));return this.generateSignSubmitTransaction(t,a,r)}async generateSignSubmitWaitForTransaction(t,n,i){const s=await this.generateSignSubmitTransaction(t,n,i);return this.waitForTransactionWithResult(s,i)}async estimateGasPrice(){const{data:t}=await Ri({url:this.nodeUrl,endpoint:"estimate_gas_price",originMethod:"estimateGasPrice",overrides:{...this.config}});return t}async estimateMaxGasAmount(t){const n=`0x1::coin::CoinStore<${vl}>`,[{gas_estimate:i},s]=await Promise.all([this.estimateGasPrice(),this.getAccountResources(t)]),r=s.find(a=>a.type===n);return BigInt(r.data.coin.value)/BigInt(i)}async rotateAuthKeyEd25519(t,n,i){const{sequence_number:s,authentication_key:r}=await this.getAccount(t.address()),o=new Ed(n),a=new pt.RotationProofChallenge(pt.AccountAddress.CORE_CODE_ADDRESS,"account","RotationProofChallenge",BigInt(s),pt.AccountAddress.fromHex(t.address()),new pt.AccountAddress(new De(r).toUint8Array()),o.pubKey().toUint8Array()),c=De.fromUint8Array(Ks(a)),d=t.signHexString(c),u=o.signHexString(c),l=new pt.TransactionPayloadEntryFunction(pt.EntryFunction.natural("0x1::account","rotate_authentication_key",[],[Y0(0),fo(t.pubKey().toUint8Array()),Y0(0),fo(o.pubKey().toUint8Array()),fo(d.toUint8Array()),fo(u.toUint8Array())])),f=await this.generateRawTransaction(t.address(),l,i),p=Ra.generateBCSTransaction(t,f);return this.submitSignedBCSTransaction(p)}async lookupOriginalAddress(t){const n=await this.getAccountResource("0x1","0x1::account::OriginatingAddress"),{address_map:{handle:i}}=n.data,s=await this.getTableItem(i,{key_type:"address",value_type:"address",key:De.ensure(t).hex()});return new De(s)}async getBlockByHeight(t,n){const{data:i}=await Ri({url:this.nodeUrl,endpoint:`blocks/by_height/${t}`,originMethod:"getBlockByHeight",params:{with_transactions:n},overrides:{...this.config}});return i}async getBlockByVersion(t,n){const{data:i}=await Ri({url:this.nodeUrl,endpoint:`blocks/by_version/${t}`,originMethod:"getBlockByVersion",params:{with_transactions:n},overrides:{...this.config}});return i}async view(t,n){const{data:i}=await zo({url:this.nodeUrl,body:t,endpoint:"view",originMethod:"getTableItem",params:{ledger_version:n},overrides:{...this.config}});return i}clearCache(t){ok(t)}},Mt=Ra;wn([Zn],Mt.prototype,"getAccount",1);wn([Zn],Mt.prototype,"getAccountTransactions",1);wn([Zn,Pw(10*60*1e3)],Mt.prototype,"getAccountModules",1);wn([Zn],Mt.prototype,"getAccountModule",1);wn([Zn],Mt.prototype,"getAccountResources",1);wn([Zn],Mt.prototype,"getAccountResource",1);wn([Zn],Mt.prototype,"getEventsByCreationNumber",1);wn([Zn],Mt.prototype,"getEventsByEventHandle",1);wn([Zn],Mt.prototype,"submitSignedBCSTransaction",1);wn([Zn],Mt.prototype,"submitBCSSimulation",1);wn([Zn],Mt.prototype,"getTransactions",1);wn([Zn],Mt.prototype,"getTransactionByHash",1);wn([Zn],Mt.prototype,"getTransactionByVersion",1);wn([Zn],Mt.prototype,"getLedgerInfo",1);wn([wf()],Mt.prototype,"getChainId",1);wn([Zn],Mt.prototype,"getTableItem",1);wn([Zn,wf({ttlMs:5*60*1e3,tags:["gas_estimates"]})],Mt.prototype,"estimateGasPrice",1);wn([Zn],Mt.prototype,"estimateMaxGasAmount",1);wn([Zn],Mt.prototype,"getBlockByHeight",1);wn([Zn],Mt.prototype,"getBlockByVersion",1);wn([Zn],Mt.prototype,"view",1);var Lw=class extends Error{constructor(t,n){super(t),this.lastSubmittedTransaction=n}},Nw=class extends Error{constructor(t,n){super(t),this.transaction=n}},Fi=class extends Error{constructor(t,n,i,s){super(n),this.status=t,this.message=n,this.errorCode=i,this.vmErrorCode=s}};function Zn(e,t,n){const i=n.value;return n.value=async function(...r){var o,a;try{return await i.apply(this,[...r])}catch(c){throw c instanceof og?new Fi(c.status,JSON.stringify({message:c.message,...c.data}),(o=c.data)==null?void 0:o.error_code,(a=c.data)==null?void 0:a.vm_error_code):c}},n}var Dn=class{constructor(t,n){this.endpoint=t,this.config=n}static validateAddress(t){if(t.length<66)throw new Error(`${t} is less than 66 chars long.`)}async queryIndexer(t){const n=await zo({url:this.endpoint,body:t,overrides:{WITH_CREDENTIALS:!1,...this.config}});if(n.data.errors)throw new Fi(n.data.errors[0].extensions.code,JSON.stringify({message:n.data.errors[0].message,error_code:n.data.errors[0].extensions.code}));return n.data.data}async getIndexerLedgerInfo(){const t={query:Nk};return this.queryIndexer(t)}async getAccountNFTs(t,n){const i=De.ensure(t).hex();Dn.validateAddress(i);const s={query:$k,variables:{address:i,offset:n==null?void 0:n.offset,limit:n==null?void 0:n.limit}};return this.queryIndexer(s)}async getTokenActivities(t,n){var i,s;const r=De.ensure(t).hex();Dn.validateAddress(r);const o={token_data_id:{_eq:r}};n!=null&&n.tokenStandard&&(o.token_standard={_eq:n==null?void 0:n.tokenStandard});const a={query:Kk,variables:{where_condition:o,offset:(i=n==null?void 0:n.options)==null?void 0:i.offset,limit:(s=n==null?void 0:n.options)==null?void 0:s.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getTokenActivitiesCount(t){const n={query:Wk,variables:{token_id:t}};return this.queryIndexer(n)}async getAccountTokensCount(t,n){var i,s;const r={owner_address:{_eq:t},amount:{_gt:"0"}};n!=null&&n.tokenStandard&&(r.token_standard={_eq:n==null?void 0:n.tokenStandard});const o=De.ensure(t).hex();Dn.validateAddress(o);const a={query:Rk,variables:{where_condition:r,offset:(i=n==null?void 0:n.options)==null?void 0:i.offset,limit:(s=n==null?void 0:n.options)==null?void 0:s.limit}};return this.queryIndexer(a)}async getTokenData(t,n){var i,s;const r=De.ensure(t).hex();Dn.validateAddress(r);const o={token_data_id:{_eq:r}};n!=null&&n.tokenStandard&&(o.token_standard={_eq:n==null?void 0:n.tokenStandard});const a={query:Vk,variables:{where_condition:o,offset:(i=n==null?void 0:n.options)==null?void 0:i.offset,limit:(s=n==null?void 0:n.options)==null?void 0:s.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getTokenOwnersData(t,n,i){var s,r;const o=De.ensure(t).hex();Dn.validateAddress(o);const a={token_data_id:{_eq:o},amount:{_gt:"0"}};n&&(a.property_version_v1={_eq:n}),i!=null&&i.tokenStandard&&(a.token_standard={_eq:i==null?void 0:i.tokenStandard});const c={query:Jk,variables:{where_condition:a,offset:(s=i==null?void 0:i.options)==null?void 0:s.offset,limit:(r=i==null?void 0:i.options)==null?void 0:r.limit,order_by:i==null?void 0:i.orderBy}};return this.queryIndexer(c)}async getTokenCurrentOwnerData(t,n,i){var s,r;const o=De.ensure(t).hex();Dn.validateAddress(o);const a={token_data_id:{_eq:o},amount:{_gt:"0"}};n&&(a.property_version_v1={_eq:n}),i!=null&&i.tokenStandard&&(a.token_standard={_eq:i==null?void 0:i.tokenStandard});const c={query:Gk,variables:{where_condition:a,offset:(s=i==null?void 0:i.options)==null?void 0:s.offset,limit:(r=i==null?void 0:i.options)==null?void 0:r.limit,order_by:i==null?void 0:i.orderBy}};return this.queryIndexer(c)}async getOwnedTokens(t,n){var i,s;const r=De.ensure(t).hex();Dn.validateAddress(r);const o={owner_address:{_eq:r},amount:{_gt:0}};n!=null&&n.tokenStandard&&(o.token_standard={_eq:n==null?void 0:n.tokenStandard});const a={query:zk,variables:{where_condition:o,offset:(i=n==null?void 0:n.options)==null?void 0:i.offset,limit:(s=n==null?void 0:n.options)==null?void 0:s.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getOwnedTokensByTokenData(t,n){var i,s;const r=De.ensure(t).hex();Dn.validateAddress(r);const o={token_data_id:{_eq:r},amount:{_gt:0}};n!=null&&n.tokenStandard&&(o.token_standard={_eq:n==null?void 0:n.tokenStandard});const a={query:Hk,variables:{where_condition:o,offset:(i=n==null?void 0:n.options)==null?void 0:i.offset,limit:(s=n==null?void 0:n.options)==null?void 0:s.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getTokenOwnedFromCollectionAddress(t,n,i){var s,r;const o=De.ensure(t).hex();Dn.validateAddress(o);const a=De.ensure(n).hex();Dn.validateAddress(a);const c={owner_address:{_eq:o},current_token_data:{collection_id:{_eq:a}},amount:{_gt:0}};i!=null&&i.tokenStandard&&(c.token_standard={_eq:i==null?void 0:i.tokenStandard});const d={query:Xk,variables:{where_condition:c,offset:(s=i==null?void 0:i.options)==null?void 0:s.offset,limit:(r=i==null?void 0:i.options)==null?void 0:r.limit,order_by:i==null?void 0:i.orderBy}};return this.queryIndexer(d)}async getTokenOwnedFromCollectionNameAndCreatorAddress(t,n,i,s){const r=await this.getCollectionAddress(i,n,s);return await this.getTokenOwnedFromCollectionAddress(t,r,s)}async getCollectionData(t,n,i){var s,r;const o=De.ensure(t).hex();Dn.validateAddress(o);const a={collection_name:{_eq:n},creator_address:{_eq:o}};i!=null&&i.tokenStandard&&(a.token_standard={_eq:i==null?void 0:i.tokenStandard});const c={query:Dk,variables:{where_condition:a,offset:(s=i==null?void 0:i.options)==null?void 0:s.offset,limit:(r=i==null?void 0:i.options)==null?void 0:r.limit,order_by:i==null?void 0:i.orderBy}};return this.queryIndexer(c)}async getCollectionAddress(t,n,i){return(await this.getCollectionData(t,n,i)).current_collections_v2[0].collection_id}async getCollectionsWithOwnedTokens(t,n){var i,s;const r=De.ensure(t).hex();Dn.validateAddress(r);const o={owner_address:{_eq:r}};n!=null&&n.tokenStandard&&(o.current_collection={token_standard:{_eq:n==null?void 0:n.tokenStandard}});const a={query:jk,variables:{where_condition:o,offset:(i=n==null?void 0:n.options)==null?void 0:i.offset,limit:(s=n==null?void 0:n.options)==null?void 0:s.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getAccountTransactionsCount(t){const n=De.ensure(t).hex();Dn.validateAddress(n);const i={query:Uk,variables:{address:n}};return this.queryIndexer(i)}async getAccountTransactionsData(t,n){var i,s;const r=De.ensure(t).hex();Dn.validateAddress(r);const a={query:Mk,variables:{where_condition:{account_address:{_eq:r}},offset:(i=n==null?void 0:n.options)==null?void 0:i.offset,limit:(s=n==null?void 0:n.options)==null?void 0:s.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getTopUserTransactions(t){const n={query:Zk,variables:{limit:t}};return this.queryIndexer(n)}async getUserTransactions(t){var n,i;const s={version:{_lte:t==null?void 0:t.startVersion}},r={query:Yk,variables:{where_condition:s,offset:(n=t==null?void 0:t.options)==null?void 0:n.offset,limit:(i=t==null?void 0:t.options)==null?void 0:i.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(r)}async getDelegatedStakingActivities(t,n){const i=De.ensure(t).hex(),s=De.ensure(n).hex();Dn.validateAddress(i),Dn.validateAddress(s);const r={query:Lk,variables:{delegatorAddress:i,poolAddress:s}};return this.queryIndexer(r)}async getNumberOfDelegators(t){const n=De.ensure(t).hex();Dn.validateAddress(n);const i={query:Fk,variables:{poolAddress:n}};return this.queryIndexer(i)}async getAccountCoinsData(t,n){var i,s;const r=De.ensure(t).hex();Dn.validateAddress(r);const a={query:Ok,variables:{where_condition:{owner_address:{_eq:r}},offset:(i=n==null?void 0:n.options)==null?void 0:i.offset,limit:(s=n==null?void 0:n.options)==null?void 0:s.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getAccountCoinsDataCount(t){const n=De.ensure(t).hex();Dn.validateAddress(n);const i={query:Bk,variables:{address:n}};return this.queryIndexer(i)}async getAccountOwnedObjects(t,n){var i,s;const r=De.ensure(t).hex();Dn.validateAddress(r);const a={query:qk,variables:{where_condition:{owner_address:{_eq:r}},offset:(i=n==null?void 0:n.options)==null?void 0:i.offset,limit:(s=n==null?void 0:n.options)==null?void 0:s.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}},Pd=class{constructor(t,n,i=!1){let s=null,r=null;if(typeof t=="object"&&i4(t)?(s=t.fullnodeUrl,r=t.indexerUrl,this.network="CUSTOM"):(s=Cw[t],r=xl[t],this.network=t),this.network==="CUSTOM"&&!s)throw new Error("fullnode url is not provided");r&&(this.indexerClient=new Dn(r,n)),this.aptosClient=new Mt(s,n,i)}};function Fw(e,t,n){Object.getOwnPropertyNames(t.prototype).forEach(i=>{const s=Object.getOwnPropertyDescriptor(t.prototype,i);s&&(s.value=function(...r){return this[n][i](...r)},Object.defineProperty(e.prototype,i,s))}),Object.getOwnPropertyNames(t).forEach(i=>{const s=Object.getOwnPropertyDescriptor(t,i);s&&(s.value=function(...r){return this[n][i](...r)},!e.hasOwnProperty.call(e,i)&&Object.defineProperty(e,i,s))})}Fw(Pd,Mt,"aptosClient");Fw(Pd,Dn,"indexerClient");function i4(e){return e.fullnodeUrl!==void 0&&typeof e.fullnodeUrl=="string"}var xg=class{constructor(t,n){this.type=t,this.value=n}},zf=class{constructor(){this.data={}}setProperty(t,n){this.data[t]=n}};function Hf(e){let t;return e==="string"||e==="String"?t=new Eo(pg):t=new pa(e).parseTypeTag(),t}function Al(e,t){if(e.length!==t.length)throw new Error("Length of property values and types not match");const n=new Array;return t.forEach((i,s)=>{try{const r=Hf(i),o=new On;Ff(e[s],r,o),n.push(o.getBytes())}catch{n.push(new TextEncoder().encode(e[s]))}}),n}function ep(e,t){if(!e||!t)throw new Error("value or type can not be empty");try{const n=Hf(t),i=new On;return Ff(e,n,i),i.getBytes()}catch{return new TextEncoder().encode(e)}}function Tg(e){const t=e.map.data,n=new zf;return t.forEach(i=>{const{key:s}=i,r=i.value.value,o=i.value.type,a=Hf(o),c=zw(a,r),d=new xg(o,c);n.setProperty(s,d)}),n}function zw(e,t){const n=new cg(new De(t).toUint8Array());let i="";return e instanceof Mr?i=n.deserializeU8().toString():e instanceof fa?i=n.deserializeU64().toString():e instanceof ha?i=n.deserializeU128().toString():e instanceof la?i=n.deserializeBool()?"true":"false":e instanceof So?i=De.fromUint8Array(n.deserializeFixedBytes(32)).hex():e instanceof Eo&&e.isStringTypeTag()?i=n.deserializeStr():i=t,i}var Hw={};yf(Hw,{PropertyMap:()=>zf,PropertyValue:()=>xg,Token:()=>Ww,TokenData:()=>Kw});var Kw=class{constructor(t,n,i,s,r,o,a,c){this.collection=t,this.description=n,this.name=i,this.maximum=s,this.supply=r,this.uri=o,this.default_properties=Tg(a),this.mutability_config=c}},Ww=class{constructor(t,n,i){this.id=t,this.amount=n,this.token_properties=Tg(i)}},s4=class{constructor(t){this.aptosClient=t}async createCollection(t,n,i,s,r=Ja,o){const c=await new In(this.aptosClient,{sender:t.address(),...o}).build("0x3::token::create_collection_script",[],[n,i,s,r,[!1,!1,!1]]),d=Mt.generateBCSTransaction(t,c);return(await this.aptosClient.submitSignedBCSTransaction(d)).hash}async createToken(t,n,i,s,r,o,a=Ja,c=t.address(),d=0,u=0,l=[],f=[],p=[],m){const x=await new In(this.aptosClient,{sender:t.address(),...m}).build("0x3::token::create_token_script",[],[n,i,s,r,a,o,c,d,u,[!1,!1,!1,!1,!1],l,Al(f,p),p]),C=Mt.generateBCSTransaction(t,x);return(await this.aptosClient.submitSignedBCSTransaction(C)).hash}async createTokenWithMutabilityConfig(t,n,i,s,r,o,a=Ja,c=t.address(),d=0,u=0,l=[],f=[],p=[],m=[!1,!1,!1,!1,!1],_){const C=await new In(this.aptosClient,{sender:t.address(),..._}).build("0x3::token::create_token_script",[],[n,i,s,r,a,o,c,d,u,m,l,f,p]),k=Mt.generateBCSTransaction(t,C);return(await this.aptosClient.submitSignedBCSTransaction(k)).hash}async offerToken(t,n,i,s,r,o,a=0,c){const u=await new In(this.aptosClient,{sender:t.address(),...c}).build("0x3::token_transfers::offer_script",[],[n,i,s,r,a,o]),l=Mt.generateBCSTransaction(t,u);return(await this.aptosClient.submitSignedBCSTransaction(l)).hash}async claimToken(t,n,i,s,r,o=0,a){const d=await new In(this.aptosClient,{sender:t.address(),...a}).build("0x3::token_transfers::claim_script",[],[n,i,s,r,o]),u=Mt.generateBCSTransaction(t,d);return(await this.aptosClient.submitSignedBCSTransaction(u)).hash}async cancelTokenOffer(t,n,i,s,r,o=0,a){const d=await new In(this.aptosClient,{sender:t.address(),...a}).build("0x3::token_transfers::cancel_offer_script",[],[n,i,s,r,o]),u=Mt.generateBCSTransaction(t,d);return(await this.aptosClient.submitSignedBCSTransaction(u)).hash}async directTransferToken(t,n,i,s,r,o,a=0,c){const u=await new In(this.aptosClient,{sender:t.address(),...c}).build("0x3::token::direct_transfer_script",[],[i,s,r,a,o]),l=new pt.MultiAgentRawTransaction(u,[pt.AccountAddress.fromHex(n.address())]),f=new pt.Ed25519Signature(t.signBuffer(qs.getSigningMessage(l)).toUint8Array()),p=new pt.AccountAuthenticatorEd25519(new pt.Ed25519PublicKey(t.signingKey.publicKey),f),m=new pt.Ed25519Signature(n.signBuffer(qs.getSigningMessage(l)).toUint8Array()),_=new pt.AccountAuthenticatorEd25519(new pt.Ed25519PublicKey(n.signingKey.publicKey),m),x=new pt.TransactionAuthenticatorMultiAgent(p,[pt.AccountAddress.fromHex(n.address())],[_]),C=Ks(new pt.SignedTransaction(u,x));return(await this.aptosClient.submitSignedBCSTransaction(C)).hash}async directTransferTokenWithFeePayer(t,n,i,s,r,o,a,c=0,d){const l=await new In(this.aptosClient,{sender:t.address(),...d}).build("0x3::token::direct_transfer_script",[],[i,s,r,c,o]),f=new pt.FeePayerRawTransaction(l,[pt.AccountAddress.fromHex(n.address())],pt.AccountAddress.fromHex(a.address())),p=new pt.Ed25519Signature(t.signBuffer(qs.getSigningMessage(f)).toUint8Array()),m=new pt.AccountAuthenticatorEd25519(new pt.Ed25519PublicKey(t.signingKey.publicKey),p),_=new pt.Ed25519Signature(n.signBuffer(qs.getSigningMessage(f)).toUint8Array()),x=new pt.AccountAuthenticatorEd25519(new pt.Ed25519PublicKey(n.signingKey.publicKey),_),C=new pt.Ed25519Signature(a.signBuffer(qs.getSigningMessage(f)).toUint8Array()),k=new pt.AccountAuthenticatorEd25519(new pt.Ed25519PublicKey(a.signingKey.publicKey),C),T=new pt.TransactionAuthenticatorFeePayer(m,[pt.AccountAddress.fromHex(n.address())],[x],{address:pt.AccountAddress.fromHex(a.address()),authenticator:k}),S=Ks(new pt.SignedTransaction(l,T));return(await this.aptosClient.submitSignedBCSTransaction(S)).hash}async optInTokenTransfer(t,n,i){const r=await new In(this.aptosClient,{sender:t.address(),...i}).build("0x3::token::opt_in_direct_transfer",[],[n]),o=Mt.generateBCSTransaction(t,r);return(await this.aptosClient.submitSignedBCSTransaction(o)).hash}async transferWithOptIn(t,n,i,s,r,o,a,c){const u=await new In(this.aptosClient,{sender:t.address(),...c}).build("0x3::token::transfer_with_opt_in",[],[n,i,s,r,o,a]),l=Mt.generateBCSTransaction(t,u);return(await this.aptosClient.submitSignedBCSTransaction(l)).hash}async burnByCreator(t,n,i,s,r,o,a){const d=await new In(this.aptosClient,{sender:t.address(),...a}).build("0x3::token::burn_by_creator",[],[n,i,s,r,o]),u=Mt.generateBCSTransaction(t,d);return(await this.aptosClient.submitSignedBCSTransaction(u)).hash}async burnByOwner(t,n,i,s,r,o,a){const d=await new In(this.aptosClient,{sender:t.address(),...a}).build("0x3::token::burn",[],[n,i,s,r,o]),u=Mt.generateBCSTransaction(t,d);return(await this.aptosClient.submitSignedBCSTransaction(u)).hash}async mutateTokenProperties(t,n,i,s,r,o,a,c,d,u,l){const p=await new In(this.aptosClient,{sender:t.address(),...l}).build("0x3::token::mutate_token_properties",[],[n,i,s,r,o,a,c,d,u]),m=Mt.generateBCSTransaction(t,p);return(await this.aptosClient.submitSignedBCSTransaction(m)).hash}async getCollectionData(t,n){const s=(await this.aptosClient.getAccountResources(t)).find(c=>c.type==="0x3::token::Collections"),{handle:r}=s.data.collection_data,o={key_type:"0x1::string::String",value_type:"0x3::token::CollectionData",key:n};return await this.aptosClient.getTableItem(r,o)}async getTokenData(t,n,i){const s=t instanceof De?t.hex():t,r=await this.aptosClient.getAccountResource(s,"0x3::token::Collections"),{handle:o}=r.data.token_data,c={key_type:"0x3::token::TokenDataId",value_type:"0x3::token::TokenData",key:{creator:s,collection:n,name:i}},d=await this.aptosClient.getTableItem(o,c);return new Kw(d.collection,d.description,d.name,d.maximum,d.supply,d.uri,d.default_properties,d.mutability_config)}async getToken(t,n,i,s="0"){const r={creator:t instanceof De?t.hex():t,collection:n,name:i};return this.getTokenForAccount(t,{token_data_id:r,property_version:s})}async getTokenForAccount(t,n){const i=await this.aptosClient.getAccountResource(t instanceof De?t.hex():t,"0x3::token::TokenStore"),{handle:s}=i.data.tokens,r={key_type:"0x3::token::TokenId",value_type:"0x3::token::Token",key:n};try{const o=await this.aptosClient.getTableItem(s,r);return new Ww(o.id,o.amount,o.token_properties)}catch(o){return(o==null?void 0:o.status)===404?{id:n,amount:"0",token_properties:new zf}:o}}},kl=class{constructor(e){this.assetType="0x1::fungible_asset::Metadata",this.provider=e}async transfer(e,t,n,i,s){const r=await this.generateTransfer(e,t,n,i,s);return await this.provider.signAndSubmitTransaction(e,r)}async getPrimaryBalance(e,t){const n={function:"0x1::primary_fungible_store::balance",type_arguments:[this.assetType],arguments:[De.ensure(e).hex(),De.ensure(t).hex()]},i=await this.provider.view(n);return BigInt(i[0])}async generateTransfer(e,t,n,i,s){return await new In(this.provider,{sender:e.address(),...s}).build("0x1::primary_fungible_store::transfer",[this.assetType],[De.ensure(t).hex(),De.ensure(n).hex(),i])}},Ea={BOOLEAN:"bool",U8:"u8",U16:"u16",U32:"u32",U64:"u64",U128:"u128",U256:"u256",ADDRESS:"address",VECTOR:"vector<u8>",STRING:"string"},r4=class{constructor(e){this.tokenType="0x4::token::Token",this.provider=e}async submitTransaction(e,t,n,i,s){const o=await new In(this.provider,{sender:e.address(),...s}).build(`0x4::aptos_token::${t}`,n,i),a=Mt.generateBCSTransaction(e,o);return(await this.provider.submitSignedBCSTransaction(a)).hash}async createCollection(e,t,n,i,s=Ja,r,o){var a,c,d,u,l,f,p,m,_,x,C;return this.submitTransaction(e,"create_collection",[],[t,s,n,i,(a=r==null?void 0:r.mutableDescription)!=null?a:!0,(c=r==null?void 0:r.mutableRoyalty)!=null?c:!0,(d=r==null?void 0:r.mutableURI)!=null?d:!0,(u=r==null?void 0:r.mutableTokenDescription)!=null?u:!0,(l=r==null?void 0:r.mutableTokenName)!=null?l:!0,(f=r==null?void 0:r.mutableTokenProperties)!=null?f:!0,(p=r==null?void 0:r.mutableTokenURI)!=null?p:!0,(m=r==null?void 0:r.tokensBurnableByCreator)!=null?m:!0,(_=r==null?void 0:r.tokensFreezableByCreator)!=null?_:!0,(x=r==null?void 0:r.royaltyNumerator)!=null?x:0,(C=r==null?void 0:r.royaltyDenominator)!=null?C:1],o)}async mint(e,t,n,i,s,r=[],o=[],a=[],c){return this.submitTransaction(e,"mint",[],[t,n,i,s,r,o,Al(a,o)],c)}async mintSoulBound(e,t,n,i,s,r,o=[],a=[],c=[],d){return this.submitTransaction(e,"mint_soul_bound",[],[t,n,i,s,o,a,Al(c,a),r.address().hex()],d)}async burnToken(e,t,n,i){return this.submitTransaction(e,"burn",[n||this.tokenType],[De.ensure(t).hex()],i)}async freezeTokenTransafer(e,t,n,i){return this.submitTransaction(e,"freeze_transfer",[n||this.tokenType],[De.ensure(t).hex()],i)}async unfreezeTokenTransafer(e,t,n,i){return this.submitTransaction(e,"unfreeze_transfer",[n||this.tokenType],[De.ensure(t).hex()],i)}async setTokenDescription(e,t,n,i,s){return this.submitTransaction(e,"set_description",[i||this.tokenType],[De.ensure(t).hex(),n],s)}async setTokenName(e,t,n,i,s){return this.submitTransaction(e,"set_name",[i||this.tokenType],[De.ensure(t).hex(),n],s)}async setTokenURI(e,t,n,i,s){return this.submitTransaction(e,"set_uri",[i||this.tokenType],[De.ensure(t).hex(),n],s)}async addTokenProperty(e,t,n,i,s,r,o){return this.submitTransaction(e,"add_property",[r||this.tokenType],[De.ensure(t).hex(),n,Ea[i],ep(s,Ea[i])],o)}async removeTokenProperty(e,t,n,i,s){return this.submitTransaction(e,"remove_property",[i||this.tokenType],[De.ensure(t).hex(),n],s)}async updateTokenProperty(e,t,n,i,s,r,o){return this.submitTransaction(e,"update_property",[r||this.tokenType],[De.ensure(t).hex(),n,Ea[i],ep(s,Ea[i])],o)}async addTypedProperty(e,t,n,i,s,r,o){return this.submitTransaction(e,"add_typed_property",[r||this.tokenType,Ea[i]],[De.ensure(t).hex(),n,s],o)}async updateTypedProperty(e,t,n,i,s,r,o){return this.submitTransaction(e,"update_typed_property",[r||this.tokenType,Ea[i]],[De.ensure(t).hex(),n,s],o)}async transferTokenOwnership(e,t,n,i,s){const o=await new In(this.provider,{sender:e.address(),...s}).build("0x1::object::transfer",[i||this.tokenType],[De.ensure(t).hex(),De.ensure(n).hex()]),a=Mt.generateBCSTransaction(e,o);return(await this.provider.submitSignedBCSTransaction(a)).hash}async transfer(e,t){let n=t;if(n==null&&(n=(await this.provider.getTokenData(De.ensure(e.tokenAddress).hex())).current_token_datas_v2[0].is_fungible_v2),n){const r=e;return await new kl(this.provider).transfer(r.owner,r.tokenAddress,r.recipient,r.amount,r.extraArgs)}const i=e;return await this.transferTokenOwnership(i.owner,i.tokenAddress,i.recipient,i.tokenType,i.extraArgs)}async burnObject(e,t,n,i){const r=await new In(this.provider,{sender:e.address(),...i}).build("0x1::object::burn",[n||"0x1::object::ObjectCore"],[De.ensure(t).hex()]),o=Mt.generateBCSTransaction(e,r);return(await this.provider.submitSignedBCSTransaction(o)).hash}},tp="0x1::aptos_account::transfer_coins",Gw="0x1::coin::transfer",o4=class{constructor(e){this.aptosClient=e}async transfer(e,t,n,i){var s,r,o;const a=((s=i==null?void 0:i.coinType)!=null?s:"").toString().includes("::");if(i!=null&&i.coinType&&!a&&cn.isValid(i.coinType)){console.warn("to transfer a fungible asset, use `FungibleAssetClient()` class for better support");const _=new Pd({fullnodeUrl:this.aptosClient.nodeUrl,indexerUrl:(r=xl[Z0[this.aptosClient.nodeUrl]])!=null?r:this.aptosClient.nodeUrl});return await new kl(_).transfer(e,i==null?void 0:i.coinType,Rs(t),n)}const c=(o=i==null?void 0:i.coinType)!=null?o:vl;let d;(i==null?void 0:i.createReceiverIfMissing)===void 0?d=tp:d=i!=null&&i.createReceiverIfMissing?tp:Gw;const u=Rs(t),f=await new In(this.aptosClient,{sender:e.address(),...i}).build(d,[c],[u,n]),p=Mt.generateBCSTransaction(e,f);return(await this.aptosClient.submitSignedBCSTransaction(p)).hash}async checkBalance(e,t){var n,i,s;const r=((n=t==null?void 0:t.coinType)!=null?n:"").toString().includes("::");if(t!=null&&t.coinType&&!r&&cn.isValid(t.coinType)){console.warn("to check balance of a fungible asset, use `FungibleAssetClient()` class for better support");const u=new Pd({fullnodeUrl:this.aptosClient.nodeUrl,indexerUrl:(i=xl[Z0[this.aptosClient.nodeUrl]])!=null?i:this.aptosClient.nodeUrl});return await new kl(u).getPrimaryBalance(Rs(e),t==null?void 0:t.coinType)}const a=`0x1::coin::CoinStore<${(s=t==null?void 0:t.coinType)!=null?s:vl}>`,c=Rs(e),d=await this.aptosClient.getAccountResource(c,a);return BigInt(d.data.coin.value)}},a4=class extends Mt{constructor(e,t,n){if(super(e,n),!t)throw new Error("Faucet URL cannot be empty.");this.faucetUrl=t,this.config=n}async fundAccount(e,t,n=Ew){const{data:i}=await zo({url:this.faucetUrl,endpoint:"mint",body:null,params:{address:De.ensure(e).noPrefix(),amount:t},overrides:{...this.config},originMethod:"fundAccount"}),s=[];for(let r=0;r<i.length;r+=1){const o=i[r];s.push(this.waitForTransaction(o,{timeoutSecs:n}))}return await Promise.all(s),i}},np={testnet:"0x5f8fd2347449685cf41d4db97926ec3a096eaf381332be4f1318ad4d16a8497c",mainnet:"0x867ed1f6bf916171b1de3ee92849b8978b7d1b9e0a8cc982a3d19d535dfd9c0c"},xr=/^[a-z\d][a-z\d-]{1,61}[a-z\d]$/,Vw=new RegExp("^(?:(?<subdomain>[^.]+)\\.(?!apt$))?(?<domain>[^.]+)(?:\\.apt)?$"),c4=class{constructor(e,t){var n;if(this.provider=e,!np[this.provider.network]&&!t)throw new Error("Error: For custom providers, you must pass in a contract address");this.contractAddress=(n=np[this.provider.network])!=null?n:t}async getPrimaryNameByAddress(e){const n=(await this.provider.getAccountResource(this.contractAddress,`${this.contractAddress}::domains::ReverseLookupRegistryV1`)).data,{handle:i}=n.registry,s={key_type:"address",value_type:`${this.contractAddress}::domains::NameRecordKeyV1`,key:e};try{const r=await this.provider.getTableItem(i,s);return r.subdomain_name.vec[0]?`${r.subdomain_name.vec[0]}.${r.domain_name}`:r.domain_name}catch(r){if(r.status===404)return null;throw new Error(r)}}async getAddressByName(e){var t,n;const{domain:i,subdomain:s}=(n=(t=e.match(Vw))==null?void 0:t.groups)!=null?n:{};if(!i)return null;const r=s?await this.getRegistrationForSubdomainName(i,s):await this.getRegistrationForDomainName(i);return r===null?null:r.target}async mintAptosName(e,t,n=1,i){if(t.match(xr)===null)throw new Fi(400,`Name ${t} is not valid`);const s=await this.getRegistrationForDomainName(t);if(s&&Math.ceil(Date.now()/1e3)<s.expirationTimestampSeconds)throw new Fi(400,`Name ${t} is not available`);const o=await new In(this.provider.aptosClient,{sender:e.address(),...i}).build(`${this.contractAddress}::domains::register_domain`,[],[t,n]),a=Mt.generateBCSTransaction(e,o);return(await this.provider.submitSignedBCSTransaction(a)).hash}async mintAptosSubdomain(e,t,n,i,s){if(n.match(xr)===null)throw new Fi(400,`Domain name ${n} is not valid`);if(t.match(xr)===null)throw new Fi(400,`Subdomain name ${t} is not valid`);const r=await this.getRegistrationForSubdomainName(n,t);if(r&&Math.ceil(Date.now()/1e3)<r.expirationTimestampSeconds)throw new Fi(400,`Name ${t}.${n} is not available`);const o=await this.getRegistrationForDomainName(n);if(o===null)throw new Fi(400,`Domain name ${n} does not exist`);const a=Math.ceil(Date.now()/1e3);if(o.expirationTimestampSeconds<a)throw new Fi(400,`Domain name ${n} expired`);const c=i||o.expirationTimestampSeconds;if(c<a)throw new Fi(400,`Expiration for ${t}.${n} is before now`);const u=await new In(this.provider.aptosClient,{sender:e.address(),...s}).build(`${this.contractAddress}::domains::register_subdomain`,[],[t,n,c]),l=Mt.generateBCSTransaction(e,u);return(await this.provider.submitSignedBCSTransaction(l)).hash}async setSubdomainAddress(e,t,n,i,s){const r=cn.standardizeAddress(i);if(n.match(xr)===null)throw new Fi(400,`Name ${n} is not valid`);if(t.match(xr)===null)throw new Fi(400,`Name ${t} is not valid`);const a=await new In(this.provider.aptosClient,{sender:e.address(),...s}).build(`${this.contractAddress}::domains::set_subdomain_address`,[],[t,n,r]),c=Mt.generateBCSTransaction(e,a);return(await this.provider.submitSignedBCSTransaction(c)).hash}async initReverseLookupRegistry(e,t){const i=await new In(this.provider.aptosClient,{sender:e.address(),...t}).build(`${this.contractAddress}::domains::init_reverse_lookup_registry_v1`,[],[]),s=Mt.generateBCSTransaction(e,i);return(await this.provider.submitSignedBCSTransaction(s)).hash}async getRegistrationForDomainName(e){if(e.match(xr)===null)return null;const n=(await this.provider.getAccountResource(this.contractAddress,`${this.contractAddress}::domains::NameRegistryV1`)).data,{handle:i}=n.registry,s={key_type:`${this.contractAddress}::domains::NameRecordKeyV1`,value_type:`${this.contractAddress}::domains::NameRecordV1`,key:{subdomain_name:{vec:[]},domain_name:e}};try{const r=await this.provider.getTableItem(i,s);return{target:r.target_address.vec.length===1?r.target_address.vec[0]:null,expirationTimestampSeconds:r.expiration_time_sec}}catch(r){if(r.status===404)return null;throw new Error(r)}}async getRegistrationForSubdomainName(e,t){if(e.match(xr)===null||t.match(xr)===null)return null;const i=(await this.provider.getAccountResource(this.contractAddress,`${this.contractAddress}::domains::NameRegistryV1`)).data,{handle:s}=i.registry,r={key_type:`${this.contractAddress}::domains::NameRecordKeyV1`,value_type:`${this.contractAddress}::domains::NameRecordV1`,key:{subdomain_name:{vec:[t]},domain_name:e}};try{const o=await this.provider.getTableItem(s,r);return{target:o.target_address.vec.length===1?o.target_address.vec[0]:null,expirationTimestampSeconds:o.expiration_time_sec}}catch(o){if(o.status===404)return null;throw new Error(o)}}},xu=()=>Math.floor(Date.now()/1e3),Xw=class{constructor(e,t,n,i,s){this.lastUncommintedNumber=null,this.currentNumber=null,this.lock=!1,this.provider=e,this.account=t,this.maxWaitTime=n,this.maximumInFlight=i,this.sleepTime=s}async nextSequenceNumber(){for(;this.lock;)await td(this.sleepTime);this.lock=!0;let e=BigInt(0);try{if((this.lastUncommintedNumber===null||this.currentNumber===null)&&await this.initialize(),this.currentNumber-this.lastUncommintedNumber>=this.maximumInFlight){await this.update();const t=xu();for(;this.currentNumber-this.lastUncommintedNumber>=this.maximumInFlight;)await td(this.sleepTime),xu()-t>this.maxWaitTime?(console.warn(`Waited over 30 seconds for a transaction to commit, resyncing ${this.account.address()}`),await this.initialize()):await this.update()}e=this.currentNumber,this.currentNumber+=BigInt(1)}catch(t){console.error("error in getting next sequence number for this account",t)}finally{this.lock=!1}return e}async initialize(){const{sequence_number:e}=await this.provider.getAccount(this.account.address());this.currentNumber=BigInt(e),this.lastUncommintedNumber=BigInt(e)}async update(){const{sequence_number:e}=await this.provider.getAccount(this.account.address());return this.lastUncommintedNumber=BigInt(e),this.lastUncommintedNumber}async synchronize(){if(this.lastUncommintedNumber!==this.currentNumber){for(;this.lock;)await td(this.sleepTime);this.lock=!0;try{await this.update();const e=xu();for(;this.lastUncommintedNumber!==this.currentNumber;)xu()-e>this.maxWaitTime?(console.warn(`Waited over 30 seconds for a transaction to commit, resyncing ${this.account.address()}`),await this.initialize()):(await td(this.sleepTime),await this.update())}catch(e){console.error("error in synchronizing this account sequence number with the one on chain",e)}finally{this.lock=!1}}}},Qh=class{constructor(){this.queue=[],this.resolveMap=new Map,this.counter=0,this.cancelled=!1}enqueue(e){if(this.resolveMap.size>0){const t=this.resolveMap.get(0);if(t){this.resolveMap.delete(0),t(e);return}}this.queue.push(e)}async dequeue(){return this.queue.length>0?Promise.resolve(this.queue.shift()):new Promise(t=>{this.counter+=1,this.resolveMap.set(this.counter,t)})}isEmpty(){return this.queue.length===0}cancel(){this.cancelled=!0,this.resolveMap.forEach(async e=>{e(await Promise.reject(new ip("Task cancelled")))}),this.resolveMap.clear(),this.queue.length=0}isCancelled(){return this.cancelled}},ip=class extends Error{constructor(e){super(e)}},O_="fulfilled",Jw=(e=>(e.TransactionSent="transactionSent",e.TransactionSendFailed="transactionsendFailed",e.TransactionExecuted="transactionExecuted",e.TransactionExecutionFailed="transactionexecutionFailed",e))(Jw||{}),d4=class extends J0{constructor(e,t,n=30,i=100,s=10){super(),this.taskQueue=new Qh,this.transactionsQueue=new Qh,this.outstandingTransactions=new Qh,this.sentTransactions=[],this.executedTransactions=[],this.provider=e,this.account=t,this.started=!1,this.accountSequnceNumber=new Xw(e,t,n,i,s)}async submitNextTransaction(){try{for(;;){if(this.transactionsQueue.isEmpty())return;const e=await this.accountSequnceNumber.nextSequenceNumber();if(e===null)return;const t=await this.generateNextTransaction(this.account,e);if(!t)return;const n=this.provider.submitSignedBCSTransaction(t);await this.outstandingTransactions.enqueue([n,e])}}catch(e){if(e instanceof ip)return;console.log(e)}}async processTransactions(){try{for(;;){const e=[],t=[];let[n,i]=await this.outstandingTransactions.dequeue();for(e.push(n),t.push(i);!this.outstandingTransactions.isEmpty();)[n,i]=await this.outstandingTransactions.dequeue(),e.push(n),t.push(i);const s=await Promise.allSettled(e);for(let r=0;r<s.length&&r<t.length;r+=1){const o=s[r];i=t[r],o.status===O_?(this.sentTransactions.push([o.value.hash,i,null]),this.emit("transactionSent",[this.sentTransactions.length,o.value.hash]),await this.checkTransaction(o,i)):(this.sentTransactions.push([o.status,i,o.reason]),this.emit("transactionsendFailed",[this.sentTransactions.length,o.reason]))}}}catch(e){if(e instanceof ip)return;console.log(e)}}async checkTransaction(e,t){const n=[];n.push(this.provider.waitForTransactionWithResult(e.value.hash,{checkSuccess:!0}));const i=await Promise.allSettled(n);for(let s=0;s<i.length;s+=1){const r=i[s];r.status===O_?(this.executedTransactions.push([r.value.hash,t,null]),this.emit("transactionExecuted",[this.executedTransactions.length,r.value.hash])):(this.executedTransactions.push([r.status,t,r.reason]),this.emit("transactionexecutionFailed",[this.executedTransactions.length,r.reason]))}}async push(e){await this.transactionsQueue.enqueue(e)}async generateNextTransaction(e,t){if(this.transactionsQueue.isEmpty())return;const n=await this.transactionsQueue.dequeue(),i=await this.provider.generateRawTransaction(e.address(),n,{providedSequenceNumber:t});return Mt.generateBCSTransaction(e,i)}async run(){try{for(;!this.taskQueue.isCancelled();)await(await this.taskQueue.dequeue())()}catch(e){throw new Error(e)}}start(){if(this.started)throw new Error("worker has already started");this.started=!0,this.taskQueue.enqueue(()=>this.submitNextTransaction()),this.taskQueue.enqueue(()=>this.processTransactions()),this.run()}stop(){if(this.taskQueue.isCancelled())throw new Error("worker has already stopped");this.started=!1,this.taskQueue.cancel()}},Zw={};yf(Zw,{AptosErrorCode:()=>Yw,MoveFunctionVisibility:()=>Qw,RoleType:()=>e1});var Yw=(e=>(e.ACCOUNT_NOT_FOUND="account_not_found",e.RESOURCE_NOT_FOUND="resource_not_found",e.MODULE_NOT_FOUND="module_not_found",e.STRUCT_FIELD_NOT_FOUND="struct_field_not_found",e.VERSION_NOT_FOUND="version_not_found",e.TRANSACTION_NOT_FOUND="transaction_not_found",e.TABLE_ITEM_NOT_FOUND="table_item_not_found",e.BLOCK_NOT_FOUND="block_not_found",e.STATE_VALUE_NOT_FOUND="state_value_not_found",e.VERSION_PRUNED="version_pruned",e.BLOCK_PRUNED="block_pruned",e.INVALID_INPUT="invalid_input",e.INVALID_TRANSACTION_UPDATE="invalid_transaction_update",e.SEQUENCE_NUMBER_TOO_OLD="sequence_number_too_old",e.VM_ERROR="vm_error",e.HEALTH_CHECK_FAILED="health_check_failed",e.MEMPOOL_IS_FULL="mempool_is_full",e.INTERNAL_ERROR="internal_error",e.WEB_FRAMEWORK_ERROR="web_framework_error",e.BCS_NOT_SUPPORTED="bcs_not_supported",e.API_DISABLED="api_disabled",e))(Yw||{}),Qw=(e=>(e.PRIVATE="private",e.PUBLIC="public",e.FRIEND="friend",e))(Qw||{}),e1=(e=>(e.VALIDATOR="validator",e.FULL_NODE="full_node",e))(e1||{}),t1=(e=>(e.AccountAddress="account_address",e.TransactionVersion="transaction_version",e))(t1||{}),n1=(e=>(e.AccountAddress="account_address",e.MinBlockHeight="min_block_height",e.NumDistinctVersions="num_distinct_versions",e))(n1||{}),i1=(e=>(e.AccountAddress="account_address",e.TransactionVersion="transaction_version",e))(i1||{}),s1=(e=>(e.Address="address",e.TransactionVersion="transaction_version",e))(s1||{}),r1=(e=>(e.BlockHeight="block_height",e.Epoch="epoch",e.FailedProposerIndices="failed_proposer_indices",e.Id="id",e.PreviousBlockVotesBitvec="previous_block_votes_bitvec",e.Proposer="proposer",e.Round="round",e.Timestamp="timestamp",e.Version="version",e))(r1||{}),o1=(e=>(e.ActivityType="activity_type",e.Amount="amount",e.BlockHeight="block_height",e.CoinType="coin_type",e.EntryFunctionIdStr="entry_function_id_str",e.EventAccountAddress="event_account_address",e.EventCreationNumber="event_creation_number",e.EventIndex="event_index",e.EventSequenceNumber="event_sequence_number",e.IsGasFee="is_gas_fee",e.IsTransactionSuccess="is_transaction_success",e.OwnerAddress="owner_address",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(o1||{}),a1=(e=>(e.Amount="amount",e.CoinType="coin_type",e.CoinTypeHash="coin_type_hash",e.OwnerAddress="owner_address",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(a1||{}),c1=(e=>(e.CoinType="coin_type",e.CoinTypeHash="coin_type_hash",e.CreatorAddress="creator_address",e.Decimals="decimals",e.Name="name",e.SupplyAggregatorTableHandle="supply_aggregator_table_handle",e.SupplyAggregatorTableKey="supply_aggregator_table_key",e.Symbol="symbol",e.TransactionCreatedTimestamp="transaction_created_timestamp",e.TransactionVersionCreated="transaction_version_created",e))(c1||{}),d1=(e=>(e.CoinType="coin_type",e.CoinTypeHash="coin_type_hash",e.Supply="supply",e.TransactionEpoch="transaction_epoch",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(d1||{}),u1=(e=>(e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.Description="description",e.DescriptionMutable="description_mutable",e.Maximum="maximum",e.MaximumMutable="maximum_mutable",e.MetadataUri="metadata_uri",e.Supply="supply",e.TableHandle="table_handle",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.UriMutable="uri_mutable",e))(u1||{}),l1=(e=>(e.Domain="domain",e.ExpirationTimestamp="expiration_timestamp",e.IsDeleted="is_deleted",e.LastTransactionVersion="last_transaction_version",e.RegisteredAddress="registered_address",e.Subdomain="subdomain",e.TokenName="token_name",e))(l1||{}),f1=(e=>(e.Domain="domain",e.ExpirationTimestamp="expiration_timestamp",e.IsPrimary="is_primary",e.LastTransactionVersion="last_transaction_version",e.RegisteredAddress="registered_address",e.Subdomain="subdomain",e.TokenName="token_name",e))(f1||{}),h1=(e=>(e.Amount="amount",e.CoinType="coin_type",e.CoinTypeHash="coin_type_hash",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.OwnerAddress="owner_address",e))(h1||{}),p1=(e=>(e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.Description="description",e.DescriptionMutable="description_mutable",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Maximum="maximum",e.MaximumMutable="maximum_mutable",e.MetadataUri="metadata_uri",e.Supply="supply",e.TableHandle="table_handle",e.UriMutable="uri_mutable",e))(p1||{}),g1=(e=>(e.CollectionId="collection_id",e.CollectionName="collection_name",e.CollectionUri="collection_uri",e.CreatorAddress="creator_address",e.DistinctTokens="distinct_tokens",e.LastTransactionVersion="last_transaction_version",e.OwnerAddress="owner_address",e.SingleTokenUri="single_token_uri",e))(g1||{}),m1=(e=>(e.CollectionId="collection_id",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.CurrentSupply="current_supply",e.Description="description",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.MaxSupply="max_supply",e.MutableDescription="mutable_description",e.MutableUri="mutable_uri",e.TableHandleV1="table_handle_v1",e.TokenStandard="token_standard",e.TotalMintedV2="total_minted_v2",e.Uri="uri",e))(m1||{}),_1=(e=>(e.ActiveTableHandle="active_table_handle",e.InactiveTableHandle="inactive_table_handle",e.LastTransactionVersion="last_transaction_version",e.OperatorCommissionPercentage="operator_commission_percentage",e.StakingPoolAddress="staking_pool_address",e.TotalCoins="total_coins",e.TotalShares="total_shares",e))(_1||{}),b1=(e=>(e.DelegationPoolAddress="delegation_pool_address",e.DelegatorAddress="delegator_address",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.PendingVoter="pending_voter",e.TableHandle="table_handle",e.Voter="voter",e))(b1||{}),y1=(e=>(e.DelegatorAddress="delegator_address",e.LastTransactionVersion="last_transaction_version",e.ParentTableHandle="parent_table_handle",e.PoolAddress="pool_address",e.PoolType="pool_type",e.Shares="shares",e.TableHandle="table_handle",e))(y1||{}),w1=(e=>(e.Amount="amount",e.AssetType="asset_type",e.IsFrozen="is_frozen",e.IsPrimary="is_primary",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.OwnerAddress="owner_address",e.StorageId="storage_id",e.TokenStandard="token_standard",e))(w1||{}),v1=(e=>(e.AllowUngatedTransfer="allow_ungated_transfer",e.IsDeleted="is_deleted",e.LastGuidCreationNum="last_guid_creation_num",e.LastTransactionVersion="last_transaction_version",e.ObjectAddress="object_address",e.OwnerAddress="owner_address",e.StateKeyHash="state_key_hash",e))(v1||{}),x1=(e=>(e.LastTransactionVersion="last_transaction_version",e.OperatorAddress="operator_address",e.StakingPoolAddress="staking_pool_address",e.VoterAddress="voter_address",e))(x1||{}),T1=(e=>(e.DecodedKey="decoded_key",e.DecodedValue="decoded_value",e.IsDeleted="is_deleted",e.Key="key",e.KeyHash="key_hash",e.LastTransactionVersion="last_transaction_version",e.TableHandle="table_handle",e))(T1||{}),A1=(e=>(e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.DefaultProperties="default_properties",e.Description="description",e.DescriptionMutable="description_mutable",e.LargestPropertyVersion="largest_property_version",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Maximum="maximum",e.MaximumMutable="maximum_mutable",e.MetadataUri="metadata_uri",e.Name="name",e.PayeeAddress="payee_address",e.PropertiesMutable="properties_mutable",e.RoyaltyMutable="royalty_mutable",e.RoyaltyPointsDenominator="royalty_points_denominator",e.RoyaltyPointsNumerator="royalty_points_numerator",e.Supply="supply",e.TokenDataIdHash="token_data_id_hash",e.UriMutable="uri_mutable",e))(A1||{}),k1=(e=>(e.CollectionId="collection_id",e.Description="description",e.IsFungibleV2="is_fungible_v2",e.LargestPropertyVersionV1="largest_property_version_v1",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Maximum="maximum",e.Supply="supply",e.TokenDataId="token_data_id",e.TokenName="token_name",e.TokenProperties="token_properties",e.TokenStandard="token_standard",e.TokenUri="token_uri",e))(k1||{}),S1=(e=>(e.Amount="amount",e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Name="name",e.OwnerAddress="owner_address",e.PropertyVersion="property_version",e.TableType="table_type",e.TokenDataIdHash="token_data_id_hash",e.TokenProperties="token_properties",e))(S1||{}),E1=(e=>(e.Amount="amount",e.IsFungibleV2="is_fungible_v2",e.IsSoulboundV2="is_soulbound_v2",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.OwnerAddress="owner_address",e.PropertyVersionV1="property_version_v1",e.StorageId="storage_id",e.TableTypeV1="table_type_v1",e.TokenDataId="token_data_id",e.TokenPropertiesMutatedV1="token_properties_mutated_v1",e.TokenStandard="token_standard",e))(E1||{}),P1=(e=>(e.Amount="amount",e.CollectionDataIdHash="collection_data_id_hash",e.CollectionId="collection_id",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.FromAddress="from_address",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Name="name",e.PropertyVersion="property_version",e.TableHandle="table_handle",e.ToAddress="to_address",e.TokenDataId="token_data_id",e.TokenDataIdHash="token_data_id_hash",e))(P1||{}),C1=(e=>(e.Asc="ASC",e.Desc="DESC",e))(C1||{}),I1=(e=>(e.Amount="amount",e.DelegatorAddress="delegator_address",e.EventIndex="event_index",e.EventType="event_type",e.PoolAddress="pool_address",e.TransactionVersion="transaction_version",e))(I1||{}),B1=(e=>(e.FirstTransactionVersion="first_transaction_version",e.StakingPoolAddress="staking_pool_address",e))(B1||{}),O1=(e=>(e.DelegatorAddress="delegator_address",e.PoolAddress="pool_address",e))(O1||{}),$1=(e=>(e.AccountAddress="account_address",e.CreationNumber="creation_number",e.Data="data",e.EventIndex="event_index",e.SequenceNumber="sequence_number",e.TransactionBlockHeight="transaction_block_height",e.TransactionVersion="transaction_version",e.Type="type",e))($1||{}),R1=(e=>(e.Amount="amount",e.AssetType="asset_type",e.BlockHeight="block_height",e.EntryFunctionIdStr="entry_function_id_str",e.EventIndex="event_index",e.GasFeePayerAddress="gas_fee_payer_address",e.IsFrozen="is_frozen",e.IsGasFee="is_gas_fee",e.IsTransactionSuccess="is_transaction_success",e.OwnerAddress="owner_address",e.StorageId="storage_id",e.TokenStandard="token_standard",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.Type="type",e))(R1||{}),U1=(e=>(e.AssetType="asset_type",e.CreatorAddress="creator_address",e.Decimals="decimals",e.IconUri="icon_uri",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Name="name",e.ProjectUri="project_uri",e.SupplyAggregatorTableHandleV1="supply_aggregator_table_handle_v1",e.SupplyAggregatorTableKeyV1="supply_aggregator_table_key_v1",e.Symbol="symbol",e.TokenStandard="token_standard",e))(U1||{}),M1=(e=>(e.Db="db",e.IsIndexerUp="is_indexer_up",e))(M1||{}),D1=(e=>(e.ChainId="chain_id",e))(D1||{}),j1=(e=>(e.Address="address",e.TransactionVersion="transaction_version",e))(j1||{}),q1=(e=>(e.BuyItNowPrice="buy_it_now_price",e.CoinType="coin_type",e.CollectionId="collection_id",e.ContractAddress="contract_address",e.CurrentBidPrice="current_bid_price",e.CurrentBidder="current_bidder",e.EntryFunctionIdStr="entry_function_id_str",e.ExpirationTime="expiration_time",e.FeeScheduleId="fee_schedule_id",e.IsDeleted="is_deleted",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.ListingId="listing_id",e.Marketplace="marketplace",e.Seller="seller",e.StartingBidPrice="starting_bid_price",e.TokenAmount="token_amount",e.TokenDataId="token_data_id",e.TokenStandard="token_standard",e))(q1||{}),L1=(e=>(e.Buyer="buyer",e.CoinType="coin_type",e.CollectionId="collection_id",e.CollectionOfferId="collection_offer_id",e.ContractAddress="contract_address",e.EntryFunctionIdStr="entry_function_id_str",e.ExpirationTime="expiration_time",e.FeeScheduleId="fee_schedule_id",e.IsDeleted="is_deleted",e.ItemPrice="item_price",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Marketplace="marketplace",e.RemainingTokenAmount="remaining_token_amount",e.TokenStandard="token_standard",e))(L1||{}),N1=(e=>(e.CoinType="coin_type",e.CollectionId="collection_id",e.ContractAddress="contract_address",e.EntryFunctionIdStr="entry_function_id_str",e.FeeScheduleId="fee_schedule_id",e.IsDeleted="is_deleted",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.ListingId="listing_id",e.Marketplace="marketplace",e.Price="price",e.Seller="seller",e.TokenAmount="token_amount",e.TokenDataId="token_data_id",e.TokenStandard="token_standard",e))(N1||{}),F1=(e=>(e.Buyer="buyer",e.CoinType="coin_type",e.CollectionId="collection_id",e.ContractAddress="contract_address",e.EntryFunctionIdStr="entry_function_id_str",e.ExpirationTime="expiration_time",e.FeeScheduleId="fee_schedule_id",e.IsDeleted="is_deleted",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Marketplace="marketplace",e.OfferId="offer_id",e.Price="price",e.TokenAmount="token_amount",e.TokenDataId="token_data_id",e.TokenStandard="token_standard",e))(F1||{}),z1=(e=>(e.Buyer="buyer",e.CoinType="coin_type",e.CollectionId="collection_id",e.CollectionName="collection_name",e.ContractAddress="contract_address",e.CreatorAddress="creator_address",e.EntryFunctionIdStr="entry_function_id_str",e.EventIndex="event_index",e.EventType="event_type",e.FeeScheduleId="fee_schedule_id",e.Marketplace="marketplace",e.OfferOrListingId="offer_or_listing_id",e.Price="price",e.PropertyVersion="property_version",e.Seller="seller",e.TokenAmount="token_amount",e.TokenDataId="token_data_id",e.TokenName="token_name",e.TokenStandard="token_standard",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(z1||{}),H1=(e=>(e.AssetUri="asset_uri",e.CdnAnimationUri="cdn_animation_uri",e.CdnImageUri="cdn_image_uri",e.CdnJsonUri="cdn_json_uri",e.RawAnimationUri="raw_animation_uri",e.RawImageUri="raw_image_uri",e))(H1||{}),K1=(e=>(e.NumActiveDelegator="num_active_delegator",e.PoolAddress="pool_address",e))(K1||{}),W1=(e=>(e.Asc="asc",e.AscNullsFirst="asc_nulls_first",e.AscNullsLast="asc_nulls_last",e.Desc="desc",e.DescNullsFirst="desc_nulls_first",e.DescNullsLast="desc_nulls_last",e))(W1||{}),G1=(e=>(e.LastSuccessVersion="last_success_version",e.LastUpdated="last_updated",e.Processor="processor",e))(G1||{}),V1=(e=>(e.NumVotes="num_votes",e.ProposalId="proposal_id",e.ShouldPass="should_pass",e.StakingPoolAddress="staking_pool_address",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.VoterAddress="voter_address",e))(V1||{}),X1=(e=>(e.DecodedKey="decoded_key",e.DecodedValue="decoded_value",e.Key="key",e.TableHandle="table_handle",e.TransactionVersion="transaction_version",e.WriteSetChangeIndex="write_set_change_index",e))(X1||{}),J1=(e=>(e.Handle="handle",e.KeyType="key_type",e.ValueType="value_type",e))(J1||{}),Z1=(e=>(e.CoinAmount="coin_amount",e.CoinType="coin_type",e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.EventAccountAddress="event_account_address",e.EventCreationNumber="event_creation_number",e.EventIndex="event_index",e.EventSequenceNumber="event_sequence_number",e.FromAddress="from_address",e.Name="name",e.PropertyVersion="property_version",e.ToAddress="to_address",e.TokenAmount="token_amount",e.TokenDataIdHash="token_data_id_hash",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.TransferType="transfer_type",e))(Z1||{}),Y1=(e=>(e.AfterValue="after_value",e.BeforeValue="before_value",e.EntryFunctionIdStr="entry_function_id_str",e.EventAccountAddress="event_account_address",e.EventIndex="event_index",e.FromAddress="from_address",e.IsFungibleV2="is_fungible_v2",e.PropertyVersionV1="property_version_v1",e.ToAddress="to_address",e.TokenAmount="token_amount",e.TokenDataId="token_data_id",e.TokenStandard="token_standard",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.Type="type",e))(Y1||{}),Q1=(e=>(e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.DefaultProperties="default_properties",e.Description="description",e.DescriptionMutable="description_mutable",e.LargestPropertyVersion="largest_property_version",e.Maximum="maximum",e.MaximumMutable="maximum_mutable",e.MetadataUri="metadata_uri",e.Name="name",e.PayeeAddress="payee_address",e.PropertiesMutable="properties_mutable",e.RoyaltyMutable="royalty_mutable",e.RoyaltyPointsDenominator="royalty_points_denominator",e.RoyaltyPointsNumerator="royalty_points_numerator",e.Supply="supply",e.TokenDataIdHash="token_data_id_hash",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.UriMutable="uri_mutable",e))(Q1||{}),ev=(e=>(e.Amount="amount",e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.Name="name",e.OwnerAddress="owner_address",e.PropertyVersion="property_version",e.TableHandle="table_handle",e.TableType="table_type",e.TokenDataIdHash="token_data_id_hash",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(ev||{}),tv=(e=>(e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.Name="name",e.PropertyVersion="property_version",e.TokenDataIdHash="token_data_id_hash",e.TokenProperties="token_properties",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(tv||{}),nv=(e=>(e.BlockHeight="block_height",e.EntryFunctionIdStr="entry_function_id_str",e.Epoch="epoch",e.ExpirationTimestampSecs="expiration_timestamp_secs",e.GasUnitPrice="gas_unit_price",e.MaxGasAmount="max_gas_amount",e.ParentSignatureType="parent_signature_type",e.Sender="sender",e.SequenceNumber="sequence_number",e.Timestamp="timestamp",e.Version="version",e))(nv||{});const PD=Object.freeze(Object.defineProperty({__proto__:null,APTOS_COIN:vl,AccountSequenceNumber:Xw,Account_Transactions_Select_Column:t1,Address_Events_Summary_Select_Column:n1,Address_Version_From_Events_Select_Column:i1,Address_Version_From_Move_Resources_Select_Column:s1,AnsClient:c4,ApiError:Fi,AptosAccount:Ed,AptosApiError:og,AptosClient:Mt,AptosToken:r4,BCS:Bw,Block_Metadata_Transactions_Select_Column:r1,CKDPriv:xw,COIN_TRANSFER:Gw,CoinClient:o4,Coin_Activities_Select_Column:o1,Coin_Balances_Select_Column:a1,Coin_Infos_Select_Column:c1,Coin_Supply_Select_Column:d1,Collection_Datas_Select_Column:u1,Current_Ans_Lookup_Select_Column:l1,Current_Aptos_Names_Select_Column:f1,Current_Coin_Balances_Select_Column:h1,Current_Collection_Datas_Select_Column:p1,Current_Collection_Ownership_V2_View_Select_Column:g1,Current_Collections_V2_Select_Column:m1,Current_Delegated_Staking_Pool_Balances_Select_Column:_1,Current_Delegated_Voter_Select_Column:b1,Current_Delegator_Balances_Select_Column:y1,Current_Fungible_Asset_Balances_Select_Column:w1,Current_Objects_Select_Column:v1,Current_Staking_Pool_Voter_Select_Column:x1,Current_Table_Items_Select_Column:T1,Current_Token_Datas_Select_Column:A1,Current_Token_Datas_V2_Select_Column:k1,Current_Token_Ownerships_Select_Column:S1,Current_Token_Ownerships_V2_Select_Column:E1,Current_Token_Pending_Claims_Select_Column:P1,Cursor_Ordering:C1,Delegated_Staking_Activities_Select_Column:I1,Delegated_Staking_Pools_Select_Column:B1,Delegator_Distinct_Pool_Select_Column:O1,Events_Select_Column:$1,FailedTransactionError:Nw,FaucetClient:a4,FungibleAssetClient:kl,Fungible_Asset_Activities_Select_Column:R1,Fungible_Asset_Metadata_Select_Column:U1,HexString:De,IndexerClient:Dn,Indexer_Status_Select_Column:M1,Ledger_Infos_Select_Column:D1,Move_Resources_Select_Column:j1,Network:Iw,NetworkToIndexerAPI:xl,NetworkToNodeAPI:Cw,Nft_Marketplace_V2_Current_Nft_Marketplace_Auctions_Select_Column:q1,Nft_Marketplace_V2_Current_Nft_Marketplace_Collection_Offers_Select_Column:L1,Nft_Marketplace_V2_Current_Nft_Marketplace_Listings_Select_Column:N1,Nft_Marketplace_V2_Current_Nft_Marketplace_Token_Offers_Select_Column:F1,Nft_Marketplace_V2_Nft_Marketplace_Activities_Select_Column:z1,Nft_Metadata_Crawler_Parsed_Asset_Uris_Select_Column:H1,NodeAPIToNetwork:Z0,Num_Active_Delegator_Per_Pool_Select_Column:K1,Order_By:W1,Processor_Status_Select_Column:G1,PropertyMap:zf,PropertyValue:xg,Proposal_Votes_Select_Column:V1,Provider:Pd,TRANSFER_COINS:tp,Table_Items_Select_Column:X1,Table_Metadatas_Select_Column:J1,TokenClient:s4,TokenTypes:Hw,Token_Activities_Select_Column:Z1,Token_Activities_V2_Select_Column:Y1,Token_Datas_Select_Column:Q1,Token_Ownerships_Select_Column:ev,Tokens_Select_Column:tv,TransactionBuilder:qs,TransactionBuilderABI:Tl,TransactionBuilderEd25519:Xu,TransactionBuilderMultiEd25519:qw,TransactionBuilderRemoteABI:In,TransactionWorker:d4,TransactionWorkerEvents:Jw,TxnBuilderTypes:pt,TypeTagParser:pa,Types:Zw,User_Transactions_Select_Column:nv,WaitForTransactionError:Lw,ansContractsMap:np,aptosRequest:ag,argToTransactionArgument:jw,derivePath:Aw,deserializePropertyMap:Tg,deserializeValueBasedOnTypeTag:zw,ensureBigInt:Zo,ensureBoolean:wg,ensureNumber:Jo,get:Ri,getAddressFromAccountOrAddress:Rs,getMasterKeyFromSeed:vw,getPropertyType:Hf,getPropertyValueRaw:Al,getPublicKey:ik,getSinglePropertyValueRaw:ep,isValidPath:Tw,nameComponentPattern:xr,namePattern:Vw,post:zo,serializeArg:Ff},Symbol.toStringTag,{value:"Module"}));var Yi={},li={};Object.defineProperty(li,"__esModule",{value:!0});li.output=li.exists=li.hash=li.bytes=li.bool=li.number=void 0;function Sl(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}li.number=Sl;function iv(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}li.bool=iv;function Ag(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}li.bytes=Ag;function sv(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Sl(e.outputLen),Sl(e.blockLen)}li.hash=sv;function rv(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}li.exists=rv;function ov(e,t){Ag(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}li.output=ov;const u4={number:Sl,bool:iv,bytes:Ag,hash:sv,exists:rv,output:ov};li.default=u4;var pc={},av={},ma={},Kf={};Object.defineProperty(Kf,"__esModule",{value:!0});Kf.crypto=void 0;Kf.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=Kf,n=S=>new Uint8Array(S.buffer,S.byteOffset,S.byteLength);e.u8=n;const i=S=>new Uint32Array(S.buffer,S.byteOffset,Math.floor(S.byteLength/4));e.u32=i;const s=S=>new DataView(S.buffer,S.byteOffset,S.byteLength);e.createView=s;const r=(S,P)=>S<<32-P|S>>>P;if(e.rotr=r,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},(S,P)=>P.toString(16).padStart(2,"0"));function a(S){if(!(S instanceof Uint8Array))throw new Error("Uint8Array expected");let P="";for(let z=0;z<S.length;z++)P+=o[S[z]];return P}e.bytesToHex=a;function c(S){if(typeof S!="string")throw new TypeError("hexToBytes: expected string, got "+typeof S);if(S.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const P=new Uint8Array(S.length/2);for(let z=0;z<P.length;z++){const X=z*2,G=S.slice(X,X+2),te=Number.parseInt(G,16);if(Number.isNaN(te)||te<0)throw new Error("Invalid byte sequence");P[z]=te}return P}e.hexToBytes=c;const d=async()=>{};e.nextTick=d;async function u(S,P,z){let X=Date.now();for(let G=0;G<S;G++){z(G);const te=Date.now()-X;te>=0&&te<P||(await(0,e.nextTick)(),X+=te)}}e.asyncLoop=u;function l(S){if(typeof S!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof S}`);return new TextEncoder().encode(S)}e.utf8ToBytes=l;function f(S){if(typeof S=="string"&&(S=l(S)),!(S instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof S})`);return S}e.toBytes=f;function p(...S){if(!S.every(X=>X instanceof Uint8Array))throw new Error("Uint8Array list expected");if(S.length===1)return S[0];const P=S.reduce((X,G)=>X+G.length,0),z=new Uint8Array(P);for(let X=0,G=0;X<S.length;X++){const te=S[X];z.set(te,G),G+=te.length}return z}e.concatBytes=p;class m{clone(){return this._cloneInto()}}e.Hash=m;const _=S=>Object.prototype.toString.call(S)==="[object Object]"&&S.constructor===Object;function x(S,P){if(P!==void 0&&(typeof P!="object"||!_(P)))throw new TypeError("Options should be object or undefined");return Object.assign(S,P)}e.checkOpts=x;function C(S){const P=X=>S().update(f(X)).digest(),z=S();return P.outputLen=z.outputLen,P.blockLen=z.blockLen,P.create=()=>S(),P}e.wrapConstructor=C;function k(S){const P=(X,G)=>S(G).update(f(X)).digest(),z=S({});return P.outputLen=z.outputLen,P.blockLen=z.blockLen,P.create=X=>S(X),P}e.wrapConstructorWithOpts=k;function T(S=32){if(t.crypto.web)return t.crypto.web.getRandomValues(new Uint8Array(S));if(t.crypto.node)return new Uint8Array(t.crypto.node.randomBytes(S).buffer);throw new Error("The environment doesn't have randomBytes function")}e.randomBytes=T})(ma);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=void 0;const t=li,n=ma;class i extends n.Hash{constructor(o,a){super(),this.finished=!1,this.destroyed=!1,t.default.hash(o);const c=(0,n.toBytes)(a);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const d=this.blockLen,u=new Uint8Array(d);u.set(c.length>d?o.create().update(c).digest():c);for(let l=0;l<u.length;l++)u[l]^=54;this.iHash.update(u),this.oHash=o.create();for(let l=0;l<u.length;l++)u[l]^=106;this.oHash.update(u),u.fill(0)}update(o){return t.default.exists(this),this.iHash.update(o),this}digestInto(o){t.default.exists(this),t.default.bytes(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:a,iHash:c,finished:d,destroyed:u,blockLen:l,outputLen:f}=this;return o=o,o.finished=d,o.destroyed=u,o.blockLen=l,o.outputLen=f,o.oHash=a._cloneInto(o.oHash),o.iHash=c._cloneInto(o.iHash),o}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const s=(r,o,a)=>new i(r,o).update(a).digest();e.hmac=s,e.hmac.create=(r,o)=>new i(r,o)})(av);Object.defineProperty(pc,"__esModule",{value:!0});pc.pbkdf2Async=pc.pbkdf2=void 0;const Tu=li,l4=av,Za=ma;function cv(e,t,n,i){Tu.default.hash(e);const s=(0,Za.checkOpts)({dkLen:32,asyncTick:10},i),{c:r,dkLen:o,asyncTick:a}=s;if(Tu.default.number(r),Tu.default.number(o),Tu.default.number(a),r<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=(0,Za.toBytes)(t),d=(0,Za.toBytes)(n),u=new Uint8Array(o),l=l4.hmac.create(e,c),f=l._cloneInto().update(d);return{c:r,dkLen:o,asyncTick:a,DK:u,PRF:l,PRFSalt:f}}function dv(e,t,n,i,s){return e.destroy(),t.destroy(),i&&i.destroy(),s.fill(0),n}function f4(e,t,n,i){const{c:s,dkLen:r,DK:o,PRF:a,PRFSalt:c}=cv(e,t,n,i);let d;const u=new Uint8Array(4),l=(0,Za.createView)(u),f=new Uint8Array(a.outputLen);for(let p=1,m=0;m<r;p++,m+=a.outputLen){const _=o.subarray(m,m+a.outputLen);l.setInt32(0,p,!1),(d=c._cloneInto(d)).update(u).digestInto(f),_.set(f.subarray(0,_.length));for(let x=1;x<s;x++){a._cloneInto(d).update(f).digestInto(f);for(let C=0;C<_.length;C++)_[C]^=f[C]}}return dv(a,c,o,d,f)}pc.pbkdf2=f4;async function h4(e,t,n,i){const{c:s,dkLen:r,asyncTick:o,DK:a,PRF:c,PRFSalt:d}=cv(e,t,n,i);let u;const l=new Uint8Array(4),f=(0,Za.createView)(l),p=new Uint8Array(c.outputLen);for(let m=1,_=0;_<r;m++,_+=c.outputLen){const x=a.subarray(_,_+c.outputLen);f.setInt32(0,m,!1),(u=d._cloneInto(u)).update(l).digestInto(p),x.set(p.subarray(0,x.length)),await(0,Za.asyncLoop)(s-1,o,C=>{c._cloneInto(u).update(p).digestInto(p);for(let k=0;k<x.length;k++)x[k]^=p[k]})}return dv(c,d,a,u,p)}pc.pbkdf2Async=h4;var gc={},Qd={};Object.defineProperty(Qd,"__esModule",{value:!0});Qd.SHA2=void 0;const e0=li,Xc=ma;function p4(e,t,n,i){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,i);const s=BigInt(32),r=BigInt(4294967295),o=Number(n>>s&r),a=Number(n&r),c=i?4:0,d=i?0:4;e.setUint32(t+c,o,i),e.setUint32(t+d,a,i)}let g4=class extends Xc.Hash{constructor(t,n,i,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=i,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Xc.createView)(this.buffer)}update(t){e0.default.exists(this);const{view:n,buffer:i,blockLen:s}=this;t=(0,Xc.toBytes)(t);const r=t.length;for(let o=0;o<r;){const a=Math.min(s-this.pos,r-o);if(a===s){const c=(0,Xc.createView)(t);for(;s<=r-o;o+=s)this.process(c,o);continue}i.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){e0.default.exists(this),e0.default.output(t,this),this.finished=!0;const{buffer:n,view:i,blockLen:s,isLE:r}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(i,0),o=0);for(let l=o;l<s;l++)n[l]=0;p4(i,s-8,BigInt(this.length*8),r),this.process(i,0);const a=(0,Xc.createView)(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,u=this.get();if(d>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<d;l++)a.setUint32(4*l,u[l],r)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const i=t.slice(0,n);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:i,length:s,finished:r,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=r,t.destroyed=o,s%n&&t.buffer.set(i),t}};Qd.SHA2=g4;Object.defineProperty(gc,"__esModule",{value:!0});gc.sha224=gc.sha256=void 0;const m4=Qd,us=ma,_4=(e,t,n)=>e&t^~e&n,b4=(e,t,n)=>e&t^e&n^t&n,y4=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Jr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Zr=new Uint32Array(64);class uv extends m4.SHA2{constructor(){super(64,32,8,!1),this.A=Jr[0]|0,this.B=Jr[1]|0,this.C=Jr[2]|0,this.D=Jr[3]|0,this.E=Jr[4]|0,this.F=Jr[5]|0,this.G=Jr[6]|0,this.H=Jr[7]|0}get(){const{A:t,B:n,C:i,D:s,E:r,F:o,G:a,H:c}=this;return[t,n,i,s,r,o,a,c]}set(t,n,i,s,r,o,a,c){this.A=t|0,this.B=n|0,this.C=i|0,this.D=s|0,this.E=r|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let l=0;l<16;l++,n+=4)Zr[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const f=Zr[l-15],p=Zr[l-2],m=(0,us.rotr)(f,7)^(0,us.rotr)(f,18)^f>>>3,_=(0,us.rotr)(p,17)^(0,us.rotr)(p,19)^p>>>10;Zr[l]=_+Zr[l-7]+m+Zr[l-16]|0}let{A:i,B:s,C:r,D:o,E:a,F:c,G:d,H:u}=this;for(let l=0;l<64;l++){const f=(0,us.rotr)(a,6)^(0,us.rotr)(a,11)^(0,us.rotr)(a,25),p=u+f+_4(a,c,d)+y4[l]+Zr[l]|0,_=((0,us.rotr)(i,2)^(0,us.rotr)(i,13)^(0,us.rotr)(i,22))+b4(i,s,r)|0;u=d,d=c,c=a,a=o+p|0,o=r,r=s,s=i,i=p+_|0}i=i+this.A|0,s=s+this.B|0,r=r+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,d=d+this.G|0,u=u+this.H|0,this.set(i,s,r,o,a,c,d,u)}roundClean(){Zr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class w4 extends uv{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}gc.sha256=(0,us.wrapConstructor)(()=>new uv);gc.sha224=(0,us.wrapConstructor)(()=>new w4);var ws={},lv={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.add=e.toBig=e.split=e.fromBig=void 0;const t=BigInt(2**32-1),n=BigInt(32);function i(N,R=!1){return R?{h:Number(N&t),l:Number(N>>n&t)}:{h:Number(N>>n&t)|0,l:Number(N&t)|0}}e.fromBig=i;function s(N,R=!1){let M=new Uint32Array(N.length),A=new Uint32Array(N.length);for(let h=0;h<N.length;h++){const{h:y,l:E}=i(N[h],R);[M[h],A[h]]=[y,E]}return[M,A]}e.split=s;const r=(N,R)=>BigInt(N>>>0)<<n|BigInt(R>>>0);e.toBig=r;const o=(N,R,M)=>N>>>M,a=(N,R,M)=>N<<32-M|R>>>M,c=(N,R,M)=>N>>>M|R<<32-M,d=(N,R,M)=>N<<32-M|R>>>M,u=(N,R,M)=>N<<64-M|R>>>M-32,l=(N,R,M)=>N>>>M-32|R<<64-M,f=(N,R)=>R,p=(N,R)=>N,m=(N,R,M)=>N<<M|R>>>32-M,_=(N,R,M)=>R<<M|N>>>32-M,x=(N,R,M)=>R<<M-32|N>>>64-M,C=(N,R,M)=>N<<M-32|R>>>64-M;function k(N,R,M,A){const h=(R>>>0)+(A>>>0);return{h:N+M+(h/2**32|0)|0,l:h|0}}e.add=k;const T=(N,R,M)=>(N>>>0)+(R>>>0)+(M>>>0),S=(N,R,M,A)=>R+M+A+(N/2**32|0)|0,P=(N,R,M,A)=>(N>>>0)+(R>>>0)+(M>>>0)+(A>>>0),z=(N,R,M,A,h)=>R+M+A+h+(N/2**32|0)|0,X=(N,R,M,A,h)=>(N>>>0)+(R>>>0)+(M>>>0)+(A>>>0)+(h>>>0),G=(N,R,M,A,h,y)=>R+M+A+h+y+(N/2**32|0)|0,te={fromBig:i,split:s,toBig:e.toBig,shrSH:o,shrSL:a,rotrSH:c,rotrSL:d,rotrBH:u,rotrBL:l,rotr32H:f,rotr32L:p,rotlSH:m,rotlSL:_,rotlBH:x,rotlBL:C,add:k,add3L:T,add3H:S,add4L:P,add4H:z,add5H:G,add5L:X};e.default=te})(lv);Object.defineProperty(ws,"__esModule",{value:!0});ws.sha384=ws.sha512_256=ws.sha512_224=ws.sha512=ws.SHA512=void 0;const v4=Qd,Gt=lv,Wf=ma,[x4,T4]=Gt.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Yr=new Uint32Array(80),Qr=new Uint32Array(80);let eu=class extends v4.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:i,Bl:s,Ch:r,Cl:o,Dh:a,Dl:c,Eh:d,El:u,Fh:l,Fl:f,Gh:p,Gl:m,Hh:_,Hl:x}=this;return[t,n,i,s,r,o,a,c,d,u,l,f,p,m,_,x]}set(t,n,i,s,r,o,a,c,d,u,l,f,p,m,_,x){this.Ah=t|0,this.Al=n|0,this.Bh=i|0,this.Bl=s|0,this.Ch=r|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=d|0,this.El=u|0,this.Fh=l|0,this.Fl=f|0,this.Gh=p|0,this.Gl=m|0,this.Hh=_|0,this.Hl=x|0}process(t,n){for(let T=0;T<16;T++,n+=4)Yr[T]=t.getUint32(n),Qr[T]=t.getUint32(n+=4);for(let T=16;T<80;T++){const S=Yr[T-15]|0,P=Qr[T-15]|0,z=Gt.default.rotrSH(S,P,1)^Gt.default.rotrSH(S,P,8)^Gt.default.shrSH(S,P,7),X=Gt.default.rotrSL(S,P,1)^Gt.default.rotrSL(S,P,8)^Gt.default.shrSL(S,P,7),G=Yr[T-2]|0,te=Qr[T-2]|0,N=Gt.default.rotrSH(G,te,19)^Gt.default.rotrBH(G,te,61)^Gt.default.shrSH(G,te,6),R=Gt.default.rotrSL(G,te,19)^Gt.default.rotrBL(G,te,61)^Gt.default.shrSL(G,te,6),M=Gt.default.add4L(X,R,Qr[T-7],Qr[T-16]),A=Gt.default.add4H(M,z,N,Yr[T-7],Yr[T-16]);Yr[T]=A|0,Qr[T]=M|0}let{Ah:i,Al:s,Bh:r,Bl:o,Ch:a,Cl:c,Dh:d,Dl:u,Eh:l,El:f,Fh:p,Fl:m,Gh:_,Gl:x,Hh:C,Hl:k}=this;for(let T=0;T<80;T++){const S=Gt.default.rotrSH(l,f,14)^Gt.default.rotrSH(l,f,18)^Gt.default.rotrBH(l,f,41),P=Gt.default.rotrSL(l,f,14)^Gt.default.rotrSL(l,f,18)^Gt.default.rotrBL(l,f,41),z=l&p^~l&_,X=f&m^~f&x,G=Gt.default.add5L(k,P,X,T4[T],Qr[T]),te=Gt.default.add5H(G,C,S,z,x4[T],Yr[T]),N=G|0,R=Gt.default.rotrSH(i,s,28)^Gt.default.rotrBH(i,s,34)^Gt.default.rotrBH(i,s,39),M=Gt.default.rotrSL(i,s,28)^Gt.default.rotrBL(i,s,34)^Gt.default.rotrBL(i,s,39),A=i&r^i&a^r&a,h=s&o^s&c^o&c;C=_|0,k=x|0,_=p|0,x=m|0,p=l|0,m=f|0,{h:l,l:f}=Gt.default.add(d|0,u|0,te|0,N|0),d=a|0,u=c|0,a=r|0,c=o|0,r=i|0,o=s|0;const y=Gt.default.add3L(N,M,h);i=Gt.default.add3H(y,te,R,A),s=y|0}({h:i,l:s}=Gt.default.add(this.Ah|0,this.Al|0,i|0,s|0)),{h:r,l:o}=Gt.default.add(this.Bh|0,this.Bl|0,r|0,o|0),{h:a,l:c}=Gt.default.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:d,l:u}=Gt.default.add(this.Dh|0,this.Dl|0,d|0,u|0),{h:l,l:f}=Gt.default.add(this.Eh|0,this.El|0,l|0,f|0),{h:p,l:m}=Gt.default.add(this.Fh|0,this.Fl|0,p|0,m|0),{h:_,l:x}=Gt.default.add(this.Gh|0,this.Gl|0,_|0,x|0),{h:C,l:k}=Gt.default.add(this.Hh|0,this.Hl|0,C|0,k|0),this.set(i,s,r,o,a,c,d,u,l,f,p,m,_,x,C,k)}roundClean(){Yr.fill(0),Qr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};ws.SHA512=eu;class A4 extends eu{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}let k4=class extends eu{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},S4=class extends eu{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};ws.sha512=(0,Wf.wrapConstructor)(()=>new eu);ws.sha512_224=(0,Wf.wrapConstructor)(()=>new A4);ws.sha512_256=(0,Wf.wrapConstructor)(()=>new k4);ws.sha384=(0,Wf.wrapConstructor)(()=>new S4);Object.defineProperty(Yi,"__esModule",{value:!0});var fv=Yi.mnemonicToSeedSync=Yi.mnemonicToSeed=Yi.validateMnemonic=Yi.entropyToMnemonic=Yi.mnemonicToEntropy=Yi.generateMnemonic=void 0;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const hv=li,pv=pc,E4=gc,gv=ws,P4=ma,Au=Vp,C4=e=>e[0]==="";function mv(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function kg(e){const t=mv(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function _v(e){hv.default.bytes(e,16,20,24,28,32)}function I4(e,t=128){if(hv.default.number(t),t%32!==0||t>256)throw new TypeError("Invalid entropy");return wv((0,P4.randomBytes)(t/8),e)}Yi.generateMnemonic=I4;const B4=e=>{const t=8-e.length/4;return new Uint8Array([(0,E4.sha256)(e)[0]>>t<<t])};function bv(e){if(!Array.isArray(e)||e.length!==2**11||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(t=>{if(typeof t!="string")throw new Error(`Wordlist: non-string element: ${t}`)}),Au.utils.chain(Au.utils.checksum(1,B4),Au.utils.radix2(11,!0),Au.utils.alphabet(e))}function yv(e,t){const{words:n}=kg(e),i=bv(t).decode(n);return _v(i),i}Yi.mnemonicToEntropy=yv;function wv(e,t){return _v(e),bv(t).encode(e).join(C4(t)?"":" ")}Yi.entropyToMnemonic=wv;function O4(e,t){try{yv(e,t)}catch{return!1}return!0}Yi.validateMnemonic=O4;const vv=e=>mv(`mnemonic${e}`);function $4(e,t=""){return(0,pv.pbkdf2Async)(gv.sha512,kg(e).nfkd,vv(t),{c:2048,dkLen:64})}Yi.mnemonicToSeed=$4;function R4(e,t=""){return(0,pv.pbkdf2)(gv.sha512,kg(e).nfkd,vv(t),{c:2048,dkLen:64})}fv=Yi.mnemonicToSeedSync=R4;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const U4=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),t0=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),M4=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!M4)throw new Error("Non little-endian hardware is not supported");const D4=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function xv(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=D4[e[n]];return t}function Tv(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const i=n*2,s=e.slice(i,i+2),r=Number.parseInt(s,16);if(Number.isNaN(r)||r<0)throw new Error("Invalid byte sequence");t[n]=r}return t}function j4(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function tu(e){if(typeof e=="string"&&(e=j4(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}let Sg=class{clone(){return this._cloneInto()}};function Gf(e){const t=i=>e().update(tu(i)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function q4(e){const t=(i,s)=>e(s).update(tu(i)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=i=>e(i),t}function sp(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function L4(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Av(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function N4(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");sp(e.outputLen),sp(e.blockLen)}function F4(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function z4(e,t){Av(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Qi={number:sp,bool:L4,bytes:Av,hash:N4,exists:F4,output:z4},ku=BigInt(2**32-1),rp=BigInt(32);function kv(e,t=!1){return t?{h:Number(e&ku),l:Number(e>>rp&ku)}:{h:Number(e>>rp&ku)|0,l:Number(e&ku)|0}}function H4(e,t=!1){let n=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:r,l:o}=kv(e[s],t);[n[s],i[s]]=[r,o]}return[n,i]}const K4=(e,t)=>BigInt(e>>>0)<<rp|BigInt(t>>>0),W4=(e,t,n)=>e>>>n,G4=(e,t,n)=>e<<32-n|t>>>n,V4=(e,t,n)=>e>>>n|t<<32-n,X4=(e,t,n)=>e<<32-n|t>>>n,J4=(e,t,n)=>e<<64-n|t>>>n-32,Z4=(e,t,n)=>e>>>n-32|t<<64-n,Y4=(e,t)=>t,Q4=(e,t)=>e,eS=(e,t,n)=>e<<n|t>>>32-n,tS=(e,t,n)=>t<<n|e>>>32-n,nS=(e,t,n)=>t<<n-32|e>>>64-n,iS=(e,t,n)=>e<<n-32|t>>>64-n;function sS(e,t,n,i){const s=(t>>>0)+(i>>>0);return{h:e+n+(s/2**32|0)|0,l:s|0}}const rS=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),oS=(e,t,n,i)=>t+n+i+(e/2**32|0)|0,aS=(e,t,n,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),cS=(e,t,n,i,s)=>t+n+i+s+(e/2**32|0)|0,dS=(e,t,n,i,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0)+(s>>>0),uS=(e,t,n,i,s,r)=>t+n+i+s+r+(e/2**32|0)|0,Rt={fromBig:kv,split:H4,toBig:K4,shrSH:W4,shrSL:G4,rotrSH:V4,rotrSL:X4,rotrBH:J4,rotrBL:Z4,rotr32H:Y4,rotr32L:Q4,rotlSH:eS,rotlSL:tS,rotlBH:nS,rotlBL:iS,add:sS,add3L:rS,add3H:oS,add4L:aS,add4H:cS,add5H:uS,add5L:dS},[Sv,Ev,Pv]=[[],[],[]],lS=BigInt(0),Jc=BigInt(1),fS=BigInt(2),hS=BigInt(7),pS=BigInt(256),gS=BigInt(113);for(let e=0,t=Jc,n=1,i=0;e<24;e++){[n,i]=[i,(2*n+3*i)%5],Sv.push(2*(5*i+n)),Ev.push((e+1)*(e+2)/2%64);let s=lS;for(let r=0;r<7;r++)t=(t<<Jc^(t>>hS)*gS)%pS,t&fS&&(s^=Jc<<(Jc<<BigInt(r))-Jc);Pv.push(s)}const[mS,_S]=Rt.split(Pv,!0),$_=(e,t,n)=>n>32?Rt.rotlBH(e,t,n):Rt.rotlSH(e,t,n),R_=(e,t,n)=>n>32?Rt.rotlBL(e,t,n):Rt.rotlSL(e,t,n);function bS(e,t=24){const n=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,d=n[c],u=n[c+1],l=$_(d,u,1)^n[a],f=R_(d,u,1)^n[a+1];for(let p=0;p<50;p+=10)e[o+p]^=l,e[o+p+1]^=f}let s=e[2],r=e[3];for(let o=0;o<24;o++){const a=Ev[o],c=$_(s,r,a),d=R_(s,r,a),u=Sv[o];s=e[u],r=e[u+1],e[u]=c,e[u+1]=d}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=mS[i],e[1]^=_S[i]}n.fill(0)}class Vf extends Sg{constructor(t,n,i,s=!1,r=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=i,this.enableXOF=s,this.rounds=r,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Qi.number(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=U4(this.state)}keccak(){bS(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Qi.exists(this);const{blockLen:n,state:i}=this;t=tu(t);const s=t.length;for(let r=0;r<s;){const o=Math.min(n-this.pos,s-r);for(let a=0;a<o;a++)i[this.pos++]^=t[r++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:i,blockLen:s}=this;t[i]^=n,n&128&&i===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Qi.exists(this,!1),Qi.bytes(t),this.finish();const n=this.state,{blockLen:i}=this;for(let s=0,r=t.length;s<r;){this.posOut>=i&&this.keccak();const o=Math.min(i-this.posOut,r-s);t.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Qi.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Qi.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:i,outputLen:s,rounds:r,enableXOF:o}=this;return t||(t=new Vf(n,i,s,o,r)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=r,t.suffix=i,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}const $o=(e,t,n)=>Gf(()=>new Vf(t,e,n));$o(6,144,224/8);const mc=$o(6,136,256/8);$o(6,104,384/8);$o(6,72,512/8);$o(1,144,224/8);$o(1,136,256/8);$o(1,104,384/8);$o(1,72,512/8);const Cv=(e,t,n)=>q4((i={})=>new Vf(t,e,i.dkLen===void 0?n:i.dkLen,!0));Cv(31,168,128/8);Cv(31,136,256/8);class Iv extends Sg{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Qi.hash(t);const i=tu(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,r=new Uint8Array(s);r.set(i.length>s?t.create().update(i).digest():i);for(let o=0;o<r.length;o++)r[o]^=54;this.iHash.update(r),this.oHash=t.create();for(let o=0;o<r.length;o++)r[o]^=106;this.oHash.update(r),r.fill(0)}update(t){return Qi.exists(this),this.iHash.update(t),this}digestInto(t){Qi.exists(this),Qi.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:i,finished:s,destroyed:r,blockLen:o,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=r,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=i._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Eg=(e,t,n)=>new Iv(e,t).update(n).digest();Eg.create=(e,t)=>new Iv(e,t);function yS(e,t,n,i){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,i);const s=BigInt(32),r=BigInt(4294967295),o=Number(n>>s&r),a=Number(n&r),c=i?4:0,d=i?0:4;e.setUint32(t+c,o,i),e.setUint32(t+d,a,i)}class wS extends Sg{constructor(t,n,i,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=i,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=t0(this.buffer)}update(t){Qi.exists(this);const{view:n,buffer:i,blockLen:s}=this;t=tu(t);const r=t.length;for(let o=0;o<r;){const a=Math.min(s-this.pos,r-o);if(a===s){const c=t0(t);for(;s<=r-o;o+=s)this.process(c,o);continue}i.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Qi.exists(this),Qi.output(t,this),this.finished=!0;const{buffer:n,view:i,blockLen:s,isLE:r}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(i,0),o=0);for(let c=o;c<s;c++)n[c]=0;yS(i,s-8,BigInt(this.length*8),r),this.process(i,0);const a=t0(t);this.get().forEach((c,d)=>a.setUint32(4*d,c,r))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const i=t.slice(0,n);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:i,length:s,finished:r,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=r,t.destroyed=o,s%n&&t.buffer.set(i),t}}const[vS,xS]=Rt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),eo=new Uint32Array(80),to=new Uint32Array(80);class Pg extends wS{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:i,Bl:s,Ch:r,Cl:o,Dh:a,Dl:c,Eh:d,El:u,Fh:l,Fl:f,Gh:p,Gl:m,Hh:_,Hl:x}=this;return[t,n,i,s,r,o,a,c,d,u,l,f,p,m,_,x]}set(t,n,i,s,r,o,a,c,d,u,l,f,p,m,_,x){this.Ah=t|0,this.Al=n|0,this.Bh=i|0,this.Bl=s|0,this.Ch=r|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=d|0,this.El=u|0,this.Fh=l|0,this.Fl=f|0,this.Gh=p|0,this.Gl=m|0,this.Hh=_|0,this.Hl=x|0}process(t,n){for(let T=0;T<16;T++,n+=4)eo[T]=t.getUint32(n),to[T]=t.getUint32(n+=4);for(let T=16;T<80;T++){const S=eo[T-15]|0,P=to[T-15]|0,z=Rt.rotrSH(S,P,1)^Rt.rotrSH(S,P,8)^Rt.shrSH(S,P,7),X=Rt.rotrSL(S,P,1)^Rt.rotrSL(S,P,8)^Rt.shrSL(S,P,7),G=eo[T-2]|0,te=to[T-2]|0,N=Rt.rotrSH(G,te,19)^Rt.rotrBH(G,te,61)^Rt.shrSH(G,te,6),R=Rt.rotrSL(G,te,19)^Rt.rotrBL(G,te,61)^Rt.shrSL(G,te,6),M=Rt.add4L(X,R,to[T-7],to[T-16]),A=Rt.add4H(M,z,N,eo[T-7],eo[T-16]);eo[T]=A|0,to[T]=M|0}let{Ah:i,Al:s,Bh:r,Bl:o,Ch:a,Cl:c,Dh:d,Dl:u,Eh:l,El:f,Fh:p,Fl:m,Gh:_,Gl:x,Hh:C,Hl:k}=this;for(let T=0;T<80;T++){const S=Rt.rotrSH(l,f,14)^Rt.rotrSH(l,f,18)^Rt.rotrBH(l,f,41),P=Rt.rotrSL(l,f,14)^Rt.rotrSL(l,f,18)^Rt.rotrBL(l,f,41),z=l&p^~l&_,X=f&m^~f&x,G=Rt.add5L(k,P,X,xS[T],to[T]),te=Rt.add5H(G,C,S,z,vS[T],eo[T]),N=G|0,R=Rt.rotrSH(i,s,28)^Rt.rotrBH(i,s,34)^Rt.rotrBH(i,s,39),M=Rt.rotrSL(i,s,28)^Rt.rotrBL(i,s,34)^Rt.rotrBL(i,s,39),A=i&r^i&a^r&a,h=s&o^s&c^o&c;C=_|0,k=x|0,_=p|0,x=m|0,p=l|0,m=f|0,{h:l,l:f}=Rt.add(d|0,u|0,te|0,N|0),d=a|0,u=c|0,a=r|0,c=o|0,r=i|0,o=s|0;const y=Rt.add3L(N,M,h);i=Rt.add3H(y,te,R,A),s=y|0}({h:i,l:s}=Rt.add(this.Ah|0,this.Al|0,i|0,s|0)),{h:r,l:o}=Rt.add(this.Bh|0,this.Bl|0,r|0,o|0),{h:a,l:c}=Rt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:d,l:u}=Rt.add(this.Dh|0,this.Dl|0,d|0,u|0),{h:l,l:f}=Rt.add(this.Eh|0,this.El|0,l|0,f|0),{h:p,l:m}=Rt.add(this.Fh|0,this.Fl|0,p|0,m|0),{h:_,l:x}=Rt.add(this.Gh|0,this.Gl|0,_|0,x|0),{h:C,l:k}=Rt.add(this.Hh|0,this.Hl|0,C|0,k|0),this.set(i,s,r,o,a,c,d,u,l,f,p,m,_,x,C,k)}roundClean(){eo.fill(0),to.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class TS extends Pg{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class AS extends Pg{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Bv=Gf(()=>new Pg);Gf(()=>new TS);Gf(()=>new AS);var op={},kS={get exports(){return op},set exports(e){op=e}},El={},SS={get exports(){return El},set exports(e){El=e}},Ov=function(t,n){return function(){for(var s=new Array(arguments.length),r=0;r<s.length;r++)s[r]=arguments[r];return t.apply(n,s)}},ES=Ov,Cg=Object.prototype.toString,Ig=function(e){return function(t){var n=Cg.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function _a(e){return e=e.toLowerCase(),function(n){return Ig(n)===e}}function Bg(e){return Array.isArray(e)}function Pl(e){return typeof e>"u"}function PS(e){return e!==null&&!Pl(e)&&e.constructor!==null&&!Pl(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var $v=_a("ArrayBuffer");function CS(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&$v(e.buffer),t}function IS(e){return typeof e=="string"}function BS(e){return typeof e=="number"}function Rv(e){return e!==null&&typeof e=="object"}function Ju(e){if(Ig(e)!=="object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}var OS=_a("Date"),$S=_a("File"),RS=_a("Blob"),US=_a("FileList");function Og(e){return Cg.call(e)==="[object Function]"}function MS(e){return Rv(e)&&Og(e.pipe)}function DS(e){var t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||Cg.call(e)===t||Og(e.toString)&&e.toString()===t)}var jS=_a("URLSearchParams");function qS(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function LS(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function $g(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Bg(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}function ap(){var e={};function t(s,r){Ju(e[r])&&Ju(s)?e[r]=ap(e[r],s):Ju(s)?e[r]=ap({},s):Bg(s)?e[r]=s.slice():e[r]=s}for(var n=0,i=arguments.length;n<i;n++)$g(arguments[n],t);return e}function NS(e,t,n){return $g(t,function(s,r){n&&typeof s=="function"?e[r]=ES(s,n):e[r]=s}),e}function FS(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function zS(e,t,n,i){e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)}function HS(e,t,n){var i,s,r,o={};t=t||{};do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)r=i[s],o[r]||(t[r]=e[r],o[r]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t}function KS(e,t,n){e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;var i=e.indexOf(t,n);return i!==-1&&i===n}function WS(e){if(!e)return null;var t=e.length;if(Pl(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n}var GS=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),ki={isArray:Bg,isArrayBuffer:$v,isBuffer:PS,isFormData:DS,isArrayBufferView:CS,isString:IS,isNumber:BS,isObject:Rv,isPlainObject:Ju,isUndefined:Pl,isDate:OS,isFile:$S,isBlob:RS,isFunction:Og,isStream:MS,isURLSearchParams:jS,isStandardBrowserEnv:LS,forEach:$g,merge:ap,extend:NS,trim:qS,stripBOM:FS,inherits:zS,toFlatObject:HS,kindOf:Ig,kindOfTest:_a,endsWith:KS,toArray:WS,isTypedArray:GS,isFileList:US},Pa=ki;function U_(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Uv=function(t,n,i){if(!n)return t;var s;if(i)s=i(n);else if(Pa.isURLSearchParams(n))s=n.toString();else{var r=[];Pa.forEach(n,function(c,d){c===null||typeof c>"u"||(Pa.isArray(c)?d=d+"[]":c=[c],Pa.forEach(c,function(l){Pa.isDate(l)?l=l.toISOString():Pa.isObject(l)&&(l=JSON.stringify(l)),r.push(U_(d)+"="+U_(l))}))}),s=r.join("&")}if(s){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t},VS=ki;function Xf(){this.handlers=[]}Xf.prototype.use=function(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};Xf.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Xf.prototype.forEach=function(t){VS.forEach(this.handlers,function(i){i!==null&&t(i)})};var XS=Xf,JS=ki,ZS=function(t,n){JS.forEach(t,function(s,r){r!==n&&r.toUpperCase()===n.toUpperCase()&&(t[n]=s,delete t[r])})},Mv=ki;function _c(e,t,n,i,s){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s)}Mv.inherits(_c,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Dv=_c.prototype,jv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){jv[e]={value:e}});Object.defineProperties(_c,jv);Object.defineProperty(Dv,"isAxiosError",{value:!0});_c.from=function(e,t,n,i,s,r){var o=Object.create(Dv);return Mv.toFlatObject(e,o,function(c){return c!==Error.prototype}),_c.call(o,e.message,t,n,i,s),o.name=e.name,r&&Object.assign(o,r),o};var Uc=_c,qv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Cs=ki;function YS(e,t){t=t||new FormData;var n=[];function i(r){return r===null?"":Cs.isDate(r)?r.toISOString():Cs.isArrayBuffer(r)||Cs.isTypedArray(r)?typeof Blob=="function"?new Blob([r]):Buffer.from(r):r}function s(r,o){if(Cs.isPlainObject(r)||Cs.isArray(r)){if(n.indexOf(r)!==-1)throw Error("Circular reference detected in "+o);n.push(r),Cs.forEach(r,function(c,d){if(!Cs.isUndefined(c)){var u=o?o+"."+d:d,l;if(c&&!o&&typeof c=="object"){if(Cs.endsWith(d,"{}"))c=JSON.stringify(c);else if(Cs.endsWith(d,"[]")&&(l=Cs.toArray(c))){l.forEach(function(f){!Cs.isUndefined(f)&&t.append(u,i(f))});return}}s(c,u)}}),n.pop()}else t.append(o,i(r))}return s(e),t}var Lv=YS,n0,M_;function QS(){if(M_)return n0;M_=1;var e=Uc;return n0=function(n,i,s){var r=s.config.validateStatus;!s.status||!r||r(s.status)?n(s):i(new e("Request failed with status code "+s.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))},n0}var i0,D_;function e8(){if(D_)return i0;D_=1;var e=ki;return i0=e.isStandardBrowserEnv()?function(){return{write:function(i,s,r,o,a,c){var d=[];d.push(i+"="+encodeURIComponent(s)),e.isNumber(r)&&d.push("expires="+new Date(r).toGMTString()),e.isString(o)&&d.push("path="+o),e.isString(a)&&d.push("domain="+a),c===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(i){var s=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),i0}var t8=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},n8=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t},i8=t8,s8=n8,Nv=function(t,n){return t&&!i8(n)?s8(t,n):n},s0,j_;function r8(){if(j_)return s0;j_=1;var e=ki,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return s0=function(i){var s={},r,o,a;return i&&e.forEach(i.split(`
`),function(d){if(a=d.indexOf(":"),r=e.trim(d.substr(0,a)).toLowerCase(),o=e.trim(d.substr(a+1)),r){if(s[r]&&t.indexOf(r)>=0)return;r==="set-cookie"?s[r]=(s[r]?s[r]:[]).concat([o]):s[r]=s[r]?s[r]+", "+o:o}}),s},s0}var r0,q_;function o8(){if(q_)return r0;q_=1;var e=ki;return r0=e.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),s;function r(o){var a=o;return n&&(i.setAttribute("href",a),a=i.href),i.setAttribute("href",a),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return s=r(window.location.href),function(a){var c=e.isString(a)?r(a):a;return c.protocol===s.protocol&&c.host===s.host}}():function(){return function(){return!0}}(),r0}var o0,L_;function Jf(){if(L_)return o0;L_=1;var e=Uc,t=ki;function n(i){e.call(this,i??"canceled",e.ERR_CANCELED),this.name="CanceledError"}return t.inherits(n,e,{__CANCEL__:!0}),o0=n,o0}var a0,N_;function a8(){return N_||(N_=1,a0=function(t){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}),a0}var c0,F_;function z_(){if(F_)return c0;F_=1;var e=ki,t=QS(),n=e8(),i=Uv,s=Nv,r=r8(),o=o8(),a=qv,c=Uc,d=Jf(),u=a8();return c0=function(f){return new Promise(function(m,_){var x=f.data,C=f.headers,k=f.responseType,T;function S(){f.cancelToken&&f.cancelToken.unsubscribe(T),f.signal&&f.signal.removeEventListener("abort",T)}e.isFormData(x)&&e.isStandardBrowserEnv()&&delete C["Content-Type"];var P=new XMLHttpRequest;if(f.auth){var z=f.auth.username||"",X=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";C.Authorization="Basic "+btoa(z+":"+X)}var G=s(f.baseURL,f.url);P.open(f.method.toUpperCase(),i(G,f.params,f.paramsSerializer),!0),P.timeout=f.timeout;function te(){if(P){var M="getAllResponseHeaders"in P?r(P.getAllResponseHeaders()):null,A=!k||k==="text"||k==="json"?P.responseText:P.response,h={data:A,status:P.status,statusText:P.statusText,headers:M,config:f,request:P};t(function(E){m(E),S()},function(E){_(E),S()},h),P=null}}if("onloadend"in P?P.onloadend=te:P.onreadystatechange=function(){!P||P.readyState!==4||P.status===0&&!(P.responseURL&&P.responseURL.indexOf("file:")===0)||setTimeout(te)},P.onabort=function(){P&&(_(new c("Request aborted",c.ECONNABORTED,f,P)),P=null)},P.onerror=function(){_(new c("Network Error",c.ERR_NETWORK,f,P,P)),P=null},P.ontimeout=function(){var A=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",h=f.transitional||a;f.timeoutErrorMessage&&(A=f.timeoutErrorMessage),_(new c(A,h.clarifyTimeoutError?c.ETIMEDOUT:c.ECONNABORTED,f,P)),P=null},e.isStandardBrowserEnv()){var N=(f.withCredentials||o(G))&&f.xsrfCookieName?n.read(f.xsrfCookieName):void 0;N&&(C[f.xsrfHeaderName]=N)}"setRequestHeader"in P&&e.forEach(C,function(A,h){typeof x>"u"&&h.toLowerCase()==="content-type"?delete C[h]:P.setRequestHeader(h,A)}),e.isUndefined(f.withCredentials)||(P.withCredentials=!!f.withCredentials),k&&k!=="json"&&(P.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&P.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&P.upload&&P.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(T=function(M){P&&(_(!M||M&&M.type?new d:M),P.abort(),P=null)},f.cancelToken&&f.cancelToken.subscribe(T),f.signal&&(f.signal.aborted?T():f.signal.addEventListener("abort",T))),x||(x=null);var R=u(G);if(R&&["http","https","file"].indexOf(R)===-1){_(new c("Unsupported protocol "+R+":",c.ERR_BAD_REQUEST,f));return}P.send(x)})},c0}var d0,H_;function c8(){return H_||(H_=1,d0=null),d0}var ii=ki,K_=ZS,W_=Uc,d8=qv,u8=Lv,l8={"Content-Type":"application/x-www-form-urlencoded"};function G_(e,t){!ii.isUndefined(e)&&ii.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function f8(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=z_()),e}function h8(e,t,n){if(ii.isString(e))try{return(t||JSON.parse)(e),ii.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}var Zf={transitional:d8,adapter:f8(),transformRequest:[function(t,n){if(K_(n,"Accept"),K_(n,"Content-Type"),ii.isFormData(t)||ii.isArrayBuffer(t)||ii.isBuffer(t)||ii.isStream(t)||ii.isFile(t)||ii.isBlob(t))return t;if(ii.isArrayBufferView(t))return t.buffer;if(ii.isURLSearchParams(t))return G_(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var i=ii.isObject(t),s=n&&n["Content-Type"],r;if((r=ii.isFileList(t))||i&&s==="multipart/form-data"){var o=this.env&&this.env.FormData;return u8(r?{"files[]":t}:t,o&&new o)}else if(i||s==="application/json")return G_(n,"application/json"),h8(t);return t}],transformResponse:[function(t){var n=this.transitional||Zf.transitional,i=n&&n.silentJSONParsing,s=n&&n.forcedJSONParsing,r=!i&&this.responseType==="json";if(r||s&&ii.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(r)throw o.name==="SyntaxError"?W_.from(o,W_.ERR_BAD_RESPONSE,this,null,this.response):o}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:c8()},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ii.forEach(["delete","get","head"],function(t){Zf.headers[t]={}});ii.forEach(["post","put","patch"],function(t){Zf.headers[t]=ii.merge(l8)});var Rg=Zf,p8=ki,g8=Rg,m8=function(t,n,i){var s=this||g8;return p8.forEach(i,function(o){t=o.call(s,t,n)}),t},u0,V_;function Fv(){return V_||(V_=1,u0=function(t){return!!(t&&t.__CANCEL__)}),u0}var X_=ki,l0=m8,_8=Fv(),b8=Rg,y8=Jf();function f0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new y8}var w8=function(t){f0(t),t.headers=t.headers||{},t.data=l0.call(t,t.data,t.headers,t.transformRequest),t.headers=X_.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),X_.forEach(["delete","get","head","post","put","patch","common"],function(s){delete t.headers[s]});var n=t.adapter||b8.adapter;return n(t).then(function(s){return f0(t),s.data=l0.call(t,s.data,s.headers,t.transformResponse),s},function(s){return _8(s)||(f0(t),s&&s.response&&(s.response.data=l0.call(t,s.response.data,s.response.headers,t.transformResponse))),Promise.reject(s)})},Gi=ki,zv=function(t,n){n=n||{};var i={};function s(u,l){return Gi.isPlainObject(u)&&Gi.isPlainObject(l)?Gi.merge(u,l):Gi.isPlainObject(l)?Gi.merge({},l):Gi.isArray(l)?l.slice():l}function r(u){if(Gi.isUndefined(n[u])){if(!Gi.isUndefined(t[u]))return s(void 0,t[u])}else return s(t[u],n[u])}function o(u){if(!Gi.isUndefined(n[u]))return s(void 0,n[u])}function a(u){if(Gi.isUndefined(n[u])){if(!Gi.isUndefined(t[u]))return s(void 0,t[u])}else return s(void 0,n[u])}function c(u){if(u in n)return s(t[u],n[u]);if(u in t)return s(void 0,t[u])}var d={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return Gi.forEach(Object.keys(t).concat(Object.keys(n)),function(l){var f=d[l]||r,p=f(l);Gi.isUndefined(p)&&f!==c||(i[l]=p)}),i},h0,J_;function Hv(){return J_||(J_=1,h0={version:"0.27.2"}),h0}var v8=Hv().version,bo=Uc,Ug={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Ug[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});var Z_={};Ug.transitional=function(t,n,i){function s(r,o){return"[Axios v"+v8+"] Transitional option '"+r+"'"+o+(i?". "+i:"")}return function(r,o,a){if(t===!1)throw new bo(s(o," has been removed"+(n?" in "+n:"")),bo.ERR_DEPRECATED);return n&&!Z_[o]&&(Z_[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(r,o,a):!0}};function x8(e,t,n){if(typeof e!="object")throw new bo("options must be an object",bo.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(e),s=i.length;s-- >0;){var r=i[s],o=t[r];if(o){var a=e[r],c=a===void 0||o(a,r,e);if(c!==!0)throw new bo("option "+r+" must be "+c,bo.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new bo("Unknown option "+r,bo.ERR_BAD_OPTION)}}var T8={assertOptions:x8,validators:Ug},Kv=ki,A8=Uv,Y_=XS,Q_=w8,Yf=zv,k8=Nv,Wv=T8,Ca=Wv.validators;function bc(e){this.defaults=e,this.interceptors={request:new Y_,response:new Y_}}bc.prototype.request=function(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Yf(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var i=n.transitional;i!==void 0&&Wv.assertOptions(i,{silentJSONParsing:Ca.transitional(Ca.boolean),forcedJSONParsing:Ca.transitional(Ca.boolean),clarifyTimeoutError:Ca.transitional(Ca.boolean)},!1);var s=[],r=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(n)===!1||(r=r&&p.synchronous,s.unshift(p.fulfilled,p.rejected))});var o=[];this.interceptors.response.forEach(function(p){o.push(p.fulfilled,p.rejected)});var a;if(!r){var c=[Q_,void 0];for(Array.prototype.unshift.apply(c,s),c=c.concat(o),a=Promise.resolve(n);c.length;)a=a.then(c.shift(),c.shift());return a}for(var d=n;s.length;){var u=s.shift(),l=s.shift();try{d=u(d)}catch(f){l(f);break}}try{a=Q_(d)}catch(f){return Promise.reject(f)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};bc.prototype.getUri=function(t){t=Yf(this.defaults,t);var n=k8(t.baseURL,t.url);return A8(n,t.params,t.paramsSerializer)};Kv.forEach(["delete","get","head","options"],function(t){bc.prototype[t]=function(n,i){return this.request(Yf(i||{},{method:t,url:n,data:(i||{}).data}))}});Kv.forEach(["post","put","patch"],function(t){function n(i){return function(r,o,a){return this.request(Yf(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}bc.prototype[t]=n(),bc.prototype[t+"Form"]=n(!0)});var S8=bc,p0,eb;function E8(){if(eb)return p0;eb=1;var e=Jf();function t(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(o){i=o});var s=this;this.promise.then(function(r){if(s._listeners){var o,a=s._listeners.length;for(o=0;o<a;o++)s._listeners[o](r);s._listeners=null}}),this.promise.then=function(r){var o,a=new Promise(function(c){s.subscribe(c),o=c}).then(r);return a.cancel=function(){s.unsubscribe(o)},a},n(function(o){s.reason||(s.reason=new e(o),i(s.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]},t.prototype.unsubscribe=function(i){if(this._listeners){var s=this._listeners.indexOf(i);s!==-1&&this._listeners.splice(s,1)}},t.source=function(){var i,s=new t(function(o){i=o});return{token:s,cancel:i}},p0=t,p0}var g0,tb;function P8(){return tb||(tb=1,g0=function(t){return function(i){return t.apply(null,i)}}),g0}var m0,nb;function C8(){if(nb)return m0;nb=1;var e=ki;return m0=function(n){return e.isObject(n)&&n.isAxiosError===!0},m0}var ib=ki,I8=Ov,Zu=S8,B8=zv,O8=Rg;function Gv(e){var t=new Zu(e),n=I8(Zu.prototype.request,t);return ib.extend(n,Zu.prototype,t),ib.extend(n,t),n.create=function(s){return Gv(B8(e,s))},n}var Hi=Gv(O8);Hi.Axios=Zu;Hi.CanceledError=Jf();Hi.CancelToken=E8();Hi.isCancel=Fv();Hi.VERSION=Hv().version;Hi.toFormData=Lv;Hi.AxiosError=Uc;Hi.Cancel=Hi.CanceledError;Hi.all=function(t){return Promise.all(t)};Hi.spread=P8();Hi.isAxiosError=C8();SS.exports=Hi;El.default=Hi;(function(e){e.exports=El})(kS);const yc=Hp(op);var Vv=typeof self=="object"?self.FormData:window.FormData,Xv=Object.defineProperty,$8=Object.getOwnPropertyDescriptor,Qf=(e,t)=>{for(var n in t)Xv(e,n,{get:t[n],enumerable:!0})},vn=(e,t,n,i)=>{for(var s=i>1?void 0:i?$8(t,n):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(s=(i?o(t,n,s):o(s))||s);return i&&s&&Xv(t,n,s),s},R8=/^m(\/[0-9]+')+$/,Jv=e=>e.replace("'",""),U8="ed25519 seed",M8=2147483648,D8=e=>{const n=Eg.create(Bv,U8).update(Tv(e)).digest(),i=n.slice(0,32),s=n.slice(32);return{key:i,chainCode:s}},j8=({key:e,chainCode:t},n)=>{const i=new ArrayBuffer(4);new DataView(i).setUint32(0,n);const s=new Uint8Array(i),r=new Uint8Array([0]),o=new Uint8Array([...r,...e,...s]),a=Eg.create(Bv,t).update(o).digest(),c=a.slice(0,32),d=a.slice(32);return{key:c,chainCode:d}},q8=e=>R8.test(e)?!e.split("/").slice(1).map(Jv).some(Number.isNaN):!1,L8=(e,t,n=M8)=>{if(!q8(e))throw new Error("Invalid derivation path");const{key:i,chainCode:s}=D8(t);return e.split("/").slice(1).map(Jv).map(o=>parseInt(o,10)).reduce((o,a)=>j8(o,a+n),{key:i,chainCode:s})},Dt=class{static fromBuffer(e){return Dt.fromUint8Array(e)}static fromUint8Array(e){return new Dt(xv(e))}static ensure(e){return typeof e=="string"?new Dt(e):e}constructor(e){e.startsWith("0x")?this.hexString=e:this.hexString=`0x${e}`}hex(){return this.hexString}noPrefix(){return this.hexString.slice(2)}toString(){return this.hex()}toShortString(){return`0x${this.hexString.replace(/^0x0*/,"")}`}toUint8Array(){return Uint8Array.from(Tv(this.noPrefix()))}};async function N8(e){return new Promise(t=>{setTimeout(t,e)})}var sb="/v1";function F8(e){let t=`${e}`;return t.endsWith("/")&&(t=t.substring(0,t.length-1)),t.endsWith(sb)||(t=`${t}${sb}`),t}var Zv=2e5,Yv=20,z8=20,H8="0x1::aptos_coin::AptosCoin";function eh(e){let t,n,i;return typeof e=="object"?(t=e.hashFunction,n=e.ttlMs,i=e.tags):t=e,(s,r,o)=>{if(o.value!=null)o.value=rb(o.value,t,n,i);else if(o.get!=null)o.get=rb(o.get,t,n,i);else throw new Error("Only put a Memoize() decorator on a method or get accessor.")}}function K8(e,t){return eh({ttlMs:e,hashFunction:t})}var Yu=new Map;function W8(e){const t=new Set;for(const n of e){const i=Yu.get(n);if(i)for(const s of i)t.has(s)||(s.clear(),t.add(s))}return t.size}function rb(e,t,n=0,i){const s=Symbol("__memoized_map__");return function(...r){let o;const a=this;a.hasOwnProperty(s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!1,writable:!1,value:new Map});const c=a[s];if(Array.isArray(i))for(const d of i)Yu.has(d)?Yu.get(d).push(c):Yu.set(d,[c]);if(t||r.length>0||n>0){let d;t===!0?d=r.map(f=>f.toString()).join("!"):t?d=t.apply(a,r):d=r[0];const u=`${d}__timestamp`;let l=!1;if(n>0)if(!c.has(u))l=!0;else{const f=c.get(u);l=Date.now()-f>n}c.has(d)&&!l?o=c.get(d):(o=e.apply(a,r),c.set(d,o),n>0&&c.set(u,Date.now()))}else{const d=a;c.has(d)?o=c.get(d):(o=e.apply(a,r),c.set(d,o))}return o}}async function ob(e,t,n,i){var s;const r=[];let o;for(;;){const a=await e(Dt.ensure(t).hex(),(s=i==null?void 0:i.ledgerVersion)==null?void 0:s.toString(),o,n);if(o=a.__headers["x-aptos-cursor"],delete a.__headers,r.push(...a),o==null)break}return r}var G8={mainnet:"https://indexer.mainnet.aptoslabs.com/v1/graphql",testnet:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",devnet:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql"},V8={mainnet:"https://fullnode.mainnet.aptoslabs.com/v1",testnet:"https://fullnode.testnet.aptoslabs.com/v1",devnet:"https://fullnode.devnet.aptoslabs.com/v1"},F={};Qf(F,{AccountAddress:()=>qn,AccountAuthenticator:()=>Id,AccountAuthenticatorEd25519:()=>jg,AccountAuthenticatorMultiEd25519:()=>qg,ArgumentABI:()=>du,AuthenticationKey:()=>sa,ChainId:()=>oh,ChangeSet:()=>o5,Ed25519PublicKey:()=>gs,Ed25519Signature:()=>ir,EntryFunction:()=>Yo,EntryFunctionABI:()=>Ac,Identifier:()=>qi,Module:()=>e6,ModuleId:()=>ia,MultiAgentRawTransaction:()=>sh,MultiEd25519PublicKey:()=>nu,MultiEd25519Signature:()=>th,MultiSig:()=>Fg,MultiSigTransactionPayload:()=>Ng,RawTransaction:()=>Lc,RawTransactionWithData:()=>t6,RotationProofChallenge:()=>c5,Script:()=>su,ScriptABI:()=>hh,SignedTransaction:()=>ru,StructTag:()=>wc,Transaction:()=>n6,TransactionArgument:()=>Zs,TransactionArgumentAddress:()=>xc,TransactionArgumentBool:()=>fh,TransactionArgumentU128:()=>uh,TransactionArgumentU16:()=>ch,TransactionArgumentU256:()=>lh,TransactionArgumentU32:()=>dh,TransactionArgumentU64:()=>vc,TransactionArgumentU8:()=>ah,TransactionArgumentU8Vector:()=>Tc,TransactionAuthenticator:()=>iu,TransactionAuthenticatorEd25519:()=>nh,TransactionAuthenticatorMultiAgent:()=>Dg,TransactionAuthenticatorMultiEd25519:()=>ih,TransactionPayload:()=>ou,TransactionPayloadEntryFunction:()=>rh,TransactionPayloadMultisig:()=>zg,TransactionPayloadScript:()=>au,TransactionScriptABI:()=>ph,TypeArgumentABI:()=>cu,TypeTag:()=>Ti,TypeTagAddress:()=>xa,TypeTagBool:()=>ya,TypeTagSigner:()=>Lg,TypeTagStruct:()=>Ta,TypeTagU128:()=>va,TypeTagU16:()=>Mc,TypeTagU256:()=>jc,TypeTagU32:()=>Dc,TypeTagU64:()=>wa,TypeTagU8:()=>Dr,TypeTagVector:()=>qc,UserTransaction:()=>Hg,WriteSet:()=>a5});var de={};Qf(de,{Deserializer:()=>Mg,Serializer:()=>Wn,bcsSerializeBool:()=>i5,bcsSerializeBytes:()=>Ua,bcsSerializeFixedBytes:()=>r5,bcsSerializeStr:()=>s5,bcsSerializeU128:()=>n5,bcsSerializeU16:()=>e5,bcsSerializeU32:()=>t5,bcsSerializeU8:()=>cp,bcsSerializeUint64:()=>Q8,bcsToBytes:()=>Lr,deserializeVector:()=>As,serializeVector:()=>rs,serializeVectorWithFunc:()=>Y8});var X8=2**8-1,J8=2**16-1,Cd=2**32-1,_d=BigInt(2**64)-BigInt(1),Qv=BigInt(2**128)-BigInt(1),Z8=BigInt(2**256)-BigInt(1),Wn=class{constructor(){this.buffer=new ArrayBuffer(64),this.offset=0}ensureBufferWillHandleSize(e){for(;this.buffer.byteLength<this.offset+e;){const t=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(t).set(new Uint8Array(this.buffer)),this.buffer=t}}serialize(e){this.ensureBufferWillHandleSize(e.length),new Uint8Array(this.buffer,this.offset).set(e),this.offset+=e.length}serializeWithFunction(e,t,n){this.ensureBufferWillHandleSize(t);const i=new DataView(this.buffer,this.offset);e.apply(i,[0,n,!0]),this.offset+=t}serializeStr(e){const t=new TextEncoder;this.serializeBytes(t.encode(e))}serializeBytes(e){this.serializeU32AsUleb128(e.length),this.serialize(e)}serializeFixedBytes(e){this.serialize(e)}serializeBool(e){if(typeof e!="boolean")throw new Error("Value needs to be a boolean");const t=e?1:0;this.serialize(new Uint8Array([t]))}serializeU8(e){this.serialize(new Uint8Array([e]))}serializeU16(e){this.serializeWithFunction(DataView.prototype.setUint16,2,e)}serializeU32(e){this.serializeWithFunction(DataView.prototype.setUint32,4,e)}serializeU64(e){const t=BigInt(e.toString())&BigInt(Cd),n=BigInt(e.toString())>>BigInt(32);this.serializeU32(Number(t)),this.serializeU32(Number(n))}serializeU128(e){const t=BigInt(e.toString())&_d,n=BigInt(e.toString())>>BigInt(64);this.serializeU64(t),this.serializeU64(n)}serializeU256(e){const t=BigInt(e.toString())&Qv,n=BigInt(e.toString())>>BigInt(128);this.serializeU128(t),this.serializeU128(n)}serializeU32AsUleb128(e){let t=e;const n=[];for(;t>>>7;)n.push(t&127|128),t>>>=7;n.push(t),this.serialize(new Uint8Array(n))}getBytes(){return new Uint8Array(this.buffer).slice(0,this.offset)}};vn([ba(0,X8)],Wn.prototype,"serializeU8",1);vn([ba(0,J8)],Wn.prototype,"serializeU16",1);vn([ba(0,Cd)],Wn.prototype,"serializeU32",1);vn([ba(BigInt(0),_d)],Wn.prototype,"serializeU64",1);vn([ba(BigInt(0),Qv)],Wn.prototype,"serializeU128",1);vn([ba(BigInt(0),Z8)],Wn.prototype,"serializeU256",1);vn([ba(0,Cd)],Wn.prototype,"serializeU32AsUleb128",1);function ba(e,t,n){return(i,s,r)=>{const o=r.value;return r.value=function(c){const d=BigInt(c.toString());if(d>BigInt(t.toString())||d<BigInt(e.toString()))throw new Error(n||"Value is out of range");o.apply(this,[c])},r}}var Mg=class{constructor(e){this.buffer=new ArrayBuffer(e.length),new Uint8Array(this.buffer).set(e,0),this.offset=0}read(e){if(this.offset+e>this.buffer.byteLength)throw new Error("Reached to the end of buffer");const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}deserializeStr(){const e=this.deserializeBytes();return new TextDecoder().decode(e)}deserializeBytes(){const e=this.deserializeUleb128AsU32();return new Uint8Array(this.read(e))}deserializeFixedBytes(e){return new Uint8Array(this.read(e))}deserializeBool(){const e=new Uint8Array(this.read(1))[0];if(e!==1&&e!==0)throw new Error("Invalid boolean value");return e===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){const e=this.deserializeU32(),t=this.deserializeU32();return BigInt(BigInt(t)<<BigInt(32)|BigInt(e))}deserializeU128(){const e=this.deserializeU64(),t=this.deserializeU64();return BigInt(t<<BigInt(64)|e)}deserializeU256(){const e=this.deserializeU128(),t=this.deserializeU128();return BigInt(t<<BigInt(128)|e)}deserializeUleb128AsU32(){let e=BigInt(0),t=0;for(;e<Cd;){const n=this.deserializeU8();if(e|=BigInt(n&127)<<BigInt(t),!(n&128))break;t+=7}if(e>Cd)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(e)}};function rs(e,t){t.serializeU32AsUleb128(e.length),e.forEach(n=>{n.serialize(t)})}function Y8(e,t){const n=new Wn;n.serializeU32AsUleb128(e.length);const i=n[t];return e.forEach(s=>{i.call(n,s)}),n.getBytes()}function As(e,t){const n=e.deserializeUleb128AsU32(),i=[];for(let s=0;s<n;s+=1)i.push(t.deserialize(e));return i}function Lr(e){const t=new Wn;return e.serialize(t),t.getBytes()}function Q8(e){const t=new Wn;return t.serializeU64(e),t.getBytes()}function cp(e){const t=new Wn;return t.serializeU8(e),t.getBytes()}function e5(e){const t=new Wn;return t.serializeU16(e),t.getBytes()}function t5(e){const t=new Wn;return t.serializeU32(e),t.getBytes()}function n5(e){const t=new Wn;return t.serializeU128(e),t.getBytes()}function i5(e){const t=new Wn;return t.serializeBool(e),t.getBytes()}function s5(e){const t=new Wn;return t.serializeStr(e),t.getBytes()}function Ua(e){const t=new Wn;return t.serializeBytes(e),t.getBytes()}function r5(e){const t=new Wn;return t.serializeFixedBytes(e),t.getBytes()}var ls=class{constructor(e){if(e.length!==ls.LENGTH)throw new Error("Expected address of length 32");this.address=e}static fromHex(e){let t=Dt.ensure(e);t.noPrefix().length%2!==0&&(t=new Dt(`0${t.noPrefix()}`));const n=t.toUint8Array();if(n.length>ls.LENGTH)throw new Error("Hex string is too long. Address's length is 32 bytes.");if(n.length===ls.LENGTH)return new ls(n);const i=new Uint8Array(ls.LENGTH);return i.set(n,ls.LENGTH-n.length),new ls(i)}static isValid(e){if(e==="")return!1;let t=Dt.ensure(e);return t.noPrefix().length%2!==0&&(t=new Dt(`0${t.noPrefix()}`)),t.toUint8Array().length<=ls.LENGTH}toHexString(){return Dt.fromUint8Array(this.address).hex()}serialize(e){e.serializeFixedBytes(this.address)}static deserialize(e){return new ls(e.deserializeFixedBytes(ls.LENGTH))}},qn=ls;qn.LENGTH=32;qn.CORE_CODE_ADDRESS=ls.fromHex("0x1");var Qu=class{constructor(e){if(e.length!==Qu.LENGTH)throw new Error(`Ed25519PublicKey length should be ${Qu.LENGTH}`);this.value=e}toBytes(){return this.value}serialize(e){e.serializeBytes(this.value)}static deserialize(e){const t=e.deserializeBytes();return new Qu(t)}},gs=Qu;gs.LENGTH=32;var el=class{constructor(e){if(this.value=e,e.length!==el.LENGTH)throw new Error(`Ed25519Signature length should be ${el.LENGTH}`)}serialize(e){e.serializeBytes(this.value)}static deserialize(e){const t=e.deserializeBytes();return new el(t)}},ir=el;ir.LENGTH=64;var dp=32,nu=class{constructor(e,t){if(this.public_keys=e,this.threshold=t,t>dp)throw new Error(`"threshold" cannot be larger than ${dp}`)}toBytes(){const e=new Uint8Array(this.public_keys.length*gs.LENGTH+1);return this.public_keys.forEach((t,n)=>{e.set(t.value,n*gs.LENGTH)}),e[this.public_keys.length*gs.LENGTH]=this.threshold,e}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(e){const t=e.deserializeBytes(),n=t[t.length-1],i=[];for(let s=0;s<t.length-1;s+=gs.LENGTH){const r=s;i.push(new gs(t.subarray(r,r+gs.LENGTH)))}return new nu(i,n)}},id=class{constructor(e,t){if(this.signatures=e,this.bitmap=t,t.length!==id.BITMAP_LEN)throw new Error(`"bitmap" length should be ${id.BITMAP_LEN}`)}toBytes(){const e=new Uint8Array(this.signatures.length*ir.LENGTH+id.BITMAP_LEN);return this.signatures.forEach((t,n)=>{e.set(t.value,n*ir.LENGTH)}),e.set(this.bitmap,this.signatures.length*ir.LENGTH),e}static createBitmap(e){const n=new Uint8Array([0,0,0,0]),i=new Set;return e.forEach(s=>{if(s>=dp)throw new Error(`Invalid bit value ${s}.`);if(i.has(s))throw new Error("Duplicated bits detected.");i.add(s);const r=Math.floor(s/8);let o=n[r];o|=128>>s%8,n[r]=o}),n}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(e){const t=e.deserializeBytes(),n=t.subarray(t.length-4),i=[];for(let s=0;s<t.length-n.length;s+=ir.LENGTH){const r=s;i.push(new ir(t.subarray(r,r+ir.LENGTH)))}return new id(i,n)}},th=id;th.BITMAP_LEN=4;var iu=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return nh.load(e);case 1:return ih.load(e);case 2:return Dg.load(e);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${t}`)}}},nh=class extends iu{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=gs.deserialize(e),n=ir.deserialize(e);return new nh(t,n)}},ih=class extends iu{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=nu.deserialize(e),n=th.deserialize(e);return new ih(t,n)}},Dg=class extends iu{constructor(e,t,n){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=n}serialize(e){e.serializeU32AsUleb128(2),this.sender.serialize(e),rs(this.secondary_signer_addresses,e),rs(this.secondary_signers,e)}static load(e){const t=Id.deserialize(e),n=As(e,qn),i=As(e,Id);return new Dg(t,n,i)}},Id=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return jg.load(e);case 1:return qg.load(e);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${t}`)}}},jg=class extends Id{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=gs.deserialize(e),n=ir.deserialize(e);return new jg(t,n)}},qg=class extends Id{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=nu.deserialize(e),n=th.deserialize(e);return new qg(t,n)}},qi=class{constructor(e){this.value=e}serialize(e){e.serializeStr(this.value)}static deserialize(e){const t=e.deserializeStr();return new qi(t)}},Ti=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return ya.load(t);case 1:return Dr.load(t);case 2:return wa.load(t);case 3:return va.load(t);case 4:return xa.load(t);case 5:return Lg.load(t);case 6:return qc.load(t);case 7:return Ta.load(t);case 8:return Mc.load(t);case 9:return Dc.load(t);case 10:return jc.load(t);default:throw new Error(`Unknown variant index for TypeTag: ${n}`)}}},ya=class extends Ti{serialize(e){e.serializeU32AsUleb128(0)}static load(e){return new ya}},Dr=class extends Ti{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new Dr}},Mc=class extends Ti{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new Mc}},Dc=class extends Ti{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new Dc}},wa=class extends Ti{serialize(e){e.serializeU32AsUleb128(2)}static load(e){return new wa}},va=class extends Ti{serialize(e){e.serializeU32AsUleb128(3)}static load(e){return new va}},jc=class extends Ti{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new jc}},xa=class extends Ti{serialize(e){e.serializeU32AsUleb128(4)}static load(e){return new xa}},Lg=class extends Ti{serialize(e){e.serializeU32AsUleb128(5)}static load(e){return new Lg}},qc=class extends Ti{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),this.value.serialize(e)}static load(e){const t=Ti.deserialize(e);return new qc(t)}},Ta=class extends Ti{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),this.value.serialize(e)}static load(e){const t=wc.deserialize(e);return new Ta(t)}isStringTypeTag(){return this.value.module_name.value==="string"&&this.value.name.value==="String"&&this.value.address.toHexString()===qn.fromHex("0x1").toHexString()}},wc=class{constructor(t,n,i,s){this.address=t,this.module_name=n,this.name=i,this.type_args=s}static fromString(t){if(t.includes("<"))throw new Error("Not implemented");const n=t.split("::");if(n.length!==3)throw new Error("Invalid struct tag string literal.");return new wc(qn.fromHex(n[0]),new qi(n[1]),new qi(n[2]),[])}serialize(t){this.address.serialize(t),this.module_name.serialize(t),this.name.serialize(t),rs(this.type_args,t)}static deserialize(t){const n=qn.deserialize(t),i=qi.deserialize(t),s=qi.deserialize(t),r=As(t,Ti);return new wc(n,i,s,r)}},Lc=class{constructor(e,t,n,i,s,r,o){this.sender=e,this.sequence_number=t,this.payload=n,this.max_gas_amount=i,this.gas_unit_price=s,this.expiration_timestamp_secs=r,this.chain_id=o}serialize(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e)}static deserialize(e){const t=qn.deserialize(e),n=e.deserializeU64(),i=ou.deserialize(e),s=e.deserializeU64(),r=e.deserializeU64(),o=e.deserializeU64(),a=oh.deserialize(e);return new Lc(t,n,i,s,r,o,a)}},su=class{constructor(e,t,n){this.code=e,this.ty_args=t,this.args=n}serialize(e){e.serializeBytes(this.code),rs(this.ty_args,e),rs(this.args,e)}static deserialize(e){const t=e.deserializeBytes(),n=As(e,Ti),i=As(e,Zs);return new su(t,n,i)}},Yo=class{constructor(e,t,n,i){this.module_name=e,this.function_name=t,this.ty_args=n,this.args=i}static natural(e,t,n,i){return new Yo(ia.fromStr(e),new qi(t),n,i)}static natual(e,t,n,i){return Yo.natural(e,t,n,i)}serialize(e){this.module_name.serialize(e),this.function_name.serialize(e),rs(this.ty_args,e),e.serializeU32AsUleb128(this.args.length),this.args.forEach(t=>{e.serializeBytes(t)})}static deserialize(e){const t=ia.deserialize(e),n=qi.deserialize(e),i=As(e,Ti),s=e.deserializeUleb128AsU32(),r=[];for(let a=0;a<s;a+=1)r.push(e.deserializeBytes());const o=r;return new Yo(t,n,i,o)}},Ng=class{constructor(e){this.transaction_payload=e}serialize(e){e.serializeU32AsUleb128(0),this.transaction_payload.serialize(e)}static deserialize(e){return new Ng(Yo.deserialize(e))}},Fg=class{constructor(t,n){this.multisig_address=t,this.transaction_payload=n}serialize(t){this.multisig_address.serialize(t),this.transaction_payload===void 0?t.serializeBool(!1):(t.serializeBool(!0),this.transaction_payload.serialize(t))}static deserialize(t){const n=qn.deserialize(t),i=t.deserializeBool();let s;return i&&(s=Ng.deserialize(t)),new Fg(n,s)}},e6=class{constructor(e){this.code=e}serialize(e){e.serializeBytes(this.code)}static deserialize(e){const t=e.deserializeBytes();return new e6(t)}},ia=class{constructor(t,n){this.address=t,this.name=n}static fromStr(t){const n=t.split("::");if(n.length!==2)throw new Error("Invalid module id.");return new ia(qn.fromHex(new Dt(n[0])),new qi(n[1]))}serialize(t){this.address.serialize(t),this.name.serialize(t)}static deserialize(t){const n=qn.deserialize(t),i=qi.deserialize(t);return new ia(n,i)}},o5=class{serialize(e){throw new Error("Not implemented.")}static deserialize(e){throw new Error("Not implemented.")}},a5=class{serialize(e){throw new Error("Not implmented.")}static deserialize(e){throw new Error("Not implmented.")}},ru=class{constructor(e,t){this.raw_txn=e,this.authenticator=t}serialize(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)}static deserialize(e){const t=Lc.deserialize(e),n=iu.deserialize(e);return new ru(t,n)}},t6=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return sh.load(e);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${t}`)}}},sh=class extends t6{constructor(e,t){super(),this.raw_txn=e,this.secondary_signer_addresses=t}serialize(e){e.serializeU32AsUleb128(0),this.raw_txn.serialize(e),rs(this.secondary_signer_addresses,e)}static load(e){const t=Lc.deserialize(e),n=As(e,qn);return new sh(t,n)}},ou=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return au.load(e);case 2:return rh.load(e);case 3:return zg.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}},au=class extends ou{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(e){const t=su.deserialize(e);return new au(t)}},rh=class extends ou{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),this.value.serialize(e)}static load(e){const t=Yo.deserialize(e);return new rh(t)}},zg=class extends ou{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(e){const t=Fg.deserialize(e);return new zg(t)}},oh=class{constructor(e){this.value=e}serialize(e){e.serializeU8(this.value)}static deserialize(e){const t=e.deserializeU8();return new oh(t)}},Zs=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return ah.load(t);case 1:return vc.load(t);case 2:return uh.load(t);case 3:return xc.load(t);case 4:return Tc.load(t);case 5:return fh.load(t);case 6:return ch.load(t);case 7:return dh.load(t);case 8:return lh.load(t);default:throw new Error(`Unknown variant index for TransactionArgument: ${n}`)}}},ah=class extends Zs{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),e.serializeU8(this.value)}static load(e){const t=e.deserializeU8();return new ah(t)}},ch=class extends Zs{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),e.serializeU16(this.value)}static load(e){const t=e.deserializeU16();return new ch(t)}},dh=class extends Zs{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),e.serializeU32(this.value)}static load(e){const t=e.deserializeU32();return new dh(t)}},vc=class extends Zs{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(1),e.serializeU64(this.value)}static load(e){const t=e.deserializeU64();return new vc(t)}},uh=class extends Zs{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),e.serializeU128(this.value)}static load(e){const t=e.deserializeU128();return new uh(t)}},lh=class extends Zs{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(8),e.serializeU256(this.value)}static load(e){const t=e.deserializeU256();return new lh(t)}},xc=class extends Zs{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(e){const t=qn.deserialize(e);return new xc(t)}},Tc=class extends Zs{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(4),e.serializeBytes(this.value)}static load(e){const t=e.deserializeBytes();return new Tc(t)}},fh=class extends Zs{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(5),e.serializeBool(this.value)}static load(e){const t=e.deserializeBool();return new fh(t)}},n6=class{getHashSalt(){const t=mc.create();return t.update("APTOS::Transaction"),t.digest()}static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return Hg.load(t);default:throw new Error(`Unknown variant index for Transaction: ${n}`)}}},Hg=class extends n6{constructor(e){super(),this.value=e}hash(){const e=mc.create();return e.update(this.getHashSalt()),e.update(Lr(this)),e.digest()}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(e){return new Hg(ru.deserialize(e))}},cu=class{constructor(e){this.name=e}serialize(e){e.serializeStr(this.name)}static deserialize(e){const t=e.deserializeStr();return new cu(t)}},du=class{constructor(e,t){this.name=e,this.type_tag=t}serialize(e){e.serializeStr(this.name),this.type_tag.serialize(e)}static deserialize(e){const t=e.deserializeStr(),n=Ti.deserialize(e);return new du(t,n)}},hh=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return ph.load(e);case 1:return Ac.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}},ph=class extends hh{constructor(e,t,n,i,s){super(),this.name=e,this.doc=t,this.code=n,this.ty_args=i,this.args=s}serialize(e){e.serializeU32AsUleb128(0),e.serializeStr(this.name),e.serializeStr(this.doc),e.serializeBytes(this.code),rs(this.ty_args,e),rs(this.args,e)}static load(e){const t=e.deserializeStr(),n=e.deserializeStr(),i=e.deserializeBytes(),s=As(e,cu),r=As(e,du);return new ph(t,n,i,s,r)}},Ac=class extends hh{constructor(e,t,n,i,s){super(),this.name=e,this.module_name=t,this.doc=n,this.ty_args=i,this.args=s}serialize(e){e.serializeU32AsUleb128(1),e.serializeStr(this.name),this.module_name.serialize(e),e.serializeStr(this.doc),rs(this.ty_args,e),rs(this.args,e)}static load(e){const t=e.deserializeStr(),n=ia.deserialize(e),i=e.deserializeStr(),s=As(e,cu),r=As(e,du);return new Ac(t,n,i,s,r)}},Ma=class{constructor(e){if(e.length!==Ma.LENGTH)throw new Error("Expected a byte array of length 32");this.bytes=e}static fromMultiEd25519PublicKey(e){const t=e.toBytes(),n=new Uint8Array(t.length+1);n.set(t),n.set([Ma.MULTI_ED25519_SCHEME],t.length);const i=mc.create();return i.update(n),new Ma(i.digest())}static fromEd25519PublicKey(e){const t=e.value,n=new Uint8Array(t.length+1);n.set(t),n.set([Ma.ED25519_SCHEME],t.length);const i=mc.create();return i.update(n),new Ma(i.digest())}derivedAddress(){return Dt.fromUint8Array(this.bytes)}},sa=Ma;sa.LENGTH=32;sa.MULTI_ED25519_SCHEME=1;sa.ED25519_SCHEME=0;sa.DERIVE_RESOURCE_ACCOUNT_SCHEME=255;var c5=class{constructor(e,t,n,i,s,r,o){this.accountAddress=e,this.moduleName=t,this.structName=n,this.sequenceNumber=i,this.originator=s,this.currentAuthKey=r,this.newPublicKey=o}serialize(e){this.accountAddress.serialize(e),e.serializeStr(this.moduleName),e.serializeStr(this.structName),e.serializeU64(this.sequenceNumber),this.originator.serialize(e),this.currentAuthKey.serialize(e),e.serializeBytes(this.newPublicKey)}},tl=class{static fromAptosAccountObject(e){return new tl(Dt.ensure(e.privateKeyHex).toUint8Array(),e.address)}static fromDerivePath(e,t){if(!tl.isValidPath(e))throw new Error("Invalid derivation path");const n=t.trim().split(/\s+/).map(s=>s.toLowerCase()).join(" "),{key:i}=L8(e,xv(fv(n)));return new tl(i)}constructor(e,t){e?this.signingKey=dr.sign.keyPair.fromSeed(e.slice(0,32)):this.signingKey=dr.sign.keyPair(),this.accountAddress=Dt.ensure(t||this.authKey().hex())}address(){return this.accountAddress}authKey(){const e=new gs(this.signingKey.publicKey);return sa.fromEd25519PublicKey(e).derivedAddress()}static getResourceAccountAddress(e,t){const n=Lr(qn.fromHex(e)),i=new Uint8Array([...n,...t,sa.DERIVE_RESOURCE_ACCOUNT_SCHEME]),s=mc.create();return s.update(i),Dt.fromUint8Array(s.digest())}pubKey(){return Dt.fromUint8Array(this.signingKey.publicKey)}signBuffer(e){const t=dr.sign(e,this.signingKey.secretKey);return Dt.fromUint8Array(t.slice(0,64))}signHexString(e){const t=Dt.ensure(e).toUint8Array();return this.signBuffer(t)}toPrivateKeyObject(){return{address:this.address().hex(),publicKeyHex:this.pubKey().hex(),privateKeyHex:Dt.fromUint8Array(this.signingKey.secretKey.slice(0,32)).hex()}}},Bd=tl;Bd.isValidPath=e=>!!/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'+$/.test(e);vn([eh()],Bd.prototype,"authKey",1);function kc(e){return e instanceof Bd?e.address():Dt.ensure(e)}var d5=`
    fragment TokenDataFields on current_token_datas {
  creator_address
  collection_name
  description
  metadata_uri
  name
  token_data_id_hash
  collection_data_id_hash
}
    `,u5=`
    fragment CollectionDataFields on current_collection_datas {
  metadata_uri
  supply
  description
  collection_name
  collection_data_id_hash
  table_handle
  creator_address
}
    `,l5=`
    query getAccountCurrentTokens($address: String!, $offset: Int, $limit: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $address}, amount: {_gt: 0}}
    order_by: [{last_transaction_version: desc}, {creator_address: asc}, {collection_name: asc}, {name: asc}]
    offset: $offset
    limit: $limit
  ) {
    amount
    current_token_data {
      ...TokenDataFields
    }
    current_collection_data {
      ...CollectionDataFields
    }
    last_transaction_version
    property_version
  }
}
    ${d5}
${u5}`,f5=`
    query getTokenActivities($idHash: String!) {
  token_activities(where: {token_data_id_hash: {_eq: $idHash}}) {
    creator_address
    collection_name
    name
    token_data_id_hash
    collection_data_id_hash
    from_address
    to_address
    transaction_version
    transaction_timestamp
    property_version
    transfer_type
    event_sequence_number
    token_amount
  }
}
    `,i6=class{constructor(e){this.endpoint=e}async queryIndexer(e){const{data:t}=await yc.post(this.endpoint,e);if(t.errors)throw new Error(`Indexer data error ${t.errors}`);return t.data}async getAccountNFTs(e,t){const n={query:l5,variables:{address:e,offset:t==null?void 0:t.offset,limit:t==null?void 0:t.limit}};return this.queryIndexer(n)}async getTokenActivities(e){const t={query:f5,variables:{idHash:e}};return this.queryIndexer(t)}},h5={};Qf(h5,{$AccountData:()=>C5,$AccountSignature:()=>I5,$AccountSignature_Ed25519Signature:()=>B5,$AccountSignature_MultiEd25519Signature:()=>O5,$Address:()=>$5,$AptosError:()=>R5,$AptosErrorCode:()=>U5,$Block:()=>M5,$BlockMetadataTransaction:()=>D5,$DecodedTableData:()=>j5,$DeleteModule:()=>L5,$DeleteResource:()=>N5,$DeleteTableItem:()=>F5,$DeletedTableData:()=>q5,$DirectWriteSet:()=>z5,$Ed25519Signature:()=>H5,$EncodeSubmissionRequest:()=>K5,$EntryFunctionId:()=>W5,$EntryFunctionPayload:()=>G5,$Event:()=>V5,$EventGuid:()=>X5,$GasEstimation:()=>J5,$GenesisPayload:()=>Z5,$GenesisPayload_WriteSetPayload:()=>Y5,$GenesisTransaction:()=>Q5,$HashValue:()=>e7,$HealthCheckSuccess:()=>t7,$HexEncodedBytes:()=>n7,$IdentifierWrapper:()=>i7,$IndexResponse:()=>s7,$ModuleBundlePayload:()=>r7,$MoveAbility:()=>o7,$MoveFunction:()=>a7,$MoveFunctionGenericTypeParam:()=>c7,$MoveFunctionVisibility:()=>d7,$MoveModule:()=>u7,$MoveModuleBytecode:()=>l7,$MoveModuleId:()=>f7,$MoveResource:()=>h7,$MoveScriptBytecode:()=>p7,$MoveStruct:()=>g7,$MoveStructField:()=>m7,$MoveStructGenericTypeParam:()=>_7,$MoveStructTag:()=>b7,$MoveStructValue:()=>y7,$MoveType:()=>w7,$MoveValue:()=>v7,$MultiAgentSignature:()=>x7,$MultiEd25519Signature:()=>T7,$MultisigPayload:()=>A7,$MultisigTransactionPayload:()=>k7,$PendingTransaction:()=>S7,$RawTableItemRequest:()=>E7,$RoleType:()=>P7,$ScriptPayload:()=>C7,$ScriptWriteSet:()=>I7,$StateCheckpointTransaction:()=>B7,$StateKeyWrapper:()=>O7,$SubmitTransactionRequest:()=>$7,$TableItemRequest:()=>R7,$Transaction:()=>U7,$TransactionPayload:()=>N7,$TransactionPayload_EntryFunctionPayload:()=>F7,$TransactionPayload_ModuleBundlePayload:()=>z7,$TransactionPayload_MultisigPayload:()=>H7,$TransactionPayload_ScriptPayload:()=>K7,$TransactionSignature:()=>V7,$TransactionSignature_Ed25519Signature:()=>X7,$TransactionSignature_MultiAgentSignature:()=>J7,$TransactionSignature_MultiEd25519Signature:()=>Z7,$Transaction_BlockMetadataTransaction:()=>M7,$Transaction_GenesisTransaction:()=>D7,$Transaction_PendingTransaction:()=>j7,$Transaction_StateCheckpointTransaction:()=>q7,$Transaction_UserTransaction:()=>L7,$TransactionsBatchSingleSubmissionFailure:()=>W7,$TransactionsBatchSubmissionResult:()=>G7,$U128:()=>Y7,$U256:()=>Q7,$U64:()=>e9,$UserTransaction:()=>t9,$VersionedEvent:()=>n9,$ViewRequest:()=>i9,$WriteModule:()=>s9,$WriteResource:()=>r9,$WriteSet:()=>o9,$WriteSetChange:()=>d9,$WriteSetChange_DeleteModule:()=>u9,$WriteSetChange_DeleteResource:()=>l9,$WriteSetChange_DeleteTableItem:()=>f9,$WriteSetChange_WriteModule:()=>h9,$WriteSetChange_WriteResource:()=>p9,$WriteSetChange_WriteTableItem:()=>g9,$WriteSetPayload:()=>m9,$WriteSet_DirectWriteSet:()=>a9,$WriteSet_ScriptWriteSet:()=>c9,$WriteTableItem:()=>_9,AccountsService:()=>u6,ApiError:()=>Od,AptosErrorCode:()=>b6,AptosGeneratedClient:()=>_6,BaseHttpRequest:()=>s6,BlocksService:()=>l6,CancelError:()=>r6,CancelablePromise:()=>o6,EventsService:()=>f6,GeneralService:()=>h6,MoveFunctionVisibility:()=>y6,OpenAPI:()=>P5,RoleType:()=>w6,TablesService:()=>p6,TransactionsService:()=>g6,ViewService:()=>m6});var s6=class{constructor(e){this.config=e}},Od=class extends Error{constructor(e,t,n){super(n),this.name="ApiError",this.url=t.url,this.status=t.status,this.statusText=t.statusText,this.body=t.body,this.request=e}},r6=class extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}},o6=class{constructor(e){this._isResolved=!1,this._isRejected=!1,this._isCancelled=!1,this._cancelHandlers=[],this._promise=new Promise((t,n)=>{this._resolve=t,this._reject=n;const i=o=>{var a;this._isResolved||this._isRejected||this._isCancelled||(this._isResolved=!0,(a=this._resolve)==null||a.call(this,o))},s=o=>{var a;this._isResolved||this._isRejected||this._isCancelled||(this._isRejected=!0,(a=this._reject)==null||a.call(this,o))},r=o=>{this._isResolved||this._isRejected||this._isCancelled||this._cancelHandlers.push(o)};return Object.defineProperty(r,"isResolved",{get:()=>this._isResolved}),Object.defineProperty(r,"isRejected",{get:()=>this._isRejected}),Object.defineProperty(r,"isCancelled",{get:()=>this._isCancelled}),e(i,s,r)})}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(){var e;if(!(this._isResolved||this._isRejected||this._isCancelled)){if(this._isCancelled=!0,this._cancelHandlers.length)try{for(const t of this._cancelHandlers)t()}catch(t){console.warn("Cancellation threw an error",t);return}this._cancelHandlers.length=0,(e=this._reject)==null||e.call(this,new r6("Request aborted"))}}get isCancelled(){return this._isCancelled}},a6=class{constructor(e=new Map){this.jar=e}setCookie(e,t){var n;const i=e.origin.toLowerCase();this.jar.has(i)||this.jar.set(i,[]);const s=a6.parse(t);this.jar.set(i,[...((n=this.jar.get(i))==null?void 0:n.filter(r=>r.name!==s.name))||[],s])}getCookies(e){var t;const n=e.origin.toLowerCase();return this.jar.get(n)?((t=this.jar.get(n))==null?void 0:t.filter(i=>!i.expires||i.expires>new Date))||[]:[]}static parse(e){if(typeof e!="string")throw new Error("argument str must be a string");const t=e.split(";").map(i=>i.trim());let n;if(t.length>0){const[i,s]=t[0].split("=");if(!i||!s)throw new Error("Invalid cookie");n={name:i,value:s}}else throw new Error("Invalid cookie");return t.slice(1).forEach(i=>{const[s,r]=i.split("=");if(!s.trim())throw new Error("Invalid cookie");const o=s.toLowerCase(),a=(r==null?void 0:r.charAt(0))==="'"||(r==null?void 0:r.charAt(0))==='"'?r==null?void 0:r.slice(1,-1):r;if(o==="expires"&&(n.expires=new Date(a)),o==="path"&&(n.path=a),o==="samesite"){if(a!=="Lax"&&a!=="None"&&a!=="Strict")throw new Error("Invalid cookie SameSite value");n.sameSite=a}o==="secure"&&(n.secure=!0)}),n}},c6=new a6;yc.interceptors.response.use(e=>(Array.isArray(e.headers["set-cookie"])&&e.headers["set-cookie"].forEach(t=>{c6.setCookie(new URL(e.config.url),t)}),e));yc.interceptors.request.use(function(e){const t=c6.getCookies(new URL(e.url));return(t==null?void 0:t.length)>0&&e.headers&&(e.headers.cookie=t.map(n=>`${n.name}=${n.value}`).join("; ")),e});var Kg=e=>e!=null,gh=e=>typeof e=="string",_0=e=>gh(e)&&e!=="",d6=e=>typeof e=="object"&&typeof e.type=="string"&&typeof e.stream=="function"&&typeof e.arrayBuffer=="function"&&typeof e.constructor=="function"&&typeof e.constructor.name=="string"&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag]),p5=e=>e instanceof Vv,g5=e=>e>=200&&e<300,m5=e=>btoa(e),_5=e=>{const t=[],n=(s,r)=>{t.push(`${encodeURIComponent(s)}=${encodeURIComponent(String(r))}`)},i=(s,r)=>{Kg(r)&&(Array.isArray(r)?r.forEach(o=>{i(s,o)}):typeof r=="object"?Object.entries(r).forEach(([o,a])=>{i(`${s}[${o}]`,a)}):n(s,r))};return Object.entries(e).forEach(([s,r])=>{i(s,r)}),t.length>0?`?${t.join("&")}`:""},b5=(e,t)=>{const n=e.ENCODE_PATH||encodeURI,i=t.url.replace("{api-version}",e.VERSION).replace(/{(.*?)}/g,(r,o)=>{var a;return(a=t.path)!=null&&a.hasOwnProperty(o)?n(String(t.path[o])):r}),s=`${e.BASE}${i}`;return t.query?`${s}${_5(t.query)}`:s},y5=e=>{if(e.formData){const t=new Vv,n=(i,s)=>{gh(s)||d6(s)?t.append(i,s):t.append(i,JSON.stringify(s))};return Object.entries(e.formData).filter(([i,s])=>Kg(s)).forEach(([i,s])=>{Array.isArray(s)?s.forEach(r=>n(i,r)):n(i,s)}),t}},Su=async(e,t)=>typeof t=="function"?t(e):t,w5=async(e,t,n)=>{const i=await Su(t,e.TOKEN),s=await Su(t,e.USERNAME),r=await Su(t,e.PASSWORD),o=await Su(t,e.HEADERS),a=typeof(n==null?void 0:n.getHeaders)=="function"&&(n==null?void 0:n.getHeaders())||{},c=Object.entries({Accept:"application/json",...o,...t.headers,...a}).filter(([d,u])=>Kg(u)).reduce((d,[u,l])=>({...d,[u]:String(l)}),{});if(_0(i)&&(c.Authorization=`Bearer ${i}`),_0(s)&&_0(r)){const d=m5(`${s}:${r}`);c.Authorization=`Basic ${d}`}return t.body&&(t.mediaType?c["Content-Type"]=t.mediaType:d6(t.body)?c["Content-Type"]=t.body.type||"application/octet-stream":gh(t.body)?c["Content-Type"]="text/plain":p5(t.body)||(c["Content-Type"]="application/json")),c},v5=e=>{if(e.body)return e.body},x5=async(e,t,n,i,s,r,o)=>{const a=yc.CancelToken.source(),c={url:n,headers:r,data:i??s,method:t.method,withCredentials:e.WITH_CREDENTIALS,cancelToken:a.token};Object.keys(e.HEADERS||{}).filter(u=>u.toLowerCase()==="accept").map(u=>e.HEADERS[u]).includes("application/x-bcs")&&(c.responseType="arraybuffer"),o(()=>a.cancel("The user aborted a request."));try{return await yc.request(c)}catch(u){const l=u;if(l.response)return l.response;throw u}},T5=(e,t)=>{if(t){const n=e.headers[t];if(gh(n))return n}},A5=e=>{if(e.status!==204)return e.data},k5=(e,t)=>{const i={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...e.errors}[t.status];if(i)throw new Od(e,t,i);if(!t.ok)throw new Od(e,t,"Generic Error")},S5=(e,t)=>new o6(async(n,i,s)=>{try{const r=b5(e,t),o=y5(t),a=v5(t),c=await w5(e,t,o);if(!s.isCancelled){const d=await x5(e,t,r,a,o,c,s),u=A5(d),l=T5(d,t.responseHeader),f={url:r,ok:g5(d.status),status:d.status,statusText:d.statusText,body:l??u};k5(t,f);const p=f.body;try{p.__headers=d.headers}catch{}n(p)}}catch(r){i(r)}}),E5=class extends s6{constructor(e){super(e)}request(e){return S5(this.config,e)}},u6=class{constructor(e){this.httpRequest=e}getAccount(e,t){return this.httpRequest.request({method:"GET",url:"/accounts/{address}",path:{address:e},query:{ledger_version:t}})}getAccountResources(e,t,n,i){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/resources",path:{address:e},query:{ledger_version:t,start:n,limit:i}})}getAccountModules(e,t,n,i){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/modules",path:{address:e},query:{ledger_version:t,start:n,limit:i}})}getAccountResource(e,t,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/resource/{resource_type}",path:{address:e,resource_type:t},query:{ledger_version:n}})}getAccountModule(e,t,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/module/{module_name}",path:{address:e,module_name:t},query:{ledger_version:n}})}},l6=class{constructor(e){this.httpRequest=e}getBlockByHeight(e,t){return this.httpRequest.request({method:"GET",url:"/blocks/by_height/{block_height}",path:{block_height:e},query:{with_transactions:t}})}getBlockByVersion(e,t){return this.httpRequest.request({method:"GET",url:"/blocks/by_version/{version}",path:{version:e},query:{with_transactions:t}})}},f6=class{constructor(e){this.httpRequest=e}getEventsByCreationNumber(e,t,n,i){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/events/{creation_number}",path:{address:e,creation_number:t},query:{start:n,limit:i}})}getEventsByEventHandle(e,t,n,i,s){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/events/{event_handle}/{field_name}",path:{address:e,event_handle:t,field_name:n},query:{start:i,limit:s}})}},h6=class{constructor(e){this.httpRequest=e}spec(){return this.httpRequest.request({method:"GET",url:"/spec"})}healthy(e){return this.httpRequest.request({method:"GET",url:"/-/healthy",query:{duration_secs:e}})}getLedgerInfo(){return this.httpRequest.request({method:"GET",url:"/"})}},p6=class{constructor(e){this.httpRequest=e}getTableItem(e,t,n){return this.httpRequest.request({method:"POST",url:"/tables/{table_handle}/item",path:{table_handle:e},query:{ledger_version:n},body:t,mediaType:"application/json"})}getRawTableItem(e,t,n){return this.httpRequest.request({method:"POST",url:"/tables/{table_handle}/raw_item",path:{table_handle:e},query:{ledger_version:n},body:t,mediaType:"application/json"})}},g6=class{constructor(e){this.httpRequest=e}getTransactions(e,t){return this.httpRequest.request({method:"GET",url:"/transactions",query:{start:e,limit:t}})}submitTransaction(e){return this.httpRequest.request({method:"POST",url:"/transactions",body:e,mediaType:"application/json"})}getTransactionByHash(e){return this.httpRequest.request({method:"GET",url:"/transactions/by_hash/{txn_hash}",path:{txn_hash:e}})}getTransactionByVersion(e){return this.httpRequest.request({method:"GET",url:"/transactions/by_version/{txn_version}",path:{txn_version:e}})}getAccountTransactions(e,t,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/transactions",path:{address:e},query:{start:t,limit:n}})}submitBatchTransactions(e){return this.httpRequest.request({method:"POST",url:"/transactions/batch",body:e,mediaType:"application/json"})}simulateTransaction(e,t,n,i){return this.httpRequest.request({method:"POST",url:"/transactions/simulate",query:{estimate_max_gas_amount:t,estimate_gas_unit_price:n,estimate_prioritized_gas_unit_price:i},body:e,mediaType:"application/json"})}encodeSubmission(e){return this.httpRequest.request({method:"POST",url:"/transactions/encode_submission",body:e,mediaType:"application/json"})}estimateGasPrice(){return this.httpRequest.request({method:"GET",url:"/estimate_gas_price"})}},m6=class{constructor(e){this.httpRequest=e}view(e,t){return this.httpRequest.request({method:"POST",url:"/view",query:{ledger_version:t},body:e,mediaType:"application/json"})}},_6=class{constructor(e,t=E5){var n,i,s,r;this.request=new t({BASE:(n=e==null?void 0:e.BASE)!=null?n:"/v1",VERSION:(i=e==null?void 0:e.VERSION)!=null?i:"1.2.0",WITH_CREDENTIALS:(s=e==null?void 0:e.WITH_CREDENTIALS)!=null?s:!1,CREDENTIALS:(r=e==null?void 0:e.CREDENTIALS)!=null?r:"include",TOKEN:e==null?void 0:e.TOKEN,USERNAME:e==null?void 0:e.USERNAME,PASSWORD:e==null?void 0:e.PASSWORD,HEADERS:e==null?void 0:e.HEADERS,ENCODE_PATH:e==null?void 0:e.ENCODE_PATH}),this.accounts=new u6(this.request),this.blocks=new l6(this.request),this.events=new f6(this.request),this.general=new h6(this.request),this.tables=new p6(this.request),this.transactions=new g6(this.request),this.view=new m6(this.request)}},P5={BASE:"/v1",VERSION:"1.2.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},b6=(e=>(e.ACCOUNT_NOT_FOUND="account_not_found",e.RESOURCE_NOT_FOUND="resource_not_found",e.MODULE_NOT_FOUND="module_not_found",e.STRUCT_FIELD_NOT_FOUND="struct_field_not_found",e.VERSION_NOT_FOUND="version_not_found",e.TRANSACTION_NOT_FOUND="transaction_not_found",e.TABLE_ITEM_NOT_FOUND="table_item_not_found",e.BLOCK_NOT_FOUND="block_not_found",e.VERSION_PRUNED="version_pruned",e.BLOCK_PRUNED="block_pruned",e.INVALID_INPUT="invalid_input",e.INVALID_TRANSACTION_UPDATE="invalid_transaction_update",e.SEQUENCE_NUMBER_TOO_OLD="sequence_number_too_old",e.VM_ERROR="vm_error",e.HEALTH_CHECK_FAILED="health_check_failed",e.MEMPOOL_IS_FULL="mempool_is_full",e.INTERNAL_ERROR="internal_error",e.WEB_FRAMEWORK_ERROR="web_framework_error",e.BCS_NOT_SUPPORTED="bcs_not_supported",e.API_DISABLED="api_disabled",e))(b6||{}),y6=(e=>(e.PRIVATE="private",e.PUBLIC="public",e.FRIEND="friend",e))(y6||{}),w6=(e=>(e.VALIDATOR="validator",e.FULL_NODE="full_node",e))(w6||{}),C5={description:`Account data

    A simplified version of the onchain Account resource`,properties:{sequence_number:{type:"U64",isRequired:!0},authentication_key:{type:"HexEncodedBytes",isRequired:!0}}},I5={type:"one-of",description:`Account signature scheme

    The account signature scheme allows you to have two types of accounts:

    1. A single Ed25519 key account, one private key
    2. A k-of-n multi-Ed25519 key account, multiple private keys, such that k-of-n must sign a transaction.`,contains:[{type:"AccountSignature_Ed25519Signature"},{type:"AccountSignature_MultiEd25519Signature"}]},B5={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"Ed25519Signature"}]},O5={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiEd25519Signature"}]},$5={type:"string",description:`A hex encoded 32 byte Aptos account address.

    This is represented in a string as a 64 character hex string, sometimes
    shortened by stripping leading 0s, and adding a 0x.

    For example, address 0x0000000000000000000000000000000000000000000000000000000000000001 is represented as 0x1.
    `,format:"hex"},R5={description:`This is the generic struct we use for all API errors, it contains a string
    message and an Aptos API specific error code.`,properties:{message:{type:"string",description:"A message describing the error",isRequired:!0},error_code:{type:"AptosErrorCode",isRequired:!0},vm_error_code:{type:"number",description:"A code providing VM error details when submitting transactions to the VM",format:"uint64"}}},U5={type:"Enum"},M5={description:`A Block with or without transactions

    This contains the information about a transactions along with
    associated transactions if requested`,properties:{block_height:{type:"U64",isRequired:!0},block_hash:{type:"HashValue",isRequired:!0},block_timestamp:{type:"U64",isRequired:!0},first_version:{type:"U64",isRequired:!0},last_version:{type:"U64",isRequired:!0},transactions:{type:"array",contains:{type:"Transaction"}}}},D5={description:`A block metadata transaction

    This signifies the beginning of a block, and contains information
    about the specific block`,properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},id:{type:"HashValue",isRequired:!0},epoch:{type:"U64",isRequired:!0},round:{type:"U64",isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0},previous_block_votes_bitvec:{type:"array",contains:{type:"number",format:"uint8"},isRequired:!0},proposer:{type:"Address",isRequired:!0},failed_proposer_indices:{type:"array",contains:{type:"number",format:"uint32"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},j5={description:"Decoded table data",properties:{key:{description:"Key of table in JSON",properties:{},isRequired:!0},key_type:{type:"string",description:"Type of key",isRequired:!0},value:{description:"Value of table in JSON",properties:{},isRequired:!0},value_type:{type:"string",description:"Type of value",isRequired:!0}}},q5={description:"Deleted table data",properties:{key:{description:"Deleted key",properties:{},isRequired:!0},key_type:{type:"string",description:"Deleted key type",isRequired:!0}}},L5={description:"Delete a module",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},module:{type:"MoveModuleId",isRequired:!0}}},N5={description:"Delete a resource",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},resource:{type:"MoveStructTag",isRequired:!0}}},F5={description:"Delete a table item",properties:{state_key_hash:{type:"string",isRequired:!0},handle:{type:"HexEncodedBytes",isRequired:!0},key:{type:"HexEncodedBytes",isRequired:!0},data:{type:"DeletedTableData"}}},z5={properties:{changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0}}},H5={description:"A single Ed25519 signature",properties:{public_key:{type:"HexEncodedBytes",isRequired:!0},signature:{type:"HexEncodedBytes",isRequired:!0}}},K5={description:"Request to encode a submission",properties:{sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},secondary_signers:{type:"array",contains:{type:"Address"}}}},W5={type:"string",description:"Entry function id is string representation of a entry function defined on-chain.\n\n    Format: `{address}::{module name}::{function name}`\n\n    Both `module name` and `function name` are case-sensitive.\n    "},G5={description:"Payload which runs a single entry function",properties:{function:{type:"EntryFunctionId",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},V5={description:"An event from a transaction",properties:{guid:{type:"EventGuid",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},type:{type:"MoveType",isRequired:!0},data:{description:"The JSON representation of the event",properties:{},isRequired:!0}}},X5={properties:{creation_number:{type:"U64",isRequired:!0},account_address:{type:"Address",isRequired:!0}}},J5={description:"Struct holding the outputs of the estimate gas API",properties:{deprioritized_gas_estimate:{type:"number",description:"The deprioritized estimate for the gas unit price",format:"uint64"},gas_estimate:{type:"number",description:"The current estimate for the gas unit price",isRequired:!0,format:"uint64"},prioritized_gas_estimate:{type:"number",description:"The prioritized estimate for the gas unit price",format:"uint64"}}},Z5={type:"one-of",description:"The writeset payload of the Genesis transaction",contains:[{type:"GenesisPayload_WriteSetPayload"}]},Y5={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteSetPayload"}]},Q5={description:`The genesis transaction

    This only occurs at the genesis transaction (version 0)`,properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},payload:{type:"GenesisPayload",isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0}}},e7={type:"string"},t7={description:"Representation of a successful healthcheck",properties:{message:{type:"string",isRequired:!0}}},n7={type:"string",description:"All bytes (Vec<u8>) data is represented as hex-encoded string prefixed with `0x` and fulfilled with\n    two hex digits per byte.\n\n    Unlike the `Address` type, HexEncodedBytes will not trim any zeros.\n    ",format:"hex"},i7={type:"string"},s7={description:`The struct holding all data returned to the client by the
    index endpoint (i.e., GET "/").  Only for responding in JSON`,properties:{chain_id:{type:"number",description:"Chain ID of the current chain",isRequired:!0,format:"uint8"},epoch:{type:"U64",isRequired:!0},ledger_version:{type:"U64",isRequired:!0},oldest_ledger_version:{type:"U64",isRequired:!0},ledger_timestamp:{type:"U64",isRequired:!0},node_role:{type:"RoleType",isRequired:!0},oldest_block_height:{type:"U64",isRequired:!0},block_height:{type:"U64",isRequired:!0},git_hash:{type:"string",description:`Git hash of the build of the API endpoint.  Can be used to determine the exact
            software version used by the API endpoint.`}}},r7={properties:{modules:{type:"array",contains:{type:"MoveModuleBytecode"},isRequired:!0}}},o7={type:"string"},a7={description:"Move function",properties:{name:{type:"IdentifierWrapper",isRequired:!0},visibility:{type:"MoveFunctionVisibility",isRequired:!0},is_entry:{type:"boolean",description:"Whether the function can be called as an entry function directly in a transaction",isRequired:!0},generic_type_params:{type:"array",contains:{type:"MoveFunctionGenericTypeParam"},isRequired:!0},params:{type:"array",contains:{type:"MoveType"},isRequired:!0},return:{type:"array",contains:{type:"MoveType"},isRequired:!0}}},c7={description:"Move function generic type param",properties:{constraints:{type:"array",contains:{type:"MoveAbility"},isRequired:!0}}},d7={type:"Enum"},u7={description:"A Move module",properties:{address:{type:"Address",isRequired:!0},name:{type:"IdentifierWrapper",isRequired:!0},friends:{type:"array",contains:{type:"MoveModuleId"},isRequired:!0},exposed_functions:{type:"array",contains:{type:"MoveFunction"},isRequired:!0},structs:{type:"array",contains:{type:"MoveStruct"},isRequired:!0}}},l7={description:"Move module bytecode along with it's ABI",properties:{bytecode:{type:"HexEncodedBytes",isRequired:!0},abi:{type:"MoveModule"}}},f7={type:"string",description:`Move module id is a string representation of Move module.

    Format: \`{address}::{module name}\`

    \`address\` should be hex-encoded 32 byte account address that is prefixed with \`0x\`.

    Module name is case-sensitive.
    `},h7={description:"A parsed Move resource",properties:{type:{type:"MoveStructTag",isRequired:!0},data:{type:"MoveStructValue",isRequired:!0}}},p7={description:"Move script bytecode",properties:{bytecode:{type:"HexEncodedBytes",isRequired:!0},abi:{type:"MoveFunction"}}},g7={description:"A move struct",properties:{name:{type:"IdentifierWrapper",isRequired:!0},is_native:{type:"boolean",description:"Whether the struct is a native struct of Move",isRequired:!0},abilities:{type:"array",contains:{type:"MoveAbility"},isRequired:!0},generic_type_params:{type:"array",contains:{type:"MoveStructGenericTypeParam"},isRequired:!0},fields:{type:"array",contains:{type:"MoveStructField"},isRequired:!0}}},m7={description:"Move struct field",properties:{name:{type:"IdentifierWrapper",isRequired:!0},type:{type:"MoveType",isRequired:!0}}},_7={description:"Move generic type param",properties:{constraints:{type:"array",contains:{type:"MoveAbility"},isRequired:!0}}},b7={type:"string",description:"String representation of a MoveStructTag (on-chain Move struct type). This exists so you\n    can specify MoveStructTags as path / query parameters, e.g. for get_events_by_event_handle.\n\n    It is a combination of:\n    1. `move_module_address`, `module_name` and `struct_name`, all joined by `::`\n    2. `struct generic type parameters` joined by `, `\n\n    Examples:\n     * `0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>`\n     * `0x1::account::Account`\n\n    Note:\n    1. Empty chars should be ignored when comparing 2 struct tag ids.\n    2. When used in an URL path, should be encoded by url-encoding (AKA percent-encoding).\n\n    See [doc](https://aptos.dev/concepts/accounts) for more details.\n    ",pattern:"^0x[0-9a-zA-Z:_<>]+$"},y7={description:'This is a JSON representation of some data within an account resource. More specifically,\n    it is a map of strings to arbitrary JSON values / objects, where the keys are top level\n    fields within the given resource.\n\n    To clarify, you might query for 0x1::account::Account and see the example data.\n\n    Move `bool` type value is serialized into `boolean`.\n\n    Move `u8`, `u16` and `u32` type value is serialized into `integer`.\n\n    Move `u64`, `u128` and `u256` type value is serialized into `string`.\n\n    Move `address` type value (32 byte Aptos account address) is serialized into a HexEncodedBytes string.\n    For example:\n    - `0x1`\n    - `0x1668f6be25668c1a17cd8caf6b8d2f25`\n\n    Move `vector` type value is serialized into `array`, except `vector<u8>` which is serialized into a\n    HexEncodedBytes string with `0x` prefix.\n    For example:\n    - `vector<u64>{255, 255}` => `["255", "255"]`\n    - `vector<u8>{255, 255}` => `0xffff`\n\n    Move `struct` type value is serialized into `object` that looks like this (except some Move stdlib types, see the following section):\n    ```json\n    {\n        field1_name: field1_value,\n        field2_name: field2_value,\n        ......\n    }\n    ```\n\n    For example:\n    `{ "created": "0xa550c18", "role_id": "0" }`\n\n     **Special serialization for Move stdlib types**:\n    - [0x1::string::String](https://github.com/aptos-labs/aptos-core/blob/main/language/move-stdlib/docs/ascii.md)\n    is serialized into `string`. For example, struct value `0x1::string::String{bytes: b"Hello World!"}`\n    is serialized as `"Hello World!"` in JSON.\n    ',properties:{}},w7={type:"string",description:`String representation of an on-chain Move type tag that is exposed in transaction payload.
    Values:
    - bool
    - u8
    - u16
    - u32
    - u64
    - u128
    - u256
    - address
    - signer
    - vector: \`vector<{non-reference MoveTypeId}>\`
    - struct: \`{address}::{module_name}::{struct_name}::<{generic types}>\`

    Vector type value examples:
    - \`vector<u8>\`
    - \`vector<vector<u64>>\`
    - \`vector<0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>>\`

    Struct type value examples:
    - \`0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>
    - \`0x1::account::Account\`

    Note:
    1. Empty chars should be ignored when comparing 2 struct tag ids.
    2. When used in an URL path, should be encoded by url-encoding (AKA percent-encoding).
    `,pattern:"^(bool|u8|u64|u128|address|signer|vector<.+>|0x[0-9a-zA-Z:_<, >]+)$"},v7={type:"any-of",description:"An enum of the possible Move value types",contains:[{type:"number",format:"uint8"},{type:"number",format:"uint16"},{type:"number",format:"uint32"},{type:"U64"},{type:"U128"},{type:"U256"},{type:"boolean"},{type:"Address"},{type:"array",contains:{type:"MoveValue"}},{type:"HexEncodedBytes"},{type:"MoveStructValue"},{type:"string"}]},x7={description:`Multi agent signature for multi agent transactions

    This allows you to have transactions across multiple accounts`,properties:{sender:{type:"AccountSignature",isRequired:!0},secondary_signer_addresses:{type:"array",contains:{type:"Address"},isRequired:!0},secondary_signers:{type:"array",contains:{type:"AccountSignature"},isRequired:!0}}},T7={description:`A Ed25519 multi-sig signature

    This allows k-of-n signing for a transaction`,properties:{public_keys:{type:"array",contains:{type:"HexEncodedBytes"},isRequired:!0},signatures:{type:"array",contains:{type:"HexEncodedBytes"},isRequired:!0},threshold:{type:"number",description:"The number of signatures required for a successful transaction",isRequired:!0,format:"uint8"},bitmap:{type:"HexEncodedBytes",isRequired:!0}}},A7={description:`A multisig transaction that allows an owner of a multisig account to execute a pre-approved
    transaction as the multisig account.`,properties:{multisig_address:{type:"Address",isRequired:!0},transaction_payload:{type:"MultisigTransactionPayload"}}},k7={type:"any-of",contains:[{type:"EntryFunctionPayload"}]},S7={description:"A transaction waiting in mempool",properties:{hash:{type:"HashValue",isRequired:!0},sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature"}}},E7={description:"Table Item request for the GetTableItemRaw API",properties:{key:{type:"HexEncodedBytes",isRequired:!0}}},P7={type:"Enum"},C7={description:"Payload which runs a script that can run multiple functions",properties:{code:{type:"MoveScriptBytecode",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},I7={properties:{execute_as:{type:"Address",isRequired:!0},script:{type:"ScriptPayload",isRequired:!0}}},B7={description:"A state checkpoint transaction",properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},O7={type:"string",description:`Representation of a StateKey as a hex string. This is used for cursor based pagination.
    `},$7={description:`A request to submit a transaction

    This requires a transaction and a signature of it`,properties:{sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature",isRequired:!0}}},R7={description:"Table Item request for the GetTableItem API",properties:{key_type:{type:"MoveType",isRequired:!0},value_type:{type:"MoveType",isRequired:!0},key:{description:"The value of the table item's key",properties:{},isRequired:!0}}},U7={type:"one-of",description:"Enum of the different types of transactions in Aptos",contains:[{type:"Transaction_PendingTransaction"},{type:"Transaction_UserTransaction"},{type:"Transaction_GenesisTransaction"},{type:"Transaction_BlockMetadataTransaction"},{type:"Transaction_StateCheckpointTransaction"}]},M7={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"BlockMetadataTransaction"}]},D7={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"GenesisTransaction"}]},j7={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"PendingTransaction"}]},q7={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"StateCheckpointTransaction"}]},L7={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"UserTransaction"}]},N7={type:"one-of",description:"An enum of the possible transaction payloads",contains:[{type:"TransactionPayload_EntryFunctionPayload"},{type:"TransactionPayload_ScriptPayload"},{type:"TransactionPayload_ModuleBundlePayload"},{type:"TransactionPayload_MultisigPayload"}]},F7={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"EntryFunctionPayload"}]},z7={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ModuleBundlePayload"}]},H7={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultisigPayload"}]},K7={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ScriptPayload"}]},W7={description:"Information telling which batch submission transactions failed",properties:{error:{type:"AptosError",isRequired:!0},transaction_index:{type:"number",description:"The index of which transaction failed, same as submission order",isRequired:!0,format:"uint64"}}},G7={description:`Batch transaction submission result

    Tells which transactions failed`,properties:{transaction_failures:{type:"array",contains:{type:"TransactionsBatchSingleSubmissionFailure"},isRequired:!0}}},V7={type:"one-of",description:"An enum representing the different transaction signatures available",contains:[{type:"TransactionSignature_Ed25519Signature"},{type:"TransactionSignature_MultiEd25519Signature"},{type:"TransactionSignature_MultiAgentSignature"}]},X7={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"Ed25519Signature"}]},J7={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiAgentSignature"}]},Z7={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiEd25519Signature"}]},Y7={type:"string",description:`A string containing a 128-bit unsigned integer.

    We represent u128 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u128s in JSON natively.
    `,format:"uint128"},Q7={type:"string",description:`A string containing a 256-bit unsigned integer.

    We represent u256 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u256s in JSON natively.
    `,format:"uint256"},e9={type:"string",description:`A string containing a 64-bit unsigned integer.

    We represent u64 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u64s in JSON natively.
    `,format:"uint64"},t9={description:"A transaction submitted by a user to change the state of the blockchain",properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature"},events:{type:"array",contains:{type:"Event"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},n9={description:"An event from a transaction with a version",properties:{version:{type:"U64",isRequired:!0},guid:{type:"EventGuid",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},type:{type:"MoveType",isRequired:!0},data:{description:"The JSON representation of the event",properties:{},isRequired:!0}}},i9={description:"View request for the Move View Function API",properties:{function:{type:"EntryFunctionId",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},s9={description:"Write a new module or update an existing one",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},data:{type:"MoveModuleBytecode",isRequired:!0}}},r9={description:"Write a resource or update an existing one",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},data:{type:"MoveResource",isRequired:!0}}},o9={type:"one-of",description:"The associated writeset with a payload",contains:[{type:"WriteSet_ScriptWriteSet"},{type:"WriteSet_DirectWriteSet"}]},a9={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DirectWriteSet"}]},c9={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ScriptWriteSet"}]},d9={type:"one-of",description:"A final state change of a transaction on a resource or module",contains:[{type:"WriteSetChange_DeleteModule"},{type:"WriteSetChange_DeleteResource"},{type:"WriteSetChange_DeleteTableItem"},{type:"WriteSetChange_WriteModule"},{type:"WriteSetChange_WriteResource"},{type:"WriteSetChange_WriteTableItem"}]},u9={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteModule"}]},l9={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteResource"}]},f9={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteTableItem"}]},h9={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteModule"}]},p9={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteResource"}]},g9={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteTableItem"}]},m9={description:"A writeset payload, used only for genesis",properties:{write_set:{type:"WriteSet",isRequired:!0}}},_9={description:"Change set to write a table item",properties:{state_key_hash:{type:"string",isRequired:!0},handle:{type:"HexEncodedBytes",isRequired:!0},key:{type:"HexEncodedBytes",isRequired:!0},value:{type:"HexEncodedBytes",isRequired:!0},data:{type:"DecodedTableData"}}},b9=new wc(qn.fromHex("0x1"),new qi("string"),new qi("String"),[]);function mh(e,t,n){if(!(t!=null&&t.includes(typeof e)))throw new Error(n||`Invalid arg: ${e} type should be ${t instanceof Array?t.join(" or "):t}`)}function Mo(e){throw new Error(e)}function ab(e){return!!e.match(/\s/)}function cb(e){return!!e.match(/[_A-Za-z0-9]/g)}function y9(e,t){const n=e[t];if(n===":"){if(e.slice(t,t+2)==="::")return[["COLON","::"],2];Mo("Unrecognized token.")}else{if(n==="<")return[["LT","<"],1];if(n===">")return[["GT",">"],1];if(n===",")return[["COMMA",","],1];if(ab(n)){let i="";for(let s=t;s<e.length;s+=1){const r=e[s];if(ab(r))i=`${i}${r}`;else break}return[["SPACE",i],i.length]}else if(cb(n)){let i="";for(let s=t;s<e.length;s+=1){const r=e[s];if(cb(r))i=`${i}${r}`;else break}return[["IDENT",i],i.length]}}throw new Error("Unrecognized token.")}function w9(e){let t=0;const n=[];for(;t<e.length;){const[i,s]=y9(e,t);i[0]!=="SPACE"&&n.push(i),t+=s}return n}var _h=class{constructor(e){this.tokens=w9(e)}consume(e){const t=this.tokens.shift();(!t||t[1]!==e)&&Mo("Invalid type tag.")}parseCommaList(e,t){const n=[];for(this.tokens.length<=0&&Mo("Invalid type tag.");this.tokens[0][1]!==e&&(n.push(this.parseTypeTag()),!(this.tokens.length>0&&this.tokens[0][1]===e||(this.consume(","),this.tokens.length>0&&this.tokens[0][1]===e&&t)));)this.tokens.length<=0&&Mo("Invalid type tag.");return n}parseTypeTag(){this.tokens.length===0&&Mo("Invalid type tag.");const[e,t]=this.tokens.shift();if(t==="u8")return new Dr;if(t==="u16")return new Mc;if(t==="u32")return new Dc;if(t==="u64")return new wa;if(t==="u128")return new va;if(t==="u256")return new jc;if(t==="bool")return new ya;if(t==="address")return new xa;if(t==="vector"){this.consume("<");const n=this.parseTypeTag();return this.consume(">"),new qc(n)}if(e==="IDENT"&&(t.startsWith("0x")||t.startsWith("0X"))){const n=t;this.consume("::");const[i,s]=this.tokens.shift();i!=="IDENT"&&Mo("Invalid type tag."),this.consume("::");const[r,o]=this.tokens.shift();r!=="IDENT"&&Mo("Invalid type tag.");let a=[];this.tokens.length>0&&this.tokens[0][1]==="<"&&(this.consume("<"),a=this.parseCommaList(">",!0),this.consume(">"));const c=new wc(qn.fromHex(n),new qi(s),new qi(o),a);return new Ta(c)}throw new Error("Invalid type tag.")}};function v6(e){if(mh(e,["boolean","string"]),typeof e=="boolean")return e;if(e==="true")return!0;if(e==="false")return!1;throw new Error("Invalid boolean string.")}function Ya(e){if(mh(e,["number","string"]),typeof e=="number")return e;const t=Number.parseInt(e,10);if(Number.isNaN(t))throw new Error("Invalid number string.");return t}function Qa(e){return mh(e,["number","bigint","string"]),BigInt(e)}function Wg(e,t,n){if(t instanceof ya){n.serializeBool(v6(e));return}if(t instanceof Dr){n.serializeU8(Ya(e));return}if(t instanceof Mc){n.serializeU16(Ya(e));return}if(t instanceof Dc){n.serializeU32(Ya(e));return}if(t instanceof wa){n.serializeU64(Qa(e));return}if(t instanceof va){n.serializeU128(Qa(e));return}if(t instanceof jc){n.serializeU256(Qa(e));return}if(t instanceof xa){let i;if(typeof e=="string"||e instanceof Dt)i=qn.fromHex(e);else if(e instanceof qn)i=e;else throw new Error("Invalid account address.");i.serialize(n);return}if(t instanceof qc){if(t.value instanceof Dr){if(e instanceof Uint8Array){n.serializeBytes(e);return}if(typeof e=="string"){n.serializeStr(e);return}}if(!Array.isArray(e))throw new Error("Invalid vector args.");n.serializeU32AsUleb128(e.length),e.forEach(i=>Wg(i,t.value,n));return}if(t instanceof Ta){const{address:i,module_name:s,name:r}=t.value;if(`${Dt.fromUint8Array(i.address).toShortString()}::${s.value}::${r.value}`!="0x1::string::String")throw new Error("The only supported struct arg is of type 0x1::string::String");mh(e,["string"]),n.serializeStr(e);return}throw new Error("Unsupported arg type.")}function v9(e,t){if(t instanceof ya)return new fh(v6(e));if(t instanceof Dr)return new ah(Ya(e));if(t instanceof Mc)return new ch(Ya(e));if(t instanceof Dc)return new dh(Ya(e));if(t instanceof wa)return new vc(Qa(e));if(t instanceof va)return new uh(Qa(e));if(t instanceof jc)return new lh(Qa(e));if(t instanceof xa){let n;if(typeof e=="string"||e instanceof Dt)n=qn.fromHex(e);else if(e instanceof qn)n=e;else throw new Error("Invalid account address.");return new xc(n)}if(t instanceof qc&&t.value instanceof Dr){if(!(e instanceof Uint8Array))throw new Error(`${e} should be an instance of Uint8Array`);return new Tc(e)}throw new Error("Unknown type for TransactionArgument.")}var x9="APTOS::RawTransaction",T9="APTOS::RawTransactionWithData",Sc=class{constructor(e,t){this.rawTxnBuilder=t,this.signingFunction=e}build(e,t,n){if(!this.rawTxnBuilder)throw new Error("this.rawTxnBuilder doesn't exist.");return this.rawTxnBuilder.build(e,t,n)}static getSigningMessage(e){const t=mc.create();if(e instanceof Lc)t.update(x9);else if(e instanceof sh)t.update(T9);else throw new Error("Unknown transaction type.");const n=t.digest(),i=Lr(e),s=new Uint8Array(n.length+i.length);return s.set(n),s.set(i,n.length),s}},nl=class extends Sc{constructor(e,t,n){super(e,n),this.publicKey=t}rawToSigned(e){const t=Sc.getSigningMessage(e),n=this.signingFunction(t),i=new nh(new gs(this.publicKey),n);return new ru(e,i)}sign(e){return Lr(this.rawToSigned(e))}},A9=class extends Sc{constructor(e,t){super(e),this.publicKey=t}rawToSigned(e){const t=Sc.getSigningMessage(e),n=this.signingFunction(t),i=new ih(this.publicKey,n);return new ru(e,i)}sign(e){return Lr(this.rawToSigned(e))}},Cl=class{constructor(e,t){this.abiMap=new Map,e.forEach(n=>{const i=new Mg(n),s=hh.deserialize(i);let r;if(s instanceof Ac){const o=s,{address:a,name:c}=o.module_name;r=`${Dt.fromUint8Array(a.address).toShortString()}::${c.value}::${o.name}`}else r=s.name;if(this.abiMap.has(r))throw new Error("Found conflicting ABI interfaces");this.abiMap.set(r,s)}),this.builderConfig={maxGasAmount:BigInt(Zv),expSecFromNow:Yv,...t}}static toBCSArgs(e,t){if(e.length!==t.length)throw new Error("Wrong number of args provided.");return t.map((n,i)=>{const s=new Wn;return Wg(n,e[i].type_tag,s),s.getBytes()})}static toTransactionArguments(e,t){if(e.length!==t.length)throw new Error("Wrong number of args provided.");return t.map((n,i)=>v9(n,e[i].type_tag))}setSequenceNumber(e){this.builderConfig.sequenceNumber=BigInt(e)}buildTransactionPayload(e,t,n){const i=t.map(o=>new _h(o).parseTypeTag());let s;if(!this.abiMap.has(e))throw new Error(`Cannot find function: ${e}`);const r=this.abiMap.get(e);if(r instanceof Ac){const o=r,a=Cl.toBCSArgs(o.args,n);s=new rh(new Yo(o.module_name,new qi(o.name),i,a))}else if(r instanceof ph){const o=r,a=Cl.toTransactionArguments(o.args,n);s=new au(new su(o.code,i,a))}else throw new Error("Unknown ABI format.");return s}build(e,t,n){const{sender:i,sequenceNumber:s,gasUnitPrice:r,maxGasAmount:o,expSecFromNow:a,chainId:c}=this.builderConfig;if(!r)throw new Error("No gasUnitPrice provided.");const d=i instanceof qn?i:qn.fromHex(i),u=BigInt(Math.floor(Date.now()/1e3)+Number(a)),l=this.buildTransactionPayload(e,t,n);if(l)return new Lc(d,BigInt(s),l,BigInt(o),BigInt(r),u,new oh(Number(c)));throw new Error("Invalid ABI.")}},x6=class{constructor(e,t){this.aptosClient=e,this.builderConfig=t}async fetchABI(e){const n=(await this.aptosClient.getAccountModules(e)).map(s=>s.abi).flatMap(s=>s.exposed_functions.filter(r=>r.is_entry).map(r=>({fullName:`${s.address}::${s.name}::${r.name}`,...r}))),i=new Map;return n.forEach(s=>{i.set(s.fullName,s)}),i}async build(e,t,n){if(e=(T=>T.replace(/^0[xX]0*/g,"0x"))(e),e.split("::").length!==3)throw new Error("'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coins::transfer");const[r,o]=e.split("::"),a=await this.fetchABI(r);if(!a.has(e))throw new Error(`${e} doesn't exist.`);const c=a.get(e),u=c.params.filter(T=>T!=="signer"&&T!=="&signer").map((T,S)=>new du(`var${S}`,new _h(T).parseTypeTag())),l=new Ac(c.name,ia.fromStr(`${r}::${o}`),"",c.generic_type_params.map((T,S)=>new cu(`${S}`)),u),{sender:f,...p}=this.builderConfig,m=f instanceof qn?Dt.fromUint8Array(f.address):f,[{sequence_number:_},x,{gas_estimate:C}]=await Promise.all([p!=null&&p.sequenceNumber?Promise.resolve({sequence_number:p==null?void 0:p.sequenceNumber}):this.aptosClient.getAccount(m),p!=null&&p.chainId?Promise.resolve(p==null?void 0:p.chainId):this.aptosClient.getChainId(),p!=null&&p.gasUnitPrice?Promise.resolve({gas_estimate:p==null?void 0:p.gasUnitPrice}):this.aptosClient.estimateGasPrice()]);return new Cl([Lr(l)],{sender:f,sequenceNumber:_,chainId:x,gasUnitPrice:BigInt(C),...p}).build(e,t,n)}};vn([K8(10*60*1e3)],x6.prototype,"fetchABI",1);var sd=class{constructor(e,t,n=!1){if(!e)throw new Error("Node URL cannot be empty.");const i=t==null?{}:{...t};n?this.nodeUrl=e:this.nodeUrl=F8(e),i.BASE=this.nodeUrl,(t==null?void 0:t.WITH_CREDENTIALS)===!1?i.WITH_CREDENTIALS=!1:i.WITH_CREDENTIALS=!0,this.client=new _6(i)}async getAccount(e){return this.client.accounts.getAccount(Dt.ensure(e).hex())}async getAccountTransactions(e,t){var n;return this.client.transactions.getAccountTransactions(Dt.ensure(e).hex(),(n=t==null?void 0:t.start)==null?void 0:n.toString(),t==null?void 0:t.limit)}async getAccountModules(e,t){const n=this.client.accounts.getAccountModules.bind({httpRequest:this.client.request});return await ob(n,e,1e3,t)}async getAccountModule(e,t,n){var i;return this.client.accounts.getAccountModule(Dt.ensure(e).hex(),t,(i=n==null?void 0:n.ledgerVersion)==null?void 0:i.toString())}async getAccountResources(e,t){const n=this.client.accounts.getAccountResources.bind({httpRequest:this.client.request});return await ob(n,e,9999,t)}async getAccountResource(e,t,n){var i;return this.client.accounts.getAccountResource(Dt.ensure(e).hex(),t,(i=n==null?void 0:n.ledgerVersion)==null?void 0:i.toString())}static generateBCSTransaction(e,t){return new nl(i=>{const s=e.signBuffer(i);return new F.Ed25519Signature(s.toUint8Array())},e.pubKey().toUint8Array()).sign(t)}static generateBCSSimulation(e,t){return new nl(i=>{const s=new Uint8Array(64);return new F.Ed25519Signature(s)},e.pubKey().toUint8Array()).sign(t)}async generateTransaction(e,t,n){const i={sender:e};if(n!=null&&n.sequence_number&&(i.sequenceNumber=n.sequence_number),n!=null&&n.gas_unit_price&&(i.gasUnitPrice=n.gas_unit_price),n!=null&&n.max_gas_amount&&(i.maxGasAmount=n.max_gas_amount),n!=null&&n.expiration_timestamp_secs){const r=Number.parseInt(n.expiration_timestamp_secs,10);i.expSecFromNow=r-Math.floor(Date.now()/1e3)}return new x6(this,i).build(t.function,t.type_arguments,t.arguments)}async signTransaction(e,t){return Promise.resolve(sd.generateBCSTransaction(e,t))}async getEventsByCreationNumber(e,t,n){var i;return this.client.events.getEventsByCreationNumber(Dt.ensure(e).hex(),t.toString(),(i=n==null?void 0:n.start)==null?void 0:i.toString(),n==null?void 0:n.limit)}async getEventsByEventHandle(e,t,n,i){var s;return this.client.events.getEventsByEventHandle(Dt.ensure(e).hex(),t,n,(s=i==null?void 0:i.start)==null?void 0:s.toString(),i==null?void 0:i.limit)}async submitTransaction(e){return this.submitSignedBCSTransaction(e)}async simulateTransaction(e,t,n){let i;return e instanceof Bd?i=sd.generateBCSSimulation(e,t):e instanceof nu?i=new A9(()=>{const{threshold:r}=e,o=[],a=[];for(let d=0;d<r;d+=1)o.push(d),a.push(new F.Ed25519Signature(new Uint8Array(64)));const c=F.MultiEd25519Signature.createBitmap(o);return new F.MultiEd25519Signature(a,c)},e).sign(t):i=new nl(()=>{const r=new Uint8Array(64);return new F.Ed25519Signature(r)},e.toBytes()).sign(t),this.submitBCSSimulation(i,n)}async submitSignedBCSTransaction(e){return this.client.request.request({url:"/transactions",method:"POST",body:e,mediaType:"application/x.aptos.signed_transaction+bcs"})}async submitBCSSimulation(e,t){var n,i,s;const r={estimate_gas_unit_price:(n=t==null?void 0:t.estimateGasUnitPrice)!=null?n:!1,estimate_max_gas_amount:(i=t==null?void 0:t.estimateMaxGasAmount)!=null?i:!1,estimate_prioritized_gas_unit_price:(s=t==null?void 0:t.estimatePrioritizedGasUnitPrice)!=null?s:!1};return this.client.request.request({url:"/transactions/simulate",query:r,method:"POST",body:e,mediaType:"application/x.aptos.signed_transaction+bcs"})}async getTransactions(e){var t;return this.client.transactions.getTransactions((t=e==null?void 0:e.start)==null?void 0:t.toString(),e==null?void 0:e.limit)}async getTransactionByHash(e){return this.client.transactions.getTransactionByHash(e)}async getTransactionByVersion(e){return this.client.transactions.getTransactionByVersion(e.toString())}async transactionPending(e){try{return(await this.client.transactions.getTransactionByHash(e)).type==="pending_transaction"}catch(t){if((t==null?void 0:t.status)===404)return!0;throw t}}async waitForTransactionWithResult(e,t){var n,i;const s=(n=t==null?void 0:t.timeoutSecs)!=null?n:z8,r=(i=t==null?void 0:t.checkSuccess)!=null?i:!1;let o=!0,a=0,c;for(;o&&!(a>=s);){try{if(c=await this.client.transactions.getTransactionByHash(e),o=c.type==="pending_transaction",!o)break}catch(d){const u=d instanceof Od,l=u&&d.status!==404&&d.status>=400&&d.status<500;if(!u||l)throw d}await N8(1e3),a+=1}if(c===void 0)throw new Error(`Waiting for transaction ${e} failed`);if(o)throw new S9(`Waiting for transaction ${e} timed out after ${s} seconds`,c);if(!r)return c;if(!(c!=null&&c.success))throw new E9(`Transaction ${e} committed to the blockchain but execution failed`,c);return c}async waitForTransaction(e,t){await this.waitForTransactionWithResult(e,t)}async getLedgerInfo(){return this.client.general.getLedgerInfo()}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getTableItem(e,t,n){var i;return await this.client.tables.getTableItem(e,t,(i=n==null?void 0:n.ledgerVersion)==null?void 0:i.toString())}async generateRawTransaction(e,t,n){const[{sequence_number:i},s,{gas_estimate:r}]=await Promise.all([this.getAccount(e),this.getChainId(),n!=null&&n.gasUnitPrice?Promise.resolve({gas_estimate:n.gasUnitPrice}):this.estimateGasPrice()]),{maxGasAmount:o,gasUnitPrice:a,expireTimestamp:c}={maxGasAmount:BigInt(Zv),gasUnitPrice:BigInt(r),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+Yv),...n};return new F.RawTransaction(F.AccountAddress.fromHex(e),BigInt(i),t,o,a,c,new F.ChainId(s))}async generateSignSubmitTransaction(e,t,n){const i=await this.generateRawTransaction(e.address(),t,n),s=sd.generateBCSTransaction(e,i);return(await this.submitSignedBCSTransaction(s)).hash}async publishPackage(e,t,n,i){const s=new Wn;rs(n,s);const r=new F.TransactionPayloadEntryFunction(F.EntryFunction.natural("0x1::code","publish_package_txn",[],[Ua(t),s.getBytes()]));return this.generateSignSubmitTransaction(e,r,i)}async generateSignSubmitWaitForTransaction(e,t,n){const i=await this.generateSignSubmitTransaction(e,t,n);return this.waitForTransactionWithResult(i,n)}async estimateGasPrice(){return this.client.transactions.estimateGasPrice()}async estimateMaxGasAmount(e){const t=`0x1::coin::CoinStore<${H8}>`,[{gas_estimate:n},i]=await Promise.all([this.estimateGasPrice(),this.getAccountResources(e)]),s=i.find(o=>o.type===t);return BigInt(s.data.coin.value)/BigInt(n)}async rotateAuthKeyEd25519(e,t,n){const{sequence_number:i,authentication_key:s}=await this.getAccount(e.address()),r=new Bd(t),o=new F.RotationProofChallenge(F.AccountAddress.CORE_CODE_ADDRESS,"account","RotationProofChallenge",BigInt(i),F.AccountAddress.fromHex(e.address()),new F.AccountAddress(new Dt(s).toUint8Array()),r.pubKey().toUint8Array()),a=Dt.fromUint8Array(Lr(o)),c=e.signHexString(a),d=r.signHexString(a),u=new F.TransactionPayloadEntryFunction(F.EntryFunction.natural("0x1::account","rotate_authentication_key",[],[cp(0),Ua(e.pubKey().toUint8Array()),cp(0),Ua(r.pubKey().toUint8Array()),Ua(c.toUint8Array()),Ua(d.toUint8Array())])),l=await this.generateRawTransaction(e.address(),u,n),f=sd.generateBCSTransaction(e,l);return this.submitSignedBCSTransaction(f)}async lookupOriginalAddress(e){const t=await this.getAccountResource("0x1","0x1::account::OriginatingAddress"),{address_map:{handle:n}}=t.data,i=await this.getTableItem(n,{key_type:"address",value_type:"address",key:Dt.ensure(e).hex()});return new Dt(i)}async getBlockByHeight(e,t){return this.client.blocks.getBlockByHeight(e,t)}async getBlockByVersion(e,t){return this.client.blocks.getBlockByVersion(e,t)}async view(e,t){return this.client.view.view(e,t)}clearCache(e){W8(e)}},bn=sd;vn([Yn],bn.prototype,"getAccount",1);vn([Yn],bn.prototype,"getAccountTransactions",1);vn([Yn],bn.prototype,"getAccountModules",1);vn([Yn],bn.prototype,"getAccountModule",1);vn([Yn],bn.prototype,"getAccountResources",1);vn([Yn],bn.prototype,"getAccountResource",1);vn([Yn],bn.prototype,"getEventsByCreationNumber",1);vn([Yn],bn.prototype,"getEventsByEventHandle",1);vn([Yn],bn.prototype,"submitSignedBCSTransaction",1);vn([Yn],bn.prototype,"submitBCSSimulation",1);vn([Yn],bn.prototype,"getTransactions",1);vn([Yn],bn.prototype,"getTransactionByHash",1);vn([Yn],bn.prototype,"getTransactionByVersion",1);vn([Yn],bn.prototype,"getLedgerInfo",1);vn([eh()],bn.prototype,"getChainId",1);vn([Yn],bn.prototype,"getTableItem",1);vn([Yn,eh({ttlMs:5*60*1e3,tags:["gas_estimates"]})],bn.prototype,"estimateGasPrice",1);vn([Yn],bn.prototype,"estimateMaxGasAmount",1);vn([Yn],bn.prototype,"getBlockByHeight",1);vn([Yn],bn.prototype,"getBlockByVersion",1);vn([Yn],bn.prototype,"view",1);var k9=class extends Error{constructor(e,t,n,i){super(t),this.status=e,this.message=t,this.errorCode=n,this.vmErrorCode=i}},S9=class extends Error{constructor(e,t){super(e),this.lastSubmittedTransaction=t}},E9=class extends Error{constructor(e,t){super(e),this.transaction=t}};function Yn(e,t,n){const i=n.value;return n.value=async function(...r){var o,a;try{return await i.apply(this,[...r])}catch(c){throw c instanceof Od?new k9(c.status,JSON.stringify({message:c.message,...c.body}),(o=c.body)==null?void 0:o.error_code,(a=c.body)==null?void 0:a.vm_error_code):c}},n}var T6=class{constructor(e,t,n=!1){let i=null,s=null;if(typeof e=="object"&&P9(e)?(i=e.fullnodeUrl,s=e.indexerUrl):(i=V8[e],s=G8[e]),!i||!s)throw new Error("network is not provided");this.aptosClient=new bn(i,t,n),this.indexerClient=new i6(s)}};function A6(e,t,n){Object.getOwnPropertyNames(t.prototype).forEach(i=>{const s=Object.getOwnPropertyDescriptor(t.prototype,i);s&&(s.value=function(...r){return this[n][i](...r)},Object.defineProperty(e.prototype,i,s))})}A6(T6,bn,"aptosClient");A6(T6,i6,"indexerClient");function P9(e){return e.fullnodeUrl!==void 0&&typeof e.fullnodeUrl=="string"&&e.indexerUrl!==void 0&&typeof e.indexerUrl=="string"}var C9="a11ceb0b0500000006010004020408030c0a05161d073339086c400000010100020700010307000104030100010504020007060c0508000800030503010801000405080008000304060c0801050306737472696e6705746f6b656e06537472696e6707546f6b656e4964136372656174655f746f6b656e5f69645f726177087472616e73666572000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000030000010c0b010b020b030b0411000c070b000b070b050b06110102",I9=["01186372656174655F636F6C6C656374696F6E5F736372697074000000000000000000000000000000000000000000000000000000000000000305746F6B656E3020637265617465206120656D70747920746F6B656E20636F6C6C656374696F6E207769746820706172616D65746572730005046E616D6507000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67000B6465736372697074696F6E07000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67000375726907000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E6700076D6178696D756D020E6D75746174655F73657474696E670600","01136372656174655F746F6B656E5F736372697074000000000000000000000000000000000000000000000000000000000000000305746F6B656E1D2063726561746520746F6B656E20776974682072617720696E70757473000D0A636F6C6C656374696F6E07000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E6700046E616D6507000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67000B6465736372697074696F6E07000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67000762616C616E636502076D6178696D756D020375726907000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E670015726F79616C74795F70617965655F61646472657373041A726F79616C74795F706F696E74735F64656E6F6D696E61746F720218726F79616C74795F706F696E74735F6E756D657261746F72020E6D75746174655F73657474696E6706000D70726F70657274795F6B6579730607000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67000F70726F70657274795F76616C7565730606010E70726F70657274795F74797065730607000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E6700","01166469726563745f7472616e736665725f736372697074000000000000000000000000000000000000000000000000000000000000000305746f6b656e0000051063726561746f72735f61646472657373040a636f6c6c656374696f6e07000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e6700046e616d6507000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e67001070726f70657274795f76657273696f6e0206616d6f756e7402","010C6F666665725F73637269707400000000000000000000000000000000000000000000000000000000000000030F746F6B656E5F7472616E7366657273000006087265636569766572040763726561746F72040A636F6C6C656374696F6E07000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E6700046E616D6507000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67001070726F70657274795F76657273696F6E0206616D6F756E7402","010C636C61696D5F73637269707400000000000000000000000000000000000000000000000000000000000000030F746F6B656E5F7472616E73666572730000050673656E646572040763726561746F72040A636F6C6C656374696F6E07000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E6700046E616D6507000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67001070726F70657274795F76657273696F6E02","011363616E63656C5F6F666665725F73637269707400000000000000000000000000000000000000000000000000000000000000030F746F6B656E5F7472616E7366657273000005087265636569766572040763726561746F72040A636F6C6C656374696F6E07000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E6700046E616D6507000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67001070726F70657274795F76657273696F6E02","01176d75746174655f746f6b656e5f70726f70657274696573000000000000000000000000000000000000000000000000000000000000000305746f6b656eba02206d75746174652074686520746f6b656e2070726f706572747920616e64207361766520746865206e65772070726f706572747920696e20546f6b656e53746f72650a2069662074686520746f6b656e2070726f70657274795f76657273696f6e20697320302c2077652077696c6c206372656174652061206e65772070726f70657274795f76657273696f6e2070657220746f6b656e20746f2067656e65726174652061206e657720746f6b656e5f69642070657220746f6b656e0a2069662074686520746f6b656e2070726f70657274795f76657273696f6e206973206e6f7420302c2077652077696c6c206a75737420757064617465207468652070726f70657274794d617020616e642075736520746865206578697374696e6720746f6b656e5f6964202870726f70657274795f76657273696f6e2900090b746f6b656e5f6f776e6572040763726561746f72040f636f6c6c656374696f6e5f6e616d6507000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e67000a746f6b656e5f6e616d6507000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e670016746f6b656e5f70726f70657274795f76657273696f6e0206616d6f756e7402046b6579730607000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e67000676616c7565730606010574797065730607000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e6700","01166f70745f696e5f6469726563745f7472616e73666572000000000000000000000000000000000000000000000000000000000000000305746f6b656e000001066f70745f696e00","01046275726e000000000000000000000000000000000000000000000000000000000000000305746f6b656e20204275726e206120746f6b656e2062792074686520746f6b656e206f776e657200051063726561746f72735f61646472657373040a636f6c6c656374696f6e07000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e6700046e616d6507000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e67001070726f70657274795f76657273696f6e0206616d6f756e7402","010f6275726e5f62795f63726561746f72000000000000000000000000000000000000000000000000000000000000000305746f6b656e6a204275726e206120746f6b656e2062792063726561746f72207768656e2074686520746f6b656e2773204255524e41424c455f42595f43524541544f5220697320747275650a2054686520746f6b656e206973206f776e65642061742061646472657373206f776e65720005056f776e6572040a636f6c6c656374696f6e07000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e6700046e616d6507000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e67001070726f70657274795f76657273696f6e0206616d6f756e7402"],k6=class{constructor(e,t){this.type=e,this.value=t}},Gg=class{constructor(){this.data={}}setProperty(e,t){this.data[e]=t}};function S6(e){let t;return e==="string"||e==="String"?t=new Ta(b9):t=new _h(e).parseTypeTag(),t}function B9(e,t){if(e.length!==t.length)throw new Error("Length of property values and types not match");const n=new Array;return t.forEach((i,s)=>{try{const r=S6(i),o=new Wn;Wg(e[s],r,o),n.push(o.getBytes())}catch{n.push(new TextEncoder().encode(e[s]))}}),n}function E6(e){const t=e.map.data,n=new Gg;return t.forEach(i=>{const{key:s}=i,r=i.value.value,o=i.value.type,a=S6(o),c=O9(a,r),d=new k6(o,c);n.setProperty(s,d)}),n}function O9(e,t){const n=new Mg(new Dt(t).toUint8Array());let i="";return e instanceof Dr?i=n.deserializeU8().toString():e instanceof wa?i=n.deserializeU64().toString():e instanceof va?i=n.deserializeU128().toString():e instanceof ya?i=n.deserializeBool()?"true":"false":e instanceof xa?i=Dt.fromUint8Array(n.deserializeFixedBytes(32)).hex():e instanceof Ta&&e.isStringTypeTag()?i=n.deserializeStr():i=t,i}var $9={};Qf($9,{PropertyMap:()=>Gg,PropertyValue:()=>k6,Token:()=>C6,TokenData:()=>P6});var P6=class{constructor(e,t,n,i,s,r,o,a){this.collection=e,this.description=t,this.name=n,this.maximum=i,this.supply=s,this.uri=r,this.default_properties=E6(o),this.mutability_config=a}},C6=class{constructor(e,t,n){this.id=e,this.amount=t,this.token_properties=E6(n)}},R9=class{constructor(e){this.aptosClient=e,this.transactionBuilder=new Cl(I9.map(t=>new Dt(t).toUint8Array()))}async createCollection(e,t,n,i,s=_d,r){const o=this.transactionBuilder.buildTransactionPayload("0x3::token::create_collection_script",[],[t,n,i,s,[!1,!1,!1]]);return this.aptosClient.generateSignSubmitTransaction(e,o,r)}async createToken(e,t,n,i,s,r,o=_d,a=e.address(),c=0,d=0,u=[],l=[],f=[],p){const m=this.transactionBuilder.buildTransactionPayload("0x3::token::create_token_script",[],[t,n,i,s,o,r,a,c,d,[!1,!1,!1,!1,!1],u,B9(l,f),f]);return this.aptosClient.generateSignSubmitTransaction(e,m,p)}async createTokenWithMutabilityConfig(e,t,n,i,s,r,o=_d,a=e.address(),c=0,d=0,u=[],l=[],f=[],p=[!1,!1,!1,!1,!1],m){const _=this.transactionBuilder.buildTransactionPayload("0x3::token::create_token_script",[],[t,n,i,s,o,r,a,c,d,p,u,l,f]);return this.aptosClient.generateSignSubmitTransaction(e,_,m)}async offerToken(e,t,n,i,s,r,o=0,a){const c=this.transactionBuilder.buildTransactionPayload("0x3::token_transfers::offer_script",[],[t,n,i,s,o,r]);return this.aptosClient.generateSignSubmitTransaction(e,c,a)}async claimToken(e,t,n,i,s,r=0,o){const a=this.transactionBuilder.buildTransactionPayload("0x3::token_transfers::claim_script",[],[t,n,i,s,r]);return this.aptosClient.generateSignSubmitTransaction(e,a,o)}async cancelTokenOffer(e,t,n,i,s,r=0,o){const a=this.transactionBuilder.buildTransactionPayload("0x3::token_transfers::cancel_offer_script",[],[t,n,i,s,r]);return this.aptosClient.generateSignSubmitTransaction(e,a,o)}async directTransferToken(e,t,n,i,s,r,o=0,a){const c=this.transactionBuilder.buildTransactionPayload("0x3::token::direct_transfer_script",[],[n,i,s,o,r]),d=await this.aptosClient.generateRawTransaction(e.address(),c,a),u=new F.MultiAgentRawTransaction(d,[F.AccountAddress.fromHex(t.address())]),l=new F.Ed25519Signature(e.signBuffer(Sc.getSigningMessage(u)).toUint8Array()),f=new F.AccountAuthenticatorEd25519(new F.Ed25519PublicKey(e.signingKey.publicKey),l),p=new F.Ed25519Signature(t.signBuffer(Sc.getSigningMessage(u)).toUint8Array()),m=new F.AccountAuthenticatorEd25519(new F.Ed25519PublicKey(t.signingKey.publicKey),p),_=new F.TransactionAuthenticatorMultiAgent(f,[F.AccountAddress.fromHex(t.address())],[m]),x=Lr(new F.SignedTransaction(d,_));return(await this.aptosClient.submitSignedBCSTransaction(x)).hash}async optInTokenTransfer(e,t,n){const i=this.transactionBuilder.buildTransactionPayload("0x3::token::opt_in_direct_transfer",[],[t]);return this.aptosClient.generateSignSubmitTransaction(e,i,n)}async transferWithOptIn(e,t,n,i,s,r,o,a){const c=new au(new su(new Dt(C9).toUint8Array(),[],[new xc(F.AccountAddress.fromHex(t)),new Tc(new TextEncoder().encode(n)),new Tc(new TextEncoder().encode(i)),new vc(BigInt(s)),new xc(F.AccountAddress.fromHex(r)),new vc(BigInt(o))]));return this.aptosClient.generateSignSubmitTransaction(e,c,a)}async burnByCreator(e,t,n,i,s,r,o){const a=this.transactionBuilder.buildTransactionPayload("0x3::token::burn_by_creator",[],[t,n,i,s,r]);return this.aptosClient.generateSignSubmitTransaction(e,a,o)}async burnByOwner(e,t,n,i,s,r,o){const a=this.transactionBuilder.buildTransactionPayload("0x3::token::burn",[],[t,n,i,s,r]);return this.aptosClient.generateSignSubmitTransaction(e,a,o)}async mutateTokenProperties(e,t,n,i,s,r,o,a,c,d,u){const l=this.transactionBuilder.buildTransactionPayload("0x3::token::mutate_token_properties",[],[t,n,i,s,r,o,a,c,d]);return this.aptosClient.generateSignSubmitTransaction(e,l,u)}async getCollectionData(e,t){const i=(await this.aptosClient.getAccountResources(e)).find(a=>a.type==="0x3::token::Collections"),{handle:s}=i.data.collection_data,r={key_type:"0x1::string::String",value_type:"0x3::token::CollectionData",key:t};return await this.aptosClient.getTableItem(s,r)}async getTokenData(e,t,n){const i=e instanceof Dt?e.hex():e,s=await this.aptosClient.getAccountResource(i,"0x3::token::Collections"),{handle:r}=s.data.token_data,a={key_type:"0x3::token::TokenDataId",value_type:"0x3::token::TokenData",key:{creator:i,collection:t,name:n}},c=await this.aptosClient.getTableItem(r,a);return new P6(c.collection,c.description,c.name,c.maximum,c.supply,c.uri,c.default_properties,c.mutability_config)}async getToken(e,t,n,i="0"){const s={creator:e instanceof Dt?e.hex():e,collection:t,name:n};return this.getTokenForAccount(e,{token_data_id:s,property_version:i})}async getTokenForAccount(e,t){const n=await this.aptosClient.getAccountResource(e instanceof Dt?e.hex():e,"0x3::token::TokenStore"),{handle:i}=n.data.tokens,s={key_type:"0x3::token::TokenId",value_type:"0x3::token::Token",key:t};try{const r=await this.aptosClient.getTableItem(i,s);return new C6(r.id,r.amount,r.token_properties)}catch(r){return(r==null?void 0:r.status)===404?{id:t,amount:"0",token_properties:new Gg}:r}}},w={},U9={get exports(){return w},set exports(e){w=e}};(function(e){(function(t,n){function i(A,h){if(!A)throw new Error(h||"Assertion failed")}function s(A,h){A.super_=h;var y=function(){};y.prototype=h.prototype,A.prototype=new y,A.prototype.constructor=A}function r(A,h,y){if(r.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((h==="le"||h==="be")&&(y=h,h=10),this._init(A||0,h||10,y||"be"))}typeof t=="object"?t.exports=r:n.BN=r,r.BN=r,r.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Wp.Buffer}catch{}r.isBN=function(h){return h instanceof r?!0:h!==null&&typeof h=="object"&&h.constructor.wordSize===r.wordSize&&Array.isArray(h.words)},r.max=function(h,y){return h.cmp(y)>0?h:y},r.min=function(h,y){return h.cmp(y)<0?h:y},r.prototype._init=function(h,y,E){if(typeof h=="number")return this._initNumber(h,y,E);if(typeof h=="object")return this._initArray(h,y,E);y==="hex"&&(y=16),i(y===(y|0)&&y>=2&&y<=36),h=h.toString().replace(/\s+/g,"");var U=0;h[0]==="-"&&(U++,this.negative=1),U<h.length&&(y===16?this._parseHex(h,U,E):(this._parseBase(h,y,U),E==="le"&&this._initArray(this.toArray(),y,E)))},r.prototype._initNumber=function(h,y,E){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[h&67108863],this.length=1):h<4503599627370496?(this.words=[h&67108863,h/67108864&67108863],this.length=2):(i(h<9007199254740992),this.words=[h&67108863,h/67108864&67108863,1],this.length=3),E==="le"&&this._initArray(this.toArray(),y,E)},r.prototype._initArray=function(h,y,E){if(i(typeof h.length=="number"),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var U=0;U<this.length;U++)this.words[U]=0;var L,H,Q=0;if(E==="be")for(U=h.length-1,L=0;U>=0;U-=3)H=h[U]|h[U-1]<<8|h[U-2]<<16,this.words[L]|=H<<Q&67108863,this.words[L+1]=H>>>26-Q&67108863,Q+=24,Q>=26&&(Q-=26,L++);else if(E==="le")for(U=0,L=0;U<h.length;U+=3)H=h[U]|h[U+1]<<8|h[U+2]<<16,this.words[L]|=H<<Q&67108863,this.words[L+1]=H>>>26-Q&67108863,Q+=24,Q>=26&&(Q-=26,L++);return this._strip()};function a(A,h){var y=A.charCodeAt(h);if(y>=48&&y<=57)return y-48;if(y>=65&&y<=70)return y-55;if(y>=97&&y<=102)return y-87;i(!1,"Invalid character in "+A)}function c(A,h,y){var E=a(A,y);return y-1>=h&&(E|=a(A,y-1)<<4),E}r.prototype._parseHex=function(h,y,E){this.length=Math.ceil((h.length-y)/6),this.words=new Array(this.length);for(var U=0;U<this.length;U++)this.words[U]=0;var L=0,H=0,Q;if(E==="be")for(U=h.length-1;U>=y;U-=2)Q=c(h,y,U)<<L,this.words[H]|=Q&67108863,L>=18?(L-=18,H+=1,this.words[H]|=Q>>>26):L+=8;else{var O=h.length-y;for(U=O%2===0?y+1:y;U<h.length;U+=2)Q=c(h,y,U)<<L,this.words[H]|=Q&67108863,L>=18?(L-=18,H+=1,this.words[H]|=Q>>>26):L+=8}this._strip()};function d(A,h,y,E){for(var U=0,L=0,H=Math.min(A.length,y),Q=h;Q<H;Q++){var O=A.charCodeAt(Q)-48;U*=E,O>=49?L=O-49+10:O>=17?L=O-17+10:L=O,i(O>=0&&L<E,"Invalid character"),U+=L}return U}r.prototype._parseBase=function(h,y,E){this.words=[0],this.length=1;for(var U=0,L=1;L<=67108863;L*=y)U++;U--,L=L/y|0;for(var H=h.length-E,Q=H%U,O=Math.min(H,H-Q)+E,b=0,j=E;j<O;j+=U)b=d(h,j,j+U,y),this.imuln(L),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b);if(Q!==0){var Ae=1;for(b=d(h,j,h.length,y),j=0;j<Q;j++)Ae*=y;this.imuln(Ae),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b)}this._strip()},r.prototype.copy=function(h){h.words=new Array(this.length);for(var y=0;y<this.length;y++)h.words[y]=this.words[y];h.length=this.length,h.negative=this.negative,h.red=this.red};function u(A,h){A.words=h.words,A.length=h.length,A.negative=h.negative,A.red=h.red}if(r.prototype._move=function(h){u(h,this)},r.prototype.clone=function(){var h=new r(null);return this.copy(h),h},r.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},r.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},r.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{r.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch{r.prototype.inspect=l}else r.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];r.prototype.toString=function(h,y){h=h||10,y=y|0||1;var E;if(h===16||h==="hex"){E="";for(var U=0,L=0,H=0;H<this.length;H++){var Q=this.words[H],O=((Q<<U|L)&16777215).toString(16);L=Q>>>24-U&16777215,U+=2,U>=26&&(U-=26,H--),L!==0||H!==this.length-1?E=f[6-O.length]+O+E:E=O+E}for(L!==0&&(E=L.toString(16)+E);E.length%y!==0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}if(h===(h|0)&&h>=2&&h<=36){var b=p[h],j=m[h];E="";var Ae=this.clone();for(Ae.negative=0;!Ae.isZero();){var ue=Ae.modrn(j).toString(h);Ae=Ae.idivn(j),Ae.isZero()?E=ue+E:E=f[b-ue.length]+ue+E}for(this.isZero()&&(E="0"+E);E.length%y!==0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}i(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var h=this.words[0];return this.length===2?h+=this.words[1]*67108864:this.length===3&&this.words[2]===1?h+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-h:h},r.prototype.toJSON=function(){return this.toString(16,2)},o&&(r.prototype.toBuffer=function(h,y){return this.toArrayLike(o,h,y)}),r.prototype.toArray=function(h,y){return this.toArrayLike(Array,h,y)};var _=function(h,y){return h.allocUnsafe?h.allocUnsafe(y):new h(y)};r.prototype.toArrayLike=function(h,y,E){this._strip();var U=this.byteLength(),L=E||Math.max(1,U);i(U<=L,"byte array longer than desired length"),i(L>0,"Requested array length <= 0");var H=_(h,L),Q=y==="le"?"LE":"BE";return this["_toArrayLike"+Q](H,U),H},r.prototype._toArrayLikeLE=function(h,y){for(var E=0,U=0,L=0,H=0;L<this.length;L++){var Q=this.words[L]<<H|U;h[E++]=Q&255,E<h.length&&(h[E++]=Q>>8&255),E<h.length&&(h[E++]=Q>>16&255),H===6?(E<h.length&&(h[E++]=Q>>24&255),U=0,H=0):(U=Q>>>24,H+=2)}if(E<h.length)for(h[E++]=U;E<h.length;)h[E++]=0},r.prototype._toArrayLikeBE=function(h,y){for(var E=h.length-1,U=0,L=0,H=0;L<this.length;L++){var Q=this.words[L]<<H|U;h[E--]=Q&255,E>=0&&(h[E--]=Q>>8&255),E>=0&&(h[E--]=Q>>16&255),H===6?(E>=0&&(h[E--]=Q>>24&255),U=0,H=0):(U=Q>>>24,H+=2)}if(E>=0)for(h[E--]=U;E>=0;)h[E--]=0},Math.clz32?r.prototype._countBits=function(h){return 32-Math.clz32(h)}:r.prototype._countBits=function(h){var y=h,E=0;return y>=4096&&(E+=13,y>>>=13),y>=64&&(E+=7,y>>>=7),y>=8&&(E+=4,y>>>=4),y>=2&&(E+=2,y>>>=2),E+y},r.prototype._zeroBits=function(h){if(h===0)return 26;var y=h,E=0;return y&8191||(E+=13,y>>>=13),y&127||(E+=7,y>>>=7),y&15||(E+=4,y>>>=4),y&3||(E+=2,y>>>=2),y&1||E++,E},r.prototype.bitLength=function(){var h=this.words[this.length-1],y=this._countBits(h);return(this.length-1)*26+y};function x(A){for(var h=new Array(A.bitLength()),y=0;y<h.length;y++){var E=y/26|0,U=y%26;h[y]=A.words[E]>>>U&1}return h}r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,y=0;y<this.length;y++){var E=this._zeroBits(this.words[y]);if(h+=E,E!==26)break}return h},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(h){return this.negative!==0?this.abs().inotn(h).iaddn(1):this.clone()},r.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return this.negative!==0},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var y=0;y<h.length;y++)this.words[y]=this.words[y]|h.words[y];return this._strip()},r.prototype.ior=function(h){return i((this.negative|h.negative)===0),this.iuor(h)},r.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},r.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},r.prototype.iuand=function(h){var y;this.length>h.length?y=h:y=this;for(var E=0;E<y.length;E++)this.words[E]=this.words[E]&h.words[E];return this.length=y.length,this._strip()},r.prototype.iand=function(h){return i((this.negative|h.negative)===0),this.iuand(h)},r.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},r.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},r.prototype.iuxor=function(h){var y,E;this.length>h.length?(y=this,E=h):(y=h,E=this);for(var U=0;U<E.length;U++)this.words[U]=y.words[U]^E.words[U];if(this!==y)for(;U<y.length;U++)this.words[U]=y.words[U];return this.length=y.length,this._strip()},r.prototype.ixor=function(h){return i((this.negative|h.negative)===0),this.iuxor(h)},r.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},r.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},r.prototype.inotn=function(h){i(typeof h=="number"&&h>=0);var y=Math.ceil(h/26)|0,E=h%26;this._expand(y),E>0&&y--;for(var U=0;U<y;U++)this.words[U]=~this.words[U]&67108863;return E>0&&(this.words[U]=~this.words[U]&67108863>>26-E),this._strip()},r.prototype.notn=function(h){return this.clone().inotn(h)},r.prototype.setn=function(h,y){i(typeof h=="number"&&h>=0);var E=h/26|0,U=h%26;return this._expand(E+1),y?this.words[E]=this.words[E]|1<<U:this.words[E]=this.words[E]&~(1<<U),this._strip()},r.prototype.iadd=function(h){var y;if(this.negative!==0&&h.negative===0)return this.negative=0,y=this.isub(h),this.negative^=1,this._normSign();if(this.negative===0&&h.negative!==0)return h.negative=0,y=this.isub(h),h.negative=1,y._normSign();var E,U;this.length>h.length?(E=this,U=h):(E=h,U=this);for(var L=0,H=0;H<U.length;H++)y=(E.words[H]|0)+(U.words[H]|0)+L,this.words[H]=y&67108863,L=y>>>26;for(;L!==0&&H<E.length;H++)y=(E.words[H]|0)+L,this.words[H]=y&67108863,L=y>>>26;if(this.length=E.length,L!==0)this.words[this.length]=L,this.length++;else if(E!==this)for(;H<E.length;H++)this.words[H]=E.words[H];return this},r.prototype.add=function(h){var y;return h.negative!==0&&this.negative===0?(h.negative=0,y=this.sub(h),h.negative^=1,y):h.negative===0&&this.negative!==0?(this.negative=0,y=h.sub(this),this.negative=1,y):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},r.prototype.isub=function(h){if(h.negative!==0){h.negative=0;var y=this.iadd(h);return h.negative=1,y._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var E=this.cmp(h);if(E===0)return this.negative=0,this.length=1,this.words[0]=0,this;var U,L;E>0?(U=this,L=h):(U=h,L=this);for(var H=0,Q=0;Q<L.length;Q++)y=(U.words[Q]|0)-(L.words[Q]|0)+H,H=y>>26,this.words[Q]=y&67108863;for(;H!==0&&Q<U.length;Q++)y=(U.words[Q]|0)+H,H=y>>26,this.words[Q]=y&67108863;if(H===0&&Q<U.length&&U!==this)for(;Q<U.length;Q++)this.words[Q]=U.words[Q];return this.length=Math.max(this.length,Q),U!==this&&(this.negative=1),this._strip()},r.prototype.sub=function(h){return this.clone().isub(h)};function C(A,h,y){y.negative=h.negative^A.negative;var E=A.length+h.length|0;y.length=E,E=E-1|0;var U=A.words[0]|0,L=h.words[0]|0,H=U*L,Q=H&67108863,O=H/67108864|0;y.words[0]=Q;for(var b=1;b<E;b++){for(var j=O>>>26,Ae=O&67108863,ue=Math.min(b,h.length-1),ke=Math.max(0,b-A.length+1);ke<=ue;ke++){var mt=b-ke|0;U=A.words[mt]|0,L=h.words[ke]|0,H=U*L+Ae,j+=H/67108864|0,Ae=H&67108863}y.words[b]=Ae|0,O=j|0}return O!==0?y.words[b]=O|0:y.length--,y._strip()}var k=function(h,y,E){var U=h.words,L=y.words,H=E.words,Q=0,O,b,j,Ae=U[0]|0,ue=Ae&8191,ke=Ae>>>13,mt=U[1]|0,st=mt&8191,kt=mt>>>13,ut=U[2]|0,ft=ut&8191,Et=ut>>>13,pi=U[3]|0,se=pi&8191,fe=pi>>>13,Re=U[4]|0,Pe=Re&8191,Le=Re>>>13,at=U[5]|0,Je=at&8191,rt=at>>>13,Yt=U[6]|0,ht=Yt&8191,ct=Yt>>>13,Vt=U[7]|0,It=Vt&8191,Ot=Vt>>>13,Sn=U[8]|0,qt=Sn&8191,dn=Sn>>>13,Si=U[9]|0,un=Si&8191,D=Si>>>13,W=L[0]|0,Y=W&8191,ne=W>>>13,he=L[1]|0,re=he&8191,me=he>>>13,je=L[2]|0,Ee=je&8191,_e=je>>>13,le=L[3]|0,ge=le&8191,Ie=le>>>13,Ve=L[4]|0,ze=Ve&8191,He=Ve>>>13,it=L[5]|0,gt=it&8191,ot=it>>>13,nn=L[6]|0,v=nn&8191,B=nn>>>13,I=L[7]|0,g=I&8191,$=I>>>13,ee=L[8]|0,Z=ee&8191,oe=ee>>>13,Se=L[9]|0,Me=Se&8191,Be=Se>>>13;E.negative=h.negative^y.negative,E.length=19,O=Math.imul(ue,Y),b=Math.imul(ue,ne),b=b+Math.imul(ke,Y)|0,j=Math.imul(ke,ne);var Qt=(Q+O|0)+((b&8191)<<13)|0;Q=(j+(b>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,O=Math.imul(st,Y),b=Math.imul(st,ne),b=b+Math.imul(kt,Y)|0,j=Math.imul(kt,ne),O=O+Math.imul(ue,re)|0,b=b+Math.imul(ue,me)|0,b=b+Math.imul(ke,re)|0,j=j+Math.imul(ke,me)|0;var Xe=(Q+O|0)+((b&8191)<<13)|0;Q=(j+(b>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,O=Math.imul(ft,Y),b=Math.imul(ft,ne),b=b+Math.imul(Et,Y)|0,j=Math.imul(Et,ne),O=O+Math.imul(st,re)|0,b=b+Math.imul(st,me)|0,b=b+Math.imul(kt,re)|0,j=j+Math.imul(kt,me)|0,O=O+Math.imul(ue,Ee)|0,b=b+Math.imul(ue,_e)|0,b=b+Math.imul(ke,Ee)|0,j=j+Math.imul(ke,_e)|0;var bt=(Q+O|0)+((b&8191)<<13)|0;Q=(j+(b>>>13)|0)+(bt>>>26)|0,bt&=67108863,O=Math.imul(se,Y),b=Math.imul(se,ne),b=b+Math.imul(fe,Y)|0,j=Math.imul(fe,ne),O=O+Math.imul(ft,re)|0,b=b+Math.imul(ft,me)|0,b=b+Math.imul(Et,re)|0,j=j+Math.imul(Et,me)|0,O=O+Math.imul(st,Ee)|0,b=b+Math.imul(st,_e)|0,b=b+Math.imul(kt,Ee)|0,j=j+Math.imul(kt,_e)|0,O=O+Math.imul(ue,ge)|0,b=b+Math.imul(ue,Ie)|0,b=b+Math.imul(ke,ge)|0,j=j+Math.imul(ke,Ie)|0;var wt=(Q+O|0)+((b&8191)<<13)|0;Q=(j+(b>>>13)|0)+(wt>>>26)|0,wt&=67108863,O=Math.imul(Pe,Y),b=Math.imul(Pe,ne),b=b+Math.imul(Le,Y)|0,j=Math.imul(Le,ne),O=O+Math.imul(se,re)|0,b=b+Math.imul(se,me)|0,b=b+Math.imul(fe,re)|0,j=j+Math.imul(fe,me)|0,O=O+Math.imul(ft,Ee)|0,b=b+Math.imul(ft,_e)|0,b=b+Math.imul(Et,Ee)|0,j=j+Math.imul(Et,_e)|0,O=O+Math.imul(st,ge)|0,b=b+Math.imul(st,Ie)|0,b=b+Math.imul(kt,ge)|0,j=j+Math.imul(kt,Ie)|0,O=O+Math.imul(ue,ze)|0,b=b+Math.imul(ue,He)|0,b=b+Math.imul(ke,ze)|0,j=j+Math.imul(ke,He)|0;var Bt=(Q+O|0)+((b&8191)<<13)|0;Q=(j+(b>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,O=Math.imul(Je,Y),b=Math.imul(Je,ne),b=b+Math.imul(rt,Y)|0,j=Math.imul(rt,ne),O=O+Math.imul(Pe,re)|0,b=b+Math.imul(Pe,me)|0,b=b+Math.imul(Le,re)|0,j=j+Math.imul(Le,me)|0,O=O+Math.imul(se,Ee)|0,b=b+Math.imul(se,_e)|0,b=b+Math.imul(fe,Ee)|0,j=j+Math.imul(fe,_e)|0,O=O+Math.imul(ft,ge)|0,b=b+Math.imul(ft,Ie)|0,b=b+Math.imul(Et,ge)|0,j=j+Math.imul(Et,Ie)|0,O=O+Math.imul(st,ze)|0,b=b+Math.imul(st,He)|0,b=b+Math.imul(kt,ze)|0,j=j+Math.imul(kt,He)|0,O=O+Math.imul(ue,gt)|0,b=b+Math.imul(ue,ot)|0,b=b+Math.imul(ke,gt)|0,j=j+Math.imul(ke,ot)|0;var Pt=(Q+O|0)+((b&8191)<<13)|0;Q=(j+(b>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,O=Math.imul(ht,Y),b=Math.imul(ht,ne),b=b+Math.imul(ct,Y)|0,j=Math.imul(ct,ne),O=O+Math.imul(Je,re)|0,b=b+Math.imul(Je,me)|0,b=b+Math.imul(rt,re)|0,j=j+Math.imul(rt,me)|0,O=O+Math.imul(Pe,Ee)|0,b=b+Math.imul(Pe,_e)|0,b=b+Math.imul(Le,Ee)|0,j=j+Math.imul(Le,_e)|0,O=O+Math.imul(se,ge)|0,b=b+Math.imul(se,Ie)|0,b=b+Math.imul(fe,ge)|0,j=j+Math.imul(fe,Ie)|0,O=O+Math.imul(ft,ze)|0,b=b+Math.imul(ft,He)|0,b=b+Math.imul(Et,ze)|0,j=j+Math.imul(Et,He)|0,O=O+Math.imul(st,gt)|0,b=b+Math.imul(st,ot)|0,b=b+Math.imul(kt,gt)|0,j=j+Math.imul(kt,ot)|0,O=O+Math.imul(ue,v)|0,b=b+Math.imul(ue,B)|0,b=b+Math.imul(ke,v)|0,j=j+Math.imul(ke,B)|0;var vt=(Q+O|0)+((b&8191)<<13)|0;Q=(j+(b>>>13)|0)+(vt>>>26)|0,vt&=67108863,O=Math.imul(It,Y),b=Math.imul(It,ne),b=b+Math.imul(Ot,Y)|0,j=Math.imul(Ot,ne),O=O+Math.imul(ht,re)|0,b=b+Math.imul(ht,me)|0,b=b+Math.imul(ct,re)|0,j=j+Math.imul(ct,me)|0,O=O+Math.imul(Je,Ee)|0,b=b+Math.imul(Je,_e)|0,b=b+Math.imul(rt,Ee)|0,j=j+Math.imul(rt,_e)|0,O=O+Math.imul(Pe,ge)|0,b=b+Math.imul(Pe,Ie)|0,b=b+Math.imul(Le,ge)|0,j=j+Math.imul(Le,Ie)|0,O=O+Math.imul(se,ze)|0,b=b+Math.imul(se,He)|0,b=b+Math.imul(fe,ze)|0,j=j+Math.imul(fe,He)|0,O=O+Math.imul(ft,gt)|0,b=b+Math.imul(ft,ot)|0,b=b+Math.imul(Et,gt)|0,j=j+Math.imul(Et,ot)|0,O=O+Math.imul(st,v)|0,b=b+Math.imul(st,B)|0,b=b+Math.imul(kt,v)|0,j=j+Math.imul(kt,B)|0,O=O+Math.imul(ue,g)|0,b=b+Math.imul(ue,$)|0,b=b+Math.imul(ke,g)|0,j=j+Math.imul(ke,$)|0;var St=(Q+O|0)+((b&8191)<<13)|0;Q=(j+(b>>>13)|0)+(St>>>26)|0,St&=67108863,O=Math.imul(qt,Y),b=Math.imul(qt,ne),b=b+Math.imul(dn,Y)|0,j=Math.imul(dn,ne),O=O+Math.imul(It,re)|0,b=b+Math.imul(It,me)|0,b=b+Math.imul(Ot,re)|0,j=j+Math.imul(Ot,me)|0,O=O+Math.imul(ht,Ee)|0,b=b+Math.imul(ht,_e)|0,b=b+Math.imul(ct,Ee)|0,j=j+Math.imul(ct,_e)|0,O=O+Math.imul(Je,ge)|0,b=b+Math.imul(Je,Ie)|0,b=b+Math.imul(rt,ge)|0,j=j+Math.imul(rt,Ie)|0,O=O+Math.imul(Pe,ze)|0,b=b+Math.imul(Pe,He)|0,b=b+Math.imul(Le,ze)|0,j=j+Math.imul(Le,He)|0,O=O+Math.imul(se,gt)|0,b=b+Math.imul(se,ot)|0,b=b+Math.imul(fe,gt)|0,j=j+Math.imul(fe,ot)|0,O=O+Math.imul(ft,v)|0,b=b+Math.imul(ft,B)|0,b=b+Math.imul(Et,v)|0,j=j+Math.imul(Et,B)|0,O=O+Math.imul(st,g)|0,b=b+Math.imul(st,$)|0,b=b+Math.imul(kt,g)|0,j=j+Math.imul(kt,$)|0,O=O+Math.imul(ue,Z)|0,b=b+Math.imul(ue,oe)|0,b=b+Math.imul(ke,Z)|0,j=j+Math.imul(ke,oe)|0;var xt=(Q+O|0)+((b&8191)<<13)|0;Q=(j+(b>>>13)|0)+(xt>>>26)|0,xt&=67108863,O=Math.imul(un,Y),b=Math.imul(un,ne),b=b+Math.imul(D,Y)|0,j=Math.imul(D,ne),O=O+Math.imul(qt,re)|0,b=b+Math.imul(qt,me)|0,b=b+Math.imul(dn,re)|0,j=j+Math.imul(dn,me)|0,O=O+Math.imul(It,Ee)|0,b=b+Math.imul(It,_e)|0,b=b+Math.imul(Ot,Ee)|0,j=j+Math.imul(Ot,_e)|0,O=O+Math.imul(ht,ge)|0,b=b+Math.imul(ht,Ie)|0,b=b+Math.imul(ct,ge)|0,j=j+Math.imul(ct,Ie)|0,O=O+Math.imul(Je,ze)|0,b=b+Math.imul(Je,He)|0,b=b+Math.imul(rt,ze)|0,j=j+Math.imul(rt,He)|0,O=O+Math.imul(Pe,gt)|0,b=b+Math.imul(Pe,ot)|0,b=b+Math.imul(Le,gt)|0,j=j+Math.imul(Le,ot)|0,O=O+Math.imul(se,v)|0,b=b+Math.imul(se,B)|0,b=b+Math.imul(fe,v)|0,j=j+Math.imul(fe,B)|0,O=O+Math.imul(ft,g)|0,b=b+Math.imul(ft,$)|0,b=b+Math.imul(Et,g)|0,j=j+Math.imul(Et,$)|0,O=O+Math.imul(st,Z)|0,b=b+Math.imul(st,oe)|0,b=b+Math.imul(kt,Z)|0,j=j+Math.imul(kt,oe)|0,O=O+Math.imul(ue,Me)|0,b=b+Math.imul(ue,Be)|0,b=b+Math.imul(ke,Me)|0,j=j+Math.imul(ke,Be)|0;var Ze=(Q+O|0)+((b&8191)<<13)|0;Q=(j+(b>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,O=Math.imul(un,re),b=Math.imul(un,me),b=b+Math.imul(D,re)|0,j=Math.imul(D,me),O=O+Math.imul(qt,Ee)|0,b=b+Math.imul(qt,_e)|0,b=b+Math.imul(dn,Ee)|0,j=j+Math.imul(dn,_e)|0,O=O+Math.imul(It,ge)|0,b=b+Math.imul(It,Ie)|0,b=b+Math.imul(Ot,ge)|0,j=j+Math.imul(Ot,Ie)|0,O=O+Math.imul(ht,ze)|0,b=b+Math.imul(ht,He)|0,b=b+Math.imul(ct,ze)|0,j=j+Math.imul(ct,He)|0,O=O+Math.imul(Je,gt)|0,b=b+Math.imul(Je,ot)|0,b=b+Math.imul(rt,gt)|0,j=j+Math.imul(rt,ot)|0,O=O+Math.imul(Pe,v)|0,b=b+Math.imul(Pe,B)|0,b=b+Math.imul(Le,v)|0,j=j+Math.imul(Le,B)|0,O=O+Math.imul(se,g)|0,b=b+Math.imul(se,$)|0,b=b+Math.imul(fe,g)|0,j=j+Math.imul(fe,$)|0,O=O+Math.imul(ft,Z)|0,b=b+Math.imul(ft,oe)|0,b=b+Math.imul(Et,Z)|0,j=j+Math.imul(Et,oe)|0,O=O+Math.imul(st,Me)|0,b=b+Math.imul(st,Be)|0,b=b+Math.imul(kt,Me)|0,j=j+Math.imul(kt,Be)|0;var nt=(Q+O|0)+((b&8191)<<13)|0;Q=(j+(b>>>13)|0)+(nt>>>26)|0,nt&=67108863,O=Math.imul(un,Ee),b=Math.imul(un,_e),b=b+Math.imul(D,Ee)|0,j=Math.imul(D,_e),O=O+Math.imul(qt,ge)|0,b=b+Math.imul(qt,Ie)|0,b=b+Math.imul(dn,ge)|0,j=j+Math.imul(dn,Ie)|0,O=O+Math.imul(It,ze)|0,b=b+Math.imul(It,He)|0,b=b+Math.imul(Ot,ze)|0,j=j+Math.imul(Ot,He)|0,O=O+Math.imul(ht,gt)|0,b=b+Math.imul(ht,ot)|0,b=b+Math.imul(ct,gt)|0,j=j+Math.imul(ct,ot)|0,O=O+Math.imul(Je,v)|0,b=b+Math.imul(Je,B)|0,b=b+Math.imul(rt,v)|0,j=j+Math.imul(rt,B)|0,O=O+Math.imul(Pe,g)|0,b=b+Math.imul(Pe,$)|0,b=b+Math.imul(Le,g)|0,j=j+Math.imul(Le,$)|0,O=O+Math.imul(se,Z)|0,b=b+Math.imul(se,oe)|0,b=b+Math.imul(fe,Z)|0,j=j+Math.imul(fe,oe)|0,O=O+Math.imul(ft,Me)|0,b=b+Math.imul(ft,Be)|0,b=b+Math.imul(Et,Me)|0,j=j+Math.imul(Et,Be)|0;var Ke=(Q+O|0)+((b&8191)<<13)|0;Q=(j+(b>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,O=Math.imul(un,ge),b=Math.imul(un,Ie),b=b+Math.imul(D,ge)|0,j=Math.imul(D,Ie),O=O+Math.imul(qt,ze)|0,b=b+Math.imul(qt,He)|0,b=b+Math.imul(dn,ze)|0,j=j+Math.imul(dn,He)|0,O=O+Math.imul(It,gt)|0,b=b+Math.imul(It,ot)|0,b=b+Math.imul(Ot,gt)|0,j=j+Math.imul(Ot,ot)|0,O=O+Math.imul(ht,v)|0,b=b+Math.imul(ht,B)|0,b=b+Math.imul(ct,v)|0,j=j+Math.imul(ct,B)|0,O=O+Math.imul(Je,g)|0,b=b+Math.imul(Je,$)|0,b=b+Math.imul(rt,g)|0,j=j+Math.imul(rt,$)|0,O=O+Math.imul(Pe,Z)|0,b=b+Math.imul(Pe,oe)|0,b=b+Math.imul(Le,Z)|0,j=j+Math.imul(Le,oe)|0,O=O+Math.imul(se,Me)|0,b=b+Math.imul(se,Be)|0,b=b+Math.imul(fe,Me)|0,j=j+Math.imul(fe,Be)|0;var Qe=(Q+O|0)+((b&8191)<<13)|0;Q=(j+(b>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,O=Math.imul(un,ze),b=Math.imul(un,He),b=b+Math.imul(D,ze)|0,j=Math.imul(D,He),O=O+Math.imul(qt,gt)|0,b=b+Math.imul(qt,ot)|0,b=b+Math.imul(dn,gt)|0,j=j+Math.imul(dn,ot)|0,O=O+Math.imul(It,v)|0,b=b+Math.imul(It,B)|0,b=b+Math.imul(Ot,v)|0,j=j+Math.imul(Ot,B)|0,O=O+Math.imul(ht,g)|0,b=b+Math.imul(ht,$)|0,b=b+Math.imul(ct,g)|0,j=j+Math.imul(ct,$)|0,O=O+Math.imul(Je,Z)|0,b=b+Math.imul(Je,oe)|0,b=b+Math.imul(rt,Z)|0,j=j+Math.imul(rt,oe)|0,O=O+Math.imul(Pe,Me)|0,b=b+Math.imul(Pe,Be)|0,b=b+Math.imul(Le,Me)|0,j=j+Math.imul(Le,Be)|0;var et=(Q+O|0)+((b&8191)<<13)|0;Q=(j+(b>>>13)|0)+(et>>>26)|0,et&=67108863,O=Math.imul(un,gt),b=Math.imul(un,ot),b=b+Math.imul(D,gt)|0,j=Math.imul(D,ot),O=O+Math.imul(qt,v)|0,b=b+Math.imul(qt,B)|0,b=b+Math.imul(dn,v)|0,j=j+Math.imul(dn,B)|0,O=O+Math.imul(It,g)|0,b=b+Math.imul(It,$)|0,b=b+Math.imul(Ot,g)|0,j=j+Math.imul(Ot,$)|0,O=O+Math.imul(ht,Z)|0,b=b+Math.imul(ht,oe)|0,b=b+Math.imul(ct,Z)|0,j=j+Math.imul(ct,oe)|0,O=O+Math.imul(Je,Me)|0,b=b+Math.imul(Je,Be)|0,b=b+Math.imul(rt,Me)|0,j=j+Math.imul(rt,Be)|0;var Fe=(Q+O|0)+((b&8191)<<13)|0;Q=(j+(b>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,O=Math.imul(un,v),b=Math.imul(un,B),b=b+Math.imul(D,v)|0,j=Math.imul(D,B),O=O+Math.imul(qt,g)|0,b=b+Math.imul(qt,$)|0,b=b+Math.imul(dn,g)|0,j=j+Math.imul(dn,$)|0,O=O+Math.imul(It,Z)|0,b=b+Math.imul(It,oe)|0,b=b+Math.imul(Ot,Z)|0,j=j+Math.imul(Ot,oe)|0,O=O+Math.imul(ht,Me)|0,b=b+Math.imul(ht,Be)|0,b=b+Math.imul(ct,Me)|0,j=j+Math.imul(ct,Be)|0;var ae=(Q+O|0)+((b&8191)<<13)|0;Q=(j+(b>>>13)|0)+(ae>>>26)|0,ae&=67108863,O=Math.imul(un,g),b=Math.imul(un,$),b=b+Math.imul(D,g)|0,j=Math.imul(D,$),O=O+Math.imul(qt,Z)|0,b=b+Math.imul(qt,oe)|0,b=b+Math.imul(dn,Z)|0,j=j+Math.imul(dn,oe)|0,O=O+Math.imul(It,Me)|0,b=b+Math.imul(It,Be)|0,b=b+Math.imul(Ot,Me)|0,j=j+Math.imul(Ot,Be)|0;var ce=(Q+O|0)+((b&8191)<<13)|0;Q=(j+(b>>>13)|0)+(ce>>>26)|0,ce&=67108863,O=Math.imul(un,Z),b=Math.imul(un,oe),b=b+Math.imul(D,Z)|0,j=Math.imul(D,oe),O=O+Math.imul(qt,Me)|0,b=b+Math.imul(qt,Be)|0,b=b+Math.imul(dn,Me)|0,j=j+Math.imul(dn,Be)|0;var Te=(Q+O|0)+((b&8191)<<13)|0;Q=(j+(b>>>13)|0)+(Te>>>26)|0,Te&=67108863,O=Math.imul(un,Me),b=Math.imul(un,Be),b=b+Math.imul(D,Me)|0,j=Math.imul(D,Be);var be=(Q+O|0)+((b&8191)<<13)|0;return Q=(j+(b>>>13)|0)+(be>>>26)|0,be&=67108863,H[0]=Qt,H[1]=Xe,H[2]=bt,H[3]=wt,H[4]=Bt,H[5]=Pt,H[6]=vt,H[7]=St,H[8]=xt,H[9]=Ze,H[10]=nt,H[11]=Ke,H[12]=Qe,H[13]=et,H[14]=Fe,H[15]=ae,H[16]=ce,H[17]=Te,H[18]=be,Q!==0&&(H[19]=Q,E.length++),E};Math.imul||(k=C);function T(A,h,y){y.negative=h.negative^A.negative,y.length=A.length+h.length;for(var E=0,U=0,L=0;L<y.length-1;L++){var H=U;U=0;for(var Q=E&67108863,O=Math.min(L,h.length-1),b=Math.max(0,L-A.length+1);b<=O;b++){var j=L-b,Ae=A.words[j]|0,ue=h.words[b]|0,ke=Ae*ue,mt=ke&67108863;H=H+(ke/67108864|0)|0,mt=mt+Q|0,Q=mt&67108863,H=H+(mt>>>26)|0,U+=H>>>26,H&=67108863}y.words[L]=Q,E=H,H=U}return E!==0?y.words[L]=E:y.length--,y._strip()}function S(A,h,y){return T(A,h,y)}r.prototype.mulTo=function(h,y){var E,U=this.length+h.length;return this.length===10&&h.length===10?E=k(this,h,y):U<63?E=C(this,h,y):U<1024?E=T(this,h,y):E=S(this,h,y),E},r.prototype.mul=function(h){var y=new r(null);return y.words=new Array(this.length+h.length),this.mulTo(h,y)},r.prototype.mulf=function(h){var y=new r(null);return y.words=new Array(this.length+h.length),S(this,h,y)},r.prototype.imul=function(h){return this.clone().mulTo(h,this)},r.prototype.imuln=function(h){var y=h<0;y&&(h=-h),i(typeof h=="number"),i(h<67108864);for(var E=0,U=0;U<this.length;U++){var L=(this.words[U]|0)*h,H=(L&67108863)+(E&67108863);E>>=26,E+=L/67108864|0,E+=H>>>26,this.words[U]=H&67108863}return E!==0&&(this.words[U]=E,this.length++),y?this.ineg():this},r.prototype.muln=function(h){return this.clone().imuln(h)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(h){var y=x(h);if(y.length===0)return new r(1);for(var E=this,U=0;U<y.length&&y[U]===0;U++,E=E.sqr());if(++U<y.length)for(var L=E.sqr();U<y.length;U++,L=L.sqr())y[U]!==0&&(E=E.mul(L));return E},r.prototype.iushln=function(h){i(typeof h=="number"&&h>=0);var y=h%26,E=(h-y)/26,U=67108863>>>26-y<<26-y,L;if(y!==0){var H=0;for(L=0;L<this.length;L++){var Q=this.words[L]&U,O=(this.words[L]|0)-Q<<y;this.words[L]=O|H,H=Q>>>26-y}H&&(this.words[L]=H,this.length++)}if(E!==0){for(L=this.length-1;L>=0;L--)this.words[L+E]=this.words[L];for(L=0;L<E;L++)this.words[L]=0;this.length+=E}return this._strip()},r.prototype.ishln=function(h){return i(this.negative===0),this.iushln(h)},r.prototype.iushrn=function(h,y,E){i(typeof h=="number"&&h>=0);var U;y?U=(y-y%26)/26:U=0;var L=h%26,H=Math.min((h-L)/26,this.length),Q=67108863^67108863>>>L<<L,O=E;if(U-=H,U=Math.max(0,U),O){for(var b=0;b<H;b++)O.words[b]=this.words[b];O.length=H}if(H!==0)if(this.length>H)for(this.length-=H,b=0;b<this.length;b++)this.words[b]=this.words[b+H];else this.words[0]=0,this.length=1;var j=0;for(b=this.length-1;b>=0&&(j!==0||b>=U);b--){var Ae=this.words[b]|0;this.words[b]=j<<26-L|Ae>>>L,j=Ae&Q}return O&&j!==0&&(O.words[O.length++]=j),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},r.prototype.ishrn=function(h,y,E){return i(this.negative===0),this.iushrn(h,y,E)},r.prototype.shln=function(h){return this.clone().ishln(h)},r.prototype.ushln=function(h){return this.clone().iushln(h)},r.prototype.shrn=function(h){return this.clone().ishrn(h)},r.prototype.ushrn=function(h){return this.clone().iushrn(h)},r.prototype.testn=function(h){i(typeof h=="number"&&h>=0);var y=h%26,E=(h-y)/26,U=1<<y;if(this.length<=E)return!1;var L=this.words[E];return!!(L&U)},r.prototype.imaskn=function(h){i(typeof h=="number"&&h>=0);var y=h%26,E=(h-y)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=E)return this;if(y!==0&&E++,this.length=Math.min(E,this.length),y!==0){var U=67108863^67108863>>>y<<y;this.words[this.length-1]&=U}return this._strip()},r.prototype.maskn=function(h){return this.clone().imaskn(h)},r.prototype.iaddn=function(h){return i(typeof h=="number"),i(h<67108864),h<0?this.isubn(-h):this.negative!==0?this.length===1&&(this.words[0]|0)<=h?(this.words[0]=h-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},r.prototype._iaddn=function(h){this.words[0]+=h;for(var y=0;y<this.length&&this.words[y]>=67108864;y++)this.words[y]-=67108864,y===this.length-1?this.words[y+1]=1:this.words[y+1]++;return this.length=Math.max(this.length,y+1),this},r.prototype.isubn=function(h){if(i(typeof h=="number"),i(h<67108864),h<0)return this.iaddn(-h);if(this.negative!==0)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var y=0;y<this.length&&this.words[y]<0;y++)this.words[y]+=67108864,this.words[y+1]-=1;return this._strip()},r.prototype.addn=function(h){return this.clone().iaddn(h)},r.prototype.subn=function(h){return this.clone().isubn(h)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(h,y,E){var U=h.length+E,L;this._expand(U);var H,Q=0;for(L=0;L<h.length;L++){H=(this.words[L+E]|0)+Q;var O=(h.words[L]|0)*y;H-=O&67108863,Q=(H>>26)-(O/67108864|0),this.words[L+E]=H&67108863}for(;L<this.length-E;L++)H=(this.words[L+E]|0)+Q,Q=H>>26,this.words[L+E]=H&67108863;if(Q===0)return this._strip();for(i(Q===-1),Q=0,L=0;L<this.length;L++)H=-(this.words[L]|0)+Q,Q=H>>26,this.words[L]=H&67108863;return this.negative=1,this._strip()},r.prototype._wordDiv=function(h,y){var E=this.length-h.length,U=this.clone(),L=h,H=L.words[L.length-1]|0,Q=this._countBits(H);E=26-Q,E!==0&&(L=L.ushln(E),U.iushln(E),H=L.words[L.length-1]|0);var O=U.length-L.length,b;if(y!=="mod"){b=new r(null),b.length=O+1,b.words=new Array(b.length);for(var j=0;j<b.length;j++)b.words[j]=0}var Ae=U.clone()._ishlnsubmul(L,1,O);Ae.negative===0&&(U=Ae,b&&(b.words[O]=1));for(var ue=O-1;ue>=0;ue--){var ke=(U.words[L.length+ue]|0)*67108864+(U.words[L.length+ue-1]|0);for(ke=Math.min(ke/H|0,67108863),U._ishlnsubmul(L,ke,ue);U.negative!==0;)ke--,U.negative=0,U._ishlnsubmul(L,1,ue),U.isZero()||(U.negative^=1);b&&(b.words[ue]=ke)}return b&&b._strip(),U._strip(),y!=="div"&&E!==0&&U.iushrn(E),{div:b||null,mod:U}},r.prototype.divmod=function(h,y,E){if(i(!h.isZero()),this.isZero())return{div:new r(0),mod:new r(0)};var U,L,H;return this.negative!==0&&h.negative===0?(H=this.neg().divmod(h,y),y!=="mod"&&(U=H.div.neg()),y!=="div"&&(L=H.mod.neg(),E&&L.negative!==0&&L.iadd(h)),{div:U,mod:L}):this.negative===0&&h.negative!==0?(H=this.divmod(h.neg(),y),y!=="mod"&&(U=H.div.neg()),{div:U,mod:H.mod}):this.negative&h.negative?(H=this.neg().divmod(h.neg(),y),y!=="div"&&(L=H.mod.neg(),E&&L.negative!==0&&L.isub(h)),{div:H.div,mod:L}):h.length>this.length||this.cmp(h)<0?{div:new r(0),mod:this}:h.length===1?y==="div"?{div:this.divn(h.words[0]),mod:null}:y==="mod"?{div:null,mod:new r(this.modrn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new r(this.modrn(h.words[0]))}:this._wordDiv(h,y)},r.prototype.div=function(h){return this.divmod(h,"div",!1).div},r.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},r.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},r.prototype.divRound=function(h){var y=this.divmod(h);if(y.mod.isZero())return y.div;var E=y.div.negative!==0?y.mod.isub(h):y.mod,U=h.ushrn(1),L=h.andln(1),H=E.cmp(U);return H<0||L===1&&H===0?y.div:y.div.negative!==0?y.div.isubn(1):y.div.iaddn(1)},r.prototype.modrn=function(h){var y=h<0;y&&(h=-h),i(h<=67108863);for(var E=(1<<26)%h,U=0,L=this.length-1;L>=0;L--)U=(E*U+(this.words[L]|0))%h;return y?-U:U},r.prototype.modn=function(h){return this.modrn(h)},r.prototype.idivn=function(h){var y=h<0;y&&(h=-h),i(h<=67108863);for(var E=0,U=this.length-1;U>=0;U--){var L=(this.words[U]|0)+E*67108864;this.words[U]=L/h|0,E=L%h}return this._strip(),y?this.ineg():this},r.prototype.divn=function(h){return this.clone().idivn(h)},r.prototype.egcd=function(h){i(h.negative===0),i(!h.isZero());var y=this,E=h.clone();y.negative!==0?y=y.umod(h):y=y.clone();for(var U=new r(1),L=new r(0),H=new r(0),Q=new r(1),O=0;y.isEven()&&E.isEven();)y.iushrn(1),E.iushrn(1),++O;for(var b=E.clone(),j=y.clone();!y.isZero();){for(var Ae=0,ue=1;!(y.words[0]&ue)&&Ae<26;++Ae,ue<<=1);if(Ae>0)for(y.iushrn(Ae);Ae-- >0;)(U.isOdd()||L.isOdd())&&(U.iadd(b),L.isub(j)),U.iushrn(1),L.iushrn(1);for(var ke=0,mt=1;!(E.words[0]&mt)&&ke<26;++ke,mt<<=1);if(ke>0)for(E.iushrn(ke);ke-- >0;)(H.isOdd()||Q.isOdd())&&(H.iadd(b),Q.isub(j)),H.iushrn(1),Q.iushrn(1);y.cmp(E)>=0?(y.isub(E),U.isub(H),L.isub(Q)):(E.isub(y),H.isub(U),Q.isub(L))}return{a:H,b:Q,gcd:E.iushln(O)}},r.prototype._invmp=function(h){i(h.negative===0),i(!h.isZero());var y=this,E=h.clone();y.negative!==0?y=y.umod(h):y=y.clone();for(var U=new r(1),L=new r(0),H=E.clone();y.cmpn(1)>0&&E.cmpn(1)>0;){for(var Q=0,O=1;!(y.words[0]&O)&&Q<26;++Q,O<<=1);if(Q>0)for(y.iushrn(Q);Q-- >0;)U.isOdd()&&U.iadd(H),U.iushrn(1);for(var b=0,j=1;!(E.words[0]&j)&&b<26;++b,j<<=1);if(b>0)for(E.iushrn(b);b-- >0;)L.isOdd()&&L.iadd(H),L.iushrn(1);y.cmp(E)>=0?(y.isub(E),U.isub(L)):(E.isub(y),L.isub(U))}var Ae;return y.cmpn(1)===0?Ae=U:Ae=L,Ae.cmpn(0)<0&&Ae.iadd(h),Ae},r.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var y=this.clone(),E=h.clone();y.negative=0,E.negative=0;for(var U=0;y.isEven()&&E.isEven();U++)y.iushrn(1),E.iushrn(1);do{for(;y.isEven();)y.iushrn(1);for(;E.isEven();)E.iushrn(1);var L=y.cmp(E);if(L<0){var H=y;y=E,E=H}else if(L===0||E.cmpn(1)===0)break;y.isub(E)}while(!0);return E.iushln(U)},r.prototype.invm=function(h){return this.egcd(h).a.umod(h)},r.prototype.isEven=function(){return(this.words[0]&1)===0},r.prototype.isOdd=function(){return(this.words[0]&1)===1},r.prototype.andln=function(h){return this.words[0]&h},r.prototype.bincn=function(h){i(typeof h=="number");var y=h%26,E=(h-y)/26,U=1<<y;if(this.length<=E)return this._expand(E+1),this.words[E]|=U,this;for(var L=U,H=E;L!==0&&H<this.length;H++){var Q=this.words[H]|0;Q+=L,L=Q>>>26,Q&=67108863,this.words[H]=Q}return L!==0&&(this.words[H]=L,this.length++),this},r.prototype.isZero=function(){return this.length===1&&this.words[0]===0},r.prototype.cmpn=function(h){var y=h<0;if(this.negative!==0&&!y)return-1;if(this.negative===0&&y)return 1;this._strip();var E;if(this.length>1)E=1;else{y&&(h=-h),i(h<=67108863,"Number is too big");var U=this.words[0]|0;E=U===h?0:U<h?-1:1}return this.negative!==0?-E|0:E},r.prototype.cmp=function(h){if(this.negative!==0&&h.negative===0)return-1;if(this.negative===0&&h.negative!==0)return 1;var y=this.ucmp(h);return this.negative!==0?-y|0:y},r.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var y=0,E=this.length-1;E>=0;E--){var U=this.words[E]|0,L=h.words[E]|0;if(U!==L){U<L?y=-1:U>L&&(y=1);break}}return y},r.prototype.gtn=function(h){return this.cmpn(h)===1},r.prototype.gt=function(h){return this.cmp(h)===1},r.prototype.gten=function(h){return this.cmpn(h)>=0},r.prototype.gte=function(h){return this.cmp(h)>=0},r.prototype.ltn=function(h){return this.cmpn(h)===-1},r.prototype.lt=function(h){return this.cmp(h)===-1},r.prototype.lten=function(h){return this.cmpn(h)<=0},r.prototype.lte=function(h){return this.cmp(h)<=0},r.prototype.eqn=function(h){return this.cmpn(h)===0},r.prototype.eq=function(h){return this.cmp(h)===0},r.red=function(h){return new R(h)},r.prototype.toRed=function(h){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),h.convertTo(this)._forceRed(h)},r.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(h){return this.red=h,this},r.prototype.forceRed=function(h){return i(!this.red,"Already a number in reduction context"),this._forceRed(h)},r.prototype.redAdd=function(h){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},r.prototype.redIAdd=function(h){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},r.prototype.redSub=function(h){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},r.prototype.redISub=function(h){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},r.prototype.redShl=function(h){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},r.prototype.redMul=function(h){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},r.prototype.redIMul=function(h){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},r.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(h){return i(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var P={k256:null,p224:null,p192:null,p25519:null};function z(A,h){this.name=A,this.p=new r(h,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}z.prototype._tmp=function(){var h=new r(null);return h.words=new Array(Math.ceil(this.n/13)),h},z.prototype.ireduce=function(h){var y=h,E;do this.split(y,this.tmp),y=this.imulK(y),y=y.iadd(this.tmp),E=y.bitLength();while(E>this.n);var U=E<this.n?-1:y.ucmp(this.p);return U===0?(y.words[0]=0,y.length=1):U>0?y.isub(this.p):y.strip!==void 0?y.strip():y._strip(),y},z.prototype.split=function(h,y){h.iushrn(this.n,0,y)},z.prototype.imulK=function(h){return h.imul(this.k)};function X(){z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(X,z),X.prototype.split=function(h,y){for(var E=4194303,U=Math.min(h.length,9),L=0;L<U;L++)y.words[L]=h.words[L];if(y.length=U,h.length<=9){h.words[0]=0,h.length=1;return}var H=h.words[9];for(y.words[y.length++]=H&E,L=10;L<h.length;L++){var Q=h.words[L]|0;h.words[L-10]=(Q&E)<<4|H>>>22,H=Q}H>>>=22,h.words[L-10]=H,H===0&&h.length>10?h.length-=10:h.length-=9},X.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var y=0,E=0;E<h.length;E++){var U=h.words[E]|0;y+=U*977,h.words[E]=y&67108863,y=U*64+(y/67108864|0)}return h.words[h.length-1]===0&&(h.length--,h.words[h.length-1]===0&&h.length--),h};function G(){z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(G,z);function te(){z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(te,z);function N(){z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(N,z),N.prototype.imulK=function(h){for(var y=0,E=0;E<h.length;E++){var U=(h.words[E]|0)*19+y,L=U&67108863;U>>>=26,h.words[E]=L,y=U}return y!==0&&(h.words[h.length++]=y),h},r._prime=function(h){if(P[h])return P[h];var y;if(h==="k256")y=new X;else if(h==="p224")y=new G;else if(h==="p192")y=new te;else if(h==="p25519")y=new N;else throw new Error("Unknown prime "+h);return P[h]=y,y};function R(A){if(typeof A=="string"){var h=r._prime(A);this.m=h.p,this.prime=h}else i(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}R.prototype._verify1=function(h){i(h.negative===0,"red works only with positives"),i(h.red,"red works only with red numbers")},R.prototype._verify2=function(h,y){i((h.negative|y.negative)===0,"red works only with positives"),i(h.red&&h.red===y.red,"red works only with red numbers")},R.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):(u(h,h.umod(this.m)._forceRed(this)),h)},R.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},R.prototype.add=function(h,y){this._verify2(h,y);var E=h.add(y);return E.cmp(this.m)>=0&&E.isub(this.m),E._forceRed(this)},R.prototype.iadd=function(h,y){this._verify2(h,y);var E=h.iadd(y);return E.cmp(this.m)>=0&&E.isub(this.m),E},R.prototype.sub=function(h,y){this._verify2(h,y);var E=h.sub(y);return E.cmpn(0)<0&&E.iadd(this.m),E._forceRed(this)},R.prototype.isub=function(h,y){this._verify2(h,y);var E=h.isub(y);return E.cmpn(0)<0&&E.iadd(this.m),E},R.prototype.shl=function(h,y){return this._verify1(h),this.imod(h.ushln(y))},R.prototype.imul=function(h,y){return this._verify2(h,y),this.imod(h.imul(y))},R.prototype.mul=function(h,y){return this._verify2(h,y),this.imod(h.mul(y))},R.prototype.isqr=function(h){return this.imul(h,h.clone())},R.prototype.sqr=function(h){return this.mul(h,h)},R.prototype.sqrt=function(h){if(h.isZero())return h.clone();var y=this.m.andln(3);if(i(y%2===1),y===3){var E=this.m.add(new r(1)).iushrn(2);return this.pow(h,E)}for(var U=this.m.subn(1),L=0;!U.isZero()&&U.andln(1)===0;)L++,U.iushrn(1);i(!U.isZero());var H=new r(1).toRed(this),Q=H.redNeg(),O=this.m.subn(1).iushrn(1),b=this.m.bitLength();for(b=new r(2*b*b).toRed(this);this.pow(b,O).cmp(Q)!==0;)b.redIAdd(Q);for(var j=this.pow(b,U),Ae=this.pow(h,U.addn(1).iushrn(1)),ue=this.pow(h,U),ke=L;ue.cmp(H)!==0;){for(var mt=ue,st=0;mt.cmp(H)!==0;st++)mt=mt.redSqr();i(st<ke);var kt=this.pow(j,new r(1).iushln(ke-st-1));Ae=Ae.redMul(kt),j=kt.redSqr(),ue=ue.redMul(j),ke=st}return Ae},R.prototype.invm=function(h){var y=h._invmp(this.m);return y.negative!==0?(y.negative=0,this.imod(y).redNeg()):this.imod(y)},R.prototype.pow=function(h,y){if(y.isZero())return new r(1).toRed(this);if(y.cmpn(1)===0)return h.clone();var E=4,U=new Array(1<<E);U[0]=new r(1).toRed(this),U[1]=h;for(var L=2;L<U.length;L++)U[L]=this.mul(U[L-1],h);var H=U[0],Q=0,O=0,b=y.bitLength()%26;for(b===0&&(b=26),L=y.length-1;L>=0;L--){for(var j=y.words[L],Ae=b-1;Ae>=0;Ae--){var ue=j>>Ae&1;if(H!==U[0]&&(H=this.sqr(H)),ue===0&&Q===0){O=0;continue}Q<<=1,Q|=ue,O++,!(O!==E&&(L!==0||Ae!==0))&&(H=this.mul(H,U[Q]),O=0,Q=0)}b=26}return H},R.prototype.convertTo=function(h){var y=h.umod(this.m);return y===h?y.clone():y},R.prototype.convertFrom=function(h){var y=h.clone();return y.red=null,y},r.mont=function(h){return new M(h)};function M(A){R.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(M,R),M.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},M.prototype.convertFrom=function(h){var y=this.imod(h.mul(this.rinv));return y.red=null,y},M.prototype.imul=function(h,y){if(h.isZero()||y.isZero())return h.words[0]=0,h.length=1,h;var E=h.imul(y),U=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),L=E.isub(U).iushrn(this.shift),H=L;return L.cmp(this.m)>=0?H=L.isub(this.m):L.cmpn(0)<0&&(H=L.iadd(this.m)),H._forceRed(this)},M.prototype.mul=function(h,y){if(h.isZero()||y.isZero())return new r(0)._forceRed(this);var E=h.mul(y),U=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),L=E.isub(U).iushrn(this.shift),H=L;return L.cmp(this.m)>=0?H=L.isub(this.m):L.cmpn(0)<0&&(H=L.iadd(this.m)),H._forceRed(this)},M.prototype.invm=function(h){var y=this.imod(h._invmp(this.m).mul(this.r2));return y._forceRed(this)}})(e,Na)})(U9);var M9="Invariant failed";function D9(e,t){if(!e)throw new Error(M9)}const I6="3.7.5",j9=I6,q9=typeof atob=="function",L9=typeof btoa=="function",Nc=typeof Buffer=="function",db=typeof TextDecoder=="function"?new TextDecoder:void 0,ub=typeof TextEncoder=="function"?new TextEncoder:void 0,N9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",rd=Array.prototype.slice.call(N9),Eu=(e=>{let t={};return e.forEach((n,i)=>t[n]=i),t})(rd),F9=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,bi=String.fromCharCode.bind(String),lb=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),B6=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),O6=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),$6=e=>{let t,n,i,s,r="";const o=e.length%3;for(let a=0;a<e.length;){if((n=e.charCodeAt(a++))>255||(i=e.charCodeAt(a++))>255||(s=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=n<<16|i<<8|s,r+=rd[t>>18&63]+rd[t>>12&63]+rd[t>>6&63]+rd[t&63]}return o?r.slice(0,o-3)+"===".substring(o):r},Vg=L9?e=>btoa(e):Nc?e=>Buffer.from(e,"binary").toString("base64"):$6,up=Nc?e=>Buffer.from(e).toString("base64"):e=>{let n=[];for(let i=0,s=e.length;i<s;i+=4096)n.push(bi.apply(null,e.subarray(i,i+4096)));return Vg(n.join(""))},il=(e,t=!1)=>t?B6(up(e)):up(e),z9=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?bi(192|t>>>6)+bi(128|t&63):bi(224|t>>>12&15)+bi(128|t>>>6&63)+bi(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return bi(240|t>>>18&7)+bi(128|t>>>12&63)+bi(128|t>>>6&63)+bi(128|t&63)}},H9=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,R6=e=>e.replace(H9,z9),fb=Nc?e=>Buffer.from(e,"utf8").toString("base64"):ub?e=>up(ub.encode(e)):e=>Vg(R6(e)),ec=(e,t=!1)=>t?B6(fb(e)):fb(e),hb=e=>ec(e,!0),K9=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,W9=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return bi((n>>>10)+55296)+bi((n&1023)+56320);case 3:return bi((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return bi((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},U6=e=>e.replace(K9,W9),M6=e=>{if(e=e.replace(/\s+/g,""),!F9.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,n="",i,s;for(let r=0;r<e.length;)t=Eu[e.charAt(r++)]<<18|Eu[e.charAt(r++)]<<12|(i=Eu[e.charAt(r++)])<<6|(s=Eu[e.charAt(r++)]),n+=i===64?bi(t>>16&255):s===64?bi(t>>16&255,t>>8&255):bi(t>>16&255,t>>8&255,t&255);return n},Xg=q9?e=>atob(O6(e)):Nc?e=>Buffer.from(e,"base64").toString("binary"):M6,D6=Nc?e=>lb(Buffer.from(e,"base64")):e=>lb(Xg(e).split("").map(t=>t.charCodeAt(0))),j6=e=>D6(q6(e)),G9=Nc?e=>Buffer.from(e,"base64").toString("utf8"):db?e=>db.decode(D6(e)):e=>U6(Xg(e)),q6=e=>O6(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),lp=e=>G9(q6(e)),V9=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},L6=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),N6=function(){const e=(t,n)=>Object.defineProperty(String.prototype,t,L6(n));e("fromBase64",function(){return lp(this)}),e("toBase64",function(t){return ec(this,t)}),e("toBase64URI",function(){return ec(this,!0)}),e("toBase64URL",function(){return ec(this,!0)}),e("toUint8Array",function(){return j6(this)})},F6=function(){const e=(t,n)=>Object.defineProperty(Uint8Array.prototype,t,L6(n));e("toBase64",function(t){return il(this,t)}),e("toBase64URI",function(){return il(this,!0)}),e("toBase64URL",function(){return il(this,!0)})},X9=()=>{N6(),F6()},tc={version:I6,VERSION:j9,atob:Xg,atobPolyfill:M6,btoa:Vg,btoaPolyfill:$6,fromBase64:lp,toBase64:ec,encode:ec,encodeURI:hb,encodeURL:hb,utob:R6,btou:U6,decode:lp,isValid:V9,fromUint8Array:il,toUint8Array:j6,extendString:N6,extendUint8Array:F6,extendBuiltins:X9};function b0(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,s,r,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(d){return function(u){return c([d,u])}}function c(d){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(n=0)),n;)try{if(i=1,s&&(r=d[0]&2?s.return:d[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,d[1])).done)return r;switch(s=0,r&&(d=[d[0]&2,r.value]),d[0]){case 0:case 1:r=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,s=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(r=n.trys,!(r=r.length>0&&r[r.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!r||d[1]>r[0]&&d[1]<r[3])){n.label=d[1];break}if(d[0]===6&&n.label<r[1]){n.label=r[1],r=d;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(d);break}r[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(u){d=[6,u],s=0}finally{i=r=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var yo;(function(e){e[e.EQUAL=0]="EQUAL",e[e.GREATER=1]="GREATER",e[e.LESS=-1]="LESS"})(yo||(yo={}));var J9=function(){function e(t){this.compare=t||e.defaultCompareFunction}return e.defaultCompareFunction=function(t,n){return t===n?yo.EQUAL:t<n?yo.LESS:yo.GREATER},e.prototype.equal=function(t,n){return this.compare(t,n)===yo.EQUAL},e.prototype.lessThan=function(t,n){return this.compare(t,n)===yo.LESS},e.prototype.greaterThan=function(t,n){return this.compare(t,n)===yo.GREATER},e.prototype.lessThanOrEqual=function(t,n){return this.lessThan(t,n)||this.equal(t,n)},e.prototype.greaterThanOrEqual=function(t,n){return this.greaterThan(t,n)||this.equal(t,n)},e.prototype.reverse=function(){var t=this.compare;this.compare=function(n,i){return t(i,n)}},e}(),pb=function(){function e(t){this.value=t,this.next=null}return e}(),gb=function(){function e(t){this.value=t,this.next=null,this.prev=null}return e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var fp=function(e,t){return fp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},fp(e,t)};function Fc(e,t){fp(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function $d(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,s,r,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(d){return function(u){return c([d,u])}}function c(d){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,s&&(r=d[0]&2?s.return:d[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,d[1])).done)return r;switch(s=0,r&&(d=[d[0]&2,r.value]),d[0]){case 0:case 1:r=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,s=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(r=n.trys,!(r=r.length>0&&r[r.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!r||d[1]>r[0]&&d[1]<r[3])){n.label=d[1];break}if(d[0]===6&&n.label<r[1]){n.label=r[1],r=d;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(d);break}r[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(u){d=[6,u],s=0}finally{i=r=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Z9(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),s,r=[],o;try{for(;(t===void 0||t-- >0)&&!(s=i.next()).done;)r.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return r}function Ws(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Z9(arguments[t]));return e}var Y9="obfuse error occur";function Il(e,t){if(!e)throw new Error("[linked-list] "+(t||Y9))}var Q9=-1,z6=function(){function e(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this._head=null,this._tail=null,this._length=0,this.compare=new J9,n.length>0&&n.forEach(function(s){t.append(s)})}return Object.defineProperty(e.prototype,"head",{get:function(){return this._head?this._head.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return this._tail?this._tail.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopLength",{get:function(){var t=!1,n=1;if(!this._head)return 0;for(var i=this._head,s=this._head;s.next&&s.next.next;)if(s=s.next.next,i=i.next,i===s){t=!0;break}if(t){for(s=s.next;i!==s;)n++,s=s.next;return n}else return 0},enumerable:!0,configurable:!0}),e.prototype.getNode=function(t){var n=this._length;Il(n>0&&t>=0&&t<n,"[linked-list] index "+t+" out of scope of list, which length is "+n);for(var i=this._head,s=0;s<t;)i=i.next,s++;return i},e.prototype.get=function(t){var n=this.getNode(t);return n?n.value:null},e.prototype.find=function(t){var n=t.value,i=t.callback;if(!this._head)return null;for(var s=this._head;s;){if(i&&i(s.value)||n!==void 0&&this.compare.equal(s.value,n))return s;s=s.next}return null},e.prototype.indexOf=function(t){if(!this._head)return Q9;for(var n=this._head,i=-1;n.next;){if(i++,this.compare.equal(n.value,t))return i;n=n.next}return n===this._tail&&this.compare.equal(n.value,t)&&(i+=1),i},e.prototype.first=function(t){Il(t>=0,"[linked-list] param 'num' ("+t+") should not less than 0");for(var n=this.iterator(),i=[],s=Math.min(t,this.length),r=0;r<s;r++){var o=n.next();i.push(o.value)}return i},e.prototype.toArray=function(){return Ws(this)},e.prototype.isEmpty=function(){return this._head===null},e.prototype.iterator=function(){var t;return $d(this,function(n){switch(n.label){case 0:t=this._head,n.label=1;case 1:return t?[4,t.value]:[3,3];case 2:return n.sent(),t=t.next,[3,1];case 3:return[2]}})},e.prototype[Symbol.iterator]=function(){return this.iterator()},e}(),Rd=function(e){Fc(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e.apply(this,Ws(n))||this}return t.prototype.append=function(n){var i=new pb(n);return this._tail?(this._tail.next=i,this._tail=i):this._head=this._tail=i,this._length++,!0},t.prototype.prepend=function(n){var i=new pb(n);return this._head?(i.next=this._head,this._head=i):this._head=this._tail=i,this._length++,!0},t.prototype.remove=function(n){var i=this._head;if(i){if(this.compare.equal(i.value,n))return i.next?(this._head=i.next,i.next=null):this._head=this._tail=null,this._length--,n;for(var s=i;;){if(this.compare.equal(i.value,n))return i.next?s.next=i.next:(this._tail=s,this._tail.next=null),i.next=null,this._length--,n;if(i.next)s=i,i=i.next;else return}}},t.prototype.removeHead=function(){var n=this._head;if(n)return this._head.next?(this._head=n.next,n.next=null):(this._head=null,this._tail=null),this._length--,n.value},t.prototype.removeTail=function(){var n=this._tail;if(n){if(!this._head.next)this._head=null,this._tail=null;else{for(var i=this._head;i.next!==n;)i=i.next;i.next=null,this._tail=i}return this._length--,n.value}},t.prototype.reverse=function(){if(this._head){var n=this._head,i=null,s;for(this._tail=this._head;n!==null;)s=n.next,n.next=i,i=n,n=s;this._head=i}},t.prototype.clone=function(){var n=this.toArray();return new(t.bind.apply(t,Ws([void 0],n)))},t}(z6),eE=function(e){Fc(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=e.apply(this,Ws(n))||this;return s.cyclization(),s}return t.prototype.iterator=function(){var n;return $d(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,n===this._head&&(n=null),[3,1];case 3:return[2]}})},t.prototype.circleIterator=function(){var n;return $d(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,[3,1];case 3:return[2]}})},t.prototype[Symbol.iterator]=function(){return this.iterator()},t.prototype.mapToNormalListFn=function(n){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];this.breakCircle();var r=e.prototype[n].apply(this,i);return this.cyclization(),r},t.prototype.getNode=function(n){return this.mapToNormalListFn("getNode",n)},t.prototype.append=function(n){return this.mapToNormalListFn("append",n)},t.prototype.prepend=function(n){return this.mapToNormalListFn("prepend",n)},t.prototype.find=function(n){return this.mapToNormalListFn("find",n)},t.prototype.indexOf=function(n){return this.mapToNormalListFn("indexOf",n)},t.prototype.remove=function(n){return this.mapToNormalListFn("remove",n)},t.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},t.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},t.prototype.first=function(n){Il(n>=0,"[linked-list] param 'num' ("+n+") should not less than 0");for(var i=this.circleIterator(),s=[],r=0;r<n;r++){var o=i.next();s.push(o.value)}return s},t.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},t.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},t}(Rd);(function(e){Fc(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=e.apply(this,Ws(n))||this;return s.cyclization(),s}return t.prototype.breakCircle=function(){this._tail&&this._tail.next===this._head&&(this._tail.next=null)},t.prototype.cyclization=function(){this._tail&&this._tail.next===null&&(this._tail.next=this._head)},t.prototype.clone=function(){var n=this.toArray();return new(t.bind.apply(t,Ws([void 0],n)))},t})(eE);var tE=function(e){Fc(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e.apply(this,Ws(n))||this}return t.prototype.append=function(n){var i=new gb(n);return this._tail?(this._tail.next=i,i.prev=this._tail,this._tail=i):this._head=this._tail=i,this._length++,!0},t.prototype.prepend=function(n){var i=new gb(n);return this._head?(i.next=this._head,this._head.prev=i,this._head=i):this._head=this._tail=i,this._length++,!0},t.prototype.remove=function(n){var i=this._head;if(i){if(this.compare.equal(i.value,n))return i.next?(this._head=i.next,this._head.prev=null,i.next=i.prev=null):this._head=this._tail=null,this._length--,n;for(;;){if(this.compare.equal(i.value,n))return i.next?(i.prev.next=i.next,i.next.prev=i.prev,i.next=i.prev=null):(i.prev.next=null,this._tail=i.prev,i.next=i.prev=null),this._length--,i.value;if(i.next)i=i.next;else return}}},t.prototype.removeHead=function(){var n=this._head;if(n)return this._head.next?(n.next.prev=null,this._head=n.next,n.next=null):(this._head=null,this._tail=null),this._length--,n.value},t.prototype.removeTail=function(){var n=this._tail;if(n)return this._head.next?(n.prev.next=null,this._tail=n.prev,n.next=n.prev=null):(this._head=null,this._tail=null),this._length--,n.value},t.prototype.reverse=function(){if(this._head){var n=this._head,i=null,s;for(this._tail=this._head;n!==null;)s=n.next,n.next=i,n.prev=s,i=n,n=s;this._head=i}},t.prototype.clone=function(){var n=this.toArray();return new(t.bind.apply(t,Ws([void 0],n)))},t}(z6),nE=function(e){Fc(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=e.apply(this,Ws(n))||this;return s.cyclization(),s}return t.prototype.iterator=function(){var n;return $d(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,n===this._head&&(n=null),[3,1];case 3:return[2]}})},t.prototype.circleIterator=function(){var n;return $d(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,[3,1];case 3:return[2]}})},t.prototype[Symbol.iterator]=function(){return this.iterator()},t.prototype.mapToNormalListFn=function(n){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];this.breakCircle();var r=e.prototype[n].apply(this,i);return this.cyclization(),r},t.prototype.getNode=function(n){return this.mapToNormalListFn("getNode",n)},t.prototype.append=function(n){return this.mapToNormalListFn("append",n)},t.prototype.prepend=function(n){return this.mapToNormalListFn("prepend",n)},t.prototype.find=function(n){return this.mapToNormalListFn("find",n)},t.prototype.indexOf=function(n){return this.mapToNormalListFn("indexOf",n)},t.prototype.remove=function(n){return this.mapToNormalListFn("remove",n)},t.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},t.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},t.prototype.first=function(n){Il(n>=0,"[linked-list] param 'num' ("+n+") should not less than 0");for(var i=this.circleIterator(),s=[],r=0;r<n;r++){var o=i.next();s.push(o.value)}return s},t.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},t.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},t}(tE);(function(e){Fc(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=e.apply(this,Ws(n))||this;return s.cyclization(),s}return t.prototype.breakCircle=function(){this._tail&&this._head&&this._tail.next===this._head&&(this._tail.next=null,this._head.prev=null)},t.prototype.cyclization=function(){this._head&&this._tail&&this._tail.next===null&&(this._tail.next=this._head,this._head.prev=this._tail)},t.prototype.clone=function(){var n=this.toArray();return new(t.bind.apply(t,Ws([void 0],n)))},t})(nE);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function iE(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),s,r=[],o;try{for(;(t===void 0||t-- >0)&&!(s=i.next()).done;)r.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return r}function sE(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(iE(arguments[t]));return e}var rE=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.queue=new(Rd.bind.apply(Rd,sE([void 0],t)))}return Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"peek",{get:function(){return this.queue.head},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this.queue.isEmpty()},e.prototype.enqueue=function(t){return this.queue.append(t)},e.prototype.dequeue=function(){var t=this.queue.removeHead();return typeof t<"u"?t:void 0},e.prototype.toArray=function(){return this.queue.toArray()},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function oE(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),s,r=[],o;try{for(;(t===void 0||t-- >0)&&!(s=i.next()).done;)r.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return r}function aE(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(oE(arguments[t]));return e}var y0=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.stack=new(Rd.bind.apply(Rd,aE([void 0],t)))}return Object.defineProperty(e.prototype,"length",{get:function(){return this.stack.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"peek",{get:function(){return this.stack.tail},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this.stack.isEmpty()},e.prototype.push=function(t){return this.stack.append(t)},e.prototype.pop=function(){var t=this.stack.removeTail();return typeof t<"u"?t:void 0},e.prototype.popBottom=function(){var t=this.stack.removeHead();return typeof t<"u"?t:void 0},e.prototype.toArray=function(){return this.stack.toArray()},e}(),H6=function(){function e(t,n,i){i===void 0&&(i=0),this.startVertex=t,this.endVertex=n,this.weight=i}return e.prototype.getKey=function(){var t=this.startVertex.getKey(),n=this.endVertex.getKey();return t+"_"+n},e.prototype.reverse=function(){var t=this.startVertex;return this.startVertex=this.endVertex,this.endVertex=t,this},e.prototype.clone=function(){return new e(this.startVertex,this.endVertex,this.weight)},e.prototype.toString=function(){return this.getKey()},e}();function hp(e,t,n){if(n===void 0&&(n="cc-graph"),!e)throw new Error((n?"["+n+"]":"")+" Invariant failed: "+t)}function cE(e,t){t===void 0&&(t=!0);var n=typeof e<"u"&&e!==null;return t?n&&e!=="undefined"&&e!=="null":n}var Bl=function(){function e(t){hp(cE(t),"Graph vertex must have a value"),this.value=t,this.edges=new Map}return e.prototype.addEdge=function(t){return this.edges.set(t.getKey(),t),this},e.prototype.deleteEdge=function(t){this.edges.delete(t.getKey())},e.prototype.getNeighbors=function(){var t=this,n=this.getEdges(),i=function(s){return s.startVertex===t?s.endVertex:s.startVertex};return n.map(i)},e.prototype.getEdges=function(){return Array.from(this.edges.values())},e.prototype.getDegree=function(){return this.getEdges().length},e.prototype.hasEdge=function(t){var n=this.getEdges().find(function(i){return i===t});return!!n},e.prototype.hasNeighbor=function(t){var n=this.getEdges().find(function(i){return i.startVertex===t||i.endVertex===t});return!!n},e.prototype.findEdge=function(t){var n=function(s){return s.startVertex===t||s.endVertex===t},i=this.getEdges().find(n);return i||null},e.prototype.getKey=function(){return this.value},e.prototype.deleteAllEdges=function(){var t=this;return this.getEdges().forEach(function(n){return t.deleteEdge(n)}),this},e.prototype.toString=function(t){return t?t(this.value):""+this.value},e}();function mb(e,t,n,i){if(e){t.push(e),i.set(e.getKey(),!0);var s=e.getNeighbors().filter(function(r){return!i.get(r.getKey())});n.push(s)}}function _b(e,t,n){var i=e.pop();i&&n.set(i.getKey(),!1),t.pop()}var K6=function(){function e(t){t===void 0&&(t=!1),this.vertices={},this.edges={},this.isDirected=t}return e.prototype.addVertex=function(t){return this.vertices[t.getKey()]=t,this},e.prototype.getVertexByKey=function(t){return this.vertices[t]},e.prototype.getNeighbors=function(t){return t.getNeighbors()},e.prototype.getAllVertices=function(){return Object.values(this.vertices)},e.prototype.getAllEdges=function(){return Object.values(this.edges)},e.prototype.addEdge=function(t,n){if(n===void 0&&(n=!1),this.edges[t.getKey()]){if(n)return this;hp(!1,"Edge has already been added before")}var i=this.getVertexByKey(t.startVertex.getKey()),s=this.getVertexByKey(t.endVertex.getKey());if(i||(this.addVertex(t.startVertex),i=this.getVertexByKey(t.startVertex.getKey())),s||(this.addVertex(t.endVertex),s=this.getVertexByKey(t.endVertex.getKey())),this.edges[t.getKey()]=t,this.isDirected)i.addEdge(t);else{i.addEdge(t);var r=t.clone();s.addEdge(r.reverse())}return this},e.prototype.deleteEdge=function(t,n){if(n===void 0&&(n=!1),!this.edges[t.getKey()]){if(n)return this;hp(!1,"Edge not found in graph")}delete this.edges[t.getKey()];var i=this.getVertexByKey(t.startVertex.getKey()),s=this.getVertexByKey(t.endVertex.getKey());return i.deleteEdge(t),s.deleteEdge(t),this},e.prototype.findEdge=function(t,n){var i=this.getVertexByKey(t.getKey());return i?i.findEdge(n):null},e.prototype.getWeight=function(){return this.getAllEdges().reduce(function(t,n){return t+n.weight},0)},e.prototype.reverse=function(){var t=this;return this.getAllEdges().forEach(function(n){t.deleteEdge(n),n.reverse(),t.addEdge(n)}),this},e.prototype.getVerticesIndices=function(){var t={};return this.getAllVertices().forEach(function(n,i){t[n.getKey()]=i}),t},e.prototype.getAdjacencyMatrix=function(){var t=this,n=this.getAllVertices(),i=this.getVerticesIndices(),s=Array(n.length).fill(null).map(function(){return Array(n.length).fill(1/0)});return n.forEach(function(r,o){r.getNeighbors().forEach(function(a){var c=i[a.getKey()],d=t.findEdge(r,a);d&&(s[o][c]=d.weight)})}),s},e.prototype.toString=function(){return Object.keys(this.vertices).toString()},e.prototype.bfs=function(t){var n,i,s;return b0(this,function(r){switch(r.label){case 0:n=new Map,i=new rE,i.enqueue(t),r.label=1;case 1:return i.isEmpty()?[3,4]:(s=i.dequeue(),s&&!n.has(s.getKey())?[4,s]:[3,3]);case 2:r.sent(),n.set(s.getKey(),s),s.getNeighbors().forEach(function(o){return i.enqueue(o)}),r.label=3;case 3:return[3,1];case 4:return[2]}})},e.prototype.dfs=function(t){var n,i,s;return b0(this,function(r){switch(r.label){case 0:n=new Map,i=new y0,i.push(t),r.label=1;case 1:return i.isEmpty()?[3,4]:(s=i.pop(),s&&!n.has(s.getKey())?[4,s]:[3,3]);case 2:r.sent(),n.set(s.getKey(),s),s.getNeighbors().forEach(function(o){return i.push(o)}),r.label=3;case 3:return[3,1];case 4:return[2]}})},e.prototype.findAllPath=function(t,n){var i,s,r,o,a,c,d;return b0(this,function(u){switch(u.label){case 0:return i=[],t!==n?[3,2]:(i.push(t),[4,i]);case 1:return u.sent(),[2];case 2:s=new Map,r=new y0,o=new y0,mb(t,r,o,s),u.label=3;case 3:if(r.isEmpty())return[3,6];if(a=o.pop(),a&&a.length)c=a.shift(),o.push(a),c&&mb(c,r,o,s);else return o.push(a),_b(r,o,s),[3,3];return d=r.peek,d!==n?[3,5]:[4,r.toArray()];case 4:u.sent(),_b(r,o,s),u.label=5;case 5:return[3,3];case 6:return[2]}})},e}();ie.config({precision:64,rounding:ie.ROUND_DOWN,toExpNeg:-64,toExpPos:64});var ji=ie,mi=class extends Error{constructor(t,n){super(t),this.message=t,this.errorCode=n}static isClmmpoolsErrorCode(t,n){return t instanceof mi&&t.errorCode===n}},$e=new w(0),Qo=new w(1),bh=new w(2);bh.pow(new w(128));var Ol=bh.pow(new w(64)).sub(Qo),dE=bh.pow(new w(128)).sub(Qo),Ct=class{static toX64_BN(t){return t.mul(new w(2).pow(new w(64)))}static toX64_Decimal(t){return t.mul(ji.pow(2,64))}static toX64(t){return new w(t.mul(ji.pow(2,64)).floor().toFixed())}static fromX64(t){return new ji(t.toString()).mul(ji.pow(2,-64))}static fromX64_Decimal(t){return t.mul(ji.pow(2,-64))}static fromX64_BN(t){return t.div(new w(2).pow(new w(64)))}static shiftRightRoundUp(t){let n=t.shrn(64);return t.mod(Ol).gt($e)&&(n=n.add(Qo)),n}static divRoundUp(t,n){return t.mod(n).eq($e)?t.div(n):t.div(n).add(new w(1))}static subUnderflowU128(t,n){return t.lt(n)?t.sub(n).add(dE):t.sub(n)}static checkUnsignedSub(t,n){const i=t.sub(n);if(i.isNeg())throw new mi("Unsigned integer sub overflow","UnsignedIntegerOverflow");return i}static checkMul(t,n,i){const s=t.mul(n);if(this.isOverflow(s,i))throw new mi("Multiplication overflow","MultiplicationOverflow");return s}static checkMulDivFloor(t,n,i,s){if(i.eq($e))throw new mi("Devide by zero","DivideByZero");const r=t.mul(n).div(i);if(this.isOverflow(r,s))throw new mi("Multiplication div overflow","MulDivOverflow");return r}static checkMulDivCeil(t,n,i,s){if(i.eq($e))throw new mi("Devide by zero","DivideByZero");const r=t.mul(n).add(i.sub(Qo)).div(i);if(this.isOverflow(r,s))throw new mi("Multiplication div overflow","MulDivOverflow");return r}static checkMulDivRound(t,n,i,s){if(i.eq($e))throw new mi("Devide by zero","DivideByZero");const r=t.mul(n.add(i.shrn(1))).div(i);if(this.isOverflow(r,s))throw new mi("Multiplication div overflow","MulDivOverflow");return r}static checkMulShiftRight(t,n,i,s){const r=t.mul(n).div(new w(2).pow(new w(i)));if(this.isOverflow(r,s))throw new mi("Multiplication shift right overflow","MulShiftRightOverflow");return r}static checkMulShiftRight64RoundUpIf(t,n,i,s){const r=t.mul(n),a=s&&r.and(Ol).gt($e)?r.shrn(64).add(Qo):r.shrn(64);if(this.isOverflow(a,i))throw new mi("Multiplication shift right overflow","MulShiftRightOverflow");return a}static checkMulShiftLeft(t,n,i,s){const r=t.mul(n).shln(i);if(this.isOverflow(r,s))throw new mi("Multiplication shift left overflow","MulShiftLeftOverflow");return r}static checkDivRoundUpIf(t,n,i){if(n.eq($e))throw new mi("Devide by zero","DivideByZero");return i?this.divRoundUp(t,n):t.div(n)}static isOverflow(t,n){return t.gte(bh.pow(new w(n)))}};function W6(e){return{coinA:e.coinTypeA.toString(),coinB:e.coinTypeB.toString(),currentSqrtPrice:new w(e.current_sqrt_price),currentTickIndex:e.current_tick_index,feeGrowthGlobalA:new w(e.fee_growth_global_a),feeGrowthGlobalB:new w(e.fee_growth_global_b),feeProtocolCoinA:new w(e.fee_protocol_coin_a),feeProtocolCoinB:new w(e.fee_protocol_coin_b),feeRate:e.fee_rate,liquidity:new w(e.liquidity),tickIndexes:[],tickSpacing:Number(e.tickSpacing),ticks:[],collection_name:e.collectionName}}function uE(e){const t=new w(e);return t.lt($e)?{bits:t.neg().xor(new w(2).pow(new w(64)).sub(new w(1))).add(new w(1)).toString()}:{bits:t.toString()}}var G6="0x1::coin::CoinInfo",V6="0x1::coin::CoinStore",bb="0x3::token::TokenStore",lE="0x3::token::WithdrawEvent",fE="PoolLiquidityCoin",Ho="clmm_router",X6="factory",J6="Pools",hE="pool",pE="Pool",gE="crowdsale",mE="CrowdsalePool",_E="fairlaunch",bE="FairlaunchPool",Qs="cetus_script",Z6="cscoin",Y6="liquidity",pp="scripts";function yE(e){return e.startsWith("0x")?`${e.slice(2)}`:e}function sr(e){let t="";const n=yE(e),i=n.length/2;for(let s=0;s<i;s++)t+=String.fromCharCode(parseInt(n.substr(s*2,2),16));return wE(t)}function wE(e){let t,n,i,s,r,o;for(t="",i=e.length,n=0;n<i;)switch(s=e.charCodeAt(n++),s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=e.charAt(n-1);break;case 12:case 13:r=e.charCodeAt(n++),t+=String.fromCharCode((s&31)<<6|r&63);break;case 14:r=e.charCodeAt(n++),o=e.charCodeAt(n++),t+=String.fromCharCode((s&15)<<12|(r&63)<<6|(o&63)<<0);break}return t}var vE=/^0x1::coin::CoinStore<(.+)>$/;function Ut(e,...t){const n=Array.isArray(t[t.length-1])?t.pop():[];let s=[e,...t].filter(Boolean).join("::");return n&&n.length&&(s+=`<${n.join(", ")}>`),s}function yb(e){return Ut(Dt.fromUint8Array(e.value.address.address).hex(),e.value.module_name.value,e.value.name.value,[])}function xE(e){const t=e.value.type_args[0],n=e.value.type_args[1],i=yb(t),s=yb(n),r=Ut(Dt.fromUint8Array(e.value.address.address).hex(),e.value.module_name.value,e.value.name.value,[i,s]);return{coinA:i,coinB:s,lpAddress:r}}function Jg(e){var t;let n=e.replace(/\s/g,"");const i=n.match(/(<.+>)$/),s=(t=i==null?void 0:i[0])==null?void 0:t.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(s)return n=n.slice(0,n.indexOf("<")),{...Jg(n),type_arguments:[...s]};const r=n.split("::");return{full_address:n,address:r[0],module:r[1],name:r[2],type_arguments:[]}}function wb(e){const t=e.match(vE);return t?t[1]:""}function TE(e){return`${V6}<${e}>`}function AE(e){return`${G6}<${e}>`}var yh=class{constructor(t,n=0){this.overdueTime=n,this.value=t}getCacheData(){return this.value===null?null:this.overdueTime===0?this.value:Date.parse(new Date().toString())>this.overdueTime?(this.value=null,null):this.value}},vb=443636,xb=-443636,wh="79226673515401279992447579055",vh="4295048016",Fa=new w(1e6),$l=class{static getDefaultSqrtPriceLimit(t){return new w(t?vh:wh)}static getDefaultOtherAmountThreshold(t){return t?$e:Ol}},Rl=class{constructor(t,n){this.toString=()=>`${this.numerator.toString()}/${this.denominator.toString()}`,this.numerator=t,this.denominator=n}static fromDecimal(t){return Rl.fromFraction(t.toDecimalPlaces(1).mul(10).toNumber(),1e3)}static fromFraction(t,n){const i=typeof t=="number"?new w(t.toString()):t,s=typeof n=="number"?new w(n.toString()):n;return new Rl(i,s)}},kE=14,SE="59543866431248",EE="184467440737095516",PE="15793534762490258745";function CE(e,t,n){const i=e.toTwos(n).shln(t);return i.imaskn(n+1),i.fromTwos(n)}function Jt(e,t,n){const i=e.toTwos(n).shrn(t);return i.imaskn(n-t+1),i.fromTwos(n-t)}function IE(e){let t;return e&1?t=new w("79232123823359799118286999567"):t=new w("79228162514264337593543950336"),e&2&&(t=Jt(t.mul(new w("79236085330515764027303304731")),96,256)),e&4&&(t=Jt(t.mul(new w("79244008939048815603706035061")),96,256)),e&8&&(t=Jt(t.mul(new w("79259858533276714757314932305")),96,256)),e&16&&(t=Jt(t.mul(new w("79291567232598584799939703904")),96,256)),e&32&&(t=Jt(t.mul(new w("79355022692464371645785046466")),96,256)),e&64&&(t=Jt(t.mul(new w("79482085999252804386437311141")),96,256)),e&128&&(t=Jt(t.mul(new w("79736823300114093921829183326")),96,256)),e&256&&(t=Jt(t.mul(new w("80248749790819932309965073892")),96,256)),e&512&&(t=Jt(t.mul(new w("81282483887344747381513967011")),96,256)),e&1024&&(t=Jt(t.mul(new w("83390072131320151908154831281")),96,256)),e&2048&&(t=Jt(t.mul(new w("87770609709833776024991924138")),96,256)),e&4096&&(t=Jt(t.mul(new w("97234110755111693312479820773")),96,256)),e&8192&&(t=Jt(t.mul(new w("119332217159966728226237229890")),96,256)),e&16384&&(t=Jt(t.mul(new w("179736315981702064433883588727")),96,256)),e&32768&&(t=Jt(t.mul(new w("407748233172238350107850275304")),96,256)),e&65536&&(t=Jt(t.mul(new w("2098478828474011932436660412517")),96,256)),e&131072&&(t=Jt(t.mul(new w("55581415166113811149459800483533")),96,256)),e&262144&&(t=Jt(t.mul(new w("38992368544603139932233054999993551")),96,256)),Jt(t,32,256)}function BE(e){const t=Math.abs(e);let n;return t&1?n=new w("18445821805675392311"):n=new w("18446744073709551616"),t&2&&(n=Jt(n.mul(new w("18444899583751176498")),64,256)),t&4&&(n=Jt(n.mul(new w("18443055278223354162")),64,256)),t&8&&(n=Jt(n.mul(new w("18439367220385604838")),64,256)),t&16&&(n=Jt(n.mul(new w("18431993317065449817")),64,256)),t&32&&(n=Jt(n.mul(new w("18417254355718160513")),64,256)),t&64&&(n=Jt(n.mul(new w("18387811781193591352")),64,256)),t&128&&(n=Jt(n.mul(new w("18329067761203520168")),64,256)),t&256&&(n=Jt(n.mul(new w("18212142134806087854")),64,256)),t&512&&(n=Jt(n.mul(new w("17980523815641551639")),64,256)),t&1024&&(n=Jt(n.mul(new w("17526086738831147013")),64,256)),t&2048&&(n=Jt(n.mul(new w("16651378430235024244")),64,256)),t&4096&&(n=Jt(n.mul(new w("15030750278693429944")),64,256)),t&8192&&(n=Jt(n.mul(new w("12247334978882834399")),64,256)),t&16384&&(n=Jt(n.mul(new w("8131365268884726200")),64,256)),t&32768&&(n=Jt(n.mul(new w("3584323654723342297")),64,256)),t&65536&&(n=Jt(n.mul(new w("696457651847595233")),64,256)),t&131072&&(n=Jt(n.mul(new w("26294789957452057")),64,256)),t&262144&&(n=Jt(n.mul(new w("37481735321082")),64,256)),n}var tn=class{static priceToSqrtPriceX64(t,n,i){return Ct.toX64(t.mul(ji.pow(10,i-n)).sqrt())}static sqrtPriceX64ToPrice(t,n,i){return Ct.fromX64(t).pow(2).mul(ji.pow(10,n-i))}static tickIndexToSqrtPriceX64(t){return t>0?new w(IE(t)):new w(BE(t))}static sqrtPriceX64ToTickIndex(t){if(t.gt(new w(wh))||t.lt(new w(vh)))throw new Error("Provided sqrtPrice is not within the supported sqrtPrice range.");const n=t.bitLength()-1,i=new w(n-64),s=CE(i,32,128);let r=new w("8000000000000000","hex"),o=0,a=new w(0),c=n>=64?t.shrn(n-63):t.shln(63-n);for(;r.gt(new w(0))&&o<kE;){c=c.mul(c);const _=c.shrn(127);c=c.shrn(63+_.toNumber()),a=a.add(r.mul(_)),r=r.shrn(1),o+=1}const d=a.shrn(32),l=s.add(d).mul(new w(SE)),f=Jt(l.sub(new w(EE)),64,128).toNumber(),p=Jt(l.add(new w(PE)),64,128).toNumber();return f===p?f:tn.tickIndexToSqrtPriceX64(p).lte(t)?p:f}static tickIndexToPrice(t,n,i){return tn.sqrtPriceX64ToPrice(tn.tickIndexToSqrtPriceX64(t),n,i)}static priceToTickIndex(t,n,i){return tn.sqrtPriceX64ToTickIndex(tn.priceToSqrtPriceX64(t,n,i))}static priceToInitializableTickIndex(t,n,i,s){return tn.getInitializableTickIndex(tn.priceToTickIndex(t,n,i),s)}static getInitializableTickIndex(t,n){return t-t%n}static getNextInitializableTickIndex(t,n){return tn.getInitializableTickIndex(t,n)+n}static getPrevInitializableTickIndex(t,n){return tn.getInitializableTickIndex(t,n)-n}};function Q6(e){const t=[];for(const n of e){const i={index:Number(BigInt.asIntN(64,BigInt(n.index.bits)).toString()),sqrtPrice:new w(n.sqrt_price),liquidityNet:new w(BigInt.asIntN(64,BigInt(n.liquidity_net.bits)).toString()),liquidityGross:new w(n.liquidity_gross),feeGrowthOutsideA:new w(n.fee_growth_outside_a),feeGrowthOutsideB:new w(n.fee_growth_outside_b),rewardersGrowthOutside:[new w(n.rewarders_growth_outside[0]),new w(n.rewarders_growth_outside[1]),new w(n.rewarders_growth_outside[2])]};t.push(i)}return t}function Tb(e){return e.isAxiosError,e}function At(e){return ji.isDecimal(e)?e:new ji(e===void 0?0:e)}function Zg(e){return At(10).pow(At(e).abs())}function OE(e){return e!=null&&e!==""&&!isNaN(Number(e.toString()))}new w(365);new w(24);new w(3600);new w(.5);function $E(e,t,n,i,s,r){const o=new ie(e.toString()).div(new ie(10**n)),a=new ie(t.toString()).div(new ie(10**i));return o.mul(s).add(a.mul(r))}function RE(e,t,n,i,s,r,o,a,c,d,u,l,f,p,m,_,x,C,k,T,S,P,z,X){const G=new ie(l),te=new ie(f),N=new ie(_),R=new ie(x),M=new ie(C),A=new ie(k),h=new ie(T),y=new ie(S),E=new ie(P),U=new ie(z),L=new ie(X),H=tn.tickIndexToSqrtPriceX64(t),Q=tn.tickIndexToSqrtPriceX64(n),O=Ct.toX64_Decimal(Ct.fromX64(H)).round(),b=Ct.toX64_Decimal(Ct.fromX64(Q)).round(),j=Ct.toX64_Decimal(Ct.fromX64(i)).round();let Ae;const ue=G.mul(new ie(10**r)).mul(b.mul(O)).div(b.sub(O)).round(),ke=te.mul(new ie(10**o)).div(b.sub(O)).round();e<t?Ae=ue:e>n?Ae=ke:Ae=ie.min(ue,ke);const mt=Ae.mul(j.sub(O)),kt=Ae.mul(b.sub(j)).div(j.mul(b)).div(new ie(10**r)).mul(h).add(mt.div(new ie(10**o).mul(y))),ut=$E(p,m,r,o,h,y),ft=kt.div(ut),Et=Ae.eq(new ie(0))?new ie(0):new ie(u/1e4).mul(N).mul(new ie(Ae.toString()).div(new ie(s.toString()).add(new ie(Ae.toString())))).div(kt),pi=ft.eq(new ie(0))?new ie(0):ft.mul(new ie(36500/7)).div(kt),se=R.div(new ie(10**a)).mul(E).mul(pi),fe=M.div(new ie(10**c)).mul(U).mul(pi),Re=A.div(new ie(10**d)).mul(L).mul(pi);return{feeAPR:Et,posRewarder0APR:se,posRewarder1APR:fe,posRewarder2APR:Re}}function UE(e,t,n,i){const s=Math.max(e,n),o=Math.min(t,i)-s,a=t-e,c=i-n,d=new ie(a.toString()),u=new ie(c.toString()),l=new ie(o.toString());let f=new ie("0");return o<0?f=new ie("0"):a===o?f=u.div(l):c===o?f=l.div(d):f=l.mul(l).div(u).div(d),f}function ME(e){const{clmmpool:t,position:n,tickLower:i,tickUpper:s}=e,{current_tick_index:r,fee_growth_global_a:o,fee_growth_global_b:a}=t;console.log({currentTickIndex:r,feeGrowthGlobalAX64:o,feeGrowthGlobalBX64:a});const{tick_lower_index:c,tick_upper_index:d,liquidity:u,fee_owed_a:l,fee_owed_b:f,fee_growth_inside_a:p,fee_growth_inside_b:m}=n,{feeGrowthOutsideA:_,feeGrowthOutsideB:x}=i,{feeGrowthOutsideA:C,feeGrowthOutsideB:k}=s;let T=null,S=null;r<Number(c)?(T=Ct.subUnderflowU128(new w(o),new w(_)),S=Ct.subUnderflowU128(new w(a),new w(x))):(T=_,S=x);let P=null,z=null;r<Number(d)?(P=C,z=k):(P=Ct.subUnderflowU128(new w(o),new w(C)),z=Ct.subUnderflowU128(new w(a),new w(k)));const X=Ct.subUnderflowU128(Ct.subUnderflowU128(new w(o),new w(T)),new w(P)),G=Ct.subUnderflowU128(Ct.subUnderflowU128(new w(a),new w(S)),new w(z)),te=Ct.subUnderflowU128(new w(X),new w(p)).mul(new w(u)).shrn(64),N=Ct.subUnderflowU128(new w(G),new w(m)).mul(new w(u)).shrn(64),R=new w(At(l).add(At(te.toString())).toString()),M=new w(At(f).add(At(N.toString())).toString());return{feeOwedA:R,feeOwedB:M}}var no=1e9,DE=5*60*1e3,Pu=24*60*60*1e3;function Ab(e){return Date.parse(new Date().toString())+e}var jE=class{constructor(t){this._cache={},this._sdk=t}get sdk(){return this._sdk}async getPoolImmutablesResource(t=!1){const n=this._sdk.sdkOptions.networkOptions.launchpad.cetusLaunchpad,i=`${n}_getMmutablesPools`,s=this.getCacheData(i);let r;if(!t&&s!=null)r=s;else{const o=Ut(n,X6,J6),a=await this._sdk.Resources.fetchAccountResource(n,o);r=JSON.parse(JSON.stringify(a==null?void 0:a.data)),this.updateCache(i,r,Pu)}return r}async getLaunchpadPools(t=[],n=0,i=100,s=null,r=!1){const o=this._sdk.sdkOptions.networkOptions.launchpad.cetusLaunchpad,a=[],d=(await this.getPoolImmutablesResource(r)).data.data,u=t.length>0;for(let l=0;l<d.length;l+=1){const f=d[l],{pool_address:p,creater_address:m,pool_type:_}=f.value;if(s==="fixed_price"&&_!==0||s==="fair_launch"&&_===0||u&&!t.includes(p))continue;if(!u){const G=Number(l);if(G<n||G>=n+i)continue}const x=f.key,C=Ut(x.coin_raise.account_address,sr(x.coin_raise.module_name),sr(x.coin_raise.struct_name)),k=Ut(x.coin_sale.account_address,sr(x.coin_sale.module_name),sr(x.coin_sale.struct_name)),T=Is.buildLaunchpadPoolType(_===0,o,k,C),S={coin_type_sale:k,coin_type_raise:C,pool_type:T,pool_address:p,creator:m,pool_mode:_===0?"fixed_price":"fair_launch"},P=await this.getLaunchpadPoolState(S.pool_address,S.pool_type,S.pool_mode),z={...S,...P};await this.calculateLaunchpadPoolField(z),a.push(z);const X=`${p}_pool`;this.updateCache(X,z,Pu)}return a}async getLaunchpadPool(t,n=!0){const i=`${t}_pool`,s=this.getCacheData(i);let r;if(s!==null&&!n&&(r=s),r==null)return(await this.getLaunchpadPools([t]))[0];const o=await this.getLaunchpadPoolState(t,r.pool_type,r.pool_mode),a={...r,...o};return await this.calculateLaunchpadPoolField(a),this.updateCache(i,a,Pu),a}async getSpecifyCoinDecimals(t){const n={};(await this._sdk.Token.getSpecifyTokenListByCache(t)).forEach(o=>{n[o.address]=o.decimals});const s=t.filter(o=>n[o]===void 0);return(await this._sdk.Resources.getSpecifyCoinInfos(s)).forEach(o=>{n[o.coinAddress]=Number(o.decimals)}),n}async calculateLaunchpadPoolField(t){const n=await this.getSpecifyCoinDecimals([t.coin_type_sale,t.coin_type_raise]),i=Number(n[t.coin_type_sale]),s=Number(n[t.coin_type_raise]);if(t.initialize_price=Is.priceFixToReal(t.initialize_price,i,s),Is.isFixedPricePool(t))t.raise_total=Is.raiseTotalAmount(t,i,s);else{t.raise_total=Is.raiseTotalAmount(t,i,s);const o=At(t.raise_coin_amount).div(At(10).pow(At(s))),a=At(t.sale_total).div(At(10).pow(At(i)));a.toNumber()>0?t.price=o.div(a).toNumber():t.price=0}return Is.updatePoolStaus(t),!0}async getLaunchpadPoolState(t,n,i,s=!0){const r=`${t}_${n}_getLaunchpadPoolState`;if(!s){const d=this.getCacheData(r);if(d!==null)return d}const o=await this._sdk.Resources.fetchAccountResource(t,n),a=JSON.parse(JSON.stringify(o==null?void 0:o.data)),c=Is.buildLaunchpadFixedPoolState(i,a);return this.updateCache(r,c,Pu),c}async getOwnerLaunchpadCoins(t){const n=await this._sdk.Resources.getCoinStores(t),i=[];return n.forEach(s=>{const r=Jg(s.coinAddress);r.module===Z6&&i.push({coin_type_sale:r.type_arguments[0],coin_type_raise:r.type_arguments[1],coin_address:s.coinAddress,balance:Number(s.coin.value)})}),i}async getSimplePosition(t){const n=await this._sdk.Resources.fetchAccountResource(t,Ut(this._sdk.sdkOptions.networkOptions.launchpad.cetusLaunchpad,"clmmProxy","LockedPosition")),i=JSON.parse(JSON.stringify(n==null?void 0:n.data));return{position_name:i.token_id.token_data_id.name,collection:i.token_id.token_data_id.collection,creator:i.token_id.token_data_id.creator,unlock_time:i.unlock_time,is_redeem:i.is_redeem}}async hasPoolWhitelist(t){const{launchpad:n}=this._sdk.sdkOptions.networkOptions,i={handle:"",exist:!1};try{const s=await this._sdk.Resources.fetchAccountResource(t,Ut(n.cetusLaunchpad,"whitelist","Whitelist")),r=JSON.parse(JSON.stringify(s==null?void 0:s.data));return i.exist=Number(r.users.length)>0,i.handle=r.users.inner.handle,i}catch(s){console.log(s)}return i}async inPoolWhitelist(t,n){if(!n.exist)return!1;try{return await this._sdk.client.getTableItem(n.handle,{key_type:"address",value_type:"u8",key:t}),!0}catch(i){console.log(i)}return!1}buildLaunchpadCoinType(t,n){return Ut(this._sdk.sdkOptions.networkOptions.launchpad.crowdCoin,"cscoin","CS",[t,n])}creatPoolTransactionPayload(t,n=!1){const{launchpad:i}=this.sdk.sdkOptions.networkOptions,s="is_admin"in t,r=`${i.cetusLaunchpad}::${Qs}`,o=s?t.is_admin?"create_crowdsale_pool_authority":"create_crowdsale_pool":"create_fairlaunch_pool",a=Is.priceRealToFix(t.initialize_price,t.sale_decimals,t.raise_decimals);console.log("fixPrice:",a);const c=tn.priceToSqrtPriceX64(At(t.initialize_price),t.sale_decimals,t.raise_decimals).toString();return s?Is.buildCreatCrowdsalePoolPayload(t,c,a,r,o,n):Is.buildCreatFairlaunchPoolPayload(t,c,a,r,o,n)}updatePoolTransactionPayload(t,n=!1){const{launchpad:i}=this.sdk.sdkOptions.networkOptions,s=`${i.cetusLaunchpad}::${Qs}`,r="update_pool";if(n){const d=[new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_sale)),new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_raise))],u=[de.bcsToBytes(F.AccountAddress.fromHex(t.pool_addr)),de.bcsSerializeUint64(t.start_time),de.bcsSerializeUint64(t.liquidity_rate*100),de.bcsSerializeUint64(t.activity_duration),de.bcsSerializeUint64(t.calmdown_duraction),de.bcsSerializeUint64(t.settle_duration),de.bcsSerializeUint64(t.locked_duration)];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(s,r,d,u))}const o=Ut(s,r),a=[t.coin_type_sale,t.coin_type_raise],c=[t.pool_addr,t.start_time,t.liquidity_rate*100,t.activity_duration,t.calmdown_duraction,t.settle_duration,t.locked_duration];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}purchaseTransactionPayload(t,n=!1){const{launchpad:i}=this.sdk.sdkOptions.networkOptions,s=`${i.cetusLaunchpad}::${Qs}`,r="purchase";if(n){const d=[new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_sale)),new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_raise))],u=[de.bcsToBytes(F.AccountAddress.fromHex(t.pool_addr)),de.bcsSerializeUint64(t.raise_amount_in)];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(s,r,d,u))}const o=Ut(s,r),a=[t.coin_type_sale,t.coin_type_raise],c=[t.pool_addr,t.raise_amount_in];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}revokeTransactionPayload(t,n=!1){const{launchpad:i}=this.sdk.sdkOptions.networkOptions,s=`${i.cetusLaunchpad}::${Qs}`,r="revoke";if(n){const d=[new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_sale)),new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_raise))],u=[de.bcsToBytes(F.AccountAddress.fromHex(t.pool_addr)),de.bcsSerializeUint64(t.cs_coin_amount)];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(s,r,d,u))}const o=Ut(s,r),a=[t.coin_type_sale,t.coin_type_raise],c=[t.pool_addr,t.cs_coin_amount];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}settleTransactionPayload(t,n=!1){const{launchpad:i}=this.sdk.sdkOptions.networkOptions,s=`${i.cetusLaunchpad}::${Qs}`,r=t.pool_mode==="fixed_price",o=r?"crowd_sale_settle":"fair_launch_settle";if(n){const d=[new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_sale)),new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_raise))];return r?new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(s,o,d,[])):new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(s,o,d,[de.bcsSerializeU128(BigInt(t.initialize_sqrt_price))]))}const a=Ut(s,o),c=[t.coin_type_sale,t.coin_type_raise];return{type:"entry_function_payload",function:a,type_arguments:c,arguments:r?[]:[t.initialize_sqrt_price]}}claimTransactionPayload(t,n=!1){const{launchpad:i}=this.sdk.sdkOptions.networkOptions,s=`${i.cetusLaunchpad}::${Qs}`,r="claim";if(n){const d=[new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_sale)),new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_raise))],u=[de.bcsToBytes(F.AccountAddress.fromHex(t.pool_addr)),de.bcsSerializeUint64(t.cs_coin_amount)];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(s,r,d,u))}const o=Ut(s,r),a=[t.coin_type_sale,t.coin_type_raise],c=[t.pool_addr,t.cs_coin_amount];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}claimFeeTransactionPayload(t,n=!1){const{launchpad:i}=this.sdk.sdkOptions.networkOptions,s=`${i.cetusLaunchpad}::${Qs}`,r="claim_fee";if(n){const d=[new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_sale)),new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_raise))],u=[de.bcsToBytes(F.AccountAddress.fromHex(t.pool_addr))];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(s,r,d,u))}const o=Ut(s,r),a=[t.coin_type_sale,t.coin_type_raise],c=[t.pool_addr];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}withdrawTransactionPayload(t,n=!1){const{launchpad:i}=this.sdk.sdkOptions.networkOptions,s=`${i.cetusLaunchpad}::${Qs}`,r=t.is_withdraw_sale?"withdraw_sale":"withdraw_raise";if(n){const d=[new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_sale)),new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_raise))],u=[de.bcsToBytes(F.AccountAddress.fromHex(t.pool_addr))];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(s,r,d,u))}const o=Ut(s,r),a=[t.coin_type_sale,t.coin_type_raise],c=[t.pool_addr];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}redeemPositionTransactionPayload(t,n=!1){const{launchpad:i}=this.sdk.sdkOptions.networkOptions,s=`${i.cetusLaunchpad}::${Qs}`,r="redeem_position";if(n){const c=[new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_sale)),new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_raise))];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(s,r,c,[]))}const o=Ut(s,r),a=[t.coin_type_sale,t.coin_type_raise];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:[]}}userToWhitelistTransactionPayload(t,n=!1){const{launchpad:i}=this.sdk.sdkOptions.networkOptions,s=`${i.cetusLaunchpad}::${Qs}`,r=t.isAdd?"add_user_to_whitelist":"remove_user_from_whitelist";if(n){const d=[new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_sale)),new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_raise))],u=[de.bcsToBytes(F.AccountAddress.fromHex(t.user_addr))];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(s,r,d,u))}const o=Ut(s,r),a=[t.coin_type_sale,t.coin_type_raise],c=[t.user_addr];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}updateCache(t,n,i=DE){let s=this._cache[t];s?(s.overdueTime=Ab(i),s.value=n):s=new yh(n,Ab(i)),this._cache[t]=s}getCacheData(t){const n=this._cache[t];return n!==void 0&&n.getCacheData()?n.value:null}};function qE(e,t,n,i){const s=e.shln(64),r=n.sub(t);return i?Ct.divRoundUp(s,r):s.div(r)}var Is=class{static minSettlePurchaseAmount(t){return At(t.sale_total).mul(t.initialize_price).mul(t.least_raise_rate).toNumber()}static get_sale_liquidity_amount(t,n,i,s,r,o){const a=gp.getMinIndex(t),c=gp.getMaxIndex(t),d=this.priceRealToFix(s,r,o),u=new w(n*d*i),l=new w(tn.priceToSqrtPriceX64(At(d),0,0).toString()),f=qE(u,tn.tickIndexToSqrtPriceX64(a),l,!1);return ZE(l,tn.tickIndexToSqrtPriceX64(c),f,!0).toString()}static raiseTotalAmount(t,n,i){const s=At(n-i).abs().toNumber();return n>i?Number(At(t.sale_total).mul(t.initialize_price).div(At(10).pow(At(s))).toString()):Number(At(t.sale_total).mul(t.initialize_price).mul(At(10).pow(At(s))).toString())}static priceRealToFix(t,n,i){const s=At(n-i).toNumber();return Number(At(t).div(At(10).pow(At(s))).toString())}static priceFixToReal(t,n,i){const s=At(n-i).toNumber();return Number(At(t).mul(At(10).pow(At(s))).toString())}static buildLaunchpadPoolType(t,n,i,s){return t?Ut(Ut(n,gE,mE),[i,s]):Ut(Ut(n,_E,bE),[i,s])}static isFixedPricePool(t){return t.pool_mode==="fixed_price"}static getFairLaunchSettleSqrtPrice(t,n,i){if(t.pool_status!=="Settle")throw new Error("The pool is not in settle ");const s=tn.priceToSqrtPriceX64(At(t.price),n,i).toString();return console.log("sqrtPrice: ",s.toString()),s.toString()}static async updatePoolStaus(t){const n=Is.isFixedPricePool(t),i=Number(At(Date.now()/1e3).toFixed(0));if(t.end_activity_time=Number(t.start_activity_time)+Number(t.activity_duration),n)if(t.end_settle_time=Number(t.end_activity_time)+Number(t.settle_duration),t.is_settle)t.pool_status="Ended";else if(i<Number(t.start_activity_time))t.pool_status="Upcoming";else if(i>=t.start_activity_time&&i<t.end_activity_time)t.pool_status="Live";else if(i>=t.end_activity_time&&i<t.end_settle_time){const s=t.raise_coin_amount,r=At(t.raise_total).mul(At(t.least_raise_rate)).toNumber();s<r?t.pool_status="Failed":t.pool_status="Settle"}else t.pool_status="Failed";else if(t.end_calm_down_time=Number(t.end_activity_time)+Number(t.calmdown_duration),t.end_settle_time=Number(t.end_calm_down_time)+Number(t.settle_duration),t.is_settle)t.pool_status="Ended";else if(i<Number(t.start_activity_time))t.pool_status="Upcoming";else if(i>=t.start_activity_time&&i<t.end_activity_time)t.pool_status="Live";else if(i>=t.end_activity_time&&i<t.end_calm_down_time)t.pool_status="Calmdown";else if(i>=t.end_calm_down_time&&i<t.end_settle_time){const s=t.raise_coin_amount,r=At(t.raise_total).mul(At(t.least_raise_rate)).toNumber();s<r?t.pool_status="Failed":t.pool_status="Settle"}else t.pool_status="Failed";return!0}static buildLaunchpadFixedPoolState(t,n){return t==="fixed_price"?{sale_coin_amount:n.sale_coin.value,raise_coin_amount:n.raise_coin.value,activity_duration:n.activity_duration,clmm_pool_address:n.clmm_pool_address,cs_burn_cap:n.cs_burn_cap.dummy_field,cs_mint_cap:n.cs_mint_cap.dummy_field,fee_amount:n.fee_amount,fee_rate:n.fee_rate,initialize_price:Number(n.initialize_price)/no,initialize_sqrt_price:BigInt(n.initialize_sqrt_price),is_settle:n.is_settle,least_raise_rate:Number(n.least_raise_rate)/100,liquidity_rate:Number(n.liquidity_rate)/100,locked_duration:n.locked_duration,sale_total:n.sale_total,raise_total:0,settle_duration:n.settle_duration,start_activity_time:n.start_time,unused_raise:n.unused_raise,unused_sale:n.unused_sale,has_whiteList:n.has_white_list,pool_status:"Upcoming",end_activity_time:0,end_settle_time:0}:{price:0,sale_coin_amount:0,raise_coin_amount:n.raise_coin.value,sale_total:n.sale_coin.value,raise_total:0,calmdown_duration:n.calmdown_duration,initialize_price:Number(n.price)/no,activity_duration:n.activity_duration,clmm_pool_address:n.clmm_pool_address,cs_burn_cap:n.cs_burn_cap.dummy_field,cs_mint_cap:n.cs_mint_cap.dummy_field,fee_amount:n.fee_amount,fee_rate:n.fee_rate,is_settle:n.is_settle,least_raise_rate:Number(n.least_raise_amount)/100,liquidity_rate:Number(n.liquidity_rate)/100,locked_duration:n.locked_duration,settle_duration:n.settle_duration,start_activity_time:n.start_time,has_whiteList:n.has_white_list,pool_status:"Upcoming",end_activity_time:0,end_calm_down_time:0,end_settle_time:0}}static buildCreatCrowdsalePoolPayload(t,n,i,s,r,o=!1){if(o){const u=[new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_sale)),new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_raise))],l=t.is_admin?[de.bcsSerializeU128(i*no),de.bcsSerializeU128(BigInt(n)),de.bcsSerializeUint64(t.tick_spacing),de.bcsSerializeUint64(t.sale_total),de.bcsSerializeUint64(t.start_time),de.bcsSerializeUint64(t.least_raise_rate*100),de.bcsSerializeUint64(t.activity_duration),de.bcsSerializeUint64(t.settle_duration),de.bcsSerializeUint64(t.locked_duration),de.bcsSerializeU8(0)]:[de.bcsSerializeU128(i*no),de.bcsSerializeU128(BigInt(n)),de.bcsSerializeUint64(t.tick_spacing),de.bcsSerializeUint64(t.sale_total),de.bcsSerializeUint64(t.start_time),de.bcsSerializeUint64(t.least_raise_rate*100),de.bcsSerializeUint64(t.liquidity_rate*100),de.bcsSerializeUint64(t.activity_duration),de.bcsSerializeUint64(t.settle_duration),de.bcsSerializeUint64(t.locked_duration),de.bcsSerializeU8(0)];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(s,r,u,l))}const a=Ut(s,r),c=[t.coin_type_sale,t.coin_type_raise],d=t.is_admin?[i*no,n,t.tick_spacing,t.sale_total,t.start_time,t.least_raise_rate*100,t.activity_duration,t.settle_duration,t.locked_duration,0]:[i*no,n,t.tick_spacing,t.sale_total,t.start_time,t.least_raise_rate*100,t.liquidity_rate*100,t.activity_duration,t.settle_duration,t.locked_duration,0];return{type:"entry_function_payload",function:a,type_arguments:c,arguments:d}}static buildCreatFairlaunchPoolPayload(t,n,i,s,r,o=!1){if(o){const u=[new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_sale)),new F.TypeTagStruct(F.StructTag.fromString(t.coin_type_raise))],l=[de.bcsSerializeU128(i*no),de.bcsSerializeU128(BigInt(n)),de.bcsSerializeUint64(t.tick_spacing),de.bcsSerializeUint64(t.sale_total),de.bcsSerializeUint64(t.start_time),de.bcsSerializeUint64(t.least_raise_rate*100),de.bcsSerializeUint64(t.liquidity_rate*100),de.bcsSerializeUint64(t.activity_duration),de.bcsSerializeUint64(t.calmdown_duraction),de.bcsSerializeUint64(t.settle_duration),de.bcsSerializeUint64(t.locked_duration)];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(s,r,u,l))}const a=Ut(s,r),c=[t.coin_type_sale,t.coin_type_raise],d=[i*no,n,t.tick_spacing,t.sale_total,t.start_time,t.liquidity_rate*100,de.bcsSerializeUint64(t.least_raise_rate*100),t.activity_duration,t.calmdown_duraction,t.settle_duration,t.locked_duration];return{type:"entry_function_payload",function:a,type_arguments:c,arguments:d}}};function LE(e){let t;switch(e){case 5:t=5;break;case 10:t=10;break;case 20:t=20;break;case 25:t=25;break;case 50:t=50;break;case 100:t=100;break;default:t=1}const n=100/t+1,i=new Array(n);for(let s=0;s<n;s+=1)i[s]=s*t;return i}function sl(e,t){const n=LE(t),i=new Array(n.length);for(let s=0;s<n.length;s+=1)i[s]=e.muln(n[s]).divn(100);return i}function NE(e,t,n,i){for(let s=t;s<e;s+=1)n.amountInArray[s]=n.amountInArray[s].add(i.amountIn),n.amountOutArray[s]=n.amountOutArray[s].add(i.amountOut),n.feeAmountArray[s]=n.feeAmountArray[s].add(i.feeAmount);return n}function FE(e,t,n,i,s){let r=new w(i.liquidity),{currentSqrtPrice:o}=i,a={amountInArray:[],amountOutArray:[],feeAmountArray:[],nextSqrtPriceArray:[],isExceed:[]};n.forEach(()=>{a.amountInArray.push($e),a.amountOutArray.push($e),a.feeAmountArray.push($e),a.nextSqrtPriceArray.push($e)});let c,d;const u=$l.getDefaultSqrtPriceLimit(e),l=n.length;let f=n[1],p=1,m;e?m=s.sort((_,x)=>x.index-_.index):m=s.sort((_,x)=>_.index-x.index);for(const _ of m){if(e){if(i.currentTickIndex<_.index)continue}else if(i.currentTickIndex>_.index)continue;if(_===null)continue;e&&u.gt(_.sqrtPrice)||!e&&u.lt(_.sqrtPrice)?c=u:c=_.sqrtPrice;let x={amountIn:$e,amountOut:$e,nextSqrtPrice:$e,feeAmount:$e};const C=o,k=r;let T=f,S=p;for(let P=p;P<l;P+=1){const z=n2(o,c,r,f,new w(i.feeRate),t);if(x=z,z.amountIn.eq($e)||(f=t?f.sub(z.amountIn.add(z.feeAmount)):f.sub(z.amountOut)),f.eq($e))a.amountInArray[P]=a.amountInArray[P].add(z.amountIn),a.amountOutArray[P]=a.amountOutArray[P].add(z.amountOut),a.feeAmountArray[P]=a.feeAmountArray[P].add(z.feeAmount),z.nextSqrtPrice.eq(_.sqrtPrice)?(d=e?_.liquidityNet.mul(new w(-1)):_.liquidityNet,r=d.gt($e)?r.add(d):r.sub(d.abs()),o=_.sqrtPrice):o=z.nextSqrtPrice,a.amountInArray[P]=a.amountInArray[P].add(a.feeAmountArray[P]),a.nextSqrtPriceArray[P]=o,r=k,o=C,P!==l-1&&(f=T.add(n[P+1].sub(n[S]))),p+=1;else{a=NE(l,P,a,z),T=f,S=p;break}}if(p===l)break;x.nextSqrtPrice.eq(_.sqrtPrice)?(d=e?_.liquidityNet.mul(new w(-1)):_.liquidityNet,r=d.gt($e)?r.add(d):r.sub(d.abs()),o=_.sqrtPrice):o=x.nextSqrtPrice}return t?n.forEach((_,x)=>{a.isExceed.push(a.amountInArray[x].lt(_))}):n.forEach((_,x)=>{a.isExceed.push(a.amountOutArray[x].lt(_))}),a}var zE=class{constructor(e,t,n,i,s,r){this.minSplitUnit=t,this.a2b=i,this.byAmountIn=s,this.clmmpool=n,this.ticks=r,this.amountArray=[],this.createSplitSwapParams=this.createSplitSwapParams.bind(this),this.createSplitSwapParams(e,t),this.splitSwapResult={amountInArray:[],amountOutArray:[],feeAmountArray:[],nextSqrtPriceArray:[],isExceed:[]},this.computeSwap=this.computeSwap.bind(this)}createSplitSwapParams(e,t){const n=sl(e,t);this.amountArray=n}computeSwap(){const e=W6(this.clmmpool);return this.splitSwapResult=FE(this.a2b,this.byAmountIn,this.amountArray,e,this.ticks),this.splitSwapResult}},gp=class{static getMinIndex(t){return xb+Math.abs(xb)%t}static getMaxIndex(t){return vb-vb%t}};function HE(e,t,n,i,s,r){const o=e.rewarder_infos,a=[];for(let c=0;c<o.length;c+=1){let d=r[c];t!==null&&(e.current_tick_index<i?d=r[c].sub(new w(t.rewardersGrowthOutside[c])):d=t.rewardersGrowthOutside[c]);let u=new w(0);n!==null&&(e.current_tick_index>=s?u=r[c].sub(new w(n.rewardersGrowthOutside[c])):u=n.rewardersGrowthOutside[c]);const l=Ct.subUnderflowU128(Ct.subUnderflowU128(new w(r[c]),new w(d)),new w(u));a.push(l)}return a}function KE(e){if(e){const t={};return e.maxGasAmount&&(t.maxGasAmount=BigInt(e.maxGasAmount)),e.gasUnitPrice&&(t.gasUnitPrice=BigInt(e.gasUnitPrice)),e.expireTimestamp&&(t.expireTimestamp=BigInt(e.expireTimestamp)),t}}function WE(e,t){return new nl(i=>{const s=new Uint8Array(64);return new F.Ed25519Signature(s)},e.toUint8Array()).sign(t)}function GE(e){if(e){const t={};return e.maxGasAmount&&(t.max_gas_amount=e.maxGasAmount.toString()),e.gasUnitPrice&&(t.gas_unit_price=e.gasUnitPrice.toString()),e.expireTimestamp&&(t.expiration_timestamp_secs=e.expireTimestamp.toString()),t}}async function VE(e,t,n,i,s=!0){if(n instanceof F.TransactionPayload){const u=await e.generateRawTransaction(t.address,n,KE(i)),l=WE(t.pubkey,u),f=await e.submitBCSSimulation(l);return s&&console.log(f[0]),f[0]}const r=n,o=await e.generateTransaction(t.address,r,GE(i)),a={type:"ed25519_signature",public_key:t.pubkey.hex(),signature:Dt.fromUint8Array(new Uint8Array(64)).hex()},c={sender:t.address.hex(),sequence_number:o.sequence_number.toString(),max_gas_amount:o.max_gas_amount.toString(),gas_unit_price:o.gas_unit_price.toString(),expiration_timestamp_secs:o.expiration_timestamp_secs.toString(),payload:r,signature:a},d=await e.client.transactions.simulateTransaction(c);return s&&console.log(d[0]),d[0]}async function Cu(e,t,n,i){return VE(e,t,n,i,!1)}function kb(e,t){const n=new de.Serializer;n.serializeU32AsUleb128(e.length);const i=n[t];return e.forEach(s=>{n.serializeU32AsUleb128(s.length),s.forEach(r=>{i.call(n,r)})}),n.getBytes()}function XE(e){const t=new de.Serializer;return t.serializeU32AsUleb128(e.length),e.forEach(n=>{t.serializeU32AsUleb128(n.length),n.forEach(i=>{i.serialize(t)})}),t.getBytes()}function JE(e){const t=new de.Serializer;return t.serializeU32AsUleb128(e.length),e.forEach(n=>{n.serialize(t)}),t.getBytes()}function ZE(e,t,n,i){const s=e.gt(t)?e.sub(t):t.sub(e),r=n.mul(s).shln(64),o=e.mul(t),a=r.div(o),c=r.mod(o);return i&&!c.eq($e)?a.add(new w(1)):a}function e2(e,t,n,i){if(n.eq($e))return e;const s=Ct.checkMulShiftLeft(e,t,64,256),r=t.shln(64),o=Ct.checkMul(e,n,256);if(!i&&r.lte(o))throw new mi("getNextSqrtPriceAUp - Unable to divide liquidityShl64 by product","DivideByZero");const a=i?Ct.checkDivRoundUpIf(s,r.add(o),!0):Ct.checkDivRoundUpIf(s,r.sub(o),!0);if(a.lt(new w(vh)))throw new mi("getNextSqrtPriceAUp - Next sqrt price less than min sqrt price","CoinAmountMinSubceeded ");if(a.gt(new w(wh)))throw new mi("getNextSqrtPriceAUp - Next sqrt price greater than max sqrt price","CoinAmountMaxExceeded");return a}function t2(e,t,n,i){const s=Ct.checkDivRoundUpIf(n.shln(64),t,!i),r=i?e.add(s):e.sub(s);if(r.lt(new w(vh))||r.gt(new w(wh)))throw new mi("getNextSqrtPriceAUp - Next sqrt price out of bounds","SqrtPriceOutOfBounds");return r}function YE(e,t,n,i){return i?e2(e,t,n,!0):t2(e,t,n,!0)}function QE(e,t,n,i){return i?t2(e,t,n,!1):e2(e,t,n,!1)}function Sb(e,t,n,i){const s=e.gt(t)?e.sub(t):t.sub(e);if(n.lte($e)||s.eq($e))return $e;let r;if(i){const o=new w(n).mul(new w(s)).shln(64),a=t.mul(e),c=o.div(a);r=o.mod(a).eq($e)?c:c.add(Qo)}else{const o=new w(n).mul(new w(s));r=o.and(Ol).gt($e)?o.shrn(64).add(Qo):o.shrn(64)}return r}function Eb(e,t,n,i){const s=e.gt(t)?e.sub(t):t.sub(e);if(n.lte($e)||s.eq($e))return $e;let r;if(i)r=n.mul(s).shrn(64);else{const o=n.mul(s).shln(64),a=t.mul(e);r=o.div(a)}return r}function n2(e,t,n,i,s,r){if(n===$e)return{amountIn:$e,amountOut:$e,nextSqrtPrice:t,feeAmount:$e};const o=e.gte(t);let a,c,d,u;if(r){const l=Ct.checkMulDivFloor(i,Ct.checkUnsignedSub(Fa,s),Fa,64),f=Sb(e,t,n,o);f.gt(l)?(a=l,u=Ct.checkUnsignedSub(i,l),d=YE(e,n,l,o)):(a=f,u=Ct.checkMulDivCeil(a,s,Fa.sub(s),64),d=t),c=Eb(e,d,n,o)}else{const l=Eb(e,t,n,o);l.gt(i)?(c=i,d=QE(e,n,i,o)):(c=l,d=t),a=Sb(e,d,n,o),u=Ct.checkMulDivCeil(a,s,Fa.sub(s),64)}return{amountIn:a,amountOut:c,nextSqrtPrice:d,feeAmount:u}}function eP(e,t,n,i,s){let r=n,o=i.liquidity,{currentSqrtPrice:a}=i;const c={amountIn:$e,amountOut:$e,feeAmount:$e,refAmount:$e,nextSqrtPrice:$e,crossTickNum:0};let d,u;const l=$l.getDefaultSqrtPriceLimit(e);for(const f of s){if(e){if(i.currentTickIndex<f.index)continue}else if(i.currentTickIndex>f.index)continue;if(f===null)continue;e&&l.gt(f.sqrtPrice)||!e&&l.lt(f.sqrtPrice)?d=l:d=f.sqrtPrice;const p=n2(a,d,o,r,new w(i.feeRate),t);if(p.amountIn.eq($e)||(r=t?r.sub(p.amountIn.add(p.feeAmount)):r.sub(p.amountOut)),c.amountIn=c.amountIn.add(p.amountIn),c.amountOut=c.amountOut.add(p.amountOut),c.feeAmount=c.feeAmount.add(p.feeAmount),p.nextSqrtPrice.eq(f.sqrtPrice)?(u=e?f.liquidityNet.mul(new w(-1)):f.liquidityNet,o=u.gt($e)?o.add(u):o.sub(u.abs()),a=f.sqrtPrice):a=p.nextSqrtPrice,c.crossTickNum+=1,r.eq($e))break}return c.amountIn=c.amountIn.add(c.feeAmount),c.nextSqrtPrice=a,c}function za(e,t,n){const i=w.min(e,t),s=w.max(e,t),r=Ct.fromX64_BN(n.mul(s).mul(i)),o=s.sub(i);return r.div(o)}function Ha(e,t,n){const i=w.min(e,t),r=w.max(e,t).sub(i);return n.shln(64).div(r)}var fs=class{constructor(){}static getFeeRate(t){return Rl.fromFraction(t,1e6)}static updateFeeRate(t,n,i,s,r){const o=Ct.checkMulDivCeil(n,new w(s),Fa,64),a=i===0?$e:Ct.checkMulDivFloor(n,new w(i),Fa,64),c=n.mul(o).mul(a);if(r?t.feeProtocolCoinA=t.feeProtocolCoinA.add(o):t.feeProtocolCoinB=t.feeProtocolCoinB.add(o),c.eq($e)||t.liquidity.eq($e))return{refFee:a,clmm:t};const d=c.shln(64).div(t.liquidity);return r?t.feeGrowthGlobalA=t.feeGrowthGlobalA.add(d):t.feeGrowthGlobalB=t.feeGrowthGlobalB.add(d),{refFee:a,clmm:t}}static getProtocolFeeRate(t){return Rl.fromFraction(t,1e4)}static getCoinAmountFromLiquidity(t,n,i,s,r){const o=new ji(t.toString()),a=new ji(n.toString()),c=new ji(i.toString()),d=new ji(s.toString());let u,l;return n.lt(i)?(u=Ct.toX64_Decimal(o).mul(d.sub(c)).div(c.mul(d)),l=new ji(0)):n.lt(s)?(u=Ct.toX64_Decimal(o).mul(d.sub(a)).div(a.mul(d)),l=Ct.fromX64_Decimal(o.mul(a.sub(c)))):(u=new ji(0),l=Ct.fromX64_Decimal(o.mul(d.sub(c)))),r?{coinA:new w(u.ceil().toString()),coinB:new w(l.ceil().toString())}:{coinA:new w(u.floor().toString()),coinB:new w(l.floor().toString())}}static estimateLiquidityFromcoinAmounts(t,n,i,s){if(n>i)throw new Error("lower tick cannot be greater than lower tick");const r=tn.sqrtPriceX64ToTickIndex(t),o=tn.tickIndexToSqrtPriceX64(n),a=tn.tickIndexToSqrtPriceX64(i);if(r<n)return za(o,a,s.coinA);if(r>=i)return Ha(a,o,s.coinB);const c=za(t,a,s.coinA),d=Ha(t,o,s.coinB);return w.min(c,d)}static estLiquidityAndcoinAmountFromOneAmounts(t,n,i,s,r,o,a){const c=tn.sqrtPriceX64ToTickIndex(a),d=tn.tickIndexToSqrtPriceX64(t),u=tn.tickIndexToSqrtPriceX64(n);let l;if(c<t){if(!s)throw new Error("lower tick cannot calculate liquidity by coinB");l=za(d,u,i)}else if(c>n){if(s)throw new Error("upper tick cannot calculate liquidity by coinA");l=Ha(u,d,i)}else s?l=za(a,u,i):l=Ha(a,d,i);const f=fs.getCoinAmountFromLiquidity(l,a,d,u,r),p=f.coinA.mul(new w(1+o)),m=f.coinB.mul(new w(1+o));return{tokenMaxA:p,tokenMaxB:m,liquidityAmount:l}}static estCoinAmountsFromTotalAmount(t,n,i,s,r,o){const{ratioA:a,ratioB:c}=fs.calculateDepositRatioFixTokenA(t,n,i);console.log({ratioA:a,ratioB:c});const d=At(s).mul(a).div(r),u=At(s).mul(c).div(o);return{amountA:d,amountB:u}}static calculateDepositRatioFixTokenA(t,n,i){const s=new w(1),{tokenMaxB:r}=fs.estLiquidityAndcoinAmountFromOneAmounts(t,n,s,!0,!0,0,i),o=tn.sqrtPriceX64ToPrice(i,0,0),a=At(s.toString()).mul(o),c=a.add(r.toString()),d=a.div(c),u=At(r.toString()).div(c);return{ratioA:d,ratioB:u}}},tP=class{constructor(t){this._cache={},this._sdk=t}get sdk(){return this._sdk}async fetchAccountResource(t,n,i=0){let s=this._cache[t+n];if(s!=null&&s.getCacheData())return s.value;const r=await this.sdk.Resources.fetchAccountResource(t,n);return s=new yh(r,i),this._cache[t+n]=s,r}calculateRates(t){const{currentPool:n}=t,i=W6(n);let s;t.a2b?s=t.swapTicks.sort((f,p)=>p.index-f.index):s=t.swapTicks.sort((f,p)=>f.index-p.index);const r=eP(t.a2b,t.byAmountIn,t.amount,i,s);let o=!1;t.byAmountIn?o=r.amountIn.lt(t.amount):o=r.amountOut.lt(t.amount);const a=$l.getDefaultSqrtPriceLimit(t.a2b);t.a2b&&r.nextSqrtPrice.lt(a)&&(o=!0),!t.a2b&&r.nextSqrtPrice.gt(a)&&(o=!0);let c=0;r.crossTickNum>6&&r.crossTickNum<40&&(c=22e3*(r.crossTickNum-6)),r.crossTickNum>40&&(o=!0);const d=tn.sqrtPriceX64ToPrice(i.currentSqrtPrice,t.decimalsA,t.decimalsB).toNumber(),u=tn.sqrtPriceX64ToPrice(r.nextSqrtPrice,t.decimalsA,t.decimalsB).toNumber(),l=Math.abs(d-u)/d*100;return{estimatedAmountIn:r.amountIn,estimatedAmountOut:r.amountOut,estimatedEndSqrtPrice:r.nextSqrtPrice,estimatedFeeAmount:r.feeAmount,isExceed:o,extraComputeLimit:c,amount:t.amount,aToB:t.a2b,byAmountIn:t.byAmountIn,priceImpactPct:l}}transformSwapData(t){const{modules:n}=this._sdk.sdkOptions.networkOptions,i=t.filter(o=>o.type!=="write_resource"?!1:o.data.type===`${n.ClmmIntegrate}::calculator::CalculatedSwapResult`);return i.length===0?[]:i[0].data.data.data||[]}async preswap(t){const{modules:n,simulationAccount:i}=this.sdk.sdkOptions.networkOptions,s=new bn(this.sdk.sdkOptions.rpcUrl),r=`${n.ClmmIntegrate}::scripts`,o="calculate_swap_result",a=[new F.TypeTagStruct(F.StructTag.fromString(t.pool.coinTypeA)),new F.TypeTagStruct(F.StructTag.fromString(t.pool.coinTypeB))],c=[de.bcsToBytes(F.AccountAddress.fromHex(t.pool.poolAddress)),de.bcsSerializeBool(t.a2b),de.bcsSerializeBool(t.by_amount_in),de.bcsSerializeUint64(BigInt(t.amount))],d=new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(r,o,a,c)),u=kc(i.address),l=await s.generateRawTransaction(u,d),f=kc(i.pubkey),p=new F.Ed25519PublicKey(f.toUint8Array()),m=await s.simulateTransaction(p,l),_=this.transformSwapData(m[0].changes),x=tn.sqrtPriceX64ToPrice(new w(t.pool.current_sqrt_price),t.decimalsA,t.decimalsB).toNumber(),C=tn.sqrtPriceX64ToPrice(new w(_.after_sqrt_price),t.decimalsA,t.decimalsB).toNumber(),k=Math.abs(x-C)/x*100;return{estimatedAmountIn:_.amount_in&&_.fee_amount?new w(_.amount_in).add(new w(_.fee_amount)).toString():"",estimatedAmountOut:_.amount_out,estimatedEndSqrtPrice:_.after_sqrt_price,estimatedFeeAmount:_.fee_amount,isExceed:_.is_exceed,amount:t.amount,aToB:t.a2b,byAmountIn:t.by_amount_in,priceImpactPct:k}}createSwapTransactionPayload(t,n=!1){const{modules:i}=this.sdk.sdkOptions.networkOptions,s=`${i.LiquidswapDeployer}::${Ho}`,r="swap",o=$l.getDefaultSqrtPriceLimit(t.a_to_b);if(n){const d=[new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeA)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeB))],u=[de.bcsToBytes(F.AccountAddress.fromHex(t.pool_addr)),de.bcsSerializeBool(t.a_to_b),de.bcsSerializeBool(t.by_amount_in),de.bcsSerializeUint64(BigInt(t.amount)),de.bcsSerializeUint64(BigInt(t.amount_limit)),de.bcsSerializeU128(BigInt(o.toString())),de.bcsSerializeStr(t.partner)];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(s,r,d,u))}const a=[t.pool_addr,t.a_to_b,t.by_amount_in,t.amount,t.amount_limit,o.toString(),t.partner],c=[t.coinTypeA,t.coinTypeB];return{type:"entry_function_payload",function:Ut(s,r),type_arguments:c,arguments:a}}},nP=class{constructor(t){this._sdk=t}get sdk(){return this._sdk}createAddLiquidityTransactionPayload(t,n=!1){const{modules:i}=this.sdk.sdkOptions.networkOptions,s=!("delta_liquidity"in t),r=`${i.LiquidswapDeployer}::${Ho}`,o=s?"add_liquidity_fix_token":"add_liquidity";if(n){const l=[new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeA)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeB))],f=s?[de.bcsToBytes(F.AccountAddress.fromHex(t.pool)),de.bcsSerializeUint64(Number(t.amount_a)),de.bcsSerializeUint64(Number(t.amount_b)),de.bcsSerializeBool(t.fix_amount_a),de.bcsSerializeUint64(BigInt.asUintN(64,BigInt(t.tick_lower))),de.bcsSerializeUint64(BigInt.asUintN(64,BigInt(t.tick_upper))),de.bcsSerializeBool(t.is_open),de.bcsSerializeUint64(t.index)]:[de.bcsToBytes(F.AccountAddress.fromHex(t.pool)),de.bcsSerializeU128(t.delta_liquidity.toNumber()),de.bcsSerializeUint64(Number(t.max_amount_a)),de.bcsSerializeUint64(Number(t.max_amount_b)),de.bcsSerializeUint64(BigInt.asUintN(64,BigInt(t.tick_lower))),de.bcsSerializeUint64(BigInt.asUintN(64,BigInt(t.tick_upper))),de.bcsSerializeBool(t.is_open),de.bcsSerializeUint64(t.index)];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(r,o,l,f))}const a=BigInt.asUintN(64,BigInt(t.tick_lower)).toString(),c=BigInt.asUintN(64,BigInt(t.tick_upper)).toString(),d=s?[t.pool,t.amount_a,t.amount_b,t.fix_amount_a,a,c,t.is_open,t.index]:[t.pool,t.delta_liquidity.toString(),String(t.max_amount_a),String(t.max_amount_b),a,c,t.is_open,t.index],u=[t.coinTypeA,t.coinTypeB];return{type:"entry_function_payload",function:Ut(r,o),type_arguments:u,arguments:d}}removeLiquidityTransactionPayload(t,n=!1){D9(t.delta_liquidity.gtn(0));const{modules:i}=this.sdk.sdkOptions.networkOptions,s=`${i.LiquidswapDeployer}::${Ho}`,r=`${i.ClmmIntegrate}::${Y6}`,o=["remove_liquidity","remove_all_liquidity","remove_all_liquidity_for_two","remove_all_liquidity_for_three"];let a,c,d=[];if(t.rewards_num===0){if(n){const u=[new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeA)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeB))],l=[de.bcsToBytes(F.AccountAddress.fromHex(t.pool)),de.bcsSerializeU128(t.delta_liquidity.toNumber()),de.bcsSerializeUint64(t.min_amount_a),de.bcsSerializeUint64(t.min_amount_b),de.bcsSerializeUint64(t.pos_index),de.bcsSerializeBool(t.is_close)];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(s,o[0],u,l))}a=Ut(s,o[0]),c=[t.coinTypeA,t.coinTypeB],d=[t.pool,t.delta_liquidity.toNumber(),t.min_amount_a,t.min_amount_b,t.pos_index,t.is_close]}else if(t.rewards_num===1){if(n){const u=[new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeA)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeB)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeC))],l=[de.bcsToBytes(F.AccountAddress.fromHex(t.pool)),de.bcsSerializeU128(t.delta_liquidity.toNumber()),de.bcsSerializeUint64(t.min_amount_a),de.bcsSerializeUint64(t.min_amount_b),de.bcsSerializeUint64(t.pos_index),de.bcsSerializeBool(t.is_close)];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(r,o[1],u,l))}a=Ut(r,o[1]),c=[t.coinTypeA,t.coinTypeB,t.coinTypeC],d=[t.pool,t.delta_liquidity.toNumber(),t.min_amount_a,t.min_amount_b,t.pos_index,t.is_close]}else if(t.rewards_num===2){if(n){const u=[new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeA)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeB)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeC)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeD))],l=[de.bcsToBytes(F.AccountAddress.fromHex(t.pool)),de.bcsSerializeU128(t.delta_liquidity.toNumber()),de.bcsSerializeUint64(t.min_amount_a),de.bcsSerializeUint64(t.min_amount_b),de.bcsSerializeUint64(t.pos_index),de.bcsSerializeBool(t.is_close)];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(r,o[2],u,l))}a=Ut(r,o[2]),c=[t.coinTypeA,t.coinTypeB,t.coinTypeC,t.coinTypeD],d=[t.pool,t.delta_liquidity.toNumber(),t.min_amount_a,t.min_amount_b,t.pos_index,t.is_close]}else{if(n){const u=[new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeA)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeB)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeC)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeD)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeE))],l=[de.bcsToBytes(F.AccountAddress.fromHex(t.pool)),de.bcsSerializeU128(t.delta_liquidity.toNumber()),de.bcsSerializeUint64(t.min_amount_a),de.bcsSerializeUint64(t.min_amount_b),de.bcsSerializeUint64(t.pos_index),de.bcsSerializeBool(t.is_close)];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(r,o[3],u,l))}a=Ut(r,o[3]),c=[t.coinTypeA,t.coinTypeB,t.coinTypeC,t.coinTypeD,t.coinTypeE],d=[t.pool,t.delta_liquidity.toNumber(),t.min_amount_a,t.min_amount_b,t.pos_index,t.is_close]}return{type:"entry_function_payload",function:a,type_arguments:c,arguments:d}}closePositionTransactionPayload(t,n=!1){const{modules:i}=this.sdk.sdkOptions.networkOptions,s=`${i.LiquidswapDeployer}::${Ho}`,r="close_position";if(n){const d=[new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeA)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeB))],u=[de.bcsToBytes(F.AccountAddress.fromHex(t.pool_address)),de.bcsSerializeUint64(t.pos_index)];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(s,r,d,u))}const o=Ut(s,r),a=[t.coinTypeA,t.coinTypeB],c=[t.pool_address,t.pos_index];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}collectFeeTransactionPayload(t,n=!1){const{modules:i}=this.sdk.sdkOptions.networkOptions,s=`${i.LiquidswapDeployer}::${Ho}`,r="collect_fee";if(n){const d=[new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeA)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeB))],u=[de.bcsToBytes(F.AccountAddress.fromHex(t.pool)),de.bcsSerializeUint64(t.pos_index)];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(s,r,d,u))}const o=Ut(s,r),a=[t.coinTypeA,t.coinTypeB],c=[t.pool,t.pos_index];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}};function iP(e){let t="";const i=new _h(e).parseTypeTag().value.type_args;if(i.length>0){const s=i[0];s.value.name.value===fE||s.value.name.value===Z6?t=xE(s).lpAddress:t=Ut(Dt.fromUint8Array(s.value.address.address).toShortString(),s.value.module_name.value,s.value.name.value,[])}return t}var sP=5*60*1e3,er=24*60*60*1e3;function Pb(e){return Date.parse(new Date().toString())+e}var rP=class{constructor(e){this._cache={},this._sdk=e}get sdk(){return this._sdk}async getPoolImmutablesResource(e=!1){const t=this._sdk.sdkOptions.networkOptions.modules.LiquidswapDeployer,n=`${t}_getMmutablesPools`,i=this.getCacheData(n);let s;if(!e&&i!=null)s=i;else{const o=Ut(t,X6,J6),a=await this.fetchAccountResource(t,o);s=JSON.parse(JSON.stringify(a==null?void 0:a.data.data)),this.updateCache(n,s,er)}return s.data}buildPoolImmutables(e,t,n){const i=n.key,s=Ut(i.coin_type_a.account_address,sr(i.coin_type_a.module_name),sr(i.coin_type_a.struct_name)),r=Ut(i.coin_type_b.account_address,sr(i.coin_type_b.module_name),sr(i.coin_type_b.struct_name)),o=Ut(Ut(t,hE,pE),[s,r]);return{coinTypeA:s,coinTypeB:r,poolType:o,poolAddress:e,tickSpacing:i.tick_spacing}}async getPoolImmutables(e=[],t=0,n=100,i=!0){const s=this._sdk.sdkOptions.networkOptions.modules.LiquidswapDeployer,r=[],o=await this.getPoolImmutablesResource(i),a=e.length>0;for(let c=0;c<o.length;c+=1){const d=o[c],u=d.value;if(!(a&&!e.includes(u))){if(!a){const l=Number(c);if(l<t||l>=t+n)continue}r.push(this.buildPoolImmutables(u,s,d))}}return r}async getPools(e=[],t=0,n=100){const i=[],s=(await this.sdk.getGlobalConfig()).is_pause,r=await this.getPoolImmutables(e,t,n,!1);for(let o=0;o<r.length;o+=1){const a=r[o],c=await this.getPoolState(a.poolAddress,a.poolType,s),d={...a,...c};i.push(d);const u=`${a.poolAddress}_pool`;this.updateCache(u,d,er)}return i}async getPool(e,t=!0){const n=`${e}_pool`,i=this.getCacheData(n);let s;if(i!==null&&!t&&(s=i),s==null)return(await this.getPools([e]))[0];const r=(await this.sdk.getGlobalConfig(!0)).is_pause,o=await this.getPoolState(e,s.poolType,r),a={...s,...o};return this.updateCache(n,a,er),a}async getPoolState(e,t,n,i=!0){const s=`${e}_${t}getPool`;if(!i){const u=this.getCacheData(s);if(u!==null)return u}const r=await this.fetchAccountResource(e,t),o=JSON.parse(JSON.stringify(r==null?void 0:r.data)),a=o.rewarder_infos,c=[];a.forEach(u=>{const l=Ut(u.coin_type.account_address,sr(u.coin_type.module_name),sr(u.coin_type.struct_name)),f=Ct.fromX64(new w(u.emissions_per_second)),p=Math.floor(f.toNumber()*60*60*24);c.push({...u,coinAddress:l,emissionsEveryDay:p})});const d={coinAmountA:o.coin_a.value,coinAmountB:o.coin_b.value,current_sqrt_price:o.current_sqrt_price,current_tick_index:Number(BigInt.asIntN(64,BigInt(o.current_tick_index.bits)).toString()),fee_growth_global_a:o.fee_growth_global_a,fee_growth_global_b:o.fee_growth_global_b,fee_protocol_coin_a:o.fee_protocol_coin_a,fee_protocol_coin_b:o.fee_protocol_coin_b,fee_rate:o.fee_rate,liquidity:o.liquidity,index:o.index,positionIndex:o.position_index,tick_indexes_handle:o.tick_indexes.handle,ticks_handle:o.ticks.handle,positions_handle:o.positions.handle,collectionName:o.collection_name,uri:o.uri,is_pause:n||o.is_pause,rewarder_infos:c,rewarder_last_updated_time:o.rewarder_last_updated_time};return this.updateCache(s,d,er),d}async getTickDataByIndex(e,t){const n=await this._sdk.client.getTableItem(e,{key_type:`${this.sdk.sdkOptions.networkOptions.modules.IntegerMate}::i64::I64`,value_type:`${this.sdk.sdkOptions.networkOptions.modules.LiquidswapDeployer}::pool::Tick`,key:uE(t)}),i=JSON.parse(JSON.stringify(n));return{index:i.index,sqrtPrice:i.sqrt_price,liquidityGross:i.liquidity_gross,liquidityNet:i.liquidity_net,feeGrowthOutsideA:i.fee_growth_outside_a,feeGrowthOutsideB:i.fee_growth_outside_b,rewardersGrowthOutside:i.rewarders_growth_outside}}async getPoolLowerAndUpperTicks(e,t){const n=[],i=[],s=t.ticks_handle,r=await this.sdk.Resources.getPositionList(e,[t]);for(const o of r){const a=await this.sdk.Resources.getTickDataByIndex(s,o.tick_lower_index),c=await this.sdk.Resources.getTickDataByIndex(s,o.tick_upper_index);n.push(a),i.push(c)}return[n,i]}async getPositionInfoByIndex(e,t){const n=await this._sdk.client.getTableItem(e,{key_type:"u64",value_type:`${this.sdk.sdkOptions.networkOptions.modules.LiquidswapDeployer}::pool::Position`,key:t.toString()}),i=JSON.parse(JSON.stringify(n));return{name:"",pool:i.pool,liquidity:i.liquidity,tick_lower_index:BigInt.asIntN(64,BigInt(i.tick_lower_index.bits)).toString(),tick_upper_index:BigInt.asIntN(64,BigInt(i.tick_upper_index.bits)).toString(),fee_growth_inside_a:i.fee_growth_inside_a,fee_growth_inside_b:i.fee_growth_inside_b,fee_owed_a:i.fee_owed_a,fee_owed_b:i.fee_owed_b,reward_amount_owed_0:i.rewarder_infos[0].amount_owed,reward_amount_owed_1:i.rewarder_infos[1].amount_owed,reward_amount_owed_2:i.rewarder_infos[2].amount_owed,reward_growth_inside_0:i.rewarder_infos[0].growth_inside,reward_growth_inside_1:i.rewarder_infos[1].growth_inside,reward_growth_inside_2:i.rewarder_infos[2].growth_inside,index:t}}createPositionName(e,t){return`Cetus LP | Pool${e}-${t}`}async getPositionInfo(e,t,n=!0){if(OE(t)){const i=await this.getPositionInfoByIndex(e.positions_handle,Number(t));return i.name=this.createPositionName(e.index,i.index),i}return this.getPositionInfoByTokenName(e.poolAddress,e.positions_handle,e.collectionName,t,n)}async getPositionIndex(e,t,n,i=!1){const s=`${e}_${t}_${n}_getPositionIndex`;if(!i){const a=this.getCacheData(s);if(a!==null)return a}const r=await this._sdk.tokenClient.getTokenData(e,t,n),o=JSON.parse(JSON.stringify(r)).default_properties.data.index.value;return this.updateCache(s,o,er),o}async getPositionInfoByTokenName(e,t,n,i,s=!0){const r=`${e}_${n}_${i}_getPositionInfo`;if(!s){const c=this.getCacheData(r);if(c!==null)return c}const o=await this.getPositionIndex(e,n,i,!1),a=await this.getPositionInfoByIndex(t,o);return a.name=i,this.updateCache(r,a,er),a}async getGlobalConfig(e,t=!0){const n=`${e}_getGlobalConfig`;if(!t){const o=this.getCacheData(n);if(o!==null)return o}const i=await this.fetchAccountResource(e,Ut(e,"config","GlobalConfig")),s=JSON.parse(JSON.stringify(i)).data,r={protocol_fee_rate:s.protocol_fee_rate,is_pause:s.is_pause};return this.updateCache(n,r,er),r}async getSpecifyCoinInfos(e){const t=[];for(const n of e){const i=`${n}_getCoinInfos`,s=this.getCacheData(i);if(s!==null)t.push(s);else{const r=Jg(n).address,o=await this._sdk.Resources.fetchAccountResource(r,AE(n));if(o!=null){const a={coinAddress:n,...o.data};t.push(a),this.updateCache(i,a,er)}}}return t}async getCoinInfos(e,t=!0){const n=`${e}_getCoinInfos`;if(!t){const r=this.getCacheData(n);if(r!==null)return r}const i=await this.fetchAccountResources(e),s=[];return i==null||i.forEach(r=>{if(r.type.startsWith(G6)){const o=iP(r.type);o.length>0&&s.push({coinAddress:o,...r.data})}}),this.updateCache(n,s,er),s}async getCoinStores(e,t=!0){const n=`${e}_getCoinStores`;if(!t){const r=this.getCacheData(n);if(r!==null)return r}const i=await this.fetchAccountResources(e),s=[];return i==null||i.forEach(r=>{if(r.type.startsWith(V6)){const o=wb(r.type);o.length>0&&s.push({coinAddress:o,...r.data})}}),this.updateCache(n,s,er),s}async getCoinStore(e,t){const n=await this.fetchAccountResource(e,TE(t));if(n){const i=wb(n.type);if(i.length>0)return{coinAddress:i,...n.data}}return null}async getPositionList(e,t){const n=[];if(t.length===0)return[];const i=await this.getFilterTokenEvent(e);for(let s=0;s<i.length;s++){const r=i[s];try{for(const o of t)if(r.creator===o.poolAddress){const a=await this.getPositionInfoByTokenName(r.creator,o.positions_handle,r.collection,r.name);a.pool.length>0&&n.push({...r,...a})}}catch(o){console.log(o)}}return n}async getCollectionList(e){return await this.getFilterTokenEvent(e)}async getFilterTokenEvent(e){const t=[],n=[];let i=[];try{i=await this._sdk.client.getEventsByEventHandle(e,bb,"deposit_events")}catch(r){console.log(r)}i.forEach(r=>{t.push({key:`${r.data.id.token_data_id.creator}_${r.data.id.token_data_id.name}`,creator:r.data.id.token_data_id.creator,name:r.data.id.token_data_id.name,collection:r.data.id.token_data_id.collection,count:0})});let s=[];try{s=await this._sdk.client.getEventsByEventHandle(e,bb,"withdraw_events")}catch(r){console.log(r)}return s.forEach(r=>{if(r.type===lE){for(const o of t)if(o.count===0&&o.key===`${r.data.id.token_data_id.creator}_${r.data.id.token_data_id.name}`){o.count-=1;break}}}),t.forEach(r=>{r.count===0&&n.push({...r})}),n}async fetchAccountResource(e,t){var n;try{return await this._sdk.client.getAccountResource(e,t)}catch(i){if(Tb(i)&&((n=i.response)==null?void 0:n.status)===404)return null;throw i}}async fetchAccountResources(e){var t;try{return await this._sdk.client.getAccountResources(e)}catch(n){if(Tb(n)&&((t=n.response)==null?void 0:t.status)===404)return null;throw n}}updateCache(e,t,n=sP){let i=this._cache[e];i?(i.overdueTime=Pb(n),i.value=t):i=new yh(t,Pb(n)),this._cache[e]=i}getCacheData(e){const t=this._cache[e];return t!==void 0&&t.getCacheData()?t.value:null}},oP=class{constructor(t){this._sdk=t}get sdk(){return this._sdk}creatPoolTransactionPayload(t,n=!1){const{modules:i}=this.sdk.sdkOptions.networkOptions,s=t.delta_liquidity.gt($e),r=s?`${i.LiquidswapDeployer}::${Y6}`:`${i.LiquidswapDeployer}::${Ho}`,o=s?"create_and_add_liquidity":"create_pool";if(n){const u=[new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeA)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeB))],l=s?[de.bcsSerializeUint64(t.tick_spacing),de.bcsSerializeU128(BigInt(t.initialize_sqrt_price.toString())),de.bcsSerializeStr(t.uri),de.bcsSerializeU128(BigInt(t.delta_liquidity.toString())),de.bcsSerializeUint64(BigInt(t.max_amount_a.toString())),de.bcsSerializeUint64(BigInt(t.max_amount_b.toString())),de.bcsSerializeUint64(BigInt.asUintN(64,BigInt(t.tick_lower))),de.bcsSerializeUint64(BigInt.asUintN(64,BigInt(t.tick_upper)))]:[de.bcsSerializeUint64(t.tick_spacing),de.bcsSerializeU128(BigInt(t.initialize_sqrt_price.toString())),de.bcsSerializeStr(t.uri)];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(r,o,u,l))}const a=Ut(r,o),c=[t.coinTypeA,t.coinTypeB],d=s?[t.tick_spacing.toString(),t.initialize_sqrt_price.toString(),t.uri.toString(),t.delta_liquidity.toString(),t.max_amount_a.toString(),t.max_amount_b.toString(),BigInt.asUintN(64,BigInt(t.tick_lower)).toString(),BigInt.asUintN(64,BigInt(t.tick_upper)).toString()]:[t.tick_spacing.toString(),t.initialize_sqrt_price.toString(),t.uri.toString()];return{type:"entry_function_payload",function:a,type_arguments:c,arguments:d}}},aP=class{constructor(t){this._sdk=t,this.growthGlobal=[$e,$e,$e]}get sdk(){return this._sdk}async listRewarderInfosFromClmmpool(t){const n=await this.sdk.Resources.getPool(t),i=[];for(const s of n.rewarder_infos)i.push(s);return i}async emissionsEveryDay(t){const n=await this.listRewarderInfosFromClmmpool(t);if(!n)return null;const i=[];for(const s of n){const r=Ct.fromX64(new w(s.emissions_per_second));i.push({emissions:Math.floor(r.toNumber()*60*60*24),coin_address:s.coinAddress})}return i}async collectRewarderAmount(t,n){const i=await this.sdk.Resources.getPositionInfo(t,n);return i?{reward_amount_owed_0:i.reward_amount_owed_0,reward_amount_owed_1:i.reward_amount_owed_1,reward_amount_owed_2:i.reward_amount_owed_2}:null}async updatePoolRewarder(t,n){const i=await this.sdk.Resources.getPool(t),s=i.rewarder_last_updated_time;if(i.rewarder_last_updated_time=n,i.liquidity===0||n.eq(s))return i;const r=n.div(new w(1e3)).sub(new w(s)).add(new w(15)),o=i.rewarder_infos;for(let a=0;a<o.length;a+=1){const c=o[a],d=Ct.checkMulDivFloor(r,new w(c.emissions_per_second),new w(i.liquidity),128);this.growthGlobal[a]=new w(c.growth_global).add(new w(d))}return i}async posRewardersAmount(t,n,i,s){const r=Date.parse(new Date().toString()),o=await this.updatePoolRewarder(t,new w(r)),a=await this.sdk.Resources.getPositionInfo(o,n),c=parseInt(a.tick_lower_index,10),d=parseInt(a.tick_upper_index,10),u=HE(o,i,s,c,d,this.growthGlobal),l=[],f=[];if(u.length>0){const p=Ct.subUnderflowU128(u[0],new w(a.reward_growth_inside_0)),m=Ct.checkMulShiftRight(new w(a.liquidity),p,64,256);l.push(u[0]),f.push({amount_owed:new w(a.reward_amount_owed_0).add(m),coin_address:o.rewarder_infos[0].coinAddress})}if(u.length>1){const p=Ct.subUnderflowU128(u[1],new w(a.reward_growth_inside_1)),m=Ct.checkMulShiftRight(new w(a.liquidity),p,64,256);l.push(u[1]),f.push({amount_owed:new w(a.reward_amount_owed_1).add(m),coin_address:o.rewarder_infos[1].coinAddress})}if(u.length>2){const p=Ct.subUnderflowU128(u[2],new w(a.reward_growth_inside_2)),m=Ct.checkMulShiftRight(new w(a.liquidity),p,64,256);l.push(u[2]),f.push({amount_owed:new w(a.reward_amount_owed_2).add(m),coin_address:o.rewarder_infos[2].coinAddress})}return f}async poolRewardersAmount(t,n,i,s){const r=Date.parse(new Date().toString()),o=await this.updatePoolRewarder(n,new w(r)),a=await this.sdk.Resources.getPositionList(t,[o]),c=[$e,$e,$e];for(let d=0;d<a.length;d+=1){const u=await this.posRewardersAmount(n,a[d],i[d],s[d]);for(let l=0;l<3;l+=1)c[l]=c[l].add(u[l].amount_owed)}return c}collectPosRewarderTransactionPayload(t,n=!1){const{modules:i}=this.sdk.sdkOptions.networkOptions,s=`${i.LiquidswapDeployer}::${Ho}`,r="collect_rewarder";if(n){const d=[new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeA)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeB)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeC))],u=[de.bcsToBytes(F.AccountAddress.fromHex(t.pool_address)),de.bcsSerializeU8(t.index),de.bcsSerializeUint64(t.pos_index)];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(s,r,d,u))}const o=Ut(s,r),a=[t.coinTypeA,t.coinTypeB,t.coinTypeC],c=[t.pool_address,t.index,t.pos_index];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}collectPoolRewarderTransactionPayload(t,n=!1){if(t.rewarder_nums===1){const r={pool_address:t.pool_address,index:0,pos_index:t.pos_index,coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB,coinTypeC:t.coinTypeC};return this.collectPosRewarderTransactionPayload(r,n)}const{modules:i}=this.sdk.sdkOptions.networkOptions,s=`${i.ClmmIntegrate}::${pp}`;if(t.rewarder_nums===2){const r="collect_rewarder_for_two";if(n){const d=[new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeA)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeB)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeC)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeD))],u=[de.bcsToBytes(F.AccountAddress.fromHex(t.pool_address)),de.bcsSerializeUint64(t.pos_index)];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(s,r,d,u))}const o=Ut(s,r),a=[t.coinTypeA,t.coinTypeB,t.coinTypeC,t.coinTypeD],c=[t.pool_address,t.pos_index];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}if(t.rewarder_nums===3){const r="collect_rewarder_for_three";if(n){const d=[new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeA)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeB)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeC)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeD)),new F.TypeTagStruct(F.StructTag.fromString(t.coinTypeE))],u=[de.bcsToBytes(F.AccountAddress.fromHex(t.pool_address)),de.bcsSerializeUint64(t.pos_index)];return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(s,r,d,u))}const o=Ut(s,r),a=[t.coinTypeA,t.coinTypeB,t.coinTypeC,t.coinTypeD,t.coinTypeE],c=[t.pool_address,t.pos_index];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}}},cP=5*60*1e3,Iu=24*60*60*1e3;function Cb(e){return Date.parse(new Date().toString())+e}var dP=class{constructor(t){this._cache={},this._sdk=t}get sdk(){return this._sdk}async getOwnerTokenList(t,n,i=!1){const s="getAllRegisteredTokenList";if(!i){const l=this.getCacheData(s);if(l!==null)return l}const{modules:r}=this._sdk.sdkOptions.networkOptions,o=`${r.TokenDeployer}::coin_list`,a="fetch_full_list",c=new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(o,a,[],[de.bcsToBytes(F.AccountAddress.fromHex(n))])),d=await Cu(new bn(this.sdk.sdkOptions.rpcUrl),t,c),u=this.transformTokenData(d.changes);return this.updateCache(s,u,Iu),u}async getTokenListByCoinType(t,n=0,i=20){const{fraphQLUrl:s}=this._sdk.sdkOptions;if(!s)throw Error("The fraphQLUrl is not configured in the SDK");const r={query:`query MyQuery {
  coin_infos(
  limit: ${i}, offset: ${n},  order_by: {name: desc}, where: {  coin_type: {_regex: "${t}"}}
  ) {
    coin_type
    symbol
    name
    decimals
    creator_address
    coin_type_hash
  }
}
`,variables:null,operationName:"MyQuery"},o=await yc.post(s,r),a=[];return o.data.data.coin_infos.forEach(c=>{a.push({address:c.coin_type,symbol:c.symbol,official_symbol:c.symbol,decimals:c.decimals,name:c.name,coingecko_id:"",project_url:"",logo_url:""})}),a}async getSpecifyTokenListByCache(t){const n="getAllRegisteredTokenList",i=this.getCacheData(n),s=[];if(i!==null){const r=i;for(const o of t)for(const a of r)if(o===a.address){s.push(a);continue}}return s}async getAllRegisteredTokenList(t,n=!1){const i="getAllRegisteredTokenList";if(!n){const l=this.getCacheData(i);if(l!==null)return l}const{modules:s}=this._sdk.sdkOptions.networkOptions,r=`${s.TokenDeployer}::coin_list`,o="fetch_all_registered_coin_info",a=new bn(this.sdk.sdkOptions.rpcUrl),c=new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(r,o,[],[])),d=await Cu(a,t,c),u=this.transformTokenData(d.changes);return this.updateCache(i,u,Iu),u}transformTokenData(t){const n=[],{modules:i}=this._sdk.sdkOptions.networkOptions,s=t.filter(a=>a.type!=="write_resource"?!1:a.data.type===`${i.TokenDeployer}::coin_list::CoinList<${i.TokenDeployer}::coin_list::CoinInfo>`);if(s.length===0)return n;const o=s[0].data.data;return"full_list"in o&&o.full_list.value_list.forEach(a=>{const c={...a},d=a.extensions.data;for(const u of d){if(u.key==="labels")try{u.value=JSON.parse(decodeURIComponent(tc.decode(u.value)))}catch{}c[u.key]=u.value}n.push(c)}),n}async getAllRegisteredPoolList(t,n=!1){const i="getAllRegisteredPoolList";if(!n){const l=this.getCacheData(i);if(l!==null)return l}const{modules:s}=this._sdk.sdkOptions.networkOptions,r=`${s.TokenDeployer}::lp_list`,o="fetch_all_registered_coin_info",a=new bn(this.sdk.sdkOptions.rpcUrl),c=new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(r,o,[],[])),d=await Cu(a,t,c),u=this.transformPoolData(d.changes);return this.updateCache(i,u,Iu),u}async getOwnerPoolList(t,n,i=!1){const s="getAllRegisteredPoolList";if(!i){const l=this.getCacheData(s);if(l!==null)return l}const{modules:r}=this._sdk.sdkOptions.networkOptions,o=`${r.TokenDeployer}::lp_list`,a="fetch_full_list",c=new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(o,a,[],[de.bcsToBytes(F.AccountAddress.fromHex(n))])),d=await Cu(new bn(this.sdk.sdkOptions.rpcUrl),t,c),u=this.transformPoolData(d.changes);return this.updateCache(s,u,Iu),u}transformPoolData(t){const n=[],{modules:i}=this._sdk.sdkOptions.networkOptions,s=t.filter(a=>a.type!=="write_resource"?!1:a.data.type===`${i.TokenDeployer}::lp_list::PoolList<${i.TokenDeployer}::lp_list::PoolInfo>`);if(s.length===0)return n;const o=s[0].data.data;return"full_list"in o&&o.full_list.value_list.forEach(a=>{const c={...a},d=a.extensions.data;for(const u of d){if(u.key==="labels")try{u.value=JSON.parse(decodeURIComponent(tc.decode(u.value)))}catch{}c[u.key]=u.value}n.push(c)}),n}async getOwnerWarpPoolList(t,n,i=!1){const s=await this.getOwnerTokenList(n,t,i),r=await this.getOwnerPoolList(n,t,i),o=[];for(const a of r){for(const c of s)c.address===a.coin_a_address&&(a.coinA=c),c.address===a.coin_b_address&&(a.coinB=c);o.push(a)}return o}async getWarpPoolList(t,n=!1){const i=await this.getAllRegisteredTokenList(t,n),s=await this.getAllRegisteredPoolList(t,n),r=[];for(const o of s){for(const a of i)a.address===o.coin_a_address&&(o.coinA=a),a.address===o.coin_b_address&&(o.coinB=a);r.push(o)}return r}updateCache(t,n,i=cP){let s=this._cache[t];s?(s.overdueTime=Cb(i),s.value=n):s=new yh(n,Cb(i)),this._cache[t]=s}getCacheData(t){const n=this._cache[t];return n!==void 0&&n.getCacheData()?n.value:null}},uP=3e4,$n={maxAmountOut:$e,isExceed:!1,path:[]};function Ib(e,t){return{pair:`${e}-${t}`,reversePair:`${t}-${e}`}}function lP(e,t,n,i){const s=e.length;if(!e.length)throw new Error("routerTable is empty");if(s!==t.length)throw new Error("routerTable length not equal to feeRateArray length");let r=i?$e:new w(2).pow(new w(64)),o=[];const a=100/(e[0].length-1);switch(s){case 1:{r=e[0][e[0].length-1],n[0][n[0].length-1]||o.push({feeRate:t[0],percent:100});break}case 2:{for(let c=0;c<e[0].length;c+=1){const d=e[0].length-c-1,u=e[0][c].add(e[1][d]);if(u.gt(r)&&i||u.lt(r)&&!i)if(!n[0][c]&&!n[1][d])o=[],r=u,c>0&&o.push({feeRate:t[0],percent:c*a}),d>0&&o.push({feeRate:t[1],percent:d*a});else continue}break}case 3:{for(let c=0;c<e[0].length;c+=1)for(let d=0;d<e[0].length-c;d+=1){const u=e[0].length-c-d-1,l=e[0][c].add(e[1][d]).add(e[2][u]);if(l.gt(r)&&i||l.lt(r)&&!i){if(n[0][c]||n[1][d]||n[2][u])continue;o=[],r=l,c>0&&o.push({feeRate:t[0],percent:a*c}),d>0&&o.push({feeRate:t[1],percent:d*a}),u>0&&o.push({feeRate:t[2],percent:u*a})}}break}case 4:{for(let c=0;c<e[0].length;c+=1)for(let d=0;d<e[0].length-c;d+=1)for(let u=0;u<e[0].length-c-d;u+=1){const l=e[0].length-c-d-u-1,f=e[0][c].add(e[1][d]).add(e[2][u]).add(e[3][l]);if(f.gt(r)&&i||f.lt(r)&&!i){if(n[0][c]||n[1][d]||n[2][u]||n[3][l])continue;o=[],r=f,c>0&&o.push({feeRate:t[0],percent:a*c}),d>0&&o.push({feeRate:t[1],percent:d*a}),u>0&&o.push({feeRate:t[2],percent:u*a}),l>0&&o.push({feeRate:t[3],percent:l*a})}}break}}return o.length===0||r.eq($e)?{maxAmountOut:$e,path:[],isExceed:!0}:{maxAmountOut:r,path:o,isExceed:!1}}var fP=class{constructor(t){this.pathProviders=[],this.coinProviders={coins:[]},this.graph=new K6,this._coinSymbolMap=new Map,this._coinAddressMap=new Map,this.poolAddressMap=new Map,this.poolMap=new Map,this.ticksMap=new Map,this._sdk=t,this.leastRefreshTime=Date.now(),this.createTxParams={partitionQuantities:[],swapDirects:[],poolAddresses:[],percents:[],totalAmounts:[],partner:"",amountLimit:"0",amountOut:"0",coinTypes:[]},this.splitUnit=50,this.poolDirectionMap=new Map,this.isInited=!1,this.getPoolAddressMapAndDirection=this.getPoolAddressMapAndDirection.bind(this),this.setCoinList=this.setCoinList.bind(this),this.loadGraph=this.loadGraph.bind(this),this.addCoinProvider=this.addCoinProvider.bind(this),this.addPathProvider=this.addPathProvider.bind(this),this.splitSwap=this.splitSwap.bind(this),this.splitSwapForRouter=this.splitSwapForRouter.bind(this),this.splitSwapForRouters=this.splitSwapForRouters.bind(this),this.refreshPoolofSwapRouter=this.refreshPoolofSwapRouter.bind(this),this.getBestSplitResultInOnePair=this.getBestSplitResultInOnePair.bind(this),this.findBestSplitPriceWithOneSkip=this.findBestSplitPriceWithOneSkip.bind(this),this.findBestSplitPriceWithTwoSkip=this.findBestSplitPriceWithTwoSkip.bind(this),this.findBestSplitPriceWithThreeSkip=this.findBestSplitPriceWithThreeSkip.bind(this),this.findBestSplitPrice=this.findBestSplitPrice.bind(this),this.price=this.price.bind(this),this.routerSwap=this.routerSwap.bind(this)}get sdk(){return this._sdk}getPoolAddressMapAndDirection(t,n){const{pair:i,reversePair:s}=Ib(t,n);let r=this.poolAddressMap.get(i);if(r!=null)return{addressMap:r,direction:!0};if(r=this.poolAddressMap.get(s),r!=null)return{addressMap:r,direction:!1}}async setCoinList(){this.coinProviders.coins.forEach(t=>{this._coinSymbolMap.set(t.symbol,t),this._coinAddressMap.set(t.address,t)})}loadGraph(){return this.pathProviders.forEach(t=>{const{paths:n}=t;n.forEach(i=>{var s,r;const o=(s=this.graph.getVertexByKey(i.base))!=null?s:new Bl(i.base),a=(r=this.graph.getVertexByKey(i.quote))!=null?r:new Bl(i.quote);this.graph.addEdge(new H6(o,a));const c=this._coinSymbolMap.get(i.base),d=this._coinSymbolMap.get(i.quote);if(c!=null&&d!=null){const u=Ib(i.base,i.quote).pair;this.poolAddressMap.set(u,i.addressMap)}})}),this}addPathProvider(t){return this.pathProviders.push(t),this}addCoinProvider(t){return this.coinProviders=t,this}tokenInfo(t){return this._coinAddressMap.has(t)?this._coinAddressMap.get(t):this._coinSymbolMap.get(t)}getCreateTxParams(){return this.createTxParams}isPoolDirectionSet(t){return this.poolDirectionMap.get(t)!=null}getPoolDirection(t){if(this.isPoolDirectionSet(t))return this.poolDirectionMap.get(t)}setPoolDirection(t,n){this.poolDirectionMap.set(t,n)}getBestSplitResultInOnePair(t,n,i,s,r,o){if(s.eq($e))return{maxAmountOut:$e,path:[],isExceed:!1};console.log(s.toString());const a=[],c=[],d=[],u=this.getPoolAddressMapAndDirection(n,i),l=u==null?void 0:u.addressMap;if(l)for(const[f,p]of l.entries()){const m=this.poolMap.get(p),_=this.poolDirectionMap.get(p),x=r===_,C=this.ticksMap.get(p),T=new zE(s,t,m,x,o,C).computeSwap();o?a.push(T.amountOutArray):a.push(T.amountInArray),d.push(T.isExceed),c.push(f)}return lP(a.slice(0,4),c.slice(0,4),d.slice(0,4),o)}findBestSplitPriceWithOneSkip(t,n,i,s,r){const o={maxAmountOut:new w(0),path:[],poolAddresses:[],totalAmounts:[],percents:[],isExceed:!1},a=[],c=[],d=[],u=[];if(!r){let p=$n,m=$n;if(s){if(p=this.getBestSplitResultInOnePair(50,t[0][0],t[0][1],n,i[0][0],s),p.isExceed||(m=this.getBestSplitResultInOnePair(5,t[0][2],t[0][3],p.maxAmountOut,i[0][1],s),m.isExceed))return o.isExceed=!0,o;o.maxAmountOut=m.maxAmountOut}else{if(m=this.getBestSplitResultInOnePair(5,t[0][2],t[0][3],n,i[0][1],s),m.isExceed||(p=this.getBestSplitResultInOnePair(5,t[0][0],t[0][1],m.maxAmountOut,i[0][0],s),p.isExceed))return o.isExceed=!0,o;o.maxAmountOut=p.maxAmountOut}a.push(p.path),a.push([]),a.push(m.path);const _=[],x=[],C=[];p.path.forEach(X=>{var G;s?_.push(n.muln(X.percent).divn(100)):_.push(m.maxAmountOut.muln(X.percent).divn(100)),C.push(X.percent);const te=(G=this.getPoolAddressMapAndDirection(t[0][0],t[0][1]))==null?void 0:G.addressMap.get(X.feeRate);x.push(te)});const k=[],T=[],S=[];m.path.forEach(X=>{var G;s?k.push(p.maxAmountOut.muln(X.percent).divn(100)):k.push(n.muln(X.percent).divn(100)),S.push(X.percent);const te=(G=this.getPoolAddressMapAndDirection(t[0][2],t[0][3]))==null?void 0:G.addressMap.get(X.feeRate);T.push(te)});let P=$e;_.forEach(X=>{P=P.add(X)});const z=$e;return k.forEach(X=>{z.add(X)}),c.push(P.toString()),c.push($e.toString()),d.push(C),d.push([]),d.push(S),u.push(x),u.push([]),u.push(T),o.totalAmounts=c,o.path=a,o.percents=d,o.poolAddresses=u,s?o.maxAmountOut=m.maxAmountOut:o.maxAmountOut=p.maxAmountOut,o.path.length||(o.isExceed=!0),o}let l=$e;s||(l=new w(2).pow(new w(64)));const f=sl(n,this.splitUnit);for(let p=0;p<f.length;p+=1){const m=this.getBestSplitResultInOnePair(50,t[0][0],t[0][1],f[p],i[0][0],s);if(m.isExceed)continue;let _=$n,x=$n;if(s){if(_=this.getBestSplitResultInOnePair(50,t[1][0],t[1][1],f[f.length-p-1],i[1][0],s),_.isExceed||(x=this.getBestSplitResultInOnePair(5,t[1][2],t[1][3],_.maxAmountOut,i[1][1],s),x.isExceed))continue}else if(x=this.getBestSplitResultInOnePair(50,t[1][2],t[1][3],f[f.length-p-1],i[1][1],s),x.isExceed||(_=this.getBestSplitResultInOnePair(5,t[1][0],t[1][1],x.maxAmountOut,i[1][0],s),_.isExceed))continue;const C=[],k=[],T=[];m.path.forEach(A=>{var h;C.push(n.muln(p*this.splitUnit).divn(100).muln(A.percent).divn(100)),T.push(A.percent);const y=(h=this.getPoolAddressMapAndDirection(t[0][0],t[0][1]))==null?void 0:h.addressMap.get(A.feeRate);k.push(y)});const S=[],P=[],z=[];_.path.forEach(A=>{var h;s?S.push(n.muln((f.length-p-1)*this.splitUnit).divn(100).muln(A.percent).divn(100)):S.push(x.maxAmountOut.muln(A.percent).divn(100)),z.push(A.percent);const y=(h=this.getPoolAddressMapAndDirection(t[1][0],t[1][1]))==null?void 0:h.addressMap.get(A.feeRate);P.push(y)});const X=[],G=[],te=[];x.path.forEach(A=>{var h;s?X.push(_.maxAmountOut.muln(A.percent).divn(100)):X.push(n.muln((f.length-p-1)*this.splitUnit).divn(100).muln(A.percent).divn(100)),te.push(A.percent);const y=(h=this.getPoolAddressMapAndDirection(t[1][2],t[1][3]))==null?void 0:h.addressMap.get(A.feeRate);G.push(y)});const N=[],R=[],M=[];if(x.maxAmountOut.add(m.maxAmountOut).gt(l)||_.maxAmountOut.add(m.maxAmountOut).lt(l)){s?l=x.maxAmountOut.add(m.maxAmountOut):l=_.maxAmountOut.add(m.maxAmountOut);let A=$e;C.forEach(y=>{A=A.add(y)});const h=$e;S.forEach(y=>{h.add(y)}),N.push(_.path),N.push(m.path),N.push(x.path),R.push(h.toString()),R.push(A.toString()),d.push(z),d.push(T),d.push(te),M.push(P),M.push(k),M.push(G),o.maxAmountOut=l,o.path=N,o.totalAmounts=R,o.percents=d,o.poolAddresses=M,o.path.length||(o.isExceed=!0)}}return o}findBestSplitPriceWithTwoSkip(t,n,i,s,r){const o={maxAmountOut:$e,path:[],totalAmounts:[],percents:[],poolAddresses:[],isExceed:!1},a=sl(n,this.splitUnit);let c=$e;if(s||(c=new w(2).pow(new w(64))),!r){for(let d=0;d<a.length;d+=1){let u=$n,l=$n,f=$n,p=$n;if(s){if(u=this.getBestSplitResultInOnePair(5,t[0][0],t[0][1],a[d],i[1][0],s),u.isExceed||(l=this.getBestSplitResultInOnePair(5,t[0][2],t[0][3],u.maxAmountOut,i[1][1],s),l.isExceed)||(f=this.getBestSplitResultInOnePair(5,t[1][0],t[1][1],a[a.length-d-1],i[1][0],s),f.isExceed)||(p=this.getBestSplitResultInOnePair(5,t[1][2],t[1][3],f.maxAmountOut,i[1][1],s),p.isExceed))continue}else if(l=this.getBestSplitResultInOnePair(5,t[0][2],t[0][3],a[d],i[1][1],s),l.isExceed||(u=this.getBestSplitResultInOnePair(5,t[0][0],t[0][1],l.maxAmountOut,i[1][0],s),u.isExceed)||(p=this.getBestSplitResultInOnePair(5,t[1][2],t[1][3],a[a.length-d-1],i[1][1],s),p.isExceed)||(f=this.getBestSplitResultInOnePair(5,t[1][0],t[1][1],p.maxAmountOut,i[1][0],s),f.isExceed))continue;const m=[],_=[],x=[];u.path.forEach(h=>{var y;s?m.push(n.muln(d*this.splitUnit).divn(100).muln(h.percent).divn(100)):m.push(l.maxAmountOut.muln(h.percent).divn(100)),x.push(h.percent);const E=(y=this.getPoolAddressMapAndDirection(t[0][0],t[0][1]))==null?void 0:y.addressMap.get(h.feeRate);_.push(E)});const C=[],k=[],T=[];l.path.forEach(h=>{var y;s?C.push(u.maxAmountOut.muln(h.percent).divn(100)):C.push(n.muln(d*this.splitUnit).divn(100).muln(h.percent).divn(100)),T.push(h.percent);const E=(y=this.getPoolAddressMapAndDirection(t[0][2],t[0][3]))==null?void 0:y.addressMap.get(h.feeRate);k.push(E)});const S=[],P=[],z=[];f.path.forEach(h=>{var y;s?S.push(n.muln((a.length-d-1)*this.splitUnit).divn(100).muln(h.percent).divn(100)):S.push(p.maxAmountOut.muln(h.percent).divn(100)),z.push(h.percent);const E=(y=this.getPoolAddressMapAndDirection(t[1][0],t[1][1]))==null?void 0:y.addressMap.get(h.feeRate);P.push(E)});const X=[],G=[],te=[];p.path.forEach(h=>{var y;s?X.push(f.maxAmountOut.muln(h.percent).divn(100)):X.push(n.muln((a.length-d-1)*this.splitUnit).divn(100).muln(h.percent).divn(100)),te.push(h.percent);const E=(y=this.getPoolAddressMapAndDirection(t[1][1],t[1][2]))==null?void 0:y.addressMap.get(h.feeRate);G.push(E)});const N=[],R=[],M=[],A=[];if(l.maxAmountOut.add(p.maxAmountOut).gt(c)&&s||!s&&u.maxAmountOut.add(f.maxAmountOut).lt(c)){s?c=l.maxAmountOut.add(p.maxAmountOut):c=u.maxAmountOut.add(f.maxAmountOut);let h=$e;m.forEach(E=>{h=h.add(E)});let y=$e;S.forEach(E=>{y=y.add(E)}),N.push(u.path),N.push(l.path),N.push([]),N.push(f.path),N.push(p.path),R.push(h.toString()),R.push(y.toString()),R.push($e.toString()),A.push(x),A.push(z),A.push([]),A.push(T),A.push(te),M.push(_),M.push(P),M.push([]),M.push(k),M.push(G),o.maxAmountOut=c,o.percents=A,o.totalAmounts=R,o.path=N,o.poolAddresses=M}}return o.path.length||(o.isExceed=!0),o}for(let d=0;d<a.length;d+=1)for(let u=0;u<a.length-d-1;u+=1){const l=a.length-d-u-1,f=this.getBestSplitResultInOnePair(5,t[0][0],t[0][1],a[l],i[0][0],s);if(f.isExceed)continue;let p=$n,m=$n,_=$n,x=$n;if(s){if(p=this.getBestSplitResultInOnePair(5,t[1][0],t[1][1],a[u],i[1][0],s),p.isExceed||(m=this.getBestSplitResultInOnePair(5,t[1][2],t[1][3],p.maxAmountOut,i[1][1],s),m.isExceed)||(_=this.getBestSplitResultInOnePair(5,t[2][0],t[2][1],a[d],i[2][0],s),_.isExceed)||(x=this.getBestSplitResultInOnePair(5,t[2][2],t[2][3],_.maxAmountOut,i[2][1],s),x.isExceed))continue}else if(m=this.getBestSplitResultInOnePair(5,t[1][2],t[1][3],a[u],i[1][1],s),m.isExceed||(p=this.getBestSplitResultInOnePair(5,t[1][0],t[1][1],m.maxAmountOut,i[1][0],s),p.isExceed)||(x=this.getBestSplitResultInOnePair(5,t[2][2],t[2][3],a[d],i[2][1],s),x.isExceed)||(_=this.getBestSplitResultInOnePair(5,t[2][0],t[2][1],x.maxAmountOut,i[2][0],s),_.isExceed))continue;const C=[],k=[],T=[];p.path.forEach(O=>{var b;s?C.push(n.muln(u*this.splitUnit).divn(100).muln(O.percent).divn(100)):C.push(m.maxAmountOut.muln(O.percent).divn(100)),T.push(O.percent);const j=(b=this.getPoolAddressMapAndDirection(t[1][0],t[1][1]))==null?void 0:b.addressMap.get(O.feeRate);k.push(j)});const S=[],P=[],z=[];m.path.forEach(O=>{var b;s?S.push(p.maxAmountOut.muln(O.percent).divn(100)):S.push(n.muln(u*this.splitUnit).divn(100).muln(O.percent).divn(100)),z.push(O.percent);const j=(b=this.getPoolAddressMapAndDirection(t[1][2],t[1][3]))==null?void 0:b.addressMap.get(O.feeRate);P.push(j)});const X=[],G=[],te=[];_.path.forEach(O=>{var b;s?X.push(n.muln(d*this.splitUnit).divn(100).muln(O.percent).divn(100)):X.push(x.maxAmountOut.muln(O.percent).divn(100)),te.push(O.percent);const j=(b=this.getPoolAddressMapAndDirection(t[2][0],t[2][1]))==null?void 0:b.addressMap.get(O.feeRate);G.push(j)});const N=[],R=[],M=[];x.path.forEach(O=>{var b;s?N.push(_.maxAmountOut.muln(O.percent).divn(100)):N.push(n.muln(d*this.splitUnit).divn(100).muln(O.percent).divn(100)),M.push(O.percent);const j=(b=this.getPoolAddressMapAndDirection(t[2][2],t[2][3]))==null?void 0:b.addressMap.get(O.feeRate);R.push(j)});const A=[],h=[],y=[];f.path.forEach(O=>{var b;A.push(n.muln(l*this.splitUnit).divn(100).muln(O.percent).divn(100)),y.push(O.percent);const j=(b=this.getPoolAddressMapAndDirection(t[0][0],t[0][1]))==null?void 0:b.addressMap.get(O.feeRate);h.push(j)});let E=$e;s?E=f.maxAmountOut.add(m.maxAmountOut).add(x.maxAmountOut):E=f.maxAmountOut.add(p.maxAmountOut).add(_.maxAmountOut);const U=[],L=[],H=[],Q=[];if(E.gt(c)&&s||E.lt(c)&&!s){let O=$e;C.forEach(Ae=>{O=O.add(Ae)});let b=$e;X.forEach(Ae=>{b=b.add(Ae)});let j=$e;A.forEach(Ae=>{j=j.add(Ae)}),c=E,U.push(p.path),U.push(_.path),U.push(f.path),U.push(m.path),U.push(x.path),L.push(O.toString()),L.push(b.toString()),L.push(j.toString()),H.push(T),H.push(te),H.push(y),H.push(z),H.push(M),Q.push(k),Q.push(G),Q.push(h),Q.push(P),Q.push(R),o.maxAmountOut=E,o.path=U,o.totalAmounts=L,o.poolAddresses=Q,o.percents=H}}return o.path.length||(o.isExceed=!0),o}findBestSplitPriceWithThreeSkip(t,n,i,s,r){const o={maxAmountOut:new w(0),path:[],totalAmounts:[],percents:[],poolAddresses:[],isExceed:!1};let a=$e;s||(a=new w(2).pow(new w(64)));const c=sl(n,this.splitUnit);for(let d=0;d<c.length;d+=1)for(let u=0;u<c.length-d-1;u+=1)if(r)for(let l=0;l<c.length-d-u-1;l+=1){const f=c.length-d-u-l-1,p=this.getBestSplitResultInOnePair(5,t[0][0],t[0][1],c[l],i[0][0],s);let m=$n,_=$n,x=$n,C=$n,k=$n,T=$n;if(s){if(m=this.getBestSplitResultInOnePair(5,t[1][0],t[1][1],c[u],i[1][0],s),m.isExceed||(_=this.getBestSplitResultInOnePair(5,t[1][2],t[1][3],m.maxAmountOut,i[1][1],s),_.isExceed)||(x=this.getBestSplitResultInOnePair(5,t[2][0],t[2][1],c[d],i[2][0],s),x.isExceed)||(C=this.getBestSplitResultInOnePair(5,t[2][2],t[2][3],x.maxAmountOut,i[2][1],s),C.isExceed)||(k=this.getBestSplitResultInOnePair(5,t[3][0],t[3][1],c[f],i[3][0],s),k.isExceed)||(T=this.getBestSplitResultInOnePair(5,t[3][2],t[3][3],k.maxAmountOut,i[3][1],s),T.isExceed))continue}else if(_=this.getBestSplitResultInOnePair(5,t[1][2],t[1][3],c[u],i[1][1],s),_.isExceed||(m=this.getBestSplitResultInOnePair(5,t[1][0],t[1][1],_.maxAmountOut,i[1][0],s),m.isExceed)||(C=this.getBestSplitResultInOnePair(5,t[2][2],t[2][3],c[d],i[2][1],s),C.isExceed)||(x=this.getBestSplitResultInOnePair(5,t[2][0],t[2][1],C.maxAmountOut,i[2][0],s),x.isExceed)||(T=this.getBestSplitResultInOnePair(5,t[3][2],t[3][3],c[f],i[3][1],s),T.isExceed)||(k=this.getBestSplitResultInOnePair(5,t[3][0],t[3][1],T.maxAmountOut,i[3][0],s),k.isExceed))continue;const S=[],P=[],z=[];m.path.forEach(ut=>{var ft;s?S.push(n.muln(u*this.splitUnit).divn(100).muln(ut.percent).divn(100)):S.push(_.maxAmountOut.muln(ut.percent).divn(100)),z.push(ut.percent);const Et=(ft=this.getPoolAddressMapAndDirection(t[1][0],t[1][1]))==null?void 0:ft.addressMap.get(ut.feeRate);P.push(Et)});const X=[],G=[],te=[];_.path.forEach(ut=>{var ft;s?X.push(m.maxAmountOut.muln(ut.percent).divn(100)):X.push(n.muln(u*this.splitUnit).divn(100).muln(ut.percent).divn(100)),te.push(ut.percent);const Et=(ft=this.getPoolAddressMapAndDirection(t[1][2],t[1][3]))==null?void 0:ft.addressMap.get(ut.feeRate);G.push(Et)});const N=[],R=[],M=[];x.path.forEach(ut=>{var ft;s?N.push(n.muln(d*this.splitUnit).divn(100).muln(ut.percent).divn(100)):N.push(C.maxAmountOut.muln(ut.percent).divn(100)),M.push(ut.percent);const Et=(ft=this.getPoolAddressMapAndDirection(t[2][0],t[2][1]))==null?void 0:ft.addressMap.get(ut.feeRate);R.push(Et)});const A=[],h=[],y=[];C.path.forEach(ut=>{var ft;s?A.push(x.maxAmountOut.muln(ut.percent).divn(100)):A.push(n.muln(d*this.splitUnit).divn(100).muln(ut.percent).divn(100)),y.push(ut.percent);const Et=(ft=this.getPoolAddressMapAndDirection(t[2][2],t[2][3]))==null?void 0:ft.addressMap.get(ut.feeRate);h.push(Et)});const E=[],U=[],L=[];k.path.forEach(ut=>{var ft;s?E.push(n.muln(f*this.splitUnit).divn(100).muln(ut.percent).divn(100)):E.push(T.maxAmountOut.muln(ut.percent).divn(100)),L.push(ut.percent);const Et=(ft=this.getPoolAddressMapAndDirection(t[3][0],t[3][1]))==null?void 0:ft.addressMap.get(ut.feeRate);U.push(Et)});const H=[],Q=[],O=[];T.path.forEach(ut=>{var ft;s?H.push(k.maxAmountOut.muln(ut.percent).divn(100)):H.push(n.muln(f*this.splitUnit).divn(100).muln(ut.percent).divn(100)),O.push(ut.percent);const Et=(ft=this.getPoolAddressMapAndDirection(t[3][2],t[3][3]))==null?void 0:ft.addressMap.get(ut.feeRate);Q.push(Et)});const b=[],j=[],Ae=[];p.path.forEach(ut=>{var ft;b.push(n.muln(l*this.splitUnit).divn(100).muln(ut.percent).divn(100)),Ae.push(ut.percent);const Et=(ft=this.getPoolAddressMapAndDirection(t[0][0],t[0][1]))==null?void 0:ft.addressMap.get(ut.feeRate);j.push(Et)});let ue=$e;s?ue=p.maxAmountOut.add(_.maxAmountOut).add(C.maxAmountOut).add(T.maxAmountOut):ue=p.maxAmountOut.add(m.maxAmountOut).add(x.maxAmountOut).add(k.maxAmountOut);const ke=[],mt=[],st=[],kt=[];if(ue.gt(a)&&s||!s&&ue.lt(a)){let ut=$e;S.forEach(se=>{ut=ut.add(se)});let ft=$e;N.forEach(se=>{ft=ft.add(se)});let Et=$e;E.forEach(se=>{Et=Et.add(se)});let pi=$e;b.forEach(se=>{pi=pi.add(se)}),a=ue,ke.push(m.path),ke.push(x.path),ke.push(k.path),ke.push(p.path),ke.push(_.path),ke.push(C.path),ke.push(T.path),mt.push(ut.toString()),mt.push(ft.toString()),mt.push(Et.toString()),mt.push(pi.toString()),st.push(z),st.push(M),st.push(L),st.push(Ae),st.push(te),st.push(y),st.push(O),kt.push(P),kt.push(R),kt.push(U),kt.push(j),kt.push(G),kt.push(h),kt.push(Q),o.maxAmountOut=ue,o.path=ke,o.totalAmounts=mt,o.percents=st,o.poolAddresses=kt}}else{const l=c.length-d-u-1;let f=$n,p=$n,m=$n,_=$n,x=$n,C=$n;if(s){if(f=this.getBestSplitResultInOnePair(5,t[0][0],t[0][1],c[u],i[0][0],s),f.isExceed||(p=this.getBestSplitResultInOnePair(5,t[0][2],t[0][3],f.maxAmountOut,i[0][1],s),p.isExceed)||(m=this.getBestSplitResultInOnePair(5,t[1][0],t[1][1],c[d],i[1][0],s),m.isExceed)||(_=this.getBestSplitResultInOnePair(5,t[1][2],t[1][3],m.maxAmountOut,i[1][1],s),_.isExceed)||(x=this.getBestSplitResultInOnePair(5,t[2][0],t[2][1],c[l],i[2][0],s),x.isExceed)||(C=this.getBestSplitResultInOnePair(5,t[2][2],t[2][3],m.maxAmountOut,i[2][1],s),C.isExceed))continue}else if(p=this.getBestSplitResultInOnePair(5,t[0][2],t[0][3],c[u],i[0][1],s),p.isExceed||(f=this.getBestSplitResultInOnePair(5,t[0][0],t[0][1],p.maxAmountOut,i[0][0],s),f.isExceed)||(_=this.getBestSplitResultInOnePair(5,t[1][2],t[1][3],c[d],i[1][1],s),_.isExceed)||(m=this.getBestSplitResultInOnePair(5,t[1][0],t[1][1],_.maxAmountOut,i[1][0],s),m.isExceed)||(C=this.getBestSplitResultInOnePair(5,t[2][2],t[2][3],c[l],i[2][1],s),C.isExceed)||(x=this.getBestSplitResultInOnePair(5,t[2][0],t[2][1],_.maxAmountOut,i[2][0],s),x.isExceed))continue;const k=[],T=[],S=[];f.path.forEach(ue=>{var ke;s?k.push(n.muln(u*this.splitUnit).divn(100).muln(ue.percent).divn(100)):k.push(p.maxAmountOut.muln(ue.percent).divn(100)),S.push(ue.percent);const mt=(ke=this.getPoolAddressMapAndDirection(t[0][0],t[0][1]))==null?void 0:ke.addressMap.get(ue.feeRate);T.push(mt)});const P=[],z=[],X=[];p.path.forEach(ue=>{var ke;s?P.push(f.maxAmountOut.muln(ue.percent).divn(100)):P.push(n.muln(u*this.splitUnit).divn(100).muln(ue.percent).divn(100)),X.push(ue.percent);const mt=(ke=this.getPoolAddressMapAndDirection(t[0][2],t[0][3]))==null?void 0:ke.addressMap.get(ue.feeRate);z.push(mt)});const G=[],te=[],N=[];m.path.forEach(ue=>{var ke;s?G.push(n.muln(d*this.splitUnit).divn(100).muln(ue.percent).divn(100)):G.push(_.maxAmountOut.muln(ue.percent).divn(100)),N.push(ue.percent);const mt=(ke=this.getPoolAddressMapAndDirection(t[1][0],t[1][1]))==null?void 0:ke.addressMap.get(ue.feeRate);te.push(mt)});const R=[],M=[],A=[];_.path.forEach(ue=>{var ke;s?R.push(m.maxAmountOut.muln(ue.percent).divn(100)):R.push(n.muln(d*this.splitUnit).divn(100).muln(ue.percent).divn(100)),A.push(ue.percent);const mt=(ke=this.getPoolAddressMapAndDirection(t[1][2],t[1][3]))==null?void 0:ke.addressMap.get(ue.feeRate);M.push(mt)});const h=[],y=[],E=[];x.path.forEach(ue=>{var ke;s?h.push(n.muln(l*this.splitUnit).divn(100).muln(ue.percent).divn(100)):h.push(C.maxAmountOut.muln(ue.percent).divn(100)),E.push(ue.percent);const mt=(ke=this.getPoolAddressMapAndDirection(t[2][0],t[2][1]))==null?void 0:ke.addressMap.get(ue.feeRate);y.push(mt)});const U=[],L=[],H=[];C.path.forEach(ue=>{var ke;s?U.push(x.maxAmountOut.muln(ue.percent).divn(100)):U.push(n.muln(l*this.splitUnit).divn(100).muln(ue.percent).divn(100)),H.push(ue.percent);const mt=(ke=this.getPoolAddressMapAndDirection(t[2][2],t[2][3]))==null?void 0:ke.addressMap.get(ue.feeRate);L.push(mt)});const Q=[],O=[],b=[],j=[];let Ae=$e;if(s?Ae=p.maxAmountOut.add(_.maxAmountOut).add(C.maxAmountOut):Ae=f.maxAmountOut.add(m.maxAmountOut).add(x.maxAmountOut),Ae.gt(a)&&s||Ae.lt(a)&&!s){let ue=$e;k.forEach(st=>{ue=ue.add(st)});let ke=$e;G.forEach(st=>{ke=ke.add(st)});let mt=$e;h.forEach(st=>{mt=mt.add(st)}),a=Ae,Q.push(f.path),Q.push(m.path),Q.push(x.path),Q.push([]),Q.push(p.path),Q.push(_.path),Q.push(C.path),O.push(ue.toString()),O.push(ke.toString()),O.push(mt.toString()),O.push($e.toString()),b.push(S),b.push(N),b.push(E),b.push([]),b.push(X),b.push(A),b.push(H),j.push(T),j.push(te),j.push(y),j.push([]),j.push(z),j.push(M),j.push(L),o.maxAmountOut=Ae,o.path=Q,o.percents=b,o.totalAmounts=O,o.poolAddresses=j}}return o.path.length||(o.isExceed=!0),o}findBestSplitPrice(t,n,i,s,r,o){var a,c,d,u;let l=t.length,f=!1;t[0].length===2&&(f=!0,l-=1);let p={maxAmountOut:$e,path:[],poolAddresses:[],totalAmounts:[],percents:[],isExceed:!1},m={maxAmountOut:$e,path:[],isExceed:!1};const _=[],x=[];let C=$e;const k=[];switch(console.log(l,"skipNumber"),l){case 0:m=this.getBestSplitResultInOnePair(50,t[0][0],t[0][1],n,i[0][0],s),p.maxAmountOut=m.maxAmountOut,p.path.push(m.path),m.path.forEach(G=>{var te;const N=(te=this.getPoolAddressMapAndDirection(t[0][0],t[0][1]))==null?void 0:te.addressMap.get(G.feeRate);_.push(N);const R=n.muln(G.percent).divn(100);x.push(R),k.push(G.percent)}),x.forEach(G=>{C=C.add(G)}),p.percents.push(k),p.totalAmounts.push(C.toString()),p.poolAddresses.push(_);break;case 1:p=this.findBestSplitPriceWithOneSkip(t,n,i,s,f);break;case 2:p=this.findBestSplitPriceWithTwoSkip(t,n,i,s,f);break;case 3:p=this.findBestSplitPriceWithThreeSkip(t,n,i,s,f);break}if(p.isExceed)return p;const T=[];for(let G=0;G<p.path.length;G+=1){const{length:te}=p.path[G];T.push(te)}const S=[];if(l!==0)if(f){for(let te=1;te<1+l;te+=1){const N=[];if(T[te-1]>0)for(let R=0;R<T[te-1];R+=1)N.push(i[te][0]);S.push(N)}const G=[];for(let te=0;te<T[l];te+=1)if(T[l]>0)for(let N=0;N<T[l];N+=1)G.push(i[0][0]);S.push(G);for(let te=1;te<1+l;te+=1){const N=[];if(T[te+l]>0)for(let R=0;R<T[te+l];R+=1)N.push(i[te][1]);S.push(N)}}else{for(let G=0;G<l;G+=1){const te=[];if(T[G]>0)for(let N=0;N<T[G];N+=1)te.push(i[G][0]);S.push(te)}S.push([]);for(let G=0;G<l;G+=1){const te=[];if(T[G+l+1]>0)for(let N=0;N<T[G+l+1];N+=1)te.push(i[G][1]);S.push(te)}}else S.push([i[0][0]]);for(let G=0;G<p.poolAddresses.length;G+=1)for(let te=0;te<p.poolAddresses[G].length;te+=1){const N=this.getPoolDirection(p.poolAddresses[G][te]);N&&(S[G][te]=S[G][te]&&N)}const P=[],z=(a=this._coinSymbolMap.get(t[0][0]))==null?void 0:a.address;P.push(z);for(let G=0;G<t.length;G+=1)if(t[G].length!==2){const te=(c=this._coinSymbolMap.get(t[G][1]))==null?void 0:c.address;P.push(te)}if(t[0].length===2){const G=(d=this._coinSymbolMap.get(t[0][1]))==null?void 0:d.address;P.push(G)}else{const G=(u=this._coinSymbolMap.get(t[0][t[0].length-1]))==null?void 0:u.address;P.push(G)}const X=s?p.maxAmountOut.muln((1-r)*1e5).divn(1e5).toString():p.maxAmountOut.muln((1+r)*1e5).divn(1e5).toString();return this.createTxParams={partitionQuantities:T,swapDirects:S,poolAddresses:p.poolAddresses,totalAmounts:p.totalAmounts,percents:p.percents,amountLimit:X,amountOut:n.toString(),partner:o,coinTypes:P},p}async price(t,n,i,s,r,o){var a,c;const d=this.tokenInfo(t),u=this.tokenInfo(n);if(d===void 0||u===void 0)return;const l=this.graph.getVertexByKey(d.symbol),f=this.graph.getVertexByKey(u.symbol),p=this.graph.findAllPath(l,f),m=Array.from(p),_=[],x=[],C=[];for(let k=0;k<m.length;k+=1){const T=m[k];if(T.length>3)continue;const S=[],P=[];for(let z=0;z<T.length-1;z+=1){const X=T[z].value.toString(),G=T[z+1].value.toString(),te=(a=this.getPoolAddressMapAndDirection(X,G))==null?void 0:a.addressMap,N=(c=this.getPoolAddressMapAndDirection(X,G))==null?void 0:c.direction;te!==void 0&&N!==void 0&&(P.push(N),S.push(X),S.push(G),te.forEach(R=>{_.push(R)}))}if(C.push(P),x.push(S),S.length===2&&x.length>1){const z=x[0].slice();x[0]=S,x[x.length-1]=z;const X=C[0].slice();C[0]=P,C[x.length-1]=X}}return await this.refreshPoolofSwapRouter(_),this.findBestSplitPrice(x,i,C,s,r,o)}async routerSwap(t,n,i,s,r,o){const a=await this.price(t,n,i,s,r,o),c=this.getCreateTxParams();if(a.isExceed)return{maxAmountOut:a.maxAmountOut,path:a.path,poolAddresses:a.poolAddresses,percents:a.percents,totalAmounts:a.totalAmounts,isExceed:a.isExceed,totalPercents:[],showRouters:[],gasFee:0};const d=this.splitSwapForRouters(c,s,!0),{simulationAccount:u}=this.sdk.sdkOptions.networkOptions,l=new bn(this.sdk.sdkOptions.rpcUrl),f=kc(u.address),p=await l.generateRawTransaction(f,d),m=kc(u.pubkey),_=new F.Ed25519PublicKey(m.toUint8Array()),x=await l.simulateTransaction(_,p),C=x[0].gas_used,k=x[0].gas_unit_price,T=parseInt(C,10)*parseInt(k,10),S=[];let P=$e;a.totalAmounts.forEach(X=>{P=P.add(new w(X))}),a.totalAmounts.forEach(X=>{let G;P.isZero()?G=0:G=Number(X)/Number(P.toString())*100,S.push(G)});const z=[];for(let X=0;X<a.totalAmounts.length;X+=1){const G={amount:a.totalAmounts[X],poolAddress:[]};X===Math.floor(a.poolAddresses.length/2)?a.poolAddresses[X].length>0&&(G.poolAddress.push(a.poolAddresses[X]),z.unshift(G)):a.poolAddresses[X].length>0&&(G.poolAddress.push(a.poolAddresses[X],a.poolAddresses[X+Math.floor(a.poolAddresses.length/2)+1]),z.push(G))}return{maxAmountOut:a.maxAmountOut,path:a.path,poolAddresses:a.poolAddresses,percents:a.percents,totalAmounts:a.totalAmounts,isExceed:a.isExceed,totalPercents:S,showRouters:z,gasFee:T}}splitSwap(t,n,i=!1){const{modules:s}=this.sdk.sdkOptions.networkOptions,r=`${s.ClmmIntegrate}::${pp}`,o=n?"exact_input_split_swap":"exact_output_split_swap",a=[];t.poolAddresses.forEach(f=>{const p=[];f.forEach(m=>{p.push(F.AccountAddress.fromHex(m))}),a.push(p)});const c=[de.bcsSerializeUint64(t.partitionQuantities[0]),de.serializeVectorWithFunc(t.swapDirects[0],"serializeBool"),JE(a[0]),de.serializeVectorWithFunc(t.percents[0],"serializeU64"),de.bcsSerializeUint64(parseInt(t.totalAmounts[0],10)),de.bcsSerializeUint64(parseInt(t.amountLimit,10)),de.bcsSerializeStr(t.partner)];if(i){const f=[];for(const p of t.coinTypes){const m=new F.TypeTagStruct(F.StructTag.fromString(p));f.push(m)}return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(r,o,f,c))}const d=Ut(r,o),u=t.coinTypes,l=[t.partitionQuantities[0],t.swapDirects[0],t.poolAddresses[0],t.percents[0],t.totalAmounts[0],t.amountLimit,t.partner];return{type:"entry_function_payload",function:d,type_arguments:u,arguments:l}}splitSwapForRouter(t,n,i,s=!1){const{modules:r}=this.sdk.sdkOptions.networkOptions,o=`${r.ClmmIntegrate}::${pp}`,a=[];t.poolAddresses.forEach(f=>{const p=[];f.forEach(m=>{p.push(F.AccountAddress.fromHex(m))}),a.push(p)});const c=[de.serializeVectorWithFunc(t.partitionQuantities,"serializeU64"),kb(t.swapDirects,"serializeBool"),XE(a),kb(t.percents,"serializeU64"),de.serializeVectorWithFunc(t.totalAmounts,"serializeU64"),de.bcsSerializeUint64(parseInt(t.amountLimit,10)),de.bcsSerializeStr(t.partner)];if(s){const f=[];for(const p of t.coinTypes){const m=new F.TypeTagStruct(F.StructTag.fromString(p));f.push(m)}return new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(o,i,f,c))}const d=[t.partitionQuantities,t.swapDirects,t.poolAddresses,t.percents,t.totalAmounts,t.amountLimit,t.partner],u=Ut(o,i),l=t.coinTypes;return{type:"entry_function_payload",function:u,type_arguments:l,arguments:d}}splitSwapForRouters(t,n,i=!1){const{length:s}=t.partitionQuantities;let r;switch(s){case 3:n?r="exact_input_split_swap_for_router_three":r="exact_output_split_swap_for_router_three";break;case 5:n?r="exact_input_split_swap_for_router_four":r="exact_output_split_swap_for_router_four";break;case 7:n?r="exact_input_split_swap_for_router_five":r="exact_output_split_swap_for_router_five";break;default:return this.splitSwap(t,n,i)}return this.splitSwapForRouter(t,n,r,i)}findUnFetchPools(t){const n=[];for(const i of t)this.poolMap.get(i)==null&&n.push(i);return n}async refreshPoolofSwapRouter(t){var n,i,s;const r=Date.now();if(this.isInited){const a=this.findUnFetchPools(t);if(r-this.leastRefreshTime<uP&&a.length===0)return}else this.isInited=!0;const o=await this._sdk.Resources.getPools(t);for(let a=0;a<t.length;a+=1)if(this.poolMap.set(o[a].poolAddress,o[a]),this.getPoolDirection(o[a].poolAddress)==null){const c=(n=this._coinAddressMap.get(o[a].coinTypeA))==null?void 0:n.symbol,d=(i=this._coinAddressMap.get(o[a].coinTypeB))==null?void 0:i.symbol,u=(s=this.getPoolAddressMapAndDirection(c,d))==null?void 0:s.direction;this.poolDirectionMap.set(o[a].poolAddress,u);const l=await this._sdk.Fetcher.fetchTicks({pool:o[a].poolAddress,coinTypeA:o[a].coinTypeA,coinTypeB:o[a].coinTypeB}),f=Q6(l);this.ticksMap.set(o[a].poolAddress,f)}this.leastRefreshTime=r}},hP=class{constructor(e){this._sdk=e}get sdk(){return this._sdk}transformTickData(e){const t=[],{modules:n}=this._sdk.sdkOptions.networkOptions,i=e.filter(o=>o.type!=="write_resource"?!1:o.data.type===`${n.FetcherDeployer}::fetcher::FetchTicksResult`);if(i.length===0)return{ticks:t,index:0,offset:0};const r=i[0].data.data;return{ticks:r.ticks||[],index:Number(r.index),offset:Number(r.offset)}}async getTicks(e){const{modules:t,simulationAccount:n}=this.sdk.sdkOptions.networkOptions,i=new bn(this.sdk.sdkOptions.rpcUrl),s=`${t.FetcherDeployer}::scripts`,r="fetch_ticks",o=[new F.TypeTagStruct(F.StructTag.fromString(e.coinTypeA)),new F.TypeTagStruct(F.StructTag.fromString(e.coinTypeB))],a=[de.bcsToBytes(F.AccountAddress.fromHex(e.pool)),de.bcsSerializeUint64(e.index),de.bcsSerializeUint64(e.offset),de.bcsSerializeUint64(e.limit)],c=new F.TransactionPayloadEntryFunction(F.EntryFunction.natural(s,r,o,a)),d=kc(n.address),u=await i.generateRawTransaction(d,c),l=kc(n.pubkey),f=new F.Ed25519PublicKey(l.toUint8Array()),p=await i.simulateTransaction(f,u);return this.transformTickData(p[0].changes)}async fetchTicks(e){let t=[],n=0,i=0;const s=512;for(;;){const r=await this.getTicks({pool:e.pool,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,index:n,offset:i,limit:s});if(t=[...t,...r.ticks],r.ticks.length<s)break;r.offset<999?(i=r.offset+1,n=r.index):(n=r.index+1,i=0)}return t}},pP=class{constructor(e){this.globalConfig={protocol_fee_rate:"",is_pause:!1},this._sdkOptions=e,this._client=new bn(e.rpcUrl),this._tokenClient=new R9(this._client),this._swap=new tP(this),this._position=new nP(this),this._resources=new rP(this),this._pool=new oP(this),this._rewarder=new aP(this),this._router=new fP(this),this._token=new dP(this),this._fetcher=new hP(this),this._launchpad=new jE(this),this.globalConfig.protocol_fee_rate=""}async getGlobalConfig(e=!1){return(this.globalConfig.protocol_fee_rate.length===0||e)&&(this.globalConfig=await this._resources.getGlobalConfig(this._sdkOptions.networkOptions.modules.LiquidswapDeployer)),this.globalConfig}get client(){return this._client}get tokenClient(){return this._tokenClient}get Swap(){return this._swap}get Position(){return this._position}get Pool(){return this._pool}get Resources(){return this._resources}get Rewarder(){return this._rewarder}get Token(){return this._token}get Router(){return this._router}get Fetcher(){return this._fetcher}get Launchpad(){return this._launchpad}get sdkOptions(){return this._sdkOptions}};const gP=_T(),xh=gP.public.appEnv;console.log("config env: ",xh);const mP={pro:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0x4fb259302630bf727f1b489e0597131fe4d8ccba12074bb7fedba3886c008945",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://alpha.cetus.zone",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.mainnet.sui.io",fullRpcUrl:"https://fullnode.mainnet.sui.io",rpcName:"Sui Official",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.cetus.zone/v2/sui/swap/count",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0x70968826ad1b4ba895753f634b0aea68d0672908ca1075a2abdf0fc9e0b2fc6a",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x8faab90228e4c4df91c41626bbaefa19fc25c514405ac64de54578dec9e6f5ee"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6",published_at:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6"},aggregatorUrl:"https://api-sui.cetus.zone/router",launchpad:{package_id:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",published_at:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",config:{pools_id:"0xfd8d37f7a1276878972d240302c8efe32f577220c1bbc6c8984d8b60dddfcab3",admin_cap_id:"0x66c70d58c69353714cc6fe2d3a62492d605a96a9821e2bd8274de17219c69980",config_cap_id:"0x02b8d23f033687579966e182c776fe0287cacdbb18bff56c29f141e29a18a4d1"}},ido:{package_id:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",published_at:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",config:{pools_id:"0xefc209b47acf1f23b29d166440904600229e520ad36228aaf2329b7c16be9762",admin_cap_id:"0x281859d366951830aeeda90779aa170d8ee6845875545470d33ecb890e78c8ce",package_version_id:"0xc93dc996106770af5f4e979b6808518f8cee080f22f35b936f071f59d834bb22"}},xcetusTokenAddress:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",xcetus:{package_id:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",published_at:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0xcec352932edc6663a118e8d64ed54da6b8107e8719603bf728f80717592cd9e8",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"",dividend_settle_id:""}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},vaults:{package_id:"0xd3453d9be7e35efe222f78a810bb3af1859fd1600926afced8b4936d825c9a05",published_at:"0xabbd278f738affe762e9df4765b3409bb1e86a355a4f611ad82b278c18108918",config:{admin_cap_id:"0x78a42978709c4032fab7b33b782b5bcef64c1c6603250bf23644650b72144375",vaults_manager_id:"0x25b82dd2f5ee486ed1c8af144b89a8931cd9c29dee3a86a1bfe194fdea9d04a6",vaults_pool_handle:"0x9036bcc5aa7fd2cceec1659a6a1082871f45bc400c743f50063363457d1738bd",haedal:{package_id:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d",published_at:"0x1d56b8ec33c3fae897eb7bb1acb79914e8152faed614868928e684c25c8b198d",version:1,config:{staking_id:"0x47b224762220393057ebf4f70501b6e657c3e56684737568439a04f80849b2ca",coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"}},volo:{package_id:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",published_at:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",version:1,config:{native_pool:"0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",vsui_metadata:"0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60",coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"}},aftermath:{package_id:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",published_at:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",version:1,config:{staked_sui_vault:"0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",referral_vault:"0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",safe:"0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",validator_address:"0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2",coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"}}}},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!0,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"},frams:{package_id:"0x11ea791d82b5742cc8cab0bf7946035c97d9001d7c3803a93f119753da66f526",published_at:"0xd817d90368dafcbf3b051e96546dea6209bffad23289d66025beef80354dcd6b",config:{global_config_id:"0x21215f2f6de04b57dd87d9be7bb4e15499aec935e36078e2488f36436d64996e",rewarder_manager_id:"0xe0e155a88c77025056da08db5b1701a91b79edb6167462f768e387c3ed6614d5",rewarder_manager_handle:"0xb32e312cbb3367d6f3d2b4e57c9225e903d29b7b9f612dae2ddf75bdeb26a5aa",admin_cap_id:"0xf10fbf1fea5b7aeaa524b87769461a28c5c977613046360093673991f26d886c"}},limit_order:{package_id:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",published_at:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",config:{rate_orders_indexer_id:"0xe7fa62b6fc095ed5659b85c735f4322059e1f4616dcf3343adece6e7eb52bf47",rate_orders_indexer_handle:"0x81a95c812cab1c9cc7a1c10446d93d2d9517097211c72b544f7efed33b540bcc",global_config_id:"0xd3403f23a053b52e5c4ef0c2a8be316120c435ec338f2596647b6befd569fd9c",token_list_handle:"0x644a7f05eff2a1b4c266d7ce849c8494fb068a4e29037c7c523e5eb822389d8d",user_orders_indexer_id:"0x7f851ac19e438f97e78a5335eed4f12766a3a0ae94340bab7956a402f0e6212e",user_orders_indexer_handle:"0x84703679acd2eeaee8de4945be79d029ab94966bc22e0f6cfd696032fd31bbc7"}},cetus_integrate2:{package_id:"0x0ee90618ca31b06a80124118a6c2f51825efd6a32e36d5bfebb7a18b8f4b6c7f",published_at:"0x878ffd6f1a0b1fe8a5b93822d1c1de1ed9399e784ac2b9252bbb5c61b674debc"}}},pre:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.mainnet.sui.io",fullRpcUrl:"https://fullnode.mainnet.sui.io",rpcName:"Sui Official",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.cetus.zone/v2/sui/swap/count",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0x70968826ad1b4ba895753f634b0aea68d0672908ca1075a2abdf0fc9e0b2fc6a",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x8faab90228e4c4df91c41626bbaefa19fc25c514405ac64de54578dec9e6f5ee"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6",published_at:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6"},aggregatorUrl:"https://api-sui.cetus.zone/router",launchpad:{package_id:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",published_at:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",config:{pools_id:"0xfd8d37f7a1276878972d240302c8efe32f577220c1bbc6c8984d8b60dddfcab3",admin_cap_id:"0x66c70d58c69353714cc6fe2d3a62492d605a96a9821e2bd8274de17219c69980",config_cap_id:"0x02b8d23f033687579966e182c776fe0287cacdbb18bff56c29f141e29a18a4d1"}},ido:{package_id:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",published_at:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",config:{pools_id:"0xefc209b47acf1f23b29d166440904600229e520ad36228aaf2329b7c16be9762",admin_cap_id:"0x281859d366951830aeeda90779aa170d8ee6845875545470d33ecb890e78c8ce",package_version_id:"0xc93dc996106770af5f4e979b6808518f8cee080f22f35b936f071f59d834bb22"}},xcetusTokenAddress:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",xcetus:{package_id:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",published_at:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0xcec352932edc6663a118e8d64ed54da6b8107e8719603bf728f80717592cd9e8",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"",dividend_settle_id:""}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},vaults:{package_id:"0xd3453d9be7e35efe222f78a810bb3af1859fd1600926afced8b4936d825c9a05",published_at:"0xabbd278f738affe762e9df4765b3409bb1e86a355a4f611ad82b278c18108918",config:{admin_cap_id:"0x78a42978709c4032fab7b33b782b5bcef64c1c6603250bf23644650b72144375",vaults_manager_id:"0x25b82dd2f5ee486ed1c8af144b89a8931cd9c29dee3a86a1bfe194fdea9d04a6",vaults_pool_handle:"0x9036bcc5aa7fd2cceec1659a6a1082871f45bc400c743f50063363457d1738bd",haedal:{package_id:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d",published_at:"0x1d56b8ec33c3fae897eb7bb1acb79914e8152faed614868928e684c25c8b198d",version:1,config:{staking_id:"0x47b224762220393057ebf4f70501b6e657c3e56684737568439a04f80849b2ca",coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"}},volo:{package_id:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",published_at:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",version:1,config:{native_pool:"0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",vsui_metadata:"0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60",coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"}},aftermath:{package_id:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",published_at:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",version:1,config:{staked_sui_vault:"0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",referral_vault:"0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",safe:"0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",validator_address:"0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2",coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"}}}},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!1,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"},frams:{package_id:"0x11ea791d82b5742cc8cab0bf7946035c97d9001d7c3803a93f119753da66f526",published_at:"0xd817d90368dafcbf3b051e96546dea6209bffad23289d66025beef80354dcd6b",config:{global_config_id:"0x21215f2f6de04b57dd87d9be7bb4e15499aec935e36078e2488f36436d64996e",rewarder_manager_id:"0xe0e155a88c77025056da08db5b1701a91b79edb6167462f768e387c3ed6614d5",rewarder_manager_handle:"0xb32e312cbb3367d6f3d2b4e57c9225e903d29b7b9f612dae2ddf75bdeb26a5aa",admin_cap_id:"0xf10fbf1fea5b7aeaa524b87769461a28c5c977613046360093673991f26d886c"}},limit_order:{package_id:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",published_at:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",config:{rate_orders_indexer_id:"0xe7fa62b6fc095ed5659b85c735f4322059e1f4616dcf3343adece6e7eb52bf47",rate_orders_indexer_handle:"0x81a95c812cab1c9cc7a1c10446d93d2d9517097211c72b544f7efed33b540bcc",global_config_id:"0xd3403f23a053b52e5c4ef0c2a8be316120c435ec338f2596647b6befd569fd9c",token_list_handle:"0x644a7f05eff2a1b4c266d7ce849c8494fb068a4e29037c7c523e5eb822389d8d",user_orders_indexer_id:"0x7f851ac19e438f97e78a5335eed4f12766a3a0ae94340bab7956a402f0e6212e",user_orders_indexer_handle:"0x84703679acd2eeaee8de4945be79d029ab94966bc22e0f6cfd696032fd31bbc7"}},cetus_integrate2:{package_id:"0x0ee90618ca31b06a80124118a6c2f51825efd6a32e36d5bfebb7a18b8f4b6c7f",published_at:"0x878ffd6f1a0b1fe8a5b93822d1c1de1ed9399e784ac2b9252bbb5c61b674debc"}}},preRoute:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!0,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{fullRpcUrl:"https://fullnode.mainnet.sui.io",rpcName:"Sui Official",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0xfa36bcb799278bddaf295991b2d3ce039013b1dd60dfd7183dee135fdadbc4be",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0xac95e8a5e873cfa2544916c16fe1461b6a45542d9e65504c1794ae390b3345a7",published_at:"0xac95e8a5e873cfa2544916c16fe1461b6a45542d9e65504c1794ae390b3345a7"},aggregatorUrl:"https://api-sui.cetus.zone/router1",launchpad:{package_id:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",published_at:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",config:{pools_id:"0xccc10403ab3da4ae943847908e0e674fe1fdab81c6383e4c6dcd0eea0edade3d",admin_cap_id:"0x8a72713049dbcfc40902ff209dc5e6066fe455d152baa235957c84d7a3b875ed",config_cap_id:"0x16492b4252b01debb60f8a825334020d7fdb9d895b52f8139c98618de30817fc",config_pools_id:"0x3b8a3b1fb77e7b21d1f6b6b3afbe083a35621fd8a0fcf40e87cee5c0ef0c51e0"}},ido:{package_id:"0x7cc8461d20ad82d3851123a64bed22883199b465763ee53b1b529fba1f4e15cc",published_at:"0x9f63e8926719bcb45df55fb60b4444f4d50309bff2e85cccc1fdb91c3e4653a2",config:{pools_id:"0x68b4b6bd15aa086df8f8d94f62fb5b38817a02cc288802d1637e1febae46f545",admin_cap_id:"0x5a304d63a5421a3fbc190b3d124f7ea3cdf56b1cb8fd3e0bf4855d129075caef",package_version_id:"0xceab2289e0968f0e7172ce702af8f28a678570afa6b139e97bc344f0290672d6"}},xcetus:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0xbd63384b94d047a62e82c42f0566a04e52dd58f80266f84d8ab1164e970e0282",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0xbd63384b94d047a62e82c42f0566a04e52dd58f80266f84d8ab1164e970e0282",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"",dividend_settle_id:""}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"}}},test:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.dev.notifi.network/gql",notifiEnv:"Development",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75::coin::CetusUSDC",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.testnet.sui.io",fullRpcUrl:"https://fullnode.testnet.sui.io",faucetURL:"",explorerUrl:"https://explorer.sui.io/",explorerUrl1:"https://testnet.suivision.xyz",network:"testnet",networkTip:"Testnet",api:"https://api-sui.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.devcetus.com/v2/sui/swap/count/v3",faucet:{faucet_display:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc",faucet_router:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc"},simulationAccount:{address:"0xcd0247d0b67e53dde69b285e7a748e3dc390e8a5244eb9dd9c5c53d95e4cf0aa"},cetus_config:{package_id:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",published_at:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",config:{coin_list_id:"0x257eb2ba592a5480bba0a97d05338fab17cc3283f8df6998a0e12e4ab9b84478",launchpad_pools_id:"0xdc3a7bd66a6dcff73c77c866e87d73826e446e9171f34e1c1b656377314f94da",clmm_pools_id:"0x26c85500f5dd2983bf35123918a144de24e18936d0b234ef2b49fbb2d3d6307d",admin_cap_id:"0x1a496f6c67668eb2c27c99e07e1d61754715c1acf86dac45020c886ac601edb8",global_config_id:"0xe1f3db327e75f7ec30585fa52241edf66f7e359ef550b533f89aa1528dd1be52",coin_list_handle:"0x3204350fc603609c91675e07b8f9ac0999b9607d83845086321fca7f469de235",launchpad_pools_handle:"0xae67ff87c34aceea4d28107f9c6c62e297a111e9f8e70b9abbc2f4c9f5ec20fd",clmm_pools_handle:"0xd28736923703342b4752f5ed8c2f2a5c0cb2336c30e1fed42b387234ce8408ec"}},clmm_pool:{package_id:"0x0868b71c0cba55bf0faf6c40df8c179c67a4d0ba0e79965b68b3d72d7dfbf666",published_at:"0x084dbc14f8f6b50e4e1d6828ebf1f93fd1b1d2502b121bc787937893793417b0",config:{pools_id:"0xc090b101978bd6370def2666b7a31d7d07704f84e833e108a969eda86150e8cf",global_config_id:"0x6f4149091a5aea0e818e7243a13adcfb403842d670b9a2089de058512620687a",global_vault_id:"0xf3114a74d54cbe56b3e68f9306661c043ede8c6615f0351b0c3a93ce895e1699"}},integrate:{package_id:"0x8627c5cdcd8b63bc3daa09a6ab7ed81a829a90cafce6003ae13372d611fbb1a9",published_at:"0xe26cb89a7c3bb9a00b396e278f4f1f90aae02d0da37cd4b0c4b4977ca95568ef"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0xa34ffca2c6540e1ca9e53963ab43e7b1eed7b82e37696c743bb7c6179c15dfa6",published_at:"0xa34ffca2c6540e1ca9e53963ab43e7b1eed7b82e37696c743bb7c6179c15dfa6"},aggregatorUrl:"https://api-sui.devcetus.com/router",launchpad:{package_id:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",published_at:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",config:{pools_id:"0xccc10403ab3da4ae943847908e0e674fe1fdab81c6383e4c6dcd0eea0edade3d",admin_cap_id:"0x8a72713049dbcfc40902ff209dc5e6066fe455d152baa235957c84d7a3b875ed",config_cap_id:"0x16492b4252b01debb60f8a825334020d7fdb9d895b52f8139c98618de30817fc",config_pools_id:"0x3b8a3b1fb77e7b21d1f6b6b3afbe083a35621fd8a0fcf40e87cee5c0ef0c51e0"}},ido:{package_id:"0x1352bf18ef20458f7cc773852d4a90b240015a6a54479dda3a1debfc500bf044",published_at:"0xbd09a0889ea9970b821512428bab3e2fd01e16809a90a325cd3b3d3573eab6a4",config:{pools_id:"0x346bee25ab4d15bcfa9484ef5ebd4d7c94eb665ebaa745ff4094936a7f59a8b1",admin_cap_id:"0xc1bb19a24d3bb65dfd4f3835637b63347c223c67cde4b0888f1a857974f33cbb",package_version_id:"0x3ccf1b38e3259e638b980d4e6b49eac8c5aa94d3cb2ace5e75f0a551c8e67e5e"}},xcetusTokenAddress:"0x04792c459e2c20d1d48c85ab2eed98ef115d5b3e36ccf6ce8d0d3c79ca548c91::xtoken::XTOKEN",xcetus:{package_id:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",published_at:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",config:{xcetus_manager_id:"0x3be34cbad122c8b100ed7157d762b9610e68b3c65734e08bc3c3baf857da807d",lock_manager_id:"0x7c67e805182e3fecd098bd68a6b06c317f28f8c6249bd771e07904a10b424e60",lock_handle_id:"0xc5f3bbfefe9a45c13da7a34bc72cac122ee45d633690476a8ac56bd2c4e78c86"}},xcetus_dividends:{package_id:"0x20d948d640edd0c749f533d41efc5f843f212d441220324ad7959c6e1d281828",published_at:"0x20d948d640edd0c749f533d41efc5f843f212d441220324ad7959c6e1d281828",config:{dividend_manager_id:"0x13b7facb704fae1d199ff0038b8acabc253415a77d142b39189dee97d457e442",dividend_admin_id:"0x5eb78463007422d4130b21f61c180bcd190819b7792f56e00a61df3b8fb928ef",dividend_settle_id:"0x495095e13a170ff494d242ae44ac2c7453011ca6c33cff27498010105e10e4b4"}},cetus_faucet:{package_id:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7",published_at:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7"},xtoken:{package_id:"0xb58a7b66d3d007d9977940598187104084951bd8fdabb74f03f68151a3e27710",published_at:"0x72eefdfad9c79ef4c69748f9fcaf47874779704475d9ce35a29cc0ff1b9ce29f",config:{xtoken_manager_id:"0x51c6f72ecbc819aeee851b5e2d79cf6100e8e2b44e7ca55b06bd81bd163f677f",lock_manager_id:"0x92cb9f128ae2f823401c2104136a96cde6c201d6a133a1c7b5c67f4400711a10",lock_handle_id:"0x5cc82e84cf911a2d904997c7ef3e2e98eb3fea0bc43308f7b8c52bf0aff478b9"}},xtoken_dividends:{package_id:"0xdc899c0b05327036990f08cd70b99ef92c4288b784cbb82088c099d109a30226",published_at:"0x4677c8990eab6036d7059be96ad82173efd88775be36e277f4543155da4cbb9e",config:{dividend_manager_id:"0xaf17350657fb26a972d088bfb9db4491d11bf5533b7a5272ab6aa4a1badee749",dividend_admin_id:"0x8c0993c6ea9574cf6a3743698a0d6a46c7bbc4bab668d28b51aa947ad34edfc2",dividend_settle_id:"0xd938930b4ad7ef0cd85d8ae640d6ed7fd5cfcb64101994b69b88aa240dba1cb0"}},token_faucet:{package_id:"0xc0a53bf7b0471fdff173e84c065641bcdba791681840f4dacd767725924bfcd5",published_at:"0xc0a53bf7b0471fdff173e84c065641bcdba791681840f4dacd767725924bfcd5"},booster:{package_id:"0xffa4c477b7d991a05ebd4e8cb635d05d8bec129799ddd6407068cfefa8913870",published_at:"0xffa4c477b7d991a05ebd4e8cb635d05d8bec129799ddd6407068cfefa8913870",config:{booster_config_id:"0xeba41bf99086b0140713d7dd102e1374281a608bf524cc38f62c1d2bd792715c",booster_pool_handle:"0x01f9ba86234f661157366b8393eaeba82c8b78bf40fd9728604c3cc142811629"}},liquidity_stratefy:{package_id:"0x9b894cff0422a6acc41dadab3c8e2f52da7b5f0b366821a80d62eaf650565c3f",published_at:"0xc76c30d0a7b3e0a4372b6e7f24d73ef4d7740eaf920789e658795502c2fd252a",config:{master_manger_id:"0x562f2c9a90ffc3cdbe492b8cedb2e911954c81e8d20b47c4d2b0b2782bd7cad2",master_liquidity_handle:"0x323179fcd8fc2c01f146a902aaec56221e791fb0f1965907c97b25cba5eac515"}},vaults:{package_id:"0x25cff94bdb454bae6a5565d09047bfe2b230025ef3bd2199622ec48d854b86b9",published_at:"0xe1fb9fc8542a9e7768b0a701bf0c11b595201fb2492791a03eb9c0bb319297f3",config:{admin_cap_id:"0x9b2d6f5be2650d16d27cd630c4539a76d7793970343ed3cbb023e13f1637c07c",vaults_manager_id:"0xc0a1a937df08880e395d85014ff40c74f13abe7a53abdbffea36f51adaaaf79e",vaults_pool_handle:"0x3ab02203de753de9c8198cc0ce7594dc960878f2c34c5c5a4b7742082241860a",haedal:{package_id:"0xac2afb455cbcdc2ff1a2e9bbb8aa4ccb4506a544b08c740886892a5cdf92f472",published_at:"0x9dac9c5770e5f930d2223ff68782958701acfaee9337e8d8363978ce7670dffb",version:1,config:{staking_id:"0x6e384d2da5b040b27f973155e25bbe4beb0ad5ca8ee0a36e20dff356094c9fc0",coin_type:"0xac2afb455cbcdc2ff1a2e9bbb8aa4ccb4506a544b08c740886892a5cdf92f472::hasui::HASUI"}},volo:{package_id:"",published_at:"",version:1,config:{native_pool:"",vsui_metadata:"",coin_type:"::cert::CERT"}},aftermath:{package_id:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4",published_at:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4",version:1,config:{staked_sui_vault:"0xe498a8c07ec62200c519a0092eda233abdab879e8f332c11bdc1819eb7b12fbb",referral_vault:"0x8d357115058f22976cd01c5415116d9aca806d1ded37eecd75d87978f404e927",safe:"0x38710a6e0bd885c158e52ec7a42c8a9a1826c6696b626b4a5e2d1dcb15cfd9b7",validator_address:"0x9336c4c9d891e263cfac99adc397853a7392e5cf84cbd5df92207a57c7fbdadc",coin_type:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4::afsui::AFSUI"}}}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!0,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::usdc::USDC",toCoin:"0x2::sui::SUI"},frams:{package_id:"0xfa0d98e99c1dbdbea1b0fe089fa93ebab40a7719ae4160c42cc78ebfe029fda0",published_at:"0xc4c250fa155fb27668650fd96aeaade6a3e7c669395f147b05747a5d9eb35795",config:{global_config_id:"0x5082c7a5ee9a758025d7b0a5e8aa08b56625c7cd535b8909d2b7993991e229cc",rewarder_manager_id:"0xe789e092dbd9dceadbe89350c4761a6f2e11647aab97f09746a01b151926cc0e",rewarder_manager_handle:"0x7e7dd42392b5d82564dc9ad5093a111c5f0598cc9f806cff257d7dacb71f7837",admin_cap_id:"0x4ec248bca2d1fc05f39fd7491ab490464a46d128624caa4d3c2a66d957ef40b0"}},limit_order:{package_id:"0xc65bc51d2bc2fdbce8c701f8d812da80fb37dba9cdf97ce38f60ab18c5202b17",published_at:"0xc65bc51d2bc2fdbce8c701f8d812da80fb37dba9cdf97ce38f60ab18c5202b17",config:{rate_orders_indexer_id:"0xeaa7dc3a4b70c14b434aed2cef0bdd272a781c630ea3c54c25fa53c72fb3cf96",rate_orders_indexer_handle:"0x62eea7ce7be125e6b43fac6158d0ac8a6b0f263446d4631ad5a3629d82fef2ed",global_config_id:"0xd4d98f126233057b3a01f17adfb5bc77d7bdb0332fe982ab44c6c7a2f66443dc",token_list_handle:"0x81233cdf2165f013a57c3ab180b079e0f411483ba7f80dd6fbcb74426d2045f9",user_orders_indexer_id:"0x18ff28ae25ea50c703a0dfcc49653cc7dd7035207e26c8f86fa9e4aea49037d0",user_orders_indexer_handle:"0xbe3301b85fb0fc99deacb68c31d971837ae23a65c38680cf79a6b8562518b4c7"}},cetus_integrate2:{package_id:"0xa71067b18948d08cee0af255fa5302a8c9d0dd3c3a4cbaf3d9a4e2370cc1581c",published_at:"0xa71067b18948d08cee0af255fa5302a8c9d0dd3c3a4cbaf3d9a4e2370cc1581c"}}},pre_test:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!0},Sui:{fullRpcUrl:"https://rpc-mainnet.suiscan.xyz:443",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},token:{token_display:"0x481fb627bf18bc93c02c41ada3cc8b574744ef23c9d5e3136637ae3076e71562",config:{coin_registry_id:"0xe0b8cb7e56d465965cac5c5fe26cba558de35d88b9ec712c40f131f72c600151",pool_registry_id:"0xab40481f926e686455edf819b4c6485fbbf147a42cf3b95f72ed88c94577e67a",coin_list_owner:"0x1f6510ee7d8e2b39261bad012f0be0adbecfd75199450b7cbf28efab42dad083",pool_list_owner:"0x6de133b609ea815e1f6a4d50785b798b134f567ec1f4ee113ae73f6900b4012d"}},clmm:{clmm_display:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",clmm_router:"0x780e590a9354f5bcb429af4578c742aaa0ee20ab942bb2bbd161fbde4b64b08c",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},launchpad:{ido_display:"0x68aac2d6a88bc1e868c48ee99918b71373877308f7e63cb22ac1971cad9d6e67",ido_router:"0x68aac2d6a88bc1e868c48ee99918b71373877308f7e63cb22ac1971cad9d6e67",config_display:"0xc9b958492e4be73e0af4daa48101bc7ab2a7ab7c67585938ea3535929fc193fa",config:{pools_id:"0x7b96aea4d695996635265e2cc41d5c5f5c4cd70f36763e41b2abf2fa1eff866f",admin_cap_id:"0x342f4b272ff5abcaacc770a5972728b154a5e74835fa36b2340ad94895184acb",config_cap_id:"0xef2a813b8c1bbaf9470fff7df0fd0febebdc6e2bbd3d7bf9a917734af7893428",config_pools_id:"0x04b6e8de80f325bdf5963dc54f324c3319b471f2f93163ebc982bee0d9b38336"}},xcetus:{xcetus_display:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",xcetus_router:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",dividends_display:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",dividends_router:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",cetus_faucet:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49",dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5"}},hasCreatePool:!1,hasNotifi:!1}},testnet_external:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.dev.notifi.network/gql",notifiEnv:"Development",hasCreatePool:!0,hasNotifi:!0},Sui:{fullRpcUrl:"https://rpc-testnet.suiscan.xyz:443",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api-sui-testnet-ex.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x5f9d2fb717ba2433f7723cf90bdbf90667001104915001d0af0cccb52b67c1e8"},token:{token_display:"0xc7c40602f81eee198f472e14c87cb9c7186496064adba06cef1768c8b1785512",config:{coin_registry_id:"0xde9a5123749136ca9fe05b88777e322f2161fe4aa71e9c575d5e27a31b815d40",pool_registry_id:"0x7b7b399344838363ec96611f133c77b98042404559e326fd289885b88848a3c5",coin_list_owner:"0xc93e168a9361b5443fef27dbbb95a023337c6bfd082fdd920d658f4f9147d801",pool_list_owner:"0x36d796de9529007373fd2e34311511a8ca4eaef2bf7ea65f65ab68a1bc1de092"}},clmm:{clmm_display:"0x837dddad95c6741474cde3e414a2eebccbeae81d0b378f193d00381bdaf0da62",clmm_router:"0x32ba8c0298964e26161b3b44375ac39eeab6b29207e00c5f44368426096eb902",config:{pools_id:"0xc8407fc5dfec8d7b7014ee4d244dbe4eb456bfa6a7878e88c9d4bc947b2c2d87",global_config_id:"0x43e2925f7c5bed04b612cc66c53a850e280a46704ce12cd2f25420b537e23f9d",global_vault_id:"0x435c9725c4026206002a5a4004762316a53891f21a10c695311074482e52757e"}},launchpad:{ido_display:"",ido_router:"",lock_display:"",lock_router:"",config:{pools_id:"",admin_cap_id:"",config_cap_id:"",lock_manager_id:""}},xcetus:{xcetus_display:"",xcetus_router:"",dividends_display:"",dividends_router:"",cetus_faucet:"",config:{xcetus_manager_id:"",lock_manager_id:"",dividend_manager_id:""}},hasCreatePool:!0,hasNotifi:!1}},local:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",hasCreatePool:!0,hasNotifi:!0},Sui:{fullRpcUrl:"http://192.168.1.41:9000",faucetURL:"http://192.168.1.41:9123/gas",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api-sui-testnet.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet_router:"0x61353a797a3d7f9c5522641bf824d730272260bcf66c7fcaf36a50243418caca",simulationAccount:{address:"0x5f9d2fb717ba2433f7723cf90bdbf90667001104915001d0af0cccb52b67c1e8"},token:{token_display:"",config:{coin_registry_id:"",pool_registry_id:"",coin_list_owner:"",pool_list_owner:""}},clmm:{clmm_display:"0x33e0056fdbd9444c20302ce4141eaf5ec66fe864b62d8c0e3ee3bb1d138ee445",clmm_router:"0x306efa18b1a70af5007aaccd3b228e4f97f5596bf20c3a2d7b6321dfe8e30765",config:{pools_id:"0xae24565ffac1eb9f2fcb03b1dc21c21d1ce2a992d13a1a58e51d28293249d21c",global_config_id:"0xb8bd0870a43a75c55690a8ffbc13682ae7e0a8254348524963657474342c20b4",global_vault_id:"0x639c2d2d068df99602a9ef014b000df26b0312c07cb06065992cac911e1c376d"}},launchpad:{ido_display:"0x035fb17bbae20f35d476ea93f4a3d0b8e8da4c63d4a8598b647dfa4931f35774",ido_router:"0x035fb17bbae20f35d476ea93f4a3d0b8e8da4c63d4a8598b647dfa4931f35774",lock_display:"0x10df8c3eee9ea7a459a1f8417ced9c2e0f3eb9ff62862e0f42eced2763b94f42",lock_router:"0x10df8c3eee9ea7a459a1f8417ced9c2e0f3eb9ff62862e0f42eced2763b94f42",config:{pools_id:"0x1b3a62d143ac08dee37670eea58e714ab7cd501a396060bd2caf7a77fee88dfa",admin_cap_id:"0x0cb7daf2484c38e4a183813b8ad51b6ed664d135b7897e72be095768c90df911",config_cap_id:"0x40f0cee72c6e86d5a7b0e013a18cad8bf567bb70075b4a0f1c63eab8953a3dfd",lock_manager_id:"0x23954bf7d5c7880b50a369ee439a11ab771b7e0079a042645c4920d5e618b898"}},xwhale:{xwhale_display:"0x590775726e4c07f24a8a6cd14e2a05cb719b2c09690bbce2d9b251b2ff6fa941",xwhale_router:"0x590775726e4c07f24a8a6cd14e2a05cb719b2c09690bbce2d9b251b2ff6fa941",dividends_display:"0x6dc245017f96ebba55486f0c4fcf8f58c48f30980f48a3f27e1c98672cb253b9",dividends_router:"0x6dc245017f96ebba55486f0c4fcf8f58c48f30980f48a3f27e1c98672cb253b9",booster_display:"",booster_router:"",whale_faucet:"0xb0845bcf2f985e6ea5b401218598212e11f915a0c4d7afd1ed6e04b83e7d6310",config:{xwhale_manager_id:"0x46b2a60ee784180534ea2a6568ca510b488ea190f822cab8a9d38fb01b8e6421",lock_manager_id:"0x253e34da0542134e39b3c5dade1f5437d1b6ef6e90adfaa014186b456b6d7ffd",dividend_manager_id:"0xced885ada26d894f30efc236303caa500c994a25db5b18ee01e7664729cb983c"}},hasCreatePool:!0,hasNotifi:!1},Sui2:{cetusClmm:"0x296e6ae7204fc10eaf8f08e4b4faf4ddd4ad001c",cetusIntegrate:"0x9cce89ed875c398dde64a5ccdfbebb6140b13b0f",integerMate:"0x3a1a096b4d2598eb3958c91fc8787c3e62f40770",swapPartner:"0xa420bad83346a8cd05c98fff988d90ef8d149b4c",TokenDeployer:"0x7bfe88372b99abb54609b58fee652b97a162cbcf",faucetObjectId:"0x6740d70296035d0345bed636a820af129f6ed422",initEventConfig:{initFactoryEvent:{pools_id:"0x526554aec8e229cc79f2a3e375813f6be92aabf8"},initPartnerEvent:{partners_id:"0x9bd1abed942c804d11a3ebb224fef4c8abda4dbb"},initConfigEvent:{admin_cap_id:"0x1b585be50405d80698ee1cffbde0e884944b64ce",global_config_id:"0x7b357faee524eda340b9924a828814eab7c107f7",protocol_fee_claim_cap_id:"0xfec3fa3d8176952d584213d9e286bbbb1717af02"}},tokenConfig:{coin_registry_id:"0x3f9f6609fc99440e41c7e178ff1250274170c889",pool_registry_id:"0x699cff0b7e44e565908b4acfa482022cfbfc16c1",coin_list_owner:"0x7634802da06a3a4c8e4aa8c425cfd83406670e34",pool_list_owner:"0xa4e177fe96f33a7ec7f2aa14ad5387cac7c7cc21"},rpcUrl:"https://fullnode.testnet.sui.io",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",simulationAccount:"0x3f6cfdcf7bc19e86693d3d0f261f56b6e8caff0d",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0xbd1a8bd64216a4b102dc45a926bde4eb212108ae",currentChainTokenAddress:"0x2::sui::SUI"}},dev:{Aptos:{liquidswapDeployer:"0x80d6b00867cafcd40f9db3aa570ad1196f11ec5f57506799aec2a2940651fd37",faucetObjectId:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29",fetcher:"0x3ac260dc3ba7d7173e5ad8ce9a5d0ee62184e95425343cfd287f6e53dc52a4bd",clmmIntegrate:"0x3ac260dc3ba7d7173e5ad8ce9a5d0ee62184e95425343cfd287f6e53dc52a4bd",TokenDeployer:"0xc50b243a7180dfad9afd7dff8451c7b16cf27a92b6816f521b1f3c6d0c5397e3",IntegerMate:"0x45ba3bca9e81591a852df423105ecf2978dc03a5c0223033669bb889656a94a8",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.devnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"devnet",networkTip:"Devnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",hasCreatePool:!0,hasNotifi:!0},Sui:{liquidswapDeployer:"0x2b8f54bf724fa62789299569210d6c94758dd636",globalPauseStatusObjectId:"0x877cd08c02a2faa110a020f4f203304b114d76d2",faucetObjectId:"0x61df0e8caaf7b241d137fdc97906e3ca6bd68cca",rpcUrl:"https://fullnode.testnet.sui.io",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",ammSite:"https://cetus-pre.netlify.app",api:"https://api.devcetus.zone",currentChainTokenAddress:"0x2::sui::SUI",hasCreatePool:!0,hasNotifi:!1}}},Ue={...mP[xh]},_P={pro:{Aptos:[{name:"Default",link:"https://explorer.aptoslabs.com"}],Sui:[{name:"SuiVision",link:"https://suivision.xyz"},{name:"Suiscan",link:"https://suiscan.xyz"}]},pre:{Aptos:[{name:"Default",link:"https://explorer.aptoslabs.com"}],Sui:[{name:"SuiVision",link:"https://suivision.xyz"},{name:"Suiscan",link:"https://suiscan.xyz"}]},preRoute:{Aptos:[{name:"Default",link:"https://explorer.aptoslabs.com"}],Sui:[{name:"SuiVision",link:"https://suivision.xyz"},{name:"Suiscan",link:"https://suiscan.xyz"}]},test:{Aptos:[{name:"Default",link:"https://explorer.aptoslabs.com"}],Sui:[{name:"SuiVision",link:"https://testnet.suivision.xyz"},{name:"Suiscan",link:"https://suiscan.xyz"}]}},Ul={..._P[xh]};function En(e,t){const n=Zg(t);return At(e).div(n).toString()}function si(e,t){const n=Zg(t);return At(e).mul(n)}function bP(e){const t=e.split("x");let n=e;return t[1][0]==="0"&&(n=t[0]+"x"+t[1].slice(1)),n}const nj=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Bb=e=>{switch(e){case"account":return"account";case"token":return"";case"nftAddress":return"token";case"tx":return"txn";case"poolAddress":return"account"}},yP=e=>{switch(e){case"account":return"address";case"token":return"object";case"tx":return"txblock";case"poolAddress":return"object";case"nftAddress":return"object";case"coin":return"object"}},i2=e=>{switch(e){case"account":return"address";case"token":return"object";case"tx":return"tx";case"poolAddress":return"object";case"nftAddress":return"object";case"coin":return"coin"}},Ob=e=>{switch(e){case"account":return"account";case"token":return"object";case"tx":return"txblock";case"poolAddress":return"object";case"nftAddress":return"object";case"coin":return"coin"}};function ij(){const t=(localStorage.getItem("theme")||"sui")=="sui"?"Sui":"Aptos";return localStorage.getItem(`${t}-currentExplorerName`)||Ul[t][0].name}function Ml(e,t,n){const i=localStorage.getItem("theme")||"sui",s=i=="sui"?"Sui":"Aptos";console.log(e,"url###111");const r=e.indexOf("suivision")>-1?"SuiVision":e.indexOf("suiscan")>-1?"Suiscan":"";console.log(e,r,"url##");const o=Ue[s].network;let a;return s=="Aptos"?t=="nftAddress"?a=`${e}/${Bb(t)}/${n}/0?network=${o}`:a=`${e}/${Bb(t)}/${n}?network=${o}`:r=="SuiVision"?a=`${e}/${Ob(t)}/${n}`:r=="Suiscan"?a=`${e}/${o}/${i2(t)}/${n}`:a=`${e}/${yP(t)}/${n}?network=${o}`,console.log("href, chain, chainName, url, urlName, network==>",t,Ob(t),a,i,s,e,r,o),a}function sj(e,t){const n="Sui",i=Ul[n][2].link,s=Ul[n][2].name,r=Ue[n].network;let o;return s=="Suiscan"&&(o=`${i}/${r}/${i2(e)}/${t}`),o}function Dl(e,t){const n=Zg(At(t));return Number(At(e).mul(n))}function rj(e){const t=e.toString(),n=t.indexOf(".");if(n!==-1){for(let i=n+1;i<t.length;i++)if(t[i]!=="0")return i-n-1}return-1}function oj(e,t){let n=e,i=t;if(e.includes("sui::SUI")&&e.includes("sui::SUI")){if(e.slice(-10)===t.slice(-10))return!0}else return e[2]=="0"&&(n=e.slice(0,2)+e.slice(3)),t[2]=="0"&&(i=t.slice(0,2)+t.slice(3)),(n==null?void 0:n.toLowerCase())==(i==null?void 0:i.toLowerCase());return!1}const Tr=e=>ie.isDecimal(e)?e:new ie(e===void 0?0:e),wP=(e,t,n=!0)=>{if(`${e}`=="0")return!parseFloat(t)||!n?0:"0.".padEnd(t+2,"0");if(!e)return"--";const i=parseFloat(e),s=e.toString(),r=i<0;let o=s;if(s.toLowerCase().includes("e")){const a=s.match(/(\d+?)(?:\.(\d*))?e([+-])(\d+)/),c=a[1],d=a[2],u=a[3],l=a[4];let f="",p=d?d.substr(l):"";if(p&&(p=`.${p}`),u!=="-"){for(let m=0;m<l;m+=1){const _=d[m]||"0";f+=_}o=c+f+p}else{let m="0";for(let _=0;_<l;_+=1)f=(c[c.length-_-1]||"0")+f;c.length>l&&(m=c.substr(0,c.length-l)),o=`${m}.${f}${d}`}}if(t&&n){let a=`${o.split(".")[0]}.`;const c=o.split(".")[1]||"";for(let d=0;d<t;d+=1)a+=c[d]||"0";o=a}if(o.length>14){const a=o.split(".");a[0].length>14?o=`${a[0].slice(0,14)}+`:(o=o.slice(0,13),o.indexOf(".")===12&&(o=o.slice(0,12)))}return`${r?"-":""}${o}`};function Rn(e,t){if(t=t>-1?t:0,`${e}`=="0")return parseFloat(t)?"0.".padEnd(t+2,"0"):"0";if(!e)return"--";let n=!1;parseFloat(e)<0&&(n=!0);const i=`${Math.abs(parseFloat(e))}`;if(i==="NaN")return"--";let s=i;if(i.toLowerCase().includes("e")){if(i.toLowerCase().includes("+"))return wP(i,t);const o=i.toLowerCase().split("e");let a=o[0];const c=Math.abs(parseFloat(o[1]));let d="",u=a.length,l;for(o[0].split(".")[1]&&(a=o[0].split(".")[0]+o[0].split(".")[1],u=o[0].split(".")[0].length),l=0;l<c-u;l+=1)d+="0";s=`0.${d}${a}`}if(`${t}`!="0"&&!t||`${parseFloat(e)}`=="NaN")return(n?"-":"")+s;const r=s.split(".");if(t===0)s=parseInt(s,10);else if(t>0&&r[1])if(r[1].length>t)if(r[1].includes("999999999")){const o=parseFloat(s).toFixed(t+1);s=o.slice(0,o.length-1)}else s=`${r[0]}.${r[1].slice(0,t)}`;else s=parseFloat(s).toFixed(t);else s=parseFloat(s).toFixed(t);if(s.length>=14&&s.includes(".")){const o=s.split(".");o[0].length>14?s=`${o[0].slice(0,14)}+`:(s=s.slice(0,13),s.indexOf(".")===12&&(s=s.slice(0,12)))}return(n?"-":"")+s}function vP(e,t){const n=String(e);if(!n.includes("."))return n;const i=n.split("."),s=i[0],r=i[1].slice(0,t);return Ko(r)?`${s}.${Ko(r)}`:`${s}`}function Ko(e){return e.replace(/(\s|0|\.)+$/g,"")}function To(e,t){if(typeof e=="number"&&isNaN(e)||!Number(e))return 0;if(!String(e).includes("."))return e;const n=String(e).split(".");if(n[1]&&n[1].length<=t&&Number(n[1]))return e;const i=Math.pow(10,-t);if(Number(e)<i)return n[1]&&Ko(n[1])?n[0]+"."+Ko(n[1]):n[0];const s=vP(e,t),r=String(s).split(".");return s==="--"?"--":r[1]&&Ko(String(r[1]))?r[0]+"."+Ko(String(r[1])):r[0]}const jl=(e,t=0)=>isNaN(e)||!e?e:(e=String(e),Number(e)==0?0:!isNaN(t)&&t?(t===0&&(e=e.split(".")[0]),e.replace(/(\d+)(\.\d+)?/,(n,i,s)=>i.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")+(s?s.slice(0,t+1):""))):e.replace(/^\d+/,n=>n.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")));function xP(e,t){const i=String(e).split(".");let s=!0;if(!i[1]||i[1]&&i[1].length<=t||i[0]!=="0")return!1;if(i&&i[1]&&i[0]==="0"&&i[1][i[1].length-1]==="1")for(let r=0;r<i[1].length-1;r++)i[1]!=="0"&&(s=!1);else s=!1;return s}function TP(e){const t=String(e);if(!t.includes("."))return e;const n=t.split("."),i=n[0],s=Ko(n[1]);return s&&`${i}.${s}`}const rr=(e,t,n=2)=>{if(e==""||typeof e=="string"&&e.indexOf("+")>-1)return e;if(isNaN(e)||Number(e)==0)return"0";const i=To(e,t),s=Math.pow(10,-t);return Number(i)&&Math.abs(Number(i))<=s||xP(i,t)?rr(e,t+n):TP(i)};function aj(e){if(e){const t=e.toString(),n=t.indexOf(".")>-1?/(\d)(?=(\d{3})+\.)/g:/(\d)(?=(?:\d{3})+$)/g;return t.replace(n,"$1,")}}function ql(e){return!e||Object.keys(e).length===0}function hi(e){return e.toString().length===1?"0"+e:e}function $b(e){const t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate();return t+"-"+hi(n)+"-"+hi(i)}function AP(e){const t=e.getMonth()+1,n=e.getDate();return hi(t)+"/"+hi(n)}function Rb(e){const t=e.getHours(),n=e.getMinutes(),i=e.getSeconds();return hi(t)+":"+hi(n)+":"+hi(i)}function kP(e){const t=e.getHours(),n=e.getMinutes();return hi(t)+":"+hi(n)}const cj=(e,t)=>{if(e){const n=new Date(Number(e));if(!t)return $b(n)+" "+Rb(n);switch(t){case"HMS":return Rb(n);case"YMD":return $b(n);case"MD":return AP(n);case"HM":return kP(n)}}},dj=(e,t)=>isNaN(e)||!e?e:Number(e)<1e-6&&Number(e)!==0?"<0.000001":jl(To(String(e),t),t);function uj(e){const t=e.replace("%","");return Number(t)}function lj(e,t=1){return!e||isNaN(Number(e))?e:Math.abs(String(e))<1e3?rr(e,t):rr(Number(e)/1e3,t)+"k"}const Lo=async e=>new Promise(t=>{setTimeout(()=>{t(1)},e)}),fj=e=>e>=1e9?(e/1e9).toFixed(1)+"b":e>=1e6?(e/1e6).toFixed(1)+"m":e>=1e3?(e/1e3).toFixed(1)+"k":e.toString();function hj(e){const t=Number(rr(e,2));return t>=1e9?(t/1e9).toFixed(1).replace(/\B(?=(\d{3})+(?!\d))/g,",")+"b":t>=1e6?(t/1e6).toFixed(1).replace(/\B(?=(\d{3})+(?!\d))/g,",")+"m":t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}const pj=(e,t)=>e>=1e9?(e/1e9).toFixed(t)+"b":e>=1e6?(e/1e6).toFixed(t)+"m":e>=1e3?(e/1e3).toFixed(t)+"k":e.toString(),gj=e=>{const t=Math.floor(e/1e3),n=Math.floor(new Date().getTime()/1e3),i=60,s=60*i,r=24*s,o=30*r,a=365*r,c=n-t;if(c<i)return"recently";if(c<s){const d=Math.floor(c/i);return d==1?`${d} minute ago`:`${d} minutes ago`}else if(c<r){const d=Math.floor(c/s);return d==1?`${d} hour ago`:`${d} hours ago`}else if(c<o){const d=Math.floor(c/r);return d==1?`${d} day ago`:`${d} days ago`}else if(c<a){const d=Math.floor(c/o);return d==1?`${d} mouth ago`:`${d} mouths ago`}else{const d=Math.floor(c/a);return d==1?`${d} year ago`:`${d} years ago`}},mj=(e,t)=>{if(e){const n=new Date(e);if(!t)return Ub(n)+" "+Mb(n);switch(t){case"HMS":return Mb(n);case"YMD":return Ub(n);case"MD":return SP(n);case"HM":return EP(n)}}};function Ub(e){const t=e.getUTCFullYear(),n=e.getUTCMonth()+1,i=e.getUTCDate();return t+"-"+hi(n)+"-"+hi(i)}function SP(e){const t=e.getUTCMonth()+1,n=e.getUTCDate();return hi(t)+"/"+hi(n)}function Mb(e){const t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds();return hi(t)+":"+hi(n)+":"+hi(i)}function EP(e){const t=e.getUTCHours(),n=e.getUTCMinutes();return hi(t)+":"+hi(n)}const po=(e,t)=>{try{return Tr(e).toDP(t,ie.ROUND_DOWN).toString()}catch{return e}},_j=(e,t,n,i,s=!0)=>{if(e===void 0||e==="--")return"--";const r=po(e,t);return!n&&Number(e)>0&&Number(r)<.01?`<${s?"$":""}0.01`:i?`${s?"$":""}${r}`:`${s?"$":""}${jl(r)}`};function bj(e){var s;const t=bT();console.log(" ~ file: index.ts:587 ~ getUrlParam ~ route:",t);const n=(s=t==null?void 0:t.params)==null?void 0:s.id,i=n==null?void 0:n.split("-");return i&&i.length>0?decodeURI(e=="from"?i[0]?i[0]:"":i[1]?i[1]:""):null}function Bu(e){return e=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":e}function yj(e){return e=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":e}function PP(e){let t=0;for(;t<e.length;){if(Tr(e[t]).gt(0))return t+1;t++}return 0}const wj=(e,t,n=!0)=>{if(e==="")return"";if(e!=="0"&&!e||Tr(e).equals(0))return"0";if(t!==void 0){const c=po(e,t);if(!Tr(c).equals(0))return n?c:jl(c)}const i=Tr(e).toString(),s=i.split("."),r=s[0],o=s[1];let a;if(Tr(r).gt(0))!o||Tr(r.length).gte(9)?a=po(i,0):Tr(r.length).gte(4)?a=po(i,2):a=po(i,4);else{po(i,6);const c=PP(o);if(c<6)a=po(i,c+6);else{if(c>20)return"0";a=po(i,9+(c-6))}}return n||Tr(r).lt(1)?a:jl(a)},CP={pro:{Aptos:[{name:"Default",link:"https://fullnode.mainnet.aptoslabs.com"},{name:"Custom",link:""}],Sui:[{name:"Sui Official",link:"https://fullnode.mainnet.sui.io"},{name:"BlockVision",link:"https://sui-mainnet-endpoint.blockvision.org"},{name:"Suiscan",link:"https://rpc-mainnet.suiscan.xyz:443"},{name:"BlockVision 2",link:"https://cetus-mainnet-endpoint.blockvision.org"},{name:"Custom",link:""}]},pre:{Aptos:[{name:"Default",link:"https://fullnode.mainnet.aptoslabs.com"},{name:"Custom",link:""}],Sui:[{name:"Sui Official",link:"https://fullnode.mainnet.sui.io"},{name:"BlockVision",link:"https://sui-mainnet-endpoint.blockvision.org"},{name:"Suiscan",link:"https://rpc-mainnet.suiscan.xyz:443"},{name:"BlockVision 2",link:"https://cetus-mainnet-endpoint.blockvision.org"},{name:"Custom",link:""}]},preRoute:{Aptos:[{name:"Default",link:"https://fullnode.mainnet.aptoslabs.com"},{name:"Custom",link:""}],Sui:[{name:"Suiscan",link:"https://rpc-mainnet.suiscan.xyz:443"},{name:"Sui Official",link:"https://fullnode.mainnet.sui.io"},{name:"BlockVision",link:"https://sui-mainnet-endpoint.blockvision.org"},{name:"Custom",link:""}]},test:{Aptos:[{name:"Default",link:"https://fullnode.testnet.aptoslabs.com"},{name:"Custom",link:""}],Sui:[{name:"Sui Official",link:"https://fullnode.testnet.sui.io"},{name:"Suiscan",link:"https://rpc-testnet.suiscan.xyz:443"},{name:"Artifact",link:"https://testnet.artifact.systems/sui"},{name:"Custom",link:""}]}},vj={...CP[xh]},IP="0.54.1",BP="1.25.0",OP={"-32700":"ParseError","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError"};let s2=class extends Error{},r2=class extends s2{constructor(t,n){super(t),this.code=n,this.type=OP[n]??"ServerError"}},$P=class extends s2{constructor(t,n,i){super(t),this.status=n,this.statusText=i}};var Yg=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},zn=(e,t,n)=>(Yg(e,t,"read from private field"),n?n.call(e):t.get(e)),io=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},nc=(e,t,n,i)=>(Yg(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),RP=(e,t,n,i)=>({set _(s){nc(e,t,s,n)},get _(){return zn(e,t,i)}}),o2=(e,t,n)=>(Yg(e,t,"access private method"),n),Do,bd,Sr,Wo,Ud,ic,mp,a2,Qg,c2;function UP(e){const t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}const MP={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};let DP=class{constructor(t,n={}){if(io(this,mp),io(this,Qg),io(this,Do,0),io(this,bd,0),io(this,Sr,null),io(this,Wo,null),io(this,Ud,new Set),io(this,ic,new Map),this.endpoint=t,this.options={...MP,...n},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=UP(this.endpoint))}async makeRequest(t,n){const i=await o2(this,mp,a2).call(this);return new Promise((s,r)=>{nc(this,Do,zn(this,Do)+1),zn(this,ic).set(zn(this,Do),{resolve:s,reject:r,timeout:setTimeout(()=>{zn(this,ic).delete(zn(this,Do)),r(new Error(`Request timeout: ${t}`))},this.options.callTimeout)}),i.send(JSON.stringify({jsonrpc:"2.0",id:zn(this,Do),method:t,params:n}))}).then(({error:s,result:r})=>{if(s)throw new r2(s.message,s.code);return r})}async subscribe(t){const n=new jP(t);return zn(this,Ud).add(n),await n.subscribe(this),()=>n.unsubscribe(this)}};Do=new WeakMap;bd=new WeakMap;Sr=new WeakMap;Wo=new WeakMap;Ud=new WeakMap;ic=new WeakMap;mp=new WeakSet;a2=function(){return zn(this,Wo)?zn(this,Wo):(nc(this,Wo,new Promise(e=>{var t;(t=zn(this,Sr))==null||t.close(),nc(this,Sr,new this.options.WebSocketConstructor(this.endpoint)),zn(this,Sr).addEventListener("open",()=>{nc(this,bd,0),e(zn(this,Sr))}),zn(this,Sr).addEventListener("close",()=>{RP(this,bd)._++,zn(this,bd)<=this.options.maxReconnects&&setTimeout(()=>{o2(this,Qg,c2).call(this)},this.options.reconnectTimeout)}),zn(this,Sr).addEventListener("message",({data:n})=>{let i;try{i=JSON.parse(n)}catch(s){console.error(new Error(`Failed to parse RPC message: ${n}`,{cause:s}));return}if("id"in i&&i.id!=null&&zn(this,ic).has(i.id)){const{resolve:s,timeout:r}=zn(this,ic).get(i.id);clearTimeout(r),s(i)}else if("params"in i){const{params:s}=i;zn(this,Ud).forEach(r=>{r.subscriptionId===s.subscription&&s.subscription===r.subscriptionId&&r.onMessage(s.result)})}})})),zn(this,Wo))};Qg=new WeakSet;c2=async function(){var e;return(e=zn(this,Sr))==null||e.close(),nc(this,Wo,null),Promise.allSettled([...zn(this,Ud)].map(t=>t.subscribe(this)))};let jP=class{constructor(t){this.subscriptionId=null,this.subscribed=!1,this.input=t}onMessage(t){this.subscribed&&this.input.onMessage(t)}async unsubscribe(t){const{subscriptionId:n}=this;return this.subscribed=!1,n==null?!1:(this.subscriptionId=null,t.makeRequest(this.input.unsubscribe,[n]))}async subscribe(t){this.subscriptionId=null,this.subscribed=!0;const n=await t.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=n)}};var em=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ms=(e,t,n)=>(em(e,t,"read from private field"),n?n.call(e):t.get(e)),Ou=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},_p=(e,t,n,i)=>(em(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),qP=(e,t,n)=>(em(e,t,"access private method"),n),od,Us,yd,bp,d2;let LP=class{constructor(t){Ou(this,bp),Ou(this,od,0),Ou(this,Us,void 0),Ou(this,yd,void 0),_p(this,Us,t)}fetch(t,n){const i=ms(this,Us).fetch??globalThis.fetch;if(!i)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return i(t,n)}async request(t){var s,r;_p(this,od,ms(this,od)+1);const n=await this.fetch(((s=ms(this,Us).rpc)==null?void 0:s.url)??ms(this,Us).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":IP,"Client-Target-Api-Version":BP,...(r=ms(this,Us).rpc)==null?void 0:r.headers},body:JSON.stringify({jsonrpc:"2.0",id:ms(this,od),method:t.method,params:t.params})});if(!n.ok)throw new $P(`Unexpected status code: ${n.status}`,n.status,n.statusText);const i=await n.json();if("error"in i&&i.error!=null)throw new r2(i.error.message,i.error.code);return i.result}async subscribe(t){const n=await qP(this,bp,d2).call(this).subscribe(t);return async()=>!!await n()}};od=new WeakMap;Us=new WeakMap;yd=new WeakMap;bp=new WeakSet;d2=function(){var e;if(!ms(this,yd)){const t=ms(this,Us).WebSocketConstructor??globalThis.WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");_p(this,yd,new DP(((e=ms(this,Us).websocket)==null?void 0:e.url)??ms(this,Us).url,{WebSocketConstructor:t,...ms(this,Us).websocket}))}return ms(this,yd)};function NP(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),r=s.charCodeAt(0);if(t[r]!==255)throw new TypeError(s+" is ambiguous");t[r]=i}var o=e.length,a=e.charAt(0),c=Math.log(o)/Math.log(256),d=Math.log(256)/Math.log(o);function u(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,_=0,x=0,C=p.length;x!==C&&p[x]===0;)x++,m++;for(var k=(C-x)*d+1>>>0,T=new Uint8Array(k);x!==C;){for(var S=p[x],P=0,z=k-1;(S!==0||P<_)&&z!==-1;z--,P++)S+=256*T[z]>>>0,T[z]=S%o>>>0,S=S/o>>>0;if(S!==0)throw new Error("Non-zero carry");_=P,x++}for(var X=k-_;X!==k&&T[X]===0;)X++;for(var G=a.repeat(m);X<k;++X)G+=e.charAt(T[X]);return G}function l(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;for(var m=0,_=0,x=0;p[m]===a;)_++,m++;for(var C=(p.length-m)*c+1>>>0,k=new Uint8Array(C);p[m];){var T=t[p.charCodeAt(m)];if(T===255)return;for(var S=0,P=C-1;(T!==0||S<x)&&P!==-1;P--,S++)T+=o*k[P]>>>0,k[P]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");x=S,m++}for(var z=C-x;z!==C&&k[z]===0;)z++;for(var X=new Uint8Array(_+(C-z)),G=_;z!==C;)X[G++]=k[z++];return X}function f(p){var m=l(p);if(m)return m;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:l,decode:f}}var FP=NP;const zP=FP,HP="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var Th=zP(HP);const uu=e=>Th.encode(e),lu=e=>Th.decode(e);function Co(e){return Uint8Array.from(atob(e),t=>t.charCodeAt(0))}const w0=8192;function Ir(e){if(e.length<w0)return btoa(String.fromCharCode(...e));let t="";for(var n=0;n<e.length;n+=w0){const i=e.slice(n,n+w0);t+=String.fromCharCode(...i)}return btoa(t)}function Ah(e){var s;const t=e.startsWith("0x")?e.slice(2):e,i=((s=(t.length%2===0?t:`0${t}}`).match(/.{2}/g))==null?void 0:s.map(r=>parseInt(r,16)))??[];return Uint8Array.from(i)}function zc(e){return e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),"")}function tm(e){let t=[],n=0;if(e===0)return[0];for(;e>0;)t[n]=e&127,(e>>=7)&&(t[n]|=128),n+=1;return t}function KP(e){let t=0,n=0,i=0;for(;;){let s=e[i];if(i+=1,t|=(s&127)<<n,!(s&128))break;n+=7}return{value:t,length:i}}let u2=class{constructor(t){this.bytePosition=0,this.dataView=new DataView(t.buffer)}shift(t){return this.bytePosition+=t,this}read8(){let t=this.dataView.getUint8(this.bytePosition);return this.shift(1),t}read16(){let t=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),t}read32(){let t=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),t}read64(){let t=this.read32(),i=this.read32().toString(16)+t.toString(16).padStart(8,"0");return BigInt("0x"+i).toString(10)}read128(){let t=BigInt(this.read64()),i=BigInt(this.read64()).toString(16)+t.toString(16).padStart(16,"0");return BigInt("0x"+i).toString(10)}read256(){let t=BigInt(this.read128()),i=BigInt(this.read128()).toString(16)+t.toString(16).padStart(32,"0");return BigInt("0x"+i).toString(10)}readBytes(t){let n=this.bytePosition+this.dataView.byteOffset,i=new Uint8Array(this.dataView.buffer,n,t);return this.shift(t),i}readULEB(){let t=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,t),{value:i,length:s}=KP(n);return this.shift(s),i}readVec(t){let n=this.readULEB(),i=[];for(let s=0;s<n;s++)i.push(t(this,s,n));return i}};function WP(e,t){switch(t){case"base58":return uu(e);case"base64":return Ir(e);case"hex":return zc(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function GP(e,t){switch(t){case"base58":return lu(e);case"base64":return Co(e);case"hex":return Ah(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function nm(e,t=["<",">"]){const[n,i]=t,s=[];let r="",o=0;for(let a=0;a<e.length;a++){const c=e[a];if(c===n&&o++,c===i&&o--,o===0&&c===","){s.push(r.trim()),r="";continue}r+=c}return s.push(r.trim()),s}let l2=class{constructor({size:t=1024,maxSize:n,allocateSize:i=1024}={}){this.bytePosition=0,this.size=t,this.maxSize=n||t,this.allocateSize=i,this.dataView=new DataView(new ArrayBuffer(t))}ensureSizeOrGrow(t){const n=this.bytePosition+t;if(n>this.size){const i=Math.min(this.maxSize,this.size+this.allocateSize);if(n>i)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${n}`);this.size=i;const s=new ArrayBuffer(this.size);new Uint8Array(s).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(s)}}shift(t){return this.bytePosition+=t,this}write8(t){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(t)),this.shift(1)}write16(t){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(t),!0),this.shift(2)}write32(t){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(t),!0),this.shift(4)}write64(t){return v0(BigInt(t),8).forEach(n=>this.write8(n)),this}write128(t){return v0(BigInt(t),16).forEach(n=>this.write8(n)),this}write256(t){return v0(BigInt(t),32).forEach(n=>this.write8(n)),this}writeULEB(t){return tm(t).forEach(n=>this.write8(n)),this}writeVec(t,n){return this.writeULEB(t.length),Array.from(t).forEach((i,s)=>n(this,i,s,t.length)),this}*[Symbol.iterator](){for(let t=0;t<this.bytePosition;t++)yield this.dataView.getUint8(t);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(t){return WP(this.toBytes(),t)}};function v0(e,t){let n=new Uint8Array(t),i=0;for(;e>0;)n[i]=Number(e%BigInt(256)),e=e/BigInt(256),i+=1;return n}var f2=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Ms=(e,t,n)=>(f2(e,t,"read from private field"),n?n.call(e):t.get(e)),Ll=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Nl=(e,t,n,i)=>(f2(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),Da,ad,rl,go;const h2=class{constructor(t){Ll(this,Da,void 0),Ll(this,ad,void 0),this.name=t.name,this.read=t.read,this.serializedSize=t.serializedSize??(()=>null),Nl(this,Da,t.write),Nl(this,ad,t.serialize??((n,i)=>{const s=new l2({size:this.serializedSize(n)??void 0,...i});return Ms(this,Da).call(this,n,s),s.toBytes()})),this.validate=t.validate??(()=>{})}write(t,n){this.validate(t),Ms(this,Da).call(this,t,n)}serialize(t,n){return this.validate(t),new VP(this,Ms(this,ad).call(this,t,n))}parse(t){const n=new u2(t);return this.read(n)}transform({name:t,input:n,output:i}){return new h2({name:t??this.name,read:s=>i(this.read(s)),write:(s,r)=>Ms(this,Da).call(this,n(s),r),serializedSize:s=>this.serializedSize(n(s)),serialize:(s,r)=>Ms(this,ad).call(this,n(s),r),validate:s=>this.validate(n(s))})}};let Ls=h2;Da=new WeakMap;ad=new WeakMap;const p2=Symbol.for("@mysten/serialized-bcs");function im(e){return!!e&&typeof e=="object"&&e[p2]===!0}let VP=class{constructor(t,n){Ll(this,rl,void 0),Ll(this,go,void 0),Nl(this,rl,t),Nl(this,go,n)}get[p2](){return!0}toBytes(){return Ms(this,go)}toHex(){return zc(Ms(this,go))}toBase64(){return Ir(Ms(this,go))}toBase58(){return uu(Ms(this,go))}parse(){return Ms(this,rl).parse(Ms(this,go))}};rl=new WeakMap;go=new WeakMap;function Fl({size:e,...t}){return new Ls({...t,serializedSize:()=>e})}function x0({readMethod:e,writeMethod:t,...n}){return Fl({...n,read:i=>i[e](),write:(i,s)=>s[t](i),validate:i=>{var s;if(i<0||i>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${i}. Expected value in range 0-${n.maxValue}`);(s=n.validate)==null||s.call(n,i)}})}function T0({readMethod:e,writeMethod:t,...n}){return Fl({...n,read:i=>i[e](),write:(i,s)=>s[t](BigInt(i)),validate:i=>{var r;const s=BigInt(i);if(s<0||s>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${s}. Expected value in range 0-${n.maxValue}`);(r=n.validate)==null||r.call(n,s)}})}function XP({serialize:e,...t}){const n=new Ls({...t,serialize:e,write:(i,s)=>{for(const r of n.serialize(i).toBytes())s.write8(r)}});return n}function JP({toBytes:e,fromBytes:t,...n}){return new Ls({...n,read:i=>{const s=i.readULEB(),r=i.readBytes(s);return t(r)},write:(i,s)=>{const r=e(i);s.writeULEB(r.length);for(let o=0;o<r.length;o++)s.write8(r[o])},serialize:i=>{const s=e(i),r=tm(s.length),o=new Uint8Array(r.length+s.length);return o.set(r,0),o.set(s,r.length),o},validate:i=>{var s;if(typeof i!="string")throw new TypeError(`Invalid ${n.name} value: ${i}. Expected string`);(s=n.validate)==null||s.call(n,i)}})}function ZP(e){let t=null;function n(){return t||(t=e()),t}return new Ls({name:"lazy",read:i=>n().read(i),serializedSize:i=>n().serializedSize(i),write:(i,s)=>n().write(i,s),serialize:(i,s)=>n().serialize(i,s).toBytes()})}const ye={u8(e){return x0({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...e})},u16(e){return x0({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...e})},u32(e){return x0({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e})},u64(e){return T0({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e})},u128(e){return T0({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e})},u256(e){return T0({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e})},bool(e){return Fl({name:"bool",size:1,read:t=>t.read8()===1,write:(t,n)=>n.write8(t?1:0),...e,validate:t=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,t),typeof t!="boolean")throw new TypeError(`Expected boolean, found ${typeof t}`)}})},uleb128(e){return XP({name:"uleb128",read:t=>t.readULEB(),serialize:t=>Uint8Array.from(tm(t)),...e})},bytes(e,t){return Fl({name:`bytes[${e}]`,size:e,read:n=>n.readBytes(e),write:(n,i)=>{for(let s=0;s<e;s++)i.write8(n[s]??0)},...t,validate:n=>{var i;if((i=t==null?void 0:t.validate)==null||i.call(t,n),!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e)throw new TypeError(`Expected array of length ${e}, found ${n.length}`)}})},string(e){return JP({name:"string",toBytes:t=>new TextEncoder().encode(t),fromBytes:t=>new TextDecoder().decode(t),...e})},fixedArray(e,t,n){return new Ls({name:`${t.name}[${e}]`,read:i=>{const s=new Array(e);for(let r=0;r<e;r++)s[r]=t.read(i);return s},write:(i,s)=>{for(const r of i)t.write(r,s)},...n,validate:i=>{var s;if((s=n==null?void 0:n.validate)==null||s.call(n,i),!("length"in i))throw new TypeError(`Expected array, found ${typeof i}`);if(i.length!==e)throw new TypeError(`Expected array of length ${e}, found ${i.length}`)}})},option(e){return ye.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:t=>t==null?{None:!0}:{Some:t},output:t=>"Some"in t?t.Some:null})},vector(e,t){return new Ls({name:`vector<${e.name}>`,read:n=>{const i=n.readULEB(),s=new Array(i);for(let r=0;r<i;r++)s[r]=e.read(n);return s},write:(n,i)=>{i.writeULEB(n.length);for(const s of n)e.write(s,i)},...t,validate:n=>{var i;if((i=t==null?void 0:t.validate)==null||i.call(t,n),!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`)}})},tuple(e,t){return new Ls({name:`(${e.map(n=>n.name).join(", ")})`,serializedSize:n=>{let i=0;for(let s=0;s<e.length;s++){const r=e[s].serializedSize(n[s]);if(r==null)return null;i+=r}return i},read:n=>{const i=[];for(const s of e)i.push(s.read(n));return i},write:(n,i)=>{for(let s=0;s<e.length;s++)e[s].write(n[s],i)},...t,validate:n=>{var i;if((i=t==null?void 0:t.validate)==null||i.call(t,n),!Array.isArray(n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${n.length}`)}})},struct(e,t,n){const i=Object.entries(t);return new Ls({name:e,serializedSize:s=>{let r=0;for(const[o,a]of i){const c=a.serializedSize(s[o]);if(c==null)return null;r+=c}return r},read:s=>{const r={};for(const[o,a]of i)r[o]=a.read(s);return r},write:(s,r)=>{for(const[o,a]of i)a.write(s[o],r)},...n,validate:s=>{var r;if((r=n==null?void 0:n.validate)==null||r.call(n,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`)}})},enum(e,t,n){const i=Object.entries(t);return new Ls({name:e,read:s=>{const r=s.readULEB(),[o,a]=i[r];return{[o]:(a==null?void 0:a.read(s))??!0}},write:(s,r)=>{const[o,a]=Object.entries(s)[0];for(let c=0;c<i.length;c++){const[d,u]=i[c];if(d===o){r.writeULEB(c),u==null||u.write(a,r);return}}},...n,validate:s=>{var a;if((a=n==null?void 0:n.validate)==null||a.call(n,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`);const r=Object.keys(s);if(r.length!==1)throw new TypeError(`Expected object with one key, found ${r.length}`);const[o]=r;if(!Object.hasOwn(t,o))throw new TypeError(`Invalid enum variant ${o}`)}})},map(e,t){return ye.vector(ye.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:n=>[...n.entries()],output:n=>{const i=new Map;for(const[s,r]of n)i.set(s,r);return i}})},generic(e,t){return(...n)=>t(...n).transform({name:`${t.name}<${n.map(i=>i.name).join(", ")}>`,input:i=>i,output:i=>i})},lazy(e){return ZP(e)}},YP=32,cd=class{constructor(e){if(this.types=new Map,this.counter=0,e instanceof cd){this.schema=e.schema,this.types=new Map(e.types);return}if(this.schema=e,this.registerAddressType(cd.ADDRESS,e.addressLength,e.addressEncoding),this.registerVectorType(e.vectorType),e.types&&e.types.structs)for(let t of Object.keys(e.types.structs))this.registerStructType(t,e.types.structs[t]);if(e.types&&e.types.enums)for(let t of Object.keys(e.types.enums))this.registerEnumType(t,e.types.enums[t]);if(e.types&&e.types.aliases)for(let t of Object.keys(e.types.aliases))this.registerAlias(t,e.types.aliases[t]);e.withPrimitives!==!1&&QP(this)}tempKey(){return`bcs-struct-${++this.counter}`}ser(e,t,n){if(typeof e=="string"||Array.isArray(e)){const{name:i,params:s}=this.parseTypeName(e);return this.getTypeInterface(i).encode(this,t,n,s)}if(typeof e=="object"){const i=this.tempKey();return new cd(this).registerStructType(i,e).ser(i,t,n)}throw new Error(`Incorrect type passed into the '.ser()' function. 
${JSON.stringify(e)}`)}de(e,t,n){if(typeof t=="string")if(n)t=GP(t,n);else throw new Error("To pass a string to `bcs.de`, specify encoding");if(typeof e=="string"||Array.isArray(e)){const{name:i,params:s}=this.parseTypeName(e);return this.getTypeInterface(i).decode(this,t,s)}if(typeof e=="object"){const i=new cd(this),s=this.tempKey();return i.registerStructType(s,e).de(s,t,n)}throw new Error(`Incorrect type passed into the '.de()' function. 
${JSON.stringify(e)}`)}hasType(e){return this.types.has(e)}registerAlias(e,t){return this.types.set(e,t),this}registerType(e,t,n,i=()=>!0){const{name:s,params:r}=this.parseTypeName(e);return this.types.set(s,{encode(o,a,c,d){const u=r.reduce((l,f,p)=>Object.assign(l,{[f]:d[p]}),{});return this._encodeRaw.call(o,new l2(c),a,d,u)},decode(o,a,c){const d=r.reduce((u,l,f)=>Object.assign(u,{[l]:c[f]}),{});return this._decodeRaw.call(o,new u2(a),c,d)},_encodeRaw(o,a,c,d){if(i(a))return t.call(this,o,a,c,d);throw new Error(`Validation failed for type ${s}, data: ${a}`)},_decodeRaw(o,a,c){return n.call(this,o,a,c)}}),this}registerBcsType(e,t){return this.registerType(e,(n,i,s)=>{const r=s.map(o=>new Ls({name:String(o),write:(a,c)=>{const{name:d,params:u}=this.parseTypeName(o),l=this.getTypeInterface(d),f=u.reduce((p,m,_)=>Object.assign(p,{[m]:s[_]}),{});return l._encodeRaw.call(this,c,a,u,f)},read:()=>{throw new Error("Not implemented")}}));return t(...r).write(i,n),n},(n,i)=>{const s=i.map(r=>new Ls({name:String(r),write:(o,a)=>{throw new Error("Not implemented")},read:o=>{const{name:a,params:c}=this.parseTypeName(r),d=this.getTypeInterface(a),u=c.reduce((l,f,p)=>Object.assign(l,{[f]:i[p]}),{});return d._decodeRaw.call(this,o,c,u)}}));return t(...s).read(n)}),this}registerAddressType(e,t,n="hex"){switch(n){case"base64":return this.registerType(e,function(s,r){return Co(r).reduce((o,a)=>o.write8(a),s)},function(s){return Ir(s.readBytes(t))});case"hex":return this.registerType(e,function(s,r){return Ah(r).reduce((o,a)=>o.write8(a),s)},function(s){return zc(s.readBytes(t))});default:throw new Error("Unsupported encoding! Use either hex or base64")}}registerVectorType(e){let{name:t,params:n}=this.parseTypeName(e);if(n.length>1)throw new Error("Vector can have only one type parameter; got "+t);return this.registerType(e,function(s,r,o,a){return s.writeVec(r,(c,d)=>{let u=o[0];if(!u)throw new Error(`Incorrect number of type parameters passed a to vector '${e}'`);let{name:l,params:f}=this.parseTypeName(u);if(this.hasType(l))return this.getTypeInterface(l)._encodeRaw.call(this,c,d,f,a);if(!(l in a))throw new Error(`Unable to find a matching type definition for ${l} in vector; make sure you passed a generic`);let{name:p,params:m}=this.parseTypeName(a[l]);return this.getTypeInterface(p)._encodeRaw.call(this,c,d,m,a)})},function(s,r,o){return s.readVec(a=>{let c=r[0];if(!c)throw new Error(`Incorrect number of type parameters passed to a vector '${e}'`);let{name:d,params:u}=this.parseTypeName(c);if(this.hasType(d))return this.getTypeInterface(d)._decodeRaw.call(this,a,u,o);if(!(d in o))throw new Error(`Unable to find a matching type definition for ${d} in vector; make sure you passed a generic`);let{name:l,params:f}=this.parseTypeName(o[d]);return this.getTypeInterface(l)._decodeRaw.call(this,a,f,o)})})}registerStructType(e,t){for(let o in t){let a=this.tempKey(),c=t[o];!Array.isArray(c)&&typeof c!="string"&&(t[o]=a,this.registerStructType(a,c))}let n=Object.freeze(t),i=Object.keys(n),{name:s,params:r}=this.parseTypeName(e);return this.registerType(e,function(a,c,d,u){if(!c||c.constructor!==Object)throw new Error(`Expected ${s} to be an Object, got: ${c}`);if(d.length!==r.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${r.length}, got: ${d.length}`);for(let l of i){if(!(l in c))throw new Error(`Struct ${s} requires field ${l}:${n[l]}`);const{name:f,params:p}=this.parseTypeName(n[l]);if(!r.includes(f))this.getTypeInterface(f)._encodeRaw.call(this,a,c[l],p,u);else{const m=r.indexOf(f);let{name:_,params:x}=this.parseTypeName(d[m]);if(this.hasType(_)){this.getTypeInterface(_)._encodeRaw.call(this,a,c[l],x,u);continue}if(!(_ in u))throw new Error(`Unable to find a matching type definition for ${_} in ${s}; make sure you passed a generic`);let{name:C,params:k}=this.parseTypeName(u[_]);this.getTypeInterface(C)._encodeRaw.call(this,a,c[l],k,u)}}return a},function(a,c,d){if(c.length!==r.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${r.length}, got: ${c.length}`);let u={};for(let l of i){const{name:f,params:p}=this.parseTypeName(n[l]);if(!r.includes(f))u[l]=this.getTypeInterface(f)._decodeRaw.call(this,a,p,d);else{const m=r.indexOf(f);let{name:_,params:x}=this.parseTypeName(c[m]);if(this.hasType(_)){u[l]=this.getTypeInterface(_)._decodeRaw.call(this,a,x,d);continue}if(!(_ in d))throw new Error(`Unable to find a matching type definition for ${_} in ${s}; make sure you passed a generic`);let{name:C,params:k}=this.parseTypeName(d[_]);u[l]=this.getTypeInterface(C)._decodeRaw.call(this,a,k,d)}}return u})}registerEnumType(e,t){for(let o in t){let a=this.tempKey(),c=t[o];c!==null&&!Array.isArray(c)&&typeof c!="string"&&(t[o]=a,this.registerStructType(a,c))}let n=Object.freeze(t),i=Object.keys(n),{name:s,params:r}=this.parseTypeName(e);return this.registerType(e,function(a,c,d,u){if(!c)throw new Error(`Unable to write enum "${s}", missing data.
Received: "${c}"`);if(typeof c!="object")throw new Error(`Incorrect data passed into enum "${s}", expected object with properties: "${i.join(" | ")}".
Received: "${JSON.stringify(c)}"`);let l=Object.keys(c)[0];if(l===void 0)throw new Error(`Empty object passed as invariant of the enum "${s}"`);let f=i.indexOf(l);if(f===-1)throw new Error(`Unknown invariant of the enum "${s}", allowed values: "${i.join(" | ")}"; received "${l}"`);let p=i[f],m=n[p];if(a.write8(f),m===null)return a;let _=r.indexOf(m),x=_===-1?m:d[_];{let{name:C,params:k}=this.parseTypeName(x);return this.getTypeInterface(C)._encodeRaw.call(this,a,c[l],k,u)}},function(a,c,d){let u=a.readULEB(),l=i[u],f=n[l];if(u===-1)throw new Error(`Decoding type mismatch, expected enum "${s}" invariant index, received "${u}"`);if(f===null)return{[l]:!0};let p=r.indexOf(f),m=p===-1?f:c[p];{let{name:_,params:x}=this.parseTypeName(m);return{[l]:this.getTypeInterface(_)._decodeRaw.call(this,a,x,d)}}})}getTypeInterface(e){let t=this.types.get(e);if(typeof t=="string"){let n=[];for(;typeof t=="string";){if(n.includes(t))throw new Error(`Recursive definition found: ${n.join(" -> ")} -> ${t}`);n.push(t),t=this.types.get(t)}}if(t===void 0)throw new Error(`Type ${e} is not registered`);return t}parseTypeName(e){if(Array.isArray(e)){let[a,...c]=e;return{name:a,params:c}}if(typeof e!="string")throw new Error(`Illegal type passed as a name of the type: ${e}`);let[t,n]=this.schema.genericSeparators||["<",">"],i=e.indexOf(t),s=Array.from(e).reverse().indexOf(n);if(i===-1&&s===-1)return{name:e,params:[]};if(i===-1||s===-1)throw new Error(`Unclosed generic in name '${e}'`);let r=e.slice(0,i),o=nm(e.slice(i+1,e.length-s-1),this.schema.genericSeparators);return{name:r,params:o}}};let Bn=cd;Bn.U8="u8";Bn.U16="u16";Bn.U32="u32";Bn.U64="u64";Bn.U128="u128";Bn.U256="u256";Bn.BOOL="bool";Bn.VECTOR="vector";Bn.ADDRESS="address";Bn.STRING="string";Bn.HEX="hex-string";Bn.BASE58="base58-string";Bn.BASE64="base64-string";function QP(e){e.registerType(Bn.U8,function(t,n){return t.write8(n)},function(t){return t.read8()},t=>t<256),e.registerType(Bn.U16,function(t,n){return t.write16(n)},function(t){return t.read16()},t=>t<65536),e.registerType(Bn.U32,function(t,n){return t.write32(n)},function(t){return t.read32()},t=>t<=4294967296n),e.registerType(Bn.U64,function(t,n){return t.write64(n)},function(t){return t.read64()}),e.registerType(Bn.U128,function(t,n){return t.write128(n)},function(t){return t.read128()}),e.registerType(Bn.U256,function(t,n){return t.write256(n)},function(t){return t.read256()}),e.registerType(Bn.BOOL,function(t,n){return t.write8(n)},function(t){return t.read8().toString(10)==="1"}),e.registerType(Bn.STRING,function(t,n){return t.writeVec(Array.from(n),(i,s)=>i.write8(s.charCodeAt(0)))},function(t){return t.readVec(n=>n.read8()).map(n=>String.fromCharCode(Number(n))).join("")},t=>!0),e.registerType(Bn.HEX,function(t,n){return t.writeVec(Array.from(Ah(n)),(i,s)=>i.write8(s))},function(t){let n=t.readVec(i=>i.read8());return zc(new Uint8Array(n))}),e.registerType(Bn.BASE58,function(t,n){return t.writeVec(Array.from(lu(n)),(i,s)=>i.write8(s))},function(t){let n=t.readVec(i=>i.read8());return uu(new Uint8Array(n))}),e.registerType(Bn.BASE64,function(t,n){return t.writeVec(Array.from(Co(n)),(i,s)=>i.write8(s))},function(t){let n=t.readVec(i=>i.read8());return Ir(new Uint8Array(n))})}function eC(){return{genericSeparators:["<",">"],vectorType:"vector",addressLength:YP,addressEncoding:"hex"}}class tC extends TypeError{constructor(t,n){let i;const{message:s,explanation:r,...o}=t,{path:a}=t,c=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(r??c),r!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>i??(i=[t,...n()])}}function nC(e){return vs(e)&&typeof e[Symbol.iterator]=="function"}function vs(e){return typeof e=="object"&&e!=null}function ks(e){return typeof e=="symbol"?e.toString():typeof e=="string"?JSON.stringify(e):`${e}`}function iC(e){const{done:t,value:n}=e.next();return t?void 0:n}function sC(e,t,n,i){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});const{path:s,branch:r}=t,{type:o}=n,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${ks(i)}\``}=e;return{value:i,type:o,refinement:a,key:s[s.length-1],path:s,branch:r,...e,message:c}}function*Db(e,t,n,i){nC(e)||(e=[e]);for(const s of e){const r=sC(s,t,n,i);r&&(yield r)}}function*sm(e,t,n={}){const{path:i=[],branch:s=[e],coerce:r=!1,mask:o=!1}=n,a={path:i,branch:s};if(r&&(e=t.coercer(e,a),o&&t.type!=="type"&&vs(t.schema)&&vs(e)&&!Array.isArray(e)))for(const d in e)t.schema[d]===void 0&&delete e[d];let c="valid";for(const d of t.validator(e,a))d.explanation=n.message,c="not_valid",yield[d,void 0];for(let[d,u,l]of t.entries(e,a)){const f=sm(u,l,{path:d===void 0?i:[...i,d],branch:d===void 0?s:[...s,u],coerce:r,mask:o,message:n.message});for(const p of f)p[0]?(c=p[0].refinement!=null?"not_refined":"not_valid",yield[p[0],void 0]):r&&(u=p[1],d===void 0?e=u:e instanceof Map?e.set(d,u):e instanceof Set?e.add(u):vs(e)&&(u!==void 0||d in e)&&(e[d]=u))}if(c!=="not_valid")for(const d of t.refiner(e,a))d.explanation=n.message,c="not_refined",yield[d,void 0];c==="valid"&&(yield[void 0,e])}class gr{constructor(t){const{type:n,schema:i,validator:s,refiner:r,coercer:o=c=>c,entries:a=function*(){}}=t;this.type=n,this.schema=i,this.entries=a,this.coercer=o,s?this.validator=(c,d)=>{const u=s(c,d);return Db(u,d,this,c)}:this.validator=()=>[],r?this.refiner=(c,d)=>{const u=r(c,d);return Db(u,d,this,c)}:this.refiner=()=>[]}assert(t,n){return yp(t,this,n)}create(t,n){return g2(t,this,n)}is(t){return jr(t,this)}mask(t,n){return m2(t,this,n)}validate(t,n={}){return fu(t,this,n)}}function yp(e,t,n){const i=fu(e,t,{message:n});if(i[0])throw i[0]}function g2(e,t,n){const i=fu(e,t,{coerce:!0,message:n});if(i[0])throw i[0];return i[1]}function m2(e,t,n){const i=fu(e,t,{coerce:!0,mask:!0,message:n});if(i[0])throw i[0];return i[1]}function jr(e,t){return!fu(e,t)[0]}function fu(e,t,n={}){const i=sm(e,t,n),s=iC(i);return s[0]?[new tC(s[0],function*(){for(const o of i)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Oj(...e){const t=e[0].type==="type",n=e.map(s=>s.schema),i=Object.assign({},...n);return t?uC(i):Cn(i)}function mr(e,t){return new gr({type:e,schema:null,validator:t})}function jb(){return mr("any",()=>!0)}function Oi(e){return new gr({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[n,i]of t.entries())yield[n,i,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${ks(t)}`}})}function rC(){return mr("bigint",e=>typeof e=="bigint")}function oC(){return mr("boolean",e=>typeof e=="boolean")}function fr(){return mr("integer",e=>typeof e=="number"&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${ks(e)}`)}function ti(e){const t=ks(e),n=typeof e;return new gr({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?e:null,validator(i){return i===e||`Expected the literal \`${t}\`, but received: ${ks(i)}`}})}function _2(){return mr("never",()=>!1)}function aC(e){return new gr({...e,validator:(t,n)=>t===null||e.validator(t,n),refiner:(t,n)=>t===null||e.refiner(t,n)})}function cC(){return mr("number",e=>typeof e=="number"&&!isNaN(e)||`Expected a number, but received: ${ks(e)}`)}function Cn(e){const t=e?Object.keys(e):[],n=_2();return new gr({type:"object",schema:e||null,*entries(i){if(e&&vs(i)){const s=new Set(Object.keys(i));for(const r of t)s.delete(r),yield[r,i[r],e[r]];for(const r of s)yield[r,i[r],n]}},validator(i){return vs(i)||`Expected an object, but received: ${ks(i)}`},coercer(i){return vs(i)?{...i}:i}})}function ur(e){return new gr({...e,validator:(t,n)=>t===void 0||e.validator(t,n),refiner:(t,n)=>t===void 0||e.refiner(t,n)})}function dC(e,t){return new gr({type:"record",schema:null,*entries(n){if(vs(n))for(const i in n){const s=n[i];yield[i,i,e],yield[i,s,t]}},validator(n){return vs(n)||`Expected an object, but received: ${ks(n)}`}})}function is(){return mr("string",e=>typeof e=="string"||`Expected a string, but received: ${ks(e)}`)}function $j(e){const t=_2();return new gr({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const i=Math.max(e.length,n.length);for(let s=0;s<i;s++)yield[s,n[s],e[s]||t]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${ks(n)}`}})}function uC(e){const t=Object.keys(e);return new gr({type:"type",schema:e,*entries(n){if(vs(n))for(const i of t)yield[i,n[i],e[i]]},validator(n){return vs(n)||`Expected an object, but received: ${ks(n)}`},coercer(n){return vs(n)?{...n}:n}})}function Gs(e){const t=e.map(n=>n.type).join(" | ");return new gr({type:"union",schema:null,coercer(n){for(const i of e){const[s,r]=i.validate(n,{coerce:!0});if(!s)return r}return n},validator(n,i){const s=[];for(const r of e){const[...o]=sm(n,r,i),[a]=o;if(a[0])for(const[c]of o)c&&s.push(c);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${ks(n)}`,...s]}})}function lC(){return mr("unknown",()=>!0)}const fC=32;function qb(e){try{return lu(e).length===fC}catch{return!1}}const rm=32;function wo(e){return gC(e)&&mC(e)===rm}function $u(e){return wo(e)}function hC(e){return e.includes("::")?b2(e):e}function b2(e){const[t,n]=e.split("::"),i=e.slice(t.length+n.length+4),s=i.includes("<")?i.slice(0,i.indexOf("<")):i,r=i.includes("<")?nm(i.slice(i.indexOf("<")+1,i.lastIndexOf(">"))).map(o=>hC(o.trim())):[];return{address:Mn(t),module:n,name:s,typeParams:r}}function pC(e){const{address:t,module:n,name:i,typeParams:s}=typeof e=="string"?b2(e):e,r=(s==null?void 0:s.length)>0?`<${s.map(o=>typeof o=="string"?o:pC(o)).join(",")}>`:"";return`${t}::${n}::${i}${r}`}function Mn(e,t=!1){let n=e.toLowerCase();return!t&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(rm*2,"0")}`}function Br(e,t=!1){return Mn(e,t)}function gC(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function mC(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}const _C=/^vector<(.+)>$/,bC=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;let wp=class ja{static parseFromStr(t,n=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};const i=t.match(_C);if(i)return{vector:ja.parseFromStr(i[1],n)};const s=t.match(bC);if(s)return{struct:{address:n?Mn(s[1]):s[1],module:s[2],name:s[3],typeParams:s[5]===void 0?[]:ja.parseStructTypeArgs(s[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,n=!1){return nm(t).map(i=>ja.parseFromStr(i,n))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${ja.tagToString(t.vector)}>`;if("struct"in t){const n=t.struct,i=n.typeParams.map(ja.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${i?`<${i}>`:""}`}throw new Error("Invalid TypeTag")}};const An=new Bn({...eC(),types:{enums:{"Option<T>":{None:null,Some:"T"}}}});function y2(e){return ye.u64({name:"unsafe_u64",...e}).transform({input:t=>t,output:t=>Number(t)})}function yC(e){return ye.enum("Option",{None:null,Some:e})}function om(e){return e.transform({input:t=>({[t.kind]:t}),output:t=>{const n=Object.keys(t)[0];return{kind:n,...t[n]}}})}const zs=ye.bytes(rm).transform({input:e=>typeof e=="string"?Ah(Mn(e)):e,output:e=>Mn(zc(e))}),am=ye.vector(ye.u8()).transform({name:"ObjectDigest",input:e=>lu(e),output:e=>uu(new Uint8Array(e))}),Md=ye.struct("SuiObjectRef",{objectId:zs,version:ye.u64(),digest:am}),cm=ye.struct("SharedObjectRef",{objectId:zs,initialSharedVersion:ye.u64(),mutable:ye.bool()}),zl=ye.enum("ObjectArg",{ImmOrOwned:Md,Shared:cm,Receiving:Md}),dm=ye.enum("CallArg",{Pure:ye.vector(ye.u8()),Object:zl,ObjVec:ye.vector(zl)}),Hc=ye.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:ye.lazy(()=>Hc),struct:ye.lazy(()=>gm),u16:null,u32:null,u256:null}),Os=om(ye.enum("Argument",{GasCoin:null,Input:ye.struct("Input",{index:ye.u16()}),Result:ye.struct("Result",{index:ye.u16()}),NestedResult:ye.struct("NestedResult",{index:ye.u16(),resultIndex:ye.u16()})})),um=ye.struct("ProgrammableMoveCall",{package:zs,module:ye.string(),function:ye.string(),type_arguments:ye.vector(Hc),arguments:ye.vector(Os)}).transform({input:e=>{const[t,n,i]=e.target.split("::"),s=e.typeArguments.map(r=>wp.parseFromStr(r,!0));return{package:Mn(t),module:n,function:i,type_arguments:s,arguments:e.arguments}},output:e=>({target:[e.package,e.module,e.function].join("::"),arguments:e.arguments,typeArguments:e.type_arguments.map(wp.tagToString)})}),lm=om(ye.enum("Transaction",{MoveCall:um,TransferObjects:ye.struct("TransferObjects",{objects:ye.vector(Os),address:Os}),SplitCoins:ye.struct("SplitCoins",{coin:Os,amounts:ye.vector(Os)}),MergeCoins:ye.struct("MergeCoins",{destination:Os,sources:ye.vector(Os)}),Publish:ye.struct("Publish",{modules:ye.vector(ye.vector(ye.u8())),dependencies:ye.vector(zs)}),MakeMoveVec:ye.struct("MakeMoveVec",{type:yC(Hc),objects:ye.vector(Os)}),Upgrade:ye.struct("Upgrade",{modules:ye.vector(ye.vector(ye.u8())),dependencies:ye.vector(zs),packageId:zs,ticket:Os})})),fm=ye.struct("ProgrammableTransaction",{inputs:ye.vector(dm),transactions:ye.vector(lm)}),hm=ye.enum("TransactionKind",{ProgrammableTransaction:fm,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),pm=ye.enum("TransactionExpiration",{None:null,Epoch:y2()}),gm=ye.struct("StructTag",{address:zs,module:ye.string(),name:ye.string(),typeParams:ye.vector(Hc)}),mm=ye.struct("GasData",{payment:ye.vector(Md),owner:zs,price:ye.u64(),budget:ye.u64()}),_m=ye.struct("TransactionDataV1",{kind:hm,sender:zs,gasData:mm,expiration:pm}),bm=ye.enum("TransactionData",{V1:_m}),wC=ye.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),vC=ye.enum("IntentVersion",{V0:null}),xC=ye.enum("AppId",{Sui:null}),TC=ye.struct("Intent",{scope:wC,version:vC,appId:xC}),AC=ye.generic(["T"],e=>ye.struct("IntentMessage<T>",{intent:TC,value:e})),ym=ye.enum("CompressedSignature",{ED25519:ye.fixedArray(64,ye.u8()),Secp256k1:ye.fixedArray(64,ye.u8()),Secp256r1:ye.fixedArray(64,ye.u8()),ZkLogin:ye.vector(ye.u8())}),wm=ye.enum("PublicKey",{ED25519:ye.fixedArray(32,ye.u8()),Secp256k1:ye.fixedArray(33,ye.u8()),Secp256r1:ye.fixedArray(33,ye.u8()),ZkLogin:ye.vector(ye.u8())}),vm=ye.struct("MultiSigPkMap",{pubKey:wm,weight:ye.u8()}),xm=ye.struct("MultiSigPublicKey",{pk_map:ye.vector(vm),threshold:ye.u16()}),w2=ye.struct("MultiSig",{sigs:ye.vector(ym),bitmap:ye.u16(),multisig_pk:xm}),kC=ye.vector(ye.u8()).transform({input:e=>typeof e=="string"?Co(e):e,output:e=>Ir(new Uint8Array(e))}),v2=ye.struct("SenderSignedTransaction",{intentMessage:AC(bm),txSignatures:ye.vector(kC)}),x2=ye.vector(v2,{name:"SenderSignedData"}),ri={...ye,U8:ye.u8(),U16:ye.u16(),U32:ye.u32(),U64:ye.u64(),U128:ye.u128(),U256:ye.u256(),ULEB128:ye.uleb128(),Bool:ye.bool(),String:ye.string(),Address:zs,Argument:Os,CallArg:dm,CompressedSignature:ym,GasData:mm,MultiSig:w2,MultiSigPkMap:vm,MultiSigPublicKey:xm,ObjectArg:zl,ObjectDigest:am,ProgrammableMoveCall:um,ProgrammableTransaction:fm,PublicKey:wm,SenderSignedData:x2,SenderSignedTransaction:v2,SharedObjectRef:cm,StructTag:gm,SuiObjectRef:Md,Transaction:lm,TransactionData:bm,TransactionDataV1:_m,TransactionExpiration:pm,TransactionKind:hm,TypeTag:Hc,ser:An.ser.bind(An),de:An.de.bind(An),getTypeInterface:An.getTypeInterface.bind(An),hasType:An.hasType.bind(An),parseTypeName:An.parseTypeName.bind(An),registerAddressType:An.registerAddressType.bind(An),registerAlias:An.registerAlias.bind(An),registerBcsType:An.registerBcsType.bind(An),registerEnumType:An.registerEnumType.bind(An),registerStructType:An.registerStructType.bind(An),registerType:An.registerType.bind(An),types:An.types};An.registerBcsType("utf8string",()=>ye.string({name:"utf8string"}));An.registerBcsType("unsafe_u64",()=>y2());An.registerBcsType("enumKind",e=>om(e));[zs,Os,dm,ym,mm,w2,vm,xm,zl,am,um,fm,wm,x2,cm,gm,Md,lm,bm,_m,pm,hm,Hc].forEach(e=>{An.registerBcsType(e.name,()=>e)});const SC=/^(?:[a-z0-9][a-z0-9-]{0,62}(?:\.[a-z0-9][a-z0-9-]{0,62})*)?@[a-z0-9][a-z0-9-]{0,62}$/i,EC=/^(?:[a-z0-9][a-z0-9-]{0,62}\.)+sui$/i;function PC(e,t="at"){const n=e.toLowerCase();let i;if(n.includes("@")){if(!SC.test(n))throw new Error(`Invalid SuiNS name ${e}`);const[s,r]=n.split("@");i=[...s?s.split("."):[],r]}else{if(!EC.test(n))throw new Error(`Invalid SuiNS name ${e}`);i=n.split(".").slice(0,-1)}return t==="dot"?`${i.join(".")}.sui`:`${i.slice(0,-1).join(".")}@${i[i.length-1]}`}BigInt(1e9);const Tm="0x1",T2="0x2",Rj=Br("0x6"),CC=`${T2}::sui::SUI`;Br("0x5");const Hl=Cn({digest:is(),objectId:is(),version:Gs([cC(),is(),rC()])}),IC=Gs([Cn({ImmOrOwned:Hl}),Cn({Shared:Cn({objectId:is(),initialSharedVersion:Gs([fr(),is()]),mutable:oC()})}),Cn({Receiving:Hl})]),Kl=Cn({Pure:Oi(fr())}),vp=Cn({Object:IC}),Wl=Gs([Kl,vp]);function BC(e,t){return{Pure:Array.from(e instanceof Uint8Array?e:im(e)?e.toBytes():ri.ser(t,e,{maxSize:1/0}).toBytes())}}const es={Pure:BC,ObjectRef({objectId:e,digest:t,version:n}){return{Object:{ImmOrOwned:{digest:t,version:n,objectId:Mn(e)}}}},SharedObjectRef({objectId:e,mutable:t,initialSharedVersion:n}){return{Object:{Shared:{mutable:t,initialSharedVersion:n,objectId:Mn(e)}}}},ReceivingRef({objectId:e,digest:t,version:n}){return{Object:{Receiving:{digest:t,version:n,objectId:Mn(e)}}}}};function Lb(e){return typeof e=="string"?Mn(e):"ImmOrOwned"in e.Object?Mn(e.Object.ImmOrOwned.objectId):"Receiving"in e.Object?Mn(e.Object.Receiving.objectId):Mn(e.Object.Shared.objectId)}function OC(e){return typeof e=="object"&&"Object"in e&&"Shared"in e.Object?e.Object.Shared:void 0}function $C(e){var t;return((t=OC(e))==null?void 0:t.mutable)??!1}function RC(e){function t(n,i){return e(n,i)}return t.u8=n=>e(ri.U8.serialize(n)),t.u16=n=>e(ri.U16.serialize(n)),t.u32=n=>e(ri.U32.serialize(n)),t.u64=n=>e(ri.U64.serialize(n)),t.u128=n=>e(ri.U128.serialize(n)),t.u256=n=>e(ri.U256.serialize(n)),t.bool=n=>e(ri.Bool.serialize(n)),t.string=n=>e(ri.String.serialize(n)),t.address=n=>e(ri.Address.serialize(n)),t.id=t.address,t}function Vi(e,t){return g2(e,t)}function xp(e){return typeof e=="object"&&"MutableReference"in e?e.MutableReference:void 0}function A2(e){return typeof e=="object"&&"Reference"in e?e.Reference:void 0}function Am(e){if(typeof e=="object"&&"Struct"in e)return e;const t=A2(e),n=xp(e);if(typeof t=="object"&&"Struct"in t)return t;if(typeof n=="object"&&"Struct"in n)return n}const UC="object",MC="ID",DC="ascii",jC="String",qC="string",LC="String",NC="option",FC="Option",zC={address:T2,module:UC,name:MC},HC={address:Tm,module:DC,name:jC},KC={address:Tm,module:qC,name:LC},WC={address:Tm,module:NC,name:FC},Ru=(e,t)=>e.address===t.address&&e.module===t.module&&e.name===t.name;function GC(e){var n;const t=(n=Am(e))==null?void 0:n.Struct;return(t==null?void 0:t.address)==="0x2"&&(t==null?void 0:t.module)==="tx_context"&&(t==null?void 0:t.name)==="TxContext"}function A0(e,t){if(!(typeof t>"u")&&typeof t!==e)throw new Error(`Expect ${t} to be ${e}, received ${typeof t}`)}const VC=["Address","Bool","U8","U16","U32","U64","U128","U256"];function Tp(e,t){if(typeof e=="string"&&VC.includes(e)){if(e in["U8","U16","U32","U64","U128","U256"])A0("number",t);else if(e==="Bool")A0("boolean",t);else if(e==="Address"&&(A0("string",t),t&&!wo(t)))throw new Error("Invalid Sui Address");return e.toLowerCase()}else if(typeof e=="string")throw new Error(`Unknown pure normalized type ${JSON.stringify(e,null,2)}`);if("Vector"in e){if((t===void 0||typeof t=="string")&&e.Vector==="U8")return"string";if(t!==void 0&&!Array.isArray(t))throw new Error(`Expect ${t} to be a array, received ${typeof t}`);const n=Tp(e.Vector,t?t[0]:void 0);return n===void 0?void 0:`vector<${n}>`}if("Struct"in e){if(Ru(e.Struct,HC))return"string";if(Ru(e.Struct,KC))return"utf8string";if(Ru(e.Struct,zC))return"address";if(Ru(e.Struct,WC)){const n={Vector:e.Struct.typeArguments[0]};return Tp(n,t)}}}function sc(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function XC(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function k2(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function JC(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");sc(e.outputLen),sc(e.blockLen)}function Ap(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function S2(e,t){k2(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const ZC={number:sc,bool:XC,bytes:k2,hash:JC,exists:Ap,output:S2},Uj=ZC,k0=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const km=e=>e instanceof Uint8Array,Gl=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Mj=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Dj=(e,t)=>e<<32-t|e>>>t,YC=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!YC)throw new Error("Non little-endian hardware is not supported");const QC=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function jj(e){if(!km(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=QC[e[n]];return t}function qj(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let i=0;i<n.length;i++){const s=i*2,r=e.slice(s,s+2),o=Number.parseInt(r,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[i]=o}return n}function eI(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function rc(e){if(typeof e=="string"&&(e=eI(e)),!km(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function Lj(...e){const t=new Uint8Array(e.reduce((i,s)=>i+s.length,0));let n=0;return e.forEach(i=>{if(!km(i))throw new Error("Uint8Array expected");t.set(i,n),n+=i.length}),t}class tI{clone(){return this._cloneInto()}}const nI={}.toString;function Nj(e,t){if(t!==void 0&&nI.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(e,t)}function Fj(e){const t=i=>e().update(rc(i)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function iI(e){const t=(i,s)=>e(s).update(rc(i)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=i=>e(i),t}function zj(e=32){if(k0&&typeof k0.getRandomValues=="function")return k0.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const sI=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class rI extends tI{constructor(t,n,i={},s,r,o){if(super(),this.blockLen=t,this.outputLen=n,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,sc(t),sc(n),sc(s),n<0||n>s)throw new Error("outputLen bigger than keyLen");if(i.key!==void 0&&(i.key.length<1||i.key.length>s))throw new Error(`key must be up 1..${s} byte long or undefined`);if(i.salt!==void 0&&i.salt.length!==r)throw new Error(`salt must be ${r} byte long or undefined`);if(i.personalization!==void 0&&i.personalization.length!==o)throw new Error(`personalization must be ${o} byte long or undefined`);this.buffer32=Gl(this.buffer=new Uint8Array(t))}update(t){Ap(this);const{blockLen:n,buffer:i,buffer32:s}=this;t=rc(t);const r=t.length,o=t.byteOffset,a=t.buffer;for(let c=0;c<r;){this.pos===n&&(this.compress(s,0,!1),this.pos=0);const d=Math.min(n-this.pos,r-c),u=o+c;if(d===n&&!(u%4)&&c+d<r){const l=new Uint32Array(a,u,Math.floor((r-c)/4));for(let f=0;c+n<r;f+=s.length,c+=n)this.length+=n,this.compress(l,f,!1);continue}i.set(t.subarray(c,c+d),this.pos),this.pos+=d,this.length+=d,c+=d}return this}digestInto(t){Ap(this),S2(t,this);const{pos:n,buffer32:i}=this;this.finished=!0,this.buffer.subarray(n).fill(0),this.compress(i,0,!0);const s=Gl(t);this.get().forEach((r,o)=>s[o]=r)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const i=t.slice(0,n);return this.destroy(),i}_cloneInto(t){const{buffer:n,length:i,finished:s,destroyed:r,outputLen:o,pos:a}=this;return t||(t=new this.constructor({dkLen:o})),t.set(...this.get()),t.length=i,t.finished=s,t.destroyed=r,t.outputLen=o,t.buffer.set(n),t.pos=a,t}}const Uu=BigInt(2**32-1),kp=BigInt(32);function E2(e,t=!1){return t?{h:Number(e&Uu),l:Number(e>>kp&Uu)}:{h:Number(e>>kp&Uu)|0,l:Number(e&Uu)|0}}function oI(e,t=!1){let n=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:r,l:o}=E2(e[s],t);[n[s],i[s]]=[r,o]}return[n,i]}const aI=(e,t)=>BigInt(e>>>0)<<kp|BigInt(t>>>0),cI=(e,t,n)=>e>>>n,dI=(e,t,n)=>e<<32-n|t>>>n,uI=(e,t,n)=>e>>>n|t<<32-n,lI=(e,t,n)=>e<<32-n|t>>>n,fI=(e,t,n)=>e<<64-n|t>>>n-32,hI=(e,t,n)=>e>>>n-32|t<<64-n,pI=(e,t)=>t,gI=(e,t)=>e,mI=(e,t,n)=>e<<n|t>>>32-n,_I=(e,t,n)=>t<<n|e>>>32-n,bI=(e,t,n)=>t<<n-32|e>>>64-n,yI=(e,t,n)=>e<<n-32|t>>>64-n;function wI(e,t,n,i){const s=(t>>>0)+(i>>>0);return{h:e+n+(s/2**32|0)|0,l:s|0}}const vI=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),xI=(e,t,n,i)=>t+n+i+(e/2**32|0)|0,TI=(e,t,n,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),AI=(e,t,n,i,s)=>t+n+i+s+(e/2**32|0)|0,kI=(e,t,n,i,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0)+(s>>>0),SI=(e,t,n,i,s,r)=>t+n+i+s+r+(e/2**32|0)|0,EI={fromBig:E2,split:oI,toBig:aI,shrSH:cI,shrSL:dI,rotrSH:uI,rotrSL:lI,rotrBH:fI,rotrBL:hI,rotr32H:pI,rotr32L:gI,rotlSH:mI,rotlSL:_I,rotlBH:bI,rotlBL:yI,add:wI,add3L:vI,add3H:xI,add4L:TI,add4H:AI,add5H:SI,add5L:kI},Di=EI,ei=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Ge=new Uint32Array(32);function so(e,t,n,i,s,r){const o=s[r],a=s[r+1];let c=Ge[2*e],d=Ge[2*e+1],u=Ge[2*t],l=Ge[2*t+1],f=Ge[2*n],p=Ge[2*n+1],m=Ge[2*i],_=Ge[2*i+1],x=Di.add3L(c,u,o);d=Di.add3H(x,d,l,a),c=x|0,{Dh:_,Dl:m}={Dh:_^d,Dl:m^c},{Dh:_,Dl:m}={Dh:Di.rotr32H(_,m),Dl:Di.rotr32L(_,m)},{h:p,l:f}=Di.add(p,f,_,m),{Bh:l,Bl:u}={Bh:l^p,Bl:u^f},{Bh:l,Bl:u}={Bh:Di.rotrSH(l,u,24),Bl:Di.rotrSL(l,u,24)},Ge[2*e]=c,Ge[2*e+1]=d,Ge[2*t]=u,Ge[2*t+1]=l,Ge[2*n]=f,Ge[2*n+1]=p,Ge[2*i]=m,Ge[2*i+1]=_}function ro(e,t,n,i,s,r){const o=s[r],a=s[r+1];let c=Ge[2*e],d=Ge[2*e+1],u=Ge[2*t],l=Ge[2*t+1],f=Ge[2*n],p=Ge[2*n+1],m=Ge[2*i],_=Ge[2*i+1],x=Di.add3L(c,u,o);d=Di.add3H(x,d,l,a),c=x|0,{Dh:_,Dl:m}={Dh:_^d,Dl:m^c},{Dh:_,Dl:m}={Dh:Di.rotrSH(_,m,16),Dl:Di.rotrSL(_,m,16)},{h:p,l:f}=Di.add(p,f,_,m),{Bh:l,Bl:u}={Bh:l^p,Bl:u^f},{Bh:l,Bl:u}={Bh:Di.rotrBH(l,u,63),Bl:Di.rotrBL(l,u,63)},Ge[2*e]=c,Ge[2*e+1]=d,Ge[2*t]=u,Ge[2*t+1]=l,Ge[2*n]=f,Ge[2*n+1]=p,Ge[2*i]=m,Ge[2*i+1]=_}class PI extends rI{constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=ei[0]|0,this.v0h=ei[1]|0,this.v1l=ei[2]|0,this.v1h=ei[3]|0,this.v2l=ei[4]|0,this.v2h=ei[5]|0,this.v3l=ei[6]|0,this.v3h=ei[7]|0,this.v4l=ei[8]|0,this.v4h=ei[9]|0,this.v5l=ei[10]|0,this.v5h=ei[11]|0,this.v6l=ei[12]|0,this.v6h=ei[13]|0,this.v7l=ei[14]|0,this.v7h=ei[15]|0;const n=t.key?t.key.length:0;if(this.v0l^=this.outputLen|n<<8|65536|1<<24,t.salt){const i=Gl(rc(t.salt));this.v4l^=i[0],this.v4h^=i[1],this.v5l^=i[2],this.v5h^=i[3]}if(t.personalization){const i=Gl(rc(t.personalization));this.v6l^=i[0],this.v6h^=i[1],this.v7l^=i[2],this.v7h^=i[3]}if(t.key){const i=new Uint8Array(this.blockLen);i.set(rc(t.key)),this.update(i)}}get(){let{v0l:t,v0h:n,v1l:i,v1h:s,v2l:r,v2h:o,v3l:a,v3h:c,v4l:d,v4h:u,v5l:l,v5h:f,v6l:p,v6h:m,v7l:_,v7h:x}=this;return[t,n,i,s,r,o,a,c,d,u,l,f,p,m,_,x]}set(t,n,i,s,r,o,a,c,d,u,l,f,p,m,_,x){this.v0l=t|0,this.v0h=n|0,this.v1l=i|0,this.v1h=s|0,this.v2l=r|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=d|0,this.v4h=u|0,this.v5l=l|0,this.v5h=f|0,this.v6l=p|0,this.v6h=m|0,this.v7l=_|0,this.v7h=x|0}compress(t,n,i){this.get().forEach((c,d)=>Ge[d]=c),Ge.set(ei,16);let{h:s,l:r}=Di.fromBig(BigInt(this.length));Ge[24]=ei[8]^r,Ge[25]=ei[9]^s,i&&(Ge[28]=~Ge[28],Ge[29]=~Ge[29]);let o=0;const a=sI;for(let c=0;c<12;c++)so(0,4,8,12,t,n+2*a[o++]),ro(0,4,8,12,t,n+2*a[o++]),so(1,5,9,13,t,n+2*a[o++]),ro(1,5,9,13,t,n+2*a[o++]),so(2,6,10,14,t,n+2*a[o++]),ro(2,6,10,14,t,n+2*a[o++]),so(3,7,11,15,t,n+2*a[o++]),ro(3,7,11,15,t,n+2*a[o++]),so(0,5,10,15,t,n+2*a[o++]),ro(0,5,10,15,t,n+2*a[o++]),so(1,6,11,12,t,n+2*a[o++]),ro(1,6,11,12,t,n+2*a[o++]),so(2,7,8,13,t,n+2*a[o++]),ro(2,7,8,13,t,n+2*a[o++]),so(3,4,9,14,t,n+2*a[o++]),ro(3,4,9,14,t,n+2*a[o++]);this.v0l^=Ge[0]^Ge[16],this.v0h^=Ge[1]^Ge[17],this.v1l^=Ge[2]^Ge[18],this.v1h^=Ge[3]^Ge[19],this.v2l^=Ge[4]^Ge[20],this.v2h^=Ge[5]^Ge[21],this.v3l^=Ge[6]^Ge[22],this.v3h^=Ge[7]^Ge[23],this.v4l^=Ge[8]^Ge[24],this.v4h^=Ge[9]^Ge[25],this.v5l^=Ge[10]^Ge[26],this.v5h^=Ge[11]^Ge[27],this.v6l^=Ge[12]^Ge[28],this.v6h^=Ge[13]^Ge[29],this.v7l^=Ge[14]^Ge[30],this.v7h^=Ge[15]^Ge[31],Ge.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const P2=iI(e=>new PI(e));function CI(e,t){const n=Array.from(`${e}::`).map(s=>s.charCodeAt(0)),i=new Uint8Array(n.length+t.length);return i.set(n),i.set(t,n.length),P2(i,{dkLen:32})}const II=e=>Gs([Cn({None:Gs([ti(!0),ti(null)])}),Cn({Some:e})]),Dd=Gs([Cn({kind:ti("Input"),index:fr(),value:ur(jb()),type:ur(ti("object"))}),Cn({kind:ti("Input"),index:fr(),value:ur(jb()),type:ti("pure")})]),BI=[Dd,Cn({kind:ti("GasCoin")}),Cn({kind:ti("Result"),index:fr()}),Cn({kind:ti("NestedResult"),index:fr(),resultIndex:fr()})],qr=Gs([...BI]),C2=Cn({kind:ti("MoveCall"),target:mr("target",is().validator),typeArguments:Oi(is()),arguments:Oi(qr)}),I2=Cn({kind:ti("TransferObjects"),objects:Oi(qr),address:qr}),B2=Cn({kind:ti("SplitCoins"),coin:qr,amounts:Oi(qr)}),O2=Cn({kind:ti("MergeCoins"),destination:qr,sources:Oi(qr)}),$2=Cn({kind:ti("MakeMoveVec"),type:ur(II(dC(is(),lC()))),objects:Oi(qr)}),R2=Cn({kind:ti("Publish"),modules:Oi(Oi(fr())),dependencies:Oi(is())}),U2=Cn({kind:ti("Upgrade"),modules:Oi(Oi(fr())),dependencies:Oi(is()),packageId:is(),ticket:qr}),OI=[C2,I2,B2,O2,R2,U2,$2],$I=Gs([...OI]),Ro={MoveCall(e){return Vi({kind:"MoveCall",target:e.target,arguments:e.arguments??[],typeArguments:e.typeArguments??[]},C2)},TransferObjects(e,t){return t.kind==="Input"&&t.type==="pure"&&typeof t.value!="object"&&(t.value=es.Pure(ri.Address.serialize(t.value))),Vi({kind:"TransferObjects",objects:e,address:t},I2)},SplitCoins(e,t){return t.forEach(n=>{n.kind==="Input"&&n.type==="pure"&&typeof n.value!="object"&&(n.value=es.Pure(ri.U64.serialize(n.value)))}),Vi({kind:"SplitCoins",coin:e,amounts:t},B2)},MergeCoins(e,t){return Vi({kind:"MergeCoins",destination:e,sources:t},O2)},Publish({modules:e,dependencies:t}){return Vi({kind:"Publish",modules:e.map(n=>typeof n=="string"?Array.from(Co(n)):n),dependencies:t.map(n=>Br(n))},R2)},Upgrade({modules:e,dependencies:t,packageId:n,ticket:i}){return Vi({kind:"Upgrade",modules:e.map(s=>typeof s=="string"?Array.from(Co(s)):s),dependencies:t.map(s=>Br(s)),packageId:n,ticket:i},U2)},MakeMoveVec({type:e,objects:t}){return Vi({kind:"MakeMoveVec",type:e?{Some:wp.parseFromStr(e)}:{None:null},objects:t},$2)}},RI=ur(aC(Gs([Cn({Epoch:fr()}),Cn({None:Gs([ti(!0),ti(null)])})]))),Nb=mr("StringEncodedBigint",e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}}),UI=Cn({budget:ur(Nb),price:ur(Nb),payment:ur(Oi(Hl)),owner:ur(is())}),Mu=Cn({version:ti(1),sender:ur(is()),expiration:RI,gasConfig:UI,inputs:Oi(Dd),transactions:Oi($I)});function Fb(e){return Mn(e).replace("0x","")}class Or{constructor(t){this.version=1,this.sender=t==null?void 0:t.sender,this.expiration=t==null?void 0:t.expiration,this.gasConfig=(t==null?void 0:t.gasConfig)??{},this.inputs=(t==null?void 0:t.inputs)??[],this.transactions=(t==null?void 0:t.transactions)??[]}static fromKindBytes(t){const n=ri.TransactionKind.parse(t),i="ProgrammableTransaction"in n?n.ProgrammableTransaction:null;if(!i)throw new Error("Unable to deserialize from bytes.");const s=Vi({version:1,gasConfig:{},inputs:i.inputs.map((r,o)=>Vi({kind:"Input",value:r,index:o,type:jr(r,Kl)?"pure":"object"},Dd)),transactions:i.transactions},Mu);return Or.restore(s)}static fromBytes(t){var o;const n=ri.TransactionData.parse(t),i=n==null?void 0:n.V1,s="ProgrammableTransaction"in i.kind?(o=i==null?void 0:i.kind)==null?void 0:o.ProgrammableTransaction:null;if(!i||!s)throw new Error("Unable to deserialize from bytes.");const r=Vi({version:1,sender:i.sender,expiration:i.expiration,gasConfig:i.gasData,inputs:s.inputs.map((a,c)=>Vi({kind:"Input",value:a,index:c,type:jr(a,Kl)?"pure":"object"},Dd)),transactions:s.transactions},Mu);return Or.restore(r)}static restore(t){yp(t,Mu);const n=new Or;return Object.assign(n,t),n}static getDigestFromBytes(t){const n=CI("TransactionData",t);return uu(n)}build({maxSizeBytes:t=1/0,overrides:n,onlyTransactionKind:i}={}){const s=this.inputs.map(u=>(yp(u.value,Wl),u.value)),r={ProgrammableTransaction:{inputs:s,transactions:this.transactions}};if(i)return ri.TransactionKind.serialize(r,{maxSize:t}).toBytes();const o=(n==null?void 0:n.expiration)??this.expiration,a=(n==null?void 0:n.sender)??this.sender,c={...this.gasConfig,...n==null?void 0:n.gasConfig};if(!a)throw new Error("Missing transaction sender");if(!c.budget)throw new Error("Missing gas budget");if(!c.payment)throw new Error("Missing gas payment");if(!c.price)throw new Error("Missing gas price");const d={sender:Fb(a),expiration:o||{None:!0},gasData:{payment:c.payment,owner:Fb(this.gasConfig.owner??a),price:BigInt(c.price),budget:BigInt(c.budget)},kind:{ProgrammableTransaction:{inputs:s,transactions:this.transactions}}};return ri.TransactionData.serialize({V1:d},{maxSize:t}).toBytes()}getDigest(){const t=this.build({onlyTransactionKind:!1});return Or.getDigestFromBytes(t)}snapshot(){return Vi(this,Mu)}}var Sm=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Tn=(e,t,n)=>(Sm(e,t,"read from private field"),n?n.call(e):t.get(e)),yr=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Du=(e,t,n,i)=>(Sm(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),oi=(e,t,n)=>(Sm(e,t,"access private method"),n),on,dd,ol,ud,al,Io,ra,Em,M2,Pm,D2,Cm,j2,Im,q2,cl,Sp;const MI={maxPureArgumentSize:16*1024,maxTxGas:5e10,maxGasObjects:256,maxTxSizeBytes:128*1024};function DI(e){const t={kind:"Result",index:e},n=[],i=s=>n[s]??(n[s]={kind:"NestedResult",index:e,resultIndex:s});return new Proxy(t,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(s,r){if(r in s)return Reflect.get(s,r);if(r===Symbol.iterator)return function*(){let a=0;for(;;)yield i(a),a++};if(typeof r=="symbol")return;const o=parseInt(r,10);if(!(Number.isNaN(o)||o<0))return i(o)}})}function jI(e){const t=Am(e);return t?t.Struct.address==="0x2"&&t.Struct.module==="transfer"&&t.Struct.name==="Receiving":!1}function jd(e){if(!e.client)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}const L2=Symbol.for("@mysten/transaction"),S0={maxTxGas:"max_tx_gas",maxGasObjects:"max_gas_payment_objects",maxTxSizeBytes:"max_tx_size_bytes",maxPureArgumentSize:"max_pure_argument_size"},qI=1000n,LI=50,NI=(e,t)=>Array.from({length:Math.ceil(e.length/t)},(n,i)=>e.slice(i*t,i*t+t));function FI(e){return!!e&&typeof e=="object"&&e[L2]===!0}const Ep=class{constructor(e){yr(this,dd),yr(this,ud),yr(this,Io),yr(this,Em),yr(this,Pm),yr(this,Cm),yr(this,Im),yr(this,cl),yr(this,on,void 0),Du(this,on,new Or(e?e.blockData:void 0))}static fromKind(e){const t=new Ep;return Du(t,on,Or.fromKindBytes(typeof e=="string"?Co(e):e)),t}static from(e){const t=new Ep;return typeof e!="string"||!e.startsWith("{")?Du(t,on,Or.fromBytes(typeof e=="string"?Co(e):e)):Du(t,on,Or.restore(JSON.parse(e))),t}setSender(e){Tn(this,on).sender=e}setSenderIfNotSet(e){Tn(this,on).sender||(Tn(this,on).sender=e)}setExpiration(e){Tn(this,on).expiration=e}setGasPrice(e){Tn(this,on).gasConfig.price=String(e)}setGasBudget(e){Tn(this,on).gasConfig.budget=String(e)}setGasOwner(e){Tn(this,on).gasConfig.owner=e}setGasPayment(e){Tn(this,on).gasConfig.payment=e.map(t=>m2(t,Hl))}get blockData(){return Tn(this,on).snapshot()}get[L2](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:RC((e,t)=>im(e)?oi(this,dd,ol).call(this,"pure",{Pure:Array.from(e.toBytes())}):oi(this,dd,ol).call(this,"pure",e instanceof Uint8Array?es.Pure(e):t?es.Pure(e,t):e))}),this.pure}get gas(){return{kind:"GasCoin"}}object(e){if(typeof e=="object"&&"kind"in e)return e;const t=Lb(e),n=Tn(this,on).inputs.find(i=>i.type==="object"&&t===Lb(i.value));return n&&jr(n.value,vp)&&"Shared"in n.value.Object&&jr(e,vp)&&"Shared"in e.Object&&(n.value.Object.Shared.mutable=n.value.Object.Shared.mutable||e.Object.Shared.mutable),n??oi(this,dd,ol).call(this,"object",typeof e=="string"?Mn(e):e)}objectRef(...e){return this.object(es.ObjectRef(...e))}receivingRef(...e){return this.object(es.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(es.SharedObjectRef(...e))}add(e){const t=Tn(this,on).transactions.push(e);return DI(t-1)}splitCoins(e,t){return this.add(Ro.SplitCoins(typeof e=="string"?this.object(e):e,t.map(n=>typeof n=="number"||typeof n=="bigint"||typeof n=="string"?this.pure.u64(n):oi(this,ud,al).call(this,n))))}mergeCoins(e,t){return this.add(Ro.MergeCoins(typeof e=="string"?this.object(e):e,t.map(n=>typeof n=="string"?this.object(n):n)))}publish({modules:e,dependencies:t}){return this.add(Ro.Publish({modules:e,dependencies:t}))}upgrade({modules:e,dependencies:t,packageId:n,ticket:i}){return this.add(Ro.Upgrade({modules:e,dependencies:t,packageId:n,ticket:typeof i=="string"?this.object(i):i}))}moveCall({arguments:e,typeArguments:t,target:n}){return this.add(Ro.MoveCall({arguments:e==null?void 0:e.map(i=>oi(this,ud,al).call(this,i)),typeArguments:t,target:n}))}transferObjects(e,t){return this.add(Ro.TransferObjects(e.map(n=>typeof n=="string"?this.object(n):n),typeof t=="string"?this.pure.address(t):oi(this,ud,al).call(this,t)))}makeMoveVec({type:e,objects:t}){return this.add(Ro.MakeMoveVec({type:e,objects:t.map(n=>typeof n=="string"?this.object(n):n)}))}serialize(){return JSON.stringify(Tn(this,on).snapshot())}async sign(e){const{signer:t,...n}=e,i=await this.build(n);return t.signTransactionBlock(i)}async build(e={}){return await oi(this,cl,Sp).call(this,e),Tn(this,on).build({maxSizeBytes:oi(this,Io,ra).call(this,"maxTxSizeBytes",e),onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await oi(this,cl,Sp).call(this,e),Tn(this,on).getDigest()}};let zb=Ep;on=new WeakMap;dd=new WeakSet;ol=function(e,t){const n=Tn(this,on).inputs.length,i=Vi({kind:"Input",value:typeof t=="bigint"?String(t):t,index:n,type:e},Dd);return Tn(this,on).inputs.push(i),i};ud=new WeakSet;al=function(e){return im(e)?this.pure(e):e};Io=new WeakSet;ra=function(e,{protocolConfig:t,limits:n}){if(n&&typeof n[e]=="number")return n[e];if(!t)return MI[e];const i=t==null?void 0:t.attributes[S0[e]];if(!i)throw new Error(`Missing expected protocol config: "${S0[e]}"`);const s="u64"in i?i.u64:"u32"in i?i.u32:i.f64;if(!s)throw new Error(`Unexpected protocol config value found for: "${S0[e]}"`);return Number(s)};Em=new WeakSet;M2=function(e){const t=oi(this,Io,ra).call(this,"maxPureArgumentSize",e);Tn(this,on).inputs.forEach((n,i)=>{if(jr(n.value,Kl)&&n.value.Pure.length>t)throw new Error(`Input at index ${i} is too large, max pure input size is ${t} bytes, got ${n.value.Pure.length} bytes`)})};Pm=new WeakSet;D2=async function(e){if(Tn(this,on).gasConfig.payment){const s=oi(this,Io,ra).call(this,"maxGasObjects",e);if(Tn(this,on).gasConfig.payment.length>s)throw new Error(`Payment objects exceed maximum amount: ${s}`)}if(e.onlyTransactionKind||Tn(this,on).gasConfig.payment)return;const t=Tn(this,on).gasConfig.owner??Tn(this,on).sender,i=(await jd(e).getCoins({owner:t,coinType:CC})).data.filter(s=>!Tn(this,on).inputs.find(o=>jr(o.value,Wl)&&"Object"in o.value&&"ImmOrOwned"in o.value.Object?s.coinObjectId===o.value.Object.ImmOrOwned.objectId:!1)).slice(0,oi(this,Io,ra).call(this,"maxGasObjects",e)-1).map(s=>({objectId:s.coinObjectId,digest:s.digest,version:s.version}));if(!i.length)throw new Error("No valid gas coins found for the transaction.");this.setGasPayment(i)};Cm=new WeakSet;j2=async function(e){e.onlyTransactionKind||Tn(this,on).gasConfig.price||this.setGasPrice(await jd(e).getReferenceGasPrice())};Im=new WeakSet;q2=async function(e){const{inputs:t,transactions:n}=Tn(this,on),i=[],s=[];if(t.forEach(r=>{if(r.type==="object"&&typeof r.value=="string"){s.push({id:Mn(r.value),input:r});return}}),n.forEach(r=>{if(r.kind==="MoveCall"&&r.arguments.some(a=>a.kind==="Input"&&!jr(t[a.index].value,Wl))&&i.push(r),r.kind==="SplitCoins"&&r.amounts.forEach(o=>{if(o.kind==="Input"){const a=t[o.index];typeof a.value!="object"&&(a.value=es.Pure(ri.U64.serialize(a.value)))}}),r.kind==="TransferObjects"&&r.address.kind==="Input"){const o=t[r.address.index];typeof o.value!="object"&&(o.value=es.Pure(ri.Address.serialize(o.value)))}}),i.length&&await Promise.all(i.map(async r=>{const[o,a,c]=r.target.split("::"),d=await jd(e).getNormalizedMoveFunction({package:Br(o),module:a,function:c}),l=d.parameters.length>0&&GC(d.parameters.at(-1))?d.parameters.slice(0,d.parameters.length-1):d.parameters;if(l.length!==r.arguments.length)throw new Error("Incorrect number of arguments.");l.forEach((f,p)=>{const m=r.arguments[p];if(m.kind!=="Input")return;const _=t[m.index];if(jr(_.value,Wl))return;const x=_.value,C=Tp(f,x);if(C){_.value=es.Pure(x,C);return}if(Am(f)!=null||typeof f=="object"&&"TypeParameter"in f){if(typeof x!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(x,null,2)}`);s.push({id:x,input:_,normalizedType:f});return}throw new Error(`Unknown call arg type ${JSON.stringify(f,null,2)} for value ${JSON.stringify(x,null,2)}`)})})),s.length){const r=[...new Set(s.map(({id:u})=>u))],o=NI(r,LI),a=(await Promise.all(o.map(u=>jd(e).multiGetObjects({ids:u,options:{showOwner:!0}})))).flat();let c=new Map(r.map((u,l)=>[u,a[l]]));const d=Array.from(c).filter(([u,l])=>l.error).map(([u,l])=>u);if(d.length)throw new Error(`The following input objects are invalid: ${d.join(", ")}`);s.forEach(({id:u,input:l,normalizedType:f})=>{var x;const p=c.get(u),m=(x=p.data)==null?void 0:x.owner,_=m&&typeof m=="object"&&"Shared"in m?m.Shared.initial_shared_version:void 0;if(_){const C=f!=null&&xp(f)==null&&A2(f)==null,k=$C(l.value)||C||f!=null&&xp(f)!=null;l.value=es.SharedObjectRef({objectId:u,initialSharedVersion:_,mutable:k})}else f&&jI(f)?l.value=es.ReceivingRef(p.data):l.value=es.ObjectRef(p.data)})}};cl=new WeakSet;Sp=async function(e){if(!e.onlyTransactionKind&&!Tn(this,on).sender)throw new Error("Missing transaction sender");if(!e.protocolConfig&&!e.limits&&e.client&&(e.protocolConfig=await e.client.getProtocolConfig()),await Promise.all([oi(this,Cm,j2).call(this,e),oi(this,Im,q2).call(this,e)]),!e.onlyTransactionKind&&(await oi(this,Pm,D2).call(this,e),!Tn(this,on).gasConfig.budget)){const t=await jd(e).dryRunTransactionBlock({transactionBlock:Tn(this,on).build({maxSizeBytes:oi(this,Io,ra).call(this,"maxTxSizeBytes",e),overrides:{gasConfig:{budget:String(oi(this,Io,ra).call(this,"maxTxGas",e)),payment:[]}}})});if(t.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${t.effects.status.error}`,{cause:t});const n=qI*BigInt(this.blockData.gasConfig.price||1n),i=BigInt(t.effects.gasUsed.computationCost)+n,s=i+BigInt(t.effects.gasUsed.storageCost)-BigInt(t.effects.gasUsed.storageRebate);this.setGasBudget(s>i?s:i)}oi(this,Em,M2).call(this,e)};const zI=Symbol.for("@mysten/SuiClient");let HI=class{get[zI](){return!0}constructor(t){this.transport=t.transport??new LP({url:t.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(t){if(!t.owner||!wo(Mn(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[t.owner,t.coinType,t.cursor,t.limit]})}async getAllCoins(t){if(!t.owner||!wo(Mn(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[t.owner,t.cursor,t.limit]})}async getBalance(t){if(!t.owner||!wo(Mn(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[t.owner,t.coinType]})}async getAllBalances(t){if(!t.owner||!wo(Mn(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[t.owner]})}async getCoinMetadata(t){return await this.transport.request({method:"suix_getCoinMetadata",params:[t.coinType]})}async getTotalSupply(t){return await this.transport.request({method:"suix_getTotalSupply",params:[t.coinType]})}async call(t,n){return await this.transport.request({method:t,params:n})}async getMoveFunctionArgTypes(t){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[t.package,t.module,t.function]})}async getNormalizedMoveModulesByPackage(t){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[t.package]})}async getNormalizedMoveModule(t){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[t.package,t.module]})}async getNormalizedMoveFunction(t){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[t.package,t.module,t.function]})}async getNormalizedMoveStruct(t){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[t.package,t.module,t.struct]})}async getOwnedObjects(t){if(!t.owner||!wo(Mn(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[t.owner,{filter:t.filter,options:t.options},t.cursor,t.limit]})}async getObject(t){if(!t.id||!$u(Br(t.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[t.id,t.options]})}async tryGetPastObject(t){return await this.transport.request({method:"sui_tryGetPastObject",params:[t.id,t.version,t.options]})}async multiGetObjects(t){if(t.ids.forEach(i=>{if(!i||!$u(Br(i)))throw new Error(`Invalid Sui Object id ${i}`)}),t.ids.length!==new Set(t.ids).size)throw new Error(`Duplicate object ids in batch call ${t.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[t.ids,t.options]})}async queryTransactionBlocks(t){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:t.filter,options:t.options},t.cursor,t.limit,(t.order||"descending")==="descending"]})}async getTransactionBlock(t){if(!qb(t.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[t.digest,t.options]})}async multiGetTransactionBlocks(t){if(t.digests.forEach(i=>{if(!qb(i))throw new Error(`Invalid Transaction digest ${i}`)}),t.digests.length!==new Set(t.digests).size)throw new Error(`Duplicate digests in batch call ${t.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[t.digests,t.options]})}async executeTransactionBlock(t){return await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof t.transactionBlock=="string"?t.transactionBlock:Ir(t.transactionBlock),Array.isArray(t.signature)?t.signature:[t.signature],t.options,t.requestType]})}async signAndExecuteTransactionBlock({transactionBlock:t,signer:n,...i}){let s;t instanceof Uint8Array?s=t:(t.setSenderIfNotSet(n.toSuiAddress()),s=await t.build({client:this}));const{signature:r,bytes:o}=await n.signTransactionBlock(s);return this.executeTransactionBlock({transactionBlock:o,signature:r,...i})}async getTotalTransactionBlocks(){const t=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(t)}async getReferenceGasPrice(){const t=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(t)}async getStakes(t){if(!t.owner||!wo(Mn(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[t.owner]})}async getStakesByIds(t){return t.stakedSuiIds.forEach(n=>{if(!n||!$u(Br(n)))throw new Error(`Invalid Sui Stake id ${n}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[t.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(t){return await this.transport.request({method:"suix_queryEvents",params:[t.query,t.cursor,t.limit,(t.order||"descending")==="descending"]})}async subscribeEvent(t){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[t.filter],onMessage:t.onMessage})}async subscribeTransaction(t){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[t.filter],onMessage:t.onMessage})}async devInspectTransactionBlock(t){var i;let n;if(FI(t.transactionBlock))t.transactionBlock.setSenderIfNotSet(t.sender),n=Ir(await t.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof t.transactionBlock=="string")n=t.transactionBlock;else if(t.transactionBlock instanceof Uint8Array)n=Ir(t.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[t.sender,n,(i=t.gasPrice)==null?void 0:i.toString(),t.epoch]})}async dryRunTransactionBlock(t){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof t.transactionBlock=="string"?t.transactionBlock:Ir(t.transactionBlock)]})}async getDynamicFields(t){if(!t.parentId||!$u(Br(t.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[t.parentId,t.cursor,t.limit]})}async getDynamicFieldObject(t){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[t.parentId,t.name]})}async getLatestCheckpointSequenceNumber(){const t=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(t)}async getCheckpoint(t){return await this.transport.request({method:"sui_getCheckpoint",params:[t.id]})}async getCheckpoints(t){return await this.transport.request({method:"sui_getCheckpoints",params:[t.cursor,t==null?void 0:t.limit,t.descendingOrder]})}async getCommitteeInfo(t){return await this.transport.request({method:"suix_getCommitteeInfo",params:[t==null?void 0:t.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(t){return await this.transport.request({method:"suix_getEpochMetrics",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getAllEpochAddressMetrics(t){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[t==null?void 0:t.descendingOrder]})}async getEpochs(t){return await this.transport.request({method:"suix_getEpochs",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const t=await this.getCheckpoint({id:"0"}),n=lu(t.digest);return zc(n.slice(0,4))}async resolveNameServiceAddress(t){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[t.name]})}async resolveNameServiceNames({format:t="dot",...n}){const{nextCursor:i,hasNextPage:s,data:r}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[n.address,n.cursor,n.limit]});return{hasNextPage:s,nextCursor:i,data:r.map(o=>PC(o,t))}}async getProtocolConfig(t){return await this.transport.request({method:"sui_getProtocolConfig",params:[t==null?void 0:t.version]})}async waitForTransactionBlock({signal:t,timeout:n=60*1e3,pollInterval:i=2*1e3,...s}){const r=AbortSignal.timeout(n),o=new Promise((a,c)=>{r.addEventListener("abort",()=>c(r.reason))});for(o.catch(()=>{});!r.aborted;){t==null||t.throwIfAborted();try{return await this.getTransactionBlock(s)}catch{await Promise.race([new Promise(c=>setTimeout(c,i)),o])}}throw r.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}};const KI=async e=>new Promise(async(t,n)=>{try{if(e.link.includes("cetus")&&window.location.host!=="app.cetus.zone")throw new Error("403");const i=new HI({url:e.link}),s=new Date().getTime();if(await i.getRpcApiVersion()){const o=new Date().getTime();t({[e.name]:parseInt(String((o-s)/2))})}else n({[e.name]:0})}catch(i){console.log("0726###testRpc###err###",i),n({[e.name]:0})}}),Hb=new yT,N2=ff("index",{state:()=>({slippage:localStorage.getItem("cetus-slippage")||"0.5",importTokenList:JSON.parse(localStorage.getItem("importTokenList")||"[]")||[],importTokenListObj:{},isShowSuccess:!1,isShowRejected:!1,isShowWaiting:!1,isNotSupportMsafeError:!1,currentTransactionDesc:"",currentTransactionDescText:"",currentTransactionTxid:"",next_timestamp_ms:"",theme:"",chainName:"",positionNum:0,positionAmount:"--",poolAmount:"--",isRefresh:0,statsData:{},topPoolsList:[],topPoolsObj:{},newTopPoolsObj:{},topTokensList:[],topTokenObj:{},newtopTokenObj:{},lang:Hb.get("lang")||"en",addressLpTokens:{},addressHistTokens:{},transactionList:JSON.parse(localStorage.getItem("transactionList")||"[]")||[],newtransactionList:JSON.parse(localStorage.getItem("newtransactionList")||"[]")||[],newAddtransactionList:[],liquiditytransactionList:null,isSelect:"",openMore:!1,openSwitchChain:!1,openSwitchLang:!1,openExplorer:!1,openH5Icon:!1,isShowMore:!1,isShowNotifi:!1,isShowSetting:!1,isShowSettingH5:!1,isIdoOpenTerm:!1,isShowRouterModal:!1,isShowRpcH5:!1,isShowExplorerH5:!1,isShowHeaderMore:!1,isShowHeaderEarn:!1,isShowBuyCrypto:!1,isShowBuyCryptoConfirm:!1,isShowBuyCryptoSelect:!1,isShowLoadMore:!0,aptosRpcs:[],suiRpcs:[],filterCoinsObj:null,filterCreatePoolCoin:{"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS":"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS","0x2::sui::SUI":"0x2::sui::SUI","0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::cetus::CETUS":"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::cetus::CETUS"},suiRpcTimeDelayObj:null,currentCrypto:"",currentExplorer:"",isShowBuyCryptoKODO:!1,isShowHeaderTrade:!1,getStatsError:!1}),actions:{copy(e){if(navigator.clipboard)navigator.clipboard.writeText(e);else{const n=document.createElement("input");n.readOnly=!0,document.body.appendChild(n),n.value=e,n.select(),document.execCommand("Copy"),document.body.removeChild(n)}const{$notify:t}=vo();t.success({icon:Tt("svg",{class:{icon:!0},"aria-hidden":!0},[Tt("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:Tt("div",{class:"notification-title"},[Tt("span",{innerHTML:Mi.global.t("tips.copySuccess")},null)]),class:"ant-notification-copy"})},setImportTokenList(e){this.importTokenList=e,this.importTokenListObj=Object.fromEntries(e==null?void 0:e.map(t=>[t.address,t])),localStorage.setItem("importTokenList",JSON.stringify(e))},setOpenMore(e){this.openMore=e},setIsShowHeaderMore(e){this.isShowHeaderMore=e},setIsShowHeaderEarn(e){this.isShowHeaderEarn=e},setOpenSwitchChain(e){this.openSwitchChain=e},setOpenSwitchLang(e){this.openSwitchLang=e},setOpenH5Icon(e){this.openH5Icon=e},setIsShowMore(e){this.isShowMore=e},setSlippage(e){console.log(e,"slippage##"),this.slippage=e,localStorage.setItem("cetus-slippage",e)},setPositiomNum(){this.positionNum=this.positionNum+1},setTheme(e){console.log(e,"theme##"),this.theme=e,e=="default"?(this.chainName="Aptos",localStorage.setItem("chainName","Aptos")):e=="sui"?(this.chainName="Sui",localStorage.setItem("chainName","Sui")):e=="sui2"&&(this.chainName="Sui2",localStorage.setItem("chainName","Sui2"));const t=e=="default"?"Aptos":"Sui";this.currentExplorer=localStorage.getItem(`${t}-currentExplorerUrl`)||Ul[t][0].link},setIsShowSuccess(e){this.isShowSuccess=e},setIsNotSupportMsafeError(e){this.isNotSupportMsafeError=e},setIsShowRejected(e){this.isShowRejected=e},setIsShowWaiting(e){this.isShowWaiting=e},setTransactionDesc(e){this.currentTransactionDesc=e},setTransactionDescText(e){console.log(e,"====>status"),this.currentTransactionDescText=e},setTransactionTxid(e){this.currentTransactionTxid=e},async getStatsData(e,t){var n,i;try{let s=[],r=[];console.log("0216###getStatsData###this.chainName####",e);const{data:o}=e=="Aptos"?await fetch(`${Ue[e||"Aptos"].api}/v2/swap/count`).then(f=>f.json()):await fetch(`${Ue[e||"Sui"].api}/v2/sui/swap/count/v3`).then(f=>f.json()),a=e=="Aptos"?await fetch(`${Ue[e||"Aptos"].api}/v2/contract/price`).then(f=>f.json()):await fetch(`${Ue[e||"Sui"].api}/v2/sui/contract/price`).then(f=>f.json());r=Object.fromEntries(a.data.list.map(f=>[f.swap_account,f])),this.addressHistTokens=r,this.statsData=o||{};const c=[];let d=!1,u,l={};if(e=="Sui"&&(l=Ui("Sui").getSuiTokenObj()),o&&o.pools){for(let f=0;f<o.pools.length;f++){d=!1;const p=o.pools[f],m=p.rewarder_apr[0]?Number(p.rewarder_apr[0].substring(0,p.rewarder_apr[0].length-1)):0,_=p.rewarder_apr[1]?Number(p.rewarder_apr[1].substring(0,p.rewarder_apr[1].length-1)):0,x=p.rewarder_apr[2]?Number(p.rewarder_apr[2].substring(0,p.rewarder_apr[2].length-1)):0,C=m+_+x;p.stable_farming&&p.stable_farming.stable_rewarder.map(k=>{k.amount_second>0&&(d=!0)}),u=p.stable_farming&&p.stable_farming.apr*100,c.push({...p,pure_tvl_in_usd:e=="Aptos"?(p==null?void 0:p.pure_tvl_in_usd)||p.tvl_in_usd:p==null?void 0:p.pure_tvl_in_usd,aprNum:p?e=="Aptos"?String(Number(p.apr_7day.substring(0,p.apr_7day.length-1))+C):String(Number(p.apr_24h.substring(0,p.apr_24h.length-1))+C):"0",token_a_address:p.token_a_reserves=="SUI"?"0x2::sui::SUI":p.token_a_address,token_b_address:p.token_b_reserves=="SUI"?"0x2::sui::SUI":p.token_b_address,apr_7day:e=="Aptos"?p.apr_7day:p.apr_24h,fee_24_h:p.fee_24_h?p.fee_24_h:"",isStableFarming:d,stableFarmingApr:u,coin_a:{...l[p.token_a_address],logo_url:(n=l[p.token_a_address])==null?void 0:n.icon_url},coin_b:{...l[p.token_b_address],logo_url:(i=l[p.token_b_address])==null?void 0:i.icon_url}})}this.topPoolsList=c,console.log(" ~ file: index.ts:245 ~ getStatsData ~ this.topPoolsList:",this.topPoolsList),s=Object.fromEntries(o.pools.map(f=>[f.swap_account,{...f,apr_7day:e=="Aptos"?f.apr_7day:f.apr_24h}])),this.topPoolsObj=Object.fromEntries(o.pools.map(f=>[f.name,{...f,apr_7day:e=="Aptos"?f.apr_7day:f.apr_24h}])),this.newTopPoolsObj=Object.fromEntries(o.pools.map(f=>[f.swap_account,{...f,apr_7day:e=="Aptos"?f.apr_7day:f.apr_24h}]))}if(o&&o.tokens){const p=o.tokens.filter(m=>!t||!t[m.address]).map(m=>({...m,pure_tvl_in_usd:e==="Aptos"?(m==null?void 0:m.pure_tvl_in_usd)||(m==null?void 0:m.tvl_in_usd):m==null?void 0:m.pure_tvl_in_usd}));this.topTokensList=p,this.addressLpTokens=s,this.topTokenObj=Object.fromEntries(p.map(m=>[m.name,m])),this.newtopTokenObj=Object.fromEntries(p.map(m=>[m.address,m]))}this.getStatsError=!1}catch(s){console.log(" ~ file: index.ts:245 ~ getStatsData ~ error:",s),this.getStatsError=!0}},setLang(e){Hb.set("lang",e),this.lang=e},setTransactionList(e){console.log(this.newAddtransactionList,"====>newAddtransactionLists")},clearTransactionList(){const e=this.newAddtransactionList.filter(t=>t.chainName!==this.chainName);this.newAddtransactionList=e,localStorage.setItem("newAddtransactionList",e.length>0?JSON.stringify(e):"")},setIsSelect(e){console.log(e,"status===>"),this.isSelect=e},setIsShowNotifi(e){this.isShowNotifi=e},setIsShowSetting(e){this.isShowSetting=e},setIsShowSettingH5(e){this.isShowSettingH5=e},setIsIdoOpenTerm(e){this.isIdoOpenTerm=e},setIsShowRouterModal(e){this.isShowRouterModal=e},setIsOpenExplorer(e){this.openExplorer=e},setIsShowExplorerH5(e){this.isShowExplorerH5=e},setIsShowRpcH5(e){this.isShowRpcH5=e},setPositiomAmount(e){this.positionAmount=e},setPoolAmount(e){this.poolAmount=e},setisRefresh(){this.isRefresh=this.isRefresh+1},async getFrontConfig(){var e;try{let t;const n=localStorage.getItem("SuiFrontConfig"),i=new Date().getTime(),s=n?JSON.parse(n):null;if(s&&Number(s==null?void 0:s.expiration)>i&&(s!=null&&s.data)&&!ql(s==null?void 0:s.data))t=s==null?void 0:s.data;else{const r=await fetch(`${Ue.Sui.api}/v2/sui/front_config`).then(o=>o.json());if((r==null?void 0:r.code)===200){t=r==null?void 0:r.data;try{const o={expiration:new Date().getTime()+3e5,data:r==null?void 0:r.data};localStorage.setItem("SuiFrontConfig",JSON.stringify(o))}catch(o){console.log("getFrontConfig localStorage setItem Error: ",o)}}}if(t){this.aptosRpcs=(t==null?void 0:t.aptos_nodes)||[],this.suiRpcs=(t==null?void 0:t.sui_nodes)||[];const r=(t==null?void 0:t.filter_coins)||[],o=Object.fromEntries(r.map(a=>[a,a]));this.filterCoinsObj=o,((e=t==null?void 0:t.sui_nodes)==null?void 0:e.length)>0&&this.setRpcTimedelay(t==null?void 0:t.sui_nodes)}}catch(t){console.log("getFrontConfig###error###",t),this.filterCoinsObj={}}},async getTransactionList(e,t,n){this.isShowLoadMore=!0;let i;n==0?i=new Date().getTime():i=this.next_timestamp_ms,console.log(i,this.next_timestamp_ms,"this.next_timestamp_ms");try{const s=e=="Aptos"?await fetch(`${Ue[e||"Aptos"].api}/v2/aptos/pool/history?limit=10&offset=${n}&timestamp_ms=${i}&address=${t}`).then(r=>r.json()):await fetch(`${Ue[e||"Sui"].api}/v2/sui/pool/history?limit=10&offset=${n}&timestamp_ms=${i}&address=${t}`).then(r=>r.json());s!=null&&s.data?(s.data.list.length<10&&(this.isShowLoadMore=!1),n==0?(this.liquiditytransactionList=s.data.list,this.next_timestamp_ms=s.data.next_timestamp_ms):(this.next_timestamp_ms=s.data.next_timestamp_ms,this.liquiditytransactionList=this.liquiditytransactionList.concat(s.data.list))):(this.isShowLoadMore=!1,n==0&&(this.liquiditytransactionList=[])),console.log(s,this.isShowLoadMore,"2132131")}catch(s){this.isShowLoadMore=!1,this.liquiditytransactionList=[],console.log("getFrontConfig###error###",s)}},setClearLiquiditytransactionList(){this.liquiditytransactionList=null},async setRpcTimedelay(e){try{console.log("setRpcTimedelay###rpcList###",e);const t=[];e.forEach(i=>{i.name!=="Custom"&&t.push(KI(i))});const n=await Promise.allSettled(t);if(console.log("0726###setRpcTimedelay###res###",n),(n==null?void 0:n.length)>0){let i={};n.forEach(s=>{i={...i,...s==null?void 0:s.value}}),console.log("suiRpcTimeDelayObj###",i),this.suiRpcTimeDelayObj=i}}catch(t){console.log("setRpcTimedelay###err###",t)}},setIsShowBuyCrypto(e){this.isShowBuyCrypto=e},setIsShowBuyCryptoConfirm(e){this.isShowBuyCryptoConfirm=e},setIsShowBuyCryptoSelect(e){this.isShowBuyCryptoSelect=e},setIsShowBuyCryptoKODO(e){this.isShowBuyCryptoKODO=e},setCurrentCrypto(e){this.currentCrypto=e},setCurrentExplorer(e){this.currentExplorer=e,console.log(e,"value360##")},setIsShowHeaderTrade(e){this.isShowHeaderTrade=e}}});var Vl={},WI={get exports(){return Vl},set exports(e){Vl=e}},Xl={},GI={get exports(){return Xl},set exports(e){Xl=e}},Kb;function VI(){return Kb||(Kb=1,function(e,t){(function(n,i){e.exports=i()})(Na,function(){var n=n||function(i,s){var r;if(typeof window<"u"&&window.crypto&&(r=window.crypto),typeof self<"u"&&self.crypto&&(r=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(r=globalThis.crypto),!r&&typeof window<"u"&&window.msCrypto&&(r=window.msCrypto),!r&&typeof Na<"u"&&Na.crypto&&(r=Na.crypto),!r&&typeof Ay=="function")try{r=Wp}catch{}var o=function(){if(r){if(typeof r.getRandomValues=="function")try{return r.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof r.randomBytes=="function")try{return r.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function k(){}return function(T){var S;return k.prototype=T,S=new k,k.prototype=null,S}}(),c={},d=c.lib={},u=d.Base=function(){return{extend:function(k){var T=a(this);return k&&T.mixIn(k),(!T.hasOwnProperty("init")||this.init===T.init)&&(T.init=function(){T.$super.init.apply(this,arguments)}),T.init.prototype=T,T.$super=this,T},create:function(){var k=this.extend();return k.init.apply(k,arguments),k},init:function(){},mixIn:function(k){for(var T in k)k.hasOwnProperty(T)&&(this[T]=k[T]);k.hasOwnProperty("toString")&&(this.toString=k.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),l=d.WordArray=u.extend({init:function(k,T){k=this.words=k||[],T!=s?this.sigBytes=T:this.sigBytes=k.length*4},toString:function(k){return(k||p).stringify(this)},concat:function(k){var T=this.words,S=k.words,P=this.sigBytes,z=k.sigBytes;if(this.clamp(),P%4)for(var X=0;X<z;X++){var G=S[X>>>2]>>>24-X%4*8&255;T[P+X>>>2]|=G<<24-(P+X)%4*8}else for(var te=0;te<z;te+=4)T[P+te>>>2]=S[te>>>2];return this.sigBytes+=z,this},clamp:function(){var k=this.words,T=this.sigBytes;k[T>>>2]&=4294967295<<32-T%4*8,k.length=i.ceil(T/4)},clone:function(){var k=u.clone.call(this);return k.words=this.words.slice(0),k},random:function(k){for(var T=[],S=0;S<k;S+=4)T.push(o());return new l.init(T,k)}}),f=c.enc={},p=f.Hex={stringify:function(k){for(var T=k.words,S=k.sigBytes,P=[],z=0;z<S;z++){var X=T[z>>>2]>>>24-z%4*8&255;P.push((X>>>4).toString(16)),P.push((X&15).toString(16))}return P.join("")},parse:function(k){for(var T=k.length,S=[],P=0;P<T;P+=2)S[P>>>3]|=parseInt(k.substr(P,2),16)<<24-P%8*4;return new l.init(S,T/2)}},m=f.Latin1={stringify:function(k){for(var T=k.words,S=k.sigBytes,P=[],z=0;z<S;z++){var X=T[z>>>2]>>>24-z%4*8&255;P.push(String.fromCharCode(X))}return P.join("")},parse:function(k){for(var T=k.length,S=[],P=0;P<T;P++)S[P>>>2]|=(k.charCodeAt(P)&255)<<24-P%4*8;return new l.init(S,T)}},_=f.Utf8={stringify:function(k){try{return decodeURIComponent(escape(m.stringify(k)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(k){return m.parse(unescape(encodeURIComponent(k)))}},x=d.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(k){typeof k=="string"&&(k=_.parse(k)),this._data.concat(k),this._nDataBytes+=k.sigBytes},_process:function(k){var T,S=this._data,P=S.words,z=S.sigBytes,X=this.blockSize,G=X*4,te=z/G;k?te=i.ceil(te):te=i.max((te|0)-this._minBufferSize,0);var N=te*X,R=i.min(N*4,z);if(N){for(var M=0;M<N;M+=X)this._doProcessBlock(P,M);T=P.splice(0,N),S.sigBytes-=R}return new l.init(T,R)},clone:function(){var k=u.clone.call(this);return k._data=this._data.clone(),k},_minBufferSize:0});d.Hasher=x.extend({cfg:u.extend(),init:function(k){this.cfg=this.cfg.extend(k),this.reset()},reset:function(){x.reset.call(this),this._doReset()},update:function(k){return this._append(k),this._process(),this},finalize:function(k){k&&this._append(k);var T=this._doFinalize();return T},blockSize:16,_createHelper:function(k){return function(T,S){return new k.init(S).finalize(T)}},_createHmacHelper:function(k){return function(T,S){return new C.HMAC.init(k,S).finalize(T)}}});var C=c.algo={};return c}(Math);return n})}(GI)),Xl}var Wb;function XI(){return Wb||(Wb=1,function(e,t){(function(n,i){e.exports=i(VI())})(Na,function(n){return function(i){var s=n,r=s.lib,o=r.WordArray,a=r.Hasher,c=s.algo,d=[],u=[];(function(){function p(C){for(var k=i.sqrt(C),T=2;T<=k;T++)if(!(C%T))return!1;return!0}function m(C){return(C-(C|0))*4294967296|0}for(var _=2,x=0;x<64;)p(_)&&(x<8&&(d[x]=m(i.pow(_,1/2))),u[x]=m(i.pow(_,1/3)),x++),_++})();var l=[],f=c.SHA256=a.extend({_doReset:function(){this._hash=new o.init(d.slice(0))},_doProcessBlock:function(p,m){for(var _=this._hash.words,x=_[0],C=_[1],k=_[2],T=_[3],S=_[4],P=_[5],z=_[6],X=_[7],G=0;G<64;G++){if(G<16)l[G]=p[m+G]|0;else{var te=l[G-15],N=(te<<25|te>>>7)^(te<<14|te>>>18)^te>>>3,R=l[G-2],M=(R<<15|R>>>17)^(R<<13|R>>>19)^R>>>10;l[G]=N+l[G-7]+M+l[G-16]}var A=S&P^~S&z,h=x&C^x&k^C&k,y=(x<<30|x>>>2)^(x<<19|x>>>13)^(x<<10|x>>>22),E=(S<<26|S>>>6)^(S<<21|S>>>11)^(S<<7|S>>>25),U=X+E+A+u[G]+l[G],L=y+h;X=z,z=P,P=S,S=T+U|0,T=k,k=C,C=x,x=U+L|0}_[0]=_[0]+x|0,_[1]=_[1]+C|0,_[2]=_[2]+k|0,_[3]=_[3]+T|0,_[4]=_[4]+S|0,_[5]=_[5]+P|0,_[6]=_[6]+z|0,_[7]=_[7]+X|0},_doFinalize:function(){var p=this._data,m=p.words,_=this._nDataBytes*8,x=p.sigBytes*8;return m[x>>>5]|=128<<24-x%32,m[(x+64>>>9<<4)+14]=i.floor(_/4294967296),m[(x+64>>>9<<4)+15]=_,p.sigBytes=m.length*4,this._process(),this._hash},clone:function(){var p=a.clone.call(this);return p._hash=this._hash.clone(),p}});s.SHA256=a._createHelper(f),s.HmacSHA256=a._createHmacHelper(f)}(Math),n.SHA256})}(WI)),Vl}var JI=XI();const ZI=Hp(JI),YI=-443636;function Kj(e,t){const n=QI(e),i=(n-YI)%t;return i>t/2?n-i+t:n-i}const F2=new ie("1.0001");function QI(e){return e.log(F2).toDP(0,ie.ROUND_HALF_UP).toNumber()}function Wj(e){return F2.pow(e)}function dl(e,t,n){const i=Math.abs(e)%t;return e>0?i>t/2||n&&t<=2?e+t-i:e-i:i>t/2?e-t+i:e+i}function eB(){const e=Ue.Aptos.liquidswapDeployer,t={rpcUrl:localStorage.getItem("Aptos-currentRpclocal4")||Ue.Aptos.rpcUrl,fraphQLUrl:Ue.Aptos.fraphQLUrl,networkOptions:{nativeToken:"0x1::aptos_coin::AptosCoin",launchpad:{cetusLaunchpad:Ue.Aptos.Launchpad,crowdCoin:Ue.Aptos.LaunchpadCrowdCoin},simulationAccount:{pubkey:Ue.Aptos.accountPublicKey,address:Ue.Aptos.accountAddress},modules:{LiquidswapDeployer:e,ClmmIntegrate:Ue.Aptos.clmmIntegrate,FetcherDeployer:Ue.Aptos.fetcher,TokenDeployer:Ue.Aptos.TokenDeployer,IntegerMate:Ue.Aptos.IntegerMate}}},n=new pP(t),i=Kp(),s=N2(),r=xo(()=>s),o=xo(()=>r.value.currentExplorer),{$notify:a}=vo(),c=se=>{const{$notify:fe}=vo();fe.success({key:se.hash+"loading",icon:Tt("img",{class:{"notify-icon":!0,"loading-animate":!0},src:r.value.theme=="default"?"/image/img-loading@2x.png":"/sui-image/img-loading.png"}),message:Tt("div",{class:"notification-title"},[Tt("span",{innerHTML:se.title},null)]),description:Tt("div",{class:"notification-title"},[Tt("div",{class:"notification-text",innerHTML:Mi.global.t("newAdd.confirmingTransaction")},null),Tt("a",{href:Ml(o.value,"tx",se.hash),target:"_blank",innerHTML:Mi.global.t("common.viewTransaction")},null)]),duration:0,class:"ant-notification-copy ant-notification-swap"})},d=se=>{a.success({icon:Tt("svg",{class:{icon:!0},"aria-hidden":!0},[Tt("use",{"xlink:href":"#icon-icon-change1"})]),message:Tt("div",{class:"notification-title"},[Tt("span",{innerHTML:`${se.title} `+Mi.global.t("newAdd.success")},null)]),description:Tt("div",{class:"notification-title"},[Tt("div",{class:"notification-text",innerHTML:se.desc},null),Tt("a",{href:Ml(o.value,"tx",se.hash),target:"_blank",innerHTML:Mi.global.t("common.viewTransaction")},null)]),duration:4.5,class:"ant-notification-copy ant-notification-swap"})},u=se=>{a.error({icon:Tt("svg",{class:{icon:!0},"aria-hidden":!0},[Tt("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Tt("div",{class:"notification-title"},[Tt("span",{innerHTML:`${se} `+Mi.global.t("newAdd.failed")},null)]),description:Mi.global.t("newAdd.somethingWrong"),duration:4.5,class:"ant-notification-copy ant-notification-error"})},l=async(se,fe=!1)=>{const Re=await n.client.waitForTransactionWithResult(se.hash);if(console.log("watchTransaction###res###",Re),Re&&Re.success){a.close(se.hash+"loading"),console.log("watchTransaction#####success"),d(se);const Pe={walletAddress:i.address,chainName:"Aptos",...se,...Re,date:new Date().getTime()+6048e5};return s.setTransactionList(Pe),fe?{status:!0,nftInfo:Re.events.filter(Je=>Je.type.includes("CreateTokenDataEvent"))}:!0}else{if(Re&&!Re.success)return a.close(se.hash+"loading"),console.log("watchTransaction#####error"),u(se.title),!1;console.log("watchTransaction#####one more"),setTimeout(()=>l(se,fe),3e3)}},f=async(se,fe=!1)=>{const Re=await n.client.waitForTransactionWithResult(se.hash);if(console.log("watchTransaction###res###",Re),Re&&Re.success){console.log("watchTransaction#####success");const Pe={walletAddress:i.address,chainName:"Aptos",...se,...Re,date:new Date().getTime()+6048e5};s.setTransactionList(Pe)}},p=async se=>{try{const fe=await n.Resources.getCoinStores(se),Re=[];return fe.forEach(Pe=>{let Le="";Pe.coinAddress.includes("0x0000000000000000000000000000000000000000000000000000000000000001")?Le=Pe.coinAddress.replace(/0x0000000000000000000000000000000000000000000000000000000000000001/,"0x1"):Le=Pe.coinAddress,Re.push({...Pe,coinAddress:Le})}),Re}catch{return[]}},m=async se=>{try{i.setLoading(!0);const fe=await p(se),Re={};fe.forEach(Pe=>{const Le=Pe?Pe.coin.value:"0";Re[Pe.coinAddress]={...Pe,balance:Le}}),console.log("1212###assets####",Re),i.setAssets(Re),i.setLoading(!1)}catch(fe){console.log("getAccount##error###",fe),i.setLoading(!1),i.setAssets({})}},_=async()=>{const se={pubkey:Rs(Ue.Aptos.accountPublicKey),address:Rs(Ue.Aptos.accountAddress)},fe=await n.Token.getAllRegisteredTokenList(se);return console.log("0215####tokenList####",fe),fe},x=async(se,fe,Re)=>n.Resources.getPoolState(se,fe,Re),C=async se=>{const fe={pubkey:Rs(Ue.Aptos.accountPublicKey),address:Rs(Ue.Aptos.accountAddress)};return await n.Token.getOwnerWarpPoolList(Ue.Aptos.TokenDeployer,fe)},k=async se=>await n.Resources.getPool(se);return{setTransations:f,showTransitionPending:c,showTransitionSuccess:d,showTransitionError:u,watchTransaction:l,getAccount:m,getPoolState:x,getPools:async se=>await n.Resources.getPools(se),getPool:k,registerCoin:se=>({function:"0x1::managed_coin::register",type_arguments:[se],arguments:[],type:"entry_function_payload"}),estLiquidityAndcoinAmountFromOneAmounts:se=>{console.log("estLiquidityAndcoinAmountFromOneAmounts###params####",se);const{tokenA:fe,tokenB:Re,lowerTick:Pe,upperTick:Le,coinAmount:at,iscoinA:Je,roundUp:rt,slippage:Yt,curSqrtPrice:ht}=se,ct=fs.estLiquidityAndcoinAmountFromOneAmounts(Pe,Le,at,Je,rt,Yt,ht),Vt=fe.decimals,It=Re.decimals,{tokenMaxA:Ot,tokenMaxB:Sn,liquidityAmount:qt}=ct;return{tokenMaxAOrigin:Ot.toString(),tokenMaxBOrigin:Sn.toString(),tokenMaxA:En(Ot.toString(),Vt),tokenMaxB:En(Sn.toString(),It),liquidityAmount:qt}},getCoinAmountFromLiquidity:se=>{const{pool:fe,position:Re,roundUp:Pe}=se,Le=Number(Re.tick_lower_index),at=Number(Re.tick_upper_index),Je=tn.tickIndexToSqrtPriceX64(Le),rt=tn.tickIndexToSqrtPriceX64(at),Yt=fs.getCoinAmountFromLiquidity(new w(Re.liquidity),new w(fe.current_sqrt_price),Je,rt,Pe),ht=En(Yt.coinA.toString(),fe.coinA.decimals),ct=En(Yt.coinB.toString(),fe.coinB.decimals);return{coinaAmount:ht,coinbAmount:ct}},getAddLiquidityTransactionPayload:async se=>{const{pool:fe,amount:Re,fix_amount_a:Pe,roundUp:Le,tick_lower:at,tick_upper:Je,index:rt,slippage:Yt}=se;console.log(se,"===>params411");const ht=await k(fe.poolAddress),ct=Pe?si(Re,fe.token_a.decimals):si(Re,fe.token_b.decimals),Vt=tn.sqrtPriceX64ToTickIndex(new w(ht.current_sqrt_price));let It,Ot;if(Vt>=at&&Vt<=Je){const qt=fs.estLiquidityAndcoinAmountFromOneAmounts(at,Je,new w(ct.toString()),Pe,Le,Yt,new w(ht.current_sqrt_price));It=Pe?ct.toNumber():qt.tokenMaxA.toNumber(),Ot=Pe?qt.tokenMaxB.toNumber():ct.toNumber()}else Vt>Je?(It=0,Ot=ct.toNumber()):Vt<at&&(It=ct.toNumber(),Ot=0);return n.Position.createAddLiquidityTransactionPayload({pool:fe.poolAddress,coinTypeA:fe.token_a.address,coinTypeB:fe.token_b.address,amount_a:It,amount_b:Ot,fix_amount_a:Pe,tick_lower:at,tick_upper:Je,is_open:!rt,index:rt})},getRemoveLiquidityTransactionPayload:async se=>{const{pool:fe,coinTypeA:Re,coinTypeB:Pe,coinTypeC:Le,coinTypeD:at,coinTypeE:Je,position:rt,delta_liquidity:Yt,rewards_num:ht}=se;console.log("getRemoveLiquidityTransactionPayload####delta_liquidity#####",Yt.toString());const ct=await k(fe.poolAddress),Vt={...fe,...ct},It=Number(rt.tick_lower_index),Ot=Number(rt.tick_upper_index),Sn=tn.tickIndexToSqrtPriceX64(It),qt=tn.tickIndexToSqrtPriceX64(Ot),dn=fs.getCoinAmountFromLiquidity(Yt,new w(Vt.current_sqrt_price),Sn,qt,!0),Si=At(dn.coinA.toString()).mul(At(1-se.slippage/100)),un=At(dn.coinB.toString()).mul(At(1-se.slippage/100));return await n.Position.removeLiquidityTransactionPayload({pool:fe.poolAddress,coinTypeA:Re,coinTypeB:Pe,coinTypeC:Le,coinTypeD:at,coinTypeE:Je,delta_liquidity:Yt,min_amount_a:Number(Rn(Si.toString(),0)),min_amount_b:Number(Rn(un.toString(),0)),pos_index:se.position.index,is_close:!1,rewards_num:ht})},getCollectFeeTransactionPayload:async se=>{console.log("1130###getCollectFeeTransactionPayload###params",{pool:se.pool.poolAddress,coinTypeA:se.pool.token_a.address,coinTypeB:se.pool.token_b.address,pos_index:se.position.index});const fe=await n.Position.collectFeeTransactionPayload({pool:se.pool.poolAddress,coinTypeA:se.pool.token_a.address,coinTypeB:se.pool.token_b.address,pos_index:se.position.index});return console.log("1130###getCollectFeeTransactionPayload###result##",fe),fe},getPositionList:async(se,fe)=>{if(Ue.Aptos.network==="mainnet"){const Re={operationName:"AccountTokensData",variables:{owner_address:se,limit:1e5,offset:0},query:`query AccountTokensData($owner_address: String, $limit: Int, $offset: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $owner_address}, amount: {_gt: "0"}}
    limit: $limit
    offset: $offset
  ) {
    token_data_id_hash
 creator_address
 name
    collection_name
  table_type
    property_version
    amount
    __typename
  }
}`},Pe=await $fetch("https://indexer.mainnet.aptoslabs.com/v1/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Re)});console.log("0116###pools####",fe);const Le=Pe&&Pe.data&&Pe.data.current_token_ownerships||[];console.log("###list",Le);const at=[];for(let Je=0;Je<Le.length;Je++){const rt=Le[Je],Yt=fe[bP(rt.creator_address)];if(console.log(Yt,"##pool"),Yt){const ht=rt.name.split("-")[1],ct=Yt.positions_handle,Vt=await n.Resources.getPositionInfoByIndex(ct,ht);at.push({...Vt,tokenName:rt.name})}}return console.log("0221###aptos###getPositionList###",at),at}else{const Re=Object.values(fe);console.log(Re,"###poolList");const Pe=await n.Resources.getPositionList(se,Re);return console.log("0221###aptos###getPositionList###list###",Pe),Pe}},getPositionInfo:async(se,fe,Re,Pe="")=>({...await n.Resources.getPositionInfo(se,Re),tokenName:Re,collectionName:fe}),getSwapTransactionPayload:async se=>{const{pool:fe,a2b:Re,byAmountIn:Pe,amount:Le,slippage:at}=se,Je=fe.poolAddress||fe.address,rt=fe.token_a.decimals,Yt=fe.token_b.decimals,ht=await k(fe.address);let ct;Re&&Pe||!Re&&!Pe?ct=si(Le,rt):ct=si(Le,Yt);const Vt=await n.Swap.preswap({pool:ht,decimalsA:rt,decimalsB:Yt,a2b:Re,by_amount_in:Pe,amount:ct.toString()});console.log("1130###getSwapTransactionPayload###preSwapRes###",Vt),console.log("1130###getSwapTransactionPayload###preSwapRes.estimatedAmountOut###",Vt.estimatedAmountOut.toString()),console.log("1130###getSwapTransactionPayload###preSwapRes.estimatedAmountIn###",Vt.estimatedAmountIn.toString());const It=At(Vt.estimatedAmountOut.toString()),Ot=At(Vt.estimatedAmountIn.toString()),Sn=Pe?It.sub(It.mul(at)):Ot.add(Ot.mul(at));console.log("1130###amountLimit####",Sn.toString()),console.log("1130###swap##params###",{pool_addr:Je,coinTypeA:fe.token_a.address,coinTypeB:fe.token_b.address,a_to_b:Vt.aToB,by_amount_in:Vt.byAmountIn,amount:Vt.amount.toString(),amount_limit:Rn(Sn.toString(),0)||""});const qt=n.Swap.createSwapTransactionPayload({pool_addr:Je,coinTypeA:fe.token_a.address,coinTypeB:fe.token_b.address,a_to_b:Vt.aToB,by_amount_in:Vt.byAmountIn,amount:Vt.amount.toString(),amount_limit:Rn(Sn.toString(),0)||"",partner:""});return console.log("1130###swap##result###",qt),qt},getCoin:se=>({type:"entry_function_payload",function:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet",arguments:[],type_arguments:[]}),preSwap:async se=>{const{pool:fe,a2b:Re,byAmountIn:Pe,amount:Le}=se;console.log(se,"===>params");const at=fe.coinA.decimals,Je=fe.coinB.decimals;let rt=fe;fe.coinTypeA||(rt={...fe,poolAddress:fe.address,coinTypeA:fe.coinA.address,coinTypeB:fe.coinB.address});let Yt;Re&&Pe||!Re&&!Pe?Yt=si(Le,at):Yt=si(Le,Je);const ht=await n.Swap.preswap({pool:rt,decimalsA:at,decimalsB:Je,a2b:Re,by_amount_in:Pe,amount:Yt.toString()});return{...ht,estimatedAmountIn:To(En(ht.estimatedAmountIn.toString(),Re?at:Je),Re?at:Je),estimatedAmountOut:To(En(ht.estimatedAmountOut.toString(),Re?Je:at),Re?Je:at),priceImpactPct:Rn(ht.priceImpactPct,2)}},getTicks:async se=>{try{return{list:await n.Fetcher.fetchTicks({pool:se.poolAddress,coinTypeA:se.coinTypeA,coinTypeB:se.coinTypeB}),address:se.poolAddress}}catch(fe){console.log("getTicks Error###",fe)}},TickMath:tn,TickUtil:gp,ClmmPoolUtil:fs,getNearestTickByTick:dl,getTickDataFromUrlData:Q6,getCollectFeesQuote:async se=>{console.log(se,"params====>");const{pool:fe,position:Re,tickLowerData:Pe,tickUpperData:Le}=se,at=ME({clmmpool:fe,position:Re,tickLower:Pe,tickUpper:Le}),Je=En(at.feeOwedA.toString(),fe.token_a.decimals),rt=En(at.feeOwedB.toString(),fe.token_b.decimals);return console.log("0118###useApots###result.feeOwedA.toString()###",at.feeOwedA.toString()),console.log("0118###useApots###result.feeOwedB.toString()###",at.feeOwedB.toString()),console.log("0118###useApots###feeOwedA###",Je),console.log("0118###useApots###feeOwedB###",rt),{feeOwedA:Number(Je)>99999999999||Number(Je)<0?"0":Je,feeOwedB:Number(rt)>99999999999||Number(rt)<0?"0":rt}},mintCoin:se=>({function:`${Ue.Aptos.faucetObjectId}::coin::mint`,type_arguments:[`${Ue.Aptos.faucetObjectId}::coin::${se.name}`],arguments:[se.amount],type:"entry_function_payload"}),getNftHash:se=>{const fe=`${se.creator}::${se.collection}::${se.name}`;return ZI(fe).toString()},getCollectRewarderTransactionPayload:se=>n.Rewarder.collectPoolRewarderTransactionPayload(se),getPosRewardersAmount:async se=>{console.log(JSON.stringify(se),"=====>params792");const{poolAddress:fe,positionName:Re,tickLowerData:Pe,tickUpperData:Le}=se;return await n.Rewarder.posRewardersAmount(fe,Re,Pe,Le)},getTokenList:_,getTickDataByIndex:async(se,fe)=>(console.log(se,fe,"getTickDataByIndex"),await n.Resources.getTickDataByIndex(se,fe)),initSwapRouter:async se=>{n.Router.addPathProvider(se),await n.Router.setCoinList({pubkey:Rs(Ue.Aptos.accountPublicKey),address:Rs(Ue.Aptos.accountAddress)}),await n.Router.loadGraph()},getSwapRouter:async(se,fe)=>await n.Router.price(se,fe),getEstPositionAPRWithDelta:async(se,fe,Re,Pe,Le,at,Je,rt,Yt,ht,ct,Vt,It,Ot,Sn,qt,dn,Si,un,D,W,Y,ne,he)=>await RE(se,fe,Re,Pe,Le,at,Je,rt,Yt,ht,ct,Vt,It,Ot,Sn,qt,dn,Si,un,D,W,Y,ne,he),getPriceImpactPct:(se,fe,Re)=>{const Pe=tn.sqrtPriceX64ToPrice(new w(se.current_sqrt_price),se.coinA.decimals,se.coinB.decimals).toNumber(),Le=Re?Pe:1/Pe,at=Math.abs(Le-Number(fe))/Number(Le)*100;return Number(Rn(at,2))},getLpList:C,getEstPositionAPRWithMulti:async(se,fe,Re,Pe)=>await UE(se,fe,Re,Pe),getCreatPoolTransactionPayload:async se=>{const{coinTypeA:fe,coinTypeB:Re,tick_lower:Pe,tick_upper:Le,tick_spacing:at,initialize_sqrt_price:Je,max_amount_a:rt,max_amount_b:Yt,slippage:ht,fix_amount_a:ct,decimalsA:Vt,decimalsB:It,liquidityInput:Ot}=se;console.log(se,"params===>");const Sn=ct?si(rt,Vt):si(Yt,It);console.log(Sn,"===>coinAmount");const qt=tn.sqrtPriceX64ToTickIndex(new w(Je));let dn,Si;const un=tn.tickIndexToSqrtPriceX64(Pe),D=tn.tickIndexToSqrtPriceX64(Le);console.log(un,"===>minPriceX64"),console.log(D,"===>maxPriceX64");let W;return qt>Pe&&qt<Le?(W=fs.estLiquidityAndcoinAmountFromOneAmounts(Pe,Le,new w(Sn.toString()),ct,!0,ht,new w(Je)),dn=ct?Sn.toNumber():W.tokenMaxA.toNumber(),Si=ct?W.tokenMaxB.toNumber():Sn.toNumber()):qt>=Le?(W=Ha(un,D,new w(Sn.toString())),dn=new w(Ot.tokenMaxA*Math.pow(10,Vt)),Si=new w(Ot.tokenMaxB*Math.pow(10,It))):qt<=Pe&&(W=za(un,D,new w(Sn.toString())),dn=new w(Ot.tokenMaxA*Math.pow(10,Vt)),Si=new w(Ot.tokenMaxB*Math.pow(10,It))),console.log(W,"===>preAddResult"),await n.Pool.creatPoolTransactionPayload({coinTypeA:fe,coinTypeB:Re,tick_spacing:at,initialize_sqrt_price:new w(Je),uri:"",delta_liquidity:qt>Pe&&qt<Le?W.liquidityAmount:W,max_amount_a:dn,max_amount_b:Si,tick_lower:Pe,tick_upper:Le},!0)},getTokenListByCoinType:async()=>await n.Token.getTokenListByCoinType("",0,99999),getPoolImmutables:async()=>await n.Resources.getPoolImmutables(),estimateLiquidityForCoinA:za,estimateLiquidityForCoinB:Ha,getTokenBySymbol:async(se,fe)=>{if(!fe)return null;let Re=null;for(const Pe in se){const Le=se[Pe];if(Le.address.toUpperCase()===fe.toUpperCase()){Re=Le;break}}return Re},estCoinAmountsFromTotalAmount:se=>{const{lowerTick:fe,upperTick:Re,decimalsA:Pe,decimalsB:Le,curSqrtPrice:at,totalAmount:Je,tokenPriceA:rt,tokenPriceB:Yt}=se;console.log(JSON.stringify({...se,curSqrtPrice:at.toString()}),"params===>");const ht=fs.estCoinAmountsFromTotalAmount(fe,Re,at,Je,rt,Yt);console.log("coinAmounts: ",ht);const ct=Dl(ht.amountA.toFixed(Pe,ie.ROUND_UP).toString(),Pe),Vt=Dl(ht.amountB.toFixed(Le,ie.ROUND_UP).toString(),Le),It={coinA:new w(ct),coinB:new w(Vt)};return{amountA:En(ct.toString(),Pe),amountB:En(Vt.toString(),Le),tokenAmountsInfo:It}},getCreateAddLiquidityPayload:async se=>{const{curSqrtPrice:fe,tickLower:Re,tickUpper:Pe,tokenAmounts:Le,pool:at,slippage:Je}=se;console.log(JSON.stringify(se),"####getCreateAddLiquidityPayload 1593");const rt=fs.estimateLiquidityFromcoinAmounts(fe,Re,Pe,Le),Yt=new ie(Le.coinA.toString()).mul(1+Je),ht=new ie(Le.coinB.toString()).mul(1+Je),ct={coinTypeA:at.coinTypeA,coinTypeB:at.coinTypeB,tick_lower:Re,tick_upper:Pe,pool:at.address,delta_liquidity:rt,max_amount_a:ie.ceil(Yt).toString(),max_amount_b:ie.ceil(ht).toString(),is_open:!0,index:0};return console.log(JSON.stringify(ct),"==>addLiquidityPayloadParams"),await n.Position.createAddLiquidityTransactionPayload(ct)},calculateDepositRatioFixTokenA:(se,fe,Re)=>fs.calculateDepositRatioFixTokenA(se,fe,Re)}}const kh=e=>Th.encode(e),qd=e=>Th.decode(e);function hr(e){return Uint8Array.from(atob(e),t=>t.charCodeAt(0))}const E0=8192;function Bi(e){if(e.length<E0)return btoa(String.fromCharCode(...e));let t="";for(var n=0;n<e.length;n+=E0){const i=e.slice(n,n+E0);t+=String.fromCharCode(...i)}return btoa(t)}function z2(e){var s;const t=e.startsWith("0x")?e.slice(2):e,i=((s=(t.length%2===0?t:`0${t}}`).match(/.{2}/g))==null?void 0:s.map(r=>parseInt(r,16)))??[];return Uint8Array.from(i)}function Ld(e){return e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),"")}function Bm(e){let t=[],n=0;if(e===0)return[0];for(;e>0;)t[n]=e&127,(e>>=7)&&(t[n]|=128),n+=1;return t}function tB(e){let t=0,n=0,i=0;for(;;){let s=e[i];if(i+=1,t|=(s&127)<<n,!(s&128))break;n+=7}return{value:t,length:i}}class nB{constructor(t){this.bytePosition=0,this.dataView=new DataView(t.buffer)}shift(t){return this.bytePosition+=t,this}read8(){let t=this.dataView.getUint8(this.bytePosition);return this.shift(1),t}read16(){let t=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),t}read32(){let t=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),t}read64(){let t=this.read32(),i=this.read32().toString(16)+t.toString(16).padStart(8,"0");return BigInt("0x"+i).toString(10)}read128(){let t=BigInt(this.read64()),i=BigInt(this.read64()).toString(16)+t.toString(16).padStart(16,"0");return BigInt("0x"+i).toString(10)}read256(){let t=BigInt(this.read128()),i=BigInt(this.read128()).toString(16)+t.toString(16).padStart(32,"0");return BigInt("0x"+i).toString(10)}readBytes(t){let n=this.bytePosition+this.dataView.byteOffset,i=new Uint8Array(this.dataView.buffer,n,t);return this.shift(t),i}readULEB(){let t=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,t),{value:i,length:s}=tB(n);return this.shift(s),i}readVec(t){let n=this.readULEB(),i=[];for(let s=0;s<n;s++)i.push(t(this,s,n));return i}}function iB(e,t){switch(t){case"base58":return kh(e);case"base64":return Bi(e);case"hex":return Ld(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function sB(e,t=["<",">"]){const[n,i]=t,s=[];let r="",o=0;for(let a=0;a<e.length;a++){const c=e[a];if(c===n&&o++,c===i&&o--,o===0&&c===","){s.push(r.trim()),r="";continue}r+=c}return s.push(r.trim()),s}class rB{constructor({initialSize:t=1024,maxSize:n=1/0,allocateSize:i=1024}={}){this.bytePosition=0,this.size=t,this.maxSize=n,this.allocateSize=i,this.dataView=new DataView(new ArrayBuffer(t))}ensureSizeOrGrow(t){const n=this.bytePosition+t;if(n>this.size){const i=Math.min(this.maxSize,this.size+this.allocateSize);if(n>i)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${n}`);this.size=i;const s=new ArrayBuffer(this.size);new Uint8Array(s).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(s)}}shift(t){return this.bytePosition+=t,this}write8(t){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(t)),this.shift(1)}write16(t){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(t),!0),this.shift(2)}write32(t){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(t),!0),this.shift(4)}write64(t){return P0(BigInt(t),8).forEach(n=>this.write8(n)),this}write128(t){return P0(BigInt(t),16).forEach(n=>this.write8(n)),this}write256(t){return P0(BigInt(t),32).forEach(n=>this.write8(n)),this}writeULEB(t){return Bm(t).forEach(n=>this.write8(n)),this}writeVec(t,n){return this.writeULEB(t.length),Array.from(t).forEach((i,s)=>n(this,i,s,t.length)),this}*[Symbol.iterator](){for(let t=0;t<this.bytePosition;t++)yield this.dataView.getUint8(t);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(t){return iB(this.toBytes(),t)}}function P0(e,t){let n=new Uint8Array(t),i=0;for(;e>0;)n[i]=Number(e%BigInt(256)),e=e/BigInt(256),i+=1;return n}var H2=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Ds=(e,t,n)=>(H2(e,t,"read from private field"),n?n.call(e):t.get(e)),Jl=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Zl=(e,t,n,i)=>(H2(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),qa,ld,ul,mo;const K2=class{constructor(e){Jl(this,qa,void 0),Jl(this,ld,void 0),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),Zl(this,qa,e.write),Zl(this,ld,e.serialize??((t,n)=>{const i=new rB({initialSize:this.serializedSize(t)??void 0,...n});return Ds(this,qa).call(this,t,i),i.toBytes()})),this.validate=e.validate??(()=>{})}write(e,t){this.validate(e),Ds(this,qa).call(this,e,t)}serialize(e,t){return this.validate(e),new oB(this,Ds(this,ld).call(this,e,t))}parse(e){const t=new nB(e);return this.read(t)}fromHex(e){return this.parse(z2(e))}fromBase58(e){return this.parse(qd(e))}fromBase64(e){return this.parse(hr(e))}transform({name:e,input:t,output:n,validate:i}){return new K2({name:e??this.name,read:s=>n(this.read(s)),write:(s,r)=>Ds(this,qa).call(this,t(s),r),serializedSize:s=>this.serializedSize(t(s)),serialize:(s,r)=>Ds(this,ld).call(this,t(s),r),validate:s=>{i==null||i(s),this.validate(t(s))}})}};let Pr=K2;qa=new WeakMap;ld=new WeakMap;const W2=Symbol.for("@mysten/serialized-bcs");function G2(e){return!!e&&typeof e=="object"&&e[W2]===!0}class oB{constructor(t,n){Jl(this,ul,void 0),Jl(this,mo,void 0),Zl(this,ul,t),Zl(this,mo,n)}get[W2](){return!0}toBytes(){return Ds(this,mo)}toHex(){return Ld(Ds(this,mo))}toBase64(){return Bi(Ds(this,mo))}toBase58(){return kh(Ds(this,mo))}parse(){return Ds(this,ul).parse(Ds(this,mo))}}ul=new WeakMap;mo=new WeakMap;function Yl({size:e,...t}){return new Pr({...t,serializedSize:()=>e})}function C0({readMethod:e,writeMethod:t,...n}){return Yl({...n,read:i=>i[e](),write:(i,s)=>s[t](i),validate:i=>{var s;if(i<0||i>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${i}. Expected value in range 0-${n.maxValue}`);(s=n.validate)==null||s.call(n,i)}})}function I0({readMethod:e,writeMethod:t,...n}){return Yl({...n,read:i=>i[e](),write:(i,s)=>s[t](BigInt(i)),validate:i=>{var r;const s=BigInt(i);if(s<0||s>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${s}. Expected value in range 0-${n.maxValue}`);(r=n.validate)==null||r.call(n,s)}})}function aB({serialize:e,...t}){const n=new Pr({...t,serialize:e,write:(i,s)=>{for(const r of n.serialize(i).toBytes())s.write8(r)}});return n}function cB({toBytes:e,fromBytes:t,...n}){return new Pr({...n,read:i=>{const s=i.readULEB(),r=i.readBytes(s);return t(r)},write:(i,s)=>{const r=e(i);s.writeULEB(r.length);for(let o=0;o<r.length;o++)s.write8(r[o])},serialize:i=>{const s=e(i),r=Bm(s.length),o=new Uint8Array(r.length+s.length);return o.set(r,0),o.set(s,r.length),o},validate:i=>{var s;if(typeof i!="string")throw new TypeError(`Invalid ${n.name} value: ${i}. Expected string`);(s=n.validate)==null||s.call(n,i)}})}function dB(e){let t=null;function n(){return t||(t=e()),t}return new Pr({name:"lazy",read:i=>n().read(i),serializedSize:i=>n().serializedSize(i),write:(i,s)=>n().write(i,s),serialize:(i,s)=>n().serialize(i,s).toBytes()})}const V={u8(e){return C0({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...e})},u16(e){return C0({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...e})},u32(e){return C0({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e})},u64(e){return I0({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e})},u128(e){return I0({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e})},u256(e){return I0({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e})},bool(e){return Yl({name:"bool",size:1,read:t=>t.read8()===1,write:(t,n)=>n.write8(t?1:0),...e,validate:t=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,t),typeof t!="boolean")throw new TypeError(`Expected boolean, found ${typeof t}`)}})},uleb128(e){return aB({name:"uleb128",read:t=>t.readULEB(),serialize:t=>Uint8Array.from(Bm(t)),...e})},bytes(e,t){return Yl({name:`bytes[${e}]`,size:e,read:n=>n.readBytes(e),write:(n,i)=>{for(let s=0;s<e;s++)i.write8(n[s]??0)},...t,validate:n=>{var i;if((i=t==null?void 0:t.validate)==null||i.call(t,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e)throw new TypeError(`Expected array of length ${e}, found ${n.length}`)}})},string(e){return cB({name:"string",toBytes:t=>new TextEncoder().encode(t),fromBytes:t=>new TextDecoder().decode(t),...e})},fixedArray(e,t,n){return new Pr({name:`${t.name}[${e}]`,read:i=>{const s=new Array(e);for(let r=0;r<e;r++)s[r]=t.read(i);return s},write:(i,s)=>{for(const r of i)t.write(r,s)},...n,validate:i=>{var s;if((s=n==null?void 0:n.validate)==null||s.call(n,i),!i||typeof i!="object"||!("length"in i))throw new TypeError(`Expected array, found ${typeof i}`);if(i.length!==e)throw new TypeError(`Expected array of length ${e}, found ${i.length}`)}})},option(e){return V.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:t=>t==null?{None:!0}:{Some:t},output:t=>t.$kind==="Some"?t.Some:null})},vector(e,t){return new Pr({name:`vector<${e.name}>`,read:n=>{const i=n.readULEB(),s=new Array(i);for(let r=0;r<i;r++)s[r]=e.read(n);return s},write:(n,i)=>{i.writeULEB(n.length);for(const s of n)e.write(s,i)},...t,validate:n=>{var i;if((i=t==null?void 0:t.validate)==null||i.call(t,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`)}})},tuple(e,t){return new Pr({name:`(${e.map(n=>n.name).join(", ")})`,serializedSize:n=>{let i=0;for(let s=0;s<e.length;s++){const r=e[s].serializedSize(n[s]);if(r==null)return null;i+=r}return i},read:n=>{const i=[];for(const s of e)i.push(s.read(n));return i},write:(n,i)=>{for(let s=0;s<e.length;s++)e[s].write(n[s],i)},...t,validate:n=>{var i;if((i=t==null?void 0:t.validate)==null||i.call(t,n),!Array.isArray(n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${n.length}`)}})},struct(e,t,n){const i=Object.entries(t);return new Pr({name:e,serializedSize:s=>{let r=0;for(const[o,a]of i){const c=a.serializedSize(s[o]);if(c==null)return null;r+=c}return r},read:s=>{const r={};for(const[o,a]of i)r[o]=a.read(s);return r},write:(s,r)=>{for(const[o,a]of i)a.write(s[o],r)},...n,validate:s=>{var r;if((r=n==null?void 0:n.validate)==null||r.call(n,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`)}})},enum(e,t,n){const i=Object.entries(t);return new Pr({name:e,read:s=>{const r=s.readULEB(),[o,a]=i[r];return{[o]:(a==null?void 0:a.read(s))??!0,$kind:o}},write:(s,r)=>{const[o,a]=Object.entries(s).filter(([c])=>Object.hasOwn(t,c))[0];for(let c=0;c<i.length;c++){const[d,u]=i[c];if(d===o){r.writeULEB(c),u==null||u.write(a,r);return}}},...n,validate:s=>{var a;if((a=n==null?void 0:n.validate)==null||a.call(n,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`);const r=Object.keys(s).filter(c=>s[c]!==void 0&&Object.hasOwn(t,c));if(r.length!==1)throw new TypeError(`Expected object with one key, but found ${r.length} for type ${e}}`);const[o]=r;if(!Object.hasOwn(t,o))throw new TypeError(`Invalid enum variant ${o}`)}})},map(e,t){return V.vector(V.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:n=>[...n.entries()],output:n=>{const i=new Map;for(const[s,r]of n)i.set(s,r);return i}})},lazy(e){return dB(e)}},uB=32;function Gb(e){try{return qd(e).length===uB}catch{return!1}}const Om=32;function or(e){return lB(e)&&fB(e)===Om}function fd(e){return or(e)}function zt(e,t=!1){let n=e.toLowerCase();return!t&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(Om*2,"0")}`}function gn(e,t=!1){return zt(e,t)}function lB(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function fB(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}const hB=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,pB=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i;function gB(e,t="at"){const n=e.toLowerCase();let i;if(n.includes("@")){if(!hB.test(n))throw new Error(`Invalid SuiNS name ${e}`);const[s,r]=n.split("@");i=[...s?s.split("."):[],r]}else{if(!pB.test(n))throw new Error(`Invalid SuiNS name ${e}`);i=n.split(".").slice(0,-1)}return t==="dot"?`${i.join(".")}.sui`:`${i.slice(0,-1).join(".")}@${i[i.length-1]}`}BigInt(1e9);const mB="0x1",V2="0x2";gn("0x6");const _B=`${V2}::sui::SUI`;gn("0x5");const bB=/^vector<(.+)>$/,yB=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class cr{static parseFromStr(t,n=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};const i=t.match(bB);if(i)return{vector:cr.parseFromStr(i[1],n)};const s=t.match(yB);if(s)return{struct:{address:n?zt(s[1]):s[1],module:s[2],name:s[3],typeParams:s[5]===void 0?[]:cr.parseStructTypeArgs(s[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,n=!1){return sB(t).map(i=>cr.parseFromStr(i,n))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${cr.tagToString(t.vector)}>`;if("struct"in t){const n=t.struct,i=n.typeParams.map(cr.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${i?`<${i}>`:""}`}throw new Error("Invalid TypeTag")}}function wB(e){return V.u64({name:"unsafe_u64",...e}).transform({input:t=>t,output:t=>Number(t)})}function vB(e){return V.enum("Option",{None:null,Some:e})}const Vn=V.bytes(Om).transform({validate:e=>{const t=typeof e=="string"?e:Ld(e);if(!t||!or(zt(t)))throw new Error(`Invalid Sui address ${t}`)},input:e=>typeof e=="string"?z2(zt(e)):e,output:e=>zt(Ld(e))}),Fs=V.vector(V.u8()).transform({name:"ObjectDigest",input:e=>qd(e),output:e=>kh(new Uint8Array(e)),validate:e=>{if(qd(e).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),hs=V.struct("SuiObjectRef",{objectId:Vn,version:V.u64(),digest:Fs}),X2=V.struct("SharedObjectRef",{objectId:Vn,initialSharedVersion:V.u64(),mutable:V.bool()}),J2=V.enum("ObjectArg",{ImmOrOwnedObject:hs,SharedObject:X2,Receiving:hs}),Z2=V.enum("CallArg",{Pure:V.struct("Pure",{bytes:V.vector(V.u8()).transform({input:e=>typeof e=="string"?hr(e):e,output:e=>Bi(new Uint8Array(e))})}),Object:J2}),$m=V.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:V.lazy(()=>$m),struct:V.lazy(()=>ix),u16:null,u32:null,u256:null}),Rm=$m.transform({input:e=>typeof e=="string"?cr.parseFromStr(e,!0):e,output:e=>cr.tagToString(e)}),tr=V.enum("Argument",{GasCoin:null,Input:V.u16(),Result:V.u16(),NestedResult:V.tuple([V.u16(),V.u16()])}),Y2=V.struct("ProgrammableMoveCall",{package:Vn,module:V.string(),function:V.string(),typeArguments:V.vector(Rm),arguments:V.vector(tr)}),Q2=V.enum("Command",{MoveCall:Y2,TransferObjects:V.struct("TransferObjects",{objects:V.vector(tr),address:tr}),SplitCoins:V.struct("SplitCoins",{coin:tr,amounts:V.vector(tr)}),MergeCoins:V.struct("MergeCoins",{destination:tr,sources:V.vector(tr)}),Publish:V.struct("Publish",{modules:V.vector(V.vector(V.u8()).transform({input:e=>typeof e=="string"?hr(e):e,output:e=>Bi(new Uint8Array(e))})),dependencies:V.vector(Vn)}),MakeMoveVec:V.struct("MakeMoveVec",{type:vB(Rm).transform({input:e=>e===null?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:V.vector(tr)}),Upgrade:V.struct("Upgrade",{modules:V.vector(V.vector(V.u8()).transform({input:e=>typeof e=="string"?hr(e):e,output:e=>Bi(new Uint8Array(e))})),dependencies:V.vector(Vn),package:Vn,ticket:tr})}),ex=V.struct("ProgrammableTransaction",{inputs:V.vector(Z2),commands:V.vector(Q2)}),tx=V.enum("TransactionKind",{ProgrammableTransaction:ex,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),nx=V.enum("TransactionExpiration",{None:null,Epoch:wB()}),ix=V.struct("StructTag",{address:Vn,module:V.string(),name:V.string(),typeParams:V.vector($m)}),sx=V.struct("GasData",{payment:V.vector(hs),owner:Vn,price:V.u64(),budget:V.u64()}),rx=V.struct("TransactionDataV1",{kind:tx,sender:Vn,gasData:sx,expiration:nx}),ox=V.enum("TransactionData",{V1:rx}),ax=V.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),cx=V.enum("IntentVersion",{V0:null}),dx=V.enum("AppId",{Sui:null}),ux=V.struct("Intent",{scope:ax,version:cx,appId:dx});function lx(e){return V.struct(`IntentMessage<${e.name}>`,{intent:ux,value:e})}const fx=V.enum("CompressedSignature",{ED25519:V.fixedArray(64,V.u8()),Secp256k1:V.fixedArray(64,V.u8()),Secp256r1:V.fixedArray(64,V.u8()),ZkLogin:V.vector(V.u8())}),hx=V.enum("PublicKey",{ED25519:V.fixedArray(32,V.u8()),Secp256k1:V.fixedArray(33,V.u8()),Secp256r1:V.fixedArray(33,V.u8()),ZkLogin:V.vector(V.u8())}),px=V.struct("MultiSigPkMap",{pubKey:hx,weight:V.u8()}),gx=V.struct("MultiSigPublicKey",{pk_map:V.vector(px),threshold:V.u16()}),xB=V.struct("MultiSig",{sigs:V.vector(fx),bitmap:V.u16(),multisig_pk:gx}),TB=V.vector(V.u8()).transform({input:e=>typeof e=="string"?hr(e):e,output:e=>Bi(new Uint8Array(e))}),mx=V.struct("SenderSignedTransaction",{intentMessage:lx(ox),txSignatures:V.vector(TB)}),AB=V.vector(mx,{name:"SenderSignedData"}),kB=V.enum("PackageUpgradeError",{UnableToFetchPackage:V.struct("UnableToFetchPackage",{packageId:Vn}),NotAPackage:V.struct("NotAPackage",{objectId:Vn}),IncompatibleUpgrade:null,DigestDoesNotMatch:V.struct("DigestDoesNotMatch",{digest:V.vector(V.u8())}),UnknownUpgradePolicy:V.struct("UnknownUpgradePolicy",{policy:V.u8()}),PackageIDDoesNotMatch:V.struct("PackageIDDoesNotMatch",{packageId:Vn,ticketId:Vn})}),SB=V.struct("ModuleId",{address:Vn,name:V.string()}),Vb=V.struct("MoveLocation",{module:SB,function:V.u16(),instruction:V.u16(),functionName:V.option(V.string())}),EB=V.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:V.struct("IndexOutOfBounds",{idx:V.u16()}),SecondaryIndexOutOfBounds:V.struct("SecondaryIndexOutOfBounds",{resultIdx:V.u16(),secondaryIdx:V.u16()}),InvalidResultArity:V.struct("InvalidResultArity",{resultIdx:V.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),PB=V.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),CB=V.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:V.struct("MoveObjectTooBig",{objectSize:V.u64(),maxObjectSize:V.u64()}),MovePackageTooBig:V.struct("MovePackageTooBig",{objectSize:V.u64(),maxObjectSize:V.u64()}),CircularObjectOwnership:V.struct("CircularObjectOwnership",{object:Vn}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:V.option(Vb),MoveAbort:V.tuple([Vb,V.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:V.struct("CommandArgumentError",{argIdx:V.u16(),kind:EB}),TypeArgumentError:V.struct("TypeArgumentError",{argumentIdx:V.u16(),kind:PB}),UnusedValueWithoutDrop:V.struct("UnusedValueWithoutDrop",{resultIdx:V.u16(),secondaryIdx:V.u16()}),InvalidPublicFunctionReturnType:V.struct("InvalidPublicFunctionReturnType",{idx:V.u16()}),InvalidTransferObject:null,EffectsTooLarge:V.struct("EffectsTooLarge",{currentSize:V.u64(),maxSize:V.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:V.struct("PackageUpgradeError",{upgradeError:kB}),WrittenObjectsTooLarge:V.struct("WrittenObjectsTooLarge",{currentSize:V.u64(),maxSize:V.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null}),_x=V.enum("ExecutionStatus",{Success:null,Failed:V.struct("ExecutionFailed",{error:CB,command:V.option(V.u64())})}),bx=V.struct("GasCostSummary",{computationCost:V.u64(),storageCost:V.u64(),storageRebate:V.u64(),nonRefundableStorageFee:V.u64()}),Ka=V.enum("Owner",{AddressOwner:Vn,ObjectOwner:Vn,Shared:V.struct("Shared",{initialSharedVersion:V.u64()}),Immutable:null}),IB=V.struct("TransactionEffectsV1",{status:_x,executedEpoch:V.u64(),gasUsed:bx,modifiedAtVersions:V.vector(V.tuple([Vn,V.u64()])),sharedObjects:V.vector(hs),transactionDigest:Fs,created:V.vector(V.tuple([hs,Ka])),mutated:V.vector(V.tuple([hs,Ka])),unwrapped:V.vector(V.tuple([hs,Ka])),deleted:V.vector(hs),unwrappedThenDeleted:V.vector(hs),wrapped:V.vector(hs),gasObject:V.tuple([hs,Ka]),eventsDigest:V.option(Fs),dependencies:V.vector(Fs)}),Um=V.tuple([V.u64(),Fs]),BB=V.enum("ObjectIn",{NotExist:null,Exist:V.tuple([Um,Ka])}),OB=V.enum("ObjectOut",{NotExist:null,ObjectWrite:V.tuple([Fs,Ka]),PackageWrite:Um}),$B=V.enum("IDOperation",{None:null,Created:null,Deleted:null}),RB=V.struct("EffectsObjectChange",{inputState:BB,outputState:OB,idOperation:$B}),UB=V.enum("UnchangedSharedKind",{ReadOnlyRoot:Um,MutateDeleted:V.u64(),ReadDeleted:V.u64()}),MB=V.struct("TransactionEffectsV2",{status:_x,executedEpoch:V.u64(),gasUsed:bx,transactionDigest:Fs,gasObjectIndex:V.option(V.u32()),eventsDigest:V.option(Fs),dependencies:V.vector(Fs),lamportVersion:V.u64(),changedObjects:V.vector(V.tuple([Vn,RB])),unchangedSharedObjects:V.vector(V.tuple([Vn,UB])),auxDataDigest:V.option(Fs)}),DB=V.enum("TransactionEffects",{V1:IB,V2:MB}),hn={...V,U8:V.u8(),U16:V.u16(),U32:V.u32(),U64:V.u64(),U128:V.u128(),U256:V.u256(),ULEB128:V.uleb128(),Bool:V.bool(),String:V.string(),Address:Vn,AppId:dx,Argument:tr,CallArg:Z2,CompressedSignature:fx,GasData:sx,Intent:ux,IntentMessage:lx,IntentScope:ax,IntentVersion:cx,MultiSig:xB,MultiSigPkMap:px,MultiSigPublicKey:gx,ObjectArg:J2,ObjectDigest:Fs,ProgrammableMoveCall:Y2,ProgrammableTransaction:ex,PublicKey:hx,SenderSignedData:AB,SenderSignedTransaction:mx,SharedObjectRef:X2,StructTag:ix,SuiObjectRef:hs,Command:Q2,TransactionData:ox,TransactionDataV1:rx,TransactionExpiration:nx,TransactionKind:tx,TypeTag:Rm,TransactionEffects:DB},jB="object",qB="ID",LB="ascii",NB="String",FB="string",zB="String",HB="option",KB="Option";function WB(e){const t=typeof e.body=="object"&&"datatype"in e.body?e.body.datatype:null;return!!t&&zt(t.package)===zt("0x2")&&t.module==="tx_context"&&t.type==="TxContext"}function Pp(e){if(typeof e=="string")switch(e){case"address":return hn.Address;case"bool":return hn.Bool;case"u8":return hn.U8;case"u16":return hn.U16;case"u32":return hn.U32;case"u64":return hn.U64;case"u128":return hn.U128;case"u256":return hn.U256;default:throw new Error(`Unknown type signature ${e}`)}if("vector"in e){if(e.vector==="u8")return hn.vector(hn.U8).transform({input:n=>typeof n=="string"?new TextEncoder().encode(n):n,output:n=>n});const t=Pp(e.vector);return t?hn.vector(t):null}if("datatype"in e){const t=zt(e.datatype.package);if(t===zt(mB)){if(e.datatype.module===LB&&e.datatype.type===NB||e.datatype.module===FB&&e.datatype.type===zB)return hn.String;if(e.datatype.module===HB&&e.datatype.type===KB){const n=Pp(e.datatype.typeParameters[0]);return n?hn.vector(n):null}}if(t===zt(V2)&&e.datatype.module===jB&&e.datatype.type===qB)return hn.Address}return null}function GB(e){return typeof e=="object"&&"Reference"in e?{ref:"&",body:wd(e.Reference)}:typeof e=="object"&&"MutableReference"in e?{ref:"&mut",body:wd(e.MutableReference)}:{ref:null,body:wd(e)}}function wd(e){if(typeof e=="string")switch(e){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${e}`)}if("Vector"in e)return{vector:wd(e.Vector)};if("Struct"in e)return{datatype:{package:e.Struct.address,module:e.Struct.module,type:e.Struct.name,typeParameters:e.Struct.typeArguments.map(wd)}};if("TypeParameter"in e)return{typeParameter:e.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(e)}`)}function VB(e){return{$kind:"Pure",Pure:{bytes:e instanceof Uint8Array?Bi(e):e.toBase64()}}}const $r={Pure:VB,ObjectRef({objectId:e,digest:t,version:n}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:t,version:n,objectId:zt(e)}}}},SharedObjectRef({objectId:e,mutable:t,initialSharedVersion:n}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:t,initialSharedVersion:n,objectId:zt(e)}}}},ReceivingRef({objectId:e,digest:t,version:n}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:t,version:n,objectId:zt(e)}}}}};var yx=class extends Error{constructor(t){super(t[0].message);We(this,"issues");this.name="ValiError",this.issues=t}};function wx(e){return typeof e=="function"?e():e}function Mm(e,t,n,i,s){return{issues:[{validation:e,message:wx(t),input:n,requirement:i,path:s}]}}function Dm(e){return{output:e}}function Vs(e,t){return Array.isArray(e)?[void 0,e]:[e,t]}function _r(e,t,n){return{typed:e,output:t,issues:n}}function vx(e,t,n){if(!e||typeof e=="object"&&!Array.isArray(e)){const[r,o]=Vs(t,n);return[e,r,o]}const[i,s]=Vs(e,t);return[void 0,i,s]}function XB(e,t){return{reason:e==null?void 0:e.reason,validation:t.validation,origin:(e==null?void 0:e.origin)||"value",message:t.message,input:t.input,requirement:t==null?void 0:t.requirement,path:t.path,abortEarly:e==null?void 0:e.abortEarly,abortPipeEarly:e==null?void 0:e.abortPipeEarly,skipPipe:e==null?void 0:e.skipPipe}}function JB(e,t){return{reason:t,origin:e==null?void 0:e.origin,abortEarly:e==null?void 0:e.abortEarly,abortPipeEarly:e==null?void 0:e.abortPipeEarly,skipPipe:e==null?void 0:e.skipPipe}}function Es(e,t,n,i,s){let r,o=e;if(t!=null&&t.length&&!(n!=null&&n.skipPipe))for(const a of t){const c=a._parse(o);if(c.issues){r=r||JB(n,i);for(const d of c.issues){const u=XB(r,d);s?s.push(u):s=[u]}if(r.abortEarly||r.abortPipeEarly)break}else o=c.output}return _r(!0,o,s)}function Ss(e,t,n,i,s,r,o){return{typed:!1,output:s,issues:[{reason:t,validation:n,origin:(e==null?void 0:e.origin)||"value",message:wx(i),input:s,path:r,issues:o,abortEarly:e==null?void 0:e.abortEarly,abortPipeEarly:e==null?void 0:e.abortPipeEarly,skipPipe:e==null?void 0:e.skipPipe}]}}function jm(e){return typeof e.default=="function"?e.default():e.default}function Cp(e,t,n){return!e._parse(t,{abortEarly:!0,skipPipe:n==null?void 0:n.skipPipe}).issues}function _n(e,t,n){const[i="Invalid type",s]=Vs(t,n);return{type:"array",async:!1,item:e,message:i,pipe:s,_parse(r,o){if(!Array.isArray(r))return Ss(o,"type","array",this.message,r);let a=!0,c;const d=[];for(let u=0;u<r.length;u++){const l=r[u],f=this.item._parse(l,o);if(f.issues){const p={type:"array",input:r,key:u,value:l};for(const m of f.issues)m.path?m.path.unshift(p):m.path=[p],c==null||c.push(m);if(c||(c=f.issues),o!=null&&o.abortEarly){a=!1;break}}f.typed||(a=!1),d.push(f.output)}return a?Es(d,this.pipe,o,"array",c):_r(!1,d,c)}}}function ZB(e,t){const[n="Invalid type",i]=Vs(e,t);return{type:"bigint",async:!1,message:n,pipe:i,_parse(s,r){return typeof s!="bigint"?Ss(r,"type","bigint",this.message,s):Es(s,this.pipe,r,"bigint")}}}function qm(e,t){const[n="Invalid type",i]=Vs(e,t);return{type:"boolean",async:!1,message:n,pipe:i,_parse(s,r){return typeof s!="boolean"?Ss(r,"type","boolean",this.message,s):Es(s,this.pipe,r,"boolean")}}}function ci(e,t="Invalid type"){return{type:"literal",async:!1,literal:e,message:t,_parse(n,i){return n!==this.literal?Ss(i,"type","literal",this.message,n):_r(!0,n)}}}function fi(e,t){return{type:"nullable",async:!1,wrapped:e,default:t,_parse(n,i){if(n===null){const s=jm(this);if(s===void 0)return _r(!0,n);n=s}return this.wrapped._parse(n,i)}}}function Ql(e,t){return{type:"nullish",async:!1,wrapped:e,default:t,_parse(n,i){if(n==null){const s=jm(this);if(s===void 0)return _r(!0,n);n=s}return this.wrapped._parse(n,i)}}}function ts(e,t){const[n="Invalid type",i]=Vs(e,t);return{type:"number",async:!1,message:n,pipe:i,_parse(s,r){return typeof s!="number"||isNaN(s)?Ss(r,"type","number",this.message,s):Es(s,this.pipe,r,"number")}}}function jt(e,t,n,i){const[s,r="Invalid type",o]=vx(t,n,i);let a;return{type:"object",async:!1,entries:e,rest:s,message:r,pipe:o,_parse(c,d){if(!c||typeof c!="object")return Ss(d,"type","object",this.message,c);a=a||Object.entries(this.entries);let u=!0,l;const f={};for(const[p,m]of a){const _=c[p],x=m._parse(_,d);if(x.issues){const C={type:"object",input:c,key:p,value:_};for(const k of x.issues)k.path?k.path.unshift(C):k.path=[C],l==null||l.push(k);if(l||(l=x.issues),d!=null&&d.abortEarly){u=!1;break}}x.typed||(u=!1),(x.output!==void 0||p in c)&&(f[p]=x.output)}if(this.rest&&!(d!=null&&d.abortEarly&&l)){for(const p in c)if(!(p in this.entries)){const m=c[p],_=this.rest._parse(m,d);if(_.issues){const x={type:"object",input:c,key:p,value:m};for(const C of _.issues)C.path?C.path.unshift(x):C.path=[x],l==null||l.push(C);if(l||(l=_.issues),d!=null&&d.abortEarly){u=!1;break}}_.typed||(u=!1),f[p]=_.output}}return u?Es(f,this.pipe,d,"object",l):_r(!1,f,l)}}}function Rr(e,t){return{type:"optional",async:!1,wrapped:e,default:t,_parse(n,i){if(n===void 0){const s=jm(this);if(s===void 0)return _r(!0,n);n=s}return this.wrapped._parse(n,i)}}}function kn(e,t){const[n="Invalid type",i]=Vs(e,t);return{type:"string",async:!1,message:n,pipe:i,_parse(s,r){return typeof s!="string"?Ss(r,"type","string",this.message,s):Es(s,this.pipe,r,"string")}}}function YB(e,t,n,i){if(typeof t=="object"&&!Array.isArray(t)){const[o,a]=Vs(n,i);return[e,t,o,a]}const[s,r]=Vs(t,n);return[kn(),e,s,r]}var QB=["__proto__","prototype","constructor"];function ef(e,t,n,i){const[s,r,o="Invalid type",a]=YB(e,t,n,i);return{type:"record",async:!1,key:s,value:r,message:o,pipe:a,_parse(c,d){if(!c||typeof c!="object")return Ss(d,"type","record",this.message,c);let u=!0,l;const f={};for(const[p,m]of Object.entries(c))if(!QB.includes(p)){let _;const x=this.key._parse(p,{origin:"key",abortEarly:d==null?void 0:d.abortEarly,abortPipeEarly:d==null?void 0:d.abortPipeEarly,skipPipe:d==null?void 0:d.skipPipe});if(x.issues){_={type:"record",input:c,key:p,value:m};for(const k of x.issues)k.path=[_],l==null||l.push(k);if(l||(l=x.issues),d!=null&&d.abortEarly){u=!1;break}}const C=this.value._parse(m,d);if(C.issues){_=_||{type:"record",input:c,key:p,value:m};for(const k of C.issues)k.path?k.path.unshift(_):k.path=[_],l==null||l.push(k);if(l||(l=C.issues),d!=null&&d.abortEarly){u=!1;break}}(!x.typed||!C.typed)&&(u=!1),x.typed&&(f[x.output]=C.output)}return u?Es(f,this.pipe,d,"record",l):_r(!1,f,l)}}}function Xb(e){return{type:"recursive",async:!1,getter:e,_parse(t,n){return this.getter()._parse(t,n)}}}function xx(e,t,n,i){const[s,r="Invalid type",o]=vx(t,n,i);return{type:"tuple",async:!1,items:e,rest:s,message:r,pipe:o,_parse(a,c){if(!Array.isArray(a)||this.items.length>a.length)return Ss(c,"type","tuple",this.message,a);let d=!0,u;const l=[];for(let f=0;f<this.items.length;f++){const p=a[f],m=this.items[f]._parse(p,c);if(m.issues){const _={type:"tuple",input:a,key:f,value:p};for(const x of m.issues)x.path?x.path.unshift(_):x.path=[_],u==null||u.push(x);if(u||(u=m.issues),c!=null&&c.abortEarly){d=!1;break}}m.typed||(d=!1),l[f]=m.output}if(this.rest&&!(c!=null&&c.abortEarly&&u))for(let f=this.items.length;f<a.length;f++){const p=a[f],m=this.rest._parse(p,c);if(m.issues){const _={type:"tuple",input:a,key:f,value:p};for(const x of m.issues)x.path?x.path.unshift(_):x.path=[_],u==null||u.push(x);if(u||(u=m.issues),c!=null&&c.abortEarly){d=!1;break}}m.typed||(d=!1),l[f]=m.output}return d?Es(l,this.pipe,c,"tuple",u):_r(!1,l,u)}}}function Nr(e,t,n){const[i="Invalid type",s]=Vs(t,n);return{type:"union",async:!1,options:e,message:i,pipe:s,_parse(r,o){let a,c;for(const d of this.options){const u=d._parse(r,o);if(u.issues)if(a)for(const l of u.issues)a.push(l);else a=u.issues;else{c=[u.output];break}}return c?Es(c[0],this.pipe,o,"union"):Ss(o,"type","union",this.message,r,void 0,a)}}}function Sh(e){return{type:"unknown",async:!1,pipe:e,_parse(t,n){return Es(t,this.pipe,n,"unknown")}}}function Gj(e,t,n,i){const[s="Invalid type",r]=Vs(n,i);return{type:"variant",async:!1,key:e,options:t,message:s,pipe:r,_parse(o,a){if(!o||typeof o!="object")return Ss(a,"type","variant",this.message,o);if(this.key in o){let c,d;const u=l=>{for(const f of l)if(f.type==="object"){if(!f.entries[this.key]._parse(o[this.key],a).issues){const m=f._parse(o,a);if(m.issues)c=m.issues;else{d=[m.output];break}}}else if(f.type==="variant"&&(u(f.options),d))break};if(u(this.options),d)return Es(d[0],this.pipe,a,"variant");if(c)return _r(!1,d,c)}return Ss(a,"type","variant",this.message,o,[{type:"object",input:o,key:this.key,value:void 0}])}}}function Kn(e,t,n){const i=e._parse(t,n);if(i.issues)throw new yx(i.issues);return i.output}function Vj(e,t,n){const i=e._parse(t,n);return{typed:i.typed,success:!i.issues,data:i.output,output:i.output,error:i.issues&&new yx(i.issues),issues:i.issues}}function Lm(e,t,n){return{...e,_parse(i,s){const r=e._parse(i,s);return r.typed?(r.output=t(r.output,{issues:r.issues}),r.issues||!n?r:Array.isArray(n)?Es(r.output,n,s,typeof r.output):n._parse(r.output,s)):r}}}var eO=/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/iu;function Tx(e,t="Invalid input"){return{type:"custom",async:!1,message:t,requirement:e,_parse(n){return this.requirement(n)?Dm(n):Mm(this.type,this.message,n,this.requirement)}}}function ns(e="Invalid integer"){return{type:"integer",async:!1,message:e,requirement:Number.isInteger,_parse(t){return this.requirement(t)?Dm(t):Mm(this.type,this.message,t,this.requirement)}}}function Xj(e="Invalid UUID"){return{type:"uuid",async:!1,message:e,requirement:eO,_parse(t){return this.requirement.test(t)?Dm(t):Mm(this.type,this.message,t,this.requirement)}}}function Aa(e){const t=Object.entries(e).map(([n,i])=>jt({[n]:i}));return Lm(Nr(t),n=>({...n,$kind:Object.keys(n)[0]}))}const Kc=Lm(kn(),e=>zt(e),[Tx(or)]),ss=Kc,oa=kn(),Ki=Nr([kn(),ts([ns()])],[Tx(e=>{try{return BigInt(e),BigInt(e)>=0&&BigInt(e)<=18446744073709551615n}catch{return!1}},"Invalid u64")]),Bo=jt({objectId:Kc,version:Ki,digest:kn()}),Un=Lm(Nr([jt({GasCoin:ci(!0)}),jt({Input:ts([ns()]),type:Rr(ci("pure"))}),jt({Input:ts([ns()]),type:Rr(ci("object"))}),jt({Result:ts([ns()])}),jt({NestedResult:xx([ts([ns()]),ts([ns()])])})]),e=>({...e,$kind:Object.keys(e)[0]})),tO=jt({budget:fi(Ki),price:fi(Ki),owner:fi(Kc),payment:fi(_n(Bo))}),Ip=Nr([ci("address"),ci("bool"),ci("u8"),ci("u16"),ci("u32"),ci("u64"),ci("u128"),ci("u256"),jt({vector:Xb(()=>Ip)}),jt({datatype:jt({package:kn(),module:kn(),type:kn(),typeParameters:_n(Xb(()=>Ip))})}),jt({typeParameter:ts([ns()])})]),nO=jt({ref:fi(Nr([ci("&"),ci("&mut")])),body:Ip}),iO=jt({package:ss,module:kn(),function:kn(),typeArguments:_n(kn()),arguments:_n(Un),_argumentTypes:Rr(fi(_n(nO)))}),sO=jt({name:kn(),inputs:ef(kn(),Nr([Un,_n(Un)])),data:ef(kn(),Sh())}),rO=Aa({MoveCall:iO,TransferObjects:jt({objects:_n(Un),address:Un}),SplitCoins:jt({coin:Un,amounts:_n(Un)}),MergeCoins:jt({destination:Un,sources:_n(Un)}),Publish:jt({modules:_n(oa),dependencies:_n(ss)}),MakeMoveVec:jt({type:fi(kn()),elements:_n(Un)}),Upgrade:jt({modules:_n(oa),dependencies:_n(ss),package:ss,ticket:Un}),$Intent:sO}),Ax=Aa({ImmOrOwnedObject:Bo,SharedObject:jt({objectId:ss,initialSharedVersion:Ki,mutable:qm()}),Receiving:Bo}),oO=Aa({Object:Ax,Pure:jt({bytes:oa}),UnresolvedPure:jt({value:Sh()}),UnresolvedObject:jt({objectId:ss,version:Rr(fi(Ki)),digest:Rr(fi(kn())),initialSharedVersion:Rr(fi(Ki))})}),Jb=Aa({Object:Ax,Pure:jt({bytes:oa})}),kx=Aa({None:ci(!0),Epoch:Ki}),ll=jt({version:ci(2),sender:Ql(Kc),expiration:Ql(kx),gasData:tO,inputs:_n(oO),commands:_n(rO)}),Uo={MoveCall(e){const[t,n="",i=""]="target"in e?e.target.split("::"):[e.package,e.module,e.function];return{$kind:"MoveCall",MoveCall:{package:t,module:n,function:i,typeArguments:e.typeArguments??[],arguments:e.arguments??[]}}},TransferObjects(e,t){return{$kind:"TransferObjects",TransferObjects:{objects:e.map(n=>Kn(Un,n)),address:Kn(Un,t)}}},SplitCoins(e,t){return{$kind:"SplitCoins",SplitCoins:{coin:Kn(Un,e),amounts:t.map(n=>Kn(Un,n))}}},MergeCoins(e,t){return{$kind:"MergeCoins",MergeCoins:{destination:Kn(Un,e),sources:t.map(n=>Kn(Un,n))}}},Publish({modules:e,dependencies:t}){return{$kind:"Publish",Publish:{modules:e.map(n=>typeof n=="string"?n:Bi(new Uint8Array(n))),dependencies:t.map(n=>gn(n))}}},Upgrade({modules:e,dependencies:t,package:n,ticket:i}){return{$kind:"Upgrade",Upgrade:{modules:e.map(s=>typeof s=="string"?s:Bi(new Uint8Array(s))),dependencies:t.map(s=>gn(s)),package:n,ticket:Kn(Un,i)}}},MakeMoveVec({type:e,elements:t}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:e??null,elements:t.map(n=>Kn(Un,n))}}},Intent({name:e,inputs:t={},data:n={}}){return{$kind:"$Intent",$Intent:{name:e,inputs:Object.fromEntries(Object.entries(t).map(([i,s])=>[i,Array.isArray(s)?s.map(r=>Kn(Un,r)):Kn(Un,s)])),data:n}}}},Zb=jt({digest:kn(),objectId:kn(),version:Nr([ts([ns()]),kn(),ZB()])}),aO=Aa({ImmOrOwned:Zb,Shared:jt({objectId:ss,initialSharedVersion:Ki,mutable:qm()}),Receiving:Zb}),Yb=Aa({Object:aO,Pure:_n(ts([ns()]))});function Qb(e){var n;const t=e.inputs.map((i,s)=>{if(i.Object)return{kind:"Input",index:s,value:{Object:i.Object.ImmOrOwnedObject?{ImmOrOwned:i.Object.ImmOrOwnedObject}:i.Object.Receiving?{Receiving:{digest:i.Object.Receiving.digest,version:i.Object.Receiving.version,objectId:i.Object.Receiving.objectId}}:{Shared:{mutable:i.Object.SharedObject.mutable,initialSharedVersion:i.Object.SharedObject.initialSharedVersion,objectId:i.Object.SharedObject.objectId}}},type:"object"};if(i.Pure)return{kind:"Input",index:s,value:{Pure:Array.from(hr(i.Pure.bytes))},type:"pure"};if(i.UnresolvedPure)return{kind:"Input",type:"pure",index:s,value:i.UnresolvedPure.value};if(i.UnresolvedObject)return{kind:"Input",type:"object",index:s,value:i.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:e.sender??void 0,expiration:((n=e.expiration)==null?void 0:n.$kind)==="Epoch"?{Epoch:Number(e.expiration.Epoch)}:e.expiration?{None:!0}:null,gasConfig:{owner:e.gasData.owner??void 0,budget:e.gasData.budget??void 0,price:e.gasData.price??void 0,payment:e.gasData.payment??void 0},inputs:t,transactions:e.commands.map(i=>{if(i.MakeMoveVec)return{kind:"MakeMoveVec",type:i.MakeMoveVec.type===null?{None:!0}:{Some:cr.parseFromStr(i.MakeMoveVec.type)},objects:i.MakeMoveVec.elements.map(s=>wr(s,t))};if(i.MergeCoins)return{kind:"MergeCoins",destination:wr(i.MergeCoins.destination,t),sources:i.MergeCoins.sources.map(s=>wr(s,t))};if(i.MoveCall)return{kind:"MoveCall",target:`${i.MoveCall.package}::${i.MoveCall.module}::${i.MoveCall.function}`,typeArguments:i.MoveCall.typeArguments,arguments:i.MoveCall.arguments.map(s=>wr(s,t))};if(i.Publish)return{kind:"Publish",modules:i.Publish.modules.map(s=>Array.from(hr(s))),dependencies:i.Publish.dependencies};if(i.SplitCoins)return{kind:"SplitCoins",coin:wr(i.SplitCoins.coin,t),amounts:i.SplitCoins.amounts.map(s=>wr(s,t))};if(i.TransferObjects)return{kind:"TransferObjects",objects:i.TransferObjects.objects.map(s=>wr(s,t)),address:wr(i.TransferObjects.address,t)};if(i.Upgrade)return{kind:"Upgrade",modules:i.Upgrade.modules.map(s=>Array.from(hr(s))),dependencies:i.Upgrade.dependencies,packageId:i.Upgrade.package,ticket:wr(i.Upgrade.ticket,t)};throw new Error(`Unknown transaction ${Object.keys(i)}`)})}}function wr(e,t){if(e.$kind==="GasCoin")return{kind:"GasCoin"};if(e.$kind==="Result")return{kind:"Result",index:e.Result};if(e.$kind==="NestedResult")return{kind:"NestedResult",index:e.NestedResult[0],resultIndex:e.NestedResult[1]};if(e.$kind==="Input")return t[e.Input];throw new Error(`Invalid argument ${Object.keys(e)}`)}function cO(e){var t,n,i;return Kn(ll,{version:2,sender:e.sender??null,expiration:e.expiration?"Epoch"in e.expiration?{Epoch:e.expiration.Epoch}:{None:!0}:null,gasData:{owner:e.gasConfig.owner??null,budget:((t=e.gasConfig.budget)==null?void 0:t.toString())??null,price:((n=e.gasConfig.price)==null?void 0:n.toString())??null,payment:((i=e.gasConfig.payment)==null?void 0:i.map(s=>({digest:s.digest,objectId:s.objectId,version:s.version.toString()})))??null},inputs:e.inputs.map(s=>{if(s.kind==="Input"){if(Cp(Yb,s.value)){const r=Kn(Yb,s.value);if(r.Object){if(r.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:r.Object.ImmOrOwned.objectId,version:String(r.Object.ImmOrOwned.version),digest:r.Object.ImmOrOwned.digest}}};if(r.Object.Shared)return{Object:{SharedObject:{mutable:r.Object.Shared.mutable??null,initialSharedVersion:r.Object.Shared.initialSharedVersion,objectId:r.Object.Shared.objectId}}};if(r.Object.Receiving)return{Object:{Receiving:{digest:r.Object.Receiving.digest,version:String(r.Object.Receiving.version),objectId:r.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:Bi(new Uint8Array(r.Pure))}}}return s.type==="object"?{UnresolvedObject:{objectId:s.value}}:{UnresolvedPure:{value:s.value}}}throw new Error("Invalid input")}),commands:e.transactions.map(s=>{switch(s.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in s.type?cr.tagToString(s.type.Some):null,elements:s.objects.map(r=>vr(r))}};case"MergeCoins":return{MergeCoins:{destination:vr(s.destination),sources:s.sources.map(r=>vr(r))}};case"MoveCall":{const[r,o,a]=s.target.split("::");return{MoveCall:{package:r,module:o,function:a,typeArguments:s.typeArguments,arguments:s.arguments.map(c=>vr(c))}}}case"Publish":return{Publish:{modules:s.modules.map(r=>Bi(Uint8Array.from(r))),dependencies:s.dependencies}};case"SplitCoins":return{SplitCoins:{coin:vr(s.coin),amounts:s.amounts.map(r=>vr(r))}};case"TransferObjects":return{TransferObjects:{objects:s.objects.map(r=>vr(r)),address:vr(s.address)}};case"Upgrade":return{Upgrade:{modules:s.modules.map(r=>Bi(Uint8Array.from(r))),dependencies:s.dependencies,package:s.packageId,ticket:vr(s.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(s)}`)})})}function vr(e){switch(e.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:e.index};case"NestedResult":return{NestedResult:[e.index,e.resultIndex]};case"Input":return{Input:e.index}}}function hu(e){return Nr(Object.entries(e).map(([t,n])=>jt({[t]:n})))}const $s=hu({GasCoin:ci(!0),Input:ts([ns()]),Result:ts([ns()]),NestedResult:xx([ts([ns()]),ts([ns()])])}),dO=jt({budget:fi(Ki),price:fi(Ki),owner:fi(Kc),payment:fi(_n(Bo))}),uO=jt({package:ss,module:kn(),function:kn(),typeArguments:_n(kn()),arguments:_n($s)}),lO=jt({name:kn(),inputs:ef(kn(),Nr([$s,_n($s)])),data:ef(kn(),Sh())}),fO=hu({MoveCall:uO,TransferObjects:jt({objects:_n($s),address:$s}),SplitCoins:jt({coin:$s,amounts:_n($s)}),MergeCoins:jt({destination:$s,sources:_n($s)}),Publish:jt({modules:_n(oa),dependencies:_n(ss)}),MakeMoveVec:jt({type:fi(kn()),elements:_n($s)}),Upgrade:jt({modules:_n(oa),dependencies:_n(ss),package:ss,ticket:$s}),$Intent:lO}),hO=hu({ImmOrOwnedObject:Bo,SharedObject:jt({objectId:ss,initialSharedVersion:Ki,mutable:qm()}),Receiving:Bo}),pO=hu({Object:hO,Pure:jt({bytes:oa}),UnresolvedPure:jt({value:Sh()}),UnresolvedObject:jt({objectId:ss,version:Rr(fi(Ki)),digest:Rr(fi(kn())),initialSharedVersion:Rr(fi(Ki))})}),gO=hu({None:ci(!0),Epoch:Ki}),mO=jt({version:ci(2),sender:Ql(Kc),expiration:Ql(gO),gasData:dO,inputs:_n(pO),commands:_n(fO)}),_O=50,bO=1000n,yO=5e10;async function wO(e,t,n){return await kO(e,t),await AO(e,t),t.onlyTransactionKind||(await vO(e,t),await xO(e,t),await TO(e,t)),await SO(e),await n()}async function vO(e,t){e.gasConfig.price||(e.gasConfig.price=String(await pu(t).getReferenceGasPrice()))}async function xO(e,t){if(e.gasConfig.budget)return;const n=await pu(t).dryRunTransactionBlock({transactionBlock:e.build({overrides:{gasData:{budget:String(yO),payment:[]}}})});if(n.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${n.effects.status.error}`,{cause:n});const i=bO*BigInt(e.gasConfig.price||1n),s=BigInt(n.effects.gasUsed.computationCost)+i,r=s+BigInt(n.effects.gasUsed.storageCost)-BigInt(n.effects.gasUsed.storageRebate);e.gasConfig.budget=String(r>s?r:s)}async function TO(e,t){if(!e.gasConfig.payment){const i=(await pu(t).getCoins({owner:e.gasConfig.owner||e.sender,coinType:_B})).data.filter(s=>!e.inputs.find(o=>{var a;return(a=o.Object)!=null&&a.ImmOrOwnedObject?s.coinObjectId===o.Object.ImmOrOwnedObject.objectId:!1})).map(s=>({objectId:s.coinObjectId,digest:s.digest,version:s.version}));if(!i.length)throw new Error("No valid gas coins found for the transaction.");e.gasConfig.payment=i.map(s=>Kn(Bo,s))}}async function AO(e,t){const n=e.inputs.filter(u=>{var l;return u.UnresolvedObject&&!(u.UnresolvedObject.version||(l=u.UnresolvedObject)!=null&&l.initialSharedVersion)}),i=[...new Set(n.map(u=>gn(u.UnresolvedObject.objectId)))],s=i.length?IO(i,_O):[],r=(await Promise.all(s.map(u=>pu(t).multiGetObjects({ids:u,options:{showOwner:!0}})))).flat(),o=new Map(i.map((u,l)=>[u,r[l]])),a=Array.from(o).filter(([u,l])=>l.error).map(([u,l])=>JSON.stringify(l.error));if(a.length)throw new Error(`The following input objects are invalid: ${a.join(", ")}`);const c=r.map(u=>{if(u.error||!u.data)throw new Error(`Failed to fetch object: ${u.error}`);const l=u.data.owner,f=l&&typeof l=="object"&&"Shared"in l?l.Shared.initial_shared_version:null;return{objectId:u.data.objectId,digest:u.data.digest,version:u.data.version,initialSharedVersion:f}}),d=new Map(i.map((u,l)=>[u,c[l]]));for(const[u,l]of e.inputs.entries()){if(!l.UnresolvedObject)continue;let f;const p=zt(l.UnresolvedObject.objectId),m=d.get(p);l.UnresolvedObject.initialSharedVersion??(m==null?void 0:m.initialSharedVersion)?f=$r.SharedObjectRef({objectId:p,initialSharedVersion:l.UnresolvedObject.initialSharedVersion||(m==null?void 0:m.initialSharedVersion),mutable:EO(e,u)}):PO(e,u)&&(f=$r.ReceivingRef({objectId:p,digest:l.UnresolvedObject.digest??(m==null?void 0:m.digest),version:l.UnresolvedObject.version??(m==null?void 0:m.version)})),e.inputs[e.inputs.indexOf(l)]=f??$r.ObjectRef({objectId:p,digest:l.UnresolvedObject.digest??(m==null?void 0:m.digest),version:l.UnresolvedObject.version??(m==null?void 0:m.version)})}}async function kO(e,t){const{inputs:n,commands:i}=e,s=[],r=new Set;i.forEach(a=>{if(a.MoveCall){if(a.MoveCall._argumentTypes)return;if(a.MoveCall.arguments.map(u=>u.$kind==="Input"?e.inputs[u.Input]:null).some(u=>(u==null?void 0:u.UnresolvedPure)||(u==null?void 0:u.UnresolvedObject))){const u=`${a.MoveCall.package}::${a.MoveCall.module}::${a.MoveCall.function}`;r.add(u),s.push(a.MoveCall)}}switch(a.$kind){case"SplitCoins":a.SplitCoins.amounts.forEach(c=>{ey(c,hn.U64,e)});break;case"TransferObjects":ey(a.TransferObjects.address,hn.Address,e);break}});const o=new Map;if(r.size>0){const a=pu(t);await Promise.all([...r].map(async c=>{const[d,u,l]=c.split("::"),f=await a.getNormalizedMoveFunction({package:d,module:u,function:l});o.set(c,f.parameters.map(p=>GB(p)))}))}s.length&&await Promise.all(s.map(async a=>{const c=o.get(`${a.package}::${a.module}::${a.function}`);if(!c)return;const u=c.length>0&&WB(c.at(-1))?c.slice(0,c.length-1):c;a._argumentTypes=u})),i.forEach(a=>{if(!a.MoveCall)return;const c=a.MoveCall,d=`${c.package}::${c.module}::${c.function}`,u=c._argumentTypes;if(u){if(u.length!==a.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${d}`);u.forEach((l,f)=>{var k,T;const p=c.arguments[f];if(p.$kind!=="Input")return;const m=n[p.Input];if(!m.UnresolvedPure&&!m.UnresolvedObject)return;const _=((k=m.UnresolvedPure)==null?void 0:k.value)??((T=m.UnresolvedObject)==null?void 0:T.objectId),x=Pp(l.body);if(x){p.type="pure",n[n.indexOf(m)]=$r.Pure(x.serialize(_));return}if(typeof _!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(_,null,2)}`);p.type="object";const C=m.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:_}}:m;n[p.Input]=C})}})}function SO(e){e.inputs.forEach((t,n)=>{if(t.$kind!=="Object"&&t.$kind!=="Pure")throw new Error(`Input at index ${n} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(t)}`)})}function ey(e,t,n){if(e.$kind!=="Input")return;const i=n.inputs[e.Input];i.$kind==="UnresolvedPure"&&(n.inputs[e.Input]=$r.Pure(t.serialize(i.UnresolvedPure.value)))}function EO(e,t){let n=!1;return e.getInputUses(t,(i,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const r=s.MoveCall.arguments.indexOf(i);n=s.MoveCall._argumentTypes[r].ref!=="&"||n}}),n}function PO(e,t){let n=!1;return e.getInputUses(t,(i,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const r=s.MoveCall.arguments.indexOf(i);n=CO(s.MoveCall._argumentTypes[r])||n}}),n}function CO(e){return typeof e.body!="object"||!("datatype"in e.body)?!1:e.body.datatype.package==="0x2"&&e.body.datatype.module==="transfer"&&e.body.datatype.type==="Receiving"}function pu(e){if(!e.client)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}function IO(e,t){return Array.from({length:Math.ceil(e.length/t)},(n,i)=>e.slice(i*t,i*t+t))}function BO(e){function t(n){return e(n)}return t.u8=n=>e(hn.U8.serialize(n)),t.u16=n=>e(hn.U16.serialize(n)),t.u32=n=>e(hn.U32.serialize(n)),t.u64=n=>e(hn.U64.serialize(n)),t.u128=n=>e(hn.U128.serialize(n)),t.u256=n=>e(hn.U256.serialize(n)),t.bool=n=>e(hn.Bool.serialize(n)),t.string=n=>e(hn.String.serialize(n)),t.address=n=>e(hn.Address.serialize(n)),t.id=t.address,t}function OO(e,t){const n=Array.from(`${e}::`).map(s=>s.charCodeAt(0)),i=new Uint8Array(n.length+t.length);return i.set(n),i.set(t,n.length),P2(i,{dkLen:32})}function ty(e){return zt(e).replace("0x","")}class Ns{constructor(t){this.version=2,this.sender=(t==null?void 0:t.sender)??null,this.expiration=(t==null?void 0:t.expiration)??null,this.inputs=(t==null?void 0:t.inputs)??[],this.commands=(t==null?void 0:t.commands)??[],this.gasData=(t==null?void 0:t.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(t){const i=hn.TransactionKind.parse(t).ProgrammableTransaction;if(!i)throw new Error("Unable to deserialize from bytes.");return Ns.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:i.inputs,commands:i.commands})}static fromBytes(t){const n=hn.TransactionData.parse(t),i=n==null?void 0:n.V1,s=i.kind.ProgrammableTransaction;if(!i||!s)throw new Error("Unable to deserialize from bytes.");return Ns.restore({version:2,sender:i.sender,expiration:i.expiration,gasData:i.gasData,inputs:s.inputs,commands:s.commands})}static restore(t){return t.version===2?new Ns(Kn(ll,t)):new Ns(Kn(ll,cO(t)))}static getDigestFromBytes(t){const n=OO("TransactionData",t);return kh(n)}get gasConfig(){return this.gasData}set gasConfig(t){this.gasData=t}build({maxSizeBytes:t=1/0,overrides:n,onlyTransactionKind:i}={}){const s=this.inputs,r=this.commands,o={ProgrammableTransaction:{inputs:s,commands:r}};if(i)return hn.TransactionKind.serialize(o,{maxSize:t}).toBytes();const a=(n==null?void 0:n.expiration)??this.expiration,c=(n==null?void 0:n.sender)??this.sender,d={...this.gasData,...n==null?void 0:n.gasConfig,...n==null?void 0:n.gasData};if(!c)throw new Error("Missing transaction sender");if(!d.budget)throw new Error("Missing gas budget");if(!d.payment)throw new Error("Missing gas payment");if(!d.price)throw new Error("Missing gas price");const u={sender:ty(c),expiration:a||{None:!0},gasData:{payment:d.payment,owner:ty(this.gasData.owner??c),price:BigInt(d.price),budget:BigInt(d.budget)},kind:{ProgrammableTransaction:{inputs:s,commands:r}}};return hn.TransactionData.serialize({V1:u},{maxSize:t}).toBytes()}addInput(t,n){const i=this.inputs.length;return this.inputs.push(n),{Input:i,type:t,$kind:"Input"}}getInputUses(t,n){this.mapArguments((i,s)=>(i.$kind==="Input"&&i.Input===t&&n(i,s),i))}mapArguments(t){for(const n of this.commands)switch(n.$kind){case"MoveCall":n.MoveCall.arguments=n.MoveCall.arguments.map(s=>t(s,n));break;case"TransferObjects":n.TransferObjects.objects=n.TransferObjects.objects.map(s=>t(s,n)),n.TransferObjects.address=t(n.TransferObjects.address,n);break;case"SplitCoins":n.SplitCoins.coin=t(n.SplitCoins.coin,n),n.SplitCoins.amounts=n.SplitCoins.amounts.map(s=>t(s,n));break;case"MergeCoins":n.MergeCoins.destination=t(n.MergeCoins.destination,n),n.MergeCoins.sources=n.MergeCoins.sources.map(s=>t(s,n));break;case"MakeMoveVec":n.MakeMoveVec.elements=n.MakeMoveVec.elements.map(s=>t(s,n));break;case"Upgrade":n.Upgrade.ticket=t(n.Upgrade.ticket,n);break;case"$Intent":const i=n.$Intent.inputs;n.$Intent.inputs={};for(const[s,r]of Object.entries(i))n.$Intent.inputs[s]=Array.isArray(r)?r.map(o=>t(o,n)):t(r,n);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${n.$kind}`)}}replaceCommand(t,n){if(!Array.isArray(n)){this.commands[t]=n;return}const i=n.length-1;this.commands.splice(t,1,...n),i!==0&&this.mapArguments(s=>{switch(s.$kind){case"Result":s.Result>t&&(s.Result+=i);break;case"NestedResult":s.NestedResult[0]>t&&(s.NestedResult[0]+=i);break}return s})}getDigest(){const t=this.build({onlyTransactionKind:!1});return Ns.getDigestFromBytes(t)}snapshot(){return Kn(ll,this)}}function ny(e){if(typeof e=="string")return zt(e);if(e.Object)return e.Object.ImmOrOwnedObject?zt(e.Object.ImmOrOwnedObject.objectId):e.Object.Receiving?zt(e.Object.Receiving.objectId):zt(e.Object.SharedObject.objectId);if(e.UnresolvedObject)return zt(e.UnresolvedObject.objectId)}var Nm=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},pn=(e,t,n)=>(Nm(e,t,"read from private field"),n?n.call(e):t.get(e)),oo=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Zc=(e,t,n,i)=>(Nm(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),Ar=(e,t,n)=>(Nm(e,t,"access private method"),n),fl,tf,jo,yn,hd,hl,nf,Fm,pl,Bp,sf,zm;function $O(e){const t={$kind:"Result",Result:e},n=[],i=s=>n[s]??(n[s]={$kind:"NestedResult",NestedResult:[e,s]});return new Proxy(t,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(s,r){if(r in s)return Reflect.get(s,r);if(r===Symbol.iterator)return function*(){let a=0;for(;;)yield i(a),a++};if(typeof r=="symbol")return;const o=parseInt(r,10);if(!(Number.isNaN(o)||o<0))return i(o)}})}const Sx=Symbol.for("@mysten/transaction");function Ex(e){return!!e&&typeof e=="object"&&e[Sx]===!0}const Op=class{constructor(){oo(this,hd),oo(this,nf),oo(this,pl),oo(this,sf),oo(this,fl,[]),oo(this,tf,[]),oo(this,jo,new Map),oo(this,yn,void 0),Zc(this,yn,new Ns)}static fromKind(e){const t=new Op;return Zc(t,yn,Ns.fromKindBytes(typeof e=="string"?hr(e):e)),t}static from(e){const t=new Op;return Ex(e)?Zc(t,yn,new Ns(e.getData())):typeof e!="string"||!e.startsWith("{")?Zc(t,yn,Ns.fromBytes(typeof e=="string"?hr(e):e)):Zc(t,yn,Ns.restore(JSON.parse(e))),t}addSerializationPlugin(e){pn(this,fl).push(e)}addBuildPlugin(e){pn(this,tf).push(e)}addIntentResolver(e,t){if(pn(this,jo).has(e)&&pn(this,jo).get(e)!==t)throw new Error(`Intent resolver for ${e} already exists`);pn(this,jo).set(e,t)}setSender(e){pn(this,yn).sender=e}setSenderIfNotSet(e){pn(this,yn).sender||(pn(this,yn).sender=e)}setExpiration(e){pn(this,yn).expiration=e?Kn(kx,e):null}setGasPrice(e){pn(this,yn).gasConfig.price=String(e)}setGasBudget(e){pn(this,yn).gasConfig.budget=String(e)}setGasOwner(e){pn(this,yn).gasConfig.owner=e}setGasPayment(e){pn(this,yn).gasConfig.payment=e.map(t=>Kn(Bo,t))}get blockData(){return Qb(pn(this,yn).snapshot())}getData(){return pn(this,yn).snapshot()}get[Sx](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:BO(e=>G2(e)?pn(this,yn).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):pn(this,yn).addInput("pure",Cp(Jb,e)?Kn(Jb,e):e instanceof Uint8Array?$r.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}object(e){var i,s;if(typeof e=="function")return this.object(e(this));if(typeof e=="object"&&Cp(Un,e))return e;const t=ny(e),n=pn(this,yn).inputs.find(r=>t===ny(r));return(i=n==null?void 0:n.Object)!=null&&i.SharedObject&&typeof e=="object"&&((s=e.Object)!=null&&s.SharedObject)&&(n.Object.SharedObject.mutable=n.Object.SharedObject.mutable||e.Object.SharedObject.mutable),n?{$kind:"Input",Input:pn(this,yn).inputs.indexOf(n),type:"object"}:pn(this,yn).addInput("object",typeof e=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:zt(e)}}:e)}objectRef(...e){return this.object($r.ObjectRef(...e))}receivingRef(...e){return this.object($r.ReceivingRef(...e))}sharedObjectRef(...e){return this.object($r.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);const t=pn(this,yn).commands.push(e);return $O(t-1)}splitCoins(e,t){return this.add(Uo.SplitCoins(typeof e=="string"?this.object(e):Ar(this,nf,Fm).call(this,e),t.map(n=>typeof n=="number"||typeof n=="bigint"||typeof n=="string"?this.pure.u64(n):Ar(this,hd,hl).call(this,n))))}mergeCoins(e,t){return this.add(Uo.MergeCoins(this.object(e),t.map(n=>this.object(n))))}publish({modules:e,dependencies:t}){return this.add(Uo.Publish({modules:e,dependencies:t}))}upgrade({modules:e,dependencies:t,package:n,ticket:i}){return this.add(Uo.Upgrade({modules:e,dependencies:t,package:n,ticket:this.object(i)}))}moveCall({arguments:e,...t}){return this.add(Uo.MoveCall({...t,arguments:e==null?void 0:e.map(n=>Ar(this,hd,hl).call(this,n))}))}transferObjects(e,t){return this.add(Uo.TransferObjects(e.map(n=>this.object(n)),typeof t=="string"?this.pure.address(t):Ar(this,hd,hl).call(this,t)))}makeMoveVec({type:e,elements:t}){return this.add(Uo.MakeMoveVec({type:e,elements:t.map(n=>this.object(n))}))}serialize(){return JSON.stringify(Qb(pn(this,yn).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(Kn(mO,pn(this,yn).snapshot()),(t,n)=>typeof n=="bigint"?n.toString():n,2)}async sign(e){const{signer:t,...n}=e,i=await this.build(n);return t.signTransaction(i)}async build(e={}){return await this.prepareForSerialization(e),await Ar(this,pl,Bp).call(this,e),pn(this,yn).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await Ar(this,pl,Bp).call(this,e),pn(this,yn).getDigest()}async prepareForSerialization(e){var i;const t=new Set;for(const s of pn(this,yn).commands)s.$Intent&&t.add(s.$Intent.name);const n=[...pn(this,fl)];for(const s of t)if(!((i=e.supportedIntents)!=null&&i.includes(s))){if(!pn(this,jo).has(s))throw new Error(`Missing intent resolver for ${s}`);n.push(pn(this,jo).get(s))}await Ar(this,sf,zm).call(this,n,e)}};let xe=Op;fl=new WeakMap;tf=new WeakMap;jo=new WeakMap;yn=new WeakMap;hd=new WeakSet;hl=function(e){return G2(e)?this.pure(e):Ar(this,nf,Fm).call(this,e)};nf=new WeakSet;Fm=function(e){return typeof e=="function"?Kn(Un,e(this)):Kn(Un,e)};pl=new WeakSet;Bp=async function(e){if(!e.onlyTransactionKind&&!pn(this,yn).sender)throw new Error("Missing transaction sender");await Ar(this,sf,zm).call(this,[...pn(this,tf),wO],e)};sf=new WeakSet;zm=async function(e,t){const n=i=>{if(i>=e.length)return()=>{};const s=e[i];return async()=>{const r=n(i+1);let o=!1,a=!1;if(await s(pn(this,yn),t,async()=>{if(o)throw new Error(`next() was call multiple times in TransactionPlugin ${i}`);o=!0,await r(),a=!0}),!o)throw new Error(`next() was not called in TransactionPlugin ${i}`);if(!a)throw new Error(`next() was not awaited in TransactionPlugin ${i}`)}};await n(0)()};let ju;const RO=new Uint8Array(16);function UO(){if(!ju&&(ju=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ju))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ju(RO)}const gi=[];for(let e=0;e<256;++e)gi.push((e+256).toString(16).slice(1));function MO(e,t=0){return gi[e[t+0]]+gi[e[t+1]]+gi[e[t+2]]+gi[e[t+3]]+"-"+gi[e[t+4]]+gi[e[t+5]]+"-"+gi[e[t+6]]+gi[e[t+7]]+"-"+gi[e[t+8]]+gi[e[t+9]]+"-"+gi[e[t+10]]+gi[e[t+11]]+gi[e[t+12]]+gi[e[t+13]]+gi[e[t+14]]+gi[e[t+15]]}const DO=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),iy={randomUUID:DO};function qu(e,t,n){if(iy.randomUUID&&!t&&!e)return iy.randomUUID();e=e||{};const i=e.random||(e.rng||UO)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){n=n||0;for(let s=0;s<16;++s)t[n+s]=i[s];return t}return MO(i)}function Px(e,t){return function(){return e.apply(t,arguments)}}const{toString:jO}=Object.prototype,{getPrototypeOf:Hm}=Object,Eh=(e=>t=>{const n=jO.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),br=e=>(e=e.toLowerCase(),t=>Eh(t)===e),Ph=e=>t=>typeof t===e,{isArray:Wc}=Array,Nd=Ph("undefined");function qO(e){return e!==null&&!Nd(e)&&e.constructor!==null&&!Nd(e.constructor)&&xs(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Cx=br("ArrayBuffer");function LO(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Cx(e.buffer),t}const NO=Ph("string"),xs=Ph("function"),Ix=Ph("number"),Ch=e=>e!==null&&typeof e=="object",FO=e=>e===!0||e===!1,gl=e=>{if(Eh(e)!=="object")return!1;const t=Hm(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},zO=br("Date"),HO=br("File"),KO=br("Blob"),WO=br("FileList"),GO=e=>Ch(e)&&xs(e.pipe),VO=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||xs(e.append)&&((t=Eh(e))==="formdata"||t==="object"&&xs(e.toString)&&e.toString()==="[object FormData]"))},XO=br("URLSearchParams"),JO=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function gu(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,s;if(typeof e!="object"&&(e=[e]),Wc(e))for(i=0,s=e.length;i<s;i++)t.call(null,e[i],i,e);else{const r=n?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let a;for(i=0;i<o;i++)a=r[i],t.call(null,e[a],a,e)}}function Bx(e,t){t=t.toLowerCase();const n=Object.keys(e);let i=n.length,s;for(;i-- >0;)if(s=n[i],t===s.toLowerCase())return s;return null}const Ox=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),$x=e=>!Nd(e)&&e!==Ox;function $p(){const{caseless:e}=$x(this)&&this||{},t={},n=(i,s)=>{const r=e&&Bx(t,s)||s;gl(t[r])&&gl(i)?t[r]=$p(t[r],i):gl(i)?t[r]=$p({},i):Wc(i)?t[r]=i.slice():t[r]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&gu(arguments[i],n);return t}const ZO=(e,t,n,{allOwnKeys:i}={})=>(gu(t,(s,r)=>{n&&xs(s)?e[r]=Px(s,n):e[r]=s},{allOwnKeys:i}),e),YO=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),QO=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},e$=(e,t,n,i)=>{let s,r,o;const a={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),r=s.length;r-- >0;)o=s[r],(!i||i(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=n!==!1&&Hm(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},t$=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},n$=e=>{if(!e)return null;if(Wc(e))return e;let t=e.length;if(!Ix(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},i$=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Hm(Uint8Array)),s$=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=i.next())&&!s.done;){const r=s.value;t.call(e,r[0],r[1])}},r$=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},o$=br("HTMLFormElement"),a$=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,s){return i.toUpperCase()+s}),sy=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),c$=br("RegExp"),Rx=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};gu(n,(s,r)=>{let o;(o=t(s,r,e))!==!1&&(i[r]=o||s)}),Object.defineProperties(e,i)},d$=e=>{Rx(e,(t,n)=>{if(xs(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(xs(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},u$=(e,t)=>{const n={},i=s=>{s.forEach(r=>{n[r]=!0})};return Wc(e)?i(e):i(String(e).split(t)),n},l$=()=>{},f$=(e,t)=>(e=+e,Number.isFinite(e)?e:t),B0="abcdefghijklmnopqrstuvwxyz",ry="0123456789",Ux={DIGIT:ry,ALPHA:B0,ALPHA_DIGIT:B0+B0.toUpperCase()+ry},h$=(e=16,t=Ux.ALPHA_DIGIT)=>{let n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n};function p$(e){return!!(e&&xs(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const g$=e=>{const t=new Array(10),n=(i,s)=>{if(Ch(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[s]=i;const r=Wc(i)?[]:{};return gu(i,(o,a)=>{const c=n(o,s+1);!Nd(c)&&(r[a]=c)}),t[s]=void 0,r}}return i};return n(e,0)},m$=br("AsyncFunction"),_$=e=>e&&(Ch(e)||xs(e))&&xs(e.then)&&xs(e.catch),we={isArray:Wc,isArrayBuffer:Cx,isBuffer:qO,isFormData:VO,isArrayBufferView:LO,isString:NO,isNumber:Ix,isBoolean:FO,isObject:Ch,isPlainObject:gl,isUndefined:Nd,isDate:zO,isFile:HO,isBlob:KO,isRegExp:c$,isFunction:xs,isStream:GO,isURLSearchParams:XO,isTypedArray:i$,isFileList:WO,forEach:gu,merge:$p,extend:ZO,trim:JO,stripBOM:YO,inherits:QO,toFlatObject:e$,kindOf:Eh,kindOfTest:br,endsWith:t$,toArray:n$,forEachEntry:s$,matchAll:r$,isHTMLForm:o$,hasOwnProperty:sy,hasOwnProp:sy,reduceDescriptors:Rx,freezeMethods:d$,toObjectSet:u$,toCamelCase:a$,noop:l$,toFiniteNumber:f$,findKey:Bx,global:Ox,isContextDefined:$x,ALPHABET:Ux,generateString:h$,isSpecCompliantForm:p$,toJSONObject:g$,isAsyncFn:m$,isThenable:_$};function an(e,t,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s)}we.inherits(an,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:we.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Mx=an.prototype,Dx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Dx[e]={value:e}});Object.defineProperties(an,Dx);Object.defineProperty(Mx,"isAxiosError",{value:!0});an.from=(e,t,n,i,s,r)=>{const o=Object.create(Mx);return we.toFlatObject(e,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),an.call(o,e.message,t,n,i,s),o.cause=e,o.name=e.name,r&&Object.assign(o,r),o};const b$=null;function Rp(e){return we.isPlainObject(e)||we.isArray(e)}function jx(e){return we.endsWith(e,"[]")?e.slice(0,-2):e}function oy(e,t,n){return e?e.concat(t).map(function(s,r){return s=jx(s),!n&&r?"["+s+"]":s}).join(n?".":""):t}function y$(e){return we.isArray(e)&&!e.some(Rp)}const w$=we.toFlatObject(we,{},null,function(t){return/^is[A-Z]/.test(t)});function Ih(e,t,n){if(!we.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=we.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,x){return!we.isUndefined(x[_])});const i=n.metaTokens,s=n.visitor||u,r=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&we.isSpecCompliantForm(t);if(!we.isFunction(s))throw new TypeError("visitor must be a function");function d(m){if(m===null)return"";if(we.isDate(m))return m.toISOString();if(!c&&we.isBlob(m))throw new an("Blob is not supported. Use a Buffer instead.");return we.isArrayBuffer(m)||we.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,_,x){let C=m;if(m&&!x&&typeof m=="object"){if(we.endsWith(_,"{}"))_=i?_:_.slice(0,-2),m=JSON.stringify(m);else if(we.isArray(m)&&y$(m)||(we.isFileList(m)||we.endsWith(_,"[]"))&&(C=we.toArray(m)))return _=jx(_),C.forEach(function(T,S){!(we.isUndefined(T)||T===null)&&t.append(o===!0?oy([_],S,r):o===null?_:_+"[]",d(T))}),!1}return Rp(m)?!0:(t.append(oy(x,_,r),d(m)),!1)}const l=[],f=Object.assign(w$,{defaultVisitor:u,convertValue:d,isVisitable:Rp});function p(m,_){if(!we.isUndefined(m)){if(l.indexOf(m)!==-1)throw Error("Circular reference detected in "+_.join("."));l.push(m),we.forEach(m,function(C,k){(!(we.isUndefined(C)||C===null)&&s.call(t,C,we.isString(k)?k.trim():k,_,f))===!0&&p(C,_?_.concat(k):[k])}),l.pop()}}if(!we.isObject(e))throw new TypeError("data must be an object");return p(e),t}function ay(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function Km(e,t){this._pairs=[],e&&Ih(e,this,t)}const qx=Km.prototype;qx.append=function(t,n){this._pairs.push([t,n])};qx.toString=function(t){const n=t?function(i){return t.call(this,i,ay)}:ay;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function v$(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Lx(e,t,n){if(!t)return e;const i=n&&n.encode||v$,s=n&&n.serialize;let r;if(s?r=s(t,n):r=we.isURLSearchParams(t)?t.toString():new Km(t,n).toString(i),r){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}class x${constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){we.forEach(this.handlers,function(i){i!==null&&t(i)})}}const cy=x$,Nx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},T$=typeof URLSearchParams<"u"?URLSearchParams:Km,A$=typeof FormData<"u"?FormData:null,k$=typeof Blob<"u"?Blob:null,S$={isBrowser:!0,classes:{URLSearchParams:T$,FormData:A$,Blob:k$},protocols:["http","https","file","blob","url","data"]},Fx=typeof window<"u"&&typeof document<"u",E$=(e=>Fx&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),P$=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),C$=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Fx,hasStandardBrowserEnv:E$,hasStandardBrowserWebWorkerEnv:P$},Symbol.toStringTag,{value:"Module"})),lr={...C$,...S$};function I$(e,t){return Ih(e,new lr.classes.URLSearchParams,Object.assign({visitor:function(n,i,s,r){return lr.isNode&&we.isBuffer(n)?(this.append(i,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function B$(e){return we.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function O$(e){const t={},n=Object.keys(e);let i;const s=n.length;let r;for(i=0;i<s;i++)r=n[i],t[r]=e[r];return t}function zx(e){function t(n,i,s,r){let o=n[r++];const a=Number.isFinite(+o),c=r>=n.length;return o=!o&&we.isArray(s)?s.length:o,c?(we.hasOwnProp(s,o)?s[o]=[s[o],i]:s[o]=i,!a):((!s[o]||!we.isObject(s[o]))&&(s[o]=[]),t(n,i,s[o],r)&&we.isArray(s[o])&&(s[o]=O$(s[o])),!a)}if(we.isFormData(e)&&we.isFunction(e.entries)){const n={};return we.forEachEntry(e,(i,s)=>{t(B$(i),s,n,0)}),n}return null}function $$(e,t,n){if(we.isString(e))try{return(t||JSON.parse)(e),we.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const Wm={transitional:Nx,adapter:["xhr","http"],transformRequest:[function(t,n){const i=n.getContentType()||"",s=i.indexOf("application/json")>-1,r=we.isObject(t);if(r&&we.isHTMLForm(t)&&(t=new FormData(t)),we.isFormData(t))return s&&s?JSON.stringify(zx(t)):t;if(we.isArrayBuffer(t)||we.isBuffer(t)||we.isStream(t)||we.isFile(t)||we.isBlob(t))return t;if(we.isArrayBufferView(t))return t.buffer;if(we.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return I$(t,this.formSerializer).toString();if((a=we.isFileList(t))||i.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Ih(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return r||s?(n.setContentType("application/json",!1),$$(t)):t}],transformResponse:[function(t){const n=this.transitional||Wm.transitional,i=n&&n.forcedJSONParsing,s=this.responseType==="json";if(t&&we.isString(t)&&(i&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?an.from(a,an.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:lr.classes.FormData,Blob:lr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};we.forEach(["delete","get","head","post","put","patch"],e=>{Wm.headers[e]={}});const Gm=Wm,R$=we.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),U$=e=>{const t={};let n,i,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),i=o.substring(s+1).trim(),!(!n||t[n]&&R$[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},dy=Symbol("internals");function Yc(e){return e&&String(e).trim().toLowerCase()}function ml(e){return e===!1||e==null?e:we.isArray(e)?e.map(ml):String(e)}function M$(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const D$=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function O0(e,t,n,i,s){if(we.isFunction(i))return i.call(this,t,n);if(s&&(t=n),!!we.isString(t)){if(we.isString(i))return t.indexOf(i)!==-1;if(we.isRegExp(i))return i.test(t)}}function j$(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function q$(e,t){const n=we.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(s,r,o){return this[i].call(this,t,s,r,o)},configurable:!0})})}class Bh{constructor(t){t&&this.set(t)}set(t,n,i){const s=this;function r(a,c,d){const u=Yc(c);if(!u)throw new Error("header name must be a non-empty string");const l=we.findKey(s,u);(!l||s[l]===void 0||d===!0||d===void 0&&s[l]!==!1)&&(s[l||c]=ml(a))}const o=(a,c)=>we.forEach(a,(d,u)=>r(d,u,c));return we.isPlainObject(t)||t instanceof this.constructor?o(t,n):we.isString(t)&&(t=t.trim())&&!D$(t)?o(U$(t),n):t!=null&&r(n,t,i),this}get(t,n){if(t=Yc(t),t){const i=we.findKey(this,t);if(i){const s=this[i];if(!n)return s;if(n===!0)return M$(s);if(we.isFunction(n))return n.call(this,s,i);if(we.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Yc(t),t){const i=we.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||O0(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let s=!1;function r(o){if(o=Yc(o),o){const a=we.findKey(i,o);a&&(!n||O0(i,i[a],a,n))&&(delete i[a],s=!0)}}return we.isArray(t)?t.forEach(r):r(t),s}clear(t){const n=Object.keys(this);let i=n.length,s=!1;for(;i--;){const r=n[i];(!t||O0(this,this[r],r,t,!0))&&(delete this[r],s=!0)}return s}normalize(t){const n=this,i={};return we.forEach(this,(s,r)=>{const o=we.findKey(i,r);if(o){n[o]=ml(s),delete n[r];return}const a=t?j$(r):String(r).trim();a!==r&&delete n[r],n[a]=ml(s),i[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return we.forEach(this,(i,s)=>{i!=null&&i!==!1&&(n[s]=t&&we.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(s=>i.set(s)),i}static accessor(t){const i=(this[dy]=this[dy]={accessors:{}}).accessors,s=this.prototype;function r(o){const a=Yc(o);i[a]||(q$(s,o),i[a]=!0)}return we.isArray(t)?t.forEach(r):r(t),this}}Bh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);we.reduceDescriptors(Bh.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});we.freezeMethods(Bh);const Ur=Bh;function $0(e,t){const n=this||Gm,i=t||n,s=Ur.from(i.headers);let r=i.data;return we.forEach(e,function(a){r=a.call(n,r,s.normalize(),t?t.status:void 0)}),s.normalize(),r}function Hx(e){return!!(e&&e.__CANCEL__)}function mu(e,t,n){an.call(this,e??"canceled",an.ERR_CANCELED,t,n),this.name="CanceledError"}we.inherits(mu,an,{__CANCEL__:!0});function L$(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new an("Request failed with status code "+n.status,[an.ERR_BAD_REQUEST,an.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const N$=lr.hasStandardBrowserEnv?function(){return{write:function(n,i,s,r,o,a){const c=[];c.push(n+"="+encodeURIComponent(i)),we.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),we.isString(r)&&c.push("path="+r),we.isString(o)&&c.push("domain="+o),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(n){const i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function F$(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function z$(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function Kx(e,t){return e&&!F$(t)?z$(e,t):t}const H$=lr.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function s(r){let o=r;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(o){const a=we.isString(o)?s(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}();function K$(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function W$(e,t){e=e||10;const n=new Array(e),i=new Array(e);let s=0,r=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=i[r];o||(o=d),n[s]=c,i[s]=d;let l=r,f=0;for(;l!==s;)f+=n[l++],l=l%e;if(s=(s+1)%e,s===r&&(r=(r+1)%e),d-o<t)return;const p=u&&d-u;return p?Math.round(f*1e3/p):void 0}}function uy(e,t){let n=0;const i=W$(50,250);return s=>{const r=s.loaded,o=s.lengthComputable?s.total:void 0,a=r-n,c=i(a),d=r<=o;n=r;const u={loaded:r,total:o,progress:o?r/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&d?(o-r)/c:void 0,event:s};u[t?"download":"upload"]=!0,e(u)}}const G$=typeof XMLHttpRequest<"u",V$=G$&&function(e){return new Promise(function(n,i){let s=e.data;const r=Ur.from(e.headers).normalize(),o=e.responseType;let a;function c(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}let d;if(we.isFormData(s)){if(lr.hasStandardBrowserEnv||lr.hasStandardBrowserWebWorkerEnv)r.setContentType(!1);else if((d=r.getContentType())!==!1){const[m,..._]=d?d.split(";").map(x=>x.trim()).filter(Boolean):[];r.setContentType([m||"multipart/form-data",..._].join("; "))}}let u=new XMLHttpRequest;if(e.auth){const m=e.auth.username||"",_=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(m+":"+_))}const l=Kx(e.baseURL,e.url);u.open(e.method.toUpperCase(),Lx(l,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function f(){if(!u)return;const m=Ur.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),x={data:!o||o==="text"||o==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:m,config:e,request:u};L$(function(k){n(k),c()},function(k){i(k),c()},x),u=null}if("onloadend"in u?u.onloadend=f:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(f)},u.onabort=function(){u&&(i(new an("Request aborted",an.ECONNABORTED,e,u)),u=null)},u.onerror=function(){i(new an("Network Error",an.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let _=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const x=e.transitional||Nx;e.timeoutErrorMessage&&(_=e.timeoutErrorMessage),i(new an(_,x.clarifyTimeoutError?an.ETIMEDOUT:an.ECONNABORTED,e,u)),u=null},lr.hasStandardBrowserEnv){const m=H$(l)&&e.xsrfCookieName&&N$.read(e.xsrfCookieName);m&&r.set(e.xsrfHeaderName,m)}s===void 0&&r.setContentType(null),"setRequestHeader"in u&&we.forEach(r.toJSON(),function(_,x){u.setRequestHeader(x,_)}),we.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),o&&o!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",uy(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",uy(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=m=>{u&&(i(!m||m.type?new mu(null,e,u):m),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const p=K$(l);if(p&&lr.protocols.indexOf(p)===-1){i(new an("Unsupported protocol "+p+":",an.ERR_BAD_REQUEST,e));return}u.send(s||null)})},Up={http:b$,xhr:V$};we.forEach(Up,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ly=e=>`- ${e}`,X$=e=>we.isFunction(e)||e===null||e===!1,Wx={getAdapter:e=>{e=we.isArray(e)?e:[e];const{length:t}=e;let n,i;const s={};for(let r=0;r<t;r++){n=e[r];let o;if(i=n,!X$(n)&&(i=Up[(o=String(n)).toLowerCase()],i===void 0))throw new an(`Unknown adapter '${o}'`);if(i)break;s[o||"#"+r]=i}if(!i){const r=Object.entries(s).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?r.length>1?`since :
`+r.map(ly).join(`
`):" "+ly(r[0]):"as no adapter specified";throw new an("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:Up};function R0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new mu(null,e)}function fy(e){return R0(e),e.headers=Ur.from(e.headers),e.data=$0.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Wx.getAdapter(e.adapter||Gm.adapter)(e).then(function(i){return R0(e),i.data=$0.call(e,e.transformResponse,i),i.headers=Ur.from(i.headers),i},function(i){return Hx(i)||(R0(e),i&&i.response&&(i.response.data=$0.call(e,e.transformResponse,i.response),i.response.headers=Ur.from(i.response.headers))),Promise.reject(i)})}const hy=e=>e instanceof Ur?e.toJSON():e;function Ec(e,t){t=t||{};const n={};function i(d,u,l){return we.isPlainObject(d)&&we.isPlainObject(u)?we.merge.call({caseless:l},d,u):we.isPlainObject(u)?we.merge({},u):we.isArray(u)?u.slice():u}function s(d,u,l){if(we.isUndefined(u)){if(!we.isUndefined(d))return i(void 0,d,l)}else return i(d,u,l)}function r(d,u){if(!we.isUndefined(u))return i(void 0,u)}function o(d,u){if(we.isUndefined(u)){if(!we.isUndefined(d))return i(void 0,d)}else return i(void 0,u)}function a(d,u,l){if(l in t)return i(d,u);if(l in e)return i(void 0,d)}const c={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(d,u)=>s(hy(d),hy(u),!0)};return we.forEach(Object.keys(Object.assign({},e,t)),function(u){const l=c[u]||s,f=l(e[u],t[u],u);we.isUndefined(f)&&l!==a||(n[u]=f)}),n}const Gx="1.6.1",Vm={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Vm[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const py={};Vm.transitional=function(t,n,i){function s(r,o){return"[Axios v"+Gx+"] Transitional option '"+r+"'"+o+(i?". "+i:"")}return(r,o,a)=>{if(t===!1)throw new an(s(o," has been removed"+(n?" in "+n:"")),an.ERR_DEPRECATED);return n&&!py[o]&&(py[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(r,o,a):!0}};function J$(e,t,n){if(typeof e!="object")throw new an("options must be an object",an.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let s=i.length;for(;s-- >0;){const r=i[s],o=t[r];if(o){const a=e[r],c=a===void 0||o(a,r,e);if(c!==!0)throw new an("option "+r+" must be "+c,an.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new an("Unknown option "+r,an.ERR_BAD_OPTION)}}const Mp={assertOptions:J$,validators:Vm},ao=Mp.validators;class rf{constructor(t){this.defaults=t,this.interceptors={request:new cy,response:new cy}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Ec(this.defaults,n);const{transitional:i,paramsSerializer:s,headers:r}=n;i!==void 0&&Mp.assertOptions(i,{silentJSONParsing:ao.transitional(ao.boolean),forcedJSONParsing:ao.transitional(ao.boolean),clarifyTimeoutError:ao.transitional(ao.boolean)},!1),s!=null&&(we.isFunction(s)?n.paramsSerializer={serialize:s}:Mp.assertOptions(s,{encode:ao.function,serialize:ao.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=r&&we.merge(r.common,r[n.method]);r&&we.forEach(["delete","get","head","post","put","patch","common"],m=>{delete r[m]}),n.headers=Ur.concat(o,r);const a=[];let c=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(n)===!1||(c=c&&_.synchronous,a.unshift(_.fulfilled,_.rejected))});const d=[];this.interceptors.response.forEach(function(_){d.push(_.fulfilled,_.rejected)});let u,l=0,f;if(!c){const m=[fy.bind(this),void 0];for(m.unshift.apply(m,a),m.push.apply(m,d),f=m.length,u=Promise.resolve(n);l<f;)u=u.then(m[l++],m[l++]);return u}f=a.length;let p=n;for(l=0;l<f;){const m=a[l++],_=a[l++];try{p=m(p)}catch(x){_.call(this,x);break}}try{u=fy.call(this,p)}catch(m){return Promise.reject(m)}for(l=0,f=d.length;l<f;)u=u.then(d[l++],d[l++]);return u}getUri(t){t=Ec(this.defaults,t);const n=Kx(t.baseURL,t.url);return Lx(n,t.params,t.paramsSerializer)}}we.forEach(["delete","get","head","options"],function(t){rf.prototype[t]=function(n,i){return this.request(Ec(i||{},{method:t,url:n,data:(i||{}).data}))}});we.forEach(["post","put","patch"],function(t){function n(i){return function(r,o,a){return this.request(Ec(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}rf.prototype[t]=n(),rf.prototype[t+"Form"]=n(!0)});const _l=rf;class Xm{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});const i=this;this.promise.then(s=>{if(!i._listeners)return;let r=i._listeners.length;for(;r-- >0;)i._listeners[r](s);i._listeners=null}),this.promise.then=s=>{let r;const o=new Promise(a=>{i.subscribe(a),r=a}).then(s);return o.cancel=function(){i.unsubscribe(r)},o},t(function(r,o,a){i.reason||(i.reason=new mu(r,o,a),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Xm(function(s){t=s}),cancel:t}}}const Z$=Xm;function Y$(e){return function(n){return e.apply(null,n)}}function Q$(e){return we.isObject(e)&&e.isAxiosError===!0}const Dp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Dp).forEach(([e,t])=>{Dp[t]=e});const eR=Dp;function Vx(e){const t=new _l(e),n=Px(_l.prototype.request,t);return we.extend(n,_l.prototype,t,{allOwnKeys:!0}),we.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return Vx(Ec(e,s))},n}const Jn=Vx(Gm);Jn.Axios=_l;Jn.CanceledError=mu;Jn.CancelToken=Z$;Jn.isCancel=Hx;Jn.VERSION=Gx;Jn.toFormData=Ih;Jn.AxiosError=an;Jn.Cancel=Jn.CanceledError;Jn.all=function(t){return Promise.all(t)};Jn.spread=Y$;Jn.isAxiosError=Q$;Jn.mergeConfig=Ec;Jn.AxiosHeaders=Ur;Jn.formToJSON=e=>zx(we.isHTMLForm(e)?new FormData(e):e);Jn.getAdapter=Wx.getAdapter;Jn.HttpStatusCode=eR;Jn.default=Jn;const tR=Jn,nR="1.2.1",iR="1.29.0",sR={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class Xx extends Error{}class Jx extends Xx{constructor(t,n){super(t),this.code=n,this.type=sR[n]??"ServerError"}}class rR extends Xx{constructor(t,n,i){super(t),this.status=n,this.statusText=i}}var Jm=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Hn=(e,t,n)=>(Jm(e,t,"read from private field"),n?n.call(e):t.get(e)),co=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},oc=(e,t,n,i)=>(Jm(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),oR=(e,t,n,i)=>({set _(s){oc(e,t,s,n)},get _(){return Hn(e,t,i)}}),Zx=(e,t,n)=>(Jm(e,t,"access private method"),n),qo,vd,Er,Go,Fd,ac,jp,Yx,Zm,Qx;function aR(e){const t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}const cR={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class dR{constructor(t,n={}){if(co(this,jp),co(this,Zm),co(this,qo,0),co(this,vd,0),co(this,Er,null),co(this,Go,null),co(this,Fd,new Set),co(this,ac,new Map),this.endpoint=t,this.options={...cR,...n},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=aR(this.endpoint))}async makeRequest(t,n){const i=await Zx(this,jp,Yx).call(this);return new Promise((s,r)=>{oc(this,qo,Hn(this,qo)+1),Hn(this,ac).set(Hn(this,qo),{resolve:s,reject:r,timeout:setTimeout(()=>{Hn(this,ac).delete(Hn(this,qo)),r(new Error(`Request timeout: ${t}`))},this.options.callTimeout)}),i.send(JSON.stringify({jsonrpc:"2.0",id:Hn(this,qo),method:t,params:n}))}).then(({error:s,result:r})=>{if(s)throw new Jx(s.message,s.code);return r})}async subscribe(t){const n=new uR(t);return Hn(this,Fd).add(n),await n.subscribe(this),()=>n.unsubscribe(this)}}qo=new WeakMap;vd=new WeakMap;Er=new WeakMap;Go=new WeakMap;Fd=new WeakMap;ac=new WeakMap;jp=new WeakSet;Yx=function(){return Hn(this,Go)?Hn(this,Go):(oc(this,Go,new Promise(e=>{var t;(t=Hn(this,Er))==null||t.close(),oc(this,Er,new this.options.WebSocketConstructor(this.endpoint)),Hn(this,Er).addEventListener("open",()=>{oc(this,vd,0),e(Hn(this,Er))}),Hn(this,Er).addEventListener("close",()=>{oR(this,vd)._++,Hn(this,vd)<=this.options.maxReconnects&&setTimeout(()=>{Zx(this,Zm,Qx).call(this)},this.options.reconnectTimeout)}),Hn(this,Er).addEventListener("message",({data:n})=>{let i;try{i=JSON.parse(n)}catch(s){console.error(new Error(`Failed to parse RPC message: ${n}`,{cause:s}));return}if("id"in i&&i.id!=null&&Hn(this,ac).has(i.id)){const{resolve:s,timeout:r}=Hn(this,ac).get(i.id);clearTimeout(r),s(i)}else if("params"in i){const{params:s}=i;Hn(this,Fd).forEach(r=>{r.subscriptionId===s.subscription&&s.subscription===r.subscriptionId&&r.onMessage(s.result)})}})})),Hn(this,Go))};Zm=new WeakSet;Qx=async function(){var e;return(e=Hn(this,Er))==null||e.close(),oc(this,Go,null),Promise.allSettled([...Hn(this,Fd)].map(t=>t.subscribe(this)))};class uR{constructor(t){this.subscriptionId=null,this.subscribed=!1,this.input=t}onMessage(t){this.subscribed&&this.input.onMessage(t)}async unsubscribe(t){const{subscriptionId:n}=this;return this.subscribed=!1,n==null?!1:(this.subscriptionId=null,t.makeRequest(this.input.unsubscribe,[n]))}async subscribe(t){this.subscriptionId=null,this.subscribed=!0;const n=await t.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=n)}}var Ym=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},_s=(e,t,n)=>(Ym(e,t,"read from private field"),n?n.call(e):t.get(e)),Lu=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},qp=(e,t,n,i)=>(Ym(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),lR=(e,t,n)=>(Ym(e,t,"access private method"),n),pd,js,xd,Lp,eT;class fR{constructor(t){Lu(this,Lp),Lu(this,pd,0),Lu(this,js,void 0),Lu(this,xd,void 0),qp(this,js,t)}fetch(t,n){const i=_s(this,js).fetch??fetch;if(!i)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return i(t,n)}async request(t){var s,r;qp(this,pd,_s(this,pd)+1);const n=await this.fetch(((s=_s(this,js).rpc)==null?void 0:s.url)??_s(this,js).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":nR,"Client-Target-Api-Version":iR,...(r=_s(this,js).rpc)==null?void 0:r.headers},body:JSON.stringify({jsonrpc:"2.0",id:_s(this,pd),method:t.method,params:t.params})});if(!n.ok)throw new rR(`Unexpected status code: ${n.status}`,n.status,n.statusText);const i=await n.json();if("error"in i&&i.error!=null)throw new Jx(i.error.message,i.error.code);return i.result}async subscribe(t){const n=await lR(this,Lp,eT).call(this).subscribe(t);return async()=>!!await n()}}pd=new WeakMap;js=new WeakMap;xd=new WeakMap;Lp=new WeakSet;eT=function(){var e;if(!_s(this,xd)){const t=_s(this,js).WebSocketConstructor??WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");qp(this,xd,new dR(((e=_s(this,js).websocket)==null?void 0:e.url)??_s(this,js).url,{WebSocketConstructor:t,..._s(this,js).websocket}))}return _s(this,xd)};const hR=Symbol.for("@mysten/SuiClient");class pR{get[hR](){return!0}constructor(t){this.transport=t.transport??new fR({url:t.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(t){if(!t.owner||!or(zt(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[t.owner,t.coinType,t.cursor,t.limit]})}async getAllCoins(t){if(!t.owner||!or(zt(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[t.owner,t.cursor,t.limit]})}async getBalance(t){if(!t.owner||!or(zt(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[t.owner,t.coinType]})}async getAllBalances(t){if(!t.owner||!or(zt(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[t.owner]})}async getCoinMetadata(t){return await this.transport.request({method:"suix_getCoinMetadata",params:[t.coinType]})}async getTotalSupply(t){return await this.transport.request({method:"suix_getTotalSupply",params:[t.coinType]})}async call(t,n){return await this.transport.request({method:t,params:n})}async getMoveFunctionArgTypes(t){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[t.package,t.module,t.function]})}async getNormalizedMoveModulesByPackage(t){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[t.package]})}async getNormalizedMoveModule(t){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[t.package,t.module]})}async getNormalizedMoveFunction(t){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[t.package,t.module,t.function]})}async getNormalizedMoveStruct(t){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[t.package,t.module,t.struct]})}async getOwnedObjects(t){if(!t.owner||!or(zt(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[t.owner,{filter:t.filter,options:t.options},t.cursor,t.limit]})}async getObject(t){if(!t.id||!fd(gn(t.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[t.id,t.options]})}async tryGetPastObject(t){return await this.transport.request({method:"sui_tryGetPastObject",params:[t.id,t.version,t.options]})}async multiGetObjects(t){if(t.ids.forEach(i=>{if(!i||!fd(gn(i)))throw new Error(`Invalid Sui Object id ${i}`)}),t.ids.length!==new Set(t.ids).size)throw new Error(`Duplicate object ids in batch call ${t.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[t.ids,t.options]})}async queryTransactionBlocks(t){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:t.filter,options:t.options},t.cursor,t.limit,(t.order||"descending")==="descending"]})}async getTransactionBlock(t){if(!Gb(t.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[t.digest,t.options]})}async multiGetTransactionBlocks(t){if(t.digests.forEach(i=>{if(!Gb(i))throw new Error(`Invalid Transaction digest ${i}`)}),t.digests.length!==new Set(t.digests).size)throw new Error(`Duplicate digests in batch call ${t.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[t.digests,t.options]})}async executeTransactionBlock(t){return await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof t.transactionBlock=="string"?t.transactionBlock:Bi(t.transactionBlock),Array.isArray(t.signature)?t.signature:[t.signature],t.options,t.requestType]})}async signAndExecuteTransaction({transaction:t,signer:n,...i}){let s;t instanceof Uint8Array?s=t:(t.setSenderIfNotSet(n.toSuiAddress()),s=await t.build({client:this}));const{signature:r,bytes:o}=await n.signTransaction(s);return this.executeTransactionBlock({transactionBlock:o,signature:r,...i})}async getTotalTransactionBlocks(){const t=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(t)}async getReferenceGasPrice(){const t=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(t)}async getStakes(t){if(!t.owner||!or(zt(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[t.owner]})}async getStakesByIds(t){return t.stakedSuiIds.forEach(n=>{if(!n||!fd(gn(n)))throw new Error(`Invalid Sui Stake id ${n}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[t.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(t){return await this.transport.request({method:"suix_queryEvents",params:[t.query,t.cursor,t.limit,(t.order||"descending")==="descending"]})}async subscribeEvent(t){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[t.filter],onMessage:t.onMessage})}async subscribeTransaction(t){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[t.filter],onMessage:t.onMessage})}async devInspectTransactionBlock(t){var i;let n;if(Ex(t.transactionBlock))t.transactionBlock.setSenderIfNotSet(t.sender),n=Bi(await t.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof t.transactionBlock=="string")n=t.transactionBlock;else if(t.transactionBlock instanceof Uint8Array)n=Bi(t.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[t.sender,n,(i=t.gasPrice)==null?void 0:i.toString(),t.epoch]})}async dryRunTransactionBlock(t){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof t.transactionBlock=="string"?t.transactionBlock:Bi(t.transactionBlock)]})}async getDynamicFields(t){if(!t.parentId||!fd(gn(t.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[t.parentId,t.cursor,t.limit]})}async getDynamicFieldObject(t){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[t.parentId,t.name]})}async getLatestCheckpointSequenceNumber(){const t=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(t)}async getCheckpoint(t){return await this.transport.request({method:"sui_getCheckpoint",params:[t.id]})}async getCheckpoints(t){return await this.transport.request({method:"sui_getCheckpoints",params:[t.cursor,t==null?void 0:t.limit,t.descendingOrder]})}async getCommitteeInfo(t){return await this.transport.request({method:"suix_getCommitteeInfo",params:[t==null?void 0:t.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(t){return await this.transport.request({method:"suix_getEpochMetrics",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getAllEpochAddressMetrics(t){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[t==null?void 0:t.descendingOrder]})}async getEpochs(t){return await this.transport.request({method:"suix_getEpochs",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const t=await this.getCheckpoint({id:"0"}),n=qd(t.digest);return Ld(n.slice(0,4))}async resolveNameServiceAddress(t){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[t.name]})}async resolveNameServiceNames({format:t="dot",...n}){const{nextCursor:i,hasNextPage:s,data:r}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[n.address,n.cursor,n.limit]});return{hasNextPage:s,nextCursor:i,data:r.map(o=>gB(o,t))}}async getProtocolConfig(t){return await this.transport.request({method:"sui_getProtocolConfig",params:[t==null?void 0:t.version]})}async waitForTransaction({signal:t,timeout:n=60*1e3,pollInterval:i=2*1e3,...s}){const r=AbortSignal.timeout(n),o=new Promise((a,c)=>{r.addEventListener("abort",()=>c(r.reason))});for(o.catch(()=>{});!r.aborted;){t==null||t.throwIfAborted();try{return await this.getTransactionBlock(s)}catch{await Promise.race([new Promise(c=>setTimeout(c,i)),o])}}throw r.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}var gR=Object.defineProperty,mR=(e,t,n)=>t in e?gR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_R=(e,t,n)=>(mR(e,typeof t!="symbol"?t+"":t,n),n),os=5*60*1e3,Ye=24*60*60*1e3;function mn(e){return Date.parse(new Date().toString())+e}var $i=class{constructor(e,t=0){We(this,"overdueTime");We(this,"value");this.overdueTime=t,this.value=e}isValid(){return this.value===null?!1:this.overdueTime===0?!0:!(Date.parse(new Date().toString())>this.overdueTime)}};ie.config({precision:64,rounding:ie.ROUND_DOWN,toExpNeg:-64,toExpPos:64});var _i=ie,Ne=class extends Error{constructor(t,n){super(t);We(this,"message");We(this,"errorCode");this.message=t,this.errorCode=n}static isClmmpoolsErrorCode(t,n){return t instanceof Ne&&t.errorCode===n}},dt=new w(0),pr=new w(1),Oh=new w(2);Oh.pow(new w(128));var Pc=Oh.pow(new w(64)).sub(pr),bR=Oh.pow(new w(128)).sub(pr),Ft=class{static toX64_BN(e){return e.mul(new w(2).pow(new w(64)))}static toX64_Decimal(e){return e.mul(_i.pow(2,64))}static toX64(e){return new w(e.mul(_i.pow(2,64)).floor().toFixed())}static fromX64(e){return new _i(e.toString()).mul(_i.pow(2,-64))}static fromX64_Decimal(e){return e.mul(_i.pow(2,-64))}static fromX64_BN(e){return e.div(new w(2).pow(new w(64)))}static shiftRightRoundUp(e){let t=e.shrn(64);return e.mod(Pc).gt(dt)&&(t=t.add(pr)),t}static divRoundUp(e,t){return e.mod(t).eq(dt)?e.div(t):e.div(t).add(new w(1))}static subUnderflowU128(e,t){return e.lt(t)?e.sub(t).add(bR):e.sub(t)}static checkUnsignedSub(e,t){const n=e.sub(t);if(n.isNeg())throw new Ne("Unsigned integer sub overflow","UnsignedIntegerOverflow");return n}static checkMul(e,t,n){const i=e.mul(t);if(this.isOverflow(i,n))throw new Ne("Multiplication overflow","MultiplicationOverflow");return i}static checkMulDivFloor(e,t,n,i){if(n.eq(dt))throw new Ne("Devide by zero","DivideByZero");const s=e.mul(t).div(n);if(this.isOverflow(s,i))throw new Ne("Multiplication div overflow","MulDivOverflow");return s}static checkMulDivCeil(e,t,n,i){if(n.eq(dt))throw new Ne("Devide by zero","DivideByZero");const s=e.mul(t).add(n.sub(pr)).div(n);if(this.isOverflow(s,i))throw new Ne("Multiplication div overflow","MulDivOverflow");return s}static checkMulDivRound(e,t,n,i){if(n.eq(dt))throw new Ne("Devide by zero","DivideByZero");const s=e.mul(t.add(n.shrn(1))).div(n);if(this.isOverflow(s,i))throw new Ne("Multiplication div overflow","MulDivOverflow");return s}static checkMulShiftRight(e,t,n,i){const s=e.mul(t).div(new w(2).pow(new w(n)));if(this.isOverflow(s,i))throw new Ne("Multiplication shift right overflow","MulShiftRightOverflow");return s}static checkMulShiftRight64RoundUpIf(e,t,n,i){const s=e.mul(t),o=i&&s.and(Pc).gt(dt)?s.shrn(64).add(pr):s.shrn(64);if(this.isOverflow(o,n))throw new Ne("Multiplication shift right overflow","MulShiftRightOverflow");return o}static checkMulShiftLeft(e,t,n,i){const s=e.mul(t).shln(n);if(this.isOverflow(s,i))throw new Ne("Multiplication shift left overflow","MulShiftLeftOverflow");return s}static checkDivRoundUpIf(e,t,n){if(t.eq(dt))throw new Ne("Devide by zero","DivideByZero");return n?this.divRoundUp(e,t):e.div(t)}static isOverflow(e,t){return e.gte(Oh.pow(new w(t)))}static sign(e){return e.testn(127)?1:0}static is_neg(e){return this.sign(e)===1}static abs_u128(e){return e.gt(dt)?e:this.u128_neg(e.subn(1))}static u128_neg(e){return e.uxor(new w("ffffffffffffffffffffffffffffffff",16))}static neg(e){return this.is_neg(e)?e.abs():this.neg_from(e)}static abs(e){return this.sign(e)===0?e:this.u128_neg(e.sub(new w(1)))}static neg_from(e){return e.eq(dt)?e:this.u128_neg(e).add(new w(1)).or(new w(1).shln(127))}};function yR(e){return{coinA:e.coinTypeA,coinB:e.coinTypeB,currentSqrtPrice:new w(e.current_sqrt_price),currentTickIndex:e.current_tick_index,feeGrowthGlobalA:new w(e.fee_growth_global_a),feeGrowthGlobalB:new w(e.fee_growth_global_b),feeProtocolCoinA:new w(e.fee_protocol_coin_a),feeProtocolCoinB:new w(e.fee_protocol_coin_b),feeRate:new w(e.fee_rate),liquidity:new w(e.liquidity),tickIndexes:[],tickSpacing:Number(e.tickSpacing),ticks:[],collection_name:""}}var Np=443636,Fp=-443636,$h="79226673515401279992447579055",Rh="4295048016",Wa=new w(1e6),Oe="0x0000000000000000000000000000000000000000000000000000000000000006",wR="partner",Td="pool_script",ko="pool_script_v2",tT="pool_script_v3",Vo="router",U0="router_with_partner",Ts="fetcher_script",vR="expect_swap",gy="utils",M0="custodian_v2",xR="clob_v2",TR="endpoints_v2",nT=(e=>(e.Deleted="Deleted",e.Exists="Exists",e.NotExists="NotExists",e))(nT||{});function J(e){if(e.config===void 0)throw new Ne(`package: ${e.package_id}  not config in sdk SdkOptions`,"InvalidConfig");return e.config}var AR=14,kR="59543866431248",SR="184467440737095516",ER="15793534762490258745",PR=443636;function CR(e,t,n){const i=e.toTwos(n).shln(t);return i.imaskn(n+1),i.fromTwos(n)}function Zt(e,t,n){const i=e.toTwos(n).shrn(t);return i.imaskn(n-t+1),i.fromTwos(n-t)}function IR(e){let t;return e&1?t=new w("79232123823359799118286999567"):t=new w("79228162514264337593543950336"),e&2&&(t=Zt(t.mul(new w("79236085330515764027303304731")),96,256)),e&4&&(t=Zt(t.mul(new w("79244008939048815603706035061")),96,256)),e&8&&(t=Zt(t.mul(new w("79259858533276714757314932305")),96,256)),e&16&&(t=Zt(t.mul(new w("79291567232598584799939703904")),96,256)),e&32&&(t=Zt(t.mul(new w("79355022692464371645785046466")),96,256)),e&64&&(t=Zt(t.mul(new w("79482085999252804386437311141")),96,256)),e&128&&(t=Zt(t.mul(new w("79736823300114093921829183326")),96,256)),e&256&&(t=Zt(t.mul(new w("80248749790819932309965073892")),96,256)),e&512&&(t=Zt(t.mul(new w("81282483887344747381513967011")),96,256)),e&1024&&(t=Zt(t.mul(new w("83390072131320151908154831281")),96,256)),e&2048&&(t=Zt(t.mul(new w("87770609709833776024991924138")),96,256)),e&4096&&(t=Zt(t.mul(new w("97234110755111693312479820773")),96,256)),e&8192&&(t=Zt(t.mul(new w("119332217159966728226237229890")),96,256)),e&16384&&(t=Zt(t.mul(new w("179736315981702064433883588727")),96,256)),e&32768&&(t=Zt(t.mul(new w("407748233172238350107850275304")),96,256)),e&65536&&(t=Zt(t.mul(new w("2098478828474011932436660412517")),96,256)),e&131072&&(t=Zt(t.mul(new w("55581415166113811149459800483533")),96,256)),e&262144&&(t=Zt(t.mul(new w("38992368544603139932233054999993551")),96,256)),Zt(t,32,256)}function BR(e){const t=Math.abs(e);let n;return t&1?n=new w("18445821805675392311"):n=new w("18446744073709551616"),t&2&&(n=Zt(n.mul(new w("18444899583751176498")),64,256)),t&4&&(n=Zt(n.mul(new w("18443055278223354162")),64,256)),t&8&&(n=Zt(n.mul(new w("18439367220385604838")),64,256)),t&16&&(n=Zt(n.mul(new w("18431993317065449817")),64,256)),t&32&&(n=Zt(n.mul(new w("18417254355718160513")),64,256)),t&64&&(n=Zt(n.mul(new w("18387811781193591352")),64,256)),t&128&&(n=Zt(n.mul(new w("18329067761203520168")),64,256)),t&256&&(n=Zt(n.mul(new w("18212142134806087854")),64,256)),t&512&&(n=Zt(n.mul(new w("17980523815641551639")),64,256)),t&1024&&(n=Zt(n.mul(new w("17526086738831147013")),64,256)),t&2048&&(n=Zt(n.mul(new w("16651378430235024244")),64,256)),t&4096&&(n=Zt(n.mul(new w("15030750278693429944")),64,256)),t&8192&&(n=Zt(n.mul(new w("12247334978882834399")),64,256)),t&16384&&(n=Zt(n.mul(new w("8131365268884726200")),64,256)),t&32768&&(n=Zt(n.mul(new w("3584323654723342297")),64,256)),t&65536&&(n=Zt(n.mul(new w("696457651847595233")),64,256)),t&131072&&(n=Zt(n.mul(new w("26294789957452057")),64,256)),t&262144&&(n=Zt(n.mul(new w("37481735321082")),64,256)),n}var qe=class{static priceToSqrtPriceX64(e,t,n){return Ft.toX64(e.mul(_i.pow(10,n-t)).sqrt())}static sqrtPriceX64ToPrice(e,t,n){return Ft.fromX64(e).pow(2).mul(_i.pow(10,t-n))}static tickIndexToSqrtPriceX64(e){return e>0?new w(IR(e)):new w(BR(e))}static sqrtPriceX64ToTickIndex(e){if(e.gt(new w($h))||e.lt(new w(Rh)))throw new Ne("Provided sqrtPrice is not within the supported sqrtPrice range.","InvalidSqrtPrice");const t=e.bitLength()-1,n=new w(t-64),i=CR(n,32,128);let s=new w("8000000000000000","hex"),r=0,o=new w(0),a=t>=64?e.shrn(t-63):e.shln(63-t);for(;s.gt(new w(0))&&r<AR;){a=a.mul(a);const m=a.shrn(127);a=a.shrn(63+m.toNumber()),o=o.add(s.mul(m)),s=s.shrn(1),r+=1}const c=o.shrn(32),u=i.add(c).mul(new w(kR)),l=Zt(u.sub(new w(SR)),64,128).toNumber(),f=Zt(u.add(new w(ER)),64,128).toNumber();return l===f?l:qe.tickIndexToSqrtPriceX64(f).lte(e)?f:l}static tickIndexToPrice(e,t,n){return qe.sqrtPriceX64ToPrice(qe.tickIndexToSqrtPriceX64(e),t,n)}static priceToTickIndex(e,t,n){return qe.sqrtPriceX64ToTickIndex(qe.priceToSqrtPriceX64(e,t,n))}static priceToInitializableTickIndex(e,t,n,i){return qe.getInitializableTickIndex(qe.priceToTickIndex(e,t,n),i)}static getInitializableTickIndex(e,t){return e-e%t}static getNextInitializableTickIndex(e,t){return qe.getInitializableTickIndex(e,t)+t}static getPrevInitializableTickIndex(e,t){return qe.getInitializableTickIndex(e,t)-t}};function OR(e){const t=[];for(const n of e){const i={objectId:n.objectId,index:Number(Xn(BigInt(n.index)).toString()),sqrtPrice:n.sqrtPrice,liquidityNet:new w(BigInt.asIntN(128,BigInt(BigInt(n.liquidityNet.toString()))).toString()),liquidityGross:n.liquidityGross,feeGrowthOutsideA:n.feeGrowthOutsideA,feeGrowthOutsideB:n.feeGrowthOutsideB,rewardersGrowthOutside:[new w(n.rewardersGrowthOutside[0]),new w(n.rewardersGrowthOutside[1]),new w(n.rewardersGrowthOutside[2])]};t.push(i)}return t}function $R(e){return q(e).add(q(PR))}new w(365);new w(24);new w(3600);new w(.5);function RR(e,t,n,i){const s=Math.max(e,n),o=Math.min(t,i)-s,a=t-e,c=i-n,d=new ie(a.toString()),u=new ie(c.toString()),l=new ie(o.toString());let f=new ie("0");return o<0?f=new ie("0"):a===o?f=u.div(l):c===o?f=l.div(d):f=l.mul(l).div(u).div(d),f}var ar=class{static getDefaultSqrtPriceLimit(e){return new w(e?Rh:$h)}static getDefaultOtherAmountThreshold(e){return e?dt:Pc}};function iT(e,t,n,i){if(n.eq(dt))return e;const s=Ft.checkMulShiftLeft(e,t,64,256),r=t.shln(64),o=Ft.checkMul(e,n,256);if(!i&&r.lte(o))throw new Ne("getNextSqrtPriceAUp - Unable to divide liquidityShl64 by product","DivideByZero");const a=i?Ft.checkDivRoundUpIf(s,r.add(o),!0):Ft.checkDivRoundUpIf(s,r.sub(o),!0);if(a.lt(new w(Rh)))throw new Ne("getNextSqrtPriceAUp - Next sqrt price less than min sqrt price","CoinAmountMinSubceeded ");if(a.gt(new w($h)))throw new Ne("getNextSqrtPriceAUp - Next sqrt price greater than max sqrt price","CoinAmountMaxExceeded");return a}function sT(e,t,n,i){const s=Ft.checkDivRoundUpIf(n.shln(64),t,!i),r=i?e.add(s):e.sub(s);if(r.lt(new w(Rh))||r.gt(new w($h)))throw new Ne("getNextSqrtPriceAUp - Next sqrt price out of bounds","SqrtPriceOutOfBounds");return r}function UR(e,t,n,i){return i?iT(e,t,n,!0):sT(e,t,n,!0)}function MR(e,t,n,i){return i?sT(e,t,n,!1):iT(e,t,n,!1)}function my(e,t,n,i){const s=e.gt(t)?e.sub(t):t.sub(e);if(n.lte(dt)||s.eq(dt))return dt;let r;if(i){const o=new w(n).mul(new w(s)).shln(64),a=t.mul(e),c=o.div(a);r=o.mod(a).eq(dt)?c:c.add(pr)}else{const o=new w(n).mul(new w(s));r=o.and(Pc).gt(dt)?o.shrn(64).add(pr):o.shrn(64)}return r}function _y(e,t,n,i){const s=e.gt(t)?e.sub(t):t.sub(e);if(n.lte(dt)||s.eq(dt))return dt;let r;if(i)r=n.mul(s).shrn(64);else{const o=n.mul(s).shln(64),a=t.mul(e);r=o.div(a)}return r}function DR(e,t,n,i,s,r){if(n===dt)return{amountIn:dt,amountOut:dt,nextSqrtPrice:t,feeAmount:dt};const o=e.gte(t);let a,c,d,u;if(r){const l=Ft.checkMulDivFloor(i,Ft.checkUnsignedSub(Wa,s),Wa,64),f=my(e,t,n,o);f.gt(l)?(a=l,u=Ft.checkUnsignedSub(i,l),d=UR(e,n,l,o)):(a=f,u=Ft.checkMulDivCeil(a,s,Wa.sub(s),64),d=t),c=_y(e,d,n,o)}else{const l=_y(e,t,n,o);l.gt(i)?(c=i,d=MR(e,n,i,o)):(c=l,d=t),a=my(e,d,n,o),u=Ft.checkMulDivCeil(a,s,Wa.sub(s),64)}return{amountIn:a,amountOut:c,nextSqrtPrice:d,feeAmount:u}}function jR(e,t,n,i,s){let r=n,o=i.liquidity,{currentSqrtPrice:a}=i;const c={amountIn:dt,amountOut:dt,feeAmount:dt,refAmount:dt,nextSqrtPrice:dt,crossTickNum:0};let d,u;const l=ar.getDefaultSqrtPriceLimit(e);for(const f of s){if(e&&i.currentTickIndex<f.index||!e&&i.currentTickIndex>=f.index||f===null)continue;e&&l.gt(f.sqrtPrice)||!e&&l.lt(f.sqrtPrice)?d=l:d=f.sqrtPrice;const p=DR(a,d,o,r,i.feeRate,t);if(p.amountIn.eq(dt)||(r=t?r.sub(p.amountIn.add(p.feeAmount)):r.sub(p.amountOut)),c.amountIn=c.amountIn.add(p.amountIn),c.amountOut=c.amountOut.add(p.amountOut),c.feeAmount=c.feeAmount.add(p.feeAmount),p.nextSqrtPrice.eq(f.sqrtPrice)?(u=f.liquidityNet.mul(new w(-1)),e?Ft.is_neg(u)?o=o.add(new w(yi(BigInt(u.toString()),128))):o=o.add(u):Ft.is_neg(u)?o=o.sub(new w(yi(BigInt(u.toString()),128))):o=o.sub(u),a=f.sqrtPrice):a=p.nextSqrtPrice,c.crossTickNum+=1,r.eq(dt))break}return c.amountIn=c.amountIn.add(c.feeAmount),c.nextSqrtPrice=a,c}function gd(e,t,n){const i=w.min(e,t),s=w.max(e,t),r=Ft.fromX64_BN(n.mul(s).mul(i)),o=s.sub(i);return r.div(o)}function md(e,t,n){const i=w.min(e,t),r=w.max(e,t).sub(i);return n.shln(64).div(r)}var Pn=class{static updateFeeRate(e,t,n,i,s){const r=Ft.checkMulDivCeil(t,new w(i),Wa,64),o=n===0?dt:Ft.checkMulDivFloor(t,new w(n),Wa,64),a=t.mul(r).mul(o);if(s?e.feeProtocolCoinA=e.feeProtocolCoinA.add(r):e.feeProtocolCoinB=e.feeProtocolCoinB.add(r),a.eq(dt)||e.liquidity.eq(dt))return{refFee:o,clmm:e};const c=a.shln(64).div(e.liquidity);return s?e.feeGrowthGlobalA=e.feeGrowthGlobalA.add(c):e.feeGrowthGlobalB=e.feeGrowthGlobalB.add(c),{refFee:o,clmm:e}}static getCoinAmountFromLiquidity(e,t,n,i,s){const r=new _i(e.toString()),o=new _i(t.toString()),a=new _i(n.toString()),c=new _i(i.toString());let d,u;return t.lt(n)?(d=Ft.toX64_Decimal(r).mul(c.sub(a)).div(a.mul(c)),u=new _i(0)):t.lt(i)?(d=Ft.toX64_Decimal(r).mul(c.sub(o)).div(o.mul(c)),u=Ft.fromX64_Decimal(r.mul(o.sub(a)))):(d=new _i(0),u=Ft.fromX64_Decimal(r.mul(c.sub(a)))),s?{coinA:new w(d.ceil().toString()),coinB:new w(u.ceil().toString())}:{coinA:new w(d.floor().toString()),coinB:new w(u.floor().toString())}}static estLiquidityAndcoinAmountFromOneAmounts(e,t,n,i,s,r,o){const a=qe.sqrtPriceX64ToTickIndex(o),c=qe.tickIndexToSqrtPriceX64(e),d=qe.tickIndexToSqrtPriceX64(t);let u;if(a<e){if(!i)throw new Ne("lower tick cannot calculate liquidity by coinB","NotSupportedThisCoin");u=gd(c,d,n)}else if(a>t){if(i)throw new Ne("upper tick cannot calculate liquidity by coinA","NotSupportedThisCoin");u=md(d,c,n)}else i?u=gd(o,d,n):u=md(o,c,n);const l=Pn.getCoinAmountFromLiquidity(u,o,c,d,s),f=s?q(l.coinA.toString()).mul(1+r).toString():q(l.coinA.toString()).mul(1-r).toString(),p=s?q(l.coinB.toString()).mul(1+r).toString():q(l.coinB.toString()).mul(1-r).toString();return{coinAmountA:l.coinA,coinAmountB:l.coinB,tokenMaxA:s?new w(_i.ceil(f).toString()):new w(_i.floor(f).toString()),tokenMaxB:s?new w(_i.ceil(p).toString()):new w(_i.floor(p).toString()),liquidityAmount:u,fix_amount_a:i}}static estimateLiquidityFromcoinAmounts(e,t,n,i){if(t>n)throw new Ne("lower tick cannot be greater than lower tick","InvalidTwoTickIndex");const s=qe.sqrtPriceX64ToTickIndex(e),r=qe.tickIndexToSqrtPriceX64(t),o=qe.tickIndexToSqrtPriceX64(n);if(s<t)return gd(r,o,i.coinA);if(s>=n)return md(o,r,i.coinB);const a=gd(e,o,i.coinA),c=md(e,r,i.coinB);return w.min(a,c)}static estCoinAmountsFromTotalAmount(e,t,n,i,s,r){const{ratioA:o,ratioB:a}=Pn.calculateDepositRatioFixTokenA(e,t,n),c=q(i).mul(o).div(s),d=q(i).mul(a).div(r);return{amountA:c,amountB:d}}static calculateDepositRatioFixTokenA(e,t,n){const i=new w(1e8),{coinAmountB:s}=Pn.estLiquidityAndcoinAmountFromOneAmounts(e,t,i,!0,!0,0,n),r=qe.sqrtPriceX64ToPrice(n,0,0),o=q(i.toString()).mul(r),a=o.add(s.toString()),c=o.div(a),d=q(s.toString()).div(a);return{ratioA:c,ratioB:d}}};function rT(e){return e.startsWith("0x")?`${e.slice(2)}`:e}var qR=0,oT=1,LR=2;function by(e,t){return e===t?qR:e<t?oT:LR}function NR(e,t){let n=0;const i=e.length<=t.length?e.length:t.length,s=by(e.length,t.length);for(;n<i;){const r=by(e.charCodeAt(n),t.charCodeAt(n));if(n+=1,r!==0)return r}return s}function of(e,t){return NR(e,t)===oT}function af(e,...t){const n=Array.isArray(t[t.length-1])?t.pop():[];let s=[e,...t].filter(Boolean).join("::");return n&&n.length&&(s+=`<${n.join(", ")}>`),s}function pe(e){var t;try{let n=e.replace(/\s/g,"");const i=n.match(/(<.+>)$/),s=(t=i==null?void 0:i[0])==null?void 0:t.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(s){n=n.slice(0,n.indexOf("<"));const d={...pe(n),type_arguments:s.map(u=>pe(u).source_address)};return d.type_arguments=d.type_arguments.map(u=>en.isSuiCoin(u)?u:pe(u).source_address),d.source_address=af(d.full_address,d.type_arguments),d}const r=n.split("::"),a={full_address:n,address:n===cf||n===WR?"0x2":gn(r[0]),module:r[1],name:r[2],type_arguments:[],source_address:""};return a.full_address=`${a.address}::${a.module}::${a.name}`,a.source_address=af(a.full_address,a.type_arguments),a}catch{return{full_address:e,address:"",module:"",name:"",type_arguments:[],source_address:e}}}function jn(e){return pe(e).source_address}function FR(e){return e.toLowerCase().startsWith("0x")?gn(e):e}var zR=(e,t=!0)=>{const n=e.split("::"),i=n.shift();let s=gn(i);return t&&(s=rT(s)),`${s}::${n.join("::")}`};function Qm(e){for(const t in e){const n=typeof e[t];if(n==="object")Qm(e[t]);else if(n==="string"){const i=e[t];i&&!i.includes("::")&&(e[t]=FR(i))}}}var HR="0x2::coin::Coin",KR=/^0x2::coin::Coin<(.+)>$/,cf="0x2::sui::SUI",WR="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",en=class{static getCoinTypeArg(e){const t=e.type.match(KR);return t?t[1]:null}static isSUI(e){const t=en.getCoinTypeArg(e);return t?en.getCoinSymbol(t)==="SUI":!1}static getCoinSymbol(e){return e.substring(e.lastIndexOf(":")+1)}static getBalance(e){return BigInt(e.fields.balance)}static totalBalance(e,t){let n=BigInt(0);return e.forEach(i=>{t===i.coinAddress&&(n+=BigInt(i.balance))}),n}static getID(e){return e.fields.id.id}static getCoinTypeFromArg(e){return`${HR}<${e}>`}static getFaucetCoins(e){const{events:t}=e,n=[];return t==null||t.forEach(i=>{const{type:s}=i;if(pe(s).name==="InitEvent"){const r=i.parsedJson;n.push({transactionModule:i.transactionModule,suplyID:r.suplyID,decimals:r.decimals})}}),n}static getCoinAssets(e,t){const n=[];return t.forEach(i=>{jn(i.coinAddress)===jn(e)&&n.push(i)}),n}static isSuiCoin(e){return pe(e).full_address===cf}static selectCoinObjectIdGreaterThanOrEqual(e,t,n=[]){const i=en.selectCoinAssetGreaterThanOrEqual(e,t,n),s=i.selectedCoins.map(a=>a.coinObjectId),r=i.remainingCoins,o=i.selectedCoins.map(a=>a.balance.toString());return{objectArray:s,remainCoins:r,amountArray:o}}static selectCoinAssetGreaterThanOrEqual(e,t,n=[]){const i=en.sortByBalance(e.filter(c=>!n.includes(c.coinObjectId))),s=en.calculateTotalBalance(i);if(s<t)return{selectedCoins:[],remainingCoins:i};if(s===t)return{selectedCoins:i,remainingCoins:[]};let r=BigInt(0);const o=[],a=[...i];for(;r<s;){const c=t-r,d=a.findIndex(l=>l.balance>=c);if(d!==-1){o.push(a[d]),a.splice(d,1);break}const u=a.pop();u.balance>0&&(o.push(u),r+=u.balance)}return{selectedCoins:en.sortByBalance(o),remainingCoins:en.sortByBalance(a)}}static sortByBalance(e){return e.sort((t,n)=>t.balance<n.balance?-1:t.balance>n.balance?1:0)}static sortByBalanceDes(e){return e.sort((t,n)=>t.balance>n.balance?-1:t.balance<n.balance?0:1)}static calculateTotalBalance(e){return e.reduce((t,n)=>t+n.balance,BigInt(0))}};function GR(e,t,n){let i=new w(0),s=new w(0);e.current_tick_index<t.index?(i=Ft.subUnderflowU128(new w(e.fee_growth_global_a),new w(t.feeGrowthOutsideA)),s=Ft.subUnderflowU128(new w(e.fee_growth_global_b),new w(t.feeGrowthOutsideB))):(i=new w(t.feeGrowthOutsideA),s=new w(t.feeGrowthOutsideB));let r=new w(0),o=new w(0);e.current_tick_index<n.index?(r=new w(n.feeGrowthOutsideA),o=new w(n.feeGrowthOutsideB)):(r=Ft.subUnderflowU128(new w(e.fee_growth_global_a),new w(n.feeGrowthOutsideA)),o=Ft.subUnderflowU128(new w(e.fee_growth_global_b),new w(n.feeGrowthOutsideB)));const a=Ft.subUnderflowU128(Ft.subUnderflowU128(new w(e.fee_growth_global_a),i),r),c=Ft.subUnderflowU128(Ft.subUnderflowU128(new w(e.fee_growth_global_b),s),o);return{fee_growth_inside_a:a,fee_growth_inside_b:c}}function VR(e,t,n){const i=Ft.subUnderflowU128(t,new w(e.fee_growth_inside_a)),s=new w(e.liquidity).mul(i).shrn(64),r=Ft.subUnderflowU128(n,new w(e.fee_growth_inside_b)),o=new w(e.liquidity).mul(r).shrn(64),a=new w(e.fee_owed_a).add(s),c=new w(e.fee_owed_b).add(o);return{position_id:e.pos_object_id,feeOwedA:a,feeOwedB:c}}function XR(e){const{fee_growth_inside_a:t,fee_growth_inside_b:n}=GR(e.clmmpool,e.tickLower,e.tickUpper);return VR(e.position,t,n)}var Ad=class{constructor(e,t){We(this,"numerator");We(this,"denominator");this.toString=()=>`${this.numerator.toString()}/${this.denominator.toString()}`,this.numerator=e,this.denominator=t}static fromDecimal(e){return Ad.fromFraction(e.toDecimalPlaces(1).mul(10).toNumber(),1e3)}static fromFraction(e,t){const n=typeof e=="number"?new w(e.toString()):e,i=typeof t=="number"?new w(t.toString()):t;return new Ad(n,i)}};function zp(e,{numerator:t,denominator:n},i){return i?e.mul(n.add(t)).div(n):e.mul(n).div(n.add(t))}function D0(e,t,n){return{tokenMaxA:zp(e.coinA,t,n),tokenMaxB:zp(e.coinB,t,n)}}function q(e){return ie.isDecimal(e)?e:new ie(e===void 0?0:e)}function JR(e){return q(10).pow(q(e).abs())}function _u(e){return e.data}function aT(e){if(e.error&&"object_id"in e.error&&"version"in e.error&&"digest"in e.error){const{error:t}=e;return{objectId:t.object_id,version:t.version,digest:t.digest}}}function cT(e){if(e.error&&"object_id"in e.error&&!("version"in e.error)&&!("digest"in e.error))return e.error.object_id}function ZR(e){if("reference"in e)return e.reference;const t=_u(e);return t?{objectId:t.objectId,version:t.version,digest:t.digest}:aT(e)}function Hs(e){var t;return"objectId"in e?e.objectId:((t=ZR(e))==null?void 0:t.objectId)??cT(e)}function YR(e){return e.data!==void 0}function QR(e){return e.content!==void 0}function dT(e){const t="data"in e?_u(e):e;if(!(!t||!QR(t)||t.content.dataType!=="moveObject"))return t.content}function Xs(e){var t;return(t=dT(e))==null?void 0:t.type}function aa(e){var n;const t=YR(e)?e.data:e;return!(t!=null&&t.type)&&"data"in e?((n=t==null?void 0:t.content)==null?void 0:n.dataType)==="package"?"package":Xs(e):t==null?void 0:t.type}function bu(e){var t;return(t=_u(e))==null?void 0:t.previousTransaction}function df(e){var t;return(t=_u(e))==null?void 0:t.owner}function eU(e){var n;const t=(n=_u(e))==null?void 0:n.display;return t||{data:null,error:null}}function yt(e){var n;const t=(n=dT(e))==null?void 0:n.fields;if(t)return"fields"in t?t.fields:t}function tU(e,t){const n=JR(q(t));return Number(q(e).mul(n))}function yi(e,t=32){return BigInt.asUintN(t,BigInt(e)).toString()}function Xn(e,t=32){return Number(BigInt.asIntN(t,BigInt(e)))}function nU(e,t,n){const i=pe(e).name,s=pe(t).name;return`${i}-${s}[${n}]`}function j0(e){const t=Xs(e),n=pe(t),i=yt(e);if(i==null)throw new Ne(`Pool id ${Hs(e)} not exists.`,"InvalidPoolObject");const s=[];i.rewarder_manager.fields.rewarders.forEach(o=>{const{emissions_per_second:a}=o.fields,c=Ft.fromX64(new w(a)),d=Math.floor(c.toNumber()*60*60*24);s.push({emissions_per_second:a,coinAddress:pe(o.fields.reward_coin.fields.name).source_address,growth_global:o.fields.growth_global,emissionsEveryDay:d})});const r={poolAddress:Hs(e),poolType:t,coinTypeA:n.type_arguments[0],coinTypeB:n.type_arguments[1],coinAmountA:i.coin_a,coinAmountB:i.coin_b,current_sqrt_price:i.current_sqrt_price,current_tick_index:Xn(BigInt(i.current_tick_index.fields.bits)),fee_growth_global_a:i.fee_growth_global_a,fee_growth_global_b:i.fee_growth_global_b,fee_protocol_coin_a:i.fee_protocol_coin_a,fee_protocol_coin_b:i.fee_protocol_coin_b,fee_rate:i.fee_rate,is_pause:i.is_pause,liquidity:i.liquidity,position_manager:{positions_handle:i.position_manager.fields.positions.fields.id.id,size:i.position_manager.fields.positions.fields.size},rewarder_infos:s,rewarder_last_updated_time:i.rewarder_manager.fields.last_updated_time,tickSpacing:i.tick_spacing,ticks_handle:i.tick_manager.fields.ticks.fields.id.id,uri:i.url,index:Number(i.index),name:""};return r.name=nU(r.coinTypeA,r.coinTypeB,r.tickSpacing),r}function Uh(e){const t=eU(e).data,n={creator:"",description:"",image_url:"",link:"",name:"",project_url:""};return t&&(n.creator=t.creator,n.description=t.description,n.image_url=t.image_url,n.link=t.link,n.name=t.name,n.project_url=t.project_url),n}function ea(e){var o,a;if(e.error!=null||((a=(o=e.data)==null?void 0:o.content)==null?void 0:a.dataType)!=="moveObject")throw new Ne(`Position not exists. Get Position error:${e.error}`,"InvalidPositionObject");let t={creator:"",description:"",image_url:"",link:"",name:"",project_url:""},n={...t,pos_object_id:"",owner:"",type:"",coin_type_a:"",coin_type_b:"",liquidity:"",tick_lower_index:0,tick_upper_index:0,index:0,pool:"",reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"},i=yt(e);if(i){const c=Xs(e),d=df(e);"nft"in i?(i=i.nft.fields,t.description=i.description,t.name=i.name,t.link=i.url):t=Uh(e),n={...t,pos_object_id:i.id.id,owner:d.AddressOwner,type:c,coin_type_a:i.coin_type_a.fields.name,coin_type_b:i.coin_type_b.fields.name,liquidity:i.liquidity,tick_lower_index:Xn(BigInt(i.tick_lower_index.fields.bits)),tick_upper_index:Xn(BigInt(i.tick_upper_index.fields.bits)),index:i.index,pool:i.pool,reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"}}const s=aT(e);s&&(n.pos_object_id=s.objectId,n.position_status="Deleted");const r=cT(e);return r&&(n.pos_object_id=r,n.position_status="NotExists"),n}function uT(e){const t={reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0"};e="fields"in e?e.fields:e,e.rewards.forEach((r,o)=>{const{amount_owned:a,growth_inside:c}="fields"in r?r.fields:r;o===0?(t.reward_amount_owed_0=a,t.reward_growth_inside_0=c):o===1?(t.reward_amount_owed_1=a,t.reward_growth_inside_1=c):o===2&&(t.reward_amount_owed_2=a,t.reward_growth_inside_2=c)});const n="fields"in e.tick_lower_index?e.tick_lower_index.fields.bits:e.tick_lower_index.bits,i="fields"in e.tick_upper_index?e.tick_upper_index.fields.bits:e.tick_upper_index.bits;return{liquidity:e.liquidity,tick_lower_index:Xn(BigInt(n)),tick_upper_index:Xn(BigInt(i)),...t,fee_growth_inside_a:e.fee_growth_inside_a,fee_owed_a:e.fee_owned_a,fee_growth_inside_b:e.fee_growth_inside_b,fee_owed_b:e.fee_owned_b,pos_object_id:e.position_id}}function q0(e){var s,r;if(e.error!=null||((r=(s=e.data)==null?void 0:s.content)==null?void 0:r.dataType)!=="moveObject")throw new Ne(`Tick not exists. Get tick data error:${e.error}`,"InvalidTickObject");const n=yt(e).value.fields.value.fields;return{objectId:Hs(e),index:Xn(BigInt(n.index.fields.bits)),sqrtPrice:new w(n.sqrt_price),liquidityNet:new w(n.liquidity_net.fields.bits),liquidityGross:new w(n.liquidity_gross),feeGrowthOutsideA:new w(n.fee_growth_outside_a),feeGrowthOutsideB:new w(n.fee_growth_outside_b),rewardersGrowthOutside:n.rewards_growth_outside}}function iU(e){if(!e||!e.index||!e.sqrt_price||!e.liquidity_net||!e.liquidity_gross||!e.fee_growth_outside_a||!e.fee_growth_outside_b)throw new Ne("Invalid tick fields.","InvalidTickFields");const t=Xn(BigInt(e.index.bits)),n=new w(e.sqrt_price),i=new w(e.liquidity_net.bits),s=new w(e.liquidity_gross),r=new w(e.fee_growth_outside_a),o=new w(e.fee_growth_outside_b),a=e.rewards_growth_outside||[];return{objectId:"",index:t,sqrtPrice:n,liquidityNet:i,liquidityGross:s,feeGrowthOutsideA:r,feeGrowthOutsideB:o,rewardersGrowthOutside:a}}var Qc=class{static getMinIndex(e){return Fp+Math.abs(Fp)%e}static getMaxIndex(e){return Np-Np%e}};function Jj(e,t){const n=Math.abs(e)%t;return e>0?n>t/2?e+t-n:e-n:n>t/2?e-t+n:e+n}function sU(e,t,n,i,s,r){const o=e.rewarder_infos,a=[];for(let c=0;c<o.length;c+=1){let d=r[c];t!==null&&(e.current_tick_index<i?d=r[c].sub(new w(t.rewardersGrowthOutside[c])):d=t.rewardersGrowthOutside[c]);let u=new w(0);n!==null&&(e.current_tick_index>=s?u=r[c].sub(new w(n.rewardersGrowthOutside[c])):u=n.rewardersGrowthOutside[c]);const l=Ft.subUnderflowU128(Ft.subUnderflowU128(new w(r[c]),new w(d)),new w(u));a.push(l)}return a}function uf(e){const t=en.isSuiCoin(e.coinTypeA),n=en.isSuiCoin(e.coinTypeB);return{isAdjustCoinA:t,isAdjustCoinB:n}}function rU(e,t){return ie.ceil(q(e).div(1+t)).toString()}var lt=class{static createCollectRewarderAndFeeParams(e,t,n,i,s,r){s===void 0&&(s=[...i]),r===void 0&&(r=[...i]);const o=jn(n.coinTypeA),a=jn(n.coinTypeB);if(n.collect_fee){const d=lt.buildCoinForAmount(t,s,BigInt(0),o,!1);s=d.remainCoins;const u=lt.buildCoinForAmount(t,r,BigInt(0),a,!1);r=u.remainCoins,t=e.Position.createCollectFeePaylod({pool_id:n.pool_id,pos_id:n.pos_id,coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB},t,d.targetCoin,u.targetCoin)}const c=[];return n.rewarder_coin_types.forEach(d=>{switch(jn(d)){case o:c.push(lt.buildCoinForAmount(t,s,BigInt(0),d,!1).targetCoin);break;case a:c.push(lt.buildCoinForAmount(t,r,BigInt(0),d,!1).targetCoin);break;default:c.push(lt.buildCoinForAmount(t,i,BigInt(0),d,!1).targetCoin);break}}),t=e.Rewarder.createCollectRewarderPaylod(n,t,c),t}static async adjustTransactionForGas(e,t,n,i){i.setSender(e.senderAddress);const s=en.selectCoinAssetGreaterThanOrEqual(t,n).selectedCoins;if(s.length===0)throw new Ne("Insufficient balance","InsufficientBalance");const r=en.calculateTotalBalance(t);if(r-n>1e9)return{fixAmount:n};const o=await e.fullClient.calculationTxGas(i);if(en.selectCoinAssetGreaterThanOrEqual(t,BigInt(o),s.map(c=>c.coinObjectId)).selectedCoins.length===0){const c=BigInt(o)+BigInt(500);if(r-n<c){if(n-=c,n<0)throw new Ne("gas Insufficient balance","InsufficientBalance");const d=new xe;return{fixAmount:n,newTx:d}}}return{fixAmount:n}}static async buildAddLiquidityFixTokenForGas(e,t,n,i){let s=await lt.buildAddLiquidityFixToken(e,t,n);const{isAdjustCoinA:r}=uf(n),o=r?n.amount_a:n.amount_b,a=await lt.adjustTransactionForGas(e,en.getCoinAssets(r?n.coinTypeA:n.coinTypeB,t),BigInt(o),s),{fixAmount:c}=a,{newTx:d}=a;if(d!==void 0){let u,l;if(r)n.amount_a=Number(c),u=lt.buildAddLiquidityFixTokenCoinInput(d,!n.fix_amount_a,c.toString(),n.slippage,n.coinTypeA,t,!1),l=lt.buildAddLiquidityFixTokenCoinInput(d,n.fix_amount_a,n.amount_b,n.slippage,n.coinTypeB,t,!1);else return n.amount_b=Number(c),u=lt.buildAddLiquidityFixTokenCoinInput(d,!n.fix_amount_a,n.amount_a,n.slippage,n.coinTypeA,t,!1),l=lt.buildAddLiquidityFixTokenCoinInput(d,n.fix_amount_a,c.toString(),n.slippage,n.coinTypeB,t,!1),n=lt.fixAddLiquidityFixTokenParams(n,i.slippage,i.curSqrtPrice),s=await lt.buildAddLiquidityFixTokenArgs(d,e,t,n,u,l),s}return s}static async buildAddLiquidityFixToken(e,t,n){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");let i=new xe;const s=lt.buildAddLiquidityFixTokenCoinInput(i,!n.fix_amount_a,n.amount_a,n.slippage,n.coinTypeA,t,!1),r=lt.buildAddLiquidityFixTokenCoinInput(i,n.fix_amount_a,n.amount_b,n.slippage,n.coinTypeB,t,!1);return i=lt.buildAddLiquidityFixTokenArgs(i,e,t,n,s,r),i}static buildAddLiquidityFixTokenCoinInput(e,t,n,i,s,r,o=!0){return t?lt.buildCoinForAmountInterval(e,r,{amountSecond:BigInt(rU(n,i)),amountFirst:BigInt(n)},s,o):lt.buildCoinForAmount(e,r,BigInt(n),s,o)}static fixAddLiquidityFixTokenParams(e,t,n){const i=e.fix_amount_a?e.amount_a:e.amount_b,s=Pn.estLiquidityAndcoinAmountFromOneAmounts(Number(e.tick_lower),Number(e.tick_upper),new w(i),e.fix_amount_a,!0,t,n);return e.amount_a=e.fix_amount_a?e.amount_a:s.tokenMaxA.toNumber(),e.amount_b=e.fix_amount_a?s.tokenMaxB.toNumber():e.amount_b,e}static buildAddLiquidityFixTokenArgs(e,t,n,i,s,r){const o=[i.coinTypeA,i.coinTypeB],a=i.is_open?"open_position_with_liquidity_by_fix_coin":"add_liquidity_by_fix_coin",{clmm_pool:c,integrate:d}=t.sdkOptions;i.is_open||(e=lt.createCollectRewarderAndFeeParams(t,e,i,n,s.remainCoins,r.remainCoins));const u=J(c),l=i.is_open?[e.object(u.global_config_id),e.object(i.pool_id),e.pure.u32(Number(yi(BigInt(i.tick_lower)).toString())),e.pure.u32(Number(yi(BigInt(i.tick_upper)).toString())),s.targetCoin,r.targetCoin,e.pure.u64(i.amount_a),e.pure.u64(i.amount_b),e.pure.bool(i.fix_amount_a),e.object(Oe)]:[e.object(u.global_config_id),e.object(i.pool_id),e.object(i.pos_id),s.targetCoin,r.targetCoin,e.pure.u64(i.amount_a),e.pure.u64(i.amount_b),e.pure.bool(i.fix_amount_a),e.object(Oe)];return e.moveCall({target:`${d.published_at}::${ko}::${a}`,typeArguments:o,arguments:l}),e}static async buildSwapTransactionForGas(e,t,n,i){let s=lt.buildSwapTransaction(e,t,n);s.setSender(e.senderAddress);const r=await lt.adjustTransactionForGas(e,en.getCoinAssets(t.a2b?t.coinTypeA:t.coinTypeB,n),BigInt(t.by_amount_in?t.amount:t.amount_limit),s),{fixAmount:o,newTx:a}=r;if(a!==void 0){a.setSender(e.senderAddress),t.by_amount_in?t.amount=o.toString():t.amount_limit=o.toString(),t=await lt.fixSwapParams(e,t,i);const c=lt.buildCoinForAmount(s,n,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA),d=lt.buildCoinForAmount(s,n,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB);s=lt.buildSwapTransactionArgs(a,t,e.sdkOptions,c,d)}return s}static buildSwapTransaction(e,t,n){let i=new xe;i.setSender(e.senderAddress);const s=lt.buildCoinForAmount(i,n,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1),r=lt.buildCoinForAmount(i,n,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1);return i=lt.buildSwapTransactionArgs(i,t,e.sdkOptions,s,r),i}static buildSwapTransactionArgs(e,t,n,i,s){const{clmm_pool:r,integrate:o}=n,a=ar.getDefaultSqrtPriceLimit(t.a2b),c=[t.coinTypeA,t.coinTypeB],{global_config_id:d}=J(r);if(d===void 0)throw Error("clmm.config.global_config_id is undefined");const u=t.swap_partner!==void 0,l=u?t.a2b?"swap_a2b_with_partner":"swap_b2a_with_partner":t.a2b?"swap_a2b":"swap_b2a",f=u?[e.object(d),e.object(t.pool_id),e.object(t.swap_partner),i.targetCoin,s.targetCoin,e.pure.bool(t.by_amount_in),e.pure.u64(t.amount),e.pure.u64(t.amount_limit),e.pure.u128(a.toString()),e.object(Oe)]:[e.object(d),e.object(t.pool_id),i.targetCoin,s.targetCoin,e.pure.bool(t.by_amount_in),e.pure.u64(t.amount),e.pure.u64(t.amount_limit),e.pure.u128(a.toString()),e.object(Oe)];return e.moveCall({target:`${o.published_at}::${ko}::${l}`,typeArguments:c,arguments:f}),e}static async buildSwapTransactionWithoutTransferCoinsForGas(e,t,n,i){let{tx:s,coinABs:r}=lt.buildSwapTransactionWithoutTransferCoins(e,t,n);s.setSender(e.senderAddress);const o=await lt.adjustTransactionForGas(e,en.getCoinAssets(t.a2b?t.coinTypeA:t.coinTypeB,n),BigInt(t.by_amount_in?t.amount:t.amount_limit),s),{fixAmount:a,newTx:c}=o;if(c!==void 0){c.setSender(e.senderAddress),t.by_amount_in?t.amount=a.toString():t.amount_limit=a.toString(),t=await lt.fixSwapParams(e,t,i);const d=lt.buildCoinForAmount(s,n,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1,!0),u=lt.buildCoinForAmount(s,n,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1,!0),l=lt.buildSwapTransactionWithoutTransferCoinArgs(e,c,t,e.sdkOptions,d,u);s=l.tx,r=l.txRes}return{tx:s,coinABs:r}}static buildSwapTransactionWithoutTransferCoins(e,t,n){const i=new xe;i.setSender(e.senderAddress);const s=lt.buildCoinForAmount(i,n,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1,!0),r=lt.buildCoinForAmount(i,n,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1,!0),o=lt.buildSwapTransactionWithoutTransferCoinArgs(e,i,t,e.sdkOptions,s,r);return{tx:o.tx,coinABs:o.txRes}}static buildSwapTransactionWithoutTransferCoinArgs(e,t,n,i,s,r){const{clmm_pool:o,integrate:a}=i,c=ar.getDefaultSqrtPriceLimit(n.a2b),{global_config_id:d}=J(o);if(d===void 0)throw Error("clmm.config.global_config_id is undefined");const u=n.swap_partner!==void 0,l=u?"swap_with_partner":"swap",f=u?U0:Vo,p=u?[t.object(d),t.object(n.pool_id),t.object(n.swap_partner),s.targetCoin,r.targetCoin,t.pure.bool(n.a2b),t.pure.bool(n.by_amount_in),t.pure.u64(n.amount),t.pure.u128(c.toString()),t.pure.bool(!1),t.object(Oe)]:[t.object(d),t.object(n.pool_id),s.targetCoin,r.targetCoin,t.pure.bool(n.a2b),t.pure.bool(n.by_amount_in),t.pure.u64(n.amount),t.pure.u128(c.toString()),t.pure.bool(!1),t.object(Oe)],m=[n.coinTypeA,n.coinTypeB],_=t.moveCall({target:`${a.published_at}::${f}::${l}`,typeArguments:m,arguments:p});if(n.by_amount_in){const x=n.a2b?n.coinTypeB:n.coinTypeA,C=n.a2b?_[1]:_[0],k=Number(n.amount_limit);this.checkCoinThreshold(e,n.by_amount_in,t,C,k,x)}return{tx:t,txRes:_}}static async fixSwapParams(e,t,n){const{currentPool:i}=n;try{const s=await e.Swap.preswap({decimalsA:n.decimalsA,decimalsB:n.decimalsB,a2b:t.a2b,byAmountIn:t.by_amount_in,amount:t.amount,pool:i,currentSqrtPrice:i.current_sqrt_price,coinTypeA:i.coinTypeA,coinTypeB:i.coinTypeB}),r=n.byAmountIn?s.estimatedAmountOut:s.estimatedAmountIn,o=zp(r,n.slippage,!n.byAmountIn);t.amount_limit=o.toString()}catch(s){console.log("fixSwapParams",s)}return t}static async syncBuildCoinInputForAmount(e,t,n,i,s=!0){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const r=await e.getOwnerCoinAssets(e.senderAddress,i);return lt.buildCoinForAmount(t,r,n,i,s).targetCoin}static buildCoinForAmount(e,t,n,i,s=!0,r=!1){const o=en.getCoinAssets(i,t);if(n===BigInt(0)&&o.length===0)return lt.buildZeroValueCoin(t,e,i,s);const a=en.calculateTotalBalance(o);if(a<n)throw new Ne(`The amount(${a}) is Insufficient balance for ${i} , expect ${n} `,"InsufficientBalance");return lt.buildCoin(e,t,o,n,i,s,r)}static buildCoin(e,t,n,i,s,r=!0,o=!1){if(en.isSuiCoin(s)){if(r){const k=e.splitCoins(e.gas,[e.pure.u64(i)]);return{targetCoin:e.makeMoveVec({elements:[k]}),remainCoins:t,tragetCoinAmount:i.toString(),isMintZeroCoin:!1,originalSplitedCoin:e.gas}}if(i===0n&&n.length>1){const k=en.selectCoinObjectIdGreaterThanOrEqual(n,i);return{targetCoin:e.object(k.objectArray[0]),remainCoins:k.remainCoins,tragetCoinAmount:k.amountArray[0],isMintZeroCoin:!1}}const x=en.selectCoinObjectIdGreaterThanOrEqual(n,i);return{targetCoin:e.splitCoins(e.gas,[e.pure.u64(i)]),remainCoins:x.remainCoins,tragetCoinAmount:i.toString(),isMintZeroCoin:!1,originalSplitedCoin:e.gas}}const a=en.selectCoinObjectIdGreaterThanOrEqual(n,i),c=a.amountArray.reduce((x,C)=>Number(x)+Number(C),0).toString(),d=a.objectArray;if(r)return{targetCoin:e.makeMoveVec({elements:d.map(x=>e.object(x))}),remainCoins:a.remainCoins,tragetCoinAmount:a.amountArray.reduce((x,C)=>Number(x)+Number(C),0).toString(),isMintZeroCoin:!1};const[u,...l]=d,f=e.object(u);let p=f,m=a.amountArray.reduce((x,C)=>Number(x)+Number(C),0).toString(),_;return l.length>0&&e.mergeCoins(f,l.map(x=>e.object(x))),o&&Number(c)>Number(i)&&(p=e.splitCoins(f,[e.pure.u64(i)]),m=i.toString(),_=f),{targetCoin:p,remainCoins:a.remainCoins,originalSplitedCoin:_,tragetCoinAmount:m,isMintZeroCoin:!1}}static buildZeroValueCoin(e,t,n,i=!0){const s=lt.callMintZeroValueCoin(t,n);let r;return i?r=t.makeMoveVec({elements:[s]}):r=s,{targetCoin:r,remainCoins:e,isMintZeroCoin:!0,tragetCoinAmount:"0"}}static buildCoinForAmountInterval(e,t,n,i,s=!0){const r=en.getCoinAssets(i,t);if(n.amountFirst===BigInt(0))return r.length>0?lt.buildCoin(e,[...t],[...r],n.amountFirst,i,s):lt.buildZeroValueCoin(t,e,i,s);const o=en.calculateTotalBalance(r);if(o>=n.amountFirst)return lt.buildCoin(e,[...t],[...r],n.amountFirst,i,s);if(o<n.amountSecond)throw new Ne(`The amount(${o}) is Insufficient balance for ${i} , expect ${n.amountSecond} `,"InsufficientBalance");return lt.buildCoin(e,[...t],[...r],n.amountSecond,i,s)}static async buildRouterSwapTransaction(e,t,n,i,s){let r=new xe;return t.paths.length>1&&(t.partner=""),r=await this.buildRouterBasePathTx(e,t,n,i,r,s),r}static async buildRouterBasePathTx(e,t,n,i,s,r){const o=t.paths.filter(T=>T&&T.poolAddress),a=Number(o.reduce((T,S)=>T.add(S.amountIn),dt).toString()),c=Number(o.reduce((T,S)=>T.add(S.amountOut),dt).toString()),d=Math.round(n?Number(c.toString())*(1-t.priceSlippagePoint):Number(a.toString())*(1+t.priceSlippagePoint)),u=t.paths[0].coinType[0],l=t.paths[0].coinType[t.paths[0].coinType.length-1],f=lt.buildCoinForAmount(s,i,BigInt(n?a:d),u,!1,!0),p=f.originalSplitedCoin!==void 0,m=lt.buildCoinForAmount(s,i,0n,l,!1),_=await this.buildRouterBasePathReturnCoins(e,t,n,f,m,s),x=[],{toCoin:C,fromCoin:k}=_;if(s=_.tx,m.isMintZeroCoin?x.push({coinType:l,coin:C}):m.originalSplitedCoin!==void 0?s.mergeCoins(m.originalSplitedCoin,[C]):s.mergeCoins(m.targetCoin,[C]),p){const T=f==null?void 0:f.originalSplitedCoin;s.mergeCoins(T,[k])}else x.push({coinType:u,coin:k});for(let T=0;T<x.length;T++)this.buildTransferCoin(e,s,x[T].coin,x[T].coinType,r);return s}static async buildRouterBasePathReturnCoins(e,t,n,i,s,r){const{clmm_pool:o,integrate:a}=e.sdkOptions,c=J(o).global_config_id,d=t.paths.filter(T=>T&&T.poolAddress),u=Number(d.reduce((T,S)=>T.add(S.amountIn),dt).toString()),l=Number(d.reduce((T,S)=>T.add(S.amountOut),dt).toString()),f=Math.round(n?Number(l.toString())*(1-t.priceSlippagePoint):Number(u.toString())*(1+t.priceSlippagePoint)),p=t.paths[0].coinType[0],m=t.paths[0].coinType[t.paths[0].coinType.length-1];let _=i.targetCoin,x;s.isMintZeroCoin||s.originalSplitedCoin!==void 0?x=s.targetCoin:x=lt.callMintZeroValueCoin(r,m);const C=t.partner==="",k=C?Vo:U0;for(const T of d)if(T.poolAddress.length===1){const S=T.a2b[0],P={amount:Number(T.amountIn.toString()),amountLimit:f,poolCoinA:T.a2b[0]?p:m,poolCoinB:T.a2b[0]?m:p},z=C?"swap":"swap_with_partner",X=S?_:x,G=S?x:_,te=n?T.amountIn.toString():T.amountOut.toString(),N=ar.getDefaultSqrtPriceLimit(S).toString(),R=C?[r.object(c),r.object(T.poolAddress[0]),X,G,r.pure.bool(S),r.pure.bool(n),r.pure.u64(te),r.pure.u128(N),r.pure.bool(!1),r.object(Oe)]:[r.object(c),r.object(T.poolAddress[0]),r.object(t.partner),X,G,r.pure.bool(S),r.pure.bool(n),r.pure.u64(te),r.pure.u128(N),r.pure.bool(!1),r.object(Oe)],M=[P.poolCoinA,P.poolCoinB],A=r.moveCall({target:`${e.sdkOptions.integrate.published_at}::${k}::${z}`,typeArguments:M,arguments:R});_=S?A[0]:A[1],x=S?A[1]:A[0]}else{const S=n?T.amountIn:T.rawAmountLimit[0],P=n?0:T.amountOut;let z="";T.a2b[0]?T.a2b[1]?z="swap_ab_bc":z="swap_ab_cb":T.a2b[1]?z="swap_ba_bc":z="swap_ba_cb",C||(z=`${z}_with_partner`);const X=ar.getDefaultSqrtPriceLimit(T.a2b[0]),G=ar.getDefaultSqrtPriceLimit(T.a2b[1]),te=C?[r.object(c),r.object(T.poolAddress[0]),r.object(T.poolAddress[1]),_,x,r.pure.bool(n),r.pure.u64(S.toString()),r.pure.u64(P.toString()),r.pure.u128(X.toString()),r.pure.u128(G.toString()),r.object(Oe)]:[r.object(c),r.object(T.poolAddress[0]),r.object(T.poolAddress[1]),r.object(t.partner),_,x,r.pure.bool(n),r.pure.u64(S.toString()),r.pure.u64(P.toString()),r.pure.u128(X.toString()),r.pure.u128(G.toString()),r.object(Oe)],N=[T.coinType[0],T.coinType[1],T.coinType[2]],R=r.moveCall({target:`${a.published_at}::${k}::${z}`,typeArguments:N,arguments:te});_=R[0],x=R[1]}return this.checkCoinThreshold(e,n,r,x,f,m),{fromCoin:_,toCoin:x,tx:r}}static async buildAggregatorSwapReturnCoins(e,t,n,i,s,r,o,a){if(a==null){if(e.senderAddress.length===0)throw Error("recipient and this config sdk senderAddress all not set");a=e.senderAddress}t.splitPaths.length>1&&(s="");let c,d;const u=t.splitPaths.some(l=>l.basePaths.some(f=>f.label==="Deepbook"));if((!t.byAmountIn||t.splitPaths.length===1)&&!u){const l=[];for(const m of t.splitPaths){const _=[],x=[],C=[],k=[];for(let S=0;S<m.basePaths.length;S+=1){const P=m.basePaths[S];_.push(P.direction),x.push(P.poolAddress),C.push(new w(P.inputAmount.toString())),S===0?k.push(P.fromCoin,P.toCoin):k.push(P.toCoin)}const T={amountIn:new w(m.inputAmount.toString()),amountOut:new w(m.outputAmount.toString()),poolAddress:x,a2b:_,rawAmountLimit:C,isExceed:!1,coinType:k};l.push(T)}const f={paths:l,partner:s,priceSlippagePoint:r},p=await this.buildRouterBasePathReturnCoins(e,f,t.byAmountIn,n,i,o);c=p.fromCoin,d=p.toCoin,o=p.tx}else{const l=Math.round(t.outputAmount*(1-r));c=n.targetCoin,i.isMintZeroCoin||i.originalSplitedCoin!==void 0?d=i.targetCoin:d=lt.callMintZeroValueCoin(o,t.toCoin);let f=!1,p;if(u){const[m,_]=yy.createAccountCap(a,e.sdkOptions,o);o=_,p=m,f=!0}for(let m=0;m<t.splitPaths.length;m+=1){const _=t.splitPaths[m];let x;for(let C=0;C<_.basePaths.length;C+=1){const k=_.basePaths[C];if(k.label==="Deepbook")if(C===0)if(_.basePaths.length===1){const T=this.buildDeepbookBasePathTx(e,k,o,p,c,d,!1);c=T.from,d=T.to}else{x=lt.callMintZeroValueCoin(o,k.toCoin);const T=this.buildDeepbookBasePathTx(e,k,o,p,c,x,!1);c=T.from,x=T.to}else{const T=this.buildDeepbookBasePathTx(e,k,o,p,x,d,!0);x=T.from,d=T.to}if(k.label==="Cetus")if(C===0)if(_.basePaths.length===1){const T=this.buildClmmBasePathTx(e,k,o,t.byAmountIn,c,d,!1,s);c=T.from,d=T.to}else{x=lt.callMintZeroValueCoin(o,k.toCoin);const T=this.buildClmmBasePathTx(e,k,o,t.byAmountIn,c,x,!1,s);c=T.from,x=T.to}else{const T=this.buildClmmBasePathTx(e,k,o,t.byAmountIn,x,d,!0,s);x=T.from,d=T.to,o.moveCall({target:`${e.sdkOptions.integrate.published_at}::${gy}::send_coin`,typeArguments:[k.fromCoin],arguments:[x,o.pure.address(a)]})}}}this.checkCoinThreshold(e,t.byAmountIn,o,d,l,t.toCoin),f&&(o=yy.deleteAccountCapByObject(p,e.sdkOptions,o))}return{fromCoin:c,toCoin:d,tx:o}}static async buildAggregatorSwapTransaction(e,t,n,i,s,r){let o=new xe;const a=t.byAmountIn?Math.round(t.outputAmount*(1-s)):Math.round(t.inputAmount*(1+s)),c=lt.buildCoinForAmount(o,n,t.byAmountIn?BigInt(t.inputAmount):BigInt(a),t.fromCoin,!1,!0),d=c.originalSplitedCoin!=null,u=lt.buildCoinForAmount(o,n,0n,t.toCoin,!1),l=await this.buildAggregatorSwapReturnCoins(e,t,c,u,i,s,o,r),{fromCoin:f,toCoin:p}=l;o=l.tx;const m=[];if(u.isMintZeroCoin?m.push({coinType:t.toCoin,coin:p}):u.originalSplitedCoin!=null?o.mergeCoins(u.originalSplitedCoin,[p]):o.mergeCoins(u.targetCoin,[p]),d){const _=c.originalSplitedCoin;o.mergeCoins(_,[f])}else m.push({coinType:t.fromCoin,coin:f});for(let _=0;_<m.length;_++)this.buildTransferCoin(e,o,m[_].coin,m[_].coinType,r);return o}static checkCoinThreshold(e,t,n,i,s,r){t&&n.moveCall({target:`${e.sdkOptions.integrate.published_at}::${Vo}::check_coin_threshold`,typeArguments:[r],arguments:[i,n.pure.u64(s)]})}static buildDeepbookBasePathTx(e,t,n,i,s,r,o){const a=t.direction?s:r,c=t.direction?r:s,d=[n.object(t.poolAddress),i,n.pure.u64(t.inputAmount),n.pure.u64(0),n.pure.bool(t.direction),a,c,n.pure.bool(o),n.object(Oe)],u=t.direction?[t.fromCoin,t.toCoin]:[t.toCoin,t.fromCoin],l=n.moveCall({target:`${e.sdkOptions.deepbook_endpoint_v2.published_at}::endpoints_v2::swap`,typeArguments:u,arguments:d});return s=t.direction?l[0]:l[1],r=t.direction?l[1]:l[0],{from:s,to:r,tx:n}}static buildClmmBasePathTx(e,t,n,i,s,r,o,a){const{clmm_pool:c,integrate:d}=e.sdkOptions,u=J(c).global_config_id;let l=t.direction?s:r,f=t.direction?r:s;const p=a==="",m=p?Vo:U0,_=p?"swap":"swap_with_partner",x=i?t.inputAmount.toString():t.outputAmount.toString(),C=ar.getDefaultSqrtPriceLimit(t.direction),k=p?[n.object(u),n.object(t.poolAddress),l,f,n.pure.bool(t.direction),n.pure.bool(i),n.pure.u64(x),n.pure.u128(C.toString()),n.pure.bool(o),n.object(Oe)]:[n.object(u),n.object(t.poolAddress),n.object(a),l,f,n.pure.bool(t.direction),n.pure.bool(i),n.pure.u64(x),n.pure.u128(C.toString()),n.pure.bool(o),n.object(Oe)],T=t.direction?[t.fromCoin,t.toCoin]:[t.toCoin,t.fromCoin],S=n.moveCall({target:`${d.published_at}::${m}::${_}`,typeArguments:T,arguments:k});return l=S[0],f=S[1],s=t.direction?l:f,r=t.direction?f:l,{from:s,to:r,tx:n}}static buildCoinTypePair(e,t){const n=[];if(e.length===2){const i=[];i.push(e[0],e[1]),n.push(i)}else{const i=[];i.push(e[0],e[e.length-1]),n.push(i);for(let s=1;s<e.length-1;s+=1){if(t[s-1]===0)continue;const r=[];r.push(e[0],e[s],e[e.length-1]),n.push(r)}}return n}static buildTransferCoinToSender(e,t,n,i){t.moveCall({target:`${e.sdkOptions.integrate.published_at}::${gy}::transfer_coin_to_sender`,typeArguments:[i],arguments:[n]})}static buildTransferCoin(e,t,n,i,s){s!=null?t.transferObjects([n],t.pure.address(s)):lt.buildTransferCoinToSender(e,t,n,i)}},tt=lt;_R(tt,"callMintZeroValueCoin",(e,t)=>e.moveCall({target:"0x2::coin::zero",typeArguments:[t]}));function di(e){return!(!e.startsWith("0x")||e.length!==66)}var Ia=new w(1e9),yy=class{static createAccountCap(e,t,n,i=!1){if(e.length===0)throw Error("this config sdk senderAddress is empty");const{deepbook:s}=t,[r]=n.moveCall({target:`${s.published_at}::${xR}::create_account`,typeArguments:[],arguments:[]});return i&&n.transferObjects([r],n.pure.address(e)),[r,n]}static deleteAccountCap(e,t,n){const{deepbook:i}=t,s=[n.object(e)];return n.moveCall({target:`${i.published_at}::${M0}::delete_account_cap`,typeArguments:[],arguments:s}),n}static deleteAccountCapByObject(e,t,n){const{deepbook:i}=t,s=[e];return n.moveCall({target:`${i.published_at}::${M0}::delete_account_cap`,typeArguments:[],arguments:s}),n}static async getAccountCap(e,t=!0){const n=await e.fullClient.getOwnedObjectsByPage(e.senderAddress,{options:{showType:!0,showContent:!0,showDisplay:t,showOwner:!0},filter:{MoveModule:{package:e.sdkOptions.deepbook.package_id,module:M0}}});return n.data.length===0?"":n.data[0].data.objectId}static async getPools(e){const t=e.sdkOptions.deepbook.package_id,n=[];try{(await e.fullClient.queryEventsByPage({MoveEventType:`${t}::clob_v2::PoolCreated`})).data.forEach(s=>{const r=s.parsedJson;r&&n.push({poolID:r.pool_id,tickSize:Number(r.tick_size),lotSize:Number(r.lot_size),takerFeeRate:Number(r.taker_fee_rate),makerRebateRate:Number(r.maker_rebate_rate),baseAsset:r.base_asset.name,quoteAsset:r.quote_asset.name})})}catch(i){console.log("getPoolImmutables",i)}return n}static async getPoolAsks(e,t,n,i){var f;const{simulationAccount:s}=e.sdkOptions,{deepbook_endpoint_v2:r}=e.sdkOptions,o=new xe,a=[],c=[n,i],d=[o.object(t),o.pure.u64("0"),o.pure.u64("999999999999"),o.object(Oe)];o.moveCall({target:`${r.published_at}::endpoints_v2::get_level2_book_status_ask_side`,arguments:d,typeArguments:c});const l=(f=(await e.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:s.address})).events)==null?void 0:f.filter(p=>pe(p.type).name==="BookStatus");if(l.length===0)return a;for(let p=0;p<l[0].parsedJson.depths.length;p++){const m=l[0].parsedJson.price[p],_=l[0].parsedJson.depths[p],x={price:parseInt(m,10),quantity:parseInt(_,10)};a.push(x)}return a}static async getPoolBids(e,t,n,i){var f;const{simulationAccount:s}=e.sdkOptions,{deepbook_endpoint_v2:r}=e.sdkOptions,o=new xe,a=[],c=[n,i],d=[o.object(t),o.pure.u64("0"),o.pure.u64("999999999999"),o.object(Oe)];o.moveCall({target:`${r.published_at}::endpoints_v2::get_level2_book_status_bid_side`,arguments:d,typeArguments:c});const l=(f=(await e.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:s.address})).events)==null?void 0:f.filter(p=>pe(p.type).name==="BookStatus");if(l.length===0)return a;for(let p=0;p<l[0].parsedJson.depths.length;p++){const m=l[0].parsedJson.price[p],_=l[0].parsedJson.depths[p],x={price:parseInt(m,10),quantity:parseInt(_,10)};a.push(x)}return a}static async preSwap(e,t,n,i){let s=!1,r=dt,o=new w(i),a=dt;const c=new w(i);if(n){let d=await this.getPoolBids(e,t.poolID,t.baseAsset,t.quoteAsset);d===null&&(s=!0),d=d.sort((u,l)=>l.price-u.price);for(let u=0;u<d.length;u+=1){const l=new w(d[u].quantity),f=new w(d[u].price),p=l.mul(new w(f)).mul(new w(t.takerFeeRate)).div(Ia).div(Ia);if(o.gt(l))o=o.sub(l),r=r.add(l.mul(f).div(Ia).sub(p)),a=a.add(p);else{const m=o.mul(new w(d[u].price)).div(Ia),_=m.mul(new w(t.takerFeeRate)).div(Ia);r=r.add(m.sub(_)),o=o.sub(o),a=a.add(_)}if(o.eq(dt))break}}else{const d=await this.getPoolAsks(e,t.poolID,t.baseAsset,t.quoteAsset);d===null&&(s=!0);for(let u=0;u<d.length;u+=1){const l=new w(d[u].price).mul(new w(d[u].quantity)).div(new w(1e9)),f=l.mul(new w(t.takerFeeRate)).div(Ia),p=l.add(f);if(o.gt(l))r=r.add(new w(d[u].quantity)),o=o.sub(p),a=a.add(f);else{const m=new w(d[u].quantity).div(new w(t.lotSize)),_=p.div(m),x=o.div(_);r=r.add(x.muln(t.lotSize)),o=o.sub(x.mul(_)),a=a.add(x.div(m).mul(f))}if(o.eq(dt))break}}return{poolAddress:t.poolID,estimatedAmountIn:c.sub(o).toNumber(),estimatedAmountOut:r.toNumber(),estimatedFeeAmount:a,isExceed:s,amount:Number(i),aToB:n,byAmountIn:!0}}static async simulateSwap(e,t,n,i,s,r){var P;const{deepbook_endpoint_v2:o}=e.sdkOptions;let a=new xe;const c=await this.getAccountCap(e);let d;if(c===""){const z=this.createAccountCap(e.senderAddress,e.sdkOptions,a),X=z[0];a=z[1],d=X}else d=a.object(c);const u=await e.getOwnerCoinAssets(e.senderAddress),l=tt.buildCoinForAmount(a,u,BigInt(r),n,!1),f=l==null?void 0:l.targetCoin,p=tt.buildCoinForAmount(a,u,BigInt(r),i,!1),m=p==null?void 0:p.targetCoin,_=[n,i],x=[a.object(t),d,a.pure.u64(r),a.pure.u64(0),a.pure.bool(s),f,m,a.object(Oe)];a.moveCall({target:`${o.published_at}::${TR}::swap`,arguments:x,typeArguments:_});const{simulationAccount:C}=e.sdkOptions,T=(P=(await e.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:C.address})).events)==null?void 0:P.filter(z=>pe(z.type).name==="DeepbookSwapEvent");if(T.length===0)return null;const S=T[0].parsedJson;return{poolAddress:S.pool,estimatedAmountIn:S.amount_in,estimatedAmountOut:S.amount_out,aToB:S.atob}}},oU=class{constructor(e){We(this,"_sdk");We(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPositionList(e,t="all"){const n={data:[],hasNextPage:!0},i=await this._sdk.fullClient.getDynamicFieldsByPage(e,t);n.hasNextPage=i.hasNextPage,n.nextCursor=i.nextCursor;const s=i.data.map(o=>{var a,c;if(o.error!=null||((c=(a=o.data)==null?void 0:a.content)==null?void 0:c.dataType)!=="moveObject")throw new Ne(`when getPositionList get position objects error: ${o.error}, please check the rpc, contracts address config and position id.`,"InvalidConfig");return o.name.value}),r=await this._sdk.Position.getSipmlePositionList(s);return n.data=r,n}async getPoolImmutables(e=[],t=0,n=100,i=!1){const{package_id:s}=this._sdk.sdkOptions.clmm_pool,r=`${s}_getInitPoolEvent`,o=this.getCache(r,i),a=[],c=[];if(o!==void 0&&a.push(...o),a.length===0)try{(await this._sdk.fullClient.queryEventsByPage({MoveEventType:`${s}::factory::CreatePoolEvent`})).data.forEach(l=>{const f=l.parsedJson;f&&a.push({poolAddress:f.pool_id,tickSpacing:f.tick_spacing,coinTypeA:pe(f.coin_type_a).full_address,coinTypeB:pe(f.coin_type_b).full_address})}),this.updateCache(r,a,Ye)}catch(u){console.log("getPoolImmutables",u)}const d=e.length>0;for(let u=0;u<a.length;u+=1){const l=a[u];d&&!e.includes(l.poolAddress)||!d&&(u<t||u>=t+n)||c.push(l)}return c}async getPools(e=[],t=0,n=100){var o,a,c;const i=[];let s=[];e.length>0?s=[...e]:(await this.getPoolImmutables([],t,n,!1)).forEach(u=>s.push(u.poolAddress));const r=await this._sdk.fullClient.batchGetObjects(s,{showContent:!0,showType:!0});for(const d of r){if(d.error!=null||((a=(o=d.data)==null?void 0:o.content)==null?void 0:a.dataType)!=="moveObject")throw new Ne(`getPools error code: ${((c=d.error)==null?void 0:c.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");const u=j0(d);i.push(u);const l=`${u.poolAddress}_getPoolObject`;this.updateCache(l,u,Ye)}return i}async getPoolImmutablesWithPage(e="all",t=!1){const{package_id:n}=this._sdk.sdkOptions.clmm_pool,i=[],s={data:[],hasNextPage:!1},r=e==="all",o=`${n}_getPoolImmutables`;if(r){const a=this.getCache(o,t);a&&i.push(...a)}if(i.length===0)try{const a=`${n}::factory::CreatePoolEvent`,c=await this._sdk.fullClient.queryEventsByPage({MoveEventType:a},e);s.hasNextPage=c.hasNextPage,s.nextCursor=c.nextCursor,c.data.forEach(d=>{const u=d.parsedJson;if(u){const l={poolAddress:u.pool_id,tickSpacing:u.tick_spacing,coinTypeA:pe(u.coin_type_a).full_address,coinTypeB:pe(u.coin_type_b).full_address};i.push(l)}})}catch(a){console.log("getPoolImmutables",a)}return s.data=i,r&&this.updateCache(`${n}_getPoolImmutables`,i,Ye),s}async getPoolsWithPage(e=[],t="all",n=!1){var o,a,c;const i=[];let s=[];e.length>0?s=[...e]:(await this.getPoolImmutablesWithPage(t,n)).data.forEach(u=>s.push(u.poolAddress));const r=await this._sdk.fullClient.batchGetObjects(s,{showContent:!0,showType:!0});for(const d of r){if(d.error!=null||((a=(o=d.data)==null?void 0:o.content)==null?void 0:a.dataType)!=="moveObject")throw new Ne(`getPoolWithPages error code: ${((c=d.error)==null?void 0:c.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");const u=j0(d);i.push(u);const l=`${u.poolAddress}_getPoolObject`;this.updateCache(l,u,Ye)}return i}async getPool(e,t=!0){var o,a,c;const n=`${e}_getPoolObject`,i=this.getCache(n,t);if(i!==void 0)return i;const s=await this._sdk.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if(s.error!=null||((a=(o=s.data)==null?void 0:o.content)==null?void 0:a.dataType)!=="moveObject")throw new Ne(`getPool error code: ${((c=s.error)==null?void 0:c.code)??"unknown error"}, please check config and object id`,"InvalidPoolObject");const r=j0(s);return this.updateCache(n,r),r}async creatPoolsTransactionPayload(e){for(const n of e)if(of(zt(n.coinTypeA),zt(n.coinTypeB))){const i=n.coinTypeB;n.coinTypeB=n.coinTypeA,n.coinTypeA=i}return await this.creatPool(e)}async creatPoolTransactionPayload(e){if(of(zt(e.coinTypeA),zt(e.coinTypeB))){const t=e.coinTypeB;e.coinTypeB=e.coinTypeA,e.coinTypeA=t}return"fix_amount_a"in e?await this.creatPoolAndAddLiquidity(e):await this.creatPool([e])}async getClmmConfigs(e=!1){const{package_id:t}=this._sdk.sdkOptions.clmm_pool,n=`${t}_getInitEvent`,i=this.getCache(n,e);if(i!==void 0)return i;const s=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),r=bu(s),o=(await this._sdk.fullClient.queryEventsByPage({Transaction:r})).data,a={pools_id:"",global_config_id:"",global_vault_id:"",admin_cap_id:""};return o.length>0&&(o.forEach(c=>{const d=c.parsedJson;if(c.type)switch(pe(c.type).full_address){case`${t}::config::InitConfigEvent`:a.global_config_id=d.global_config_id,a.admin_cap_id=d.admin_cap_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=d.pools_id;break;case`${t}::rewarder::RewarderInitEvent`:a.global_vault_id=d.global_vault_id;break;case`${t}::partner::InitPartnerEvent`:a.partners_id=d.partners_id;break}}),this.updateCache(n,a,Ye)),a}async getSuiTransactionResponse(e,t=!1){const n=`${e}_getSuiTransactionResponse`,i=this.getCache(n,t);if(i!==void 0)return i;let s;try{s=await this._sdk.fullClient.getTransactionBlock({digest:e,options:{showEvents:!0,showEffects:!0,showBalanceChanges:!0,showInput:!0,showObjectChanges:!0}})}catch{s=await this._sdk.fullClient.getTransactionBlock({digest:e,options:{showEvents:!0,showEffects:!0}})}return this.updateCache(n,s,Ye),s}async creatPool(e){const t=new xe,{integrate:n,clmm_pool:i}=this.sdk.sdkOptions,s=J(i),r=s.global_config_id,o=s.pools_id;return e.forEach(a=>{const c=[t.object(r),t.object(o),t.pure.u32(a.tick_spacing),t.pure.u128(a.initialize_sqrt_price),t.pure.string(a.uri),t.object(Oe)];t.moveCall({target:`${n.published_at}::${Td}::create_pool`,typeArguments:[a.coinTypeA,a.coinTypeB],arguments:c})}),t}async creatPoolAndAddLiquidity(e){if(!di(this._sdk.senderAddress))throw new Ne("this config sdk senderAddress is not set right","InvalidSendAddress");const t=new xe,{integrate:n,clmm_pool:i}=this.sdk.sdkOptions,s=J(i),r=s.global_config_id,o=s.pools_id,a=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress),c=tt.buildAddLiquidityFixTokenCoinInput(t,!e.fix_amount_a,e.amount_a,e.slippage,e.coinTypeA,a,!1),d=tt.buildAddLiquidityFixTokenCoinInput(t,e.fix_amount_a,e.amount_b,e.slippage,e.coinTypeB,a,!1),u=[t.object(r),t.object(o),t.pure.u32(e.tick_spacing),t.pure.u128(e.initialize_sqrt_price),t.pure.string(e.uri),c.targetCoin,d.targetCoin,t.pure.u32(Number(yi(BigInt(e.tick_lower)).toString())),t.pure.u32(Number(yi(BigInt(e.tick_upper)).toString())),t.pure.u64(e.amount_a),t.pure.u64(e.amount_b),t.pure.bool(e.fix_amount_a),t.object(Oe)];return t.moveCall({target:`${n.published_at}::${ko}::create_pool_with_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:u}),t}async fetchTicks(e){let t=[],n=[];for(;;){const s=await this.getTicks({pool_id:e.pool_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,start:n,limit:512});if(t=[...t,...s],s.length<512)break;n=[s[s.length-1].index]}return t}async getTicks(e){var d;const{integrate:t,simulationAccount:n}=this.sdk.sdkOptions,i=[],s=[e.coinTypeA,e.coinTypeB],r=new xe,o=r.makeMoveVec({elements:e.start.map(u=>r.pure.u32(u)),type:void 0}),a=[r.object(e.pool_id),o,r.pure.u64(e.limit.toString())];if(r.moveCall({target:`${t.published_at}::${Ts}::fetch_ticks`,arguments:a,typeArguments:s}),!di(n.address))throw new Ne("this config simulationAccount is not set right","InvalidSimulateAccount");const c=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:n.address});if(c.error!=null)throw new Ne(`getTicks error code: ${c.error??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");return(d=c.events)==null||d.forEach(u=>{pe(u.type).name==="FetchTicksResultEvent"&&u.parsedJson.ticks.forEach(l=>{i.push(iU(l))})}),i}async fetchPositionRewardList(e){var o;const{integrate:t,simulationAccount:n}=this.sdk.sdkOptions,i=[];let s=[];const r=512;for(;;){const a=[e.coinTypeA,e.coinTypeB],c=new xe,d=c.makeMoveVec({elements:s.map(p=>c.pure.address(p)),type:void 0}),u=[c.object(e.pool_id),d,c.pure.u64(r)];if(c.moveCall({target:`${t.published_at}::${Ts}::fetch_positions`,arguments:u,typeArguments:a}),!di(n.address))throw new Ne("this config simulationAccount is not set right","InvalidSimulateAccount");const l=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:n.address});if(l.error!=null)throw new Ne(`fetch position reward error code: ${l.error??"unknown error"}, please check config and tick object ids`,"InvalidPositionRewardObject");const f=[];if((o=l==null?void 0:l.events)==null||o.forEach(p=>{pe(p.type).name==="FetchPositionsEvent"&&p.parsedJson.positions.forEach(m=>{const _=uT(m);f.push(_)})}),i.push(...f),f.length<r)break;s=[f[f.length-1].pos_object_id]}return i}async fetchTicksByRpc(e){let t=[],n=null;const i=512;for(;;){const s=[],r=await this.sdk.fullClient.getDynamicFields({parentId:e,cursor:n,limit:i});if(n=r.nextCursor,r.data.forEach(o=>{pe(o.objectType).module==="skip_list"&&s.push(o.objectId)}),t=[...t,...await this.getTicksByRpc(s)],n===null||r.data.length<i)break}return t}async getTicksByRpc(e){var i,s,r;const t=[],n=await this.sdk.fullClient.batchGetObjects(e,{showContent:!0,showType:!0});for(const o of n){if(o.error!=null||((s=(i=o.data)==null?void 0:i.content)==null?void 0:s.dataType)!=="moveObject")throw new Ne(`getTicksByRpc error code: ${((r=o.error)==null?void 0:r.code)??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");const a=q0(o);a!=null&&t.push(a)}return t}async getTickDataByIndex(e,t){var s,r;const n={type:"u64",value:yi(BigInt($R(t).toString())).toString()},i=await this.sdk.fullClient.getDynamicFieldObject({parentId:e,name:n});if(i.error!=null||((r=(s=i.data)==null?void 0:s.content)==null?void 0:r.dataType)!=="moveObject")throw new Ne(`get tick by index: ${t} error: ${i.error}`,"InvalidTickIndex");return q0(i)}async getTickDataByObjectId(e){var n,i,s;const t=await this.sdk.fullClient.getObject({id:e,options:{showContent:!0}});if(t.error!=null||((i=(n=t.data)==null?void 0:n.content)==null?void 0:i.dataType)!=="moveObject")throw new Ne(`getTicksByRpc error code: ${((s=t.error)==null?void 0:s.code)??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");return q0(t)}async getPartnerRefFeeAmount(e,t=!0){var c,d;const n=await this._sdk.fullClient.batchGetObjects([e],{showOwner:!0,showContent:!0,showDisplay:t,showType:!0});if(n[0].error!=null||((d=(c=n[0].data)==null?void 0:c.content)==null?void 0:d.dataType)!=="moveObject")throw new Ne(`get partner by object id: ${e} error: ${n[0].error}`,"NotFoundPartnerObject");const i=n[0].data.content.fields.balances,s=await this._sdk.fullClient.getDynamicFieldsByPage(i.fields.id.id),r=[];s.data.forEach(u=>{var l,f;if(u.error!=null||((f=(l=u.data)==null?void 0:l.content)==null?void 0:f.dataType)!=="moveObject")throw new Ne(`when getPartnerRefFeeAmount get partner object error: ${u.error}, please check the rpc, contracts address config and position id.`,"InvalidConfig");r.push(u.objectId)});const o=[];return(await this._sdk.fullClient.batchGetObjects(r,{showOwner:!0,showContent:!0,showDisplay:t,showType:!0})).forEach(u=>{var f,p;if(u.error!=null||((p=(f=u.data)==null?void 0:f.content)==null?void 0:p.dataType)!=="moveObject")throw new Ne(`get coin by object id: ${u.data.objectId} error: ${u.error}`,"InvalidParnterRefFeeFields");const l={coinAddress:u.data.content.fields.name,coinObjectId:u.data.objectId,balance:BigInt(u.data.content.fields.value)};o.push(l)}),o}async claimPartnerRefFeePayload(e,t,n){const i=new xe,{clmm_pool:s}=this.sdk.sdkOptions,{global_config_id:r}=J(s),o=[n],a=[i.object(r),i.object(e),i.object(t)];return i.moveCall({target:`${s.published_at}::${wR}::claim_ref_fee`,arguments:a,typeArguments:o}),i}updateCache(e,t,n=os){let i=this._cache[e];i?(i.overdueTime=mn(n),i.value=t):i=new $i(t,mn(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},aU=class{constructor(e){We(this,"_sdk");We(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}buildPositionType(){return`${this._sdk.sdkOptions.clmm_pool.package_id}::position::Position`}async getPositionList(e,t=[],n=!0){const i=[],s=await this._sdk.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:n,showOwner:!0},filter:{Package:this._sdk.sdkOptions.clmm_pool.package_id}}),r=t.length>0;for(const o of s.data)if(pe(o.data.type).full_address===this.buildPositionType()){const c=ea(o),d=`${c.pos_object_id}_getPositionList`;this.updateCache(d,c,Ye),r?t.includes(c.pool)&&i.push(c):i.push(c)}return i}async getPosition(e,t,n=!0,i=!0){let s=await this.getSimplePosition(t,i);return n&&(s=await this.updatePositionRewarders(e,s)),s}async getPositionById(e,t=!0,n=!0){const i=await this.getSimplePosition(e,n);if(t){const s=await this._sdk.Pool.getPool(i.pool,!1);return await this.updatePositionRewarders(s.position_manager.positions_handle,i)}return i}async getSimplePosition(e,t=!0){const n=`${e}_getPositionList`;let i=this.getSimplePositionByCache(e);if(i===void 0){const s=await this.sdk.fullClient.getObject({id:e,options:{showContent:!0,showType:!0,showDisplay:t,showOwner:!0}});i=ea(s),this.updateCache(n,i,Ye)}return i}getSimplePositionByCache(e){const t=`${e}_getPositionList`;return this.getCache(t)}async getSipmlePositionList(e,t=!0){const n=[],i=[];return e.forEach(s=>{const r=this.getSimplePositionByCache(s);r?n.push(r):i.push(s)}),i.length>0&&(await this._sdk.fullClient.batchGetObjects(i,{showOwner:!0,showContent:!0,showDisplay:t,showType:!0})).forEach(r=>{const o=ea(r);n.push(o);const a=`${o.pos_object_id}_getPositionList`;this.updateCache(a,o,Ye)}),n}async updatePositionRewarders(e,t){const n=await this.getPositionRewarders(e,t.pos_object_id);return{...t,...n}}async getPositionRewarders(e,t){try{const n=await this._sdk.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),s=yt(n.data).value.fields.value;return uT(s)}catch(n){console.log(n);return}}async fetchPosFeeAmount(e){var c;const{clmm_pool:t,integrate:n,simulationAccount:i}=this.sdk.sdkOptions,s=new xe;for(const d of e){const u=[d.coinTypeA,d.coinTypeB],l=[s.object(J(t).global_config_id),s.object(d.poolAddress),s.pure.address(d.positionId)];s.moveCall({target:`${n.published_at}::${Ts}::fetch_position_fees`,arguments:l,typeArguments:u})}if(!di(i.address))throw new Ne("this config simulationAccount is not set right","InvalidSimulateAccount");const r=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:i.address});if(r.error!=null)throw new Ne(`fetch position fee error code: ${r.error??"unknown error"}, please check config and postion and pool object ids`,"InvalidPoolObject");const o=(c=r.events)==null?void 0:c.filter(d=>pe(d.type).name==="FetchPositionFeesEvent");if(o.length===0)return[];const a=[];for(let d=0;d<o.length;d+=1){const{parsedJson:u}=o[d],l={feeOwedA:new w(u.fee_owned_a),feeOwedB:new w(u.fee_owned_b),position_id:u.position_id};a.push(l)}return a}async batchFetchPositionFees(e){const t=[];for(const i of e){const s=await this._sdk.Position.getPositionById(i,!1),r=await this._sdk.Pool.getPool(s.pool,!1);t.push({poolAddress:r.poolAddress,positionId:s.pos_object_id,coinTypeA:r.coinTypeA,coinTypeB:r.coinTypeB})}const n={};if(t.length>0){const i=await this.fetchPosFeeAmount(t);for(const s of i)n[s.position_id]=s;return n}return n}async createAddLiquidityFixTokenPayload(e,t){if(!di(this._sdk.senderAddress))throw new Ne("this config sdk senderAddress is not set right","InvalidSendAddress");const n=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:i,isAdjustCoinB:s}=uf(e);if(e=e,e.fix_amount_a&&i||!e.fix_amount_a&&s)return await tt.buildAddLiquidityFixTokenForGas(this._sdk,n,e,t)}return tt.buildAddLiquidityFixToken(this._sdk,n,e)}async createAddLiquidityPayload(e){const{integrate:t,clmm_pool:n}=this._sdk.sdkOptions;if(!di(this._sdk.senderAddress))throw new Ne("this config sdk senderAddress is not set right","InvalidSendAddress");const i=yi(BigInt(e.tick_lower)).toString(),s=yi(BigInt(e.tick_upper)).toString(),r=[e.coinTypeA,e.coinTypeB];let o=new xe;const a=!fd(e.pos_id),c=BigInt(e.max_amount_a),d=BigInt(e.max_amount_b),u=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress),l=tt.buildCoinForAmount(o,u,c,e.coinTypeA,!1),f=tt.buildCoinForAmount(o,u,d,e.coinTypeB,!1);return a?o.moveCall({target:`${t.published_at}::${ko}::open_position_with_liquidity`,typeArguments:r,arguments:[o.object(J(n).global_config_id),o.object(e.pool_id),o.pure.u32(Number(i)),o.pure.u32(Number(s)),l.targetCoin,f.targetCoin,o.pure.u64(e.max_amount_a),o.pure.u64(e.max_amount_b),o.pure.u128(e.delta_liquidity),o.object(Oe)]}):(o=tt.createCollectRewarderAndFeeParams(this._sdk,o,e,u,l.remainCoins,f.remainCoins),o.moveCall({target:`${t.published_at}::${ko}::add_liquidity`,typeArguments:r,arguments:[o.object(J(n).global_config_id),o.object(e.pool_id),o.object(e.pos_id),l.targetCoin,f.targetCoin,o.pure.u64(e.max_amount_a),o.pure.u64(e.max_amount_b),o.pure.u128(e.delta_liquidity),o.object(Oe)]})),o}async removeLiquidityTransactionPayload(e){if(!di(this._sdk.senderAddress))throw new Ne("this config sdk senderAddress is not set right","InvalidSendAddress");const{clmm_pool:t,integrate:n}=this.sdk.sdkOptions,i="remove_liquidity";let s=new xe;const r=[e.coinTypeA,e.coinTypeB],o=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);s=tt.createCollectRewarderAndFeeParams(this._sdk,s,e,o);const a=[s.object(J(t).global_config_id),s.object(e.pool_id),s.object(e.pos_id),s.pure.u128(e.delta_liquidity),s.pure.u64(e.min_amount_a),s.pure.u64(e.min_amount_b),s.object(Oe)];return s.moveCall({target:`${n.published_at}::${Td}::${i}`,typeArguments:r,arguments:a}),s}async closePositionTransactionPayload(e){if(!di(this._sdk.senderAddress))throw new Ne("this config sdk senderAddress is not set right","InvalidSendAddress");const{clmm_pool:t,integrate:n}=this.sdk.sdkOptions;let i=new xe;const s=[e.coinTypeA,e.coinTypeB],r=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);return i=tt.createCollectRewarderAndFeeParams(this._sdk,i,e,r),i.moveCall({target:`${n.published_at}::${Td}::close_position`,typeArguments:s,arguments:[i.object(J(t).global_config_id),i.object(e.pool_id),i.object(e.pos_id),i.pure.u64(e.min_amount_a),i.pure.u64(e.min_amount_b),i.object(Oe)]}),i}openPositionTransactionPayload(e){const{clmm_pool:t,integrate:n}=this.sdk.sdkOptions,i=new xe,s=[e.coinTypeA,e.coinTypeB],r=yi(BigInt(e.tick_lower)).toString(),o=yi(BigInt(e.tick_upper)).toString(),a=[i.object(J(t).global_config_id),i.object(e.pool_id),i.pure.u32(Number(r)),i.pure.u32(Number(o))];return i.moveCall({target:`${n.published_at}::${Td}::open_position`,typeArguments:s,arguments:a}),i}async collectFeeTransactionPayload(e){if(!di(this._sdk.senderAddress))throw new Ne("this config sdk senderAddress is not set right","InvalidSendAddress");const t=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null,!0),n=new xe,i=tt.buildCoinForAmount(n,t,BigInt(0),e.coinTypeA,!1),s=tt.buildCoinForAmount(n,t,BigInt(0),e.coinTypeB,!1);return this.createCollectFeePaylod(e,n,i.targetCoin,s.targetCoin),n}createCollectFeePaylod(e,t,n,i){const{clmm_pool:s,integrate:r}=this.sdk.sdkOptions,o=[e.coinTypeA,e.coinTypeB],a=[t.object(J(s).global_config_id),t.object(e.pool_id),t.object(e.pos_id),n,i];return t.moveCall({target:`${r.published_at}::${ko}::collect_fee`,typeArguments:o,arguments:a}),t}createCollectFeeNoSendPaylod(e,t,n,i){const{clmm_pool:s,integrate:r}=this.sdk.sdkOptions,o=[e.coinTypeA,e.coinTypeB],a=[t.object(J(s).global_config_id),t.object(e.pool_id),t.object(e.pos_id),n,i];return t.moveCall({target:`${r.published_at}::${tT}::collect_fee`,typeArguments:o,arguments:a}),t}async calculateFee(e){const t=await this.collectFeeTransactionPayload(e);if(!di(this._sdk.senderAddress))throw new Ne("this config sdk senderAddress is not set right","InvalidSendAddress");const n=await this._sdk.fullClient.devInspectTransactionBlock({transactionBlock:t,sender:this._sdk.senderAddress});for(const i of n.events)if(pe(i.type).name==="CollectFeeEvent"){const s=i.parsedJson;return{feeOwedA:s.amount_a,feeOwedB:s.amount_b}}return{feeOwedA:"0",feeOwedB:"0"}}updateCache(e,t,n=os){let i=this._cache[e];i?(i.overdueTime=mn(n),i.value=t):i=new $i(t,mn(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},cU=class{constructor(e){We(this,"_sdk");We(this,"growthGlobal");this._sdk=e,this.growthGlobal=[dt,dt,dt]}get sdk(){return this._sdk}async emissionsEveryDay(e){const n=(await this.sdk.Pool.getPool(e)).rewarder_infos;if(!n)return null;const i=[];for(const s of n){const r=Ft.fromX64(new w(s.emissions_per_second));i.push({emissions:Math.floor(r.toNumber()*60*60*24),coin_address:s.coinAddress})}return i}async updatePoolRewarder(e,t){const n=await this.sdk.Pool.getPool(e),i=n.rewarder_last_updated_time;if(n.rewarder_last_updated_time=t.toString(),Number(n.liquidity)===0||t.eq(new w(i)))return n;const s=t.div(new w(1e3)).sub(new w(i)).add(new w(15)),r=n.rewarder_infos;for(let o=0;o<r.length;o+=1){const a=r[o],c=Ft.checkMulDivFloor(s,new w(a.emissions_per_second),new w(n.liquidity),128);this.growthGlobal[o]=new w(a.growth_global).add(new w(c))}return n}async posRewardersAmount(e,t,n){const i=Date.parse(new Date().toString()),s=await this.updatePoolRewarder(e,new w(i)),r=await this.sdk.Position.getPositionRewarders(t,n);if(r===void 0)return[];const o=s.ticks_handle,a=await this.sdk.Pool.getTickDataByIndex(o,r.tick_lower_index),c=await this.sdk.Pool.getTickDataByIndex(o,r.tick_upper_index);return this.posRewardersAmountInternal(s,r,a,c)}async poolRewardersAmount(e,t){const n=Date.parse(new Date().toString()),i=await this.updatePoolRewarder(t,new w(n)),s=await this.sdk.Position.getPositionList(e,[t]),r=await this.getPoolLowerAndUpperTicks(i.ticks_handle,s),o=[dt,dt,dt];for(let a=0;a<s.length;a+=1){const c=await this.posRewardersAmountInternal(i,s[a],r[0][a],r[1][a]);for(let d=0;d<3;d+=1)o[d]=o[d].add(c[d].amount_owed)}return o}posRewardersAmountInternal(e,t,n,i){const s=t.tick_lower_index,r=t.tick_upper_index,o=sU(e,n,i,s,r,this.growthGlobal),a=[],c=[];if(o.length>0){let d=Ft.subUnderflowU128(o[0],new w(t.reward_growth_inside_0));d.gt(new w("3402823669209384634633745948738404"))&&(d=pr);const u=Ft.checkMulShiftRight(new w(t.liquidity),d,64,128);a.push(o[0]),c.push({amount_owed:new w(t.reward_amount_owed_0).add(u),coin_address:e.rewarder_infos[0].coinAddress})}if(o.length>1){let d=Ft.subUnderflowU128(o[1],new w(t.reward_growth_inside_1));d.gt(new w("3402823669209384634633745948738404"))&&(d=pr);const u=Ft.checkMulShiftRight(new w(t.liquidity),d,64,128);a.push(o[1]),c.push({amount_owed:new w(t.reward_amount_owed_1).add(u),coin_address:e.rewarder_infos[1].coinAddress})}if(o.length>2){let d=Ft.subUnderflowU128(o[2],new w(t.reward_growth_inside_2));d.gt(new w("3402823669209384634633745948738404"))&&(d=pr);const u=Ft.checkMulShiftRight(new w(t.liquidity),d,64,128);a.push(o[2]),c.push({amount_owed:new w(t.reward_amount_owed_2).add(u),coin_address:e.rewarder_infos[2].coinAddress})}return c}async batchFetchPositionRewarders(e){const t=[];for(const i of e){const s=await this._sdk.Position.getPositionById(i,!1),r=await this._sdk.Pool.getPool(s.pool,!1);t.push({poolAddress:r.poolAddress,positionId:s.pos_object_id,coinTypeA:r.coinTypeA,coinTypeB:r.coinTypeB,rewarderInfo:r.rewarder_infos})}const n={};if(t.length>0){const i=await this.fetchPosRewardersAmount(t);for(const s of i)n[s.positionId]=s.rewarderAmountOwed;return n}return n}async fetchPositionRewarders(e,t){const n={poolAddress:e.poolAddress,positionId:t,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,rewarderInfo:e.rewarder_infos};return(await this.fetchPosRewardersAmount([n]))[0].rewarderAmountOwed}async batchFetchPositionFees(e){const t=[];for(const i of e){const s=await this._sdk.Position.getPositionById(i,!1),r=await this._sdk.Pool.getPool(s.pool,!1);t.push({poolAddress:r.poolAddress,positionId:s.pos_object_id,coinTypeA:r.coinTypeA,coinTypeB:r.coinTypeB})}const n={};if(t.length>0){const i=await this.fetchPosFeeAmount(t);for(const s of i)n[s.position_id]=s;return n}return n}async fetchPosFeeAmount(e){var c;const{clmm_pool:t,integrate:n,simulationAccount:i}=this.sdk.sdkOptions,s=new xe;for(const d of e){const u=[d.coinTypeA,d.coinTypeB],l=[s.object(J(t).global_config_id),s.object(d.poolAddress),s.pure.address(d.positionId)];s.moveCall({target:`${n.published_at}::${Ts}::fetch_position_fees`,arguments:l,typeArguments:u})}const o=(c=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:i.address})).events)==null?void 0:c.filter(d=>pe(d.type).name==="FetchPositionFeesEvent");if(o.length===0)return[];const a=[];for(let d=0;d<o.length;d+=1){const{parsedJson:u}=o[d],l={feeOwedA:new w(u.fee_owned_a),feeOwedB:new w(u.fee_owned_b),position_id:u.position_id};a.push(l)}return a}async fetchPosRewardersAmount(e){var c;const{clmm_pool:t,integrate:n,simulationAccount:i}=this.sdk.sdkOptions,s=new xe;for(const d of e){const u=[d.coinTypeA,d.coinTypeB],l=[s.object(J(t).global_config_id),s.object(d.poolAddress),s.pure.address(d.positionId),s.object(Oe)];s.moveCall({target:`${n.published_at}::${Ts}::fetch_position_rewards`,arguments:l,typeArguments:u})}if(!di(i.address))throw new Ne(`this config simulationAccount: ${i.address} is not set right`,"InvalidSimulateAccount");const r=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:i.address});if(r.error!=null)throw new Ne(`fetch position rewards error code: ${r.error??"unknown error"}, please check config and params`,"InvalidConfig");const o=(c=r.events)==null?void 0:c.filter(d=>pe(d.type).name==="FetchPositionRewardsEvent");if(o.length===0)return[];if(o.length!==e.length)throw new Ne("valueData.length !== params.pools.length");const a=[];for(let d=0;d<o.length;d+=1){const u={poolAddress:e[d].poolAddress,positionId:e[d].positionId,rewarderAmountOwed:[]};for(let l=0;l<e[d].rewarderInfo.length;l+=1)u.rewarderAmountOwed.push({amount_owed:new w(o[d].parsedJson.data[l]),coin_address:e[d].rewarderInfo[l].coinAddress});a.push(u)}return a}async fetchPoolRewardersAmount(e,t){const n=await this.sdk.Pool.getPool(t),i=await this.sdk.Position.getPositionList(e,[t]),s=[];for(const a of i)s.push({poolAddress:n.poolAddress,positionId:a.pos_object_id,rewarderInfo:n.rewarder_infos,coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB});const r=await this.fetchPosRewardersAmount(s),o=[dt,dt,dt];if(r!=null)for(const a of r)for(let c=0;c<a.rewarderAmountOwed.length;c+=1)o[c]=o[c].add(a.rewarderAmountOwed[c].amount_owed);return o}async getPoolLowerAndUpperTicks(e,t){const n=[],i=[];for(const s of t){const r=await this.sdk.Pool.getTickDataByIndex(e,s.tick_lower_index),o=await this.sdk.Pool.getTickDataByIndex(e,s.tick_upper_index);n.push(r),i.push(o)}return[n,i]}async collectRewarderTransactionPayload(e){if(!di(this._sdk.senderAddress))throw new Ne("this config sdk senderAddress is not set right","InvalidSendAddress");const t=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null);let n=new xe;return n=tt.createCollectRewarderAndFeeParams(this._sdk,n,e,t),n}async batchCollectRewardePayload(e,t){if(!di(this._sdk.senderAddress))throw new Ne("this config sdk senderAddress is not set right","InvalidSendAddress");const n=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null);t=t||new xe;const i={};return e.forEach(s=>{const r=jn(s.coinTypeA),o=jn(s.coinTypeB);if(s.collect_fee){let c=i[r];c===void 0&&(c=tt.buildCoinForAmount(t,n,BigInt(0),r,!1),i[r]=c);let d=i[o];d===void 0&&(d=tt.buildCoinForAmount(t,n,BigInt(0),o,!1),i[o]=d),t=this._sdk.Position.createCollectFeeNoSendPaylod({pool_id:s.pool_id,pos_id:s.pos_id,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB},t,c.targetCoin,d.targetCoin)}const a=[];s.rewarder_coin_types.forEach(c=>{const d=jn(c);let u=i[c];u===void 0&&(u=tt.buildCoinForAmount(t,n,BigInt(0),d,!1),i[d]=u),a.push(u.targetCoin)}),t=this.createCollectRewarderNoSendPaylod(s,t,a)}),Object.keys(i).forEach(s=>{const r=i[s];r.isMintZeroCoin&&tt.buildTransferCoin(this._sdk,t,r.targetCoin,s,this._sdk.senderAddress)}),t}createCollectRewarderPaylod(e,t,n){const{clmm_pool:i,integrate:s}=this.sdk.sdkOptions,r=J(i),o=[e.coinTypeA,e.coinTypeB];return e.rewarder_coin_types.forEach((a,c)=>{t&&t.moveCall({target:`${s.published_at}::${ko}::collect_reward`,typeArguments:[...o,a],arguments:[t.object(r.global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.object(r.global_vault_id),n[c],t.object(Oe)]})}),t}createCollectRewarderNoSendPaylod(e,t,n){const{clmm_pool:i,integrate:s}=this.sdk.sdkOptions,r=J(i),o=[e.coinTypeA,e.coinTypeB];return e.rewarder_coin_types.forEach((a,c)=>{t&&t.moveCall({target:`${s.published_at}::${tT}::collect_reward`,typeArguments:[...o,a],arguments:[t.object(r.global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.object(r.global_vault_id),n[c],t.object(Oe)]})}),t}};function Nu(e,t){return{pair:`${e}-${t}`,reversePair:`${t}-${e}`}}var dU=class{constructor(e){We(this,"graph");We(this,"pathProviders");We(this,"coinProviders");We(this,"_coinAddressMap");We(this,"poolAddressMap");We(this,"_sdk");this.pathProviders=[],this.coinProviders={coins:[]},this.graph=new K6(!1),this._coinAddressMap=new Map,this.poolAddressMap=new Map,this._sdk=e,this.getPoolAddressMapAndDirection=this.getPoolAddressMapAndDirection.bind(this),this.setCoinList=this.setCoinList.bind(this),this.loadGraph=this.loadGraph.bind(this),this.addCoinProvider=this.addCoinProvider.bind(this),this.addPathProvider=this.addPathProvider.bind(this),this.preRouterSwapA2B2C=this.preRouterSwapA2B2C.bind(this),this.price=this.price.bind(this),this.getPoolWithTVL=this.getPoolWithTVL.bind(this)}get sdk(){return this._sdk}getPoolAddressMapAndDirection(e,t){const{pair:n,reversePair:i}=Nu(e,t);let s=this.poolAddressMap.get(n);if(s!=null)return{addressMap:s,direction:!0};if(s=this.poolAddressMap.get(i),s!=null)return{addressMap:s,direction:!1}}setCoinList(){this.coinProviders.coins.forEach(e=>{this._coinAddressMap.set(e.address,e)})}loadGraph(e,t){this.addCoinProvider(e),this.addPathProvider(t),this.setCoinList(),this.pathProviders.forEach(n=>{const{paths:i}=n;i.forEach(s=>{const r=this.graph.getVertexByKey(s.base)??new Bl(s.base),o=this.graph.getVertexByKey(s.quote)??new Bl(s.quote);this.graph.addEdge(new H6(r,o));const a=this._coinAddressMap.get(s.base),c=this._coinAddressMap.get(s.quote);if(a!=null&&c!=null){const d=Nu(s.base,s.quote).pair;this.poolAddressMap.set(d,s.addressMap)}})})}addPathProvider(e){for(let t=0;t<e.paths.length;t+=1){const{base:n,quote:i}=e.paths[t];n.localeCompare(i)<0&&(e.paths[t].base=i,e.paths[t].quote=n),n==="0x2::sui::SUI"&&(e.paths[t].base=i,e.paths[t].quote=n),i==="0x2::sui::SUI"&&(e.paths[t].base=n,e.paths[t].quote=i)}return this.pathProviders.push(e),this}addCoinProvider(e){return this.coinProviders=e,this}tokenInfo(e){return this._coinAddressMap.get(e)}getFeeRate(e,t,n){const i=Nu(e,t).pair,s=this.poolAddressMap.get(i);if(s!=null){for(const[a,c]of s.entries())if(c===n)return a*100}const r=Nu(e,t).reversePair,o=this.poolAddressMap.get(r);if(o!=null){for(const[a,c]of o.entries())if(c===n)return a*100}return 0}async price(e,t,n,i,s,r,o){const a=this.tokenInfo(e),c=this.tokenInfo(t);if(a===void 0||c===void 0)throw new Ne("From/To coin is undefined","InvalidCoin");const d=this.graph.getVertexByKey(a.address),u=this.graph.getVertexByKey(c.address),l=this.graph.findAllPath(d,u),f=Array.from(l);if(f.length===0)throw new Ne("No find valid path in coin graph","NotFoundPath");let p=[];for(let N=0;N<f.length;N+=1){const R=f[N];if(R.length>3)continue;const M=[],A=[],h=[],y=[];for(let E=0;E<R.length-1;E+=1){const U=R[E].value.toString(),L=R[E+1].value.toString(),H=this.getPoolAddressMapAndDirection(U,L),Q=H==null?void 0:H.addressMap,O=H==null?void 0:H.direction;Q!=null&&O!=null&&(A.push(O),M.push(U),M.push(L),Q.forEach(b=>{E===0?h.push(b):y.push(b)}))}for(const E of h)if(y.length>0)for(const U of y){const L={stepNums:2,poolAB:E,poolBC:U,a2b:A[0],b2c:A[1],amount:n,byAmountIn:i,coinTypeA:M[0],coinTypeB:M[1],coinTypeC:M[3]};p.push(L)}else{const U={stepNums:1,poolAB:E,poolBC:void 0,a2b:A[0],b2c:void 0,amount:n,byAmountIn:i,coinTypeA:M[0],coinTypeB:M[1],coinTypeC:void 0};p.push(U)}}const m=p.filter(N=>N.stepNums===1),_=p.filter(N=>N.stepNums!==1);let x=[];try{x=await this.getPoolWithTVL()}catch{x=[]}if(x.length>0){const N=new Map(x.map(R=>[R.poolAddress,R]));_.sort((R,M)=>{let A=0,h=0;if(N.has(R.poolAB)&&N.has(R.poolBC)){const y=N.get(R.poolAB),E=N.get(R.poolBC);A=Math.min(y.tvl,E.tvl)}if(N.has(M.poolAB)&&N.has(M.poolBC)){const y=N.get(M.poolAB),E=N.get(M.poolBC);h=Math.min(y.tvl,E.tvl)}return h-A})}if(p=[...m,..._],p.length===0){if(o!=null){const N=await this.sdk.Swap.preSwapWithMultiPool(o),R={amountIn:new w(N.estimatedAmountIn),amountOut:new w(N.estimatedAmountOut),poolAddress:[N.poolAddress],a2b:[N.aToB],rawAmountLimit:i?[N.estimatedAmountOut]:[N.estimatedAmountIn],isExceed:N.isExceed,coinType:[e,t]},M={paths:[R],partner:r,priceSlippagePoint:s};return{amountIn:new w(N.estimatedAmountIn),amountOut:new w(N.estimatedAmountOut),paths:[R],a2b:N.aToB,b2c:void 0,byAmountIn:i,isExceed:N.isExceed,targetSqrtPrice:[N.estimatedEndSqrtPrice],currentSqrtPrice:[N.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:M}}throw new Ne("No parameters available for service downgrade","NoDowngradeNeedParams")}const C=await this.preRouterSwapA2B2C(p.slice(0,16));if(C==null){if(o!=null){const R=await this.sdk.Swap.preSwapWithMultiPool(o),M={amountIn:new w(R.estimatedAmountIn),amountOut:new w(R.estimatedAmountOut),poolAddress:[R.poolAddress],a2b:[R.aToB],rawAmountLimit:i?[R.estimatedAmountOut]:[R.estimatedAmountIn],isExceed:R.isExceed,coinType:[e,t]},A={paths:[M],partner:r,priceSlippagePoint:s};return{amountIn:new w(R.estimatedAmountIn),amountOut:new w(R.estimatedAmountOut),paths:[M],a2b:R.aToB,b2c:void 0,byAmountIn:i,isExceed:R.isExceed,targetSqrtPrice:[R.estimatedEndSqrtPrice],currentSqrtPrice:[R.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:A}}return{amountIn:dt,amountOut:dt,paths:[],a2b:!1,b2c:!1,byAmountIn:i,isExceed:!0,targetSqrtPrice:[],currentSqrtPrice:[],coinTypeA:"",coinTypeB:"",coinTypeC:void 0,createTxParams:void 0}}const k=C.index,T=p[k].poolBC!=null?[p[k].poolAB,p[k].poolBC]:[p[k].poolAB],S=i?[C.amountMedium,C.amountOut]:[C.amountIn,C.amountMedium],P=[];P.push(p[k].a2b),C.stepNum>1&&P.push(p[k].b2c);const z=[];z.push(p[k].coinTypeA),z.push(p[k].coinTypeB),C.stepNum>1&&z.push(p[k].coinTypeC);const X={amountIn:C.amountIn,amountOut:C.amountOut,poolAddress:T,a2b:P,rawAmountLimit:S,isExceed:C.isExceed,coinType:z},G={paths:[X],partner:r,priceSlippagePoint:s};return{amountIn:C.amountIn,amountOut:C.amountOut,paths:[X],a2b:p[k].a2b,b2c:C.stepNum>1?p[k].b2c:void 0,byAmountIn:i,isExceed:C.isExceed,targetSqrtPrice:C.targetSqrtPrice,currentSqrtPrice:C.currentSqrtPrice,coinTypeA:p[k].coinTypeA,coinTypeB:p[k].coinTypeB,coinTypeC:C.stepNum>1?p[k].coinTypeC:void 0,createTxParams:G}}async priceUseV1(e,t,n,i,s,r,o){if(o!=null){const a=await this.sdk.Swap.preSwapWithMultiPool(o),c={amountIn:new w(a.estimatedAmountIn),amountOut:new w(a.estimatedAmountOut),poolAddress:[a.poolAddress],a2b:[a.aToB],rawAmountLimit:i?[a.estimatedAmountOut]:[a.estimatedAmountIn],isExceed:a.isExceed,coinType:[e,t]},d={paths:[c],partner:r,priceSlippagePoint:s};return{amountIn:new w(a.estimatedAmountIn),amountOut:new w(a.estimatedAmountOut),paths:[c],a2b:a.aToB,b2c:void 0,byAmountIn:i,isExceed:a.isExceed,targetSqrtPrice:[a.estimatedEndSqrtPrice],currentSqrtPrice:[a.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:d}}throw new Ne("No parameters available for service downgrade","NoDowngradeNeedParams")}async preRouterSwapA2B2C(e){var l;if(e.length===0)return null;const{integrate:t,simulationAccount:n}=this.sdk.sdkOptions,i=new xe;for(const f of e)if(f.stepNums>1){const p=[i.object(f.poolAB),i.object(f.poolBC),i.pure.bool(f.a2b),i.pure.bool(f.b2c),i.pure.bool(f.byAmountIn),i.pure.u64(f.amount.toString())],m=[];f.a2b?m.push(f.coinTypeA,f.coinTypeB):m.push(f.coinTypeB,f.coinTypeA),f.b2c?m.push(f.coinTypeB,f.coinTypeC):m.push(f.coinTypeC,f.coinTypeB),i.moveCall({target:`${t.published_at}::${Vo}::calculate_router_swap_result`,typeArguments:m,arguments:p})}else{const p=[i.object(f.poolAB),i.pure.bool(f.a2b),i.pure.bool(f.byAmountIn),i.pure.u64(f.amount.toString())],m=f.a2b?[f.coinTypeA,f.coinTypeB]:[f.coinTypeB,f.coinTypeA];i.moveCall({target:`${t.published_at}::${vR}::get_expect_swap_result`,arguments:p,typeArguments:m})}if(!di(n.address))throw new Ne("this config simulationAccount is not set right","InvalidSimulateAccount");const r=(l=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address})).events)==null?void 0:l.filter(f=>pe(f.type).name==="CalculatedRouterSwapResultEvent"||pe(f.type).name==="ExpectSwapResultEvent");if(r.length===0)return null;let o=e[0].byAmountIn?dt:Pc,a=0;for(let f=0;f<r.length;f+=1)if(!r[f].parsedJson.data.is_exceed)if(e[0].byAmountIn){const p=new w(r[f].parsedJson.data.amount_out);p.gt(o)&&(a=f,o=p)}else{const p=e[f].stepNums>1?new w(r[f].parsedJson.data.amount_in):new w(r[f].parsedJson.data.amount_in).add(new w(r[f].parsedJson.data.fee_amount));p.lt(o)&&(a=f,o=p)}const c=[],d=[];return e[a].stepNums>1?(d.push(r[a].parsedJson.data.target_sqrt_price_ab,r[a].parsedJson.data.target_sqrt_price_cd),c.push(r[a].parsedJson.data.current_sqrt_price_ab,r[a].parsedJson.data.current_sqrt_price_cd)):(d.push(r[a].parsedJson.data.after_sqrt_price),c.push(r[a].parsedJson.current_sqrt_price)),{index:a,amountIn:e[0].byAmountIn?e[a].amount:o,amountMedium:r[a].parsedJson.data.amount_medium,amountOut:e[0].byAmountIn?o:e[a].amount,targetSqrtPrice:d,currentSqrtPrice:c,isExceed:r[a].parsedJson.data.is_exceed,stepNum:e[a].stepNums}}async getPoolWithTVL(){const e=[],{swapCountUrl:t}=this._sdk.sdkOptions;if(!t)return e;let n;try{n=await fetch(t)}catch{throw new Ne(`Failed to get pool list with liquidity from ${t}.`,"InvalidSwapCountUrl")}let i;try{i=await n.json()}catch{throw new Ne(`Failed tp [arse response from ${t}].`,"InvalidSwapCountUrl")}if(i.code!==200)throw new Ne(`Failed to get pool list from ${t}. Statu code is ${i.code}.`,"InvalidSwapCountUrl");const{pools:s}=i.data;for(const r of s)e.push({poolAddress:r.swap_account,tvl:Number(r.tvl_in_usd)});return e}},uU=class{constructor(e){We(this,"_sdk");We(this,"calculateSingleImpact",(e,t)=>t.minus(e).div(t).mul(100));this._sdk=e}get sdk(){return this._sdk}calculateSwapFee(e){let t=q(0);return e.forEach(n=>{const i=n.basePaths.length;if(i>0){const s=n.basePaths[0],r=s.label==="Cetus"?new ie(s.feeRate).div(10**6):new ie(s.feeRate).div(10**9),o=q(s.inputAmount).div(10**s.fromDecimal).mul(r);if(t=t.add(o),i>1){const a=n.basePaths[1],c=s.direction?s.currentPrice:new ie(1).div(s.currentPrice),d=a.direction?a.currentPrice:new ie(1).div(a.currentPrice),u=a.label==="Cetus"?new ie(a.feeRate).div(10**6):new ie(a.feeRate).div(10**9),f=q(a.outputAmount).div(10**a.toDecimal).mul(u).div(c.mul(d));t=t.add(f)}}}),t.toString()}calculateSwapPriceImpact(e){let t=q(0);return e.forEach(n=>{const i=n.basePaths.length;if(i===1){const s=n.basePaths[0],r=q(s.outputAmount).div(10**s.toDecimal),o=q(s.inputAmount).div(10**s.fromDecimal),a=r.div(o),c=s.direction?new ie(s.currentPrice):new ie(1).div(s.currentPrice);t=t.add(this.calculateSingleImpact(a,c))}if(i===2){const s=n.basePaths[0],r=n.basePaths[1],o=s.direction?new ie(s.currentPrice):new ie(1).div(s.currentPrice),a=r.direction?new ie(r.currentPrice):new ie(1).div(r.currentPrice),c=o.mul(a),d=new ie(r.outputAmount).div(10**r.toDecimal),u=new ie(s.inputAmount).div(10**s.fromDecimal),l=d.div(u);t=t.add(this.calculateSingleImpact(l,c))}}),t.toString()}async preSwapWithMultiPool(e){var d;const{integrate:t,simulationAccount:n}=this.sdk.sdkOptions,i=new xe,s=[e.coinTypeA,e.coinTypeB];for(let u=0;u<e.poolAddresses.length;u+=1){const l=[i.object(e.poolAddresses[u]),i.pure.bool(e.a2b),i.pure.bool(e.byAmountIn),i.pure.u64(e.amount)];i.moveCall({target:`${t.published_at}::${Ts}::calculate_swap_result`,arguments:l,typeArguments:s})}if(!di(n.address))throw new Ne("this config simulationAccount is not set right","InvalidSimulateAccount");const r=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address});if(r.error!=null)throw new Ne(`pre swap with multi pools error code: ${r.error??"unknown error"}, please check config and params`,"InvalidConfig");const o=(d=r.events)==null?void 0:d.filter(u=>pe(u.type).name==="CalculatedSwapResultEvent");if(o.length===0)return null;if(o.length!==e.poolAddresses.length)throw new Ne("valueData.length !== params.pools.length","ParamsLengthNotEqual");let a=e.byAmountIn?dt:Pc,c=0;for(let u=0;u<o.length;u+=1)if(!o[u].parsedJson.data.is_exceed)if(e.byAmountIn){const l=new w(o[u].parsedJson.data.amount_out);l.gt(a)&&(c=u,a=l)}else{const l=new w(o[u].parsedJson.data.amount_out);l.lt(a)&&(c=u,a=l)}return this.transformSwapWithMultiPoolData({poolAddress:e.poolAddresses[c],a2b:e.a2b,byAmountIn:e.byAmountIn,amount:e.amount,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},o[c].parsedJson)}async preswap(e){var c;const{integrate:t,simulationAccount:n}=this.sdk.sdkOptions,i=new xe,s=[e.coinTypeA,e.coinTypeB],r=[i.object(e.pool.poolAddress),i.pure.bool(e.a2b),i.pure.bool(e.byAmountIn),i.pure.u64(e.amount)];if(i.moveCall({target:`${t.published_at}::${Ts}::calculate_swap_result`,arguments:r,typeArguments:s}),!di(n.address))throw new Ne("this config simulationAccount is not set right","InvalidSimulateAccount");const o=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address});if(o.error!=null)throw new Ne(`preswap error code: ${o.error??"unknown error"}, please check config and params`,"InvalidConfig");const a=(c=o.events)==null?void 0:c.filter(d=>pe(d.type).name==="CalculatedSwapResultEvent");return a.length===0?null:this.transformSwapData(e,a[0].parsedJson.data)}transformSwapData(e,t){const n=t.amount_in&&t.fee_amount?new w(t.amount_in).add(new w(t.fee_amount)).toString():"";return{poolAddress:e.pool.poolAddress,currentSqrtPrice:e.currentSqrtPrice,estimatedAmountIn:n,estimatedAmountOut:t.amount_out,estimatedEndSqrtPrice:t.after_sqrt_price,estimatedFeeAmount:t.fee_amount,isExceed:t.is_exceed,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn}}transformSwapWithMultiPoolData(e,t){const{data:n}=t;console.log("json data. ",n);const i=n.amount_in&&n.fee_amount?new w(n.amount_in).add(new w(n.fee_amount)).toString():"";return{poolAddress:e.poolAddress,estimatedAmountIn:i,estimatedAmountOut:n.amount_out,estimatedEndSqrtPrice:n.after_sqrt_price,estimatedStartSqrtPrice:n.step_results[0].current_sqrt_price,estimatedFeeAmount:n.fee_amount,isExceed:n.is_exceed,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn}}calculateRates(e){const{currentPool:t}=e,n=yR(t);let i;e.a2b?i=e.swapTicks.sort((l,f)=>f.index-l.index):i=e.swapTicks.sort((l,f)=>l.index-f.index);const s=jR(e.a2b,e.byAmountIn,e.amount,n,i);let r=!1;e.byAmountIn?r=s.amountIn.lt(e.amount):r=s.amountOut.lt(e.amount);const o=ar.getDefaultSqrtPriceLimit(e.a2b);e.a2b&&s.nextSqrtPrice.lt(o)&&(r=!0),!e.a2b&&s.nextSqrtPrice.gt(o)&&(r=!0);let a=0;s.crossTickNum>6&&s.crossTickNum<40&&(a=22e3*(s.crossTickNum-6)),s.crossTickNum>40&&(r=!0);const c=qe.sqrtPriceX64ToPrice(n.currentSqrtPrice,e.decimalsA,e.decimalsB).toNumber(),d=qe.sqrtPriceX64ToPrice(s.nextSqrtPrice,e.decimalsA,e.decimalsB).toNumber(),u=Math.abs(c-d)/c*100;return{estimatedAmountIn:s.amountIn,estimatedAmountOut:s.amountOut,estimatedEndSqrtPrice:s.nextSqrtPrice,estimatedFeeAmount:s.feeAmount,isExceed:r,extraComputeLimit:a,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn,priceImpactPct:u}}async createSwapTransactionPayload(e,t){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:i,isAdjustCoinB:s}=uf(e);if(e.a2b&&i||!e.a2b&&s)return await tt.buildSwapTransactionForGas(this._sdk,e,n,t)}return tt.buildSwapTransaction(this.sdk,e,n)}async createSwapTransactionWithoutTransferCoinsPayload(e,t){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:i,isAdjustCoinB:s}=uf(e);if(e.a2b&&i||!e.a2b&&s)return await tt.buildSwapTransactionWithoutTransferCoinsForGas(this._sdk,e,n,t)}return tt.buildSwapTransactionWithoutTransferCoins(this.sdk,e,n)}},lU=class{constructor(e){We(this,"_sdk");We(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getAllRegisteredTokenList(e=!1){return await this.factchTokenList("",e)}async getOwnerTokenList(e="",t=!1){return await this.factchTokenList(e,t)}async getAllRegisteredPoolList(e=!1){return await this.factchPoolList("",e)}async getOwnerPoolList(e="",t=!1){return await this.factchPoolList(e,t)}async getWarpPoolList(e=!1){return await this.factchWarpPoolList("","",e)}async getOwnerWarpPoolList(e="",t="",n=!1){return await this.factchWarpPoolList(e,t,n)}async getTokenListByCoinTypes(e){const t={},n="getAllRegisteredTokenList",i=this.getCache(n);if(i!==void 0){const r=i;for(const o of e)for(const a of r)if(jn(o)===jn(a.address)){t[o]=a;continue}}const s=e.filter(r=>t[r]===void 0);for(const r of s){const o=`${r}_metadata`,a=this.getCache(o);if(a!==void 0)t[r]=a;else{const c=await this._sdk.fullClient.getCoinMetadata({coinType:r});if(c){const d={id:c.id,name:c.name,symbol:c.symbol,official_symbol:c.symbol,coingecko_id:"",decimals:c.decimals,project_url:"",logo_url:c.iconUrl,address:r};t[r]=d,this.updateCache(o,d,Ye)}}}return t}async factchTokenList(e="",t=!1){var l;const{simulationAccount:n,token:i}=this.sdk.sdkOptions,s="getAllRegisteredTokenList",r=this.getCache(s,t);if(r!==void 0)return r;const o=e.length>0,a=512;let c=0,d=[];if(i===void 0)throw Error("please config token ofsdkOptions");const u=J(i);for(;;){const f=new xe;f.moveCall({target:`${i.published_at}::coin_list::${o?"fetch_full_list_with_limit":"fetch_all_registered_coin_info_with_limit"}`,arguments:o?[f.pure.address(u.coin_registry_id),f.pure.address(e),f.pure.u64(c),f.pure.u64(a)]:[f.pure.address(u.coin_registry_id),f.pure.u64(c),f.pure.u64(a)]});const p=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:f,sender:n.address}),m=[];if((l=p.events)==null||l.forEach(_=>{pe(_.type).full_address===`${i.published_at}::coin_list::FetchCoinListEvent`&&_.parsedJson.full_list.value_list.forEach(C=>{m.push(this.transformData(C,!1))})}),d=[...d,...m],m.length<a)break;c=d.length}return d}async factchPoolList(e="",t=!1){var l;const{simulationAccount:n,token:i}=this.sdk.sdkOptions,s="getAllRegisteredPoolList",r=this.getCache(s,t);if(r!==void 0)return r;let o=[];const a=512;let c=0;const d=e.length>0;if(i===void 0)throw Error("please config token ofsdkOptions");const u=J(i);for(;;){const f=new xe;if(f.moveCall({target:`${i.published_at}::lp_list::${d?"fetch_full_list_with_limit":"fetch_all_registered_coin_info_with_limit"}`,arguments:d?[f.pure.address(u.pool_registry_id),f.pure.address(e),f.pure.u64(c),f.pure.u64(a)]:[f.pure.address(u.pool_registry_id),f.pure.u64(c),f.pure.u64(a)]}),!di(n.address))throw new Ne("this config simulationAccount is not set right","InvalidSimulateAccount");const p=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:f,sender:n.address}),m=[];if((l=p.events)==null||l.forEach(_=>{pe(_.type).full_address===`${i.published_at}::lp_list::FetchPoolListEvent`&&_.parsedJson.full_list.value_list.forEach(C=>{m.push(this.transformData(C,!0))})}),o=[...o,...m],m.length<a)break;c=o.length}return o}async factchWarpPoolList(e="",t="",n=!1){const i=await this.factchPoolList(e,n);if(i.length===0)return[];const s=await this.factchTokenList(t,n),r=[];for(const o of i){for(const a of s)a.address===o.coin_a_address&&(o.coinA=a),a.address===o.coin_b_address&&(o.coinB=a);r.push(o)}return r}async getTokenConfigEvent(e=!1){const t=this._sdk.sdkOptions.token.package_id,n=`${t}_getTokenConfigEvent`,i=this.getCache(n,e);if(i!==void 0)return i;const s=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),r=bu(s),o=await this._sdk.fullClient.queryEventsByPage({Transaction:r}),a={coin_registry_id:"",pool_registry_id:"",coin_list_owner:"",pool_list_owner:""};return o.data.length>0&&o.data.forEach(c=>{const d=pe(c.type);if(c.transactionModule==="coin_list")switch(d.name){case"InitListEvent":a.coin_list_owner=c.parsedJson.list_id;break;case"InitRegistryEvent":a.coin_registry_id=c.parsedJson.registry_id;break}else if(c.transactionModule==="lp_list")switch(d.name){case"InitListEvent<address>":a.pool_list_owner=c.parsedJson.list_id;break;case"InitRegistryEvent<address>":a.pool_registry_id=c.parsedJson.registry_id;break}}),a.coin_registry_id.length>0&&this.updateCache(n,a,Ye),a}transformData(e,t){const n={...e};if(t)try{n.coin_a_address=pe(n.coin_a_address).full_address,n.coin_b_address=pe(n.coin_b_address).full_address}catch{}else n.address=pe(n.address).full_address;if(e.extensions){const i=e.extensions.contents;for(const s of i){const{key:r}=s;let{value:o}=s;if(r==="labels")try{o=JSON.parse(decodeURIComponent(tc.decode(o)))}catch{}r==="pyth_id"&&(o=gn(o)),n[r]=o}delete n.extensions}return n}updateCache(e,t,n=os){let i=this._cache[e];i?(i.overdueTime=mn(n),i.value=t):i=new $i(t,mn(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},fU=class{constructor(e){We(this,"_sdk");this._sdk=e}get sdk(){return this._sdk}calculatePrice(e,t,n,i,s){const r=i?t:n,o=i?n:t;return s==="Cetus"?qe.sqrtPriceX64ToPrice(e,r,o):new ie(e.toString()).div(new ie(10).pow(new ie(o+9-r)))}parseJsonResult(e){return{isExceed:e.is_exceed,isTimeout:e.is_timeout,inputAmount:e.input_amount,outputAmount:e.output_amount,fromCoin:e.from_coin,toCoin:e.to_coin,byAmountIn:e.by_amount_in,splitPaths:e.split_paths.map(n=>({pathIndex:n.path_index,lastQuoteOutput:n.last_quote_output,percent:n.percent,basePaths:n.best_path.map(s=>({direction:s.direction,label:s.label,poolAddress:s.provider,fromCoin:s.from_coin,toCoin:s.to_coin,outputAmount:s.output_amount,inputAmount:s.input_amount,feeRate:s.fee_rate,currentSqrtPrice:new w(s.current_sqrt_price.toString()),afterSqrtPrice:s.label==="Cetus"?new w(s.after_sqrt_price.toString()):dt,fromDecimal:s.from_decimal,toDecimal:s.to_decimal,currentPrice:this.calculatePrice(new w(s.current_sqrt_price.toString()),s.from_decimal,s.to_decimal,s.direction,s.label)})),inputAmount:n.input_amount,outputAmount:n.output_amount}))}}async fetchDataWithAxios(e,t,n){try{const i={...t,timeout:n},s=await tR(e,i);return s.status===200?this.parseJsonResult(s.data):null}catch(i){return console.error(i),null}}async getBestRouter(e,t,n,i,s,r,o,a,c=!1,d=!1,u=[]){let l=null,f="v2",p={},m=this.sdk.sdkOptions.aggregatorUrl;if(u.length>0){const _=new URL(m);m=`${_.protocol}//${_.hostname}/router_with_lp_changes`,p={method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({from:e,to:t,amount:n,by_amount_in:i,order_split:c,external_router:d,sender_address:"None",request_id:encodeURIComponent(qu()),lp_changes:u})}}else m=`
      ${m}?from=${encodeURIComponent(e)}&to=${encodeURIComponent(t)}&amount=${encodeURIComponent(n)}&by_amount_in=${encodeURIComponent(i)}&order_split=${encodeURIComponent(c)}&external_router=${encodeURIComponent(d)}&sender_address=''&request_id=${encodeURIComponent(qu())}
      `;if(l=await this.fetchDataWithAxios(m,p,6e3),l==null){const _=await this.sdk.Router.priceUseV1(e,t,new w(n),i,s,r,a),x=[];for(const k of _.paths){const T=[];if(k.poolAddress.length>1){const P=this.sdk.Router.tokenInfo(k.coinType[0]).decimals,z=this.sdk.Router.tokenInfo(k.coinType[1]).decimals,X=k.a2b[0]?qe.sqrtPriceX64ToPrice(new w(_.currentSqrtPrice[0]),P,z):qe.sqrtPriceX64ToPrice(new w(_.currentSqrtPrice[0]),z,P),G={direction:k.a2b[0],label:"Cetus",poolAddress:k.poolAddress[0],fromCoin:k.coinType[0],toCoin:k.coinType[1],feeRate:this.sdk.Router.getFeeRate(k.coinType[0],k.coinType[1],k.poolAddress[0]),outputAmount:_.byAmountIn?k.rawAmountLimit[0].toString():k.rawAmountLimit[1].toString(),inputAmount:k.amountIn.toString(),currentSqrtPrice:_.currentSqrtPrice[0],currentPrice:X,fromDecimal:P,toDecimal:z},te=this.sdk.Router.tokenInfo(k.coinType[1]).decimals,N=this.sdk.Router.tokenInfo(k.coinType[2]).decimals,R=k.a2b[1]?qe.sqrtPriceX64ToPrice(new w(_.currentSqrtPrice[1]),te,N):qe.sqrtPriceX64ToPrice(new w(_.currentSqrtPrice[1]),N,te),M={direction:k.a2b[1],label:"Cetus",poolAddress:k.poolAddress[1],fromCoin:k.coinType[1],toCoin:k.coinType[2],feeRate:this.sdk.Router.getFeeRate(k.coinType[1],k.coinType[2],k.poolAddress[1]),outputAmount:k.amountOut.toString(),inputAmount:_.byAmountIn?k.rawAmountLimit[0].toString():k.rawAmountLimit[1].toString(),currentSqrtPrice:_.currentSqrtPrice[1],currentPrice:R,fromDecimal:te,toDecimal:N};T.push(G,M)}else{const P=this.sdk.Router.tokenInfo(k.coinType[0]).decimals,z=this.sdk.Router.tokenInfo(k.coinType[1]).decimals,X=k.a2b[0]?qe.sqrtPriceX64ToPrice(new w(_.currentSqrtPrice[0]),P,z):qe.sqrtPriceX64ToPrice(new w(_.currentSqrtPrice[0]),z,P),G={direction:k.a2b[0],label:"Cetus",poolAddress:k.poolAddress[0],fromCoin:k.coinType[0],toCoin:k.coinType[1],feeRate:this.sdk.Router.getFeeRate(k.coinType[0],k.coinType[1],k.poolAddress[0]),outputAmount:k.amountOut.toString(),inputAmount:k.amountIn.toString(),currentSqrtPrice:_.currentSqrtPrice[0],currentPrice:X,fromDecimal:P,toDecimal:z};T.push(G)}const S={percent:Number(k.amountIn)/Number(_.amountIn)*100,inputAmount:Number(k.amountIn.toString()),outputAmount:Number(k.amountOut.toString()),pathIndex:0,lastQuoteOutput:0,basePaths:T};x.push(S)}const C={isExceed:_.isExceed,isTimeout:!0,inputAmount:Number(_.amountIn.toString()),outputAmount:Number(_.amountOut.toString()),fromCoin:_.coinTypeA,toCoin:_.coinTypeC!=null?_.coinTypeC:_.coinTypeB,byAmountIn:_.byAmountIn,splitPaths:x};f="v1",l=C}return{result:l,version:f}}async getBestRouterByServer(e,t,n,i,s,r=!1,o=!1,a=[]){let c=null,d={},u=this.sdk.sdkOptions.aggregatorUrl;if(a.length>0){const l=new URL(u);u=`${l.protocol}//${l.hostname}/router_with_lp_changes`,d={method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({from:e,to:t,amount:n,by_amount_in:i,order_split:r,external_router:o,sender_address:"None",request_id:encodeURIComponent(qu()),lp_changes:a})}}else u=`
      ${u}?from=${encodeURIComponent(e)}&to=${encodeURIComponent(t)}&amount=${encodeURIComponent(n)}&by_amount_in=${encodeURIComponent(i)}&order_split=${encodeURIComponent(r)}&external_router=${encodeURIComponent(o)}&sender_address=''&request_id=${encodeURIComponent(qu())}
      `;if(c=await this.fetchDataWithAxios(u,d,6e3),c==null)throw new Ne("Invalid server response","InvalidServerResponse");return c}async getBestRouterByRpc(e,t,n,i,s,r,o){const a=await this.sdk.Router.priceUseV1(e,t,new w(n),i,s,r,o),c=[];for(const u of a.paths){const l=[];if(u.poolAddress.length>1){const p=this.sdk.Router.tokenInfo(u.coinType[0]).decimals,m=this.sdk.Router.tokenInfo(u.coinType[1]).decimals,_=u.a2b[0]?qe.sqrtPriceX64ToPrice(new w(a.currentSqrtPrice[0]),p,m):qe.sqrtPriceX64ToPrice(new w(a.currentSqrtPrice[0]),m,p),x={direction:u.a2b[0],label:"Cetus",poolAddress:u.poolAddress[0],fromCoin:u.coinType[0],toCoin:u.coinType[1],feeRate:this.sdk.Router.getFeeRate(u.coinType[0],u.coinType[1],u.poolAddress[0]),outputAmount:a.byAmountIn?u.rawAmountLimit[0].toString():u.rawAmountLimit[1].toString(),inputAmount:u.amountIn.toString(),currentSqrtPrice:a.currentSqrtPrice[0],currentPrice:_,fromDecimal:p,toDecimal:m},C=this.sdk.Router.tokenInfo(u.coinType[1]).decimals,k=this.sdk.Router.tokenInfo(u.coinType[2]).decimals,T=u.a2b[1]?qe.sqrtPriceX64ToPrice(new w(a.currentSqrtPrice[1]),C,k):qe.sqrtPriceX64ToPrice(new w(a.currentSqrtPrice[1]),k,C),S={direction:u.a2b[1],label:"Cetus",poolAddress:u.poolAddress[1],fromCoin:u.coinType[1],toCoin:u.coinType[2],feeRate:this.sdk.Router.getFeeRate(u.coinType[1],u.coinType[2],u.poolAddress[1]),outputAmount:u.amountOut.toString(),inputAmount:a.byAmountIn?u.rawAmountLimit[0].toString():u.rawAmountLimit[1].toString(),currentSqrtPrice:a.currentSqrtPrice[1],currentPrice:T,fromDecimal:C,toDecimal:k};l.push(x,S)}else{const p=this.sdk.Router.tokenInfo(u.coinType[0]).decimals,m=this.sdk.Router.tokenInfo(u.coinType[1]).decimals,_=u.a2b[0]?qe.sqrtPriceX64ToPrice(new w(a.currentSqrtPrice[0]),p,m):qe.sqrtPriceX64ToPrice(new w(a.currentSqrtPrice[0]),m,p),x={direction:u.a2b[0],label:"Cetus",poolAddress:u.poolAddress[0],fromCoin:u.coinType[0],toCoin:u.coinType[1],feeRate:this.sdk.Router.getFeeRate(u.coinType[0],u.coinType[1],u.poolAddress[0]),outputAmount:u.amountOut.toString(),inputAmount:u.amountIn.toString(),currentSqrtPrice:a.currentSqrtPrice[0],currentPrice:_,fromDecimal:p,toDecimal:m};l.push(x)}const f={percent:Number(u.amountIn)/Number(a.amountIn)*100,inputAmount:Number(u.amountIn.toString()),outputAmount:Number(u.amountOut.toString()),pathIndex:0,lastQuoteOutput:0,basePaths:l};c.push(f)}return{isExceed:a.isExceed,isTimeout:!0,inputAmount:Number(a.amountIn.toString()),outputAmount:Number(a.amountOut.toString()),fromCoin:a.coinTypeA,toCoin:a.coinTypeC!=null?a.coinTypeC:a.coinTypeB,byAmountIn:a.byAmountIn,splitPaths:c}}},hU=class{constructor(e){We(this,"_sdk");We(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}setTokenListCache(e){const{coin_list_handle:t}=J(this.sdk.sdkOptions.cetus_config),n=`${t}_getCoinConfigs`,i=this.getCache(n),s=i?[...i,...e]:e;this.updateCache(n,s,Ye)}async getTokenListByCoinTypes(e){const t={},{coin_list_handle:n}=J(this.sdk.sdkOptions.cetus_config),i=`${n}_getCoinConfigs`,s=this.getCache(i);if(s!==void 0){const o=s;for(const a of e)for(const c of o)if(jn(a)===jn(c.address)){t[a]=c;continue}}const r=e.filter(o=>t[o]===void 0);for(const o of r){const a=`${o}_metadata`,c=this.getCache(a);if(c!==void 0)t[o]=c;else{const d=await this._sdk.fullClient.getCoinMetadata({coinType:o});if(d){const u={id:d.id,pyth_id:"",name:d.name,symbol:d.symbol,official_symbol:d.symbol,coingecko_id:"",decimals:d.decimals,project_url:"",logo_url:d.iconUrl,address:o};t[o]=u,this.updateCache(a,u,Ye)}else console.log(`not found ${o}`)}}return t}async getCoinConfigs(e=!1,t=!0){const{coin_list_handle:n}=J(this.sdk.sdkOptions.cetus_config),i=`${n}_getCoinConfigs`,s=this.getCache(i,e);if(s)return s;const o=(await this._sdk.fullClient.getDynamicFieldsByPage(n)).data.map(d=>d.objectId),a=await this._sdk.fullClient.batchGetObjects(o,{showContent:!0}),c=[];return a.forEach(d=>{var l,f;if(d.error!=null||((f=(l=d.data)==null?void 0:l.content)==null?void 0:f.dataType)!=="moveObject")throw new Ne(`when getCoinConfigs get objects error: ${d.error}, please check the rpc and contracts address config.`,"InvalidConfig");const u=this.buildCoinConfig(d,t);this.updateCache(`${n}_${u.address}_getCoinConfig`,u,Ye),c.push({...u})}),this.updateCache(i,c,Ye),c}async getCoinConfig(e,t=!1,n=!0){var c,d;const{coin_list_handle:i}=J(this.sdk.sdkOptions.cetus_config),s=`${i}_${e}_getCoinConfig`,r=this.getCache(s,t);if(r)return r;const o=await this._sdk.fullClient.getDynamicFieldObject({parentId:i,name:{type:"0x1::type_name::TypeName",value:{name:zR(e)}}});if(o.error!=null||((d=(c=o.data)==null?void 0:c.content)==null?void 0:d.dataType)!=="moveObject")throw new Ne(`when getCoinConfig get object error: ${o.error}, please check the rpc and contracts address config.`,"InvalidConfig");const a=this.buildCoinConfig(o,n);return this.updateCache(s,a,Ye),a}buildCoinConfig(e,t=!0){let n=yt(e);n=n.value.fields;const i={...n};return i.id=Hs(e),i.address=pe(n.coin_type.fields.name).full_address,n.pyth_id&&(i.pyth_id=gn(n.pyth_id)),this.transformExtensions(i,n.extension_fields.fields.contents,t),delete i.coin_type,i}async getClmmPoolConfigs(e=!1,t=!0){const{clmm_pools_handle:n}=J(this.sdk.sdkOptions.cetus_config),i=`${n}_getClmmPoolConfigs`,s=this.getCache(i,e);if(s)return s;const o=(await this._sdk.fullClient.getDynamicFieldsByPage(n)).data.map(d=>d.objectId),a=await this._sdk.fullClient.batchGetObjects(o,{showContent:!0}),c=[];return a.forEach(d=>{var l,f;if(d.error!=null||((f=(l=d.data)==null?void 0:l.content)==null?void 0:f.dataType)!=="moveObject")throw new Ne(`when getClmmPoolsConfigs get objects error: ${d.error}, please check the rpc and contracts address config.`,"InvalidConfig");const u=this.buildClmmPoolConfig(d,t);this.updateCache(`${u.pool_address}_getClmmPoolConfig`,u,Ye),c.push({...u})}),this.updateCache(i,c,Ye),c}async getClmmPoolConfig(e,t=!1,n=!0){const{clmm_pools_handle:i}=J(this.sdk.sdkOptions.cetus_config),s=`${e}_getClmmPoolConfig`,r=this.getCache(s,t);if(r)return r;const o=await this._sdk.fullClient.getDynamicFieldObject({parentId:i,name:{type:"address",value:e}}),a=this.buildClmmPoolConfig(o,n);return this.updateCache(s,a,Ye),a}buildClmmPoolConfig(e,t=!0){let n=yt(e);n=n.value.fields;const i={...n};return i.id=Hs(e),i.pool_address=gn(n.pool_address),this.transformExtensions(i,n.extension_fields.fields.contents,t),i}async getLaunchpadPoolConfigs(e=!1,t=!0){const{launchpad_pools_handle:n}=J(this.sdk.sdkOptions.cetus_config),i=`${n}_getLaunchpadPoolConfigs`,s=this.getCache(i,e);if(s)return s;const o=(await this._sdk.fullClient.getDynamicFieldsByPage(n)).data.map(d=>d.objectId),a=await this._sdk.fullClient.batchGetObjects(o,{showContent:!0}),c=[];return a.forEach(d=>{var l,f;if(d.error!=null||((f=(l=d.data)==null?void 0:l.content)==null?void 0:f.dataType)!=="moveObject")throw new Ne(`when getCoinConfigs get objects error: ${d.error}, please check the rpc and contracts address config.`,"InvalidConfig");const u=this.buildLaunchpadPoolConfig(d,t);this.updateCache(`${u.pool_address}_getLaunchpadPoolConfig`,u,Ye),c.push({...u})}),this.updateCache(i,c,Ye),c}async getLaunchpadPoolConfig(e,t=!1,n=!0){const{launchpad_pools_handle:i}=J(this.sdk.sdkOptions.cetus_config),s=`${e}_getLaunchpadPoolConfig`,r=this.getCache(s,t);if(r)return r;const o=await this._sdk.fullClient.getDynamicFieldObject({parentId:i,name:{type:"address",value:e}}),a=this.buildLaunchpadPoolConfig(o,n);return this.updateCache(s,a,Ye),a}buildLaunchpadPoolConfig(e,t=!0){let n=yt(e);n=n.value.fields;const i={...n};i.id=Hs(e),i.pool_address=gn(n.pool_address),this.transformExtensions(i,n.extension_fields.fields.contents,t);const s=[];n.social_media.fields.contents.forEach(r=>{s.push({name:r.fields.value.fields.name,link:r.fields.value.fields.link})}),i.social_media=s;try{i.regulation=decodeURIComponent(tc.decode(i.regulation).replace(/%/g,"%25"))}catch{i.regulation=tc.decode(i.regulation)}return i}transformExtensions(e,t,n=!0){const i=[];for(const s of t){const{key:r}=s.fields;let{value:o}=s.fields;if(r==="labels")try{o=JSON.parse(decodeURIComponent(tc.decode(o)))}catch{}n&&(e[r]=o),i.push({key:r,value:o})}delete e.extension_fields,n||(e.extensions=i)}async getCetusConfig(e=!1){const t=this._sdk.sdkOptions.cetus_config.package_id,n=`${t}_getCetusConfig`,i=this.getCache(n,e);if(i!==void 0)return i;const s=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),r=bu(s),o=await this._sdk.fullClient.queryEventsByPage({Transaction:r});let a={coin_list_id:"",launchpad_pools_id:"",clmm_pools_id:"",admin_cap_id:"",global_config_id:"",coin_list_handle:"",launchpad_pools_handle:"",clmm_pools_handle:""};if(o.data.length>0)for(const c of o.data)switch(pe(c.type).name){case"InitCoinListEvent":a.coin_list_id=c.parsedJson.coin_list_id;break;case"InitLaunchpadPoolsEvent":a.launchpad_pools_id=c.parsedJson.launchpad_pools_id;break;case"InitClmmPoolsEvent":a.clmm_pools_id=c.parsedJson.pools_id;break;case"InitConfigEvent":a.global_config_id=c.parsedJson.global_config_id,a.admin_cap_id=c.parsedJson.admin_cap_id;break}return a=await this.getCetusConfigHandle(a),a.clmm_pools_id.length>0&&this.updateCache(n,a,Ye),a}async getCetusConfigHandle(e){const t=[e.clmm_pools_id,e.coin_list_id,e.launchpad_pools_id];return(await this._sdk.fullClient.multiGetObjects({ids:t,options:{showContent:!0}})).forEach(i=>{var o,a;if(i.error!=null||((a=(o=i.data)==null?void 0:o.content)==null?void 0:a.dataType)!=="moveObject")throw new Ne(`when getCetusConfigHandle get objects error: ${i.error}, please check the rpc and contracts address config.`,"InvalidConfigHandle");const s=yt(i),r=aa(i);switch(pe(r).name){case"ClmmPools":e.clmm_pools_handle=s.pools.fields.id.id;break;case"CoinList":e.coin_list_handle=s.coins.fields.id.id;break;case"LaunchpadPools":e.launchpad_pools_handle=s.pools.fields.id.id;break}}),e}updateCache(e,t,n=os){let i=this._cache[e];i?(i.overdueTime=mn(n),i.value=t):i=new $i(t,mn(n)),this._cache[e]=i}getCache(e,t=!1){try{const n=this._cache[e];if(!n)return;if(t||!n.isValid()){delete this._cache[e];return}return n.value}catch(n){console.error(`Error accessing cache for key ${e}:`,n);return}}},pU=class extends pR{async queryEventsByPage(e,t="all"){let n=[],i=!0;const s=t==="all";let r=s?null:t.cursor;do{const o=await this.queryEvents({query:e,cursor:r,limit:s?null:t.limit});o.data?(n=[...n,...o.data],i=o.hasNextPage,r=o.nextCursor):i=!1}while(s&&i);return{data:n,nextCursor:r,hasNextPage:i}}async getOwnedObjectsByPage(e,t,n="all"){let i=[],s=!0;const r=n==="all";let o=r?null:n.cursor;do{const a=await this.getOwnedObjects({owner:e,...t,cursor:o,limit:r?null:n.limit});a.data?(i=[...i,...a.data],s=a.hasNextPage,o=a.nextCursor):s=!1}while(r&&s);return{data:i,nextCursor:o,hasNextPage:s}}async getDynamicFieldsByPage(e,t="all"){let n=[],i=!0;const s=t==="all";let r=s?null:t.cursor;do{const o=await this.getDynamicFields({parentId:e,cursor:r,limit:s?null:t.limit});o.data?(n=[...n,...o.data],i=o.hasNextPage,r=o.nextCursor):i=!1}while(s&&i);return{data:n,nextCursor:r,hasNextPage:i}}async batchGetObjects(e,t,n=50){let i=[];try{for(let s=0;s<Math.ceil(e.length/n);s++){const r=await this.multiGetObjects({ids:e.slice(s*n,n*(s+1)),options:t});i=[...i,...r]}}catch(s){console.log(s)}return i}async calculationTxGas(e){const{sender:t}=e.blockData;if(t===void 0)throw Error("sdk sender is empty");const n=await this.devInspectTransactionBlock({transactionBlock:e,sender:t}),{gasUsed:i}=n.effects;return Number(i.computationCost)+Number(i.storageCost)-Number(i.storageRebate)}async sendTransaction(e,t){try{return await this.signAndExecuteTransaction({transaction:t,signer:e,options:{showEffects:!0,showEvents:!0}})}catch(n){console.log("error: ",n)}}async sendSimulationTransaction(e,t,n=!0){try{if(n)return await this.devInspectTransactionBlock({transactionBlock:e,sender:t})}catch(i){console.log("devInspectTransactionBlock error",i)}}},Bs=class{constructor(e){We(this,"_cache",{});We(this,"_rpcModule");We(this,"_pool");We(this,"_position");We(this,"_swap");We(this,"_rewarder");We(this,"_router");We(this,"_router_v2");We(this,"_token");We(this,"_config");We(this,"_sdkOptions");We(this,"_senderAddress","");this._sdkOptions=e,this._rpcModule=new pU({url:e.fullRpcUrl}),this._swap=new uU(this),this._pool=new oU(this),this._position=new aU(this),this._rewarder=new cU(this),this._router=new dU(this),this._router_v2=new fU(this),this._token=new lU(this),this._config=new hU(this),Qm(this._sdkOptions)}get senderAddress(){return this._senderAddress}set senderAddress(e){this._senderAddress=e}get Swap(){return this._swap}get fullClient(){return this._rpcModule}get sdkOptions(){return this._sdkOptions}get Pool(){return this._pool}get Position(){return this._position}get Rewarder(){return this._rewarder}get Router(){return this._router}get RouterV2(){return this._router_v2}get CetusConfig(){return this._config}get Token(){return this._token}async getOwnerCoinAssets(e,t,n=!0){const i=[];let s=null;const r=`${this.sdkOptions.fullRpcUrl}_${e}_${t}_getOwnerCoinAssets`,o=this.getCache(r,n);if(o)return o;for(;;){const a=await(t?this.fullClient.getCoins({owner:e,coinType:t,cursor:s}):this.fullClient.getAllCoins({owner:e,cursor:s}));if(a.data.forEach(c=>{BigInt(c.balance)>0&&i.push({coinAddress:pe(c.coinType).source_address,coinObjectId:c.coinObjectId,balance:BigInt(c.balance)})}),s=a.nextCursor,!a.hasNextPage)break}return this.updateCache(r,i,30*1e3),i}async getOwnerCoinBalances(e,t){let n=[];return t?n=[await this.fullClient.getBalance({owner:e,coinType:t})]:n=[...await this.fullClient.getAllBalances({owner:e})],n}updateCache(e,t,n=Ye){let i=this._cache[e];i?(i.overdueTime=mn(n),i.value=t):i=new $i(t,mn(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},gU=Bs,L0="router",Ga=1e4,uo=class{static buildPoolImmutables(e){const{fields:t}=e.value.fields.value;return{clmm_pool_id:pe(t.clmm_pool_id).address,booster_type:pe(t.booster_type.fields.name).source_address,pool_id:pe(t.pool_id).address,coinTypeA:pe(t.coin_type_a.fields.name).source_address,coinTypeB:pe(t.coin_type_b.fields.name).source_address}}static buildPoolState(e){const t=yt(e),n=[];return t.config.fields.contents.forEach(s=>{n.push({lock_day:Number(s.fields.key),multiplier:Number(q(s.fields.value).div(Ga))})}),{basic_percent:Number(q(t.basic_percent).div(Ga)),balances:{balances_handle:t.balances.fields.id.id,size:t.balances.fields.size},config:n,lock_positions:{lock_positions_handle:t.lock_positions.fields.id.id,size:t.lock_positions.fields.size},is_open:t.is_open,index:Number(t.index),pool_id:Hs(e)}}static buildLockNFT(e){const t=pe(Hs(e)).address;return{lock_clmm_position:ea(e),locked_nft_id:t}}static buildLockPositionInfo(e){const t=yt(e),{value:n}=t.value.fields;return{type:n.type,position_id:n.fields.position_id,start_time:Number(n.fields.start_time),lock_period:Number(n.fields.lock_period),end_time:Number(n.fields.end_time),growth_rewarder:n.fields.growth_rewarder,rewarder_owned:n.fields.rewarder_owned,is_settled:n.fields.is_settled}}static isLocked(e){return e.end_time>Date.parse(new Date().toString())/1e3}},mU=class{constructor(e){We(this,"_sdk");We(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=!1){var r;const{booster:t}=this._sdk.sdkOptions,n=`${t.package_id}_getPoolImmutables`,i=this.getCache(n,e),s=[];if(i!==void 0)s.push(...i);else{const o=[];(r=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(J(t).booster_pool_handle)).data)==null||r.forEach(d=>{o.push(d.objectId)});const c=await this._sdk.ClmmSDK.fullClient.batchGetObjects(o,{showContent:!0});for(const d of c){const u=yt(d);if(u){const l=uo.buildPoolImmutables(u);this.updateCache(`${l.pool_id}_getPoolImmutable`,l,Ye),s.push(l)}}}return this.updateCache(n,s,Ye),s}async getPoolImmutable(e){const{booster:t}=this._sdk.sdkOptions,n=`${e}_getPoolImmutable`,i=this.getCache(n);if(i!==void 0)return i;const s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:J(t).booster_pool_handle,name:{type:"0x2::object::ID",value:e}}),r=yt(s),o=uo.buildPoolImmutables(r);return this.updateCache(n,o,Ye),o}async getPools(){const e=[],n=(await this.getPoolImmutables()).map(s=>s.pool_id),i=await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showType:!0,showContent:!0});for(const s of i){const r=uo.buildPoolState(s);if(r){const o={...await this.getPoolImmutable(r.pool_id),...r};e.push(o);const a=`${o.pool_id}_getPoolObject`;this.updateCache(a,o,Ye)}}return e}async getPool(e,t=!0){const n=`${e}_getPoolObject`,i=this.getCache(n,t),s=await this.getPoolImmutable(e);if(i!==void 0)return{...s,...i};const r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),o=uo.buildPoolState(r),a={...s,...o};return this.updateCache(n,a,Ye),a}async getPoolHandleId(e){const t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),n=yt(t);return n?n.list.fields.id.id:""}async getBoosterInitConfigs(){var i;const{package_id:e}=this.sdk.sdkOptions.booster,t=(i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`}))==null?void 0:i.data,n={booster_config_id:"",booster_pool_handle:""};return t.length>0&&t.forEach(s=>{const r=s.parsedJson;r&&(n.booster_config_id=r.config_id)}),n.booster_pool_handle=await this.getPoolHandleId(n.booster_config_id),n}async getOwnerBoosterPositions(e,t,n){const{booster:i}=this.sdk.sdkOptions,s=[],r=[],o=`${i.package_id}::lock_nft::LockNFT<${this._sdk.ClmmSDK.Position.buildPositionType()}>`,a=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showOwner:!0},filter:{StructType:o}});for(const d of a.data)if(pe(Xs(d)).source_address===o&&d.data){const l=uo.buildLockNFT(d);this.updateCache(`${l.locked_nft_id}_getBoosterPositionById`,l,Ye),l&&(t===void 0||t===l.lock_clmm_position.pool)&&s.push(l)}const c=await this.getLockPositionInfos(n,s.map(d=>d.locked_nft_id));for(const d of s)for(const u of c)if(d.lock_clmm_position.pos_object_id===u.position_id){r.push({...d,...u});break}return r}async getBoosterPosition(e,t){const n=`${t}_getBoosterPositionById`,i=this.getCache(n);let s;if(i!==void 0)s=i;else{const o=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0,showOwner:!0}});s=uo.buildLockNFT(o),this.updateCache(n,s,Ye)}const r=await this.getLockPositionInfo(e,t);return{...s,...r}}async getLockPositionInfos(e,t=[]){var r;const n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(e),i=[],s=[];return(r=n.data)==null||r.forEach(o=>{t.length>0?t.includes(o.name.value)&&i.push(o.objectId):i.push(o.objectId)}),i.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showContent:!0})).forEach(a=>{const c=uo.buildLockPositionInfo(a);c&&s.push(c)}),s}async getLockPositionInfo(e,t){const n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}});return uo.buildLockPositionInfo(n)}calculateXCetusRewarder(e,t,n){let i=t.basic_percent,s="0";e.forEach(a=>{a.coin_address===t.booster_type&&(console.log("find ",t.booster_type),s=a.amount_owed.toString())}),n.is_settled||t.config.forEach(a=>{a.lock_day===n.lock_period&&(i=a.multiplier)});const r=q(s).sub(n.growth_rewarder).mul(i);return q(n.rewarder_owned).add(r).toString()}lockPositionPayload(e){const{booster:t}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,i=new xe;return i.moveCall({target:`${t.published_at}::${L0}::lock_position`,typeArguments:[e.booster_type,e.coinTypeA,e.coinTypeB],arguments:[i.object(J(t).booster_config_id),i.object(J(n).global_config_id),i.object(e.booster_pool_id),i.object(e.clmm_pool_id),i.object(e.clmm_position_id),i.pure.u16(e.lock_day),i.object(Oe)]}),i}canceLockPositionPayload(e){const{booster:t}=this.sdk.sdkOptions,n=new xe;return n.moveCall({target:`${t.published_at}::${L0}::cancel_lock`,typeArguments:[e.booster_type],arguments:[n.object(J(t).booster_config_id),n.object(e.booster_pool_id),n.object(e.lock_nft_id),n.object(Oe)]}),n}redeemPayload(e){const{booster:t,xcetus:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,s=new xe,r=J(n);return s.moveCall({target:`${t.published_at}::${L0}::redeem`,typeArguments:[e.booster_type,e.coinTypeA,e.coinTypeB],arguments:[s.object(J(t).booster_config_id),s.object(J(i).global_config_id),s.object(e.booster_pool_id),s.object(e.lock_nft_id),s.object(e.clmm_pool_id),s.object(r.lock_manager_id),s.object(r.xcetus_manager_id),s.object(e.ve_nft_id),s.object(Oe)]}),s}updateCache(e,t,n=os){let i=this._cache[e];i?(i.overdueTime=mn(n),i.value=t):i=new $i(t,mn(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},Ni="router",lT=1e9,Ii=class{static priceRealToFix(e,t,n){const i=q(t-n).toNumber();return Number(q(e).div(q(10).pow(q(i))).toString())}static priceFixToReal(e,t,n){const i=q(t-n).toNumber();return Number(q(e).mul(q(10).pow(q(i))).toString())}static raiseTotalAmount(e,t,n){const i=q(t-n).abs().toNumber();return t>n?Number(q(e.total_supply).mul(e.current_price).div(q(10).pow(q(i))).toString()):Number(q(e.total_supply).mul(e.current_price).mul(q(10).pow(q(i))).toString())}static buildLaunchPadPool(e){const t=Xs(e),n=pe(t),i=yt(e),s={coin_type_sale:n.type_arguments[0],coin_type_raise:n.type_arguments[1],pool_address:gn(Hs(e)),is_settle:i.is_settle,current_price:q(i.initialize_price).div(q(lT)).toString(),price:i.initialize_price,min_price:"0",max_price:"0",sale_coin_amount:i.sale_coin,raise_coin_amount:i.raise_coin,total_purchase_amount:i.reality_raise_total,total_supply:i.sale_total,min_purchase:i.min_purchase,max_purchase:i.max_purchase,complete_raise_limit:i.least_raise_amount,softcap:i.softcap,max_raise_amount:i.hardcap,sale_decimals:0,raise_decimals:0,liquidity_injection_ratio:Number(i.liquidity_rate)/1e4,is_cancel:i.is_cancel,duration_summary:{start_time:Number(i.duration_manager.fields.start_time),end_time:0,settle_end_time:0,purchase_duration:Number(i.duration_manager.fields.activity_duration),settle_duration:Number(i.duration_manager.fields.settle_duration),lock_up_duration:Number(i.duration_manager.fields.locked_duration)},white_summary:{white_handle:i.white_list.fields.users.fields.id.id,protection_hard_cap:i.white_list.fields.hard_cap_total,protection_limit_used:i.white_list.fields.purchase_total,size:Number(i.white_list.fields.users.fields.size)},unused_sale:i.unused_sale,harvest_raise:i.harvest_raise,tick_spacing:Number(i.tick_spacing),owner:i.recipient,purchase_summary:{purchase_handle:i.purchase_list.fields.id.id,size:Number(i.purchase_list.fields.size)},pool_status:"Failed"};return Ii.updatePoolStatus(s),s}static updatePoolStatus(e){const t=Number(q(Date.now()/1e3).toFixed(0)),{duration_summary:n}=e,i=n.start_time+n.purchase_duration,s=i+n.settle_duration;if(n.end_time=i,n.settle_end_time=s,e.is_settle)e.pool_status="Ended";else if(e.is_cancel)e.pool_status="Canceled";else if(t<n.start_time)e.pool_status="Upcoming";else if(t>n.start_time&&t<i)e.pool_status="Live";else if(t>i&&t<s){const r=e.raise_coin_amount;Number(r)<Number(e.complete_raise_limit)?e.pool_status="Failed":e.pool_status="Settle"}return e}static async calculatePoolPrice(e,t){const n=await e.ClmmSDK.CetusConfig.getTokenListByCoinTypes([t.coin_type_sale,t.coin_type_raise]),i=n[t.coin_type_sale].decimals,s=n[t.coin_type_raise].decimals;t.min_price=this.priceFixToReal(Number(q(t.softcap).div(q(t.total_supply))),i,s).toString(),t.max_price=this.priceFixToReal(Number(q(t.max_raise_amount).div(q(t.total_supply))),i,s).toString(),t.current_price=this.priceFixToReal(Number(t.current_price),i,s).toString(),t.sale_decimals=i,t.raise_decimals=s}static async getWithdrawRaise(e){return e.pool_status==="Ended"?e.harvest_raise:"0"}static async getWithdrawSale(e){return e.pool_status==="Ended"?e.unused_sale:e.sale_coin_amount}static async getHistoryWithdrawRaise(e,t){if(t.pool_status==="Ended"){if(q(t.harvest_raise).equals(q(0))){const i=await e.Launchpad.getSettleEvent(t.pool_address);i&&(t.harvest_raise=i.unused_raise)}const n=w.min(new w(t.total_purchase_amount),new w(t.max_raise_amount));return q(n.toString()).mul(1-t.liquidity_injection_ratio).toString()}return"0"}static async getHistoryWithdrawSale(e,t){if(t.pool_status==="Ended"){const n=await e.Launchpad.getSettleEvent(t.pool_address);return n&&(t.unused_sale=n.unused_sale),t.unused_sale}return"0"}static async getOverrecruitReverseAmount(e,t){const n=await e.Launchpad.getPurchaseMarks(e.ClmmSDK.senderAddress,[t.pool_address],!1);if(n.length>0){const i=n[0].purchased_raise_amount,s=(await e.Launchpad.getPurchaseAmount(t.white_summary.white_handle,e.ClmmSDK.senderAddress)).safe_purchased_amount,{protection_limit_used:r}=t.white_summary;return q(i).sub(s).div(q(t.total_purchase_amount).sub(r)).mul(q(t.total_purchase_amount).sub(t.max_raise_amount)).toString()}return"0"}static async getCanPurchaseAmount(e,t){const n=await Ii.getOverrecruitReverseAmount(e,t),i=await e.Launchpad.getPurchaseMarks(e.ClmmSDK.senderAddress,[t.pool_address],!1);if(i){const s=i[0].purchased_raise_amount;q(s).sub(n).div(t.current_price)}return"0"}},_U=class{constructor(e){We(this,"_sdk");We(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=[],t=0,n=100,i=!1){var u;const{package_id:s}=this._sdk.sdkOptions.launchpad;if(s===void 0)throw Error("sdk.sdkOptions.launchpad is undefined");const r=`${s}_getPoolImmutables`,o=this.getCache(r,i),a=[],c=[];if(o!==void 0&&a.push(...o),a.length===0)try{((u=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${s}::factory::CreatePoolEvent`}))==null?void 0:u.data).forEach(f=>{const p=f.parsedJson;p&&a.push({pool_address:p.pool_id,coin_type_sale:pe(p.sale_coin.name).full_address,coin_type_raise:pe(p.raise_coin.name).full_address})}),this.updateCache(r,a,Ye)}catch(l){console.log("getPoolImmutables",l)}const d=e.length>0;for(let l=0;l<a.length;l+=1){const f=a[l];if(!(d&&!e.includes(f.pool_address))){if(!d){const p=l;if(p<t||p>=t+n)continue}c.push(f)}}return c}async getPoolImmutablesWithPage(e="all",t=!1){const{package_id:n}=this._sdk.sdkOptions.launchpad,i=`${n}_getPoolImmutables`,s=[],r={data:[],hasNextPage:!1},o=e==="all";if(o){const a=this.getCache(i,t);a&&s.push(...a)}if(s.length===0)try{const a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${n}::factory::CreatePoolEvent`},e);r.hasNextPage=a.hasNextPage,r.nextCursor=a.nextCursor,a.data.forEach(c=>{const d=c.parsedJson;d&&s.push({pool_address:d.pool_id,coin_type_sale:pe(d.sale_coin.name).full_address,coin_type_raise:pe(d.raise_coin.name).full_address})})}catch(a){console.log("getPoolImmutables",a)}return r.data=s,o&&this.updateCache(i,s,Ye),r}async getPools(e=[],t=0,n=100){const i=[];let s=[];e.length>0?s=[...e]:(await this.getPoolImmutables([],t,n,!1)).forEach(a=>{s.push(a.pool_address)});const r=await this._sdk.ClmmSDK.fullClient.batchGetObjects(s,{showType:!0,showContent:!0});for(const o of r){const a=Ii.buildLaunchPadPool(o);await Ii.calculatePoolPrice(this._sdk,a),i.push(a);const c=`${a.pool_address}_getPoolObject`;this.updateCache(c,a,Ye)}return i}async getPool(e,t=!0){const n=`${e}_getPoolObject`,i=this.getCache(n,t);if(i!==void 0){const o=i;return Ii.updatePoolStatus(o),o}const s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),r=Ii.buildLaunchPadPool(s);return await Ii.calculatePoolPrice(this._sdk,r),this.updateCache(n,r),r}async getInitConfig(e=!1){var c;const t=this._sdk.sdkOptions.launchpad.package_id,n=`${t}_getInitEvent`,i=this.getCache(n,e);if(i!==void 0)return i;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),r=bu(s),o=(c=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:r}))==null?void 0:c.data,a={pools_id:"",admin_cap_id:"",config_cap_id:""};return o.length>0&&(o.forEach(d=>{const u=d.parsedJson;if(u)switch(pe(d.type).full_address){case`${t}::config::InitConfigEvent`:a.admin_cap_id=u.admin_cap_id,a.config_cap_id=u.config_cap_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=u.pools_id;break}}),this.updateCache(n,a,Ye)),a}async getLockNFT(e,t=!1){const n=`${e}_getLockNFT`,i=this.getCache(n,t);if(i!==void 0)return i;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!s.error)return ea(s)}async getLockNFTList(e){var s;const{package_id:t}=this._sdk.ClmmSDK.sdkOptions.clmm_pool,{sdkOptions:n}=this._sdk,i=[];try{const r=(s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${n.launchpad.package_id}::lock::LockNFTEvent`}))==null?void 0:s.data;for(const o of r){const a=o.parsedJson;if(a){const c={locked_time:Number(a.locked_time),end_lock_time:Number(a.end_lock_time),nft_type:a.nft_type_name.name,lock_nft_id:a.lock_nft_id,recipient:a.recipient};if(e===c.recipient&&`${t}`===pe(c.nft_type).address){const d=await this.getLockNFT(c.lock_nft_id);if(d){const u=pe(d.coin_type_a).full_address,l=pe(d.coin_type_b).full_address;i.push({...d,coin_type_a:u,coin_type_b:l,...c})}}}}return i}catch(r){return console.log("getLockNFTList:",r),[]}}async creatPoolTransactionPayload(e){const{launchpad:t}=this.sdk.sdkOptions,n=J(t);if(this.assertLuanchpadConfig(),this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const i=Ii.priceRealToFix(Number(e.initialize_price),e.sale_decimals,e.raise_decimals),s=new xe,r=q(e.total_supply).add(q(e.total_supply).mul(q(e.liquidity_rate))).toNumber(),o=await tt.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,s,BigInt(r),e.coin_type_sale),a=[s.object(n.admin_cap_id),s.object(n.config_cap_id),s.object(n.pools_id),s.object(zt(e.recipient)),s.pure.u128((i*lT).toString()),o,s.pure.u64(e.total_supply.toString()),s.pure.u64(e.min_purchase.toString()),s.pure.u64(e.max_purchase.toString()),s.pure.u64(e.least_raise_amount.toString()),s.pure.u64(e.hardcap.toString()),s.pure.u64((e.liquidity_rate*1e3).toString()),s.pure.u64(e.start_time.toString()),s.pure.u64(e.activity_duration.toString()),s.pure.u64(e.settle_duration.toString()),s.pure.u64(e.locked_duration.toString()),s.pure.u32(e.tick_spacing),s.object(Oe)],c=[e.coin_type_sale,e.coin_type_raise];return s.moveCall({target:`${t.published_at}::${Ni}::create_launch_pool`,typeArguments:c,arguments:a}),s}async creatPurchasePayload(e){const{launchpad:t}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=new xe,i=await tt.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,n,BigInt(e.purchase_amount),e.coin_type_raise),s=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[e.pool_address],!1))[0],r=[e.coin_type_sale,e.coin_type_raise];let o;return s?o=[n.object(e.pool_address),n.object(J(t).config_cap_id),n.object(s.id),i,n.pure.u64(e.purchase_amount.toString()),n.object(Oe)]:o=[n.object(e.pool_address),n.object(J(t).config_cap_id),i,n.pure.u64(e.purchase_amount.toString()),n.object(Oe)],n.moveCall({target:`${t.published_at}::${Ni}::${s===void 0?"create_and_purchase":"purchase"}`,typeArguments:r,arguments:o}),n}async creatClaimPayload(e){const{launchpad:t}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[e.pool_address],!1))[0],i=new xe,s=[e.coin_type_sale,e.coin_type_raise],r=[i.object(e.pool_address),i.object(J(t).config_cap_id),i.object(n==null?void 0:n.id),i.object(Oe)];return i.moveCall({target:`${t.published_at}::${Ni}::claim`,typeArguments:s,arguments:r}),i}async creatSettlePayload(e){const{launchpad:t}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");this.assertLuanchpadConfig();const i=J(n),{clmm_args:s}=e,r=new xe;r.setSender(this.sdk.ClmmSDK.senderAddress);const o=[e.coin_type_sale,e.coin_type_raise];if(s){const a=s.opposite?qe.priceToSqrtPriceX64(q(1).div(s.current_price),s.raise_decimals,s.sale_decimals).toString():qe.priceToSqrtPriceX64(q(s.current_price),s.sale_decimals,s.raise_decimals).toString(),c=BigInt(a)<BigInt(s.clmm_sqrt_price),d=s.opposite?c?e.coin_type_raise:e.coin_type_sale:c?e.coin_type_sale:e.coin_type_raise,u=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,d);let l=en.calculateTotalBalance(u);en.isSuiCoin(d)&&(l-=BigInt(2e8));const p=tt.buildCoinForAmount(r,u,l,d).targetCoin,m=s.opposite?c?"settle_with_reverse_clmm_only_with_a":"settle_with_reverse_clmm_only_with_b":c?"settle_only_with_a":"settle_only_with_b",_=[r.object(e.pool_address),r.object(J(t).config_cap_id),r.object(s.clmm_pool_address),r.object(i.global_config_id),r.pure.u128(a),p,r.object(Oe)];r.moveCall({target:`${t.published_at}::${Ni}::${m}`,typeArguments:o,arguments:_})}else r.moveCall({target:`${t.published_at}::${Ni}::settle`,typeArguments:o,arguments:[r.object(e.pool_address),r.object(J(t).config_cap_id),r.object(Oe)]});return r}creatWithdrawPayload(e){const{launchpad:t}=this.sdk.sdkOptions,n=new xe,i=[e.coin_type_sale,e.coin_type_raise],s=[n.object(e.pool_address),n.object(J(t).config_cap_id),n.object(Oe)];return e.sale_amount>BigInt(0)&&n.moveCall({target:`${t.published_at}::${Ni}::withdraw_sale`,typeArguments:i,arguments:s}),e.raise_amount>BigInt(0)&&n.moveCall({target:`${t.published_at}::${Ni}::withdraw_raise`,typeArguments:i,arguments:s}),n}addUserToWhitelisPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new xe,i=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(s=>{const r=[n.object(J(t).admin_cap_id),n.object(J(t).config_cap_id),n.object(e.pool_address),n.object(s),n.pure.u64(e.safe_limit_amount),n.object(Oe)];n.moveCall({target:`${t.published_at}::${Ni}::add_user_to_whitelist`,typeArguments:i,arguments:r})}),n}updateWhitelistCapPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new xe,i=[e.coin_type_sale,e.coin_type_raise];return e.safe_limit_amount>0&&n.moveCall({target:`${t.published_at}::${Ni}::update_whitelist_member_safe_limit_amount`,typeArguments:i,arguments:[n.object(J(t).admin_cap_id),n.object(J(t).config_cap_id),n.object(e.pool_address),n.pure.address(e.white_list_member),n.pure.u64(e.safe_limit_amount),n.object(Oe)]}),e.hard_cap_total>0&&n.moveCall({target:`${t.published_at}::${Ni}::update_whitelist_hard_cap_total`,typeArguments:i,arguments:[n.object(J(t).admin_cap_id),n.object(J(t).config_cap_id),n.object(e.pool_address),n.pure.u64(e.hard_cap_total),n.object(Oe)]}),n}creatRemoveWhitelistPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new xe,i=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(s=>{const r=[n.object(J(t).admin_cap_id),n.object(J(t).config_cap_id),n.object(e.pool_address),n.object(s),n.object(Oe)];n.moveCall({target:`${t.published_at}::${Ni}::remove_user_from_whitelist`,typeArguments:i,arguments:r})}),n}creatCancelPoolPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new xe,i=[e.coin_type_sale,e.coin_type_raise],s=[n.object(J(t).admin_cap_id),n.object(J(t).config_cap_id),n.object(e.pool_address),n.object(Oe)];return n.moveCall({target:`${t.published_at}::${Ni}::cancel`,typeArguments:i,arguments:s}),n}updateRecipientPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new xe,i=[e.coin_type_sale,e.coin_type_raise],s=[n.object(J(t).admin_cap_id),n.object(J(t).config_cap_id),n.object(e.pool_address),n.object(e.new_recipient),n.object(Oe)];return n.moveCall({target:`${t.published_at}::${Ni}::update_recipient_address`,typeArguments:i,arguments:s}),n}updatePoolDuractionPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new xe,i=[e.coin_type_sale,e.coin_type_raise],s=[n.object(J(t).admin_cap_id),n.object(J(t).config_cap_id),n.object(e.pool_address),n.pure.u64(e.activity_duration),n.pure.u64(e.settle_duration),n.pure.u64(e.lock_duration),n.object(Oe)];return n.moveCall({target:`${t.published_at}::${Ni}::update_pool_duration`,typeArguments:i,arguments:s}),n}creatUnlockNftPayload(e){const{launchpad:t}=this.sdk.sdkOptions;if(J(t)===void 0)throw Error("getPackagerConfigs(launchpad)  is null");const n=new xe,i=[e.nft_type],s=[n.object(e.lock_nft),n.object(Oe)];return n.moveCall({target:`${t.published_at}::lock::unlock_nft`,typeArguments:i,arguments:s}),n}async isAdminCap(e){const{launchpad:t}=this._sdk.sdkOptions;if(J(t)===void 0)throw Error("launchpad config is empty");const n=`${e}_isAdminCap`,i=this.getCache(n);if(i)return i;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:J(t).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(s);const r=aa(s),o=df(s);let a=!1;return o&&r&&pe(r).source_address===`${t.package_id}::config::AdminCap`&&(a=zt(o.AddressOwner)===zt(e)),this.updateCache(n,a,Ye),a}async isWhiteListUser(e,t){const n={type:"address",value:t};try{const i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:n});return!!(i&&i.data)}catch{return!1}}async getPurchaseAmount(e,t){var i;const n={type:"address",value:t};try{const s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:n}),r=yt(s);if(console.log(r),r)return(i=r==null?void 0:r.value)==null?void 0:i.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getPurchaseMarks(e,t=[],n=!0){const{launchpad:i}=this._sdk.sdkOptions,s=`${t}_getPurchaseMark`,r=this.getCache(s,n);if(!n&&r!==void 0)return r;let o=null;const a=[];for(;;){const c=await this._sdk.ClmmSDK.fullClient.getOwnedObjects({owner:e,options:{showType:!0,showContent:!0,showDisplay:!0},cursor:o});for(const d of c.data){const{fields:u}=d.data.content;if(pe(Xs(d)).source_address===`${i.package_id}::pool::PurchaseMark`){console.log("fields: ",u);const f={id:u.id.id,pool_id:pe(u.pool_id).address,purchased_raise_amount:u.purchase_total,obtain_sale_amount:u.obtain_sale_amount,used_raise_amount:u.used_raise_amount};t.length>0?t.includes(f.pool_id)&&a.push(f):a.push(f)}}if(c.hasNextPage)o=c.nextCursor;else break}return this.updateCache(s,a,Ye),a}async getSettleEvent(e){const{launchpad:t}=this._sdk.sdkOptions,n=`${e}_getPurchaseMark`,i=this.getCache(n);if(i!==void 0)return i;const s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t.package_id}::pool::SettleEvent`});for(const r of s.data){const o=r.parsedJson;if(e===gn(o.pool_id)){const a={pool_id:o.pool_id,settle_price:o.settle_price,unused_sale:o.unused_sale,unused_raise:o.unused_raise,white_purchase_total:o.white_purchase_total};return this.updateCache(n,a,Ye),a}}}buildLaunchpadCoinType(e,t){return af(this._sdk.sdkOptions.launchpad.package_id,"pool","PoolLiquidityCoin",[e,t])}assertLuanchpadConfig(){const{launchpad:e}=this.sdk.sdkOptions;if(J(e)===void 0)throw Error("sdk getPackagerConfigs(launchpad) is null")}updateCache(e,t,n=os){let i=this._cache[e];i?(i.overdueTime=mn(n),i.value=t):i=new $i(t,mn(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},lo=class{static buildPoolImmutables(e){const{fields:t}=e.value.fields.value;return{clmm_pool_id:pe(t.clmm_pool_id).address,bonus_type:pe(t.bonus_type.fields.name).source_address,pool_id:pe(t.pool_id).address,coinTypeA:pe(t.coin_type_a.fields.name).source_address,coinTypeB:pe(t.coin_type_b.fields.name).source_address}}static buildPoolState(e){const t=yt(e),n=[];return t.config.fields.contents.forEach(s=>{n.push({rate:Number(q(s.fields.key).div(Ga)),multiplier:Number(q(s.fields.value).div(Ga))})}),{balance:t.balance,config:n,is_open:t.is_open,index:Number(t.index),start_time:Number(t.start_time),interval_day:Number(t.interval_day),minimum_percent_to_reward:Number(q(t.minimum_percent_to_reward).div(Ga)),rewarders:{rewarder_handle:t.rewarders.fields.id.id,size:Number(t.rewarders.fields.size)},whale_nfts:{whale_nfts_handle:t.whale_nfts.fields.id.id,size:Number(t.whale_nfts.fields.size)},points:{point_handle:t.points.fields.id.id,size:Number(t.points.fields.size)}}}static buildMarkerPositions(e){const{contents:t}=e.value.fields.value.fields,n=[],i=e.id.id;return t.forEach(s=>{const{key:r,value:o}=s.fields,a={id:r,period_id:i,bonus_num:o.fields.bonus_num,point:o.fields.point,is_burn:o.fields.is_burn,point_after_multiplier:o.fields.point_after_multiplier,percent:Number(q(o.fields.percent).div(Ga)),fee_share_rate:0,is_redeemed:o.fields.is_redeemed};n.push(a)}),n}static buildPoolBonusInfo(e){const{fields:t,type:n}=e.value.fields.value;return{type:n,time:Number(t.time),settle_time:Number(t.settle_time),settled_num:t.settled_num,is_settled:t.is_settled,basis_bonus:t.basis_bonus,total_bonus:t.total_bonus,is_vacant:t.is_vacant,redeemed_num:t.redeemed_num}}static getBonusPercent(e,t){let n=0;for(const i of e)t>=i.rate&&i.rate>n&&(n=i.multiplier);return n}},wy="router",bU=class{constructor(e){We(this,"_sdk");We(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=!1){var r;const{maker_bonus:t}=this._sdk.sdkOptions,n=`${t.package_id}_getPoolImmutables`,i=this.getCache(n,e),s=[];if(i!==void 0)s.push(...i);else{const o=[];(r=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(J(t).maker_pool_handle)).data)==null||r.forEach(d=>{o.push(d.objectId)});const c=await this._sdk.ClmmSDK.fullClient.batchGetObjects(o,{showContent:!0});for(const d of c){const u=yt(d);u&&s.push(lo.buildPoolImmutables(u))}}return s}async getPoolImmutable(e){const{maker_bonus:t}=this._sdk.sdkOptions,n=`${t.package_id}_getPoolImmutables`,i=this.getCache(n);if(i!==void 0){const o=i.filter(a=>e===a.pool_id);if(o.length>0)return o[0]}const s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:J(t).maker_pool_handle,name:{type:"0x2::object::ID",value:e}}),r=yt(s);return lo.buildPoolImmutables(r)}async getPools(){const e=[],t=await this.getPoolImmutables(),n=t.map(r=>r.pool_id),i=await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showType:!0,showContent:!0});let s=0;for(const r of i){const o=lo.buildPoolState(r);if(o){const a={...t[s],...o};e.push(a);const c=`${a.pool_id}_getPoolObject`;this.updateCache(c,a,Ye)}s+=1}return e}async getPool(e,t=!0){const n=`${e}_getPoolObject`,i=this.getCache(n,t),s=await this.getPoolImmutable(e);if(i!==void 0)return i;const r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),o=lo.buildPoolState(r),a={...s,...o};return this.updateCache(n,a,Ye),a}async getPoolHandleId(e){const t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),n=yt(t);return n?n.list.fields.id.id:""}async getMakerPoolPeriods(e,t=!1){const n=[],i=`${e.pool_id}_getMakerPoolPeriods`,s=this.getCache(i,t);return s!==void 0?s:((await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(e.whale_nfts.whale_nfts_handle)).data.forEach(o=>{const a={id:o.objectId,start_time:0,end_time:0,period:Number(o.name.value)};a.start_time=Number(q(e.start_time).add(q(e.interval_day).mul(24*3600).mul(a.period)).toFixed(0,ie.ROUND_DOWN)),a.end_time=Number(q(a.start_time).add(q(e.interval_day).mul(24*3600)).toFixed(0,ie.ROUND_DOWN)),n.push(a)}),this.updateCache(i,n,Ye),n)}async getMakerBonusInitConfigs(){var i;const{package_id:e}=this.sdk.sdkOptions.maker_bonus,t=(i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`}))==null?void 0:i.data,n={maker_config_id:"",maker_pool_handle:""};return t.length>0&&t.forEach(s=>{const r=s.parsedJson;r&&(n.maker_config_id=r.config_id)}),n.maker_pool_handle=await this.getPoolHandleId(n.maker_config_id),n}async getPoolMarkerPositionList(e,t,n=!1){const i={},s=[];n||t.forEach(r=>{const o=`${e}_${r.period}_getPoolMarkerPositionList`,a=this.getCache(o);a!==void 0?i[r.period]=a:(i[r.period]=[],s.push(r))});try{s.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(s.map(a=>a.id),{showContent:!0})).forEach(a=>{const c=yt(a),d=lo.buildMarkerPositions(c);if(d.length>0){const{period_id:u}=d[0],l=t.filter(f=>f.id===u)[0];i[l.period]=d}});const r=[];for(const o in i)i[o].forEach(c=>{r.push(c)});if(r.length>0){const o=await this._sdk.ClmmSDK.Position.getSipmlePositionList(r.map(a=>a.id));for(const a of r)for(const c of o)if(a.id===c.pos_object_id){a.clmm_position=c;break}}}catch(r){console.log(r)}for(const r in i){const o=`${e}_${r}_getPoolMarkerPositionList`;this.updateCache(o,i[r],Ye)}return i}async updateXCetusRewarderAndFee(e,t,n){const i=await this.calculateTotalPointsAfterMultiper(e,n);for(const s of t)await this.calculateXCetusRewarder(e,s,n.period,i);return t}async calculateXCetusRewarder(e,t,n,i){const s=await this.getPoolBonusInfo(e.rewarders.rewarder_handle,n),{fee_share_rate:r}=this.calculateFeeShareRate(e,t,i),o=q(r).mul(s.total_bonus);return t.is_redeemed?t.bonus_num="0":t.bonus_num=o.toString(),t.bonus_num}calculateFeeShareRate(e,t,n){const i=lo.getBonusPercent(e.config,t.percent),s=q(t.point).mul(i),r=q(s).div(n);return t.point_after_multiplier=s.toString(),t.fee_share_rate=Number(r),{fee_share_rate:Number(r),points_after_multiper:s.toString()}}async calculateTotalPointsAfterMultiper(e,t){const n=await this.getPoolMarkerPositionList(e.whale_nfts.whale_nfts_handle,[t]);let i=q(0);const s=n[t.period];for(const r of s){const o=lo.getBonusPercent(e.config,r.percent),a=q(r.point).mul(o);i=i.add(a)}return i.toString()}async calculateAllXCetusRewarder(e){const t=this._sdk.ClmmSDK.senderAddress;let n=q(0);const i=[];for(const s of e){const r=await this._sdk.MakerModule.getMakerPoolPeriods(s),o=await this._sdk.MakerModule.getPoolMarkerPositionList(s.whale_nfts.whale_nfts_handle,r),a=[];for(const c of r){const d=o[c.period].filter(u=>{var l;return t.length===0?!1:((l=u.clmm_position)==null?void 0:l.owner)===t});d.length>0&&(await this._sdk.MakerModule.updateXCetusRewarderAndFee(s,d,c),d.forEach(u=>{var l;((l=u.clmm_position)==null?void 0:l.position_status)===nT.Exists&&q(u.bonus_num).greaterThan(0)&&(n=n.add(u.bonus_num),a.includes(u.clmm_position.pos_object_id)||a.push(u.clmm_position.pos_object_id))}))}i.push({bonus_type:s.bonus_type,pool_id:s.pool_id,nft_ids:a})}return{claimtotal:n,claimRecord:i}}async getPoolBonusInfo(e,t,n=!1){const i=`${e}_${t}_getPoolBonusInfo`,s=this.getCache(i,n);if(s!==void 0)return s;const r=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"u64",value:t.toString()}}),o=yt(r),a=lo.buildPoolBonusInfo(o);return this.updateCache(i,a,os),a}claimPayload(e){const{maker_bonus:t,xcetus:n}=this.sdk.sdkOptions,i=new xe;return i.moveCall({target:`${t.published_at}::${wy}::claim`,typeArguments:[e.bonus_type],arguments:[i.object(J(t).maker_config_id),i.object(e.market_pool_id),i.object(e.position_nft_id),i.pure.u8(e.phase),i.object(J(n).lock_manager_id),i.object(J(n).xcetus_manager_id),i.object(e.ve_nft_id)]}),i}claimAllPayload(e){const{maker_bonus:t,xcetus:n}=this.sdk.sdkOptions,i=new xe;return e.whale_nfts.forEach(s=>{s.nft_ids.forEach(r=>{i.moveCall({target:`${t.published_at}::${wy}::claim_all`,typeArguments:[s.bonus_type],arguments:[i.object(J(t).maker_config_id),i.object(s.pool_id),i.object(r),i.object(J(n).lock_manager_id),i.object(J(n).xcetus_manager_id),i.object(e.ve_nft_id)]})})}),i}updateCache(e,t,n=os){let i=this._cache[e];i?(i.overdueTime=mn(n),i.value=t):i=new $i(t,mn(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},Ba="router",N0="router",kd=24*3600,lf=1e3,bs=1e11,No=class{static buildVeNFTDividendInfo(e){const t={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(n=>{const i=[];n.fields.value.fields.contents.forEach(s=>{i.push({coin_type:pe(s.fields.key.fields.name).source_address,amount:s.fields.value})}),t.rewards.push({period:Number(n.fields.key),rewards:i})}),t}static buildDividendManager(e){const t={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:e.is_open};return e.bonus_types.forEach(n=>{t.bonus_types.push(pe(n.fields.name).source_address)}),t}static buildLockUpManager(e){return{id:e.id.id,balance:e.balance,treasury_manager:e.treasury_manager,extra_treasury:e.extra_treasury,lock_infos:{lock_handle_id:e.lock_infos.fields.id.id,size:Number(e.lock_infos.fields.size)},type_name:jn(e.type_name.fields.name),min_lock_day:Number(e.min_lock_day),max_lock_day:Number(e.max_lock_day),package_version:Number(e.package_version),max_percent_numerator:Number(e.max_percent_numerator),min_percent_numerator:Number(e.min_percent_numerator)}}static buildLockCetus(e){const t=e.fields,n={id:t.id.id,type:pe(e.type).source_address,locked_start_time:Number(t.locked_start_time),locked_until_time:Number(t.locked_until_time),cetus_amount:t.balance,xcetus_amount:"0",lock_day:0};return n.lock_day=(n.locked_until_time-n.locked_start_time)/kd,n}static getAvailableXCetus(e,t){let n=q(0);return t.forEach(i=>{n=n.add(i.xcetus_amount)}),q(e.xcetus_balance).sub(n).toString()}static getWaitUnLockCetuss(e){return e.filter(t=>!No.isLocked(t))}static getLockingCetuss(e){return e.filter(t=>No.isLocked(t))}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static buildDividendRewardTypeList(e){const t=new Set;return e.forEach(n=>{n.rewards.forEach(i=>{t.add(i.coin_type)})}),Array.from(t)}static getNextStartTime(e){const t=Date.now()/1e3,{start_time:n,interval_day:i}=e,s=Math.ceil((t-n)/(i*kd));return n+s*i*kd}},yU=class{constructor(e){We(this,"_sdk");We(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,t=!0){const{xcetus:n}=this.sdk.sdkOptions,i=`${e}_getLockUpManagerEvent`,s=this.getCache(i,t);if(s!==void 0)return s;let r;const o=`${n.package_id}::xcetus::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:o}})).data.forEach(c=>{const d=pe(Xs(c)).source_address;if(d===o&&c.data&&c.data.content){const{fields:u}=c.data.content;r={...Uh(c),id:u.id.id,index:u.index,type:d,xcetus_balance:u.xcetus_balance},this.updateCache(i,r,Ye)}}),r}async getOwnerLockCetuss(e){const{xcetus:t}=this.sdk.sdkOptions,n=[],i=`${t.package_id}::lock_coin::LockedCoin<${this.buileCetusCoinType()}>`,s=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0},filter:{StructType:i}});for(const r of s.data)if(pe(Xs(r)).source_address===i&&r.data){const a=No.buildLockCetus(r.data.content);a.xcetus_amount=await this.getXCetusAmount(a.id),n.push(a)}return n}async getLockCetus(e){var n;const t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((n=t.data)!=null&&n.content){const i=No.buildLockCetus(t.data.content);return i.xcetus_amount=await this.getXCetusAmount(i.id),i}}async getOwnerCetusCoins(e){return await this._sdk.ClmmSDK.getOwnerCoinAssets(e,this.buileCetusCoinType())}mintVeNFTPayload(){const{xcetus:e}=this.sdk.sdkOptions,t=new xe;return t.moveCall({target:`${e.published_at}::${Ba}::mint_venft`,typeArguments:[],arguments:[t.object(J(e).xcetus_manager_id)]}),t}async convertPayload(e){const{xcetus:t}=this.sdk.sdkOptions,n=new xe,i=this.buileCetusCoinType(),s=await tt.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,n,BigInt(e.amount),i);return e.venft_id===void 0?n.moveCall({target:`${t.published_at}::${Ba}::mint_and_convert`,typeArguments:[],arguments:[n.object(J(t).lock_manager_id),n.object(J(t).xcetus_manager_id),s,n.pure.u64(e.amount)]}):n.moveCall({target:`${t.published_at}::${Ba}::convert`,typeArguments:[],arguments:[n.object(J(t).lock_manager_id),n.object(J(t).xcetus_manager_id),s,n.pure.u64(e.amount),n.object(e.venft_id)]}),n}redeemLockPayload(e){const{xcetus:t}=this.sdk.sdkOptions,n=new xe;return n.moveCall({target:`${t.published_at}::${Ba}::redeem_lock`,typeArguments:[],arguments:[n.object(J(t).lock_manager_id),n.object(J(t).xcetus_manager_id),n.object(e.venft_id),n.pure.u64(e.amount),n.pure.u64(e.lock_day),n.object(Oe)]}),n}redeemPayload(e){const{xcetus:t}=this.sdk.sdkOptions,n=new xe;return n.moveCall({target:`${t.published_at}::${Ba}::redeem`,typeArguments:[],arguments:[n.object(J(t).lock_manager_id),n.object(J(t).xcetus_manager_id),n.object(e.venft_id),n.object(e.lock_id),n.object(Oe)]}),n}redeemDividendPayload(e,t){const{xcetus:n,xcetus_dividends:i}=this.sdk.sdkOptions,s=new xe;return t.forEach(r=>{s.moveCall({target:`${n.published_at}::${N0}::redeem`,typeArguments:[r],arguments:[s.object(J(i).dividend_manager_id),s.object(e)]})}),s}redeemDividendV2Payload(e,t,n){const{xcetus_dividends:i}=this.sdk.sdkOptions;let s=new xe;return t.filter(o=>n.includes(o)).length>0&&(s=this.redeemDividendXTokenPayload(e,s)),t.forEach(o=>{n.includes(o)||s.moveCall({target:`${i.published_at}::${N0}::redeem_v2`,typeArguments:[o],arguments:[s.object(J(i).dividend_manager_id),s.object(e),s.object(Oe)]})}),s}redeemDividendXTokenPayload(e,t){const{xcetus_dividends:n,xcetus:i}=this.sdk.sdkOptions,{xcetus_manager_id:s,lock_manager_id:r}=J(i),{dividend_manager_id:o}=J(n);return t=t===void 0?new xe:t,t.moveCall({target:`${n.published_at}::${N0}::redeem_xtoken`,typeArguments:[],arguments:[t.object(r),t.object(s),t.object(o),t.object(e),t.object(Oe)]}),t}buileCetusCoinType(){return`${this.sdk.sdkOptions.cetus_faucet.package_id}::cetus::CETUS`}buileXTokenCoinType(e=this._sdk.sdkOptions.xcetus.package_id,t="xcetus",n="XCETUS"){return`${e}::${t}::${n}`}cancelRedeemPayload(e){const{xcetus:t}=this.sdk.sdkOptions,n=new xe;return n.moveCall({target:`${t.published_at}::${Ba}::cancel_redeem_lock`,typeArguments:[],arguments:[n.object(J(t).lock_manager_id),n.object(J(t).xcetus_manager_id),n.object(e.venft_id),n.object(e.lock_id),n.object(Oe)]}),n}async getInitConfigs(){var o,a;const{package_id:e}=this.sdk.sdkOptions.xcetus,t=`${e}_getInitFactoryEvent`,n=this.getCache(t);if(n!==void 0)return n;const i=(o=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::xcetus::InitEvent`}))==null?void 0:o.data,s={xcetus_manager_id:"",lock_manager_id:"",lock_handle_id:""};i.length>0&&i.forEach(c=>{const d=c.parsedJson;d&&(s.xcetus_manager_id=d.xcetus_manager)});const r=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::locking::InitializeEvent`}))==null?void 0:a.data;return r.length>0&&r.forEach(c=>{const d=c.parsedJson;d&&(s.lock_manager_id=d.lock_manager)}),s.lock_manager_id.length>0&&(s.lock_handle_id=(await this.getLockUpManager(s.lock_manager_id)).lock_infos.lock_handle_id),this.updateCache(t,s,Ye),s}async getLockUpManager(e=J(this.sdk.sdkOptions.xcetus).lock_manager_id,t=!1){const n=`${e}_getLockUpManager`,i=this.getCache(n,t);if(i!==void 0)return i;const s=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),r=No.buildLockUpManager(yt(s));return this.updateCache(n,r,Ye),r}async getDividendConfigs(){var r;const{package_id:e}=this.sdk.sdkOptions.xcetus_dividends,t=`${e}_getDividendManagerEvent`,n=this.getCache(t);if(n!==void 0)return n;const i=(r=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::dividend::InitEvent`}))==null?void 0:r.data,s={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""};return i.length>0&&i.forEach(o=>{const a=o.parsedJson;a&&(s.dividend_manager_id=a.manager_id,s.dividend_admin_id=a.admin_id,s.dividend_settle_id=a.settle_id,this.updateCache(t,s,Ye))}),s}async getDividendManager(e=!1){const{dividend_manager_id:t}=J(this._sdk.sdkOptions.xcetus_dividends),n=`${t}_getDividendManager`,i=this.getCache(n,e);if(i!==void 0)return i;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),r=yt(s),o=No.buildDividendManager(r);return this.updateCache(n,o,Ye),o}async getXcetusManager(e=!0){const{xcetus_manager_id:t}=J(this._sdk.sdkOptions.xcetus),n=`${t}_getXcetusManager`,i=this.getCache(n,e);if(i)return i;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),r=yt(s),o={id:r.id.id,index:Number(r.index),has_venft:{handle:r.has_venft.fields.id.id,size:r.has_venft.fields.size},nfts:{handle:r.nfts.fields.id.id,size:r.nfts.fields.size},total_locked:r.total_locked,treasury:r.treasury.fields.total_supply.fields.value};return this.updateCache(n,o),o}async getVeNFTDividendInfo(e,t){try{const n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),i=yt(n);return No.buildVeNFTDividendInfo(i)}catch{return}}async redeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};const n=await this.getLockUpManager(J(this._sdk.sdkOptions.xcetus).lock_manager_id),i=q(bs).mul(q(n.max_lock_day).sub(q(t))).mul(q(n.max_percent_numerator).sub(q(n.min_percent_numerator))).div(q(n.max_lock_day).sub(q(n.min_lock_day))),s=q(bs).mul(q(n.max_percent_numerator)).sub(i).div(q(lf)).div(bs);return{amountOut:q(s).mul(q(e)).round().toString(),percent:s.toString()}}async reverseRedeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};const n=await this.getLockUpManager(J(this._sdk.sdkOptions.xcetus).lock_manager_id),i=q(bs).mul(q(n.max_lock_day).sub(q(t))).mul(q(n.max_percent_numerator).sub(q(n.min_percent_numerator))).div(q(n.max_lock_day).sub(q(n.min_lock_day))),s=q(bs).mul(q(n.max_percent_numerator)).sub(i).div(q(lf)).div(bs);return{amountOut:q(e).div(s).toFixed(0,ie.ROUND_UP),percent:s.toString()}}async getXCetusAmount(e){const{lock_handle_id:t}=J(this._sdk.sdkOptions.xcetus),n=`${e}_getXCetusAmount`,i=this.getCache(n);if(i!==void 0)return i;try{const s=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),r=yt(s);if(r){const{xcetus_amount:o}=r.value.fields.value.fields;return this.updateCache(n,o,Ye),o}}catch{}return"0"}async getVeNftAmount(e,t){try{const n=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),i=yt(n);if(i){const{lock_amount:s,xcetus_amount:r}=i.value.fields.value.fields;return{lock_amount:s,xcetus_amount:r}}}catch{}return{lock_amount:"0",xcetus_amount:"0"}}async getPhaseDividendInfo(e,t=!1){const i=(await this.getDividendManager()).dividends.id,s=`${i}_${e}_getPhaseDividendInfo`,r=this._sdk.getCache(s,t);if(r)return r;try{const o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:i,name:{type:"u64",value:e}}),a=yt(o),c=a.value.fields.value.fields,d=c.redeemed_num.fields.contents.map(p=>({name:p.fields.key.fields.name,value:p.fields.value})),u=c.bonus_types.map(p=>p.fields.name),l=c.bonus.fields.contents.map(p=>({name:p.fields.key.fields.name,value:p.fields.value})),f={id:Hs(o),phase:a.name,settled_num:c.settled_num,register_time:c.register_time,redeemed_num:d,is_settled:c.is_settled,bonus_types:u,bonus:l,phase_end_time:""};return this.updateCache(s,f),f}catch{}}updateCache(e,t,n=os){let i=this._cache[e];i?(i.overdueTime=mn(n),i.value=t):i=new $i(t,mn(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},wU="factory",as="oversubscribe_pool",fT=1e6,La=1e18,Oa="router",F0="router",Fu="router",vy={curve:{strategy:3,both_side:{div_width:10,ratios:[.333333,.266666,.2,.133333,.066666]},one_side:{div_width:5,ratios:[.333333,.266666,.2,.133333,.066666]}},bidAsk:{strategy:4,both_side:{div_width:10,ratios:[.172413793,.137931034,.103448276,.068965517,.034482759,.068965517,.103448276,.137931034,.172413793]},one_side:{div_width:5,ratios:[.066666667,.13333333,.2,.266666667,.333333333]}}};function vU(e){return"master_address"in e}var xU="router",TU="vaults",AU=1e4,ai=class{static buildIdoPoolImmutables(e){return{pool_address:gn(e.pool_id),coin_type_sale:pe(e.sale_coin_type.name).full_address,coin_type_raise:pe(e.raise_coin_type.name).full_address,tick_spacing:Number(e.tick_spacing),total_supply:e.total_supply,min_purchase:e.min_purchase_amount,max_purchase:e.max_purchase_amount}}static buildIdoPool(e){const t=Xs(e),n=pe(t),i=yt(e);console.log("fields:",i);const s={pool_address:gn(i.id.id),coin_type_sale:n.type_arguments[0],coin_type_raise:n.type_arguments[1],tick_spacing:Number(i.tick_spacing),total_supply:i.total_supply,min_purchase:i.min_purchase_amount,max_purchase:i.max_purchase_amount},r={start_time:Number(i.duration_manager.fields.start_time),lock_up_duration:Number(i.duration_manager.fields.lock_up_duration),purchase_duration:Number(i.duration_manager.fields.purchase_duration),end_time:0};r.end_time=r.start_time+r.purchase_duration;const o={complete_raise_limit:i.complete_raise_limit,liquidity_injection_ratio:q(i.liquidity_injection_ratio).div(fT).toNumber(),current_sqrt_price_min:i.current_sqrt_price_min,current_sqrt_price_max:i.current_sqrt_price_max,owner:i.owner,sale_coin_amount:i.sale_coin,raise_coin_amount:i.raise_coin,price:i.price,current_price:i.price,duration_summary:r,is_cancelled:i.is_cancelled,is_liquidity_injected:i.is_liquidity_injected,liquidity_used_raise_amount:i.liquidity_used_raise_amount,liquidity_used_sale_amount:i.liquidity_used_sale_amount,purchase_summary:{size:Number(i.purchase_manager.fields.purchases.fields.size),purchase_handle:i.purchase_manager.fields.purchases.fields.id.id},total_purchase_amount:i.total_purchase_amount,white_summary:{white_list_id:i.white_list.fields.id.id,protection_limit_used:i.white_list.fields.protection_limit_used,protection_hard_cap:i.white_list.fields.protection_hard_cap,white_handle:i.white_list.fields.addresses.fields.id.id,size:Number(i.white_list.fields.addresses.fields.size)},pool_status:"Upcoming",max_raise_amount:"",sale_decimals:0,raise_decimals:0,is_withdrawn:i.is_withdrawn};return ai.updatePoolStatus(o),{...s,...o}}static is_init_period(e){return Number(q(Date.now()/1e3).toFixed(0))<e.start_time}static is_purchase_period(e){const t=Number(q(Date.now()/1e3).toFixed(0));return t>=e.start_time&&t<=e.start_time+e.purchase_duration}static is_claim_period(e){const t=Number(q(Date.now()/1e3).toFixed(0)),n=e.start_time+e.purchase_duration;return t>n}static is_can_inject_liquidity(e){return!e.is_cancelled&&e.liquidity_injection_ratio!==0&&ai.is_claim_period(e.duration_summary)&&!e.is_liquidity_injected}static is_can_withdraw(e){return e.is_withdrawn?!1:ai.is_sale_failed(e)?!0:(e.liquidity_injection_ratio===0||e.is_liquidity_injected)&&ai.is_claim_period(e.duration_summary)}static is_sale_failed(e){return!!(e.is_cancelled||ai.is_claim_period(e.duration_summary)&&q(e.total_purchase_amount).lessThan(e.complete_raise_limit))}static buildPurchaseInfo(e){return{...e.value.fields.value.fields,owner:e.name}}static calculateRedeemAmount(e,t){let n,i;if(ai.is_sale_failed(e))n="0",i="0";else if(t.is_redeemed)n=t.obtained_sale_amount,i=t.used_raise_amount;else if(q(e.total_purchase_amount).lessThanOrEqualTo(e.max_raise_amount))n=q(t.purchased_raise_amount).mul(La).div(e.price).toString(),i=t.purchased_raise_amount;else{const r=ai.redeemForSaleOversubcribeV2(e,t);n=r.user_obtained_sale_amount,i=r.user_used_raise_amount_ceil}n=ie.floor(n);const s=ie.floor(q(t.purchased_raise_amount).sub(i).toString());return{obtained_sale_amount:n,refunded_raise_amount:s}}static calculateWithdrawAmount(e){let t,n;const i=q(e.total_supply).mul(e.liquidity_injection_ratio);if(ai.is_sale_failed(e))t="0",n=q(i).add(e.total_supply);else{const{max_raise_amount:s}=e;q(e.total_purchase_amount).greaterThanOrEqualTo(s)?(t=q(s).sub(e.liquidity_used_raise_amount).toString(),n="0"):(t=q(e.total_purchase_amount).sub(e.liquidity_used_raise_amount),n=q(e.total_supply).add(i).sub(e.liquidity_used_sale_amount).sub(ai.get_sold_amount(e)))}return{obtained_raise_amount:ie.floor(t).toString(),refunded_sale_amount:ie.ceil(n).toString()}}static get_sold_amount(e){return q(e.total_purchase_amount).greaterThanOrEqualTo(e.max_raise_amount)?e.total_supply:q(e.total_purchase_amount).mul(La).div(e.price)}static redeemForSaleOversubcribe(e,t){const n=t.protection_raise_amount,i=q(t.purchased_raise_amount).sub(n),s=e.max_raise_amount,{protection_limit_used:r}=e.white_summary,o=q(s).sub(r),a=q(e.total_purchase_amount).sub(r),c=ie.ceil(i.mul(o).div(a).add(n)),d=ie.floor(i.mul(o).div(a).add(n));return{user_obtained_sale_amount:ie.floor(q(e.total_supply).mul(d).div(s)),user_used_raise_amount_ceil:c}}static redeemForSaleOversubcribeV2(e,t){const n=t.protection_raise_amount,i=q(t.purchased_raise_amount).sub(n),s=e.max_raise_amount,{protection_limit_used:r}=e.white_summary,o=q(s).sub(r),a=q(e.total_purchase_amount).sub(r),c=q(n).mul(a).add(q(i).mul(o)).mul(La).div(q(a).mul(e.price)),d=ie.ceil(c.mul(e.price).div(La));return{user_obtained_sale_amount:c,user_used_raise_amount_ceil:d}}static raiseTotalAmount(e){const t=q(e.sale_decimals-e.raise_decimals).abs().toNumber();return e.sale_decimals>e.raise_decimals?q(e.total_supply).mul(e.current_price).div(q(10).pow(q(t))).toString():q(e.total_supply).mul(e.current_price).mul(q(10).pow(q(t))).toString()}static updatePoolStatus(e){const t=Number(q(Date.now()/1e3).toFixed(0)),n=e.duration_summary,i=n.start_time+n.purchase_duration;e.is_cancelled?e.pool_status="Canceled":t<n.start_time?e.pool_status="Upcoming":t>n.start_time&&t<i?e.pool_status="Live":q(e.total_purchase_amount).lessThan(e.complete_raise_limit)?e.pool_status="Failed":e.pool_status="Ended"}static async calculatePoolUiPrice(e,t){const n=await e.ClmmSDK.CetusConfig.getTokenListByCoinTypes([t.coin_type_sale,t.coin_type_raise]),i=n[t.coin_type_sale].decimals,s=n[t.coin_type_raise].decimals;t.current_price=Ii.priceFixToReal(Number(q(t.price).div(q(La)).toString()),i,s).toString(),t.sale_decimals=i,t.raise_decimals=s,t.max_raise_amount=this.raiseTotalAmount(t)}},Zj=class{constructor(e){We(this,"_sdk");this._sdk=e}async getPools(e=[],t=!1){const n=[];if(e.length>0){if(e.filter(s=>{const r=`${s}_getPool`,o=this._sdk.getCache(r,t);return o?(n.push(o),!1):!0}).length>0){const s=await this._sdk.ClmmSDK.fullClient.batchGetObjects(e,{showType:!0,showContent:!0});for(const r of s){const o=await this.buildIdoWarpPool(r);o&&n.push(o)}}}else(await this._sdk.Ido.getPools()).forEach(s=>{n.push({...s,version:"2"})});return n.forEach(i=>{const s=`${i.pool_address}_getPool`;this._sdk.updateCache(s,i)}),n}async getPool(e,t=!0){const n=`${e}_getPool`,i=this._sdk.getCache(n,t);if(i)return i;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),r=await this.buildIdoWarpPool(s);return this._sdk.updateCache(n,r),r}async getJoinPools(e,t){const n=[],i=t.filter(r=>r.version==="1"),s=t.filter(r=>r.version==="2");if(i.length>0){const r=await this._sdk.Launchpad.getPurchaseMarks(e,i.map(o=>o.pool_address),!1);i.forEach(o=>{for(const a of r)if(a.pool_id===o.pool_address){n.push(o);break}})}for(const r of s)await this._sdk.Ido.getPurchaseInfo(r.purchase_summary.purchase_handle,e,!1)&&n.push(r);return n}async getOwnerPools(e,t){return t.filter(n=>n.owner===zt(e))}async creatPurchasePayload(e,t){return e.version==="1"?await this._sdk.Launchpad.creatPurchasePayload({pool_address:e.pool_address,purchase_amount:t,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise}):await this._sdk.Ido.creatPurchasePayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise,purchase_handle:e.purchase_summary.purchase_handle,raise_amount:t.toString()})}async creatRedeemPayload(e){return e.version==="1"?await this._sdk.Launchpad.creatClaimPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise}):await this._sdk.Ido.redeemPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise,purchase_handle:e.purchase_summary.purchase_handle})}async creatWithdrawPayload(e){if(e.version==="1"){const n=await Ii.getWithdrawSale(e),i=await Ii.getWithdrawRaise(e);return this._sdk.Launchpad.creatWithdrawPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise,sale_amount:BigInt(n),raise_amount:BigInt(i)})}return this._sdk.Ido.withdrawPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise})}unlockNftPayload(e,t){return e.version==="1"?this._sdk.Launchpad.creatUnlockNftPayload(t):this._sdk.Ido.unlockNftPayload({lock_nft_id:t.lock_nft,nft_type:t.nft_type})}async getLockNFTList(e){let t=[];return e.version==="1"&&(t=await this._sdk.Launchpad.getLockNFTList(e.owner)),t=await this._sdk.Ido.getLockNFTList(e.owner),t.filter(i=>{const s=pe(i.coin_type_a).full_address,r=pe(i.coin_type_b).full_address,o=pe(e.coin_type_sale).full_address,a=pe(e.coin_type_raise).full_address;return s===o&&r===a||s===a&&r===o})}async isWhiteListUser(e,t){return t.version==="1"?await this._sdk.Launchpad.isWhiteListUser(t.white_summary.white_handle,e):!!await this._sdk.Ido.getWhiteProtectionLimit(t.white_summary.white_handle,e)}async getPurchaseInfo(e,t){if(t.version==="1"){const i=await this._sdk.Launchpad.getPurchaseMarks(e,[t.pool_address]);return i.length>0?i[0]:void 0}return await this._sdk.Ido.getPurchaseInfo(t.purchase_summary.purchase_handle,e)}async getwhiteProtectionInfo(e,t,n=!1){if(t.version==="1")return await this._sdk.Launchpad.getPurchaseAmount(t.white_summary.white_handle,e);const i=await this._sdk.Ido.getPurchaseInfo(t.purchase_summary.purchase_handle,e,n);if(i)return{safe_limit_amount:i.protection_raise_limit,safe_purchased_amount:i.protection_raise_amount};const s=await this._sdk.Ido.getWhiteProtectionLimit(t.white_summary.white_handle,e,!1);return s?{safe_limit_amount:s,safe_purchased_amount:"0"}:{safe_limit_amount:"0",safe_purchased_amount:"0"}}async calculateWithdrawAmount(e){if(e.version==="1"){const t=await Ii.getHistoryWithdrawRaise(this._sdk,e),n=await Ii.getHistoryWithdrawSale(this._sdk,e);return{obtained_raise_amount:t,refunded_sale_amount:n}}return ai.calculateWithdrawAmount(e)}async buildIdoWarpPool(e){const t=aa(e);if(console.log(this._sdk.sdkOptions.ido.package_id,pe(t).address,"buildIdoWarpPool"),pe(t).address===this._sdk.sdkOptions.ido.package_id){const n=ai.buildIdoPool(e);return await ai.calculatePoolUiPrice(this._sdk,n),{...n,version:"2"}}if(pe(t).address===this._sdk.sdkOptions.launchpad.package_id){const n=Ii.buildLaunchPadPool(e);return await Ii.calculatePoolPrice(this._sdk,n),{...n,version:"1"}}}},Fo=class{static buildVeNFTDividendInfo(e){const t={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(n=>{const i=[];n.fields.value.fields.contents.forEach(s=>{i.push({coin_type:pe(s.fields.key.fields.name).source_address,amount:s.fields.value})}),t.rewards.push({period:Number(n.fields.key),rewards:i})}),t}static buildDividendManager(e){const t={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:e.is_open};return e.bonus_types.forEach(n=>{t.bonus_types.push(pe(n.fields.name).source_address)}),t}static buildLockUpManager(e){return{id:e.id.id,balance:e.balance,treasury_manager:e.treasury_manager,extra_treasury:e.extra_treasury,lock_infos:{lock_handle_id:e.lock_infos.fields.id.id,size:Number(e.lock_infos.fields.size)},type_name:jn(e.type_name.fields.name),min_lock_day:Number(e.min_lock_day),max_lock_day:Number(e.max_lock_day),package_version:Number(e.package_version),max_percent_numerator:Number(e.max_percent_numerator),min_percent_numerator:Number(e.min_percent_numerator)}}static buildLockToken(e){const t=e.fields,n={id:t.id.id,type:pe(e.type).source_address,locked_start_time:Number(t.locked_start_time),locked_until_time:Number(t.locked_until_time),token_amount:t.balance,xtoken_amount:"0",lock_day:0};return n.lock_day=(n.locked_until_time-n.locked_start_time)/kd,n}static getAvailableXToken(e,t){let n=q(0);return t.forEach(i=>{n=n.add(i.xtoken_amount)}),q(e.xtoken_balance).sub(n).toString()}static getWaitUnLockTokens(e){return e.filter(t=>!Fo.isLocked(t))}static getLockingTokens(e){return e.filter(t=>Fo.isLocked(t))}static buildDividendRewardTypeList(e){const t=new Set;return e.forEach(n=>{n.rewards.forEach(i=>{t.add(i.coin_type)})}),Array.from(t)}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static getNextStartTime(e,t=kd){const n=Date.now()/1e3,{start_time:i,interval_day:s}=e,r=Math.ceil((n-i)/(s*t));return i+r*s*t}},kr=class{static getDefaultStrategyConfig(e){let t;switch(e){case 4:t=vy.bidAsk;break;default:t=vy.curve;break}return t}static geTickIndexRange(e,t,n,i){let s,r;switch(e=qe.getInitializableTickIndex(e,t),i){case"left":e>0?(r=q(e).sub(t).toNumber(),s=q(e).mul(q(1).add(n)).toDecimalPlaces(0).toNumber()):(r=q(e).sub(t).toNumber(),s=q(e).mul(q(1).sub(n)).toDecimalPlaces(0).toNumber());break;case"right":e>0?(r=q(e).mul(q(1).add(n)).toDecimalPlaces(0).toNumber(),s=q(e).add(t).toNumber()):(r=q(e).mul(q(1).sub(n)).toDecimalPlaces(0).toNumber(),s=q(e).add(t).toNumber());break;default:e>0?(s=q(e).mul(q(1).sub(n)).toDecimalPlaces(0).toNumber(),r=q(e).mul(q(1).add(n)).toDecimalPlaces(0).toNumber()):(s=q(e).mul(q(1).add(n)).toDecimalPlaces(0).toNumber(),r=q(e).mul(q(1).sub(n)).toDecimalPlaces(0).toNumber());break}if(s=qe.getInitializableTickIndex(s,t),r=qe.getInitializableTickIndex(r,t),s<Fp)throw Error("Tick lower value is below the minimum allowed value.");if(r>Np)throw Error("Tick upper value is above the maximum allowed value.");return{tick_lower:s,tick_upper:r}}static getCreateLiquidityBins(e,t){let n=[];switch(t){case 4:n=kr.getCreateBidAskLiquidityBins(e);break;default:n=kr.getCreateCurveLiquidityBins(e);break}return n}static getCreateBidAskLiquidityBins(e){const t=q(Math.floor(q(e.tick_upper).sub(e.tick_lower).div(e.div_width).toNumber())).abs(),n=[],i=e.ratios;let s,r;for(let o=0;o<i.length;o++){let a,c;e.tick_upper<=e.curr_tick?(c=q(e.tick_upper).sub(t.mul(o)).toNumber(),a=q(c).sub(t).toNumber()):e.tick_lower>=e.curr_tick?(a=q(e.tick_lower).add(t.mul(o)).toNumber(),c=q(e.tick_lower).add(t.mul(o+1)).toNumber()):o===4?(a=q(e.tick_lower).add(t.mul(o)).toNumber(),c=q(a).add(t.mul(2)).toNumber()):o>4?(a=q(e.tick_lower).add(t.mul(o+1)).toNumber(),c=q(a).add(t).toNumber()):(a=q(e.tick_lower).add(t.mul(o)).toNumber(),c=q(a).add(t).toNumber()),s=qe.getInitializableTickIndex(a,e.tick_spacing),r=qe.getInitializableTickIndex(c,e.tick_spacing),n.push({tick_lower:s,tick_upper:r,ratio:i[o],liquidity:"0"})}return n}static getCreateCurveLiquidityBins(e){const t=q(Math.floor(q(e.tick_upper).sub(e.tick_lower).div(e.div_width).toNumber())).abs(),n=[],i=e.ratios;for(let s=0;s<i.length;s++){let r,o;e.tick_upper<=e.curr_tick?(o=e.tick_upper,r=q(e.tick_upper).sub(t.mul(s+1)).toNumber()):e.tick_lower>=e.curr_tick?(r=e.tick_lower,o=q(r).add(t.mul(s+1)).toNumber()):(r=q(e.curr_tick).sub(t.mul(s+1)).toNumber(),o=q(e.curr_tick).add(t.mul(s+1)).toNumber()),n.push({tick_lower:qe.getInitializableTickIndex(r,e.tick_spacing),tick_upper:qe.getInitializableTickIndex(o,e.tick_spacing),ratio:i[s],liquidity:"0"})}return n}static calculateAddLiquidityInputs(e){const t=new w(qe.tickIndexToSqrtPriceX64(e.curr_tick)),n=kr.calculateCoinRatios(e.curr_tick,e.liquidity_bins),i=e.liquidity_bins.map((s,r)=>{const o=n[r],a=q(e.coin_amount).mul(e.fix_amount_a?o.coinRatioA:o.coinRatioB).toFixed(0).toString();try{return{...Pn.estLiquidityAndcoinAmountFromOneAmounts(s.tick_lower,s.tick_upper,new w(a),e.fix_amount_a,!0,e.slippage,t),...s}}catch{return{coinAmountA:new w(0),coinAmountB:new w(0),tokenMaxA:new w(0),tokenMaxB:new w(0),liquidityAmount:new w(0),fix_amount_a:!e.fix_amount_a,...s}}});return kr.fixLiquidityInputs(t,e.slippage,i,!0)}static fixLiquidityInputs(e,t,n,i){const s=n.filter(o=>o.liquidityAmount.gt(dt));if(s.length===0)return[];const r=s[0];return n.map(o=>{if(o.liquidityAmount.eq(dt)){const a=q(r.liquidityAmount.toString()).mul(o.ratio).div(r.ratio).toFixed(0),c=qe.tickIndexToSqrtPriceX64(o.tick_lower),d=qe.tickIndexToSqrtPriceX64(o.tick_upper),u=Pn.getCoinAmountFromLiquidity(new w(a.toString()),e,c,d,!1);return{coinAmountA:u.coinA,coinAmountB:u.coinB,liquidityAmount:new w(a.toString()),fix_amount_a:o.fix_amount_a,...D0(u,Ad.fromDecimal(q(t).mul(100)),i)}}return o})}static calculateCoinRatios(e,t){const n=new w(qe.tickIndexToSqrtPriceX64(e)),i=[];let s=q(0),r=q(0);const o=t.map(d=>{const u=q(tU(100,6).toString()).mul(d.ratio).toFixed(0).toString(),l=qe.tickIndexToSqrtPriceX64(d.tick_lower),f=qe.tickIndexToSqrtPriceX64(d.tick_upper),p=Pn.getCoinAmountFromLiquidity(new w(u),n,l,f,!0);return s=s.add(p.coinA.toString()),r=r.add(p.coinB.toString()),{...p,liquidity:u}}),a=[],c=[];return o.forEach((d,u)=>{const l={coinRatioA:s.eq(q(0))?0:q(d.coinA.toString()).div(s).toNumber(),coinRatioB:r.eq(q(0))?0:q(d.coinB.toString()).div(r).toNumber(),liquiditys:d.liquidity,tick_lower:t[u].tick_lower,tick_upper:t[u].tick_upper};i.push(l),a.push(s.eq(q(0))?0:q(d.coinA.toString()).div(s).toNumber()),c.push(r.eq(q(0))?0:q(d.coinB.toString()).div(r).toNumber())}),i}static calculateCloseMasterLiquidityInputs(e){const t=new w(qe.tickIndexToSqrtPriceX64(e.curr_tick));return e.positions.map(i=>{const s=new w(i.liquidity),r=qe.tickIndexToSqrtPriceX64(i.tick_lower_index),o=qe.tickIndexToSqrtPriceX64(i.tick_upper_index),a=Pn.getCoinAmountFromLiquidity(s,t,r,o,!1),c=Ad.fromDecimal(q(e.slippage).mul(100)),{tokenMaxA:d,tokenMaxB:u}=D0(a,c,!1);return{coinAmountA:a.coinA,coinAmountB:a.coinB,tokenMaxA:d,tokenMaxB:u,liquidityAmount:s,fix_amount_a:!1}})}static calculateRemoveMasterLiquidityInputs(e){const t=new w(qe.tickIndexToSqrtPriceX64(e.curr_tick)),{fix_token:n}=e;if(n){const s=e.positions.map((a,c)=>({tick_lower:a.tick_lower_index,tick_upper:a.tick_upper_index,ratio:e.ratios[c]})),r=kr.calculateCoinRatios(e.curr_tick,s),o=e.positions.map((a,c)=>{const d=r[c],u=q(n.coin_amount).mul(n.fix_amount_a?d.coinRatioA:d.coinRatioB).toFixed(0).toString();try{const l=Pn.estLiquidityAndcoinAmountFromOneAmounts(a.tick_lower_index,a.tick_upper_index,new w(u),n.fix_amount_a,!1,e.slippage,t);return{...l,tick_lower:a.tick_lower_index,tick_upper:a.tick_upper_index,liquidity:l.liquidityAmount.toString(),ratio:e.ratios[c]}}catch{return{coinAmountA:new w(0),coinAmountB:new w(0),tokenMaxA:new w(0),tokenMaxB:new w(0),liquidityAmount:new w(0),fix_amount_a:!n.fix_amount_a,tick_lower:a.tick_lower_index,tick_upper:a.tick_upper_index,liquidity:"0",ratio:e.ratios[c]}}});return kr.fixLiquidityInputs(t,e.slippage,o,!1)}return e.positions.map((s,r)=>{const o=e.ratios[r];let a=q(e.liquidity).mul(o).toFixed(0);q(a).greaterThan(s.liquidity)&&(a=s.liquidity);const c=qe.tickIndexToSqrtPriceX64(s.tick_lower_index),d=qe.tickIndexToSqrtPriceX64(s.tick_upper_index),u=Pn.getCoinAmountFromLiquidity(new w(a),t,c,d,!1),l=Ad.fromDecimal(q(e.slippage).mul(100)),{tokenMaxA:f,tokenMaxB:p}=D0(u,l,!1);return{coinAmountA:u.coinA,coinAmountB:u.coinB,tokenMaxA:f,tokenMaxB:p,liquidityAmount:new w(a),fix_amount_a:!1}})}static buildMasterPosition(e){return{coin_type_a:pe(e.coin_type_a.fields.name).full_address,coin_type_b:pe(e.coin_type_b.fields.name).full_address,description:e.description,id:e.id.id,index:e.index,liquidity:e.liquidity,name:e.name,pool:e.pool,tick_lower_index:Xn(BigInt(e.tick_lower_index.fields.bits)),tick_upper_index:Xn(BigInt(e.tick_upper_index.fields.bits)),url:e.url}}static buildMasterNFT(e){const t=yt(e);if(t){const n={id:t.id.id,pool_id:t.pool_id,index:Number(t.index),strategy:Number(t.strategy),tick_lower_index:Xn(BigInt(t.tick_lower_index)),tick_upper_index:Xn(BigInt(t.tick_upper_index)),positions:[],...Uh(e)};return n.positions=t.positions.map(i=>kr.buildMasterPosition(i.fields)),n}}},Xi=class{static generateNextTickRange(e,t,n){const i=e-t/2,s=e+t/2;return{new_tick_lower:Xi.getValidTickIndex(i,n),new_tick_upper:Xi.getValidTickIndex(s,n)}}static calculateDepositRatio(e,t,n){const i=qe.sqrtPriceX64ToTickIndex(n);if(i<e)return{ratioA:new ie(1),ratioB:new ie(0)};if(i>t)return{ratioA:new ie(0),ratioB:new ie(1)};const s=new w(1e8),{coinAmountB:r}=Pn.estLiquidityAndcoinAmountFromOneAmounts(e,t,s,!0,!0,0,n),o=qe.sqrtPriceX64ToPrice(n,0,0),a=q(s.toString()).mul(o),c=a.add(r.toString()),d=a.div(c),u=q(r.toString()).div(c);return{ratioA:d,ratioB:u}}static getValidTickIndex(e,t){if(e%t===0)return e;let n;if(e>0?n=e-e%t+t:e<0?n=e+Math.abs(e)%t-t:n=e,n%t!==0)throw new Error("Assertion failed: res % tickSpacing == 0");if(Math.abs(n)<Math.abs(e))throw new Error("Assertion failed: res.abs() >= tickIndex");return n}static get_lp_amount_by_liquidity(e,t){return e.total_supply==="0"?"0":q(e.total_supply).mul(t).div(e.liquidity).toFixed(0,ie.ROUND_DOWN).toString()}static get_share_liquidity_by_amount(e,t){return e.total_supply==="0"?"0":q(t).mul(e.liquidity).div(e.total_supply).toFixed(0,ie.ROUND_DOWN).toString()}static get_protocol_fee_amount(e,t){return q(t).mul(e.protocol_fee_rate).div(AU).toFixed(0,ie.ROUND_CEIL)}static buildFramsPositionNFT(e){const t=e.clmm_postion.fields;return{id:e.id.id,url:t.url,pool_id:e.pool_id,coinTypeA:pe(t.coin_type_a.fields.name).full_address,coinTypeB:pe(t.coin_type_b.fields.name).full_address,description:t.description,name:t.name,liquidity:t.liquidity,clmm_position_id:t.id.id,clmm_pool_id:t.pool,tick_lower_index:Xn(BigInt(t.tick_lower_index.fields.bits)),tick_upper_index:Xn(BigInt(t.tick_upper_index.fields.bits)),rewards:[]}}static buildPool(e){const t=yt(e),n=aa(e),{positions:i}=t;if(t&&i.length>0){const s=Xi.buildFramsPositionNFT(i[0].fields);return{id:t.id.id,pool_id:t.pool,protocol_fee_rate:t.protocol_fee_rate,is_pause:t.is_pause,harvest_assets:{harvest_assets_handle:t.harvest_assets.fields.id.id,size:Number(t.harvest_assets.fields.size)},lp_token_type:pe(n).type_arguments[0],total_supply:t.lp_token_treasury.fields.total_supply.fields.value,liquidity:t.liquidity,max_quota:t.max_quota,status:t.status===1?"STATUS_RUNNING":"STATUS_REBALANCING",quota_based_type:t.quota_based_type.fields.name,position:s}}}static async getSuiCoin(e,t,n){const i=await e.ClmmSDK.getOwnerCoinAssets(e.getVerifySenderAddress(),cf);n=n||new xe;let s;if(t>95e10){const[r,...o]=i;o.length>0&&n.mergeCoins(n.object(r.coinObjectId),o.map(a=>n.object(a.coinObjectId))),s=n.splitCoins(n.object(r.coinObjectId),[t])}else s=tt.buildCoinForAmount(n,i,BigInt(t),cf,!1,!0).targetCoin;return s}},Va=class{static calculatePositionShare(e,t,n,i,s,r,o){if(t<=s||e>=r)return"0";let a=0;e<s?a=s:a=e;let c=0;t<r?c=t:c=r;const d=qe.tickIndexToSqrtPriceX64(a),u=qe.tickIndexToSqrtPriceX64(c),{coinA:l,coinB:f}=Pn.getCoinAmountFromLiquidity(new w(n),new w(o),d,u,!0);return q(l.toString()).mul(i).div(1e12).add(f.toString()).toString()}static buildFramsPool(e){const t=yt(e);if(t)try{const n=[];return t.rewarders.forEach(s=>{n.push({reward_coin:pe(s.fields.name).full_address,last_reward_time:"",emission_per_second:"",total_allocate_point:"",allocate_point:""})}),{id:t.id.id,clmm_pool_id:t.clmm_pool_id,effective_tick_lower:Xn(BigInt(t.effective_tick_lower.fields.bits)),effective_tick_upper:Xn(BigInt(t.effective_tick_upper.fields.bits)),total_share:t.total_share,rewarders:n,positions:{positions_handle:t.positions.fields.id.id,size:t.positions.fields.size},sqrt_price:t.sqrt_price}}catch(n){console.log(n)}}static buildFramsPositionNFT(e){const t=yt(e);if(t){const n=t.clmm_postion.fields;return{id:t.id.id,url:n.url,pool_id:t.pool_id,coinTypeA:pe(n.coin_type_a.fields.name).full_address,coinTypeB:pe(n.coin_type_b.fields.name).full_address,description:n.description,name:n.name,liquidity:n.liquidity,clmm_position_id:n.id.id,clmm_pool_id:n.pool,tick_lower_index:Xn(BigInt(n.tick_lower_index.fields.bits)),tick_upper_index:Xn(BigInt(n.tick_upper_index.fields.bits)),rewards:[]}}}},ed=class{static buildOrderLimitEvent(e,t){const{events:n}=e,i=[];return n&&n.forEach(s=>{const r=pe(s.type).name;if(t.includes(r)){const o={digest:e.digest,type:r,timestampMs:e.timestampMs,parsedJson:s.parsedJson};i.push(o)}}),i}static buildLimitOrderInfo(e){const t=yt(e),n=aa(e);if(t&&n)try{const i=pe(n),s={pay_coin_type:i.type_arguments[0],target_coin_type:i.type_arguments[1],canceled_ts:t.canceled_ts==="18446744073709551615"?0:Number(t.canceled_ts),id:t.id.id,obtained_amount:t.obtained_amount,owner:t.owner,rate:t.rate,rate_order_indexer_id:t.rate_order_indexer_id,expire_ts:Number(t.expire_ts),total_pay_amount:t.total_pay_amount,pay_balance:t.pay_balance,target_balance:t.target_balance,claimed_amount:t.claimed_amount,status:"Running",created_ts:Number(t.created_ts)};return s.canceled_ts===0?(s.status="Running",q(s.pay_balance).eq(0)?s.status="Completed":q(s.pay_balance).lessThan(s.total_pay_amount)&&(s.status="PartialCompleted")):s.status="Cancelled",s}catch(i){console.log(i)}}static rateToPrice(e,t,n){const i=18+t-n;return q(10**i).div(e).toString()}static priceToRate(e,t,n){const i=18+t-n;return q(10).pow(i).div(q(e)).toFixed(0).toString()}},z0=class{static async getExchangeRateForStake(e,t,n){const{vaults:i}=e.sdkOptions,{haedal:s}=J(i);if(s===void 0)throw Error("the haedal config is undefined");const{simulationAccount:r}=e.ClmmSDK.sdkOptions,{staking_id:o}=J(s);try{const a=new xe;t?await this.requestStake(e,n||1e9,a):a.moveCall({target:`${s.published_at}::staking::get_exchange_rate`,typeArguments:[],arguments:[a.object(o)]});const c=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:t?e.ClmmSDK.senderAddress:r.address});if(console.log("getExchangeRateForStake res: ",c),t){const l=c.events.find(_=>_.type.includes("UserStaked")),{sui_amount:f,st_amount:p}=l.parsedJson,m=q(f).div(p).toString();return console.log({st_amount:p,sui_amount:f,rate:m}),m}const d=c.results[0].returnValues[0][0];return q(hn.u64().parse(Uint8Array.from(d))).div(1e6).toString()}catch(a){console.log("getExchangeRateForHaedal",a)}return"0"}static async requestStake(e,t,n){var r,o;const{vaults:i}=e.sdkOptions;n=n||new xe;const s=await Xi.getSuiCoin(e,t,n);return n.moveCall({target:`${(o=(r=i.config)==null?void 0:r.haedal)==null?void 0:o.published_at}::interface::request_stake`,typeArguments:[],arguments:[n.object(gn("0x5")),n.object(i.config.haedal.config.staking_id),s,n.pure.address(gn("0x0"))]}),n}static requestStakeCoin(e,t,n){const{haedal:i}=e.sdkOptions.vaults.config;return t.moveCall({target:`${i.published_at}::staking::request_stake_coin`,typeArguments:[],arguments:[t.object(gn("0x5")),t.object(i.config.staking_id),n,t.pure.address(gn("0x0"))]})}},H0=class{static async getExchangeRateForStake(e,t,n){const{vaults:i}=e.sdkOptions,{volo:s}=J(i);if(s===void 0)throw Error("the volo config is undefined");const{simulationAccount:r}=e.ClmmSDK.sdkOptions,{native_pool:o,vsui_metadata:a}=J(s);try{const c=new xe;t?await this.requestStake(e,n||1e9,c):c.moveCall({target:`${s.published_at}::native_pool::get_ratio`,typeArguments:[],arguments:[c.object(o),c.object(a)]});const d=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:t?e.ClmmSDK.senderAddress:r.address});if(t){const f=d.events.find(_=>_.type.includes("StakedEvent")),{cert_amount:p,sui_amount:m}=f.parsedJson;return q(m).div(p).toString()}const u=d.results[0].returnValues[0][0];console.log({returnValues:u});const l=q(hn.u256().parse(Uint8Array.from(u))).div(1e18).toNumber();return q(1).div(l).toString()}catch(c){console.log("getExchangeRateForHaedal",c)}return"0"}static async requestStake(e,t,n){const{vaults:i}=e.sdkOptions,{volo:s}=J(i);if(s===void 0)throw Error("the volo config is undefined");n=n||new xe;const{native_pool:r,vsui_metadata:o}=J(s),a=await Xi.getSuiCoin(e,t,n);return n.moveCall({target:`${s.published_at}::native_pool::stake`,typeArguments:[],arguments:[n.object(r),n.object(o),n.object(gn("0x5")),a]}),n}static requestStakeCoin(e,t,n){const{vaults:i}=e.sdkOptions,{volo:s}=J(i);if(s===void 0)throw Error("the volo config is undefined");t=t||new xe;const{native_pool:r,vsui_metadata:o}=J(s);return t.moveCall({target:`${s.published_at}::native_pool::stake_non_entry`,typeArguments:[],arguments:[t.object(r),t.object(o),t.object(gn("0x5")),n]})}},K0=class{static async getExchangeRateForStake(e,t,n){const{vaults:i}=e.sdkOptions,{aftermath:s}=J(i);if(s===void 0)throw Error("the aftermath config is undefined");const{simulationAccount:r}=e.ClmmSDK.sdkOptions,{staked_sui_vault:o,safe:a}=J(s);try{const c=new xe;t?await this.requestStake(e,n||1e9,c):c.moveCall({target:`${s.published_at}::staked_sui_vault::afsui_to_sui_exchange_rate`,typeArguments:[],arguments:[c.object(o),c.object(a)]});const d=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:t?e.ClmmSDK.senderAddress:r.address});if(t){const f=d.events.find(_=>_.type.includes("StakedEvent")),{afsui_amount:p,sui_amount:m}=f.parsedJson;return q(m).div(p).toString()}const u=d.results[0].returnValues[0][0];return q(hn.u128().parse(Uint8Array.from(u))).div(1e18).toString()}catch(c){console.log("getExchangeRateForHaedal",c)}return"0"}static async requestStake(e,t,n){const{vaults:i}=e.sdkOptions,{aftermath:s}=J(i);if(s===void 0)throw Error("the aftermath config is undefined");n=n||new xe;const{staked_sui_vault:r,referral_vault:o,safe:a,validator_address:c}=J(s),d=await Xi.getSuiCoin(e,t,n);return n.moveCall({target:`${s.published_at}::staked_sui_vault::request_stake_and_keep`,typeArguments:[],arguments:[n.object(r),n.object(a),n.object(gn("0x5")),n.object(o),d,n.pure.address(gn(c))]}),n}static requestStakeCoin(e,t,n){const{vaults:i}=e.sdkOptions,{aftermath:s}=J(i);if(s===void 0)throw Error("the aftermath config is undefined");t=t||new xe;const{staked_sui_vault:r,referral_vault:o,safe:a,validator_address:c}=J(s);return t.moveCall({target:`${s.published_at}::staked_sui_vault::request_stake`,typeArguments:[],arguments:[t.object(r),t.object(a),t.object(gn("0x5")),t.object(o),n,t.pure.address(gn(c))]})}},kU=class{constructor(e){We(this,"_sdk");We(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e="all",t=!1){const{package_id:n}=this._sdk.sdkOptions.ido,i=`${n}_getPoolImmutables`,s=this.getCache(i,t),r={data:[],hasNextPage:!1},o=[];if(s!==void 0&&o.push(...s),o.length===0)try{const a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${n}::oversubscribe_pool::CreatePoolEvent`},e);a.data.forEach(c=>{const d=c.parsedJson;if(d){const u=ai.buildIdoPoolImmutables(d);o.push(u)}}),r.hasNextPage=a.hasNextPage,r.nextCursor=a.nextCursor,this.updateCache(i,o,Ye)}catch(a){console.log("getPoolImmutables",a)}return r.data=o,r}async getPools(e=[],t=!1){const n=[];let i=[];e.length>0?i=[...e]:(await this.getPoolImmutables("all",t)).data.forEach(o=>{i.push(o.pool_address)});const s=await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showType:!0,showContent:!0});for(const r of s){const o=ai.buildIdoPool(r);await ai.calculatePoolUiPrice(this._sdk,o),n.push(o);const a=`${o.pool_address}_getPoolObject`;this.updateCache(a,o,Ye)}return n}async getPool(e,t=!0){const n=`${e}_getPoolObject`,i=this.getCache(n,t);if(i!==void 0)return i;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),r=ai.buildIdoPool(s);return await ai.calculatePoolUiPrice(this._sdk,r),this.updateCache(n,r),r}async getIdoConfigs(e=!1){var c;const{package_id:t}=this._sdk.sdkOptions.ido,n=`${t}_getInitEvent`,i=this.getCache(n,e);if(i!==void 0)return i;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),r=bu(s),o=(c=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:r}))==null?void 0:c.data,a={pools_id:"",admin_cap_id:"",package_version_id:""};return o.length>0&&(o.forEach(d=>{console.log("item: ",d);const u=d.parsedJson;if(u)switch(pe(d.type).full_address){case`${t}::config::InitConfigEvent`:a.admin_cap_id=u.admin_cap_id,a.package_version_id=u.package_version_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=u.pools_id;break}}),this.updateCache(n,a,Ye)),a}async getPurchaseInfo(e,t,n=!0){const i=`${e}_${t}_getPurchaseInfo`,s=this.getCache(i,n);if(s)return s;try{const r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"address",value:t}}),o=ai.buildPurchaseInfo(yt(r));return this.updateCache(i,o,os),o}catch{return}}async getLockNFT(e,t=!1){const n=`${e}_getLockNFT`,i=this.getCache(n,t);if(i!==void 0)return i;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!s.error)return ea(s)}async getLockNFTList(e){var s;const{clmm_pool:t}=this._sdk.ClmmSDK.sdkOptions,{ido:n}=this._sdk.sdkOptions,i=[];try{const r=(s=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{filter:{StructType:`${n.package_id}::lock::LockedNFT<${t.package_id}::position::Position>`},options:{showContent:!0}}))==null?void 0:s.data;for(const o of r){const a=yt(o);if(a){const c=a.nft.fields,d={locked_at:Number(a.locked_at),lock_duration:Number(a.lock_duration),lock_nft_id:a.id.id,type:a.nft.type,...c};d.end_lock_time=d.locked_at+d.lock_duration,d.coin_type_a=pe(c.coin_type_a.fields.name).full_address,d.coin_type_b=pe(c.coin_type_b.fields.name).full_address,d.id=c.id.id,d.tick_lower_index=Xn(BigInt(c.tick_lower_index.fields.bits)),d.tick_upper_index=Xn(BigInt(c.tick_upper_index.fields.bits)),i.push(d)}}return i}catch(r){return console.log("getLockNFTList:",r),[]}}async creatPool(e){const{ido:t}=this.sdk.sdkOptions;of(zt(e.coin_type_sale),zt(e.coin_type_raise))&&(e.price_min=q(1).div(e.price_max).toNumber(),e.price_max=q(1).div(e.price_min).toNumber());const i=Ii.priceRealToFix(Number(e.price),e.sale_decimals,e.raise_decimals),s=qe.priceToSqrtPriceX64(q(e.price_min),e.sale_decimals,e.raise_decimals).toString(),r=qe.priceToSqrtPriceX64(q(e.price_max),e.sale_decimals,e.raise_decimals).toString(),o=new xe,a=q(e.total_supply).add(q(e.total_supply).mul(q(e.liquidity_injection_ratio))).toNumber(),c=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.coin_type_sale),d=tt.buildCoinForAmount(o,c,BigInt(a),e.coin_type_sale,!1),u=[o.object(J(t).admin_cap_id),o.object(J(t).package_version_id),o.object(J(t).pools_id),o.object(zt(e.owner)),o.pure.u128(q(i).mul(La).toString()),o.pure.u64(e.total_supply),o.pure.u64(e.complete_raise_limit),o.pure.u64(e.min_purchase_amount),o.pure.u64(e.max_purchase_amount),o.pure.u64(e.start_time),o.pure.u64(e.purchase_duration),o.pure.u64(e.lock_up_duration),o.pure.u64((e.liquidity_injection_ratio*fT).toString()),o.pure.u128(s),o.pure.u128(r),o.pure.u32(e.tick_spacing),d.targetCoin,o.pure.u64(e.protection_hard_cap.toString()),o.object(Oe)],l=[e.coin_type_sale,e.coin_type_raise];return o.moveCall({target:`${t.published_at}::${wU}::create_oversubscribe_pool`,typeArguments:l,arguments:u}),o}async creatPurchasePayload(e){const{ido:t}=this.sdk.sdkOptions,n=new xe,i=await this.getPurchaseInfo(e.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1),s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.coin_type_raise),r=tt.buildCoinForAmount(n,s,BigInt(e.raise_amount),e.coin_type_raise,!1),o=[e.coin_type_sale,e.coin_type_raise];let a,c;return i?(c="purchase",a=[n.object(J(t).package_version_id),n.object(e.pool_address),n.object(i.purchase_certificate_id),n.pure.u64(e.raise_amount.toString()),r.targetCoin,n.object(Oe)]):(c="create_certificate_and_purchase",a=[n.object(J(t).package_version_id),n.object(e.pool_address),n.pure.u64(e.raise_amount.toString()),r.targetCoin,n.object(Oe)]),n.moveCall({target:`${t.published_at}::${as}::${c}`,typeArguments:o,arguments:a}),n}async redeemPayload(e){const{ido:t}=this.sdk.sdkOptions,n=await this.getPurchaseInfo(e.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1);if(n===void 0)throw Error("get purchase certificate fail");const i=new xe,s=[e.coin_type_sale,e.coin_type_raise],r=[i.object(J(t).package_version_id),i.object(e.pool_address),i.object(n.purchase_certificate_id),i.object(Oe)];return i.moveCall({target:`${t.published_at}::${as}::redeem`,typeArguments:s,arguments:r}),i}injectLiquidityPayload(e){const{ido:t}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,i=new xe,s=[e.coin_type_sale,e.coin_type_raise],r=e.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",o=[i.object(J(t).package_version_id),i.object(e.pool_address),i.object(J(n).global_config_id),i.object(e.clmm_pool_address),i.object(Oe)];return i.moveCall({target:`${t.published_at}::${as}::${r}`,typeArguments:s,arguments:o}),i}unPauseInjectLiquidity(e){const{ido:t}=this.sdk.sdkOptions,{integrate:n,clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,s=new xe;s.moveCall({target:`${n.published_at}::${Td}::unpause_pool`,typeArguments:[e.coin_type_a,e.coin_type_b],arguments:[s.object(J(i).global_config_id),s.object(e.clmm_pool_address)]});const r=[e.coin_type_sale,e.coin_type_raise],o=e.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",a=[s.object(J(t).package_version_id),s.object(e.pool_address),s.object(J(i).global_config_id),s.object(e.clmm_pool_address),s.object(Oe)];return s.moveCall({target:`${t.published_at}::${as}::${o}`,typeArguments:r,arguments:a}),s}async findClmmPoolForLiquidity(e){let t=null,n=!1;const i=await this.sdk.ClmmSDK.Pool.getPoolImmutables();for(const s of i){if(s.coinTypeA===e.coin_type_sale&&s.coinTypeB===e.coin_type_raise&&Number(s.tickSpacing)===e.tick_spacing){t=await this._sdk.ClmmSDK.Pool.getPool(s.poolAddress);break}if(s.coinTypeA===e.coin_type_raise&&s.coinTypeB===e.coin_type_sale&&Number(s.tickSpacing)===e.tick_spacing){t=await this._sdk.ClmmSDK.Pool.getPool(s.poolAddress),n=!0;break}}return t&&(q(t.current_sqrt_price).lessThanOrEqualTo(e.current_sqrt_price_min)||q(t.current_sqrt_price).greaterThanOrEqualTo(e.current_sqrt_price_max))?(console.log("clmmPool: ",t.poolAddress),{is_reverse:n,clmmPool:null}):{is_reverse:n,clmmPool:t}}withdrawPayload(e){const{ido:t}=this.sdk.sdkOptions,n=new xe,i=[e.coin_type_sale,e.coin_type_raise],s=[n.object(J(t).package_version_id),n.object(e.pool_address),n.object(Oe)];return n.moveCall({target:`${t.published_at}::${as}::withdraw`,typeArguments:i,arguments:s}),n}updateWhitelistCapPayload(e){const{ido:t}=this.sdk.sdkOptions,n=new xe,i=[e.coin_type_sale,e.coin_type_raise];return e.add_whites&&e.add_whites.addresses.length>0&&n.moveCall({target:`${t.published_at}::${as}::add_white_listed_addresses`,typeArguments:i,arguments:[n.object(J(t).admin_cap_id),n.object(J(t).package_version_id),n.object(e.pool_address),n.makeMoveVec({type:"address",elements:e.add_whites.addresses.map(s=>n.pure.address(gn(s)))}),n.pure.u64(e.add_whites.protection_limit),n.object(Oe)]}),e.remove_whites&&e.remove_whites.length>0&&n.moveCall({target:`${t.published_at}::${as}::remove_white_listed_addresses`,typeArguments:i,arguments:[n.object(J(t).admin_cap_id),n.object(J(t).package_version_id),n.object(e.pool_address),n.makeMoveVec({type:"address",elements:e.remove_whites.map(s=>n.pure.address(gn(s)))}),n.object(Oe)]}),e.update_whites&&e.update_whites.forEach(s=>{n.moveCall({target:`${t.published_at}::${as}::update_white_listed_address`,typeArguments:i,arguments:[n.object(J(t).admin_cap_id),n.object(J(t).package_version_id),n.object(e.pool_address),n.object(s.address),n.pure.u64(s.protection_limit),n.object(Oe)]})}),n}creatCancelPoolPayload(e){const{ido:t}=this.sdk.sdkOptions,n=new xe,i=[e.coin_type_sale,e.coin_type_raise],s=[n.object(J(t).admin_cap_id),n.object(J(t).package_version_id),n.object(e.pool_address),n.object(Oe)];return n.moveCall({target:`${t.published_at}::${as}::cancel`,typeArguments:i,arguments:s}),n}updatePoolOwnerPayload(e,t){const{ido:n}=this.sdk.sdkOptions;t=t===void 0?new xe:t;const i=[e.coin_type_sale,e.coin_type_raise],s=[t.object(J(n).admin_cap_id),t.object(J(n).package_version_id),t.object(e.pool_address),t.object(e.new_owner),t.object(Oe)];return t.moveCall({target:`${n.published_at}::${as}::update_pool_owner`,typeArguments:i,arguments:s}),t}updatePoolDuractionPayload(e,t){const{ido:n}=this.sdk.sdkOptions;t=t===void 0?new xe:t;const i=[e.coin_type_sale,e.coin_type_raise],s=[t.object(J(n).admin_cap_id),t.object(J(n).package_version_id),t.object(e.pool_address),t.pure.u64(e.start_time),t.pure.u64(e.purchase_duration),t.pure.u64(e.lock_duration),t.object(Oe)];return t.moveCall({target:`${n.published_at}::${as}::update_pool_duration`,typeArguments:i,arguments:s}),t}updateProtectionHardCapPayload(e,t){const{ido:n}=this.sdk.sdkOptions;t=t===void 0?new xe:t;const i=[e.coin_type_sale,e.coin_type_raise],s=[t.object(J(n).admin_cap_id),t.object(J(n).package_version_id),t.object(e.pool_address),t.pure.u64(e.protection_hard_cap),t.object(Oe)];return t.moveCall({target:`${n.published_at}::${as}::update_protection_hard_cap`,typeArguments:i,arguments:s}),t}unlockNftPayload(e){const{ido:t}=this.sdk.sdkOptions,n=new xe,i=[e.nft_type],s=[n.object(e.lock_nft_id),n.object(Oe)];return n.moveCall({target:`${t.published_at}::lock::unlock_nft`,typeArguments:i,arguments:s}),n}async isAdminCap(e){const{ido:t}=this._sdk.sdkOptions,n=`${t.package_id}_${e}_isAdminCap`,i=this.getCache(n);if(i)return i;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:J(t).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(s);const r=aa(s),o=df(s);let a=!1;return o&&r&&pe(r).source_address===`${t.package_id}::config::AdminCap`&&(a=zt(o.AddressOwner)===zt(e)),this.updateCache(n,a,Ye),a}async getWhiteProtectionLimit(e,t,n=!0){const i=`${e}_${t}_getWhiteProtectionLimit`,s=this._sdk.getCache(i,n);if(s)return s;try{const r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"address",value:t}});if(r&&r.data){const o=yt(r);return this._sdk.updateCache(i,o.value),o.value}return}catch{return}}async getWhiteList(e,t){var i;const n={type:"address",value:t};try{const s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:n}),r=yt(s);if(console.log(r),r)return(i=r==null?void 0:r.value)==null?void 0:i.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getAdminAddress(){const{ido:e}=this._sdk.sdkOptions,t=`${J(e).admin_cap_id}_getAdminAddress`,n=this.getCache(t);if(n)return n;const i=await this._sdk.ClmmSDK.fullClient.getObject({id:J(e).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(i);const s=aa(i),r=df(i);if(r&&s&&pe(s).source_address===`${e.package_id}::config::AdminCap`){const a=zt(r.AddressOwner);return this.updateCache(t,a,Ye),a}return""}updateCache(e,t,n=Ye){let i=this._cache[e];i?(i.overdueTime=mn(n),i.value=t):i=new $i(t,mn(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},SU=class{constructor(e){We(this,"_sdk");We(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,t=!0){const{xtoken:n}=this.sdk.sdkOptions,i=`${e}_getLockUpManagerEvent`,s=this.getCache(i,t);if(s!==void 0)return s;let r;const o=`${n.package_id}::xtoken::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:o}})).data.forEach(c=>{const d=pe(Xs(c)).source_address;if(d===o&&c.data&&c.data.content){const{fields:u}=c.data.content;r={...Uh(c),id:u.id.id,index:u.index,type:d,xtoken_balance:u.xtoken_balance},this.updateCache(i,r,Ye)}}),r}async getOwnerLockTokens(e){const{xtoken:t}=this.sdk.sdkOptions,n=[],i=`${t.package_id}::lock_coin::LockedCoin<${this.buileTokenCoinType()}>`,s=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0},filter:{StructType:i}});for(const r of s.data)if(pe(Xs(r)).source_address===i&&r.data){const a=Fo.buildLockToken(r.data.content),c=await this.getLockXToken(a.id);c&&(a.xtoken_amount=c.xtoken_amount),n.push(a)}return n}async getLockToken(e){var n;const t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((n=t.data)!=null&&n.content){const i=Fo.buildLockToken(t.data.content),s=await this.getLockXToken(i.id);return s&&(i.xtoken_amount=s.xtoken_amount),i}}async getOwnerTokenCoins(e){return await this._sdk.ClmmSDK.getOwnerCoinAssets(e,this.buileTokenCoinType())}mintVeNFTPayload(){const{xtoken:e}=this.sdk.sdkOptions,t=new xe;return t.moveCall({target:`${e.published_at}::${Oa}::mint_venft`,typeArguments:[],arguments:[t.object(J(e).xtoken_manager_id)]}),t}async convertPayload(e){const{xtoken:t}=this.sdk.sdkOptions,n=new xe,i=this.buileTokenCoinType(),s=await tt.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,n,BigInt(e.amount),i);return e.venft_id===void 0?n.moveCall({target:`${t.published_at}::${Oa}::mint_and_convert`,typeArguments:[],arguments:[n.object(J(t).lock_manager_id),n.object(J(t).xtoken_manager_id),s,n.pure.u64(e.amount)]}):n.moveCall({target:`${t.published_at}::${Oa}::convert`,typeArguments:[],arguments:[n.object(J(t).lock_manager_id),n.object(J(t).xtoken_manager_id),s,n.pure.u64(e.amount),n.object(e.venft_id)]}),n}redeemLockPayload(e){const{xtoken:t}=this.sdk.sdkOptions,n=new xe;return n.moveCall({target:`${t.published_at}::${Oa}::redeem_lock`,typeArguments:[],arguments:[n.object(J(t).lock_manager_id),n.object(J(t).xtoken_manager_id),n.object(e.venft_id),n.pure.u64(e.amount),n.pure.u64(e.lock_day),n.object(Oe)]}),n}redeemPayload(e){const{xtoken:t}=this.sdk.sdkOptions,n=new xe;return n.moveCall({target:`${t.published_at}::${Oa}::redeem`,typeArguments:[],arguments:[n.object(J(t).lock_manager_id),n.object(J(t).xtoken_manager_id),n.object(e.venft_id),n.object(e.lock_id),n.object(Oe)]}),n}redeemDividendPayload(e,t){const{xtoken_dividends:n}=this.sdk.sdkOptions,i=new xe;return t.forEach(s=>{i.moveCall({target:`${n.published_at}::${F0}::redeem`,typeArguments:[s],arguments:[i.object(J(n).dividend_manager_id),i.object(e)]})}),i}redeemDividendV2Payload(e,t,n){const{xtoken_dividends:i}=this.sdk.sdkOptions;let s=new xe;return t.filter(o=>n.includes(o)).length>0&&(s=this.redeemDividendXTokenPayload(e,s)),t.forEach(o=>{n.includes(o)||s.moveCall({target:`${i.published_at}::${F0}::redeem_v2`,typeArguments:[o],arguments:[s.object(J(i).dividend_manager_id),s.object(e),s.object(Oe)]})}),s}redeemDividendXTokenPayload(e,t){const{xtoken_dividends:n,xtoken:i}=this.sdk.sdkOptions,{xtoken_manager_id:s,lock_manager_id:r}=J(i),{dividend_manager_id:o}=J(n);return t=t===void 0?new xe:t,t.moveCall({target:`${n.published_at}::${F0}::redeem_xtoken`,typeArguments:[],arguments:[t.object(r),t.object(s),t.object(o),t.object(e),t.object(Oe)]}),t}buileTokenCoinType(){return`${this.sdk.sdkOptions.token_faucet.package_id}::token::TOKEN`}buileXTokenCoinType(e=this._sdk.sdkOptions.xtoken.package_id,t="xtoken",n="XTOKEN"){return`${e}::${t}::${n}`}cancelRedeemPayload(e){const{xtoken:t}=this.sdk.sdkOptions,n=new xe;return n.moveCall({target:`${t.published_at}::${Oa}::cancel_redeem_lock`,typeArguments:[],arguments:[n.object(J(t).lock_manager_id),n.object(J(t).xtoken_manager_id),n.object(e.venft_id),n.object(e.lock_id),n.object(Oe)]}),n}async getInitConfigs(){var o,a;const{package_id:e}=this.sdk.sdkOptions.xtoken,t=`${e}_getInitFactoryEvent`,n=this.getCache(t);if(n!==void 0)return n;const i=(o=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::xtoken::InitEvent`}))==null?void 0:o.data,s={xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""};i.length>0&&i.forEach(c=>{const d=c.parsedJson;d&&(s.xtoken_manager_id=d.xtoken_manager)});const r=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::locking::InitializeEvent`}))==null?void 0:a.data;return r.length>0&&r.forEach(c=>{const d=c.parsedJson;d&&(s.lock_manager_id=d.lock_manager)}),s.lock_handle_id=(await this.getLockUpManager(s.lock_manager_id)).lock_infos.lock_handle_id,this.updateCache(t,s,Ye),s}async getLockUpManager(e=J(this.sdk.sdkOptions.xtoken).lock_manager_id,t=!1){const n=`${e}_getLockUpManagerEvent`,i=this.getCache(n,t);if(i!==void 0)return i;const s=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),r=Fo.buildLockUpManager(yt(s));return this.updateCache(n,r,Ye),r}async getLockInfoHandle(e){const t=`${e}_getLockInfoHandle`,n=this.getCache(t);if(n!==void 0)return n;let i="";const s=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),r=yt(s);return r&&(i=r.lock_infos.fields.id.id,this.updateCache(t,i,Ye)),i}async getDividendConfigs(){var r;const{package_id:e}=this.sdk.sdkOptions.xtoken_dividends,t=`${e}_getDividendManagerEvent`,n=this.getCache(t);if(n!==void 0)return n;const i=(r=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::dividend::InitEvent`}))==null?void 0:r.data,s={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""};return i.length>0&&i.forEach(o=>{const a=o.parsedJson;a&&(s.dividend_manager_id=a.manager_id,s.dividend_admin_id=a.admin_id,s.dividend_settle_id=a.settle_id,this.updateCache(t,s,Ye))}),s}async getDividendManager(e=!1){const{dividend_manager_id:t}=J(this.sdk.sdkOptions.xtoken_dividends),n=`${t}_getDividendManager`,i=this.getCache(n,e);if(i!==void 0)return i;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),r=yt(s),o=Fo.buildDividendManager(r);return this.updateCache(n,o,Ye),o}async getXcetusManager(e=!0){const{xtoken_manager_id:t}=J(this.sdk.sdkOptions.xtoken),n=`${t}_getXcetusManager`,i=this.getCache(n,e);if(i)return i;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),r=yt(s),o={id:r.id.id,index:Number(r.index),has_venft:{handle:r.has_venft.fields.id.id,size:r.has_venft.fields.size},nfts:{handle:r.nfts.fields.id.id,size:r.nfts.fields.size},total_locked:r.total_locked,treasury:r.treasury.fields.total_supply.fields.value};return this.updateCache(n,o),o}async getVeNFTDividendInfo(e,t){try{const n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),i=yt(n);return Fo.buildVeNFTDividendInfo(i)}catch{return}}async redeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};const n=await this.getLockUpManager(),i=q(bs).mul(q(n.max_lock_day).sub(q(t))).mul(q(n.max_percent_numerator).sub(q(n.min_percent_numerator))).div(q(n.max_lock_day).sub(q(n.min_lock_day))),s=q(bs).mul(q(n.max_percent_numerator)).sub(i).div(q(lf)).div(bs);return{amountOut:q(s).mul(q(e)).round().toString(),percent:s.toString()}}async reverseRedeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};const n=await this.getLockUpManager(),i=q(bs).mul(q(n.max_lock_day).sub(q(t))).mul(q(n.max_percent_numerator).sub(q(n.min_percent_numerator))).div(q(n.max_lock_day).sub(q(n.min_lock_day))),s=q(bs).mul(q(n.max_percent_numerator)).sub(i).div(q(lf)).div(bs);return{amountOut:q(e).div(s).toFixed(0,ie.ROUND_UP),percent:s.toString()}}async getLockXToken(e){const{lock_handle_id:t}=J(this._sdk.sdkOptions.xtoken),n=`${e}_getXTokenAmount`,i=this.getCache(n);if(i)return i;try{const s=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),r=yt(s);if(r){const o=r.value.fields.value.fields;return this.updateCache(n,o,Ye),o}}catch{}}async getVeNftAmount(e,t){try{const n=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),i=yt(n);if(i){const{lock_amount:s,xtoken_amount:r}=i.value.fields.value.fields;return{lock_amount:s,xtoken_amount:r}}}catch{}return{lock_amount:"0",xtoken_amount:"0"}}async getPhaseDividendInfo(e,t=!1){const i=(await this.getDividendManager()).dividends.id,s=`${i}_${e}_getPhaseDividendInfo`,r=this._sdk.getCache(s,t);if(r)return r;try{const o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:i,name:{type:"u64",value:e}}),a=yt(o),c=a.value.fields.value.fields,d=c.redeemed_num.fields.contents.map(p=>({name:p.fields.key.fields.name,value:p.fields.value})),u=c.bonus_types.map(p=>p.fields.name),l=c.bonus.fields.contents.map(p=>({name:p.fields.key.fields.name,value:p.fields.value})),f={id:Hs(o),phase:a.name,settled_num:c.settled_num,register_time:c.register_time,redeemed_num:d,is_settled:c.is_settled,bonus_types:u,bonus:l,phase_end_time:""};return this.updateCache(s,f),f}catch{}}updateCache(e,t,n=os){let i=this._cache[e];i?(i.overdueTime=mn(n),i.value=t):i=new $i(t,mn(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},EU=class{constructor(e){We(this,"_sdk");We(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async addMasterLiquidity(e){var _,x;const{liquidity_stratefy:t}=this._sdk.sdkOptions,{clmm_pool:n}=this._sdk.ClmmSDK.sdkOptions,i=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);let s=q(0),r=q(0);const o=[],a=[],c=[],d=[],u=[];e.liquidity_bins.forEach((C,k)=>{const T=e.amounts_a[k],S=e.amounts_b[k],P=e.bins_fix_amount_a[k];s=s.add(T),r=r.add(S),o.push(T),a.push(S),c.push(yi(BigInt(C.tick_lower)).toString()),d.push(yi(BigInt(C.tick_upper)).toString()),u.push(P)});const l=[e.coinTypeA,e.coinTypeB],f=new xe,p=(_=tt.buildAddLiquidityFixTokenCoinInput(f,!e.fix_amount_a,s.toString(),e.slippage,e.coinTypeA,i,!1))==null?void 0:_.targetCoin,m=(x=tt.buildAddLiquidityFixTokenCoinInput(f,e.fix_amount_a,r.toString(),e.slippage,e.coinTypeB,i,!1))==null?void 0:x.targetCoin;return vU(e)?f.moveCall({target:`${t.published_at}::router::increase_liquidity`,typeArguments:l,arguments:[f.object(J(t).master_manger_id),f.object(e.master_address),f.object(J(n).global_config_id),f.object(e.pool_address),p,m,f.makeMoveVec({elements:o.map(C=>f.pure.u64(C))}),f.makeMoveVec({elements:a.map(C=>f.pure.u64(C))}),f.makeMoveVec({elements:u.map(C=>f.pure.bool(C))}),f.object(Oe)]}):f.moveCall({target:`${t.published_at}::router::create_master_liquidity`,typeArguments:l,arguments:[f.object(J(t).master_manger_id),f.object(J(n).global_config_id),f.object(e.pool_address),p,m,f.makeMoveVec({elements:c.map(C=>f.pure.u32(Number(C)))}),f.makeMoveVec({elements:d.map(C=>f.pure.u32(Number(C)))}),f.makeMoveVec({elements:o.map(C=>f.pure.u64(C))}),f.makeMoveVec({elements:a.map(C=>f.pure.u64(C))}),f.makeMoveVec({elements:u.map(C=>f.pure.bool(C))}),f.pure.u8(e.strategy),f.pure.u32(Number(yi(BigInt(e.tick_lower)).toString())),f.pure.u32(Number(yi(BigInt(e.tick_upper)).toString())),f.object(Oe)]}),f}buildMasterNFTType(){return`${this._sdk.sdkOptions.liquidity_stratefy.package_id}::master_liquidity::MasterLiquidity`}async getMasterNFTList(e,t=[]){const n=[],i=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0},filter:{Package:this._sdk.sdkOptions.liquidity_stratefy.package_id}}),s=t.length>0;for(const r of i.data)if(pe(r.data.type).full_address===this.buildMasterNFTType()){const a=kr.buildMasterNFT(r);if(a){const c=`${a.id}_masterNFT`;this.updateCache(c,a,Ye),s?t.includes(a.pool_id)&&n.push(a):n.push(a)}}return n}async getMasterNFT(e,t=!1){const n="$masterId}_masterNFT",i=this.getCache(n,t);if(i)return i;try{const s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(pe(s.data.type).full_address===this.buildMasterNFTType()){const o=kr.buildMasterNFT(s);return o&&this.updateCache(n,o,Ye),o}}catch(s){console.log(s)}}async fetchMasterPositionInfos(e){var a;const t={},{clmm_pool:n,integrate:i,simulationAccount:s}=this.sdk.ClmmSDK.sdkOptions,r=new xe;return e.forEach(c=>{c.position_ids.forEach(d=>{const u=[c.coinTypeA,c.coinTypeB],l=[r.object(J(n).global_config_id),r.object(c.pool_id),r.object(d)];r.moveCall({target:`${i.published_at}::${Ts}::fetch_position_fees`,arguments:l,typeArguments:u}),r.moveCall({target:`${i.published_at}::${Ts}::fetch_position_rewards`,arguments:[...l,r.object(Oe)],typeArguments:u})})}),(a=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:s.address})).events)==null||a.forEach(c=>{const{parsedJson:d}=c,{position_id:u}=d;let l=t[u];switch(l===void 0&&(l={position_id:u,feeOwedA:"0",feeOwedB:"0",rewarders:[]},t[u]=l),pe(c.type).name){case"FetchPositionFeesEvent":l.feeOwedA=d.fee_owned_a,l.feeOwedB=d.fee_owned_b;break;case"FetchPositionRewardsEvent":l.rewarders=d.data;break}}),t}async getLiquidityStrategyConfigs(e=!1){const{package_id:t}=this._sdk.sdkOptions.liquidity_stratefy,n=`${t}_getLiquidityStrategyConfigst`,i=this.getCache(n,e);if(i!==void 0)return i;const s=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::master_liquidity::MasterLiquidityManagerCreatedEvent`})).data,r={master_manger_id:"",master_liquidity_handle:""};if(s.length>0){for(const o of s){const a=o.parsedJson;r.master_manger_id=a.id;const c=await this._sdk.ClmmSDK.fullClient.getObject({id:a.id,options:{showContent:!0}}),d=yt(c);r.master_liquidity_handle=d.position_maps.fields.id.id;break}this.updateCache(n,r,Ye)}return r}removeMasterLiquidity(e){const{clmm_pool:t}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:n}=this.sdk.sdkOptions,i=new xe,s=[e.coinTypeA,e.coinTypeB];this.collectReward({coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collect_fee:!1,rewarder_coin_types:e.rewarder_coin_types,master_address:e.master_address,pool_address:e.pool_address},i);const r=[i.object(J(n).master_manger_id),i.object(e.pool_address),i.object(e.master_address),i.object(J(t).global_config_id),i.makeMoveVec({elements:e.delta_liquidities.map(o=>i.pure.u128(o))}),i.makeMoveVec({elements:e.min_amounts_a.map(o=>i.pure.u64(o))}),i.makeMoveVec({elements:e.min_amounts_a.map(o=>i.pure.u64(o))}),i.object(Oe)];return i.moveCall({target:`${n.published_at}::${Fu}::remove_liquidity`,typeArguments:s,arguments:r}),i}closeMasterLiquidity(e){const{clmm_pool:t}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:n}=this.sdk.sdkOptions,i=new xe,s=[e.coinTypeA,e.coinTypeB];return this.collectReward({coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collect_fee:!1,rewarder_coin_types:e.rewarder_coin_types,master_address:e.master_address,pool_address:e.pool_address},i),i.moveCall({target:`${n.published_at}::${Fu}::close_master_liquidity`,typeArguments:s,arguments:[i.object(J(n).master_manger_id),i.object(e.master_address),i.object(J(t).global_config_id),i.object(e.pool_address),i.makeMoveVec({elements:e.min_amounts_a.map(r=>i.pure.u64(r))}),i.makeMoveVec({elements:e.min_amounts_a.map(r=>i.pure.u64(r))}),i.object(Oe)]}),i}collectFee(e,t){const{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:i}=this.sdk.sdkOptions;t=t===void 0?new xe:t;const s=[e.coinTypeA,e.coinTypeB],r=[t.object(J(i).master_manger_id),t.object(e.master_address),t.object(J(n).global_config_id),t.object(e.pool_address)];return t.moveCall({target:`${i.published_at}::${Fu}::collect_fee`,typeArguments:s,arguments:r}),t}collectReward(e,t){const{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:i}=this.sdk.sdkOptions;return t=t===void 0?new xe:t,e.collect_fee&&this.collectFee({...e},t),e.rewarder_coin_types.forEach(s=>{const r=[e.coinTypeA,e.coinTypeB,s];if(t){const o=[t.object(J(i).master_manger_id),t.object(e.master_address),t.object(J(n).global_config_id),t.object(e.pool_address),t.object(J(n).global_vault_id),t.object(Oe)];t.moveCall({target:`${i.published_at}::${Fu}::collect_reward`,typeArguments:r,arguments:o})}}),t}updateCache(e,t,n=os){let i=this._cache[e];i?(i.overdueTime=mn(n),i.value=t):i=new $i(t,mn(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},PU=class{constructor(e){We(this,"_sdk");We(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}buildCoinInput(e,t,n,i,s){const{selectedCoins:r,remainingCoins:o}=en.selectCoinAssetGreaterThanOrEqual(t,BigInt(i)),a=en.calculateTotalBalance(r);if(a<BigInt(i))throw new Error(`The amount(${a}) is Insufficient balance for ${n} , expect ${i} `);const c=a-BigInt(i);let d;if(en.isSuiCoin(n))d=e.splitCoins(e.gas,[e.pure.u64(i)]);else{const[u,...l]=r.map(f=>f.coinObjectId);d=e.object(u),l.length>0?s?e.mergeCoins(d,[...l.map(f=>e.object(f)),s]):e.mergeCoins(d,[...l.map(f=>e.object(f))]):s&&e.mergeCoins(d,[s])}return{selectedUnusedAmount:c,coinInput:d,remainingCoins:o}}async deposit(e){var l,f;console.log("1110 deposit : ",{params:e});const{vaults:t,frams:n}=this._sdk.sdkOptions,{clmm_pool:i}=this._sdk.ClmmSDK.sdkOptions,s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress()),r=new xe;let o,a;if(e.swapParams){const p=await this.handleDepositSwap(e,r,s);o=p.primaryCoinAInputs,a=p.primaryCoinBInputs}else o=(l=tt.buildAddLiquidityFixTokenCoinInput(r,!e.fix_amount_a,e.amount_a,e.slippage,e.coinTypeA,s,!1))==null?void 0:l.targetCoin,a=(f=tt.buildAddLiquidityFixTokenCoinInput(r,e.fix_amount_a,e.amount_b,e.slippage,e.coinTypeB,s,!1))==null?void 0:f.targetCoin;const c=J(t),d=J(n),u=J(i);return r.moveCall({target:`${t.published_at}::${xU}::deposit`,typeArguments:[e.coinTypeA,e.coinTypeB,e.lp_token_type],arguments:[r.object(c.vaults_manager_id),r.object(e.vault_id),r.object(d.rewarder_manager_id),r.object(d.global_config_id),r.object(e.farming_pool),r.object(u.global_config_id),r.object(e.clmm_pool),o,a,r.pure.u64(e.amount_a),r.pure.u64(e.amount_b),r.pure.bool(e.fix_amount_a),r.object(Oe)]}),r}async handleDepositSwap(e,t,n){const{clmm_pool:i,integrate:s}=this._sdk.ClmmSDK.sdkOptions,{swap_amount:r,a2b:o,route_obj:a,stakeProtocol:c}=e.swapParams,d=o?e.coinTypeA:e.coinTypeB,u=tt.buildCoinForAmount(t,n,BigInt(r),d,!1),l=BigInt(u.tragetCoinAmount)-BigInt(r);let f=[];if(c){const C=this.requestStakeCoin(c,t,u.targetCoin),k=tt.buildCoinForAmount(t,u.remainCoins,BigInt(0),d,!1).targetCoin;f=o?[k,C]:[C,k]}else if(a){const C=tt.buildCoinForAmount(t,n,0n,o?e.coinTypeB:e.coinTypeA,!1),k=await tt.buildAggregatorSwapReturnCoins(this._sdk.ClmmSDK,a,u,C,"",e.slippage,t);f=o?[k.fromCoin,k.toCoin]:[k.toCoin,k.fromCoin],console.log("swapCoinInputTo.isMintZeroCoin: ",C),!C.isMintZeroCoin&&C.originalSplitedCoin===void 0&&t.transferObjects([C.targetCoin],t.pure.address(this._sdk.getVerifySenderAddress()))}else{const C=tt.buildCoinForAmount(t,n,0n,o?e.coinTypeB:e.coinTypeA,!1),k=ar.getDefaultSqrtPriceLimit(o).toString();f=t.moveCall({target:`${s.published_at}::${Vo}::swap`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(J(i).global_config_id),t.object(e.clmm_pool),o?u.targetCoin:C.targetCoin,o?C.targetCoin:u.targetCoin,t.pure.bool(o),t.pure.bool(!0),t.pure.u64(r),t.pure.u128(k),t.pure.bool(!1),t.object(Oe)]})}let p,m;const _=f[0],x=f[1];if(o){const C=BigInt(e.amount_a)-l;en.isSuiCoin(d)?(t.transferObjects([_],t.pure.address(this._sdk.getVerifySenderAddress())),p=t.splitCoins(t.gas,[t.pure.u64(e.amount_a)])):C>0n?p=this.buildCoinInput(t,u.remainCoins,d,C,_).coinInput:p=_,m=x}else{p=_;const C=BigInt(e.amount_b)-l;en.isSuiCoin(d)?(t.transferObjects([x],t.pure.address(this._sdk.getVerifySenderAddress())),m=t.splitCoins(t.gas,[t.pure.u64(e.amount_b)])):C>0n?m=this.buildCoinInput(t,u.remainCoins,d,C,x).coinInput:m=x}return{primaryCoinAInputs:p,primaryCoinBInputs:m}}async remove(e){console.log({params:e});const{vaults:t,frams:n}=this.sdk.sdkOptions,{clmm_pool:i,integrate:s}=this._sdk.ClmmSDK.sdkOptions,r=new xe,o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress(),e.lp_token_type),a=tt.buildCoinForAmount(r,o,BigInt(e.lp_token_amount),e.lp_token_type,!1).targetCoin,c=J(t),d=J(n),u=J(i),l=[e.coinTypeA,e.coinTypeB,e.lp_token_type],f=r.moveCall({target:`${t.published_at}::${TU}::remove`,typeArguments:l,arguments:[r.object(c.vaults_manager_id),r.object(e.vault_id),r.object(d.rewarder_manager_id),r.object(d.global_config_id),r.object(e.farming_pool),r.object(u.global_config_id),r.object(e.clmm_pool),a,r.pure.u64(e.lp_token_amount),r.pure.u64(e.min_amount_a),r.pure.u64(e.min_amount_b),r.object(Oe)]}),p=f[0],m=f[1];if(e.swapParams){const{a2b:_,swap_amount:x,route_obj:C}=e.swapParams;if(C){const k={targetCoin:_?p:m,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:""},T={targetCoin:_?m:p,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:""},S=await tt.buildAggregatorSwapReturnCoins(this._sdk.ClmmSDK,C,k,T,"",e.slippage,r),P=_?[S.fromCoin,S.toCoin]:[S.toCoin,S.fromCoin];_?r.mergeCoins(P[1],[m]):r.mergeCoins(P[0],[p]),r.transferObjects([...P],r.pure.address(this._sdk.getVerifySenderAddress()))}else{const k=ar.getDefaultSqrtPriceLimit(_).toString(),T=r.moveCall({target:`${s.published_at}::${Vo}::swap`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[r.object(J(i).global_config_id),r.object(e.clmm_pool),p,m,r.pure.bool(_),r.pure.bool(!0),r.pure.u64(x),r.pure.u128(k),r.pure.bool(!0),r.object(Oe)]});r.transferObjects([T[0],T[1]],r.pure.address(this._sdk.getVerifySenderAddress()))}}else r.transferObjects([p,m],r.pure.address(this._sdk.getVerifySenderAddress()));return r}async getVaultList(e="all"){const{vaults:t}=this._sdk.sdkOptions,n=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t.package_id}::vaults::CreateEvent`},e),i=n.data.map(o=>o.parsedJson.id),s=await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}),r=[];return s.forEach(o=>{const a=Xi.buildPool(o);a&&(a.stake_protocol=this.findStakeProtocol(a.position.coinTypeA,a.position.coinTypeB),this.savePoolToCache(a),r.push(a))}),n.data=r,n}findStakeProtocol(e,t){const{haedal:n,volo:i,aftermath:s}=J(this._sdk.sdkOptions.vaults),r=pe(e).full_address,o=pe(t).full_address;if(en.isSuiCoin(r)||en.isSuiCoin(o)){if(n){const a=pe(J(n).coin_type).full_address;if(r===a||o===a)return"Haedal"}if(i){const a=pe(J(i).coin_type).full_address;if(r===a||o===a)return"Volo"}if(s){const a=pe(J(s).coin_type).full_address;if(r===a||o===a)return"aftermath"}}}savePoolToCache(e){const t=`${e.id}_mirrorPool`;this.updateCache(t,e,Ye)}readPoolFromCache(e,t=!1){const n=`${e}_mirrorPool`;return this.getCache(n,t)}async calculateMaxAvailable(e){var _;const{integrate:t,simulationAccount:n}=this.sdk.ClmmSDK.sdkOptions,i=new xe,s=qe.tickIndexToSqrtPriceX64(e.lowerTick),r=qe.tickIndexToSqrtPriceX64(e.upperTick),o=new w(e.curSqrtPrice),a=Pn.getCoinAmountFromLiquidity(new w(e.input_amount),o,s,r,!1),c=[e.coinTypeA,e.coinTypeB];i.moveCall({target:`${t.published_at}::${Ts}::calculate_swap_result`,arguments:[i.object(e.clmm_pool),i.pure.bool(!0),i.pure.bool(!0),i.pure.u64(a.coinA.toString())],typeArguments:c}),i.moveCall({target:`${t.published_at}::${Ts}::calculate_swap_result`,arguments:[i.object(e.clmm_pool),i.pure.bool(!1),i.pure.bool(!0),i.pure.u64(a.coinB.toString())],typeArguments:c});const u=(_=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address})).events)==null?void 0:_.filter(x=>pe(x.type).name==="CalculatedSwapResultEvent");if(u.length===0)return null;const l=u[0].parsedJson.data,f=u[1].parsedJson.data,p=q(a.coinB.toString()).add(l.amount_out),m=q(a.coinA.toString()).add(f.amount_out);return{maxAmountB:p,maxAmountA:m}}async calculateRemoveSwapAmount(e,t){const n=Xi.calculateDepositRatio(e.lowerTick,e.upperTick,new w(e.curSqrtPrice)),i=e.fix_amount_a?n.ratioA:n.ratioB;console.log({fixRatio:i});let s=q(e.receive_amount).mul(i),r,o;if(e.removeLiquidity){const _=qe.tickIndexToSqrtPriceX64(e.lowerTick),x=qe.tickIndexToSqrtPriceX64(e.upperTick),C=Pn.getCoinAmountFromLiquidity(new w(e.removeLiquidity),new w(e.curSqrtPrice),_,x,!1);o=e.removeLiquidity,r=e.fix_amount_a?C.coinB.toString():C.coinA.toString(),s=e.fix_amount_a?q(C.coinA.toString()):q(C.coinB.toString())}else{const _=Pn.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,new w(s.toFixed(0)),e.fix_amount_a,!1,.2,new w(e.curSqrtPrice));o=_.liquidityAmount.toString(),r=e.fix_amount_a?_.coinAmountB.toString():_.coinAmountA.toString()}console.log({fixAmount:s,otherSideAmount:r});const a=!e.fix_amount_a,c=await this.clmmPreSwap(e.clmm_pool,e.curSqrtPrice,a,q(r),e.coinTypeA,e.coinTypeB,!0,e.priceSplitPoint,e.use_route,[{pool_id:e.clmm_pool,tick_lower:e.lowerTick,tick_upper:e.upperTick,delta_liquidity:Number(o),is_increase:!1}]);console.log({data:c,range:t});const d=s.add(c.amount_out),u=q(e.receive_amount),l=u.sub(d);if(console.log(`: ${d.toString()} , : ${e.receive_amount}, : ${l.toString()} `),(!e.removeLiquidity||e.removeLiquidity&&t)&&l.abs().greaterThan(u.mul(.01))){const _=d.lessThan(u);let x,C;t?_?(x=q(o),C=t.right):(x=t.left,C=q(o)):(x=q(_?o:0),C=q(_?e.maxLiquidity:o));const k=q(x).add(C).div(2).toFixed(0);if(console.log({left:x.toString(),right:C.toString(),midLiquidity:k.toString()}),!t||t&&t.count<15&&x<C)return await this.calculateRemoveSwapAmount({...e,removeLiquidity:k},{left:x,right:C,count:t?t.count+1:0})}const f=c.amount_in&&c.fee_amount?new w(c.amount_in).add(new w(c.fee_amount)).toString():c.amount_in,p=c.amount_out,{is_exceed:m}=c;return{swapInAmount:f,swapOutAmount:p,liquidity:o,is_exceed:m,routeObj:c.route_obj,request_id:e.request_id}}async calculateStakeDepositFixSui(e){const t=e.inputSuiAmount.mul(e.remainRate),n=e.inputSuiAmount.sub(e.swapSuiAmount),i=e.exchangeRate?e.exchangeRate:await this.getExchangeRateForStake(e.stakeProtocol,e.shouldRequestStake,Number(e.swapSuiAmount.toFixed(0))),s=e.swapSuiAmount.div(i).toFixed(0);console.log({swapAmount:e.swapSuiAmount.toString(),hasuiAmount:s.toString(),leftSuiAmount:e.leftSuiAmount.toString(),rightSuiAmount:e.rightSuiAmount.toString(),exchangeRate:i});const r=Pn.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,new w(s.toString()),!e.fixCoinA,!0,0,new w(e.curSqrtPrice)),o=e.fixCoinA?r.coinAmountA.toString():r.coinAmountB.toString(),a=q(n).sub(o);return console.log({useSuiAmount:o.toString(),hasuiAmount:s.toString(),remainSui:n.toString(),remainSuiLimit:t.toString(),actRemainSui:a.toString(),rebalanceCount:e.rebalanceCount}),a.greaterThanOrEqualTo(0)&&a.lessThanOrEqualTo(t)||e.rebalanceCount>12||e.leftSuiAmount.greaterThanOrEqualTo(e.rightSuiAmount)?{swapInAmount:e.swapSuiAmount.toFixed(0),swapOutAmount:s,afterSqrtPrice:e.curSqrtPrice,fixAmountA:!e.fixCoinA,is_exceed:!0,request_id:"",stake_protocol:e.stakeProtocol}:a.lessThan(0)?await this.calculateStakeDepositFixSui({...e,rightSuiAmount:e.swapSuiAmount,swapSuiAmount:e.swapSuiAmount.add(e.leftSuiAmount).div(2),exchangeRate:i,rebalanceCount:e.rebalanceCount+1}):a.greaterThan(t)?await this.calculateStakeDepositFixSui({...e,leftSuiAmount:e.swapSuiAmount,swapSuiAmount:e.swapSuiAmount.add(e.rightSuiAmount).div(2),exchangeRate:i,rebalanceCount:e.rebalanceCount+1}):null}async calculateDepositSwapAmount(e,t=!1){const n=qe.sqrtPriceX64ToTickIndex(new w(e.curSqrtPrice)),{ratioA:i,ratioB:s}=Xi.calculateDepositRatio(e.lowerTick,e.upperTick,new w(e.curSqrtPrice));console.log("1110 calculateDepositSwapAmount params: ",{...e,currentTick:n,adjustBestAmount:t});const r=q(e.input_amount).mul(e.fix_amount_a?i:s);let o=q(e.input_amount).sub(r);console.log("1110 ",{fixAmount:r.toString(),swapAmount:o.toString()});const a=e.fix_amount_a;if(o.toFixed(0)==="0")return null;if(e.stakeProtocol){if(en.isSuiCoin(e.coinTypeA)&&e.fix_amount_a||en.isSuiCoin(e.coinTypeB)&&!e.fix_amount_a){const z=await this.calculateStakeDepositFixSui({inputSuiAmount:q(e.input_amount),swapSuiAmount:o,lowerTick:e.lowerTick,upperTick:e.upperTick,curSqrtPrice:e.curSqrtPrice,remainRate:e.remainRate?e.remainRate:.01,fixCoinA:e.fix_amount_a,rebalanceCount:0,shouldRequestStake:e.shouldRequestStake,leftSuiAmount:a?new ie(o.toFixed(0)):new ie(0),rightSuiAmount:a?new ie(e.input_amount):new ie(o.toFixed(0)),stakeProtocol:e.stakeProtocol});return z?{...z,request_id:e.request_id}:null}throw Error("Only support fix sui")}const c=n<e.lowerTick||n>e.upperTick,d={clmm_pool:e.clmm_pool,curSqrtPrice:e.curSqrtPrice,a2b:a,amount_a:a?new ie(e.input_amount):new ie(0),amount_b:a?new ie(0):new ie(e.input_amount),amount_left:a?new ie(o.toFixed(0)):new ie(0),amount_right:a?new ie(e.input_amount):new ie(o.toFixed(0)),lowerTick:e.lowerTick,upperTick:e.upperTick,tick_spacing:2,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,useRoute:e.use_route,remainRate:e.remainRate?e.remainRate:.01,priceSplitPoint:e.priceSplitPoint},u=t&&n<=e.upperTick;let l=u?await this.calculateRebalance(d):await this.clmmPreSwap(e.clmm_pool,e.curSqrtPrice,a,o,e.coinTypeA,e.coinTypeB,!0,e.priceSplitPoint,e.use_route),f=l.after_sqrt_price;const p=qe.sqrtPriceX64ToTickIndex(new w(f));console.log("1110  : ",{...l,currentTick:p},null,2);const m=p<e.lowerTick||p>e.upperTick;if(c!==m&&!u&&p<=e.upperTick){console.log("1110 , swap: ");const{ratioA:z,ratioB:X}=Xi.calculateDepositRatio(e.lowerTick,e.upperTick,new w(f));console.log("1110 ",{newAfterRatioA:z,newAfterRatioB:X}),o=q(e.input_amount).sub(q(e.input_amount).mul(e.fix_amount_a?z:X)),d.amount_left=a?new ie(o.toFixed(0)):new ie(0),d.amount_right=a?new ie(e.input_amount):new ie(o.toFixed(0)),l=await this.calculateRebalance(d),f=l.after_sqrt_price;const G=qe.sqrtPriceX64ToTickIndex(new w(f));console.log("1110 : ",{lowerTick:e.lowerTick,upperTick:e.upperTick,currentTick:G,afterSqrtPrice:f})}const{ratioA:_,ratioB:x}=Xi.calculateDepositRatio(e.lowerTick,e.upperTick,new w(f));console.log("1110 1",{afterRatioA:_,afterRatioB:x,data:l});let C=x.div(_).sub(s.div(i)).greaterThan("0");const k=l.amount_in&&l.fee_amount?new w(l.amount_in).add(new w(l.fee_amount)).toString():l.amount_in,T=l.amount_out,{is_exceed:S}=l;if(p<e.lowerTick)C=!0;else if(p>e.upperTick)C=!1;else{const z=C===a?new w(q(e.input_amount).sub(k).toString()):new w(T),X=Pn.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,z,C,!0,0,new w(f)),G=X.coinAmountA,te=X.coinAmountB,N=q(e.fix_amount_a?G.toString():te.toString()).add(k);console.log("1110 :",{preAmountTotal:N.toString(),fixAmountA:C}),N.greaterThanOrEqualTo(e.input_amount)&&(C=!C)}const P={swapInAmount:k,swapOutAmount:T,afterSqrtPrice:f,is_exceed:S,fixAmountA:C,routeObj:l.route_obj,request_id:e.request_id,use_Haedal_stake:!1};return console.log(P),P}async calculateHaedalDepositSwapAmount(e){const t=qe.sqrtPriceX64ToTickIndex(new w(e.curSqrtPrice)),{ratioA:n,ratioB:i}=Xi.calculateDepositRatio(e.lowerTick,e.upperTick,new w(e.curSqrtPrice));console.log("1110 calculateDepositSwapAmount params: ",{...e,currentTick:t});const s=q(e.input_amount).mul(e.fix_amount_a?n:i),r=q(e.input_amount).sub(s);console.log("1110 ",{fixAmount:s.toString(),swapAmount:r.toString()});const o=e.fix_amount_a;if(r.toFixed(0)==="0")return null;if(e.stakeProtocol){if(en.isSuiCoin(e.coinTypeA)&&e.fix_amount_a||en.isSuiCoin(e.coinTypeB)&&!e.fix_amount_a){const a=await this.calculateStakeDepositFixSui({inputSuiAmount:q(e.input_amount),swapSuiAmount:r,lowerTick:e.lowerTick,upperTick:e.upperTick,curSqrtPrice:e.curSqrtPrice,remainRate:e.remainRate?e.remainRate:.01,fixCoinA:e.fix_amount_a,rebalanceCount:0,shouldRequestStake:e.shouldRequestStake,leftSuiAmount:o?new ie(r.toFixed(0)):new ie(0),rightSuiAmount:o?new ie(e.input_amount):new ie(r.toFixed(0)),stakeProtocol:e.stakeProtocol});return a?{...a,request_id:e.request_id}:null}throw Error("Only support fix sui")}return null}async calculateRebalance(e){const{clmm_pool:t,a2b:n,curSqrtPrice:i,amount_a:s,amount_b:r,lowerTick:o,upperTick:a,amount_left:c,amount_right:d,coinTypeA:u,coinTypeB:l,useRoute:f,priceSplitPoint:p,remainRate:m}=e,_=async(x,C,k)=>{const T=x.plus(C).div(2),S=await this.clmmPreSwap(t,i,n,T,u,l,!0,p,f);if(S.amount_out==="0")return S;if(S.after_sqrt_price||(S.after_sqrt_price=e.curSqrtPrice),S.is_exceed)return C=T,_(x,C,k+1);const P=n?s.sub(S.amount_in):s.add(S.amount_out),z=n?r.add(S.amount_out):r.sub(S.amount_in),X=qe.sqrtPriceX64ToTickIndex(new w(S.after_sqrt_price)),G=Pn.estLiquidityAndcoinAmountFromOneAmounts(o,a,new w(P.toString()),!0,!0,1,new w(S.after_sqrt_price)),te=new ie(G.coinAmountA.toString()),N=new ie(G.coinAmountB.toString());if(console.log("1110 swap ",{preRes:S,left:x.toString(),right:C.toString(),mid:T.toString(),afterPoolTickIndex:X,afterA:P.toString(),afterB:z.toString(),usedA:te.toString(),usedB:toString(),count:k}),te.toString()!==P.toString())throw new Error("usedA does not match afterA");if(z.lessThan(N))n?x=T:C=T;else{n?C=T:x=T;const R=z.sub(N),M=z.mul(m);if(console.log("1110 amount ",{remainingB:R.toString(),maxRemainingB:M.toString(),remainRate:m,count:k}),M.sub(R).greaterThanOrEqualTo(0))return console.log("break"),{...S,remainingB:R}}return x.greaterThan(C)||C.sub(x).lessThan(10)?S:_(x,C,k+1)};return c.greaterThanOrEqualTo(d)?_(new ie(0),c,0):_(c,d,0)}async clmmPreSwap(e,t,n,i,s,r,o,a,c,d){var C;if(c)try{const k=await this._sdk.ClmmSDK.RouterV2.getBestRouter(n?s:r,n?r:s,Number(i.toFixed(0)),o,a,"",void 0,void 0,!0,!1,d);if(!k.result)throw new Error("route unavailable");const{result:T}=k;let S=t;return T.splitPaths.forEach(P=>{const z=P.basePaths.find(X=>X.poolAddress.toLowerCase()===e.toLowerCase());z&&(S=z.afterSqrtPrice.toString())}),{amount_in:T.inputAmount.toString(),amount_out:T.outputAmount.toString(),after_sqrt_price:S,is_exceed:T.isExceed,route_obj:T}}catch{throw new Error("route unavailable")}const{integrate:u,simulationAccount:l}=this.sdk.ClmmSDK.sdkOptions,f=new xe,p=[s,r],m=[f.object(e),f.pure.bool(n),f.pure.bool(o),f.pure.u64(i.toFixed(0))];f.moveCall({target:`${u.published_at}::${Ts}::calculate_swap_result`,arguments:m,typeArguments:p});const x=(C=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:f,sender:l.address})).events)==null?void 0:C.filter(k=>pe(k.type).name==="CalculatedSwapResultEvent");return x.length===0?null:x[0].parsedJson.data}async getVault(e,t=!1){const n=this.readPoolFromCache(e,t);if(n)return n;try{const i=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}}),s=Xi.buildPool(i);if(s)return s.stake_protocol=this.findStakeProtocol(s.position.coinTypeA,s.position.coinTypeB),this.savePoolToCache(s),s}catch(i){console.log(i)}}async getVaultsConfigs(e=!1){const{package_id:t}=this._sdk.sdkOptions.vaults,n=`${t}_getMirrorPoolConfigs`,i=this.getCache(n,e);if(i!==void 0)return i;const s=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::vaults::InitEvent`})).data,r={admin_cap_id:"",vaults_manager_id:"",vaults_pool_handle:""};if(s.length>0){for(const o of s){const a=o.parsedJson;r.admin_cap_id=a.admin_cap_id,r.vaults_manager_id=a.manager_id;const c=await this._sdk.ClmmSDK.fullClient.getObject({id:r.vaults_manager_id,options:{showContent:!0}}),d=yt(c);r.vaults_pool_handle=d.vault_to_pool_maps.fields.id.id;break}this.updateCache(n,r,Ye)}return r}async getExchangeRateForStake(e,t,n){return e==="Haedal"?await z0.getExchangeRateForStake(this._sdk,t,n):e==="Volo"?await H0.getExchangeRateForStake(this._sdk,t,n):e==="aftermath"?await K0.getExchangeRateForStake(this._sdk,t,n):"0"}requestStakeCoin(e,t,n){if(e==="Haedal")return z0.requestStakeCoin(this._sdk,t,n);if(e==="Volo")return H0.requestStakeCoin(this._sdk,t,n);if(e==="aftermath")return K0.requestStakeCoin(this._sdk,t,n)}async requestStake(e,t,n){if(e==="Haedal")return await z0.requestStake(this._sdk,t,n);if(e==="Volo")return await H0.requestStake(this._sdk,t,n);if(e==="aftermath")return await K0.requestStake(this._sdk,t,n)}updateCache(e,t,n=os){let i=this._cache[e];i?(i.overdueTime=mn(n),i.value=t):i=new $i(t,mn(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},CU=class{constructor(e){We(this,"_sdk");We(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getLimitOrderTokenList(){const{limit_order:e}=this._sdk.sdkOptions,{token_list_handle:t}=J(e),{fullClient:n}=this._sdk.ClmmSDK,s=(await n.getDynamicFieldsByPage(t)).data.map(o=>o.objectId);return(await n.batchGetObjects(s,{showContent:!0})).map(o=>{const{fields:a}=o.data.content;return{coin_type:pe(a.name.fields.name).full_address,min_trade_amount:Number(a.value)}})}async getLimitOrderPoolList(){const{limit_order:e}=this._sdk.sdkOptions,{rate_orders_indexer_handle:t}=J(e),{fullClient:n}=this._sdk.ClmmSDK,s=(await n.getDynamicFieldsByPage(t)).data.map(o=>o.objectId);return(await n.batchGetObjects(s,{showContent:!0})).map(o=>{const{fields:a}=o.data.content.fields.value,c={pay_coin_type:pe(a.pay_coin.fields.name).full_address,target_coin_type:pe(a.target_coin.fields.name).full_address,indexer_id:a.indexer_id};return this._sdk.updateCache(`${c.pay_coin_type}_${c.target_coin_type}`,c.indexer_id),c})}async getPoolIndexerId(e,t){const n=this._sdk.getCache(`${e}_${t}`);try{if(n===void 0){const s=(await this.getLimitOrderPoolList()).filter(r=>pe(r.pay_coin_type).full_address===pe(e).full_address&&pe(r.target_coin_type).full_address===pe(t).full_address);if(s.length>0)return s[0].indexer_id}}catch{}return n}async getOwnerLimitOrderList(e,t){const{fullClient:n}=this._sdk.ClmmSDK,i={data:[],hasNextPage:!1};try{const s=await this.getUserIndexerHandle(e);if(!s)return i;const r=await n.getDynamicFieldsByPage(s,t);i.hasNextPage=r.hasNextPage,i.nextCursor=r.nextCursor;const o=r.data.map(d=>d.name.value),c=(await n.batchGetObjects(o,{showContent:!0})).map(d=>ed.buildLimitOrderInfo(d)).filter(d=>d!==void 0);i.data=c}catch(s){console.log("Error in getOwnerLimitOrderList:",s)}return i}async getLimitOrderConfigs(){const{package_id:e}=this._sdk.sdkOptions.limit_order,t={rate_orders_indexer_id:"",rate_orders_indexer_handle:"",global_config_id:"",token_list_handle:"",user_orders_indexer_id:"",user_orders_indexer_handle:""},n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::limit_order::InitEvent`})).data;if(n.length>0){const s=n[0].parsedJson;t.rate_orders_indexer_id=s.rate_orders_indexer_id,t.user_orders_indexer_id=s.user_orders_indexer_id;const r=await this._sdk.ClmmSDK.fullClient.getObject({id:t.rate_orders_indexer_id,options:{showContent:!0}});t.rate_orders_indexer_handle=yt(r).list.fields.id.id;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:t.user_orders_indexer_id,options:{showContent:!0}});t.user_orders_indexer_handle=yt(o).indexer.fields.id.id}const i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitFactoryEvent`})).data;if(i.length>0){const s=i[0].parsedJson;t.global_config_id=s.global_config_id;const r=await this._sdk.ClmmSDK.fullClient.getObject({id:t.global_config_id,options:{showContent:!0}}),o=yt(r);t.token_list_handle=o.token_white_list.fields.id.id}return t}async getLimitOrder(e){const{fullClient:t}=this._sdk.ClmmSDK;try{const n=await t.getObject({id:e,options:{showContent:!0}});return ed.buildLimitOrderInfo(n)}catch(n){console.log("Error in getLimitOrder:",n);return}}async getLimitOrderLogs(e){const{fullClient:t}=this._sdk.ClmmSDK;try{const n=await t.queryTransactionBlocks({filter:{ChangedObject:e},options:{showEvents:!0}}),i=[];return n.data.forEach(s=>{i.push(...ed.buildOrderLimitEvent(s,["OrderPlacedEvent","OrderCanceledEvent","FlashLoanEvent"]))}),i}catch(n){return console.log("Error in getLimitOrderLogs:",n),[]}}async getLimitOrderClaimLogs(e){const{fullClient:t}=this._sdk.ClmmSDK;try{const n=await t.queryTransactionBlocks({filter:{ChangedObject:e},options:{showEvents:!0}}),i=[];return n.data.forEach(s=>{i.push(...ed.buildOrderLimitEvent(s,["ClaimTargetCoinEvent"]))}),i}catch(n){return console.log("Error in getLimitOrderLogs:",n),[]}}buildRateOrdersIndexerType(e){const{limit_order:t}=this._sdk.sdkOptions;return af(`${t.package_id}::limit_order::RateOrdersIndexer`,[e.pay_coin_type,e.target_coin_type])}async placeLimitOrder(e){const{limit_order:t}=this._sdk.sdkOptions,{user_orders_indexer_id:n,global_config_id:i,rate_orders_indexer_id:s}=J(t),r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.pay_coin_type),o=new xe,a=await this.getPoolIndexerId(e.pay_coin_type,e.target_coin_type),c=tt.buildCoinForAmount(o,r,BigInt(e.pay_coin_amount),e.pay_coin_type,!1,!0);return o.moveCall({target:`${t.published_at}::limit_order::${a===void 0?"create_indexer_and_place_limit_order":"place_limit_order"}`,typeArguments:[e.pay_coin_type,e.target_coin_type],arguments:[o.object(i),a===void 0?o.object(s):o.object(a),o.object(n),c.targetCoin,o.pure.u128(ed.priceToRate(e.price,e.pay_decimal,e.target_decimal)),o.pure.u64(e.expired_ts),o.object(Oe)]}),o}async claimTargetCoin(e){const{limit_order:t}=this._sdk.sdkOptions,{global_config_id:n}=J(t),i=new xe;return i.moveCall({target:`${t.published_at}::limit_order::claim_target_coin`,typeArguments:[e.pay_coin_type,e.target_coin_type],arguments:[i.object(n),i.object(e.order_id)]}),i}async cancelOrdersByOwner(e){const{limit_order:t}=this._sdk.sdkOptions,{global_config_id:n}=J(t),i=new xe,s={};for(let r=0;r<e.length;r++){const o=e[r],a=await this.getPoolIndexerId(o.pay_coin_type,o.target_coin_type);if(a===void 0)throw Error("not found indexerId");s[o.order_id]=a}return e.forEach(r=>{i.moveCall({target:`${t.published_at}::limit_order::cancel_order_by_owner`,typeArguments:[r.pay_coin_type,r.target_coin_type],arguments:[i.object(n),i.object(s[r.order_id]),i.object(r.order_id),i.object(Oe)]})}),i}async getUserIndexerHandle(e){const{fullClient:t}=this._sdk.ClmmSDK,{limit_order:n}=this._sdk.sdkOptions;let i=this.getUserIndexerHandleByCache(e);if(i===void 0){const s=new xe;s.moveCall({target:`${n.published_at}::limit_order::get_orders_indexer_by_owner`,typeArguments:[],arguments:[s.pure.address(e),s.object(J(n).user_orders_indexer_id)]}),i=(await t.devInspectTransactionBlock({transactionBlock:s,sender:this._sdk.ClmmSDK.sdkOptions.simulationAccount.address})).events[0].parsedJson.orders_table_id,i&&this.saveUserIndexerHandleByCache(e,i)}return i}getUserIndexerHandleByCache(e){const t=`getUserIndexerHandleByCache_${e}`;return this.getCache(t)}saveUserIndexerHandleByCache(e,t){const n=`getUserIndexerHandleByCache_${e}`;return this.updateCache(n,t)}updateCache(e,t,n=Ye){let i=this._cache[e];i?(i.overdueTime=mn(n),i.value=t):i=new $i(t,mn(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},IU=class{constructor(e){We(this,"_sdk");We(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getFramsPoolList(e="all"){const{package_id:t}=this._sdk.sdkOptions.frams,n={data:[],hasNextPage:!1};try{const i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::pool::CreatePoolEvent`},e),s=i.data.map(r=>r.parsedJson.pool_id);if(n.hasNextPage=i.hasNextPage,n.nextCursor=i.nextCursor,s.length>0){const r=await this._sdk.ClmmSDK.fullClient.batchGetObjects(s,{showType:!0,showContent:!0});for(const o of r){const a=Va.buildFramsPool(o);a&&(a.rewarders=await this.getFramsRewarderConfig(a.clmm_pool_id,a.rewarders.map(c=>c.reward_coin)),n.data.push(a),this.updateCache(a.id,a))}}}catch(i){console.log("getFramsPoolList error ",i)}return n}async getFramsPool(e,t=!1){const n=this.getCache(e,t);if(n)return n;const i=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}}),s=Va.buildFramsPool(i.data);return s&&(s.rewarders=await this.getFramsRewarderConfig(s.clmm_pool_id,s.rewarders.map(r=>r.reward_coin)),this.updateCache(s.id,s)),s}async getFramsRewarderConfig(e,t,n=!1){const{frams:i}=this._sdk.sdkOptions,s=[];for(const r of t){const o=`getFramsRewarderConfig_${r}_${e}`,a=this.getCache(o,n);if(a)s.push(a);else try{const c=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:J(i).rewarder_manager_handle,name:{type:"0x1::type_name::TypeName",value:rT(r)}}),{fields:d}=c.data.content.fields.value.fields.value,u={reward_coin:r,last_reward_time:d.last_reward_time,emission_per_second:d.emission_per_second,total_allocate_point:d.total_allocate_point,allocate_point:""},l=d.pools.fields.id.id,f=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:l,name:{type:"0x2::object::ID",value:e}}),{allocate_point:p}=f.data.content.fields.value.fields.value.fields;u.allocate_point=p,this.updateCache(o,u),s.push(u)}catch(c){console.log(c)}}return s}async getOwnedFramsPositionNFTList(e,t=[],n=!1,i="all"){const{package_id:s}=this._sdk.sdkOptions.frams,r={data:[],hasNextPage:!1};let o={};const a=[],c=t.length>0,d=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{filter:{StructType:`${s}::pool::WrappedPositionNFT`},options:{showContent:!0}},i);r.hasNextPage=d.hasNextPage,r.nextCursor=d.nextCursor;for(const u of d.data){const l=Va.buildFramsPositionNFT(u);if(l)if(c){if(t.includes(l.pool_id)){a.push(l);let f=o[l.pool_id];f?f.push(l):f=[l],o[l.pool_id]=f}}else a.push(l)}if(n&&a.length>0){const u=await this.calculateFarmingRewards(a.map(l=>({pool_id:l.pool_id,position_nft_id:l.id,clmm_pool_id:l.clmm_pool_id})));c?(o={},a.forEach(l=>{u[l.id]&&(l.rewards=u[l.id]);let p=o[l.pool_id];p?p.push(l):p=[l],o[l.pool_id]=p})):a.forEach(l=>{u[l.id]&&(l.rewards=u[l.id])})}return c?o:(r.data=a,r)}async getFramsPositionNFT(e,t=!0){const n=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),i=Va.buildFramsPositionNFT(n);if(t&&i){const s=await this.calculateFarmingRewards([{pool_id:i.pool_id,position_nft_id:i.id}]);s[i.id]&&(i.rewards=s[i.id])}return i}async calculateFarmingRewards(e){var o;const{frams:t}=this._sdk.sdkOptions,n=new xe,{rewarder_manager_id:i,global_config_id:s}=J(t);e.forEach(a=>{n.moveCall({target:`${t.published_at}::router::accumulated_position_rewards`,typeArguments:[],arguments:[n.object(s),n.object(i),n.object(a.pool_id),n.pure.address(a.position_nft_id),n.object(Oe)]})});const r={};try{const a=await this._sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:n,sender:this.sdk.ClmmSDK.senderAddress});console.log({simulateRes:a});const c=(o=a==null?void 0:a.events)==null?void 0:o.filter(d=>pe(d.type).name==="AccumulatedPositionRewardsEvent");if(c&&c.length>0)for(let d=0;d<c.length;d+=1){const{parsedJson:u}=c[d],l=[];u.rewards.contents.forEach(f=>{l.push({rewarder_type:pe(f.key.name).full_address,rewarder_amount:f.value})}),r[u.wrapped_position_id]=l}}catch(a){console.log(a)}return r}depositPayload(e,t){const{frams:n}=this.sdk.sdkOptions;t=t||new xe;const{global_config_id:i,rewarder_manager_id:s}=J(n);return t.moveCall({target:`${n.published_at}::router::deposit`,typeArguments:[],arguments:[t.object(i),t.object(s),t.object(e.pool_id),t.object(e.clmm_position_id),t.object(Oe)]}),t}async withdrawPayload(e,t){const{frams:n}=this.sdk.sdkOptions,{global_config_id:i,rewarder_manager_id:s}=J(n);return t=t||new xe,t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id},t),t.moveCall({target:`${n.published_at}::router::withdraw`,typeArguments:[],arguments:[t.object(i),t.object(s),t.object(e.pool_id),t.object(e.position_nft_id),t.object(Oe)]}),t}async batchHarvestPayload(e,t){t=t||new xe;for(const n of e)await this.harvestPayload(n,t);return t}async batchHarvestAndClmmFeePayload(e,t){if(!di(this._sdk.ClmmSDK.senderAddress))throw new Error("this config sdk senderAddress is not set right");const n=new xe,i={},s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,null);for(const c of t)this.collectClmmFeeInternal(c,i,n,s),this.collectClmmRewardInternal(c,i,n,s);const{frams:r}=this.sdk.sdkOptions,{global_config_id:o,rewarder_manager_id:a}=J(r);for(const c of e){const d=await this.getFramsPool(c.pool_id,!1);if(d===void 0)throw Error(`not found ${c.pool_id}`);c.collect_fee&&this.collectFeeInternal(c,i,n,s),c.clmm_rewarder_types.length>0&&await this.collectRewardInternal(c,i,n,s),c.collect_frams_rewarder&&d.rewarders.forEach(u=>{n&&n.moveCall({target:`${r.published_at}::router::harvest`,typeArguments:[u.reward_coin],arguments:[n.object(o),n.object(a),n.object(c.pool_id),n.object(c.position_nft_id),n.object(Oe)]})})}return Object.keys(i).forEach(c=>{const d=i[c],u=d.originalSplitedCoin;(d.isMintZeroCoin||u&&(u==null?void 0:u.$kind)==="GasCoin")&&tt.buildTransferCoin(this._sdk.ClmmSDK,n,d.targetCoin,c,this._sdk.ClmmSDK.senderAddress)}),n}async collectRewardInternal(e,t,n,i){const s=[];e.clmm_rewarder_types.forEach(r=>{const o=jn(r);let a=t[r];a===void 0&&(a=tt.buildCoinForAmount(n,i,BigInt(0),o,!1),t[o]=a),s.push(a.targetCoin)}),await this.collectClmmRewardNoSendPayload(e,n)}collectFeeInternal(e,t,n,i){const{frams:s}=this.sdk.sdkOptions,{global_config_id:r}=J(s),{clmm_pool:o,integrate:a}=this.sdk.ClmmSDK.sdkOptions,c=J(o),d=jn(e.coinTypeA),u=jn(e.coinTypeB);let l=t[d];l===void 0&&(l=tt.buildCoinForAmount(n,i,BigInt(0),d,!1),t[d]=l);let f=t[u];f===void 0&&(f=tt.buildCoinForAmount(n,i,BigInt(0),u,!1),t[u]=f),n.moveCall({target:`${a.published_at}::stable_farming::collect_fee`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[n.object(r),n.object(c.global_config_id),n.object(e.clmm_pool_id),n.object(e.position_nft_id),l.targetCoin,f.targetCoin]})}collectClmmRewardInternal(e,t,n,i){const s=[];e.rewarder_coin_types.forEach(r=>{const o=jn(r);let a=t[r];a===void 0&&(a=tt.buildCoinForAmount(n,i,BigInt(0),o,!1),t[o]=a),s.push(a.targetCoin)}),this._sdk.ClmmSDK.Rewarder.createCollectRewarderNoSendPaylod(e,n,s)}collectClmmFeeInternal(e,t,n,i){if(e.collect_fee){const s=jn(e.coinTypeA),r=jn(e.coinTypeB);let o=t[s];o===void 0&&(o=tt.buildCoinForAmount(n,i,BigInt(0),s,!1),t[s]=o);let a=t[r];a===void 0&&(a=tt.buildCoinForAmount(n,i,BigInt(0),r,!1),t[r]=a),this._sdk.ClmmSDK.Position.createCollectFeeNoSendPaylod({pool_id:e.pool_id,pos_id:e.pos_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},n,o.targetCoin,a.targetCoin)}}async harvestPayload(e,t){const{frams:n}=this.sdk.sdkOptions;t=t||new xe;const i=await this.getFramsPool(e.pool_id,!1);if(i===void 0)throw Error(`not found ${e.pool_id}`);const{global_config_id:s,rewarder_manager_id:r}=J(n);if("collect_fee"in e&&(e.collect_fee||e.clmm_rewarder_types.length>0)){const a=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,a)}return i.rewarders.forEach(a=>{t&&t.moveCall({target:`${n.published_at}::router::harvest`,typeArguments:[a.reward_coin],arguments:[t.object(s),t.object(r),t.object(e.pool_id),t.object(e.position_nft_id),t.object(Oe)]})}),t}async claimFeeAndClmmReward(e){const t=new xe,n=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);return await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,n),t}async openPositionAddLiquidityStakePaylod(e){const t=new xe,{clmm_pool:n,integrate:i}=this._sdk.ClmmSDK.sdkOptions,s=J(n),r=t.moveCall({target:`${n.published_at}::pool::open_position`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(s.global_config_id),t.object(e.clmm_pool_id),t.pure.u32(Number(yi(BigInt(e.tick_lower)).toString())),t.pure.u32(Number(yi(BigInt(e.tick_upper)).toString()))]}),o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=tt.buildCoinForAmount(t,o,BigInt(e.amount_a),e.coinTypeA,!1),c=tt.buildCoinForAmount(t,o,BigInt(e.amount_b),e.coinTypeB,!1);t.moveCall({target:`${i.published_at}::${ko}::add_liquidity_by_fix_coin`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(s.global_config_id),t.object(e.clmm_pool_id),r,a.targetCoin,c.targetCoin,t.pure.u64(e.amount_a.toString()),t.pure.u64(e.amount_b.toString()),t.pure.bool(e.fix_amount_a),t.object(Oe)]});const{frams:d}=this.sdk.sdkOptions,{global_config_id:u,rewarder_manager_id:l}=J(d);return t.moveCall({target:`${d.published_at}::router::deposit`,typeArguments:[],arguments:[t.object(u),t.object(l),t.object(e.pool_id),r,t.object(Oe)]}),t}async addLiquidityPayload(e,t){const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new xe;const s=J(n),r=J(i),o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=tt.buildCoinForAmount(t,o,BigInt(e.amount_limit_a),e.coinTypeA,!1),c=tt.buildCoinForAmount(t,o,BigInt(e.amount_limit_b),e.coinTypeB,!1);if(e.collect_rewarder&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.collect_fee||e.clmm_rewarder_types.length>0){const d=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,d,a.remainCoins,c.remainCoins)}return t.moveCall({target:`${n.published_at}::router::add_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(s.global_config_id),t.object(r.global_config_id),t.object(s.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),a.targetCoin,c.targetCoin,t.pure.u64(e.amount_limit_a),t.pure.u64(e.amount_limit_b),t.pure.u128(e.delta_liquidity),t.object(Oe)]}),t}async addLiquidityFixCoinPayload(e,t){const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new xe;const s=J(n),r=J(i),o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=tt.buildCoinForAmount(t,o,BigInt(e.amount_a),e.coinTypeA,!1),c=tt.buildCoinForAmount(t,o,BigInt(e.amount_b),e.coinTypeB,!1);if(e.collect_rewarder&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.collect_fee||e.clmm_rewarder_types.length>0){const d=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,d,a.remainCoins,c.remainCoins)}return t.moveCall({target:`${n.published_at}::router::add_liquidity_fix_coin`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(s.global_config_id),t.object(r.global_config_id),t.object(s.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),a.targetCoin,c.targetCoin,t.pure.u64(e.amount_a.toString()),t.pure.u64(e.amount_b.toString()),t.pure.bool(e.fix_amount_a),t.object(Oe)]}),t}async removeLiquidityPayload(e,t){const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new xe;const s=J(n),r=J(i);if(e.collect_rewarder&&(!e.unstake||e.close_position)&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.clmm_rewarder_types.length>0){const o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:!1,clmm_rewarder_types:e.clmm_rewarder_types},t,o)}if(e.close_position){if(e.clmm_position_id===void 0)throw Error("close_position need clmm_position_id");t.moveCall({target:`${n.published_at}::router::close_position`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(s.global_config_id),t.object(s.rewarder_manager_id),t.object(e.pool_id),t.object(r.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object(Oe)]})}else t.moveCall({target:`${n.published_at}::router::remove_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(s.global_config_id),t.object(r.global_config_id),t.object(s.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.pure.u128(e.delta_liquidity),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object(Oe)]}),e.unstake&&this.withdrawPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id});return t}async buildCollectRewarderAndFeeParams(e,t,n,i,s){i===void 0&&(i=[...n]),s===void 0&&(s=[...n]);const r=jn(e.coinTypeA),o=jn(e.coinTypeB);e.collectFee&&this.collectFeePayload({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},t);const a=[];return e.clmm_rewarder_types.forEach(c=>{switch(jn(c)){case r:a.push(tt.buildCoinForAmount(t,i,BigInt(0),c,!1).targetCoin);break;case o:a.push(tt.buildCoinForAmount(t,s,BigInt(0),c,!1).targetCoin);break;default:a.push(tt.buildCoinForAmount(t,n,BigInt(0),c,!1).targetCoin);break}}),this.collectClmmRewardPayload({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,clmm_rewarder_types:e.clmm_rewarder_types,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,reward_coins:a},t),t}collectFeePayload(e,t){const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new xe;const s=J(n),r=J(i);return t.moveCall({target:`${n.published_at}::router::collect_fee`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(s.global_config_id),t.object(r.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id)]}),t}async collectClmmRewardPayload(e,t){var a;const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new xe;let s=e.reward_coins;if(e.clmm_rewarder_types.length>0&&s===void 0){s=[];const c=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e.clmm_rewarder_types.forEach(d=>{s.push(tt.buildCoinForAmount(t,c,BigInt(0),d,!1).targetCoin)})}const r=J(n),o=J(i);return(a=e.clmm_rewarder_types)==null||a.forEach((c,d)=>{t&&t.moveCall({target:`${n.published_at}::router::collect_clmm_reward`,typeArguments:[c,e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(o.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.object(o.global_vault_id),s[d],t.object(Oe)]})}),t}async collectClmmRewardNoSendPayload(e,t){var c;const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i,integrate:s}=this.sdk.ClmmSDK.sdkOptions;let r=e.reward_coins;if(e.clmm_rewarder_types.length>0&&r===void 0){r=[];const d=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e.clmm_rewarder_types.forEach(u=>{r.push(tt.buildCoinForAmount(t,d,BigInt(0),u,!1).targetCoin)})}const o=J(n),a=J(i);return(c=e.clmm_rewarder_types)==null||c.forEach((d,u)=>{t&&t.moveCall({target:`${s.published_at}::stable_farming::collect_clmm_reward`,typeArguments:[d,e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(a.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.object(a.global_vault_id),r[u],t.object(Oe)]})}),t}async getFrarmsConfigs(){const{package_id:e}=this._sdk.sdkOptions.frams,t={global_config_id:"",rewarder_manager_id:"",rewarder_manager_handle:""},n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitConfigEvent`})).data;if(n.length>0){const s=n[0].parsedJson;t.global_config_id=s.global_config_id,t.admin_cap_id=s.admin_cap_id}const i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::rewarder::InitRewarderManagerEvent`})).data;if(i.length>0){const s=i[0].parsedJson;t.rewarder_manager_id=s.id;const r=await this._sdk.ClmmSDK.fullClient.getObject({id:t.rewarder_manager_id,options:{showContent:!0}});t.rewarder_manager_handle=r.data.content.fields.rewarders.fields.id.id}return t}updateCache(e,t,n=Ye){let i=this._cache[e];i?(i.overdueTime=mn(n),i.value=t):i=new $i(t,mn(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},BU=class{constructor(e,t){We(this,"_cache",{});We(this,"_sdkOptions");We(this,"_launchpad");We(this,"_ido");We(this,"_xcetusModule");We(this,"_xtokenModule");We(this,"_boosterModule");We(this,"_makerModule");We(this,"_clmmSDK");We(this,"_liquidityStrategy");We(this,"_vaults");We(this,"_limitOrder");We(this,"_farmsModule");this._sdkOptions=e,this._clmmSDK=t,this._launchpad=new _U(this),this._ido=new kU(this),this._xcetusModule=new yU(this),this._xtokenModule=new SU(this),this._boosterModule=new mU(this),this._makerModule=new bU(this),this._vaults=new PU(this),this._limitOrder=new CU(this),this._farmsModule=new IU(this),this._liquidityStrategy=new EU(this),Qm(this._sdkOptions)}get ClmmSDK(){return this._clmmSDK}get sdkOptions(){return this._sdkOptions}get Launchpad(){return this._launchpad}get Ido(){return this._ido}get XToken(){return this._xtokenModule}get XCetusModule(){return this._xcetusModule}get BoosterModule(){return this._boosterModule}get MakerModule(){return this._makerModule}get LiquidityStrategy(){return this._liquidityStrategy}get Vaults(){return this._vaults}get LimitOrder(){return this._limitOrder}get Farms(){return this._farmsModule}getVerifySenderAddress(){const{senderAddress:e}=this.ClmmSDK;if(e.length===0||!or(e))throw Error("this clmm config sdk senderAddess is illegal");return e}updateCache(e,t,n=Ye){let i=this._cache[e];i?(i.overdueTime=mn(n),i.value=t):i=new $i(t,mn(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},hT=BU;const OU=ff("swapRouter",{state:()=>({swapRouterContract:{},isInitRouter:!0}),actions:{initSwapRouter(e,t,n){this.swapRouterContract=Ui(e),this.swapRouterContract.initSwapRouter(t,n),this.isInitRouter=!1,console.log(this.swapRouterContract,"===>this.swapRouterContract")}}});function $U(e){const t={fullRpcUrl:localStorage.getItem(`${e}-currentRpclocal4`)||Ue[e||"Sui"].fullRpcUrl,simulationAccount:Ue[e||"Sui"].simulationAccount,cetus_config:Ue[e||"Sui"].cetus_config,clmm_pool:Ue[e||"Sui"].clmm_pool,integrate:Ue[e||"Sui"].integrate,deepbook:Ue[e||"Sui"].deepbook,deepbook_endpoint_v2:Ue[e||"Sui"].deepbook_endpoint_v2,aggregatorUrl:Ue[e||"Sui"].aggregatorUrl,swapCountUrl:Ue[e||"Sui"].swapCountUrl},n={launchpad:Ue[e||"Sui"].launchpad,ido:Ue[e||"Sui"].ido,xcetus:Ue[e||"Sui"].xcetus,xcetus_dividends:Ue[e||"Sui"].xcetus_dividends,cetus_faucet:Ue[e||"Sui"].cetus_faucet,xtoken:Ue[e||"Sui"].xtoken,xtoken_dividends:Ue[e||"Sui"].xtoken_dividends,token_faucet:Ue[e||"Sui"].token_faucet,booster:Ue[e||"Sui"].booster,maker_bonus:Ue[e||"Sui"].maker_bonus,liquidity_stratefy:Ue[e||"Sui"].liquidity_stratefy,vaults:Ue[e||"Sui"].vaults,frams:Ue[e||"Sui"].frams};let i=new Bs(t);const s=new hT(n,i),r=Kp(),o=xo(()=>r),a=N2(),c=xo(()=>a),d=UU();xo(()=>d),Ty(()=>{o.value.address&&(i.senderAddress=o.value.address)});const u=xo(()=>o.value.walletName),{$notify:l}=vo(),f=D=>{const{$notify:W}=vo();W.success({key:D.hash+"loading",icon:Tt("img",{class:{"notify-icon":!0,"loading-animate":!0},src:c.value.theme=="default"?"/image/img-loading@2x.png":"/sui-image/img-loading.png"}),message:Tt("div",{class:"notification-title"},[Tt("span",{innerHTML:D.title},null)]),description:Tt("div",{class:"notification-title"},[Tt("div",{class:"notification-text",innerHTML:Mi.global.t("newAdd.confirmingTransaction")},null),Tt("a",{href:Ml(c.value.currentExplorer,"tx",window.encodeURIComponent(D.hash)),target:"_blank",innerHTML:Mi.global.t("common.viewTransaction")},null)]),duration:0,class:"ant-notification-copy ant-notification-swap"})},p=D=>{const{$notify:W}=vo();W.success({icon:Tt("svg",{class:{icon:!0},"aria-hidden":!0},[Tt("use",{"xlink:href":"#icon-icon-change1"})]),message:Tt("div",{class:"notification-title"},[Tt("span",{innerHTML:`${D.title} `+Mi.global.t("newAdd.success")},null)]),description:Tt("div",{class:"notification-title"},[Tt("div",{class:"notification-text",innerHTML:D.desc},null),Tt("a",{href:Ml(c.value.currentExplorer,"tx",window.encodeURIComponent(D.hash)),target:"_blank",innerHTML:Mi.global.t("common.viewTransaction")},null)]),duration:4.5,class:"ant-notification-copy ant-notification-swap"})},m=D=>{const{$notify:W}=vo();W.error({icon:Tt("svg",{class:{icon:!0},"aria-hidden":!0},[Tt("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Tt("div",{class:"notification-title"},[Tt("span",{innerHTML:`${D} `+Mi.global.t("newAdd.failed")},null)]),description:Mi.global.t("newAdd.somethingWrong"),duration:4.5,class:"ant-notification-copy ant-notification-error"})},_=async(D,W=!1)=>{var ne,he,re,me,je,Ee;const{$notify:Y}=vo();try{let _e={};if(console.log("watchTransaction params: ",D),!D.res||!((ne=D==null?void 0:D.res)!=null&&ne.digest)||!((he=D==null?void 0:D.res)!=null&&he.effects)||W&&!((re=D==null?void 0:D.res)!=null&&re.events)){const le=await Lo(2e3);_e=await i.Pool.getSuiTransactionResponse(D.hash),console.log("0503###watchTransaction###res###",_e)}else _e=D.res;if(console.log("0411###watchTransaction###res###",_e),console.log(D,"====>params"),((je=(me=_e==null?void 0:_e.effects)==null?void 0:me.status)==null?void 0:je.status)==="success"){Y.close(D.hash+"loading"),D.isOnlyToken?_e.balanceChanges.forEach(ge=>{var Ie,Ve,ze;ge.coinType==((Ie=D==null?void 0:D.isOnlyTokenInfo)==null?void 0:Ie.address)&&p({...D,desc:`Deposit ${new ie(ge.amount.replace("-","")).div(new ie(Math.pow(10,(Ve=D==null?void 0:D.isOnlyTokenInfo)==null?void 0:Ve.decimals)))} ${(ze=D==null?void 0:D.isOnlyTokenInfo)==null?void 0:ze.symbol}`})}):p(D);const le={walletAddress:r.address,chainName:"Sui",...D,..._e,date:new Date().getTime()+6048e5};if(W)if(console.log("0222###watchTransaction###isGetNftInfo true###res####",_e),_e.events){const Ie=_e.events.filter(Ve=>Ve.type.includes("OpenPositionEvent"));return{status:!0,nftInfo:Ie[0]&&((Ee=Ie[0])==null?void 0:Ee.parsedJson),res:_e}}else return{status:!0,nftInfo:_e.effects.events,res:_e};return!0}else{if(_e&&_e.effects&&_e.effects.status&&_e.effects.status.status!=="success")return Y.close(D.hash+"loading"),m(D.title),!1;setTimeout(()=>_(D),3e3)}}catch(_e){return console.log("watchTransaction###error###",_e),Y.close(D.hash+"loading"),Y.error({icon:Tt("svg",{class:{icon:!0},"aria-hidden":!0},[Tt("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Tt("div",{class:"notification-title"},[Tt("span",{innerHTML:`${D.title} Failed`},null)]),duration:4.5,description:"Something went wrong",class:"ant-notification-copy ant-notification-error"}),!0}},x=async D=>{var ne,he,re,me,je,Ee;D.setSenderIfNotSet(o.value.address);const W=await D.build({client:i.fullClient}),Y=await i.fullClient.dryRunTransactionBlock({transactionBlock:W});if(console.log("0503###simulate###simulateRes###",Y),((he=(ne=Y==null?void 0:Y.effects)==null?void 0:ne.status)==null?void 0:he.status)==="failure"){console.log("0424###simulateRes###error###",(me=(re=Y==null?void 0:Y.effects)==null?void 0:re.status)==null?void 0:me.error);const _e=(Ee=(je=Y==null?void 0:Y.effects)==null?void 0:je.status)==null?void 0:Ee.error,le=/\("(.+?)"\)/g,ge=_e.match(le),Ie=ge&&ge[0]&&ge[0].match(/\w+/g)||"",Ve=ge&&ge[1]&&ge[1].match(/\w+/g)||"",ze=_e.substr(_e.lastIndexOf("}, ")+3),He=ze&&ze.split(")"),it=He&&He[0]||"";throw Ie&&Ie[0]==="factory"&&Ve&&Ve[0]=="create_pool_internal"&&it==="1"?(l.error({icon:Tt("svg",{class:{icon:!0},"aria-hidden":!0},[Tt("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Tt("div",{class:"notification-title"},[Tt("span",{innerHTML:"Transaction "+Mi.global.t("newAdd.failed")},null)]),description:"Pool is existed",duration:4.5,class:"ant-notification-copy ant-notification-error"}),new Error("pool is existed")):(l.error({icon:Tt("svg",{class:{icon:!0},"aria-hidden":!0},[Tt("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Tt("div",{class:"notification-title"},[Tt("span",{innerHTML:"Transaction "+Mi.global.t("newAdd.failed")},null)]),description:_e,duration:4.5,class:"ant-notification-copy ant-notification-error"}),new Error(_e))}else return Y},C=D=>({transactionBlock:D,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),k=async(D,W=!1)=>{var ne,he;await Lo(2e3);const Y=await i.Pool.getSuiTransactionResponse(D.hash);if(((he=(ne=Y==null?void 0:Y.effects)==null?void 0:ne.status)==null?void 0:he.status)==="success"){l.close(D.hash+"loading"),p(D);const re={walletAddress:r.address,chainName:"Sui",...D,...Y,date:new Date().getTime()+6048e5};a.setTransactionList(re)}},T=async D=>{try{r.setLoading(!0);const W=await i.getOwnerCoinAssets(D),Y={};return W.forEach(ne=>{var he,re;if(ne&&ne.coinAddress){const me=ne?ne.balance.toString():"0",je={...ne,balance:me},Ee=ne.coinAddress;Y[Ee]={...ne,balance:(he=Y[ne.coinAddress])!=null&&he.balance?q(me).plus(Y[ne.coinAddress].balance).toString():me,objects:(re=Y[ne.coinAddress])!=null&&re.objects?[...Y[ne.coinAddress].objects,je]:[je]}}}),console.log("0411###assets###",Y),r.setAssets(Y),r.setLoading(!1),Y}catch(W){console.log(" ~ file: useSui.ts:373 ~ getAccount ~ error:",W),r.setLoading(!1)}},S=async()=>{try{console.log("getTokenList sdk: ",i);const D=await i.CetusConfig.getCoinConfigs();console.log("0907###tokenList###",D);let W=[],Y=[],ne=[];return D.forEach(he=>{let re=he;if(he.address.includes("::sui::SUI")){const me=pe(he.address).full_address;re={...re,address:me}}re.coin_priority?Y.push(re):ne.push({...re,coin_priority:"0"})}),Y=Y.sort((he,re)=>Number(he==null?void 0:he.coin_priority)<Number(re==null?void 0:re.coin_priority)?1:-1),ne=ne.sort((he,re)=>he.symbol.charCodeAt(0)-re.symbol.charCodeAt(0)),W=[...Y,...ne],console.log("0517###haveCoinPriority###",Y),console.log("0517###notHaveCoinPriority###",ne),console.log("0517###tokenList###",W),W}catch(D){return console.log("0517###getTokenList###error###",D),[]}},P=async D=>{var Y,ne,he,re,me,je,Ee,_e;if(console.log(" ~ file: useSui.ts:419 ~ getSuiTokenObj ~ isForcerefresh:",D),!D){console.log(" ~ file: useSui.ts:419 ~ getSuiTokenObj ~ ");let le;try{if(le=JSON.parse(localStorage.getItem("SuiTokenObj")||"{}"),console.log(" ~ file: useSui.ts:425 ~ getSuiTokenObj ~ getLocalTokenObj:",le),le&&!ql(le))return le}catch(ge){console.log(" ~ file: useSui.ts:2225 ~ getSuiTokenObj ~ error:",ge)}}let W={};try{const le=await $fetch(`${Ue.Sui.api}/v2/sui/coins_info`);(Y=le==null?void 0:le.data)!=null&&Y.list&&((he=(ne=le==null?void 0:le.data)==null?void 0:ne.list)==null?void 0:he.length)>0&&(W=Object.fromEntries((re=le==null?void 0:le.data)==null?void 0:re.list.map((ge,Ie)=>[ge.coin_type,{...ge,address:ge.coin_type,isSelfBuilt:!ge.is_trusted,logoURI:ge.logo_url}])),W["0x2::sui::SUI"]={...W["0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],address:"0x2::sui::SUI"},console.log(" ~ file: useSui.ts:437 ~ getLpList ~ tokenObj:",W),z(W))}catch{try{const ge=await $fetch("/data/coins_info.json");(me=ge==null?void 0:ge.data)!=null&&me.list&&((Ee=(je=ge==null?void 0:ge.data)==null?void 0:je.list)==null?void 0:Ee.length)>0&&(W=Object.fromEntries((_e=ge==null?void 0:ge.data)==null?void 0:_e.list.map((Ie,Ve)=>[Ie.coin_type,{...Ie,address:Ie.coin_type,isSelfBuilt:!Ie.is_trusted,logoURI:Ie.logo_url}])),W["0x2::sui::SUI"]={...W["0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],address:"0x2::sui::SUI"},z(W),console.log(" ~ file: useSui.ts:449 ~ getLpList ~ tokenObj:",W)),console.log(" ~ file: useSui.ts:451 ~ getSuiTokenObj ~ coinList:",ge)}catch(ge){console.log(" ~ file: useSui.ts:452 ~ getSuiTokenObj ~ e:",ge);const Ie=await S();W=Object.fromEntries(Ie.map((Ve,ze)=>[Ve.address,Ve]))}}return W},z=D=>{try{console.log(" ~ file: useSui.ts:612 ~ //lpList.forEach ~ tokenObj:",D),localStorage.setItem("SuiTokenObj",JSON.stringify(D))}catch(W){console.log(" ~ file: useSui.ts:602 ~ //lpList.forEach ~ error:",W)}},X=async(D,W=!1)=>{var ne;const Y=[];e=="Sui"&&(t.fullRpcUrl=Ue.Sui.officialRpcUrl,i=new Bs(t));try{const he=await i.Pool.getPools([],0,9999);let re=await P();if(ql(re)){const _e=await S();re={},_e.forEach(le=>{re[le.address]=le})}const me=await i.CetusConfig.getClmmPoolConfigs(),je={};me.forEach(_e=>{je[_e.address]=_e});let Ee={};try{const le=(e=="Aptos"?await fetch(`${Ue.Aptos.api}/v2/sui/swap/count`).then(ge=>ge.json()):await fetch(`${Ue.Sui.api}/v2/sui/swap/count/v3`).then(ge=>ge.json())).data;Ee=Object.fromEntries(le.pools.map(ge=>[ge.swap_account,{...ge,apr_7day:e=="Aptos"?ge.apr_7day:ge.apr_24h}]))}catch{}for(let _e=0;_e<he.length;_e++){const le=he[_e];if(je[le.poolAddress]||!je[le.poolAddress]){let ge=re[le.coinTypeA],Ie=re[le.coinTypeB];ge||(ge=(await i.CetusConfig.getTokenListByCoinTypes([le.coinTypeA]))[le.coinTypeA]),Ie||(Ie=(await i.CetusConfig.getTokenListByCoinTypes([le.coinTypeB]))[le.coinTypeB]);let Ve=!1;pi(ge.address,Ie.address)&&(Ve=!0);const ze=Ee[le.poolAddress]?((ne=Ee[le.poolAddress])==null?void 0:ne.is_forward)===!1:Ve;let He={};je[le.poolAddress]&&(He={...He,...je[le.poolAddress]}),He={...He,address:le.poolAddress,coinA:ge,coinB:Ie,coin_a_address:le.coinTypeA,coin_b_address:le.coinTypeB,decimals:6,fee:Number(le.fee_rate)/1e6,tickSpacing:le.tickSpacing,symbol:`${ge==null?void 0:ge.symbol}-${Ie==null?void 0:Ie.symbol}`,name:`${ge==null?void 0:ge.symbol}-${Ie==null?void 0:Ie.symbol}`,needReverse:ze,is_pause:le.is_pause,isPoolsInfoError:!0},(!D||!D[le.coinTypeA]&&!D[le.coinTypeB])&&Y.push(He)}}return console.log("0426###getLpListFromContract###result###",Y),Y}catch(he){console.log("getLpListFromContract###err##",he)}},G=async(D,W)=>{var Y,ne,he,re,me,je,Ee,_e;try{if(!W){const He=localStorage.getItem("SuiLpList"),it=new Date().getTime(),gt=He?JSON.parse(He):null;if(gt&&Number(gt==null?void 0:gt.expiration)>it&&(gt!=null&&gt.data)&&((Y=gt==null?void 0:gt.data)==null?void 0:Y.length)>0)return gt==null?void 0:gt.data}let le=await P();const ge=[],Ie=await fetch(`${Ue[e||"Sui"].api}/v2/sui/pools_info/v3`).then(He=>He.json());if(!((ne=Ie==null?void 0:Ie.data)!=null&&ne.lp_list)){const He=await X(D);if(He)return He}console.log(D,"===>newFilterCoinsObj");const Ve=((he=Ie==null?void 0:Ie.data)==null?void 0:he.lp_list)||[];console.log("0420getLpList###lpList###",Ve),console.log("0420getLpList###res###",Ie);let ze=!1;for(let He=0;He<Ve.length;He++){const it=Ve[He],gt=(it==null?void 0:it.is_forward)===!1,ot=[];if(it.is_display_rewarder){const B=(je=(me=(re=it==null?void 0:it.object)==null?void 0:re.rewarder_manager)==null?void 0:me.fields)==null?void 0:je.rewarders;B&&B.forEach(I=>{var $,ee,Z,oe,Se,Me;const g=new ie(($=I==null?void 0:I.fields)==null?void 0:$.emissions_per_second).mul(ie.pow(2,-64));ot.push({coinAddress:pe((oe=(Z=(ee=I==null?void 0:I.fields)==null?void 0:ee.reward_coin)==null?void 0:Z.fields)==null?void 0:oe.name).source_address,emissionsEveryDay:Math.floor(g.toNumber()*60*60*24),emissions_per_second:(Se=I==null?void 0:I.fields)==null?void 0:Se.emissions_per_second,growth_global:(Me=I==null?void 0:I.fields)==null?void 0:Me.growth_global})})}let nn=le[it.coin_a_address];nn||(nn=(await i.CetusConfig.getTokenListByCoinTypes([it.coin_a_address]))[it.coin_a_address],le={...le,[it.coin_a_address]:nn},ze=!0);let v=le[it.coin_b_address];v||(v=(await i.CetusConfig.getTokenListByCoinTypes([it.coin_b_address]))[it.coin_b_address],le={...le,[it.coin_b_address]:v},ze=!0),(!D||!D[it.coin_a_address]&&!D[it.coin_b_address]&&!D[pe(it.coin_a_address).full_address]&&!D[pe(it.coin_b_address).full_address])&&ge.push({...it,coinA:{...nn,address:Bu(nn.address)},coinB:{...v,address:Bu(v.address)},token_a:{...nn,address:Bu(nn.address)},token_b:{...v,address:Bu(v.address)},rewarderInfo:ot,needReverse:gt,is_pause:(Ee=it==null?void 0:it.object)==null?void 0:Ee.is_pause})}ze&&z(le),console.log("0420getLpList result: ",ge);try{const He={expiration:new Date().getTime()+3e5,data:ge};localStorage.setItem("SuiLpList",JSON.stringify(He))}catch(He){console.log("0420getLpList localStorage setItem Error: ",He)}return console.log("0420getLpList return result: ",ge),ge}catch(le){console.log("0420getLpList Error: ",le);try{const Ie=localStorage.getItem("SuiLpList"),Ve=Ie?JSON.parse(Ie):null;if(Ve&&(Ve!=null&&Ve.data)&&((_e=Ve==null?void 0:Ve.data)==null?void 0:_e.length)>0)return Ve==null?void 0:Ve.data}catch(Ie){console.log(" ~ file: useSui.ts:676 ~ getLpList ~ err get local data error:",Ie)}const ge=await X(D);if(console.log(ge,"result===>"),ge)return ge}},te=async(D=[])=>{const Y=await new Bs(t).Pool.getPools(D,0,1e3);if(D.length===0){const ne={};return Y.forEach(he=>{ne[he.poolAddress]={...he,rate:q(he.fee_rate).div(Math.pow(10,6)).toString()}}),ne}else return Y},N=async(D=[])=>{console.log(D,"getPoolslist##");const Y=await new Bs(t).Pool.getPools(D,0,1e3);console.log("0330###getPools###pools###",Y);const ne={};return Y.forEach(he=>{ne[he.poolAddress]={...he,rate:q(he.fee_rate).div(Math.pow(10,6)).toString()}}),ne},R=async D=>await new Bs(t).Pool.getPool(D),M=D=>{const W=new zb;return W.moveCall({target:`${Ue[e||"Sui"].faucet.faucet_display}::${D.transactionModule}::faucet`,typeArguments:[],arguments:[W.pure(D.suplyID)]}),C(W)},A=D=>{var Y,ne,he,re,me;let W;return D!=null&&D.digest?W={hash:D==null?void 0:D.digest,status:(ne=(Y=D==null?void 0:D.effects)==null?void 0:Y.status)==null?void 0:ne.status,res:D}:D!=null&&D.effects&&(W={hash:(he=D==null?void 0:D.effects)==null?void 0:he.transactionDigest,status:(me=(re=D==null?void 0:D.effects)==null?void 0:re.status)==null?void 0:me.status,res:D}),W},h=async D=>{try{const{data:W}=await fetch(`${Ue.Sui.api}/v2/sui/ticks?address=${D.poolAddress}&limit=512&orderBy=index`).then(Y=>Y.json());if(W&&W.list&&W.list.length>0)return{list:W.list.map(ne=>({objectId:ne.object_id,index:ne.index,sqrtPrice:new w(ne.sqrt_price),liquidityNet:new w(ne.liquidity_net),liquidityGross:new w(ne.liquidity_gross),feeGrowthOutsideA:new w(ne.fee_growth_outside_a),feeGrowthOutsideB:new w(ne.fee_growth_outside_b),rewardersGrowthOutside:ne.rewards_growth_outside})),address:W.address};{const Y=await i.Pool.fetchTicks({pool_id:D.poolAddress,coinTypeA:D.coinTypeA,coinTypeB:D.coinTypeB});return console.log("0330###getTicks####sui####",Y),{list:Y,address:D.poolAddress}}}catch(W){console.log("0330###getTicks Error###",W);const Y=await i.Pool.fetchTicks({pool_id:D.poolAddress,coinTypeA:D.coinTypeA,coinTypeB:D.coinTypeB});return console.log("0330###getTicks####sui####",Y),{list:Y,address:D.poolAddress}}},y=async(D,W,Y,ne)=>await RR(D,W,Y,ne),E=D=>{var ge,Ie;const{pool:W,position:Y,roundUp:ne}=D,he=Number(Y.tick_lower_index),re=Number(Y.tick_upper_index),me=qe.tickIndexToSqrtPriceX64(he),je=qe.tickIndexToSqrtPriceX64(re),Ee=Pn.getCoinAmountFromLiquidity(new w(Y.liquidity),new w(W.current_sqrt_price),me,je,ne),_e=En(Ee.coinA.toString(),(ge=W==null?void 0:W.coinA)==null?void 0:ge.decimals),le=En(Ee.coinB.toString(),(Ie=W==null?void 0:W.coinB)==null?void 0:Ie.decimals);return{coinaAmount:_e,coinbAmount:le}},U=D=>{const{tokenA:W,tokenB:Y,lowerTick:ne,upperTick:he,coinAmount:re,iscoinA:me,roundUp:je,slippage:Ee,curSqrtPrice:_e}=D;console.log(_e.toString(),D,"==>params");const le=Pn.estLiquidityAndcoinAmountFromOneAmounts(ne,he,re,me,je,Ee,_e),ge=W.decimals,Ie=Y.decimals,{tokenMaxA:Ve,tokenMaxB:ze,liquidityAmount:He,coinAmountA:it,coinAmountB:gt}=le;return console.log(Ve.toString(),"===>tokenMaxA.toString()"),console.log(ze.toString(),"===>tokenMaxB.toString()"),console.log(it.toString(),"===>coinAmountA.toString()"),console.log(gt.toString(),"===>coinAmountB.toString()"),console.log(le,"result===>"),console.log(le.liquidityAmount.toString(),"liquidityAmount===>"),console.log(ge,"===>coinaDecimals"),{tokenMaxAOrigin:Ve.toString(),tokenMaxBOrigin:ze.toString(),tokenMaxA:En(it.toString(),ge),tokenMaxB:En(gt.toString(),Ie),liquidityAmount:He}},L=async D=>{var I,g,$,ee;const{pool:W,amount:Y,fix_amount_a:ne,roundUp:he,tick_lower:re,tick_upper:me,index:je,slippage:Ee,coinTypeC:_e,coinTypeD:le,coinTypeE:ge,curSqrtPrice:Ie,positionInfo:Ve,farmPoolInfo:ze}=D,He=await R(W.poolAddress);console.log(D.curSqrtPrice.toString(),"###getAddLiquidityTransactionPayload 732 params"),console.log(He,"###newPool");const it=ne?si(Y,W.token_a.decimals):si(Y,W.token_b.decimals),gt=qe.sqrtPriceX64ToTickIndex(new w(He.current_sqrt_price));console.log(He.current_sqrt_price.toString(),D.curSqrtPrice.toString(),"curSqrtPrice##610");let ot,nn;if(gt>=re&&gt<=me){const Z=Pn.estLiquidityAndcoinAmountFromOneAmounts(re,me,new w(it.toString()),ne,he,Ee,new w(He.current_sqrt_price));console.log(Z,Z.tokenMaxA.toNumber(),Z.tokenMaxB.toNumber(),"===>preAddResult.coinAmountA.toNumber()"),ot=ne?it.toNumber():Z.tokenMaxA.toNumber(),nn=ne?Z.tokenMaxB.toNumber():it.toNumber()}else gt>me?(ot=0,nn=it.toNumber()):gt<re&&(ot=it.toNumber(),nn=0);console.log(D,"===>params742"),console.log("0330###createAddLiquidityTransactionPayload###params###",{coinTypeA:W.token_a.address,coinTypeB:W.token_b.address,pool_id:W.poolAddress,tick_lower:re<-443636?-443636:re,tick_upper:me>443636?443636:me,fix_amount_a:ne,amount_a:ot,amount_b:nn,is_open:!je,pos_id:je});let v,B;if(((I=Ve==null?void 0:Ve.value)==null?void 0:I.positionSource)==="farming"){console.log("0103 getAddLiquidityTransactionPayload positionInfo: ",Ve);const Z=[];_e&&Z.push(_e),le&&Z.push(le),ge&&Z.push(ge);const oe={pool_id:(g=Ve==null?void 0:Ve.value)==null?void 0:g.pool_id,coinTypeA:W.token_a.address,coinTypeB:W.token_b.address,position_nft_id:($=Ve==null?void 0:Ve.value)==null?void 0:$.id,clmm_pool_id:(ee=Ve==null?void 0:Ve.value)==null?void 0:ee.clmm_pool_id,amount_a:ot,amount_b:nn,collect_fee:!0,collect_rewarder:!1,fix_amount_a:ne,clmm_rewarder_types:Z};v=await s.Farms.addLiquidityFixCoinPayload(oe),B={action:"FarmingIncreaseLiquidity",txbParams:oe}}else if(je){const Z=[];_e&&Z.push(_e),le&&Z.push(le),ge&&Z.push(ge);const oe={coinTypeA:W.token_a.address,coinTypeB:W.token_b.address,pool_id:W.poolAddress,tick_lower:re<-443636?-443636:re,tick_upper:me>443636?443636:me,fix_amount_a:ne,amount_a:ot,amount_b:nn,is_open:!je,pos_id:je,collect_fee:D.collect_fee,rewarder_coin_types:[...Z],slippage:Ee},Se={slippage:Ee,curSqrtPrice:Ie};v=await i.Position.createAddLiquidityFixTokenPayload(oe,Se),B={action:"IncreaseLiquidity",txbParams:{parameter:oe,gasEstimateArg:Se}}}else if(console.log(ze,"farmPoolInfo##"),ze){const Z={pool_id:ze.id,coinTypeA:W.token_a.address,coinTypeB:W.token_b.address,clmm_pool_id:ze.clmm_pool_id,amount_a:ot.toString(),amount_b:nn.toString(),fix_amount_a:ne,tick_lower:re,tick_upper:me};v=await s.Farms.openPositionAddLiquidityStakePaylod(Z),B={action:"FarmingOpenAndAddLiquidity",txbParams:Z}}else{const Z={coinTypeA:W.token_a.address,coinTypeB:W.token_b.address,pool_id:W.poolAddress,tick_lower:re<-443636?-443636:re,tick_upper:me>443636?443636:me,fix_amount_a:ne,amount_a:ot,amount_b:nn,is_open:!je,pos_id:"",collect_fee:!1,rewarder_coin_types:[],slippage:Ee},oe={slippage:Ee,curSqrtPrice:Ie};v=await i.Position.createAddLiquidityFixTokenPayload(Z,oe),B={action:"OpenAndAddLiquidity",txbParams:{parameter:Z,gasEstimateArg:oe}}}return console.log("0330###sui##getAddLiquidityTransactionPayload###",v),{txb:C(v),payloadParams:B}},H=(D,W,Y)=>{const ne=qe.sqrtPriceX64ToPrice(new w(D.current_sqrt_price),D.coinA.decimals,D.coinB.decimals).toNumber(),he=Y?ne:1/ne,re=q(he).minus(q(W)).div(q(he)).mul(100);return re.gt(100)?100:(console.log(re.toString(),"1143"),Number(Rn(re.abs().toString(),2)))},Q=async D=>{const{pool:W,a2b:Y,byAmountIn:ne,amount:he}=D;console.log("0221###sui###preSwap###",D);const re=W.coinA.decimals,me=W.coinB.decimals,je=W!=null&&W.current_sqrt_price?W:await R(W.address);let Ee;Y&&ne||!Y&&!ne?Ee=si(he,re):Ee=si(he,me);const _e=await i.Swap.preswap({pool:je,current_sqrt_price:je.current_sqrt_price,coinTypeA:je.coinTypeA,coinTypeB:je.coinTypeB,decimalsA:re,decimalsB:me,a2b:Y,byAmountIn:ne,amount:Ee.toString()});return console.log("0221###sui###preSwap###result###",_e),{..._e,estimatedAmountIn:To(En(_e.estimatedAmountIn.toString(),Y?re:me),Y?re:me),estimatedAmountOut:To(En(_e.estimatedAmountOut.toString(),Y?me:re),Y?me:re),priceImpactPct:Rn(_e.priceImpactPct,2)}},O=async D=>{console.log("0412###getSwapTransactionPayload###params###",D);const{pool:W,a2b:Y,byAmountIn:ne,amount:he,slippage:re}=D,me=W.poolAddress,je=W.token_a.decimals,Ee=W.token_b.decimals;let _e;Y&&ne||!Y&&!ne?_e=si(he,je):_e=si(he,Ee);const le=await i.Swap.preswap({pool:W,current_sqrt_price:W.current_sqrt_price,coinTypeA:W.coinTypeA,coinTypeB:W.coinTypeB,decimalsA:je,decimalsB:Ee,a2b:Y,by_amount_in:ne,amount:_e.toString()}),ge=q(le.estimatedAmountOut.toString()),Ie=q(le.estimatedAmountIn.toString()),Ve=ne?ge.sub(ge.mul(re)):Ie.add(Ie.mul(re));console.log("0221###sui###swap##params123456###",{pool_id:me,a2b:le.aToB,by_amount_in:le.byAmountIn,amount:le.amount.toString(),amount_limit:Rn(Ve.toString(),0)||"",coinTypeA:W.token_a.address,coinTypeB:W.token_b.address});const ze=await i.Swap.createSwapTransactionPayload({pool_id:me,a2b:le.aToB,by_amount_in:le.byAmountIn,amount:le.amount.toString(),amount_limit:Rn(Ve.toString(),0)||"",coinTypeA:W.token_a.address,coinTypeB:W.token_b.address});return console.log("0221###sui###swap##tx###",ze),C(ze)},b=async(D,W)=>{const Y=new Bs(t);console.log(W,"pools982");const ne=Object.values(W).map(re=>re.address);return console.log(ne,"#poolList"),await Y.Position.getPositionList(D,ne)},j=async(D,W,Y,ne="")=>{var re;console.log(" ~ file: useSui.ts:1141 ~ getPositionInfo ~ pool:",D);let he;try{return he=await new Bs(t).Position.getPosition((re=D==null?void 0:D.position_manager)==null?void 0:re.positions_handle,ne),{...he,tokenName:Y,collectionName:W}}catch(me){String(me).indexOf("Position not exists. Get Position error")>-1&&setTimeout(()=>{console.log(" ~ file: useSui.ts:1158 ~ setTimeout ~ pool:",D),j(D,W,Y,ne)},5e3)}},Ae=async D=>{const Y=await new Bs(t).Position.getPositionById(D);return console.log("0503###getPositionById###result###",Y),Y},ue=async(D,W)=>(console.log(D,W,"getTickDataByIndex"),await i.Pool.getTickDataByIndex(D,W)),ke=async D=>{const{pool:W,position:Y,tickLowerData:ne,tickUpperData:he}=D,re=await R(W.poolAddress),me=XR({clmmpool:re,position:Y,tickLower:ne,tickUpper:he}),je=En(me.feeOwedA.toString(),W.token_a.decimals),Ee=En(me.feeOwedB.toString(),W.token_b.decimals);return{feeOwedA:Number(je)>99999999999||Number(je)<0?"0":je,feeOwedB:Number(Ee)>99999999999||Number(Ee)<0?"0":Ee}},mt=async D=>{const{poolAddress:W,pos:Y,positionHandle:ne}=D;return await i.Rewarder.posRewardersAmount(W,ne,Y)},st=D=>D.pos_object_id,kt=async D=>{const{pool:W,coinTypeA:Y,coinTypeB:ne,coinTypeC:he,coinTypeD:re,coinTypeE:me,position:je,delta_liquidity:Ee,rewards_num:_e,positionInfo:le}=D;console.log("getRemoveLiquidityTransactionPayload params##",D);const ge=await R(W.poolAddress),Ie={...W,...ge},Ve=Number(je.tick_lower_index),ze=Number(je.tick_upper_index),He=qe.tickIndexToSqrtPriceX64(Ve),it=qe.tickIndexToSqrtPriceX64(ze),gt=Pn.getCoinAmountFromLiquidity(Ee,new w(Ie.current_sqrt_price),He,it,!0),ot=q(gt.coinA.toString()).mul(q(1-D.slippage)),nn=q(gt.coinB.toString()).mul(q(1-D.slippage)),B=[Y,ne,he,re,me].filter(ee=>!!ee);let I;console.log("0331###remove###params###",{coin_types:B,min_amount_a:Rn(ot.toString(),0),min_amount_b:Rn(nn.toString(),0),pool_id:W.poolAddress,pos_id:D.position.pos_object_id}),console.log("0331###delta_liquidity.toString()###",Ee.toString()),console.log("0331###position.liquidity###",je.liquidity);const g=[];he&&g.push(he),re&&g.push(re),me&&g.push(me);let $;if((le==null?void 0:le.positionSource)==="farming")if(Ee.toString()===je.liquidity){const ee={pool_id:le==null?void 0:le.pool_id,coinTypeA:Y,coinTypeB:ne,position_nft_id:le==null?void 0:le.id,clmm_pool_id:le==null?void 0:le.clmm_pool_id,min_amount_a:Rn(ot.toString(),0)||"",min_amount_b:Rn(nn.toString(),0)||"",collect_fee:!0,collect_rewarder:!0,clmm_rewarder_types:[...g],delta_liquidity:le==null?void 0:le.liquidity,unstake:!0,close_position:!0,clmm_position_id:D.position.clmm_position_id};console.log("getRemoveLiquidityTransactionPayload FarmingRemoveLiquidity parameter: ",ee),I=await s.Farms.removeLiquidityPayload(ee),$={action:"FarmingRemoveLiquidity",txbParams:ee},console.log("getRemoveLiquidityTransactionPayload FarmingRemoveLiquidity result: ",I)}else{const ee={pool_id:le==null?void 0:le.pool_id,coinTypeA:Y,coinTypeB:ne,position_nft_id:le==null?void 0:le.id,clmm_pool_id:le==null?void 0:le.clmm_pool_id,min_amount_a:Rn(ot.toString(),0)||"",min_amount_b:Rn(nn.toString(),0)||"",collect_rewarder:!1,clmm_rewarder_types:[...g],delta_liquidity:Ee.toString(),unstake:!1,close_position:!1};console.log("getRemoveLiquidityTransactionPayload FarmingDecreaseLiquidity parameter: ",ee),I=await s.Farms.removeLiquidityPayload(ee),$={action:"FarmingDecreaseLiquidity",txbParams:ee},console.log("getRemoveLiquidityTransactionPayload FarmingDecreaseLiquidity result: ",I)}else if(Ee.toString()===je.liquidity){const ee={coinTypeA:Y,coinTypeB:ne,min_amount_a:Rn(ot.toString(),0)||"",min_amount_b:Rn(nn.toString(),0)||"",rewarder_coin_types:[...g],pool_id:W.poolAddress,pos_id:D.position.pos_object_id,collect_fee:!0};console.log("getRemoveLiquidityTransactionPayload RemoveLiquidity parameter: ",ee),I=await i.Position.closePositionTransactionPayload(ee),$={action:"RemoveLiquidity",txbParams:ee},console.log("getRemoveLiquidityTransactionPayload RemoveLiquidity result: ",I)}else{console.log(g,"==>rewarder_coin_types");const ee={coinTypeA:Y,coinTypeB:ne,delta_liquidity:Ee.toString(),min_amount_a:Rn(ot.toString(),0)||"",min_amount_b:Rn(nn.toString(),0)||"",pool_id:W.poolAddress,pos_id:D.position.pos_object_id,collect_fee:!0,rewarder_coin_types:[...g]};console.log("getRemoveLiquidityTransactionPayload DecreaseLiquidity parameter: ",ee),I=await i.Position.removeLiquidityTransactionPayload(ee),$={action:"DecreaseLiquidity",txbParams:ee},console.log("getRemoveLiquidityTransactionPayload DecreaseLiquidity result: ",I)}return console.log("0331###remove###result####",I),{txb:C(I),payloadParams:$}},ut=async(D,W)=>{const Y=[];D.coinTypeC&&Y.push(D.coinTypeC),D.coinTypeD&&Y.push(D.coinTypeD),D.coinTypeE&&Y.push(D.coinTypeE),console.log("0423###getCollectRewarderTransactionPayload###params###",{pool_id:D.pool_address,pos_id:D.pos_index,rewarder_coin_types:[...Y],coinTypeA:D.coinTypeA,coinTypeB:D.coinTypeB,collect_fee:!1}),console.log(W,"##getCollectRewarderTransactionPayload");let ne,he;if(W.positionSource=="farming"){const re={coinTypeA:W.coinTypeA,coinTypeB:W.coinTypeB,clmm_pool_id:W.clmm_pool_id,position_nft_id:W.id,clmm_rewarder_types:Y,collect_fee:!0};ne=await s.Farms.claimFeeAndClmmReward(re),he={action:"FarmingClaimFeeAndReward",txbParams:re}}else{const re={pool_id:D.pool_address,pos_id:D.pos_index,rewarder_coin_types:[...Y],coinTypeA:D.coinTypeA,coinTypeB:D.coinTypeB,collect_fee:D.collect_fee};ne=await i.Rewarder.collectRewarderTransactionPayload(re),he={action:"ClaimFeeAndMining",txbParams:re}}return{txb:C(ne),payloadParams:he}},ft=async D=>{console.log("1130###getCollectFeeTransactionPayload###params",{pool:D.pool.poolAddress,coinTypeA:D.pool.token_a.address,coinTypeB:D.pool.token_b.address,pos_index:D.position.index});const W=await i.Position.collectFeeTransactionPayload({coinTypeA:D.pool.token_a.address,coinTypeB:D.pool.token_b.address,pool_id:D.pool.poolAddress,pos_id:D.position.pos_object_id});return console.log("1130###getCollectFeeTransactionPayload###result##",W),C(W)},Et=async()=>await i.Pool.getPoolImmutables(),pi=(D,W)=>!!of(Mn(D),Mn(W)),se=async D=>{const{coinTypeA:W,coinTypeB:Y,decimalsA:ne,decimalsB:he,amountA:re,amountB:me,minPrice:je,maxPrice:Ee,fix_amount_a:_e,tick_spacing:le,slippage:ge,price:Ie}=D;console.log(D,"###getCreatPoolTransactionPayload 1201");const Ve=qe.priceToSqrtPriceX64(q(Ie),ne,he);console.log("0407###getCreatPoolTransactionPayload###currentSqrtPrice###",Ve);const ze=qe.priceToTickIndex(q(Ie),ne,he);console.log("0407###getCreatPoolTransactionPayload###currentTickIndex###",ze);let He,it;if(je==="0"&&Ee==="")He=Qc.getMinIndex(Number(le)),it=Qc.getMaxIndex(Number(le));else{const g=Number(je)==0?-443636:qe.priceToTickIndex(q(je),ne,he),$=qe.priceToTickIndex(q(Ee),ne,he);He=dl(g,Number(le)),it=dl($,Number(le))}console.log("0407###getCreatPoolTransactionPayload###tick_lower###",He),console.log("0407###getCreatPoolTransactionPayload###tick_upper###",it);const gt=_e?si(re,ne):si(me,he);let ot,nn;qe.tickIndexToSqrtPriceX64(He),qe.tickIndexToSqrtPriceX64(it);let v;ze>=He&&ze<=it?(v=Pn.estLiquidityAndcoinAmountFromOneAmounts(He,it,new w(gt.toString()),_e,!0,ge,Ve),ot=_e?gt.toString():v.tokenMaxA.toString(),nn=_e?v.tokenMaxB.toString():gt.toString()):ze>it?(ot="0",nn=q(me).mul(q(Math.pow(10,he))).toString()):ze<He&&(ot=q(re).mul(q(Math.pow(10,ne))).toString(),nn="0"),He<-443636&&(He=Qc.getMinIndex(Number(le))),it>443636&&(it=He=Qc.getMaxIndex(Number(le))),console.log("0407####create pool params###",JSON.stringify({tick_spacing:le,initialize_sqrt_price:Ve.toString(),uri:"",fix_amount_a:_e,amount_a:ot,amount_b:nn,tick_lower:He,tick_upper:it,coinTypeA:W,coinTypeB:Y}));const B=await i.Pool.creatPoolTransactionPayload({tick_spacing:le,initialize_sqrt_price:Ve.toString(),uri:"",fix_amount_a:_e,amount_a:ot,amount_b:nn,slippage:ge,tick_lower:He,tick_upper:it,coinTypeA:W,coinTypeB:Y});console.log("0412####result###",B);const I=await x(B);return console.log("0412####simulateRes###",I),C(B)},fe=D=>{const W=D.split("0x");return"0x"+(W[1][0]==="0"?W[1].substring(1):W[1])},Re=async D=>{const W=localStorage.getItem("coinMatedataLocal"),Y=W?JSON.parse(W):{};try{let ne=[];const he=[];if(D&&typeof D=="string"){if(Y[fe(D)])return[Y[fe(D)]];ne=[fe(D)]}else{const Ee=[];if(D.forEach(_e=>{Y[fe(_e)]?he.push(Y[fe(_e)]):Ee.push(fe(_e))}),Ee.length===0)return he;ne=[...Ee]}const re=await i.CetusConfig.getTokenListByCoinTypes(ne);console.log("0714###getTokenListByCoinType###result###",re);const me=[],je={};return Object.values(re).forEach(Ee=>{const _e={...Ee,address:pe(Ee.address).full_address};me.push(_e),je[Ee.address]=_e}),console.log("0714###getTokenListByCoinType###formatResult###",me),localStorage.setItem("coinMatedataLocal",JSON.stringify({...Y,...je})),[...me,...he]}catch{return[]}},Pe=async(D,W)=>{if(!W||W=="undefined")return null;let Y=null;console.log("getTokenBySymbol###tokensObj###",D,W);for(const ne in D){const he=D[ne];console.log(" ~ file: useSui.ts:1714 ~ getTokenBySymbol ~ tokensObj:",D),console.log(" ~ file: useSui.ts:1713 ~ getTokenBySymbol ~ item:",he),console.log(" ~ file: useSui.ts:1714 ~ getTokenBySymbol ~ key:",ne),((he==null?void 0:he.address)||(he==null?void 0:he.coin_type)).toUpperCase()===String(pe(W).full_address).toUpperCase()&&(Y=he);break}if(!Y){const ne=W.split("0x");console.log(" ~ getTokenBySymbol ~ address:",W);const he="0x"+(ne[1][0]==="0"?ne[1].substring(1):ne[1]),re=await i.CetusConfig.getTokenListByCoinTypes([he]);re&&re[he]&&(Y={...re[he],isSelfBuilt:!0,address:pe(W).full_address})}return Y},Le=async D=>{const{a2b:W,byAmountIn:Y,amount:ne,decimalsA:he,decimalsB:re}=D;let me;W&&Y||!W&&!Y?me=si(ne,he):me=si(ne,re);const je=await i.Swap.preSwapWithMultiPool({poolAddresses:D.poolAddresses,coinTypeA:D.coinTypeA,coinTypeB:D.coinTypeB,a2b:W,byAmountIn:Y,amount:me});return{...je,estimatedAmountIn:To(En(je.estimatedAmountIn.toString(),W?he:re),W?he:re),estimatedAmountOut:To(En(je.estimatedAmountOut.toString(),W?re:he),W?re:he)}},at=async(D,W)=>{console.log(D,"===>paths"),console.log(W,"===>coins"),i.Router.loadGraph(W,D),console.log(i,"sdk===>1826")},Je=async(D,W)=>{const Y=new Bs(t);Y.senderAddress=o.value.address,console.log(D,"===>createTxParams");const ne=await Y.getOwnerCoinAssets((Y==null?void 0:Y.senderAddress)||o.value.address);console.log(ne,"===>allCoinAsset");const he=await tt.buildAggregatorSwapTransaction(Y,D,ne,"",W),re={action:"Swap",txbParams:{createTxParams:D,slippage:W}};return{txb:C(he),payloadParams:re}},rt=async D=>{const W=await i.Rewarder.fetchPosRewardersAmount([D]),Y=W&&W[0];return Y&&Y.rewarderAmountOwed},Yt=OU(),ht=xo(()=>Yt);return{setTransations:k,showTransitionPending:f,showTransitionSuccess:p,showTransitionError:m,watchTransaction:_,getAccount:T,getTokenList:S,getLpList:G,getPools:te,getPool:R,mintCoin:M,handleTx:A,TickUtil:Qc,TickMath:qe,getNearestTickByTick:dl,getTicks:h,getEstPositionAPRWithMulti:y,getCoinAmountFromLiquidity:E,estLiquidityAndcoinAmountFromOneAmounts:U,getAddLiquidityTransactionPayload:L,getTickDataFromUrlData:OR,getPriceImpactPct:H,preSwap:Q,getSwapTransactionPayload:O,getPositionList:b,getTickDataByIndex:ue,getCollectFeesQuote:ke,getPosRewardersAmount:mt,getNftHash:st,getPositionInfo:j,getRemoveLiquidityTransactionPayload:kt,getCollectRewarderTransactionPayload:ut,getCollectFeeTransactionPayload:ft,getPoolImmutables:Et,estimateLiquidityForCoinA:gd,estimateLiquidityForCoinB:md,getCreatPoolTransactionPayload:se,getTokenListByCoinType:Re,getIsSortedSymbols:pi,getPositionById:Ae,d:q,getTokenBySymbol:Pe,preSwapWithMultiPool:Le,initSwapRouter:at,getSwapRouter:async(D,W,Y,ne,he,re="",me,je)=>{const Ee=D.value.decimals;console.log(" ~ file: useSui.ts:1847 ~ getSwapRouter ~ fromCoin:",D.value.decimals);const _e=W.value.decimals,le=localStorage.getItem("swapOrderSplit"),ge=localStorage.getItem("includeRoutes"),Ie=le=="open"||!le,Ve=ge=="open";let ze;console.log(JSON.stringify({fromCoin:D.value.adress,toCoin:W.value.adress,amount:Y,senderAddress:i.senderAddress,orderSplit:Ie,externalRouter:Ve,lpChanges:je}),"######### ~ file: useSui.ts:1906");try{if(ze=await i.RouterV2.getBestRouterByServer(D.value.address,W.value.address,Y,ne,i.senderAddress,Ie,Ve,je),console.log(" ~ file: useSui.ts:1878 ~ getSwapRouter ~ res:",ze.isTimeout),ze!=null&&ze.isTimeout)throw console.log(" ~ file: useSui.ts:1881 ~ getSwapRouter ~ res?.isTimeout:",ze==null?void 0:ze.isTimeout),new Error("router timeout")}catch(He){console.log(" ~ file: useSui.ts:1885 ~ getSwapRouter ~ error:",He);try{console.log(" ~ file: useSui.ts:2014 ~ getSwapRouter ~ byAmountIn:",ne),console.log(" ~ file: useSui.ts:2014 ~ getSwapRouter ~ amount:",Y),console.log(" ~ file: useSui.ts:2014 ~ getSwapRouter ~ toCoin:",W),console.log(" ~ file: useSui.ts:2014 ~ getSwapRouter ~ fromCoin:",D),console.log(" ~ file: useSui.ts:2018 ~ getTokenList ~ swapWithMultiPool:",me),ze=await ht.value.swapRouterContract.getBestRouterByRpc(D,W,Y,ne,he,re,me),console.log(" ~ file: useSui.ts:2014 ~ getSwapRouter ~ res:",ze)}catch(it){console.log(" ~ file: useSui.ts:1864 ~ getSwapRouter ~ error:",it)}}return{amountIn:En(ze.inputAmount.toString(),Ee),amountOut:En(ze.outputAmount.toString(),_e),...ze}},getSwapRouterPayload:Je,fetchPosRewardersAmount:rt,estCoinAmountsFromTotalAmount:D=>{const{lowerTick:W,upperTick:Y,decimalsA:ne,decimalsB:he,curSqrtPrice:re,totalAmount:me,tokenPriceA:je,tokenPriceB:Ee}=D;console.log(JSON.stringify({...D,curSqrtPrice:re.toString()}),"params===>");const _e=Pn.estCoinAmountsFromTotalAmount(W,Y,re,me,je,Ee);console.log("coinAmounts: ",_e);const le=Dl(_e.amountA.toFixed(ne,ie.ROUND_UP).toString(),ne),ge=Dl(_e.amountB.toFixed(he,ie.ROUND_UP).toString(),he),Ie={coinA:new w(le),coinB:new w(ge)};return{amountA:En(le.toString(),ne),amountB:En(ge.toString(),he),tokenAmountsInfo:Ie}},getCreateAddLiquidityPayload:async D=>{const{curSqrtPrice:W,tickLower:Y,tickUpper:ne,tokenAmounts:he,pool:re,slippage:me}=D;console.log(JSON.stringify(D),"####getCreateAddLiquidityPayload 1593");const je=Pn.estimateLiquidityFromcoinAmounts(W,Y,ne,he),Ee=new ie(he.coinA.toString()).mul(1+me),_e=new ie(he.coinB.toString()).mul(1+me),le={coinTypeA:re.coinTypeA,coinTypeB:re.coinTypeB,pool_id:re.address,tick_lower:Y,tick_upper:ne,delta_liquidity:je.toString(),max_amount_a:ie.ceil(Ee).toString(),max_amount_b:ie.ceil(_e).toString(),pos_id:"",rewarder_coin_types:[],collect_fee:!1};console.log(JSON.stringify(le),"==>addLiquidityPayloadParams");const ge=await i.Position.createAddLiquidityPayload(le);return C(ge)},calculateDepositRatioFixTokenA:(D,W,Y)=>Pn.calculateDepositRatioFixTokenA(D,W,Y),signAndExecuteTransactionBlock:async(D,W,Y)=>{var he;if(((D==null?void 0:D.name)==="MSafe Wallet"||u.value==="MSafe Wallet")&&!Y)throw a.setIsNotSupportMsafeError(!0),Error("The current operation does not support msafe wallet");a.setIsNotSupportMsafeError(!1),console.log("0319 signAndExecuteTransactionBlock###wallet###",D),console.log("0327 signAndExecuteTransactionBlock###payload###",W),console.log("0327 signAndExecuteTransactionBlock###payloadParams###",Y),console.log("0319 signAndExecuteTransactionBlock###sdk.senderAddress###",i.senderAddress);let ne;try{W.transactionBlock.setSender(i.senderAddress),console.log("0321 signAndExecuteTransactionBlock start build: ",new Date().getTime());const me=await W.transactionBlock.build({client:i.fullClient});console.log("0321 signAndExecuteTransactionBlock buildTxb: ",me),ne=zb.from(me),console.log("0321 signAndExecuteTransactionBlock start end: ",new Date().getTime()),console.log("0327 signAndExecuteTransactionBlock###newTxb###",ne)}catch(re){console.log("0319 signAndExecuteTransactionBlock error: ",re)}if(console.log("signAndExecuteTransactionBlock wallet?.name: ",D==null?void 0:D.name),console.log("signAndExecuteTransactionBlock currentWalletName.value: ",u.value),(D==null?void 0:D.name)==="MSafe Wallet"||u.value==="MSafe Wallet"){console.log("signAndExecuteTransactionBlock MSafe Wallet Start");const re=(he=D.getState())==null?void 0:he.currentAccount;console.log("signAndExecuteTransactionBlock MSafe Wallet account: ",re);const me=W.transactionBlock;return me.setSender(i.senderAddress),console.log("signAndExecuteTransactionBlock MSafe Wallet txb: ",me),await D.signAndExecuteTransactionBlock({transactionBlock:me,account:re,chain:"sui:mainnet",action:Y==null?void 0:Y.action,txbParams:Y==null?void 0:Y.txbParams})}else{if(u.value==="Fox")return await D.signAndExecuteTransactionBlock(W);if(u.value==="Fewcha")return await D.signAndExecuteTransactionBlock(W);console.log("0321 signAndExecuteTransactionBlock newTxb1: ",ne);const{transactionBlockBytes:re,signature:me}=await D.signTransactionBlock({transactionBlock:ne});return await i.fullClient.executeTransactionBlock({transactionBlock:re,signature:me,options:W.options})}},getAllPosition:async(D,W=[])=>{const Y=await i.fullClient.getOwnedObjectsByPage(D,{options:{showType:!0,showContent:!0,showOwner:!0,showDisplay:!0},filter:{MatchAny:[{Package:i.sdkOptions.clmm_pool.package_id},{StructType:`${Ue[e||"Sui"].frams.package_id}::pool::WrappedPositionNFT`}]}});console.log(Y,"ownerRes:");const ne=()=>`${i.sdkOptions.clmm_pool.package_id}::position::Position`,he=()=>`${Ue[e||"Sui"].frams.package_id}::pool::WrappedPositionNFT`,re=[],me=[],je=W.length>0;for(const Ee of Y.data){const _e=pe(Ee.data.type);if(_e.full_address===ne()){const le=ea(Ee);je?W.includes(le.pool)&&re.push(le):re.push(le)}if(_e.full_address===he()){const le=Va.buildFramsPositionNFT(Ee);je?W.includes(le.clmm_pool_id)&&me.push(le):me.push(le)}}return console.log("farmsPosition",me),console.log("clmmPosition:",JSON.stringify(re)),{clmmPosition:re,farmsPosition:me}},getFullClient:()=>{const D=new Bs(t);return console.log("getFullClient defaultNetworkOptions: ",t),console.log("getFullClient sdk: ",D),D.fullClient},getPoolsObj:N,getBestRouterByServer:async(D,W,Y,ne,he,re="",me,je)=>{const Ee=D.value.decimals,_e=W.value.decimals,le=localStorage.getItem("swapOrderSplit"),ge=localStorage.getItem("includeRoutes"),Ie=le=="open"||!le,Ve=ge=="open";let ze;try{return ze=await i.RouterV2.getBestRouterByServer(D.value.address,W.value.address,Y,ne,i.senderAddress,Ie,Ve,je),console.log(" ~ file: useSui.ts:1947 ~ getLpListFromContract ~ res:",ze),{...ze,amountIn:En(ze.inputAmount.toString(),Ee),amountOut:En(ze.outputAmount.toString(),_e)}}catch(He){console.log(" ~ file: useSui.ts:1960 ~ getLpListFromContract ~ e:",He)}},getBestRouterByRpc:async(D,W,Y,ne,he,re="",me,je)=>{let Ee;try{return Ee=await i.RouterV2.getBestRouterByRpc(D.value.address,W.value.address,Y,ne,he,re,me),Ee}catch(_e){console.log(_e)}},getSuiTokenObj:P}}function Ui(e){let t={};return!e||e==="Aptos"?t=eB():t=$U(e),{...t}}const Cr="0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc",RU=[{base_symbol:`${Cr}::btc::BTC`,price:"175181.584616",quote_symbol:"USD"},{base_symbol:`${Cr}::eth::ETH`,price:"1471.343485",quote_symbol:"USD"},{base_symbol:`${Cr}::usdc::USDC`,price:"0.998772",quote_symbol:"USD"},{base_symbol:`${Cr}::usdt::USDT`,price:"0.949513",quote_symbol:"USD"},{base_symbol:`${Cr}::busd::BUSD`,price:"1",quote_symbol:"USD"},{base_symbol:"0x2::sui::SUI",price:"1",quote_symbol:"USD"}],Yj=[{symbol:"USDT",name:"CetusUSDT",num:"200",amount:"200000000",transactionModule:"usdt",address:`${Cr}::usdt::USDT`,suplyID:"0x0a842204e4a64afe0da14749443754714343d1d9d246d71080bde331fc22de55",decimals:6},{symbol:"USDC",name:"CetusUSDC",num:"200",amount:"200000000",transactionModule:"usdc",address:`${Cr}::usdc::USDC`,suplyID:"0xdf6cb5a605e6f91120ac2fe925b897ca44a393b53ad33d52634263774adc9db3",decimals:6},{symbol:"ETH",name:"CetusETH",num:"0.1",amount:"100000000",transactionModule:"eth",address:`${Cr}::eth::ETH`,suplyID:"0x093839657619586c99aa4ab883df94919be0a03eff6ee8206c0d546b2853e158",decimals:8},{symbol:"BTC",name:"CetusBTC",num:"0.01",amount:"10000000",transactionModule:"btc",address:`${Cr}::btc::BTC`,suplyID:"0x9742b5d1812263e1d9fea29467c39cf860ad1aed0993867485aa1c04c720f670",decimals:8}];ie.config({precision:64,rounding:ie.ROUND_DOWN,toExpNeg:-64,toExpPos:64});function xy(e){const t={launchpad:Ue[e||"Sui"].launchpad,ido:Ue[e||"Sui"].ido,xcetus:Ue[e||"Sui"].xcetus,xcetus_dividends:Ue[e||"Sui"].xcetus_dividends,cetus_faucet:Ue[e||"Sui"].cetus_faucet,xtoken:Ue[e||"Sui"].xtoken,xtoken_dividends:Ue[e||"Sui"].xtoken_dividends,token_faucet:Ue[e||"Sui"].token_faucet,booster:Ue[e||"Sui"].booster,maker_bonus:Ue[e||"Sui"].maker_bonus,liquidity_stratefy:Ue[e||"Sui"].liquidity_stratefy,vaults:Ue[e||"Sui"].vaults,frams:Ue[e||"Sui"].frams},n={fullRpcUrl:localStorage.getItem(`${e}-currentRpclocal4`)||Ue[e||"Sui"].fullRpcUrl,simulationAccount:Ue[e||"Sui"].simulationAccount,cetus_config:Ue[e||"Sui"].cetus_config,clmm_pool:Ue[e||"Sui"].clmm_pool,integrate:Ue[e||"Sui"].integrate,deepbook:Ue[e||"Sui"].deepbook,deepbook_endpoint_v2:Ue[e||"Sui"].deepbook_endpoint_v2,aggregatorUrl:Ue[e||"Sui"].aggregatorUrl},i=new gU(n),s=new hT(t,i),r=Kp(),o=xo(()=>r);Ty(()=>{o.value.address&&(i.senderAddress=o.value.address)});const a=T=>({transactionBlock:T,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),c=async()=>{try{return(await s.Farms.getFramsPoolList()).data}catch(T){console.log(" ~ file: useFarms.ts:70 ~ getFramsPoolList ~ error:",T)}},d=async(T,S)=>{const P=await s.Farms.getOwnedFramsPositionNFTList(s.ClmmSDK.senderAddress,T,S);return P&&!ql(P)?P.data?P.data:Object.values(P)[0]:[]},u=async(T,S)=>{const P={pool_id:S,clmm_position_id:T.clmm_position_id},z=await s.Farms.depositPayload(P),X={action:"FarmingStake",txbParams:P};return{txb:a(z),payloadParams:X}},l=async(T,S)=>{const P={pool_id:T,position_nft_id:S},z=await s.Farms.withdrawPayload(P),X={action:"FarmingUnstake",txbParams:P};return{txb:a(z),payloadParams:X}},f=async T=>await s.Farms.calculateFarmingRewards(T,!0),p=async T=>{const S=await s.Farms.harvestPayload(T),P={action:"FarmingHarvest",txbParams:T};return{txb:a(S),payloadParams:P}},m=async T=>{const S=await s.Farms.batchHarvestPayload(T),P={action:"FarmingBatchHarvest",txbParams:T};return{txb:a(S),payloadParams:P}},_=(T,S,P)=>{const z=T.tick_lower_index,X=T.tick_upper_index,{liquidity:G}=T,{price:te,effective_tick_lower:N,effective_tick_upper:R,total_wrapped_amount:M}=S,A=Va.calculatePositionShare(z,X,G,te,N,R,P);return new ie(A).div(new ie(M)).mul(100).toString()},x=async T=>{const S=await i.Position.fetchPosFeeAmount(T);return[{feeOwedA:new ie(S[0].feeOwedA.toString()).div(Math.pow(10,T[0].decimalA)).toString(),feeOwedB:new ie(S[0].feeOwedB.toString()).div(Math.pow(10,T[0].decimalB)).toString()}]},C=async T=>{const S=await s.Farms.getFramsPositionNFT(T,!0);if(S===void 0)setTimeout(()=>{C(T)},5e3);else return S};return{getFramsPoolList:c,getOwnedFramsPositionNFTList:d,farmsDeposit:u,farmsWithdraw:l,calculateFarmingRewards:f,harvestFarms:p,batchHarvest:m,calculatePositionShare:_,fetchPosFeeAmount:x,getFramsPositionNFT:C,batchHarvestAndClmmFee:async(T,S)=>{const P={action:"batchHarvestAndClmmFee",txbParams:{framsListParams:T,clmmListParams:S}},z=await s.Farms.batchHarvestAndClmmFeePayload(T,S);return{txb:a(z),payloadParams:P}}}}const UU=ff("pool",{state:()=>({tokens:[],tokensObj:{},pools:[],poolsObj:{},myPositions:[],addressLpTokens:{},addressTokens:{},currentPositionLoading:!1,myPositionsLoading:!0,poolsLoading:!0,RATES:{},currentPositionInfo:{},poolConfigList:[],feeOwedObj:{},rewarderObj:{},chinaTokens:[],chinaTokensObj:{},getPoolInfoSuccess:!1,recommendRangesObj:{},allTokenObj:{},isTokenLoading:!0,poolPriceConfigObj:{},defaultPoolInfo:{},poolConfigObj:{},openPool:[],routerPoolConfigObj:{},tokensWarningObj:{},currentChain:"",liquidityCurrentPoolInfo:{},positionDetailCurrentTab:"increase",positionActionAmount:{fromCoinAmount:"",toCoinAmount:""},currentPoolTab:"All",currentPoolMoreInfo:{},poolPositions:[],autoPoolNum:"--",tokenExternalPriceObj:{},positionShowList:[],getPendingFeeSuccess:!1,getRewardSuccess:!1,coinMetaData:JSON.parse(localStorage.getItem("SuiTokenObj")||"{}"),notTrustedObj:{},poolListPageSize:20,poolListLoading:!1}),actions:{async setPageSize(e){this.poolListLoading=!0,await Lo(1e3),this.poolListPageSize=e,this.poolListLoading=!1},async setLiquidityCurrentPoolInfo(e){this.liquidityCurrentPoolInfo=e},async setCurrentPoolMoreInfo(e){this.currentPoolMoreInfo=e},async setChainPoolConfigList(e){this.poolConfigList=e,this.pools=e},async setCurrentPoolTab(e){this.currentPoolTab=e},async setPoolConfigList(e,t,n=!0){const s=await Ui(e).getLpList(t,n);console.log(" ~ file: pool.ts:77 ~ setPoolConfigList ~ res:",s);const r=[],o=[],a=[];s.forEach(d=>{var l,f,p;const u={...d,token_a:{...d==null?void 0:d.coinA,logoURI:(l=d==null?void 0:d.coinA)==null?void 0:l.logo_url},token_b:{...d==null?void 0:d.coinB,logoURI:(f=d==null?void 0:d.coinB)==null?void 0:f.logo_url},isFarming:d.is_display_rewarder&&(d.rewarder_display1||d.rewarder_display2||d.rewarder_display3),chain:e==="Aptos"?"aptos":"sui",fee_rate:d.fee*1e4,routerSymbol:[d.coin_a_address,d.coin_b_address].sort(function(m,_){return _.localeCompare(m)}).join("-")};d.is_closed||r.push(u),e=="Sui"&&(!((p=d.object)!=null&&p.is_pause)||!d.is_pause)&&o.push(u),a.push(u)}),console.log("0509###setPoolConfigList###",o),this.poolConfigList=e=="Aptos"?r:o,console.log(" ~ file: pool.ts:108 ~ setPoolConfigList ~ list:",r),this.poolConfigObj=e=="Aptos"?Object.fromEntries(r.map((d,u)=>[d.address,d])):Object.fromEntries(o.map((d,u)=>[d.address,d]));const c=a.filter(d=>!d.is_pause);this.openPool=c,this.routerPoolConfigObj=Object.fromEntries(c.map((d,u)=>[d.address,d]))},async getRecommendRanges(e){var n;let t=null;if(e&&e.includes("Sui")?t=await $fetch(`${Ue[e].api}/v2/sui/liquidity/recommend_ranges`):t=await $fetch(`${Ue.Aptos.api}/v2/liquidity/recommend_ranges`),(n=t==null?void 0:t.data)!=null&&n.list){const i=Object.fromEntries(t.data.list.map((s,r)=>[s.address,s]));this.recommendRangesObj=i,this.poolPriceConfigObj=i}else this.recommendRangesObj={},this.poolPriceConfigObj={}},async setPools(e,t){this.poolsLoading=!0,this.getPoolInfoSuccess=!1,this.currentChain=t;const n=Ui(t);if((t==null?void 0:t.toLowerCase())==="aptos"){if(e&&e.length>0){for(let i=0;i<e.length&&t===this.currentChain;i++){const s=e[i],r=await n.getPools([s.address]);this.defaultPoolInfo[r[0].poolAddress]=r[0],this.poolsObj[r[0].poolAddress]={...s,...r[0],fee:Number(r[0].fee_rate)/1e6},this.addressLpTokens=this.poolsObj,this.poolsLoading=!1,await Lo(500)}this.getPoolInfoSuccess=!0}}else if(e&&e.length>0){const i=e.map(o=>o.address),s=t=="Aptos"?await n.getPools([]):await n.getPoolsObj(i),r={};for(let o=0;o<e.length;o++){const a=e[o],c=s[a.address];c?r[a.address]={...a,...c,fee:Number(c==null?void 0:c.fee_rate)/1e6}:r[a.address]={...a}}console.log("0605###setPools###result###",r),this.poolsObj=r,this.addressLpTokens=r,this.poolsLoading=!1,this.getPoolInfoSuccess=!0}},async setSinglePool(e,t,n){const s=await Ui(n).getPool(e.address);console.log(t,"recommendRangesInfo");const r={...e,...s,fee:s.fee_rate/1e6,type:(t==null?void 0:t.type)||""};console.log("0506###setSinglePool###result###",r),this.poolsObj[e.address]=r,console.log(this.poolsObj,"===>173"),this.addressLpTokens[e.address]=r},async updateCurrentPools(e,t){const n=Ui(t),i=this.poolsObj[e];if(console.log(i,"===>currentPool"),i){let s={};t&&t.includes("Sui")?s=await n.getPool((i==null?void 0:i.poolAddress)||(i==null?void 0:i.address)):s=await n.getPoolState(i.poolAddress,i.poolType,!1),console.log("0411###debug###newInfo####",s);const r={...this.poolsObj},o={...r[e],...s};console.log("0411###debug###newCurrentInfo####",o),r[e]={...o},console.log("0411###debug###newPoolsObj####",r),this.poolsObj=r}},async setTokens(e){const t=[];console.log("0613###setTokens####111111###",e);const n=Ui(e);console.log("0613###setTokens####22222###contract###",n);const i=await n.getTokenList();console.log("0613###setTokens####22222###res###",i),i.forEach(s=>{t.push({...s,logoURI:s.logo_url,chain:e.toLowerCase()})}),this.tokens=t},setCurrentPositionLoading(e){this.currentPositionLoading=e},setMyPositionsLoading(e){this.myPositionsLoading=e},async setRates(e){let t={};if(e&&e.includes("Sui"))try{t=await $fetch(`${Ue.Sui.api}/v2/sui/price`)}catch(s){console.log("sui pric api error ###",s),t={data:{prices:RU}}}else t=await $fetch(`${Ue.Aptos.api}/v2/price`);const n=t.data.prices||[],i=[];n.forEach(s=>{s.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?i.push({...s},{...s,base_symbol:"0x2::sui::SUI"}):i.push(s)}),this.RATES=Object.fromEntries(i.map(s=>[s.base_symbol,s]))},async getMyPositons(e,t,n){console.log("0507###getMyPositons###start###",t),this.setMyPositionsLoading(!0);const i=Ui(n);let s=[],r=[];if(this.getRewardSuccess=!1,this.getPendingFeeSuccess=!1,n=="Sui"){const{clmmPosition:u,farmsPosition:l}=await i.getAllPosition(e,t);s=u,r=l}else s=await i.getPositionList(e,t)||[];let o=[];n=="Sui"&&(o=r.map(u=>{const l=[];let f=new ie(0);return u.rewards.forEach(p=>{var T;const m=p.rewarder_type,_=this.tokensObj[m],x=((T=this.RATES[m])==null?void 0:T.price)||0,C=new ie(p.rewarder_amount).div(new ie(Math.pow(10,_.decimals))),k=C.mul(new ie(x));f=f.add(k),C.toNumber()>0&&l.push({...p,amount:C,rewarderAmountUsd:k.toString(),address:m,symbol:_.symbol})}),{...u,rewards:l,farmingRewardTotalUsd:f.toNumber(),positionSource:"farming"}}),console.log("farmingPositionList:",o)),console.log("0507###getMyPositons###positionList###",s),s.length<1&&(this.setMyPositionsLoading(!1),this.getRewardSuccess=!0,this.getPendingFeeSuccess=!0);const a=o.concat(s);console.log(a,"##allPositionList");const c=[];a.forEach(u=>{var P,z,X,G;const l=t[u.pool||u.clmm_pool_id];let f,p,m,_,x="",C,k,T,S;if(console.log("allPositionList item:",u),u.liquidity&&u.liquidity!=="0"&&l){const te={creator:u.creator,collection:u.collection,name:u.name};n==="Aptos"?S=i.getNftHash(te):S=i.getNftHash(u);const N=l.token_a.decimals,R=l.token_b.decimals;console.log(l,"poolInf=====>"),l!=null&&l.current_sqrt_price&&(m=i.TickMath.sqrtPriceX64ToPrice(l==null?void 0:l.current_sqrt_price,N,R).toString(),_=new ie(1).div(i.TickMath.sqrtPriceX64ToPrice(l==null?void 0:l.current_sqrt_price,N,R)).toString()),u.tick_lower_index==i.TickUtil.getMinIndex(Number(l.tickSpacing))?f="0":f=i.TickMath.tickIndexToPrice(Number(u.tick_lower_index),N,R).toString(),u.tick_upper_index==i.TickUtil.getMaxIndex(Number(l.tickSpacing))?p="":(p=i.TickMath.tickIndexToPrice(Number(u.tick_upper_index),N,R).toString(),console.log("0523###maxPrice###2222###",p));let M,A;p!==""?A=new ie(1).div(new ie(p)).toString():A="",f!==0?M=new ie(1).div(new ie(f)).toString():M="0";const h=l.needReverse?((z=this.tokensObj[l.coinB.address])==null?void 0:z.labels)||[]:((P=this.tokensObj[l.coinA.address])==null?void 0:P.labels)||[],y=l.needReverse?((X=this.tokensObj[l.coinA.address])==null?void 0:X.labels)||[]:((G=this.tokensObj[l.coinB.address])==null?void 0:G.labels)||[],E=[...new Set(h.concat(y))],U=i.getCoinAmountFromLiquidity({pool:l,position:u,roundUp:n!="Sui"}),L=U.coinaAmount,H=U.coinbAmount;console.log(m,"===>currentPrice");const Q=Number(H)+Number(L)*Number(m);let O=(Number(L)*Number(m)/Q*100).toFixed(0),b=(H/Q*100).toFixed(0);f=="0"&&p==""&&(O="50",b="50"),l.isPause?x="Closed":Number(m)>=Number(f)&&(p===""||Number(m)<=Number(p))?x="Active":(Number(m)>Number(p)||Number(m)<Number(f))&&(x="Inactive"),console.log("0323###this.tokensObj####",this.tokensObj),console.log("0323###this.tokensObj[poolInfo.token_a.address]####",this.tokensObj[l.token_a.address]),console.log("0323###poolInfo.token_a.address####",l.token_a.address),console.log("0323###poolInfo.token_b.address####",l.token_b.address);let j={},Ae={};n==="Aptos"?(j={...l.token_a,...this.tokensObj[l.token_a.address],logoURI:this.tokensObj[l.token_a.address].logo_url},Ae={...l.token_b,...this.tokensObj[l.token_b.address],logoURI:this.tokensObj[l.token_b.address].logo_url}):(j=l==null?void 0:l.token_a,Ae=l==null?void 0:l.token_b),c.push({...l,...u,labels:E,totalAmount:Q,token_a:j,token_b:Ae,tokenARates:C,tokenBRates:k,amountA:L,amountB:H,fromPercent:O,toPercent:b,amountUSD:T,tokenName:u.tokenName||u.name,currentStatus:x,positionLiquidity:u.liquidity,nftHash:S,currentPrice:m,currentPriceReverse:_,minPrice:rr(f,12),maxPrice:rr(p,12),positionSource:u.id?"farming":"clmm",farmingRewardTotalUsd:u.id?u.farmingRewardTotalUsd:0,minPriceResever:M,maxPriceResever:A})}});const d=c.sort((u,l)=>l.amountUSD-u.amountUSD);this.myPositions=d,this.setMyPositionsLoading(!1),this.getPendingFees(d,n),this.getRewarderV2(d,n),console.log(d,"===>this.myPositions")},setMyPositions(){this.myPositions=[],this.feeOwedObj={},this.rewarderObj={}},async setCurrentPositionInfo(e,t,n,i,s="",r=""){var p,m,_,x,C,k;const o=Ui(i);let a;i=="Sui"&&(a=xy(i));let c=null,d=null,u=null,l=null,f=null;if(e&&s||i==="Aptos"?(c=this.addressLpTokens&&this.addressLpTokens[e],d=await o.getPool(e),f=this.poolConfigObj[e],console.log(f,"===>poolConfig"),u={...c,...d,...f},console.log(u,"423"),l=await o.getPositionInfo(u,t,n,s)):i!=="Aptos"&&(console.log("0414###setCurrentPositionInfo###",s),l=r=="farming"?await a.getFramsPositionNFT(s):await o.getPositionById(s),console.log(" ~ file: pool.ts:562 ~ setCurrentPositionInfo ~ positionInfo:",l),console.log(l,"setCurrentPositionInfo:positionInfo"),d=r=="farming"?await o.getPool(l.clmm_pool_id):await o.getPool(l.pool),c=this.addressLpTokens&&this.addressLpTokens[l.pool||this.addressLpTokens.poolAddress],f=this.poolConfigObj[l.clmm_pool_id||l.pool],console.log(this.poolConfigObj[l.clmm_pool_id],"##this.poolConfigObj[poolAddress]"),u={...c,...d,...f},console.log("poolInfoNew:",c,d),console.log("0414###setCurrentPositionInfo###positionInfo###",l),console.log("0414###setCurrentPositionInfo###poolInfo###",u)),console.log("setCurrentPositionInfo:",u),l&&u){let T,S,P,z,X="",G,te,N,R,M,A=0,h=0,y;const E={creator:l.pool,collection:l.collectionName,name:l.name};i==="Aptos"?y=o.getNftHash(E):y=o.getNftHash(l),console.log("0329###setCurrentPositionInfo###poolInfo###",u),console.log("0329###setCurrentPositionInfo###positionInfo###",l);let U=0,L=0;if(u!=null&&u.token_a&&(u!=null&&u.token_b))U=(p=u==null?void 0:u.token_a)==null?void 0:p.decimals,L=(m=u==null?void 0:u.token_b)==null?void 0:m.decimals;else{const H=(await o.getTokenListByCoinType(u==null?void 0:u.coinTypeA))[0],Q=(await o.getTokenListByCoinType(u==null?void 0:u.coinTypeB))[0];U=H==null?void 0:H.decimals,L=Q==null?void 0:Q.decimals,u.coinA=H,u.coinB=Q,u.token_a=H,u.token_b=Q}if(u){try{let st;if(r!=="farming"){const kt=await o.getTickDataByIndex(u.ticks_handle,Number(l.tick_lower_index)),ut=await o.getTickDataByIndex(u.ticks_handle,Number(l.tick_upper_index));st=await o.getCollectFeesQuote({pool:u,position:l,tickLowerData:kt,tickUpperData:ut})}else{console.log(u,u.token_a,"setCurrentPositionInfo:poolInfo");const kt=[{poolAddress:u.poolAddress,positionId:l.clmm_position_id,coinTypeA:u.coinTypeA,coinTypeB:u.coinTypeB,decimalA:u.token_a.decimals,decimalB:u.token_b.decimals}];console.log(kt,"params###");const ut=await a.fetchPosFeeAmount(kt);console.log(ut,"##farmingPositionFee"),st=ut[0]}console.log(st,"setCurrentPositionInfo feeOwn:"),st&&(A=Number(st.feeOwedA),h=Number(st.feeOwedB))}catch(st){console.log("0314###getCollectFeesQuote###error####",st)}console.log("0413####setCurrentPositionInfo###poolInfo###",u),P=o.TickMath.sqrtPriceX64ToPrice(u.current_sqrt_price,U,L).toString(),z=new ie(1).div(o.TickMath.sqrtPriceX64ToPrice(u==null?void 0:u.current_sqrt_price,U,L)).toString(),l.tick_lower_index==o.TickUtil.getMinIndex(Number(u.tickSpacing))?T="0":T=o.TickMath.tickIndexToPrice(Number(l.tick_lower_index),U,L).toString(),l.tick_upper_index==o.TickUtil.getMaxIndex(Number(u.tickSpacing))?S="":S=o.TickMath.tickIndexToPrice(Number(l.tick_upper_index),U,L).toString();let H,Q;S!==""?Q=new ie(1).div(new ie(S)).toString():Q="",T!==0?H=new ie(1).div(new ie(T)).toString():H="0",G=l.tick_lower_index,te=l.tick_upper_index;const O=o.getCoinAmountFromLiquidity({pool:u,position:l,roundUp:i!="Sui"});let b,j,Ae;console.log(P,"===>currentPrice522"),P&&P>0&&(R=O==null?void 0:O.coinaAmount,M=O==null?void 0:O.coinbAmount,console.log(O,"===>amountInfo"),console.log(P,"===>currentPrice"),Ae=Number(M)+Number(R)*Number(P),console.log(Ae,"===>totalAmount"),b=(Number(R)*Number(P)/Ae*100).toFixed(0),console.log(b,"===>fromPercent"),j=(Number(M/Number(Ae))*100).toFixed(0),console.log(j,"==>toPercent"));let ue;const ke=O.coinaAmount*((_=this.RATES[u==null?void 0:u.token_a.address])==null?void 0:_.price),mt=O.coinbAmount*((x=this.RATES[u==null?void 0:u.token_b.address])==null?void 0:x.price);(C=this.RATES[u==null?void 0:u.token_a.address])!=null&&C.price&&((k=this.RATES[u==null?void 0:u.token_b.address])!=null&&k.price)&&(ue=ke+mt),console.log(ue,"==>totalAmountUSD"),u.isPause?X="Closed":Number(P)>=Number(T)&&(S===""||Number(P)<=Number(S))?X="Active":(Number(P)>Number(S)||Number(P)<Number(T))&&(X="Inactive"),this.currentPositionInfo={...l,poolInfo:u,token_a:{...u.token_a,...this.tokensObj[u.token_a.address]},token_b:{...u.token_b,...this.tokensObj[u.token_b.address]},current_tick_index:u.current_tick_index,current_sqrt_price:u.current_sqrt_price,tickSpacing:u.tickSpacing,fee:u.fee,poolAddress:u.poolAddress,address:u.address,is_display_rewarder:u.is_display_rewarder,nftHash:y,feeOwedA:A,feeOwedB:h,currentStatus:X,amountA:R,amountB:M,tokenARates:ke,tokenBRates:mt,amountUSD:N,totalAmount:Ae,totalAmountUSD:ue,currentPrice:P,currentPriceReverse:z,minPrice:rr(T,12),minTick:G,maxTick:te,maxPrice:rr(S,12),fromPercent:b||"--",toPercent:j||"--",tokenName:l.tokenName||l.name,positionSource:l.id?"farming":"clmm",minPriceResever:H,maxPriceResever:Q},this.currentPositionLoading=!1,console.log("positionInfo.value",this.currentPositionInfo)}}},async getPendingFees(e,t){var r,o;const n=this.RATES,i=Ui(t);let s;t=="Sui"&&(s=xy("Sui")),console.log("0302###getPendingFees####result###",e);for(let a=0;a<e.length;a++){const c=e[a],d=await i.getPool(c.poolAddress),u={...d,token_a:(c==null?void 0:c.token_a)||this.tokensObj&&this.tokensObj[d.coinTypeA]||this.chinaTokensObj&&this.chinaTokensObj[d.coinTypeA],token_b:(c==null?void 0:c.token_b)||this.tokensObj&&this.tokensObj[d.coinTypeB]||this.chinaTokensObj&&this.chinaTokensObj[d.coinTypeB]};let l;if(e[a].positionSource=="farming"){console.log("result[i]:",e[a]);const T=[{poolAddress:c.poolAddress,positionId:c.clmm_position_id,coinTypeA:c.coinTypeA,coinTypeB:c.coinTypeB,decimalA:c.token_a.decimals,decimalB:c.token_b.decimals}];let S;try{S=await s.fetchPosFeeAmount(T),console.log(S,"##farmingPositionFee"),l=S[0]}catch(P){console.log(" ~ file: pool.ts:831 ~ getPendingFees ~ error:",P)}}else if(d){const T=await i.getTickDataByIndex(d.ticks_handle,Number(c.tick_lower_index)),S=await i.getTickDataByIndex(d.ticks_handle,Number(c.tick_upper_index));console.log("0323####getPendingFees###pool###",d),console.log("0323####getPendingFees###positionItem.collection###",c.collection),console.log("0323####getPendingFees###positionItem.tokenName###",c.tokenName),console.log("0323####getPendingFees###positionItem###",c);const P=t==="Aptos"?"":c.pos_object_id,z=await i.getPositionInfo(d,c.collection,c.tokenName,P);console.log("0302###positionInfo",z),console.log("0302###resultPool###",u),console.log(d,"pool====>654");try{l=await i.getCollectFeesQuote({pool:u,position:z,tickLowerData:T,tickUpperData:S})}catch(X){console.log(" ~ file: pool.ts:852 ~ getPendingFees ~ error:",X)}}console.log("0330###getPendingFees###feeOwn###",l);const f=[],p=Number(l.feeOwedA),m=Number(l.feeOwedB);let _,x,C;n&&n[u.token_a.address]&&n[u.token_b.address]?(x=p*((r=n[u.token_a.address])==null?void 0:r.price),C=m*((o=n[u.token_b.address])==null?void 0:o.price),_=x+C):_="--",f.push({amount:p,amountUSD:x,...u.token_a,logoURI:u.token_a.logo_url},{amount:m,amountUSD:C,...u.token_b,logoURI:u.token_b.logo_url});const k=this.poolConfigObj&&this.poolConfigObj[d.poolAddress];console.log(k,"poolConfigInfo===>710"),this.feeOwedObj[c.tokenName]={feesResult:k!=null&&k.needReverse?f.reverse():f,feeOwed:_},console.log(this.feeOwedObj,"===>this.feeOwedObj"),await Lo(1e3)}this.getPendingFeeSuccess=!0},async getRewarder(e,t){const n=Ui(t),i=this;console.log(e,"===>results");for(let s=0;s<e.length;s++)if(e[s].rewarder_infos&&e[s].rewarder_infos.length>0){const r=e[s];console.log(s,"i===>"),console.log(r,"===>positionItem"),console.log(r.ticks_handle,"===>positionItem.ticks_handle"),console.log(r.tick_lower_index,"===>positionItem.tick_lower_index"),console.log(r.tick_upper_index,"===>positionItem.tick_upper_index");const o=await n.getTickDataByIndex(r.ticks_handle,Number(r.tick_lower_index)),a=await n.getTickDataByIndex(r.ticks_handle,Number(r.tick_upper_index));let c=[];t==="Aptos"?c=await n.getPosRewardersAmount({poolAddress:r.poolAddress,positionName:r.tokenName,tickLowerData:o,tickUpperData:a}):c=await n.getPosRewardersAmount({poolAddress:r.poolAddress,pos:r.pos_object_id,positionHandle:r.position_manager.positions_handle}),console.log(c,"rewarderInfo===>");const d=[];let u=0;c.forEach((l,f)=>{var x;const p=i.tokensObj[l.coin_address].decimals,m=l.amount_owed.toString(),_=Rn(new ie(m).div(Math.pow(10,p)).toString(),p);if(r[`rewarder_display${f+1}`]||Number(_)>0){const C=i.tokensObj[l.coin_address];console.log(l.amount_owed.toString(),"===>element.amount_owed.toString()");const k=(x=i.RATES[l.coin_address])==null?void 0:x.price;console.log(k,"price===>"),console.log(_,"==>amount");const T=Number(_)*k;u+=T,d.push({...l,...C,amount:_,amountUSD:T,amount_owed:l.amount_owed.toString()}),i.rewarderObj[r.tokenName]={pendingRewarderArr:d,pendingRewarderView:Number(Rn(u,2)),pendingRewarder:u}}}),console.log(i.rewarderObj,"===>_this.rewarderObj"),await Lo(1e3)}},async getRewarderV2(e,t){const n=Ui(t),i=this;console.log(e,"===>results");for(let s=0;s<e.length;s++){const r=e[s];if(e[s].rewarder_infos&&e[s].rewarder_infos.length>0){console.log(r,"===>positionItem");const o=await n.getTickDataByIndex(r.ticks_handle,Number(r.tick_lower_index)),a=await n.getTickDataByIndex(r.ticks_handle,Number(r.tick_upper_index));let c=[];t==="Aptos"?c=await n.getPosRewardersAmount({poolAddress:r.poolAddress,positionName:r.tokenName,tickLowerData:o,tickUpperData:a}):(console.log("###fetchPosRewardersAmount"),console.log({poolAddress:r.poolAddress,positionId:r.positionSource=="clmm"?r.pos_object_id:r.clmm_position_id,coinTypeA:r.coinTypeA,coinTypeB:r.coinTypeB,rewarderInfo:r.rewarder_infos},"955##"),c=await n.fetchPosRewardersAmount({poolAddress:r.poolAddress,positionId:r.positionSource=="clmm"?r.pos_object_id:r.clmm_position_id,coinTypeA:r.coinTypeA,coinTypeB:r.coinTypeB,rewarderInfo:r.rewarder_infos}),console.log(c,"###rewarderInfo"));const d=[];let u=0;c.forEach((l,f)=>{var x;const p=i.tokensObj[l.coin_address].decimals,m=l.amount_owed.toString(),_=Rn(new ie(m).div(Math.pow(10,p)).toString(),p);if(r[`rewarder_display${f+1}`]||Number(_)>0){const C=i.tokensObj[l.coin_address],k=((x=i.RATES[l.coin_address])==null?void 0:x.price)||0;console.log(k,"price===>"),console.log(_,"==>amount");const T=Number(_)*k;u+=T,d.push({...l,...C,amount:_,amountUSD:T,amount_owed:l.amount_owed.toString()}),i.rewarderObj[r.tokenName]={pendingRewarderArr:d,pendingRewarderView:Number(Rn(u,2)),pendingRewarder:u}}}),await Lo(1e3)}console.log(i.rewarderObj,"===>_this.rewarderObj")}this.getRewardSuccess=!0},setAllTokenObj(e){console.log(e,"===>allTokenObj"),this.allTokenObj=e},async getTokensObj(e,t){if(this.isTokenLoading=!0,console.log(" ~ file: pool.ts:1130 ~ getTokensObj ~ pools, chainName:",e,t),t=="Sui")this.getCoinMetaData(!0);else{const n=Ui("Aptos"),i=await n.getTokenList(),s=[];i.forEach(c=>{s.push({...c,logoURI:c.logo_url,chain:t.toLowerCase()})});const r=Object.fromEntries(s.map((c,d)=>[c.address,c]));console.log(" ~ file: pool.ts:1145 ~ getTokensObj ~ aptosTokensObj:",r);const o={};e.forEach(c=>{!r[c.coinA.address]&&!o[c.coinA.address]&&(o[c.coinA.address]=c),!r[c.coinB.address]&&!o[c.coinB.address]&&(o[c.coinB.address]=c)});const a=Object.keys(o);if(console.log(" ~ file: pool.ts:1158 ~ getTokensObj ~ params:",a),a.length>0){const c=await n.getTokenListByCoinType(a),d={};c.forEach(u=>{d[u.address]={...u,isSelfBuilt:!0}}),this.tokensObj={...this.tokensObj,...d}}else this.tokensObj=r;this.isTokenLoading=!1}console.log(" ~ file: pool.ts:1167 ~ getTokensObj ~ this.tokensObj :",this.tokensObj)},setNewTokens(e){this.tokensObj={...this.tokensObj,...e},console.log("setNewTokens###this.tokensObj####",this.tokensObj)},setPositionDetailCurrentTab(e){e!=this.positionDetailCurrentTab&&(this.positionActionAmount={},this.positionDetailCurrentTab=e)},setPositionActionAmount(e){this.positionActionAmount=e},async getMyPositonsByPool(e,t,n){console.log("0507###getMyPositons###start###",t),this.myPositionsLoading=!0;let i={};const s=Ui(n);if(!t.current_sqrt_price){const f=await s.getPool(t.address)||{};i={...t,...f}}let r=[],o=[],a=[],c=[];if(n=="Sui"){const{clmmPosition:f,farmsPosition:p}=await s.getAllPosition(e,[t.address]);a=f,c=p,o=c.filter(m=>{if(m.clmm_pool_id==i.address)return m}),r=o.map(m=>{const _=[];let x=new ie(0);return m.rewards.forEach(C=>{var X;const k=C.rewarder_type,T=this.tokensObj[k],S=((X=this.RATES[k])==null?void 0:X.price)||0,P=new ie(C.rewarder_amount).div(new ie(Math.pow(10,T.decimals))),z=P.mul(new ie(S));x=x.add(z),P.toNumber()>0&&_.push({...C,amount:P,rewarderAmountUsd:z.toString(),address:k,symbol:T.symbol})}),{...m,rewards:_,farmingRewardTotalUsd:x.toNumber()}}),console.log("farmingPositionList:",r)}else a=await s.getPositionList(e,{[t.address]:i})||[];console.log(r,"###farmingPositionList"),console.log("0507###getMyPositons###positionList###",a),console.log("###poolInfo",i),a.length<1&&this.setMyPositionsLoading(!1);const d=r.concat(a);console.log("allPositionList:",d);const u=[];d.forEach(f=>{let p,m,_,x="",C,k,T,S;if(f.liquidity&&f.liquidity!=="0"&&i){const P={creator:f.creator,collection:f.collection,name:f.name};n==="Aptos"?S=s.getNftHash(P):S=s.getNftHash(f);const z=i.token_a.decimals,X=i.token_b.decimals;console.log(i,"poolInf=====>"),_=s.TickMath.sqrtPriceX64ToPrice(i.current_sqrt_price,z,X).toString(),f.tick_lower_index==s.TickUtil.getMinIndex(Number(i.tickSpacing))?p="0":p=s.TickMath.tickIndexToPrice(Number(f.tick_lower_index),z,X).toString(),f.tick_upper_index==s.TickUtil.getMaxIndex(Number(i.tickSpacing))?m="":(m=s.TickMath.tickIndexToPrice(Number(f.tick_upper_index),z,X).toString(),console.log("0523###maxPrice###2222###",m));const G=s.getCoinAmountFromLiquidity({pool:i,position:f,roundUp:n!="Sui"}),te=G.coinaAmount,N=G.coinbAmount;console.log(_,"===>currentPrice");const R=Number(N)+Number(te)*Number(_);let M=(Number(te)*Number(_)/R*100).toFixed(0),A=(N/R*100).toFixed(0);p=="0"&&m==""&&(M="50",A="50"),i.isPause?x="Closed":Number(_)>=Number(p)&&(m===""||Number(_)<=Number(m))?x="Active":(Number(_)>Number(m)||Number(_)<Number(p))&&(x="Inactive"),console.log("0323###this.tokensObj####",this.tokensObj),console.log("0323###this.tokensObj[poolInfo.token_a.address]####",this.tokensObj[i.token_a.address]),console.log("0323###poolInfo.token_a.address####",i.token_a.address),console.log("0323###poolInfo.token_b.address####",i.token_b.address);let h={},y={};n==="Aptos"?(h={...i.token_a,...this.tokensObj[i.token_a.address],logoURI:this.tokensObj[i.token_a.address].logo_url},y={...i.token_b,...this.tokensObj[i.token_b.address],logoURI:this.tokensObj[i.token_b.address].logo_url}):(h=i==null?void 0:i.token_a,y=i==null?void 0:i.token_b),u.push({...i,...f,totalAmount:R,token_a:h,token_b:y,tokenARates:C,tokenBRates:k,amountA:te,amountB:N,fromPercent:M,toPercent:A,amountUSD:T,tokenName:f.tokenName||f.name,currentStatus:x,positionLiquidity:f.liquidity,nftHash:S,currentPrice:_,minPrice:rr(p,12),maxPrice:rr(m,12),positionSource:f.id?"farming":"clmm",farmingRewardTotalUsd:f.id?f.farmingRewardTotalUsd:0})}});const l=u.sort((f,p)=>p.liquidity-f.liquidity);console.log(l,"==>myPositionsByPool"),this.poolPositions=l,this.setMyPositionsLoading(!1),this.getPendingFees(l,n),this.getRewarderV2(l,n),console.log(l,"===>this.myPositions")},setAutoPoolNum(e){this.autoPoolNum=e},setTokenExternalPrice(e,t){this.tokenExternalPriceObj[e]=t},clearCurrentPositionInfo(){this.currentPositionInfo={}},setPositionShowList(e){this.positionShowList=e},async getCoinMetaData(e){const n=await Ui("Sui").getSuiTokenObj(e),i=[],s=[],r=JSON.parse(JSON.stringify(Object.values(n)));for(let o=0;o<r.length;o++){const a=r[o];a.is_trusted?i.push({...a,chain:"sui",isSelfBuilt:!1,logo_url:a.icon_url||a.icon_url,logoURI:a.icon_url||a.icon_url}):s.push({...a,chain:"sui",isSelfBuilt:!0,logo_url:a.icon_url||a.icon_url,logoURI:a.icon_url||a.icon_url})}console.log(" ~ file: pool.ts:1437 ~ getCoinMetaData ~ trustedList:",i),console.log(" ~ file: pool.ts:1437 ~ getCoinMetaData ~ this.tokens:",this.tokens),this.tokensObj=n,console.log(" ~ file: pool.ts:1454 ~ getCoinMetaData ~ this.tokensObj:",this.tokensObj),this.notTrustedObj=Object.fromEntries(s.map((o,a)=>[o.address,o])),console.log(" ~ file: pool.ts:1464 ~ getCoinMetaData ~ notTrustedObj:",this.notTrustedObj),this.isTokenLoading=!1}}});export{ai as $,eB as A,At as B,si as C,cj as D,Wp as E,Pn as F,ij as G,pj as H,gj as I,sj as J,Jj as K,Bs as L,BU as M,md as N,gd as O,hj as P,Bu as Q,_j as R,aj as S,qe as T,pe as U,Ay as V,nj as W,No as X,OU as Y,Qc as Z,Mn as _,Kp as a,Gs as a$,Zj as a0,oj as a1,zR as a2,gU as a3,hT as a4,ed as a5,RU as a6,wj as a7,yj as a8,mj as a9,De as aA,Th as aB,Lm as aC,Tx as aD,kn as aE,jt as aF,Nr as aG,ci as aH,ts as aI,Rr as aJ,xx as aK,ns as aL,_n as aM,fi as aN,qm as aO,Sh as aP,Ql as aQ,ef as aR,Xb as aS,Kn as aT,Cp as aU,ZB as aV,P2 as aW,Xj as aX,Gj as aY,Vj as aZ,is as a_,q as aa,Xi as ab,rj as ac,tn as ad,fs as ae,VI as af,XI as ag,tI as ah,JC as ai,rc as aj,Ap as ak,k2 as al,Mj as am,Nj as an,sc as ao,S2 as ap,Fj as aq,Dj as ar,Di as as,Uj as at,zj as au,Vp as av,Lj as aw,Yj as ax,PD as ay,eI as az,N2 as b,Cn as b0,aC as b1,ti as b2,mr as b3,dC as b4,oC as b5,cC as b6,Oi as b7,Oj as b8,jb as b9,tc as bA,qu as bB,HI as bC,es as bD,wo as bE,Rj as bF,CC as bG,Ro as bH,b2 as bI,lC as ba,ur as bb,$j as bc,jr as bd,fr as be,vj as bf,Ul as bg,_P as bh,xh as bi,Ir as bj,ri as bk,jj as bl,rm as bm,ye as bn,Co as bo,qj as bp,zc as bq,Ah as br,dr as bs,zb as bt,pC as bu,Br as bv,$u as bw,K6 as bx,Bl as by,H6 as bz,Ui as c,ql as d,Ue as e,Ml as f,bj as g,jl as h,fj as i,rr as j,Kj as k,To as l,uj as m,lj as n,w as o,En as p,Lo as q,xy as r,vP as s,Wj as t,UU as u,Tr as v,Rn as w,dj as x,Ha as y,za as z};
