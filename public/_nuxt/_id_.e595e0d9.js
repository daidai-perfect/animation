import{_ as vn}from"./back.603ebdfe.js";import{_ as mn}from"./refresh-icon.e35e735b.js";import{a as He,R as So,l as ho,r as I,a9 as pn,e as Me,T as oo,o as a,c as D,w as te,h as o,i as F,j as pe,v as i,f as m,F as we,s as Po,z as $e,x as j,aa as cn,P as fn,B as _o,p as Ee,k as We,y as To,C as Fo,m as y,D as Ie,b as Vo,K as Ze,q as $o,t as _e,u as T,U as Xo,N as Io,a3 as zo,G as Oo,a2 as ko,J as yn,L as gn,O as Go,S as bn}from"./entry.b66a9ef5.js";/* empty css              */import{a as kn,_ as hn}from"./icon-warning_2x.573d2f96.js";import{u as no,a as Yo}from"./autoPool.7dc1e383.js";import{_ as _n}from"./icon-error_2x.0d4ff5aa.js";import{u as Qe,d as Je,b as fo,h as R,f as Uo,l as Se,s as B,a as Ro,T as Ye,w as ge,p as Wo,c as Jo,a0 as $n,$ as Mo,L as In}from"./pool.e2dd35c1.js";import{_ as yo}from"./token-warning.fd222bfb.js";import{_ as Ko}from"./auto-pool-apy-tips.44c9a7f1.js";/* empty css              */import"./index.8d1c7ae6.js";import{i as Ke}from"./import-icon.de3e6c66.js";/* empty css              */import{_ as Zo}from"./assets-card.dc52c5b4.js";import{_ as Qo}from"./coin-lock.e003a7ee.js";import{D as v}from"./decimal.0bdeb344.js";/* empty css              *//* empty css              */import"./img-lock_2x.a28135f4.js";const wn=He({components:{Modal:So},setup(e,s){const{t:z,locale:E}=ho(),N=no(),S=["0.1","0.5","1"],u=I(N.slippage||.1),{setSlippage:k}=N,p=pn(),C=I(!1);function t(r,d){C.value=!1,u.value=d}function b(){k(u.value),s.emit("onClose",!1)}return{settingArr:S,changeActiveIndex:t,confirm:b,emit:p,slippage:u,t:z,isInput:C,inputChange:r=>{const d=new RegExp(/[^\d^\.]+/g);r.target.value=r.target.value.replace(d,""),u.value=r.target.value}}}});const xo=e=>(Ee("data-v-ec8759be"),e=e(),We(),e),Cn=xo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),An={class:"setting-container"},Pn={class:"title"},Sn=xo(()=>o("img",{src:hn,alt:""},null,-1)),Tn={class:"tag-list"},Rn={key:0,src:kn,alt:""},qn={key:1,src:_n,alt:""},Nn={class:"footer"};function Ln(e,s,z,E,N,S){const u=cn,k=fn,p=_o,C=oo("Modal");return a(),D(C,{title:"Settings",class:"setting",centered:"",visible:!0,width:"400px",onCancel:s[3]||(s[3]=t=>e.$emit("onClose"))},{closeIcon:te(()=>[Cn]),footer:te(()=>[o("div",Nn,[F(p,{type:"cancel",class:"cancel-btn cancel-btn-new",onClick:s[2]||(s[2]=t=>e.$emit("onClose"))},{default:te(()=>[pe(i(e.$t("button.cancel")),1)]),_:1}),F(p,{class:"confirmbtn",disabled:Number(e.slippage)==0||Number(e.slippage)>1||Number(e.slippage)<.01,onClick:e.confirm},{default:te(()=>[pe(i(e.$t("button.confirm")),1)]),_:1},8,["disabled","onClick"])])]),default:te(()=>[o("div",An,[o("div",Pn,[Sn,o("span",null,i(e.$t("modal.slippageTolerance")),1)]),o("div",Tn,[(a(!0),m(we,null,Po(e.settingArr,(t,b)=>(a(),D(u,{key:b,class:$e(!e.isInput&&t==e.slippage?"tag-active":""),onClick:n=>e.changeActiveIndex(b,t)},{default:te(()=>[pe(i(t)+"% ",1)]),_:2},1032,["class","onClick"]))),128)),F(u,{class:$e(["input-tag",e.isInput?"tag-active":""]),onClick:s[1]||(s[1]=t=>e.isInput=!0)},{default:te(()=>[F(k,{value:e.slippage,"onUpdate:value":s[0]||(s[0]=t=>e.slippage=t),placeholder:"",suffix:"%",class:$e(["slippage-input",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-input-waring":Number(e.slippage)>1?"slippage-input-error":""]),onChange:e.inputChange},null,8,["value","class","onChange"])]),_:1},8,["class"])])]),Number(e.slippage)>.5&&Number(e.slippage)<1||Number(e.slippage)>1?(a(),m("div",{key:0,class:$e(["slippage-hint",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-hint-waring":Number(e.slippage)>1?"slippage-hint-error":""])},[Number(e.slippage)>.5&&1>=Number(e.slippage)?(a(),m("img",Rn)):j("",!0),Number(e.slippage)>1?(a(),m("img",qn)):j("",!0),o("p",null,i(Number(e.slippage)>.5&&1>=Number(e.slippage)?e.$t("tips.slippageTolerance2"):Number(e.slippage)>1?e.$t("tips.slippageTolerance1"):""),1)],2)):j("",!0)]),_:1})}const Bn=Me(wn,[["render",Ln],["__scopeId","data-v-ec8759be"]]),Dn=He({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,s){const z=I(!1),E=I(null),N=I(0);let S=I(!1);const u=I(20);Qe();const k=no(),p=I(!1);To(()=>{}),Fo(()=>{clearInterval(E.value)});const C=()=>{S.value=!1,E.value=setInterval(()=>{var c;p.value||N.value<u.value&&(N.value+=1,N.value===u.value&&((c=e==null?void 0:e.poolInfo)!=null&&c.address&&n(),N.value=0))},1e3)},t=y(()=>k.slippage),b=()=>{s.emit("clearAll")},n=()=>{S.value||(S.value=!0,N.value=0,s.emit("clickRefresh"),setTimeout(()=>{S.value=!1},1e3))};Ie(()=>e.poolInfo,c=>{c&&!E.value&&C()},{immediate:!0});const r=Vo(),d=Ze();return{refresh:S,clickRefresh:n,isShowSwapSetting:z,countdown:N,autoRefreshTime:u,slippage:t,clearAll:b,checkNullObj:Je,router:r,route:d}}});const On=e=>(Ee("data-v-41ba3d57"),e=e(),We(),e),Un={class:"title"},Mn={class:"left"},Fn=On(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Vn={key:0,class:"deposit-progress"};function jn(e,s,z,E,N,S){const u=vn,k=mn,p=Bn;return a(),m("div",Un,[o("div",Mn,[F(u)]),o("div",{class:$e(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[o("div",{class:"slippage-icon",onClick:s[0]||(s[0]=C=>e.isShowSwapSetting=!0)},[Fn,o("span",null,i(e.slippage)+"%",1)]),e.route.name!=="liquidity-create"?(a(),m("div",Vn,[F(k,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])):j("",!0)],2),e.isShowSwapSetting?(a(),D(p,{key:0,onOnClose:s[1]||(s[1]=C=>e.isShowSwapSetting=!1)})):j("",!0)])}const Hn=Me(Dn,[["render",jn],["__scopeId","data-v-41ba3d57"]]),En=He({components:{AutoPoolApyTips:Ko},setup(){const e=fo(),s=y(()=>e),z=Qe(),E=y(()=>z),N=no(),S=y(()=>N),u=y(()=>s.value.theme),k=Ze(),p=I();Ie(()=>[S.value.positionInfoObj,k.params.id],([g,f])=>{g&&!Je(g)&&f&&(p.value=g[f])},{immediate:!0,deep:!0});const C=y(()=>{var g;return(g=p.value)==null?void 0:g.needReverse}),t=g=>{var f;return(g==null?void 0:g.logoURI)||(g==null?void 0:g.logo_url)||((f=E.value.tokensObj[g==null?void 0:g.address])==null?void 0:f.logo_url)||(u.value==="default"?Ke("/image/coins/unknown.png"):Ke("/image/coins/sui-unknown.png"))},b=y(()=>{var g;return(g=p==null?void 0:p.value)==null?void 0:g.poolUSD}),n=y(()=>{var g,f;return S.value.apyObj&&((f=S.value.apyObj[(g=p.value)==null?void 0:g.id])==null?void 0:f.apr)||"--"}),r=y(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-info.vue:399 ~ apyObj ~ autoPool.value.apyObj:",S.value.apyObj),S.value.apyObj)),d=y(()=>s.value.currentExplorer),c=y(()=>S.value.autoPoolLoading);return{positionInfo:p,needReverse:C,getCoinIcon:t,tvl:b,apy:n,addCommom:R,getExplorerUrl:Uo,currentExplorer:d,autoPoolLoading:c,apyObj:r,checkNullObj:Je}}});const Xe=e=>(Ee("data-v-d995b4cc"),e=e(),We(),e),Wn={class:"auto-pool-v2-info"},Xn={class:"pool-info"},zn={class:"left"},Gn={class:"coin-a"},Yn={alt:""},Jn={class:"coin-b"},Kn={alt:""},Zn={class:"position-name"},Qn={key:0,class:"pool-fee"},xn=Xe(()=>o("span",null,"Fee tier",-1)),et={key:1,class:"vault-address"},ot=["href"],nt=Xe(()=>o("span",null,"Vault Address",-1)),tt=Xe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),st=[nt,tt],at={class:"apy-and-tvl"},it={class:"apy"},lt=Xe(()=>o("div",{class:"apy-title"},"APY",-1)),ut={key:0,class:"apy-text"},rt={class:"reward-coin"},dt=Xe(()=>o("div",{class:"reward"},"Rewards",-1)),vt={class:"right"},mt={alt:""},pt={class:"tvl"},ct=Xe(()=>o("div",{class:"tvl-title"},"TVL",-1)),ft={key:0,class:"tvl-text"},yt={class:"pool-info h5-pool-info"},gt={class:"left"},bt={class:"coin-a"},kt={alt:""},ht={class:"coin-b"},_t={alt:""},$t={class:"position-name"},It={key:0,class:"pool-fee"},wt=Xe(()=>o("span",null,"Fee tier",-1)),Ct={class:"left"},At={class:"vault-address"},Pt=["href"],St=Xe(()=>o("span",null,"Vault Address",-1)),Tt=Xe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Rt=[St,Tt],qt={class:"apy-and-tvl"},Nt={class:"apy"},Lt=Xe(()=>o("div",{class:"apy-title"},"APY",-1)),Bt={key:0,class:"apy-text"},Dt={class:"reward-coin"},Ot=Xe(()=>o("div",{class:"reward"},"Rewards",-1)),Ut={class:"right"},Mt={alt:""},Ft={class:"tvl"},Vt=Xe(()=>o("div",{class:"tvl-title"},"TVL",-1)),jt={key:0,class:"tvl-text"};function Ht(e,s,z,E,N,S){var b,n,r,d,c,g,f,_,L,M,V,G,ae,h,$,W,X,K,ie,H,Y,se,ue,ve,q,A,U,be,ce,w,oe,Pe,Ce,Te,Fe,Oe,he,Ve,Re,so,uo,xe,qe,ao,ro,vo;const u=yo,k=Io,p=Ko,C=Xo,t=$o("image");return a(),m("div",Wn,[o("div",Xn,[o("div",zn,[o("div",Gn,[_e(o("img",Yn,null,512),[[t,e.needReverse?e.getCoinIcon((n=e.positionInfo)==null?void 0:n.token_b):e.getCoinIcon((b=e.positionInfo)==null?void 0:b.token_a)]]),F(u,{address:e.needReverse?(g=(c=e.positionInfo)==null?void 0:c.token_b)==null?void 0:g.address:(d=(r=e.positionInfo)==null?void 0:r.token_a)==null?void 0:d.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Jn,[_e(o("img",Kn,null,512),[[t,e.needReverse?e.getCoinIcon((_=e.positionInfo)==null?void 0:_.token_a):e.getCoinIcon((f=e.positionInfo)==null?void 0:f.token_b)]]),F(u,{address:e.needReverse?(G=(V=e.positionInfo)==null?void 0:V.token_a)==null?void 0:G.address:(M=(L=e.positionInfo)==null?void 0:L.token_b)==null?void 0:M.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Zn,[e.autoPoolLoading?(a(),D(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m(we,{key:0},[pe(i(e.needReverse?(h=(ae=e.positionInfo)==null?void 0:ae.token_b)==null?void 0:h.symbol:(W=($=e.positionInfo)==null?void 0:$.token_a)==null?void 0:W.symbol)+" - "+i(e.needReverse?(K=(X=e.positionInfo)==null?void 0:X.token_a)==null?void 0:K.symbol:(H=(ie=e.positionInfo)==null?void 0:ie.token_b)==null?void 0:H.symbol),1)],64))]),(Y=e.positionInfo)!=null&&Y.fee?(a(),m("div",Qn,[xn,pe(" "+i(((se=e.positionInfo)==null?void 0:se.fee)*100)+"% ",1)])):j("",!0),e.autoPoolLoading?j("",!0):(a(),m("div",et,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:T(Uo))(e.currentExplorer,"poolAddress",(ue=e.positionInfo)==null?void 0:ue.id),target:"_blank"},st,8,ot)]))]),o("div",at,[o("div",it,[lt,e.autoPoolLoading?(a(),D(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m("div",ut,[pe(i(e.apy)+" ",1),F(p)]))]),o("div",rt,[dt,e.autoPoolLoading?(a(),D(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),D(C,{key:0,"overlay-class-name":"reward-coin-tips"},{title:te(()=>[pe("Rewards will be auto harvested and compounded to your position.")]),default:te(()=>{var ze;return[o("div",vt,[(a(!0),m(we,null,Po((ze=e.positionInfo)==null?void 0:ze.rewardList,je=>(a(),m("div",{key:je,class:"coin-a"},[_e(o("img",mt,null,512),[[t,e.getCoinIcon({address:je})]]),F(u,{address:je,"style-params":{width:"8px",height:"8px",right:"0px",bottom:"0px"}},null,8,["address"])]))),128))])]}),_:1}))]),o("div",pt,[ct,e.tvl?(a(),m("div",ft,"$"+i(("addCommom"in e?e.addCommom:T(R))(e.tvl,2)),1)):(a(),D(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1}))])])]),o("div",yt,[o("div",gt,[o("div",bt,[_e(o("img",kt,null,512),[[t,e.needReverse?e.getCoinIcon((q=e.positionInfo)==null?void 0:q.token_b):e.getCoinIcon((ve=e.positionInfo)==null?void 0:ve.token_a)]]),F(u,{address:e.needReverse?(ce=(be=e.positionInfo)==null?void 0:be.token_b)==null?void 0:ce.address:(U=(A=e.positionInfo)==null?void 0:A.token_a)==null?void 0:U.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",ht,[_e(o("img",_t,null,512),[[t,e.needReverse?e.getCoinIcon((oe=e.positionInfo)==null?void 0:oe.token_a):e.getCoinIcon((w=e.positionInfo)==null?void 0:w.token_b)]]),F(u,{address:e.needReverse?(Fe=(Te=e.positionInfo)==null?void 0:Te.token_a)==null?void 0:Fe.address:(Ce=(Pe=e.positionInfo)==null?void 0:Pe.token_b)==null?void 0:Ce.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",$t,i(e.needReverse?(he=(Oe=e.positionInfo)==null?void 0:Oe.token_b)==null?void 0:he.symbol:(Re=(Ve=e.positionInfo)==null?void 0:Ve.token_a)==null?void 0:Re.symbol)+" - "+i(e.needReverse?(uo=(so=e.positionInfo)==null?void 0:so.token_a)==null?void 0:uo.symbol:(qe=(xe=e.positionInfo)==null?void 0:xe.token_b)==null?void 0:qe.symbol),1),(ao=e.positionInfo)!=null&&ao.fee?(a(),m("div",It,[wt,pe(" "+i(((ro=e.positionInfo)==null?void 0:ro.fee)*100)+"% ",1)])):j("",!0)]),o("div",Ct,[o("div",At,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:T(Uo))(e.currentExplorer,"poolAddress",(vo=e.positionInfo)==null?void 0:vo.id),target:"_blank"},Rt,8,Pt)])]),o("div",qt,[o("div",Nt,[Lt,e.autoPoolLoading?(a(),D(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m("div",Bt,[pe(i(e.apy)+" ",1),F(p)]))]),o("div",Dt,[Ot,e.autoPoolLoading?(a(),D(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),D(C,{key:0,"overlay-class-name":"reward-coin-tips"},{title:te(()=>[pe("Rewards will be auto harvested and compounded to your position.")]),default:te(()=>{var ze;return[o("div",Ut,[(a(!0),m(we,null,Po((ze=e.positionInfo)==null?void 0:ze.rewardList,je=>(a(),m("div",{key:je,class:"coin-a"},[_e(o("img",Mt,null,512),[[t,e.getCoinIcon({address:je})]]),F(u,{address:je,"style-params":{width:"8px",height:"8px",right:"0px",bottom:"0px"}},null,8,["address"])]))),128))])]}),_:1}))]),o("div",Ft,[Vt,e.tvl?(a(),m("div",jt,"$"+i(("addCommom"in e?e.addCommom:T(R))(e.tvl,2)),1)):(a(),D(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1}))])])])])}const en=Me(En,[["render",Ht],["__scopeId","data-v-d995b4cc"]]),Et=He({components:{Slider:zo},setup(){const e=I(!0),s=Qe(),z=y(()=>s),E=no(),N=y(()=>E),S=Ze(),u=I();Ie(()=>[N.value.positionInfoObj,S.params.id],([n,r])=>{n&&!Je(n)&&r&&(u.value=n[r])},{immediate:!0,deep:!0});const k=y(()=>{var n;return(n=u.value)==null?void 0:n.needReverse}),p=n=>{var r;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((r=z.value.tokensObj[n==null?void 0:n.address])==null?void 0:r.logo_url)||Ke("/image/coins/sui-unknown.png")},C=y(()=>{var g,f,_,L,M,V,G;const n=e.value?((g=u.value)==null?void 0:g.minPrice)&&B(u==null?void 0:u.value.minPrice,6):((f=u.value)==null?void 0:f.maxPrice)&&B(1/(u==null?void 0:u.value.maxPrice),6),r=e.value?((_=u.value)==null?void 0:_.maxPrice)&&B((L=u.value)==null?void 0:L.maxPrice,6):((M=u.value)==null?void 0:M.minPrice)&&B(1/(u==null?void 0:u.value.minPrice),6),d=(k.value?!e.value:e.value)?B((V=u.value)==null?void 0:V.price,6):B(1/((G=u.value)==null?void 0:G.price),6);let c={};return c[n]={label:"Min Price"},c[r]={label:"Max Price"},d>n&&d<r?c[d]={label:"Current Price"}:d<n?c[Number(n)+1e-9]={label:"Current Price"}:d>r&&(c[Number(r)-1e-9]={label:"Current Price"}),c}),t=y(()=>{var r,d;return(k.value?!e.value:e.value)?Se((r=u.value)==null?void 0:r.price,6):Se(1/((d=u.value)==null?void 0:d.price),6)}),b=y(()=>{var r,d;return(k.value?!e.value:e.value)?Se((r=u.value)==null?void 0:r.price,6):Se(1/((d=u.value)==null?void 0:d.price),6)});return{direct:e,positionInfo:u,needReverse:k,getCoinIcon:p,decimalUi:Se,addCommom:R,sFixD:B,marks:C,currentPrice:t,currentPriceResever:b}}});const qo=e=>(Ee("data-v-35756a66"),e=e(),We(),e),Wt={class:"v2-position-range"},Xt={class:"position-range-top"},zt=qo(()=>o("div",null,"Position Range",-1)),Gt={class:"base-coin"},Yt={key:0},Jt={alt:""},Kt={key:1},Zt={alt:""},Qt={key:2},xt={key:3},es=qo(()=>o("p",null,"Base coin",-1)),os={class:"coin-rate"},ns=qo(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),ts=qo(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ss=[ns,ts],as={class:"position-range-bottom"},is={class:"price-range"},ls={class:"price-range-bg"},us={key:0,class:"min-price"},rs={key:0},ds={key:1},vs={key:1,class:"max-price"},ms={key:0},ps={key:1},cs={key:0,class:"min-price"},fs={key:0},ys={key:1},gs={key:1,class:"max-price"},bs={key:0},ks={key:1};function hs(e,s,z,E,N,S){var C,t,b,n,r,d,c,g,f,_,L,M,V,G,ae,h,$,W,X,K,ie,H,Y,se,ue,ve,q,A;const u=yo,k=oo("Slider"),p=$o("image");return a(),m("div",Wt,[o("div",Xt,[zt,o("div",Gt,[e.needReverse?(a(),m("div",Kt,[_e(o("img",Zt,null,512),[[p,e.direct?e.getCoinIcon((g=e.positionInfo)==null?void 0:g.token_b):e.getCoinIcon((c=e.positionInfo)==null?void 0:c.token_a)]]),F(u,{address:e.direct?(M=(L=e.positionInfo)==null?void 0:L.token_b)==null?void 0:M.address:(_=(f=e.positionInfo)==null?void 0:f.token_a)==null?void 0:_.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(a(),m("div",Yt,[_e(o("img",Jt,null,512),[[p,e.direct?e.getCoinIcon((C=e.positionInfo)==null?void 0:C.token_a):e.getCoinIcon((t=e.positionInfo)==null?void 0:t.token_b)]]),F(u,{address:e.direct?(n=(b=e.positionInfo)==null?void 0:b.token_a)==null?void 0:n.address:(d=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:d.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),e.needReverse?(a(),m("span",xt,i(e.direct?(W=($=e.positionInfo)==null?void 0:$.token_b)==null?void 0:W.symbol:(K=(X=e.positionInfo)==null?void 0:X.token_a)==null?void 0:K.symbol),1)):(a(),m("span",Qt,i(e.direct?(G=(V=e.positionInfo)==null?void 0:V.token_a)==null?void 0:G.symbol:(h=(ae=e.positionInfo)==null?void 0:ae.token_b)==null?void 0:h.symbol),1)),es,o("div",os,[o("div",{onClick:s[0]||(s[0]=U=>e.direct=!e.direct)},ss)])])]),o("div",as,[o("div",is,[o("div",ls,[e.direct?(a(),D(k,{key:0,value:e.currentPrice,class:$e(["position-slider",e.currentPrice<Number(("sFixD"in e?e.sFixD:T(B))((ie=e.positionInfo)==null?void 0:ie.minPrice,6))||e.currentPrice>Number(("sFixD"in e?e.sFixD:T(B))((H=e.positionInfo)==null?void 0:H.maxPrice,6))?"hide-handler":""]),step:null,marks:e.marks,disabled:!0,min:Number(("decimalUi"in e?e.decimalUi:T(Se))((Y=e.positionInfo)==null?void 0:Y.minPrice,6)),max:Number(("decimalUi"in e?e.decimalUi:T(Se))((se=e.positionInfo)==null?void 0:se.maxPrice,6))},{mark:te(({label:U})=>{var be,ce,w,oe,Pe,Ce,Te,Fe,Oe,he,Ve,Re;return[U=="Min Price"?(a(),m("div",us,[o("div",null,i(U),1),e.direct?(a(),m("div",rs,i(((be=e.positionInfo)==null?void 0:be.minPrice)&&("sFixD"in e?e.sFixD:T(B))((ce=e.positionInfo)==null?void 0:ce.minPrice,6)),1)):(a(),m("div",ds,i(((w=e.positionInfo)==null?void 0:w.maxPrice)&&("sFixD"in e?e.sFixD:T(B))(1/((oe=e.positionInfo)==null?void 0:oe.maxPrice),6)),1))])):j("",!0),U=="Max Price"?(a(),m("div",vs,[o("div",null,i(U),1),e.direct?(a(),m("div",ms,i(((Pe=e.positionInfo)==null?void 0:Pe.maxPrice)&&("sFixD"in e?e.sFixD:T(B))((Ce=e.positionInfo)==null?void 0:Ce.maxPrice,6)),1)):(a(),m("div",ps,i(((Te=e.positionInfo)==null?void 0:Te.minPrice)&&("sFixD"in e?e.sFixD:T(B))(1/((Fe=e.positionInfo)==null?void 0:Fe.minPrice),6)),1))])):j("",!0),U=="Current Price"?(a(),m("div",{key:2,class:$e(["current-price",e.currentPrice<Number(("sFixD"in e?e.sFixD:T(B))((Oe=e.positionInfo)==null?void 0:Oe.minPrice,6))?"current-price-left":e.currentPrice>Number(("sFixD"in e?e.sFixD:T(B))((he=e.positionInfo)==null?void 0:he.maxPrice,6))?"current-price-right":""])},[o("div",null,i(U),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(a(),m(we,{key:0},[pe(i(("addCommom"in e?e.addCommom:T(R))(("decimalUi"in e?e.decimalUi:T(Se))((Ve=e.positionInfo)==null?void 0:Ve.price,6))),1)],64)):(a(),m(we,{key:1},[pe(i(("addCommom"in e?e.addCommom:T(R))(("decimalUi"in e?e.decimalUi:T(Se))(1/((Re=e.positionInfo)==null?void 0:Re.price),6))),1)],64))])],2)):j("",!0)]}),_:1},8,["value","class","marks","min","max"])):(a(),D(k,{key:1,value:e.currentPriceResever,class:$e(["position-slider",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:T(B))(1/((ue=e.positionInfo)==null?void 0:ue.maxPrice),6))||e.currentPriceResever>Number(("sFixD"in e?e.sFixD:T(B))(1/((ve=e.positionInfo)==null?void 0:ve.minPrice),6))?"hide-handler":""]),step:null,min:Number(("decimalUi"in e?e.decimalUi:T(Se))(1/((q=e.positionInfo)==null?void 0:q.maxPrice),6)),max:Number(("decimalUi"in e?e.decimalUi:T(Se))(1/((A=e.positionInfo)==null?void 0:A.minPrice),6)),marks:e.marks,disabled:!0},{mark:te(({label:U})=>{var be,ce,w,oe,Pe,Ce,Te,Fe,Oe,he,Ve,Re;return[U=="Min Price"?(a(),m("div",cs,[o("div",null,i(U),1),e.direct?(a(),m("div",fs,i(((be=e.positionInfo)==null?void 0:be.minPrice)&&("sFixD"in e?e.sFixD:T(B))((ce=e.positionInfo)==null?void 0:ce.minPrice,6)),1)):(a(),m("div",ys,i(((w=e.positionInfo)==null?void 0:w.maxPrice)&&("sFixD"in e?e.sFixD:T(B))(1/((oe=e.positionInfo)==null?void 0:oe.maxPrice),6)),1))])):j("",!0),U=="Max Price"?(a(),m("div",gs,[o("div",null,i(U),1),e.direct?(a(),m("div",bs,i(((Pe=e.positionInfo)==null?void 0:Pe.maxPrice)&&("sFixD"in e?e.sFixD:T(B))((Ce=e.positionInfo)==null?void 0:Ce.maxPrice,6)),1)):(a(),m("div",ks,i(((Te=e.positionInfo)==null?void 0:Te.minPrice)&&("sFixD"in e?e.sFixD:T(B))(1/((Fe=e.positionInfo)==null?void 0:Fe.minPrice),6)),1))])):j("",!0),U=="Current Price"?(a(),m("div",{key:2,class:$e(["current-price current-price-direct",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:T(B))(1/((Oe=e.positionInfo)==null?void 0:Oe.maxPrice),6))?"current-price-left":e.currentPriceResever>Number(("sFixD"in e?e.sFixD:T(B))(1/((he=e.positionInfo)==null?void 0:he.minPrice),6))?"current-price-right":""])},[o("div",null,i(U),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(a(),m(we,{key:0},[pe(i(("addCommom"in e?e.addCommom:T(R))(("decimalUi"in e?e.decimalUi:T(Se))((Ve=e.positionInfo)==null?void 0:Ve.price,6))),1)],64)):(a(),m(we,{key:1},[pe(i(("addCommom"in e?e.addCommom:T(R))(("decimalUi"in e?e.decimalUi:T(Se))(1/((Re=e.positionInfo)==null?void 0:Re.price),6))),1)],64))])],2)):j("",!0)]}),_:1},8,["value","class","min","max","marks"]))])])])])}const on=Me(Et,[["render",hs],["__scopeId","data-v-35756a66"]]),_s=He({components:{Modal:So},props:{positionInfo:{type:Object,default:()=>({})}},setup(e){const s=y(()=>{var E,N;const z=Math.ceil(((E=e.positionInfo)==null?void 0:E.poolUSD)/((N=e.positionInfo)==null?void 0:N.quoteUSD)*100);return Number(z)});return{sFixD:B,addCommom:R,ratio:s}}});const jo=e=>(Ee("data-v-766b1627"),e=e(),We(),e),$s=jo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Is={class:"deposit-slider"},ws={class:"info-block"},Cs=jo(()=>o("div",{class:"leabl"},"Current Depositï¼š",-1)),As={class:"text"},Ps={class:"info-block"},Ss=jo(()=>o("div",{class:"leabl"},"Max Capacityï¼š",-1)),Ts={class:"text"};function Rs(e,s,z,E,N,S){const u=oo("Modal");return a(),D(u,{width:"440px",visible:!0,footer:null,title:"Vault Capacity",onCancel:s[0]||(s[0]=k=>e.$emit("onClose"))},{closeIcon:te(()=>[$s]),default:te(()=>{var k,p,C,t;return[o("div",Is,[o("div",{class:"current-deposit",style:Oo({width:`${e.ratio>100?100:e.ratio}%`})},null,4)]),o("div",ws,[Cs,o("div",As,i(("addCommom"in e?e.addCommom:T(R))(("sFixD"in e?e.sFixD:T(B))((k=e.positionInfo)==null?void 0:k.currentDeposit,2)))+" "+i((p=e.positionInfo)==null?void 0:p.quoteCoinInfo.symbol),1)]),o("div",Ps,[Ss,o("div",Ts,i(("addCommom"in e?e.addCommom:T(R))(("sFixD"in e?e.sFixD:T(B))((C=e.positionInfo)==null?void 0:C.quoteUSD,2)))+" "+i((t=e.positionInfo)==null?void 0:t.quoteCoinInfo.symbol),1)])]}),_:1})}const nn=Me(_s,[["render",Rs],["__scopeId","data-v-766b1627"]]),qs=He({components:{AutoPoolV2PoolCapacity:nn},setup(){const e=Qe(),s=y(()=>e),z=no(),E=y(()=>z),N=Ze(),S=I();Ie(()=>[E.value.positionInfoObj,N.params.id],([t,b])=>{t&&!Je(t)&&b&&(S.value=t[b])},{immediate:!0,deep:!0});const u=y(()=>{var t;return(t=S.value)==null?void 0:t.needReverse}),k=t=>{var b;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((b=s.value.tokensObj[t==null?void 0:t.address])==null?void 0:b.logo_url)||Ke("/image/coins/sui-unknown.png")},p=y(()=>E.value.autoPoolLoading),C=I(!1);return{needReverse:u,positionInfo:S,getCoinIcon:k,addCommom:R,isShowModal:C,autoPoolLoading:p}}});const Ns=e=>(Ee("data-v-ead86b7d"),e=e(),We(),e),Ls={class:"pool-composition"},Bs={class:"pool-composition-top"},Ds=Ns(()=>o("span",null,"Vault Composition",-1)),Os={class:"pool-composition-bottom"},Us={class:"token-ratio"},Ms={class:"before-coin"},Fs={alt:""},Vs={class:"after-coin"},js={alt:""},Hs={class:"token-num"},Es={class:"num-box"},Ws={class:"num-box"};function Xs(e,s,z,E,N,S){var t,b,n,r,d,c,g,f,_,L,M,V,G,ae,h,$,W,X,K,ie,H,Y,se,ue,ve,q,A,U,be;const u=yo,k=Io,p=nn,C=$o("image");return a(),m("div",Ls,[o("div",Bs,[Ds,Number((t=e.positionInfo)==null?void 0:t.quoteUSD)>0?(a(),m("div",{key:0,class:"pool-capacity",onClick:s[0]||(s[0]=ce=>e.isShowModal=!0)},"Vault Capacity")):j("",!0)]),o("div",Os,[o("div",Us,[o("div",Ms,[o("div",null,[F(u,{address:e.needReverse?(d=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:d.address:(n=(b=e.positionInfo)==null?void 0:b.token_a)==null?void 0:n.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),_e(o("img",Fs,null,512),[[C,e.needReverse?e.getCoinIcon((g=e.positionInfo)==null?void 0:g.token_b):e.getCoinIcon((c=e.positionInfo)==null?void 0:c.token_a)]])]),o("span",null,[e.autoPoolLoading?(a(),D(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m(we,{key:0},[pe(i((f=e.positionInfo)==null?void 0:f.poolCoinARatio)+"% ",1)],64))])]),o("div",Vs,[o("span",null,[e.autoPoolLoading?(a(),D(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m(we,{key:0},[pe(i((_=e.positionInfo)==null?void 0:_.poolCoinBRatio)+"% ",1)],64))]),o("div",null,[_e(o("img",js,null,512),[[C,e.needReverse?e.getCoinIcon((M=e.positionInfo)==null?void 0:M.token_a):e.getCoinIcon((L=e.positionInfo)==null?void 0:L.token_b)]]),F(u,{address:e.needReverse?(h=(ae=e.positionInfo)==null?void 0:ae.token_a)==null?void 0:h.address:(G=(V=e.positionInfo)==null?void 0:V.token_b)==null?void 0:G.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),o("div",Hs,[o("div",{class:"token-a-bg",style:Oo({width:`${($=e.positionInfo)==null?void 0:$.poolCoinARatio}%`})},null,4),o("div",{class:"token-b-bg",style:Oo({width:`${(W=e.positionInfo)==null?void 0:W.poolCoinBRatio}%`})},null,4),o("div",Es,[e.autoPoolLoading?(a(),D(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m(we,{key:0},[o("div",null,i(("addCommom"in e?e.addCommom:T(R))((X=e.positionInfo)==null?void 0:X.poolCoinANum))+" "+i(e.needReverse?(Y=(H=e.positionInfo)==null?void 0:H.token_b)==null?void 0:Y.symbol:(ie=(K=e.positionInfo)==null?void 0:K.token_a)==null?void 0:ie.symbol),1),o("div",null,"$"+i(("addCommom"in e?e.addCommom:T(R))((se=e.positionInfo)==null?void 0:se.poolCoinAUSD)),1)],64))]),o("div",Ws,[e.autoPoolLoading?(a(),D(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m(we,{key:0},[o("div",null,i(("addCommom"in e?e.addCommom:T(R))((ue=e.positionInfo)==null?void 0:ue.poolCoinBNum))+" "+i(e.needReverse?(U=(A=e.positionInfo)==null?void 0:A.token_a)==null?void 0:U.symbol:(q=(ve=e.positionInfo)==null?void 0:ve.token_b)==null?void 0:q.symbol),1),o("div",null,"$"+i(("addCommom"in e?e.addCommom:T(R))((be=e.positionInfo)==null?void 0:be.poolCoinBUSD)),1)],64))])])]),e.isShowModal?(a(),D(p,{key:0,"position-info":e.positionInfo,onOnClose:s[1]||(s[1]=ce=>e.isShowModal=!1)},null,8,["position-info"])):j("",!0)])}const tn=Me(qs,[["render",Xs],["__scopeId","data-v-ead86b7d"]]),zs=He({setup(){const e=Qe(),s=y(()=>e),z=no(),E=y(()=>z),N=Ze(),S=I();Ie(()=>[E.value.positionInfoObj,N.params.id],([b,n])=>{b&&!Je(b)&&n&&(S.value=b[n])},{immediate:!0,deep:!0});const u=y(()=>{var b;return(b=S.value)==null?void 0:b.needReverse}),k=b=>{var n;return(b==null?void 0:b.logoURI)||(b==null?void 0:b.logo_url)||((n=s.value.tokensObj[b==null?void 0:b.address])==null?void 0:n.logo_url)||Ke("/image/coins/sui-unknown.png")},p=Ro(),C=y(()=>p),t=y(()=>E.value.autoPoolLoading);return{needReverse:u,positionInfo:S,getCoinIcon:k,addCommom:R,wallet:C,autoPoolLoading:t}}});const wo=e=>(Ee("data-v-3cde2b77"),e=e(),We(),e),Gs={class:"my-liquidity"},Ys={class:"my-liquidity-top"},Js=wo(()=>o("div",null,"My Liquidity",-1)),Ks=wo(()=>o("p",null,"My share of pool",-1)),Zs={class:"my-liquidity-bottom"},Qs={class:"lp-token"},xs=wo(()=>o("div",null,[o("span",null,"LP Token BalanceÂ ")],-1)),ea={class:"lp-balance"},oa={class:"token-num-content"},na={class:"token-num token-a-num"},ta={class:"logo"},sa=["src"],aa={class:"text"},ia={class:"lp-logo"},la=["src"],ua=wo(()=>o("div",null,"Pooled Assets",-1)),ra={class:"token-num"},da={class:"logo"},va=["src"],ma={class:"text"},pa=wo(()=>o("div",{class:"token-num-content-bg"},null,-1));function ca(e,s,z,E,N,S){var p,C,t,b,n,r,d,c,g,f,_,L,M,V,G,ae,h,$,W,X,K,ie,H,Y,se,ue,ve,q,A;const u=Io,k=yo;return a(),m("div",Gs,[o("div",Ys,[Js,o("div",null,[Ks,o("p",null,[e.autoPoolLoading?(a(),D(u,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m(we,{key:0},[pe(i(e.wallet.connected?(p=e.positionInfo)==null?void 0:p.myShare:"--")+"%",1)],64))])])]),o("div",Zs,[o("div",Qs,[xs,o("div",null,[e.autoPoolLoading?(a(),D(u,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m(we,{key:0},[o("span",ea,i(e.wallet.connected?("addCommom"in e?e.addCommom:T(R))((C=e.positionInfo)==null?void 0:C.myLiquidity):"--")+" LP",1),o("span",null,i(e.wallet.connected?((t=e.positionInfo)==null?void 0:t.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in e?e.addCommom:T(R))((b=e.positionInfo)==null?void 0:b.myLiquidityUSD)}`:"<$0.01":"--"),1)],64))])]),o("div",oa,[o("div",na,[o("div",ta,[o("img",{src:e.needReverse?e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_b):e.getCoinIcon((n=e.positionInfo)==null?void 0:n.token_a),alt:""},null,8,sa),F(k,{address:e.needReverse?(f=(g=e.positionInfo)==null?void 0:g.token_b)==null?void 0:f.address:(c=(d=e.positionInfo)==null?void 0:d.token_a)==null?void 0:c.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),o("div",aa,[e.autoPoolLoading?(a(),D(u,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m(we,{key:0},[o("div",null,i(e.wallet.connected?("addCommom"in e?e.addCommom:T(R))((_=e.positionInfo)==null?void 0:_.amountA):"--")+" "+i(e.needReverse?(G=(V=e.positionInfo)==null?void 0:V.token_b)==null?void 0:G.symbol:(M=(L=e.positionInfo)==null?void 0:L.token_a)==null?void 0:M.symbol),1),o("div",null,i(e.wallet.connected?("addCommom"in e?e.addCommom:T(R))((ae=e.positionInfo)==null?void 0:ae.myAmountAUSD):"--"),1)],64))])]),o("div",ia,[o("img",{src:e.getCoinIcon((h=e.positionInfo)==null?void 0:h.lpInfo),alt:""},null,8,la),ua]),o("div",ra,[o("div",da,[o("img",{src:e.needReverse?e.getCoinIcon((W=e.positionInfo)==null?void 0:W.token_a):e.getCoinIcon(($=e.positionInfo)==null?void 0:$.token_b),alt:""},null,8,va),F(k,{address:e.needReverse?(H=(ie=e.positionInfo)==null?void 0:ie.token_a)==null?void 0:H.address:(K=(X=e.positionInfo)==null?void 0:X.token_b)==null?void 0:K.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),o("div",ma,[e.autoPoolLoading?(a(),D(u,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m(we,{key:0},[o("div",null,i(e.wallet.connected?("addCommom"in e?e.addCommom:T(R))((Y=e.positionInfo)==null?void 0:Y.amountB):"--")+" "+i(e.needReverse?(q=(ve=e.positionInfo)==null?void 0:ve.token_a)==null?void 0:q.symbol:(ue=(se=e.positionInfo)==null?void 0:se.token_b)==null?void 0:ue.symbol),1),o("div",null,i(e.wallet.connected?("addCommom"in e?e.addCommom:T(R))((A=e.positionInfo)==null?void 0:A.myAmountBUSD):"--"),1)],64))])]),pa])])])}const sn=Me(zs,[["render",ca],["__scopeId","data-v-3cde2b77"]]),fa=He({components:{Modal:So},props:{poolInfo:{type:Object,default:()=>({})},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},totalAmount:{type:String,default:""},shareOfPool:{type:String,default:""},minimumReceivedLP:{type:String,default:""},isOnlyA:{type:Boolean,default:!1},isOnlyB:{type:Boolean,default:!1}},setup(e,s){const{t:z}=ho(),E=y(()=>{var n,r,d;return((n=e==null?void 0:e.poolInfo)==null?void 0:n.needReverse)||((d=(r=e==null?void 0:e.poolInfo)==null?void 0:r.poolInfo)==null?void 0:d.needReverse)}),N=Qe(),S=y(()=>N),u=fo(),k=y(()=>u),p=n=>{var r;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((r=S.value.tokensObj[n==null?void 0:n.address])==null?void 0:r.logo_url)||(k.value.theme==="default"?Ke("/image/coins/unknown.png"):Ke("/image/coins/sui-unknown.png"))},C=Ze(),t=I(!1);return{needReverse:E,getCoinIcon:p,addCommom:R,t:z,route:C,checked:t,decimalUi:Se,clickSubmit:()=>{s.emit("toAdd")}}}});const No=e=>(Ee("data-v-9d7ef3bf"),e=e(),We(),e),ya=No(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ga={class:"modal-content"},ba={class:"pool-info"},ka={class:"left"},ha={alt:""},_a={alt:""},$a={class:"pool-name"},Ia={class:"right"},wa={class:"coin-info"},Ca={key:0,class:"from-coin-info"},Aa={class:"left"},Pa={class:"coin-amount"},Sa={class:"coin-symbol"},Ta={class:"right"},Ra={key:1,class:"to-coin-info"},qa={class:"left"},Na={class:"coin-amount"},La={class:"coin-symbol"},Ba={class:"right"},Da={key:0,class:"to-swap-logo"},Oa={class:"add-info"},Ua={class:"total-amount"},Ma=No(()=>o("span",null,"Total Amount",-1)),Fa={class:"total-amount"},Va=No(()=>o("span",null,"Share of Pool",-1)),ja={key:0,class:"total-amount"},Ha=No(()=>o("span",null,"Minimum Received LP",-1));function Ea(e,s,z,E,N,S){const u=yo,k=_o,p=oo("Modal"),C=$o("image");return a(),D(p,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:s[0]||(s[0]=t=>e.$emit("onClose"))},{closeIcon:te(()=>[ya]),default:te(()=>{var t,b,n,r,d,c,g,f,_,L,M,V,G,ae,h,$,W,X,K,ie,H,Y,se,ue;return[o("div",ga,[o("div",ba,[o("div",ka,[o("div",null,[_e(o("img",ha,null,512),[[C,e.needReverse?(r=(n=e.poolInfo)==null?void 0:n.token_b)==null?void 0:r.logo_url:(b=(t=e.poolInfo)==null?void 0:t.token_a)==null?void 0:b.logo_url]]),F(u,{address:e.needReverse?(f=(g=e.poolInfo)==null?void 0:g.token_b)==null?void 0:f.address:(c=(d=e.poolInfo)==null?void 0:d.token_a)==null?void 0:c.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),o("div",null,[_e(o("img",_a,null,512),[[C,e.needReverse?(V=(M=e.poolInfo)==null?void 0:M.token_a)==null?void 0:V.logo_url:(L=(_=e.poolInfo)==null?void 0:_.token_b)==null?void 0:L.logo_url]]),F(u,{address:e.needReverse?($=(h=e.poolInfo)==null?void 0:h.token_a)==null?void 0:$.address:(ae=(G=e.poolInfo)==null?void 0:G.token_b)==null?void 0:ae.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),o("div",$a,[o("span",null,i(e.needReverse?(ie=(K=e.poolInfo)==null?void 0:K.token_b)==null?void 0:ie.symbol:(X=(W=e.poolInfo)==null?void 0:W.token_a)==null?void 0:X.symbol),1),pe(" - "),o("span",null,i(e.needReverse?(ue=(se=e.poolInfo)==null?void 0:se.token_a)==null?void 0:ue.symbol:(Y=(H=e.poolInfo)==null?void 0:H.token_b)==null?void 0:Y.symbol),1)])]),o("div",Ia,[pe(" Fee tier "),o("span",null,i(e.poolInfo&&e.poolInfo.fee*100)+"%",1)])]),o("div",wa,[e.isOnlyA||!e.isOnlyA&&!e.isOnlyB?(a(),m("div",Ca,[o("div",Aa,[o("div",Pa,i(("addCommom"in e?e.addCommom:T(R))(e.fromCoinAmount)||0),1),o("div",Sa,i(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",Ta,[_e(o("img",null,null,512),[[C,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),F(u,{address:e.fromCoin&&e.fromCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])])])):j("",!0),e.isOnlyB||!e.isOnlyA&&!e.isOnlyB?(a(),m("div",Ra,[o("div",qa,[o("div",Na,i(("addCommom"in e?e.addCommom:T(R))(e.toCoinAmount)||0),1),o("div",La,i(e.toCoin&&e.toCoin.symbol),1)]),o("div",Ba,[_e(o("img",null,null,512),[[C,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),F(u,{address:e.toCoin&&e.toCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),!e.isOnlyA&&!e.isOnlyB?(a(),m("div",Da)):j("",!0)])):j("",!0)]),o("div",Oa,[o("div",Ua,[Ma,o("span",null,i(Number(e.totalAmount)>0&&Number(e.totalAmount)<.01?"<$0.01":`$${("addCommom"in e?e.addCommom:T(R))(e.totalAmount,2)}`),1)]),o("div",Fa,[Va,o("span",null,i(e.shareOfPool)+"%",1)]),e.minimumReceivedLP?(a(),m("div",ja,[Ha,o("span",null,i(("addCommom"in e?e.addCommom:T(R))(e.minimumReceivedLP))+" "+i(e.fromCoin.symbol)+"-"+i(e.toCoin.symbol),1)])):j("",!0)])]),F(k,{class:"big-btn liquidity-btn",onClick:e.clickSubmit},{default:te(()=>[pe(" Add Liquidity ")]),_:1},8,["onClick"])]}),_:1})}const an=Me(fa,[["render",Ea],["__scopeId","data-v-9d7ef3bf"]]),Wa=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const Xa={},ln=e=>(Ee("data-v-fcbc716b"),e=e(),We(),e),za={class:"status"},Ga=ln(()=>o("img",{src:Wa,alt:""},null,-1)),Ya=ln(()=>o("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),Ja=[Ga,Ya];function Ka(e,s){return a(),m("div",za,Ja)}const un=Me(Xa,[["render",Ka],["__scopeId","data-v-fcbc716b"]]),Za=He({components:{AutoPoolAddModal:an,AutoPoolV2PoolStatus:un},setup(){const e=Ro(),s=I(!1),z=fo(),E=y(()=>z),N=y(()=>E.value.chainName),S=y(()=>e),u=no(),k=y(()=>u),p=Qe(),C=y(()=>p),t=I(),b=Ze(),n=I(!1),r=I(!1);Ie(()=>[k.value.positionInfoObj,b.params.id],([P,x])=>{P&&!Je(P)&&x&&(t.value=P[x])},{immediate:!0,deep:!0});const d=y(()=>{var P;return(P=t.value)==null?void 0:P.needReverse}),c=I(),g=I(),f=I(),_=I(),L=I(!0),M=y(()=>S.value.assets&&c.value&&S.value.assets[c.value.address]?Wo(S.value.assets[c.value.address].balance,c.value.decimals):0),V=y(()=>S.value.assets&&g.value&&S.value.assets[g.value.address]?Wo(S.value.assets[g.value.address].balance,g.value.decimals):0),G=P=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:358 ~ maxBtnSelect ~ maxBtnSelect:",c.value.symbol=="SUI",g.value.symbol=="SUI",P),P==="fromCoin"?(L.value=!0,f.value=M.value>0?c.value.symbol=="SUI"?new v(Number(M.value)).sub(new v(.05)).lt(new v(0))?"0":new v(Number(M.value)).sub(new v(.5)).toString():String(M.value):""):(L.value=!1,_.value=V.value>0?g.value.symbol=="SUI"?new v(Number(V.value)).sub(new v(.05)).lt(new v(0))?"0":new v(Number(V.value)).sub(new v(.5)).toString():String(V.value):"")},ae=P=>{P==="fromCoin"?(L.value=!0,f.value=M.value>0?B(new v(Number(M.value)).div(2).toString(),c.value.decimals).toString():""):(L.value=!1,_.value=V.value>0?B(new v(Number(V.value)).div(2).toString(),g.value.decimals).toString():"")},h=y(()=>N.value?Jo(N.value):{}),$=y(()=>k.value.slippage),W=I("--"),X=I("--"),K=P=>{const x=new v(t.value.autoPoolPositionInfo.liquidity),ke=new v(P.toString());if(x.toNumber()>0&&ke.toNumber()>0){const Z=ke.add(x),l=ke.div(Z).mul(100).toNumber(),O=$n(l),le=O==-1?2:O+2,Q=B(ke.div(Z).mul(100).toNumber(),le),re=new v(1).div(new v(Math.pow(10,t.value.lpInfo.decimals))).toString();Number(Q)<Number(re)?W.value=`<${re}`:W.value=Q}else ke.toNumber()>0&&x.toNumber()<=0?W.value="100":W.value="--"},ie=P=>{if(t.value.total_supply==0){X.value="";return}new v(P.toString());const x=new v($.value).div(100),ke=Mo.get_lp_amount_by_liquidity({liquidity:t.value.liquidity,total_supply:t.value.total_supply},P.toString()),Z=new v(Math.pow(10,t.value.lpInfo.decimals)),l=new v(ke).div(Z).toString(),O=new v(l).mul(x),le=new v(l).sub(O);X.value=B(le.toString(),t.value.decimals)},H=I(!1),Y=I(!1),se=I(""),ue=I(),ve=I(!1),q=I(!1),A=I(!1),U=I(!1),be=P=>{if(P=="Haedal")return"Haedal";if(P=="Volo")return"Volo";if(P=="aftermath")return"Aftermath"},ce=async()=>{if(!t.value)return;if(t.value.supportHaedalStake&&U.value&&_.value<10){q.value=!0;return}r.value=!1,ve.value=!0;const P=t.value.autoPoolPositionInfo.tick_lower_index,x=t.value.autoPoolPositionInfo.tick_upper_index,ke=Ye.sqrtPriceX64ToTickIndex(new ge(t.value.current_sqrt_price));Ye.tickIndexToSqrtPriceX64(P),Ye.tickIndexToSqrtPriceX64(x),ke<P&&(d.value?H.value=!0:Y.value=!0),ke>x&&(d.value?Y.value=!0:H.value=!0);let Z;if(f.value||_.value){L.value?Z=new v(f.value).mul(Math.pow(10,c.value.decimals)).toString():Z=new v(_.value).mul(Math.pow(10,g.value.decimals)).toString();let l,O=L.value;if(A.value||U.value){const me=new v(1);if(new v(Z).lte(me))return r.value=!0,!1;console.log("1106###calculateDepositSwapAmount###params###",{lowerTick:P,upperTick:x,curSqrtPrice:new ge(t.value.current_sqrt_price),fix_amount_a:O,input_amount:Z,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,clmm_pool:t.value.address,slippage:Number($.value)/100,decimals:A.value?c.value.decimals:g.value.decimals,use_Haedal_stake:t.value.supportHaedalStake&&U.value,shouldRequestStake:!1});let ee;try{ee=await ao.calculateDepositSwapAmount({lowerTick:P,upperTick:x,curSqrtPrice:new ge(t.value.current_sqrt_price),fix_amount_a:O,input_amount:Z,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,clmm_pool:t.value.address,slippage:Number($.value)/100,decimals:A.value?c.value.decimals:g.value.decimals,request_id:Z,stakeProtocol:t.value.supportHaedalStake&&(U.value&&!t.value.isTokenA||A.value&&t.value.isTokenA)?t.value.stakeProtocol:"",shouldRequestStake:!1})}catch(J){console.log("calculateDepositSwapAmount",J)}if(ee=="HaedalStakeSuiAmountError"){n.value=!1,q.value=!0;return}else if(ee){if(ee.request_id!==Z)return;q.value=!1,n.value=t.value.supportHaedalStake?!1:ee.is_exceed,l=new ge(ee.afterSqrtPrice),Z=ee.fixAmountA===O?new ge(new v(Z).sub(ee.swapInAmount).toString()):new ge(ee.swapOutAmount),ue.value={swap_amount:ee.swapInAmount,route_obj:ee.route_obj,a2b:O,input_amount:Z,stakeProtocol:ee.stake_protocol},O=ee.fixAmountA;const J=t.value.token_a.decimals,ne=t.value.token_b.decimals,Ne=new v(ee.swapInAmount).div(new v(Math.pow(10,J))).toString(),ye=B(new v(ee.swapOutAmountLimit).div(new v(Math.pow(10,ne))).toString(),ne),Ae=d.value?t.value.token_b.symbol:t.value.token_a.symbol,Le=d.value?t.value.token_a.symbol:t.value.token_b.symbol,Be=`By depositing ${R(A.value?f.value:_.value)} ${A.value?Ae:Le},
            ${R(Ne)} ${A.value?Ae:Le}  will be traded for ${R(ye)} ${A.value?Le:Ae} and then added to the pool together.`,De=`By depositing ${R(_.value)} ${Le}, ${R(ye)} ${Le} will be converted to ${Ae} via ${be(t.value.stakeProtocol)} 
            liquid staking and added to the pool together.`;se.value=t.value.supportHaedalStake&&U.value?De:Be}else l=t.value.current_sqrt_price,Z=new ge(Z)}else n.value=!1,l=t.value.current_sqrt_price,Z=new ge(Z),se.value="";let le,Q,re;const de=h.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:c.value,tokenB:g.value,lowerTick:P,upperTick:x,coinAmount:Z,iscoinA:O,roundUp:!0,slippage:Number($.value)/100,curSqrtPrice:new ge(l)});le=de.liquidityAmount,Q=de.tokenMaxA,re=de.tokenMaxB,!A.value&&!U.value&&(L.value?_.value=Number(re)>0?re:"":f.value=Number(Q)>0?Q:""),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:734 ~ updateAmounts ~ liquidityAmount:",le.toString),K(le),ie(le),ve.value=!1}};Ie(()=>t.value,P=>{P&&!Je(P)&&(c.value=P==null?void 0:P.token_a,g.value=P==null?void 0:P.token_b,H.value=!1,Y.value=!1,ce())},{immediate:!0});const w=y(()=>C.value.RATES),oe=y(()=>{var P,x,ke,Z,l,O,le,Q;if((x=w.value[(P=c.value)==null?void 0:P.address])!=null&&x.price&&((Z=w.value[(ke=g.value)==null?void 0:ke.address])!=null&&Z.price)){const re=new v(f.value||0).mul(new v((O=w.value[(l=c.value)==null?void 0:l.address])==null?void 0:O.price)),de=new v(_.value||0).mul(new v((Q=w.value[(le=g.value)==null?void 0:le.address])==null?void 0:Q.price));return re.add(de).toString()}else return"--"});Ie(()=>f.value,ko((P,x)=>{P?ce():(W.value="--",_.value="",X.value="--")},500),{immediate:!0}),Ie(()=>_.value,ko((P,x)=>{P?ce():(f.value="",W.value="--",X.value="--")},500),{immediate:!0});const{t:Pe,locale:Ce}=ho(),Te=y(()=>{var P,x;if(A.value||U.value){const ke=A.value?f.value:_.value,Z=A.value?c.value:g.value;if((P=w.value[Z==null?void 0:Z.address])!=null&&P.price)return new v(ke||0).mul(new v((x=w.value[Z==null?void 0:Z.address])==null?void 0:x.price)).toNumber()}return 0}),Fe=y(()=>{const P=Number(f.value)>Number(M.value),x=Number(_.value)>Number(V.value);return!f.value&&!_.value?Pe("button.enterAmount"):t.value.supportHaedalStake&&U.value&&_.value<10?"Minimum deposit 10 SUI":P?Pe("button.insufficientBalance",{name:c.value.symbol}):x?Pe("button.insufficientBalance",{name:g.value.symbol}):n.value?Pe("button.insufficientLiquidity"):Number(t.value.remainingTokenUSD)!==0&&Number(t.value.quoteUSD)>0&&Number(oe.value)>Number(t.value.remainingTokenUSD)?"Exceeded the max capacity":r.value?Pe("button.enterAmount"):"Add Liquidity"}),Oe=y(()=>{const P=Number(f.value)>Number(M.value),x=Number(_.value)>Number(V.value);return!!(!f.value&&!_.value||P||x||f.value<=0&&_.value<=0||n.value||ze.value!=="STATUS_RUNNING"||Number(t.value.remainingTokenUSD)!==0&&Number(t.value.quoteUSD)>0&&Number(oe.value)>Number(t.value.remainingTokenUSD)||r.value||t.value.supportHaedalStake&&!U.value&&Te.value>1e4||!t.value.supportHaedalStake&&Te.value>1e4||q.value||t.value.supportHaedalStake&&U.value&&_.value<10)}),he=I(!1),{setIsShowSuccess:Ve,setIsShowRejected:Re,setIsShowWaiting:so,setTransactionDesc:uo,setTransactionTxid:xe,setPositiomNum:qe}=z,ao=Yo("Sui"),ro=async()=>{var re,de,me,ee;s.value=!1,he.value=!0,xe("");const P=`${R(f.value)} ${(re=c.value)==null?void 0:re.symbol}`,x=`${R(_.value)} ${(de=g.value)==null?void 0:de.symbol}`;uo(`Deposit ${f.value>0?P:""} ${_.value>0&&f.value>0?"and":""} ${_.value>0?x:""}`),so(!0);const ke=L.value,Z=t.value.autoPoolPositionInfo.tick_lower_index,l=t.value.autoPoolPositionInfo.tick_upper_index,O=Ye.sqrtPriceX64ToTickIndex(new ge(t.value.current_sqrt_price));let le;L.value?le=new v(f.value).mul(Math.pow(10,c.value.decimals)).toString():le=new v(_.value).mul(Math.pow(10,g.value.decimals)).toString();const Q=(ee=(me=t==null?void 0:t.value)==null?void 0:me.rewarderInfo)==null?void 0:ee.map(J=>J.coinAddress);try{const J={lowerTick:Z,upperTick:l,coinAmount:le,fix_amount_a:ke,slippage:Number($.value)/100,curSqrtPrice:new ge(t.value.current_sqrt_price),id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:Q,swapParams:ue.value,isOnlyA:A.value,isOnlyB:U.value,currentTickIndex:O,decimal_b:t.value.coinB.decimals,request_id:le,stakeProtocol:t.value.supportHaedalStake&&(U.value&&!t.value.isTokenA||A.value&&t.value.isTokenA)?t.value.stakeProtocol:"",shouldRequestStake:t.value.supportHaedalStake&&U.value,farming_pool:t.value.autoPoolPositionInfo.pool_id};console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:854 ~ toAdd ~ params.positionInfo.value.supportHaedalStake&&isOnlyB.value:",t.value.supportHaedalStake&&U.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:1027 ~ toAdd ~ params:",J);const ne=await ao.deposit(J);console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:858 ~ toAdd ~ payload:",ne);const Ne=await h.value.signAndExecuteTransactionBlock(S.value.currentWallet,ne);let ye=h.value.handleTx(Ne);if(console.log("toAdd###tx###",ye),ye&&ye.hash){xe(ye.hash),so(!1),Ve(!0);const Ae={title:"Supplied",desc:`Deposit ${f.value>0?P:""} ${_.value>0&&f.value>0?"and":""} ${_.value>0?x:""}`,hash:ye.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${f.value>0?P:""} ${_.value>0&&f.value>0?"and":""} ${_.value>0?x:""}`,isOnlyToken:A.value||U.value,isOnlyTokenInfo:A.value?c.value:g.value};N.value!=="Aptos"&&(Ae.res=ye.res),h.value.showTransitionPending(Ae),await h.value.watchTransaction(Ae)&&setTimeout(()=>{u.updatePositionItem(t.value.id),h.value.getAccount(S.value.address)},1e3),qe()}else so(!1),Re(!0);f.value="",_.value="",he.value=!1}catch(J){f.value="",_.value="",console.log("addError###",J),he.value=!1,so(!1),Re(!0)}},vo=P=>{f.value="",_.value="",se.value="",q.value=!1,P=="only-a-b"?(A.value=!1,U.value=!1):P=="only-a"?(A.value=!0,U.value=!1):(U.value=!0,A.value=!1)},ze=y(()=>k.value.currentAutoPoolStatus),je=I(),Lo=()=>{je.value=window.setInterval(()=>{(f.value||_.value)&&ce()},2e4)};To(()=>{Lo()}),Fo(()=>{window.clearInterval(je.value)});const Bo=yn(gn,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),fe="You can also choose to deposit in only one asset type. In that case,the vault will convert your asset to the required propositions using Cetus.Please note that trading fees & slippage will be applied. When slippage is involved,a certain amount of post-swap dust (no loss of funds) will be returned to you.",go=y(()=>`When you deposit in only SUI tokens, a part of your SUI amount will be converted to ${c.value.symbol} via ${be(t.value.stakeProtocol)} liquid staking services to match required liquidity compositions of the liquidity pool on Cetus. A certain amount of dust (no loss of funds) will be returned to you if slippage is involved.`),Do=y(()=>k.value.autoPoolLoading);return{currentAutoPoolStatus:ze,wallet:S,positionInfo:t,isShowAddModal:s,needReverse:d,fromCoin:c,toCoin:g,fromCoinAmount:f,toCoinAmount:_,fromCoinBlance:M,toCoinBlance:V,fixedFromCoin:L,maxBtnSelect:G,halfBtnSelect:ae,totalAmountUSD:oe,addCommom:R,shareOfPool:W,minimumReceivedLP:X,addLiquidityBtnText:Fe,addLiquidityBtnDisabled:Oe,toAdd:ro,showToCoinLock:Y,showFromCoinLock:H,isOnlyA:A,isOnlyB:U,onlyToken:vo,onlyText:se,onlyTokenUSD:Te,calculateLoading:ve,indicator:Bo,depositTokenTips:fe,depositHaedalTokenTips:go,loading:he,autoPoolLoading:Do}}});const to=e=>(Ee("data-v-bcd7f964"),e=e(),We(),e),Qa={class:"auto-pool-add"},xa={class:"auto-pool-add-content"},ei={class:"liquidity-action-tab"},oi=to(()=>o("div",{class:"increase tab-active"},"Add",-1)),ni={class:"only-token"},ti=to(()=>o("div",null,"Deposit Amounts",-1)),si={key:0},ai=to(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),ii=to(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),li={key:0,class:"card-item"},ui={key:1,class:"card-item"},ri=to(()=>o("span",null,"Pool Closed",-1)),di={key:0,class:"add-info"},vi={key:0,class:"only-text"},mi={class:"total-amount"},pi=to(()=>o("span",null,"Total Amount",-1)),ci={key:0},fi={class:"total-amount"},yi=to(()=>o("span",null,"Share of Pool",-1)),gi={key:0},bi={key:1,class:"total-amount"},ki=to(()=>o("span",null,"Minimum Received LP",-1)),hi={key:0},_i={key:1,class:"add-info only-add-info"},$i=to(()=>o("div",{class:"only-text"}," Single-asset deposit can't be higher than $10,000 at a time. ",-1)),Ii=[$i];function wi(e,s,z,E,N,S){var r,d,c,g,f,_,L,M,V,G,ae,h,$,W,X,K,ie,H,Y,se,ue,ve,q;const u=Xo,k=Zo,p=Qo,C=oo("AutoPoolV2PoolStatus"),t=_o,b=Io,n=an;return a(),m("div",Qa,[o("div",xa,[o("div",ei,[oi,o("div",{class:"remove",onClick:s[0]||(s[0]=Go(A=>e.$emit("changeCurrentTab"),["stop"]))},"Remove")]),o("div",ni,[ti,e.autoPoolLoading?j("",!0):(a(),m("div",si,[o("div",{class:$e(["only-a-b",!e.isOnlyA&&!e.isOnlyB?"active-only":""]),onClick:s[1]||(s[1]=A=>e.onlyToken("only-a-b"))},[o("span",null,i(e.needReverse?(g=(c=e.positionInfo)==null?void 0:c.token_b)==null?void 0:g.symbol:(d=(r=e.positionInfo)==null?void 0:r.token_a)==null?void 0:d.symbol)+" + "+i(e.needReverse?(M=(L=e.positionInfo)==null?void 0:L.token_a)==null?void 0:M.symbol:(_=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:_.symbol),1)],2),o("div",{class:$e(["only-a",e.isOnlyA?"active-only":""]),onClick:s[2]||(s[2]=A=>e.onlyToken("only-a"))},[o("span",null,i(e.needReverse?(h=(ae=e.positionInfo)==null?void 0:ae.token_b)==null?void 0:h.symbol:(G=(V=e.positionInfo)==null?void 0:V.token_a)==null?void 0:G.symbol)+" only",1),F(u,{placement:"bottom","arrow-point-at-center":""},{title:te(()=>[o("span",null,i(e.depositTokenTips),1)]),default:te(()=>[ai]),_:1})],2),o("div",{class:$e(["only-b",e.isOnlyB?"active-only":""]),onClick:s[3]||(s[3]=A=>e.onlyToken("only-b"))},[o("span",null,i(e.needReverse?(K=(X=e.positionInfo)==null?void 0:X.token_a)==null?void 0:K.symbol:(W=($=e.positionInfo)==null?void 0:$.token_b)==null?void 0:W.symbol)+" only",1),F(u,{placement:"bottom","arrow-point-at-center":""},{title:te(()=>[o("span",null,i(e.positionInfo.supportHaedalStake?e.depositHaedalTokenTips:e.depositTokenTips),1)]),default:te(()=>[ii]),_:1})],2)]))]),o("div",{class:$e(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(a(),m("div",li,[F(k,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":s[4]||(s[4]=A=>e.fromCoinAmount=A),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:s[5]||(s[5]=A=>e.maxBtnSelect("fromCoin")),onOnHalf:s[6]||(s[6]=A=>e.halfBtnSelect("fromCoin")),onOnInput:s[7]||(s[7]=A=>{e.fromCoinAmount=A}),onOnFocus:s[8]||(s[8]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.isOnlyA?(a(),D(p,{key:0})):j("",!0)])):j("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(a(),m("div",ui,[F(k,{modelValue:e.toCoinAmount,"onUpdate:modelValue":s[9]||(s[9]=A=>e.toCoinAmount=A),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:s[10]||(s[10]=A=>e.maxBtnSelect("toCoin")),onOnHalf:s[11]||(s[11]=A=>e.halfBtnSelect("toCoin")),onOnInput:s[12]||(s[12]=A=>{e.toCoinAmount=A}),onOnFocus:s[13]||(s[13]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.isOnlyB?(a(),D(p,{key:0})):j("",!0)])):j("",!0)],2)]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(a(),D(C,{key:0})):j("",!0),(ie=e.positionInfo)!=null&&ie.is_pause?(a(),D(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:te(()=>[ri]),_:1})):e.wallet.connected?(a(),D(t,{key:2,class:"big-btn liquidity-btn",disabled:e.loading||e.addLiquidityBtnDisabled,loading:e.loading,onClick:s[14]||(s[14]=A=>e.isShowAddModal=!0)},{default:te(()=>[o("span",null,i(e.addLiquidityBtnText),1)]),_:1},8,["disabled","loading"])):(a(),D(t,{key:3,class:"big-btn liquidity-btn",onClick:s[15]||(s[15]=A=>e.wallet.setIsShowWalletModal(!0))},{default:te(()=>[o("span",null,i(e.$t("button.connectWallet")),1)]),_:1})),(((H=e.positionInfo)==null?void 0:H.quoteUSD)==0||Number((Y=e.positionInfo)==null?void 0:Y.remainingTokenUSD)>Number(e.totalAmountUSD))&&(Number(e.fromCoinAmount)>0||Number(e.toCoinAmount)>0)?(a(),m(we,{key:4},[e.positionInfo.supportHaedalStake&&e.isOnlyB||e.onlyTokenUSD<=1e4?(a(),m("div",di,[e.onlyText&&(e.isOnlyA&&e.fromCoinAmount>0||e.isOnlyB&&e.toCoinAmount>0)?(a(),m("div",vi,i(e.onlyText),1)):j("",!0),o("div",mi,[pi,e.calculateLoading?(a(),D(b,{key:1,paragraph:!1,active:""})):(a(),m("span",ci,i(Number(e.totalAmountUSD)>0&&Number(e.totalAmountUSD)<.01?"<$0.01":`$${("addCommom"in e?e.addCommom:T(R))(e.totalAmountUSD,2)}`),1))]),o("div",fi,[yi,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(a(),m("span",gi,i(e.shareOfPool)+"%",1)):(a(),D(b,{key:1,paragraph:!1,active:""}))]),e.minimumReceivedLP?(a(),m("div",bi,[ki,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(a(),m("span",hi,i(("addCommom"in e?e.addCommom:T(R))(e.minimumReceivedLP))+" "+i(e.needReverse?(se=e.toCoin)==null?void 0:se.symbol:(ue=e.fromCoin)==null?void 0:ue.symbol)+"-"+i(e.needReverse?(ve=e.fromCoin)==null?void 0:ve.symbol:(q=e.toCoin)==null?void 0:q.symbol),1)):(a(),D(b,{key:1,paragraph:!1,active:""}))])):j("",!0)])):e.positionInfo.supportHaedalStake&&!e.isOnlyB&&e.onlyTokenUSD>1e4||!e.positionInfo.supportHaedalStake&&e.onlyTokenUSD>1e4?(a(),m("div",_i,Ii)):j("",!0)],64)):j("",!0),e.isShowAddModal?(a(),D(n,{key:5,"pool-info":e.positionInfo,"from-coin":e.needReverse?e.positionInfo.token_b:e.positionInfo.token_a,"to-coin":e.needReverse?e.positionInfo.token_a:e.positionInfo.token_b,"from-coin-amount":e.needReverse?e.toCoinAmount:e.fromCoinAmount,"to-coin-amount":e.needReverse?e.fromCoinAmount:e.toCoinAmount,"total-amount":e.totalAmountUSD,"share-of-pool":e.shareOfPool,"minimum-received-l-p":e.minimumReceivedLP,"is-only-a":e.isOnlyA,"is-only-b":e.isOnlyB,onOnClose:s[16]||(s[16]=A=>e.isShowAddModal=!1),onToAdd:e.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):j("",!0)])}const Ci=Me(Za,[["render",wi],["__scopeId","data-v-bcd7f964"]]),Ai=He({components:{Modal:So},props:{title:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"11111111111"},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},isIncrease:{type:Boolean,default:!1},fixedFromCoin:{type:Boolean,default:!0},currentPriceTab:{type:String,default:""},currentPrice:{type:String,default:""},currentPriceReverse:{type:String,default:""},showFromCoinLock:{type:Boolean,default:!1},showToCoinLock:{type:Boolean,default:!1},currentDirect:{type:Boolean,default:!0},positionTotalAmount:{type:Number,default:0},tickLower:{type:Number,default:0},tickUpper:{type:Number,default:0},isCreate:{type:Boolean,default:!1}},setup(e,s){const{t:z}=ho(),E=y(()=>{var n,r,d;return((n=e==null?void 0:e.poolInfo)==null?void 0:n.needReverse)||((d=(r=e==null?void 0:e.poolInfo)==null?void 0:r.poolInfo)==null?void 0:d.needReverse)}),N=Qe(),S=y(()=>N),u=fo(),k=y(()=>u),p=n=>{var r;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((r=S.value.tokensObj[n==null?void 0:n.address])==null?void 0:r.logo_url)||(k.value.theme==="default"?Ke("/image/coins/unknown.png"):Ke("/image/coins/sui-unknown.png"))},C=Ze(),t=I(!1);return{needReverse:E,getCoinIcon:p,addCommom:R,t:z,route:C,checked:t,decimalUi:Se,clickSubmit:()=>{s.emit("toAdd")}}}});const lo=e=>(Ee("data-v-1327bdf7"),e=e(),We(),e),Pi=lo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Si={class:"modal-content"},Ti={class:"pool-info"},Ri={class:"left"},qi={alt:""},Ni={alt:""},Li={class:"pool-name"},Bi={class:"right"},Di=lo(()=>o("div",{class:"lp-info"},[o("div",{class:"lp-num"},[o("p",null,"1,126,122.123456"),o("span",null,"USDT-USDC LP")]),o("div",{class:"lp-bg"})],-1)),Oi={class:"est-receive"},Ui=lo(()=>o("div",{class:"est-receive-title"},"Estimated Receive",-1)),Mi={class:"token-a"},Fi=lo(()=>o("div",null,"0.941824",-1)),Vi={alt:""},ji=lo(()=>o("span",null,"USDT",-1)),Hi={class:"token-a"},Ei=lo(()=>o("div",null,"0.941824",-1)),Wi={alt:""},Xi=lo(()=>o("span",null,"USDC",-1));function zi(e,s,z,E,N,S){const u=yo,k=_o,p=oo("Modal"),C=$o("image");return a(),D(p,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:s[0]||(s[0]=t=>e.$emit("onClose"))},{closeIcon:te(()=>[Pi]),default:te(()=>{var t,b,n,r,d,c,g,f,_,L,M,V,G,ae,h,$,W,X,K,ie,H,Y,se,ue;return[o("div",Si,[o("div",Ti,[o("div",Ri,[o("div",null,[_e(o("img",qi,null,512),[[C,e.needReverse?(r=(n=e.poolInfo)==null?void 0:n.token_b)==null?void 0:r.logo_url:(b=(t=e.poolInfo)==null?void 0:t.token_a)==null?void 0:b.logo_url]]),F(u,{address:e.needReverse?(f=(g=e.poolInfo)==null?void 0:g.token_b)==null?void 0:f.address:(c=(d=e.poolInfo)==null?void 0:d.token_a)==null?void 0:c.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),o("div",null,[_e(o("img",Ni,null,512),[[C,e.needReverse?(V=(M=e.poolInfo)==null?void 0:M.token_a)==null?void 0:V.logo_url:(L=(_=e.poolInfo)==null?void 0:_.token_b)==null?void 0:L.logo_url]]),F(u,{address:e.needReverse?($=(h=e.poolInfo)==null?void 0:h.token_a)==null?void 0:$.address:(ae=(G=e.poolInfo)==null?void 0:G.token_b)==null?void 0:ae.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),o("div",Li,[o("span",null,i(e.needReverse?(ie=(K=e.poolInfo)==null?void 0:K.token_b)==null?void 0:ie.symbol:(X=(W=e.poolInfo)==null?void 0:W.token_a)==null?void 0:X.symbol),1),pe(" - "),o("span",null,i(e.needReverse?(ue=(se=e.poolInfo)==null?void 0:se.token_a)==null?void 0:ue.symbol:(Y=(H=e.poolInfo)==null?void 0:H.token_b)==null?void 0:Y.symbol),1)])]),o("div",Bi,[pe(" Fee tier "),o("span",null,i(e.poolInfo&&e.poolInfo.fee*100)+"%",1)])]),Di,o("div",Oi,[Ui,o("div",Mi,[Fi,o("div",null,[_e(o("img",Vi,null,512),[[C,"1"]]),ji])]),o("div",Hi,[Ei,o("div",null,[_e(o("img",Wi,null,512),[[C,"1"]]),Xi])])])]),F(k,{class:"big-btn liquidity-btn",onClick:e.clickSubmit},{default:te(()=>[pe(i(e.isIncrease?"Increase Liquidity":e.title==e.$t("button.addLiquidity")?"Add Liquidity":"Create and Add Liquidity"),1)]),_:1},8,["onClick"])]}),_:1})}const rn=Me(Ai,[["render",zi],["__scopeId","data-v-1327bdf7"]]),Gi=He({components:{AutoPoolRemoveModal:rn,AutoPoolV2PoolStatus:un},setup(){const e=Ro(),s=y(()=>e),z=fo(),E=y(()=>z),N=y(()=>b.value.slippage),S=y(()=>E.value.chainName),u=In();y(()=>u);const k=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],p=I(25),C=Ze(),t=no(),b=y(()=>t),n=y(()=>b.value.positionInfoObj[C.params.id]),r=y(()=>{var l;return(l=n.value)==null?void 0:l.needReverse}),d=I(),c=I(),g=I(!1),f=I(),_=y(()=>{var l;return(l=n.value)==null?void 0:l.myLiquidity}),L=I(!0),M=y(()=>S.value?Jo(S.value):{}),V=I(),G=I(),ae=Yo("Sui"),h=I(""),$=I(""),W=I("--"),X=I(!1),K=I(!1),ie=I(),H=I(!0),Y=I(),se=Qe(),ue=y(()=>se),ve=y(()=>ue.value.RATES),q=I(!1),A=async()=>{if(L.value||!n.value||n.value.positionLiquidity==0)return;G.value=!1,q.value=!0;const l=n.value.autoPoolPositionInfo.tick_lower_index,O=n.value.autoPoolPositionInfo.tick_upper_index,le=Ye.sqrtPriceX64ToTickIndex(new ge(n.value.current_sqrt_price));le<l&&(r.value?X.value=!0:K.value=!0),le>O&&(r.value?K.value=!0:X.value=!0);let Q;if(h.value||$.value){H.value?(Q=new v(h.value).mul(Math.pow(10,d.value.decimals)).toString(),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:368 ~ updateAmounts ~ coinAmount:",Q,h.value)):(Q=new v($.value).mul(Math.pow(10,c.value.decimals)).toString(),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:374 ~ updateAmounts ~ coinAmount:",Q));let re,de=H.value;if(w.value||oe.value){w.value?Number(h.value)/Number(fe.value):Number($.value)/Number(fe.value);const ne=await ae.calculateRemoveSwapAmount({lowerTick:l,upperTick:O,curSqrtPrice:new ge(n.value.current_sqrt_price),fix_amount_a:de,receiveAmount:Q,coinTypeA:n.value.autoPoolPositionInfo.coinTypeA,coinTypeB:n.value.autoPoolPositionInfo.coinTypeB,clmm_pool:n.value.address,slippage:Number(N.value)/100,decimals:w.value?d.value.decimals:c.value.decimals,liquidity:h.value==fe.value||$.value==fe.value?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:Q});if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:362 ~ updateAmounts ~ swapResult:",ne),ne){if(ne.request_id!==Q)return;V.value=ne.is_exceed,Q=new ge(ne.swapOutAmount),re=n.value.current_sqrt_price,ie.value={swap_amount:ne.swapInAmount,liquidity:ne.liquidity,a2b:!de,route_obj:ne.route_obj},de=!de;const Ne=n.value.token_a.decimals,ye=n.value.token_b.decimals,Ae=new v(ne.swapInAmount).div(new v(Math.pow(10,Ne))).toString(),Le=B(new v(ne.swapOutAmountLimit).div(new v(Math.pow(10,ye))).toString(),ye),Be=r.value?n.value.token_b.symbol:n.value.token_a.symbol,De=r.value?n.value.token_a.symbol:n.value.token_b.symbol;Y.value=h.value==fe.value||$.value==fe.value?`To withdraw ${R(w.value?h.value:$.value)} ${w.value?Be:De},
                  ${R(w.value?n.value.amountB:n.value.amountA)} ${w.value?De:Be}
                   in the pool will be traded for ${Ae} ${w.value?Be:De}`:`To withdraw ${R(w.value?h.value:$.value)} ${w.value?Be:De},
                  ${R(Ae)} ${w.value?De:Be}  in the pool will be traded for ${R(Le)} ${w.value?Be:De}`}else{G.value=!0,Y.value="";return}}else V.value=!1,re=n.value.current_sqrt_price,Q=new ge(Q);const{liquidityAmount:me,tokenMaxA:ee,tokenMaxB:J}=M.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:d.value,tokenB:c.value,lowerTick:l,upperTick:O,coinAmount:Q,iscoinA:de,roundUp:!1,slippage:Number(N.value)/100,curSqrtPrice:new ge(re)});if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:484 ~ updateAmounts ~ coinAmount:",Q.toString()),!w.value&&!oe.value&&(H.value?$.value=Number(J)>0?J:"":h.value=Number(ee)>0?ee:""),(w.value||oe.value)&&(Number(h.value)>=Number(fe.value)||Number($.value)>=Number(fe.value))){f.value=n.value.myLiquidity;const ne=new v(100);W.value=new v(n.value.myLiquidity).mul(new v(Math.pow(10,n.value.lpInfo.decimals))).toString(),U.value=me.toString(),p.value=ne.toNumber()}else{const ne=Mo.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},me.toString()),Ne=new v(ne).div(new v(Math.pow(10,n.value.lpInfo.decimals))).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:518 ~ updateAmounts ~ result:",Ne);const ye=new v(Ne).div(new v(_.value)).mul(100);f.value=new v(_.value).mul(B(ye.toString(),2)).div(100).toString(),W.value=ne,U.value=me.toString(),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:518 ~ updateAmounts ~ ratio:",ye.toString()),p.value=ye.toNumber()}q.value=!1}},U=I(),be=y(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountA}),ce=y(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountB}),w=I(!1),oe=I(!1),Pe=y(()=>{var de,me,ee,J;const l=((me=ve.value[(de=d==null?void 0:d.value)==null?void 0:de.address])==null?void 0:me.price)||0,O=((J=ve.value[(ee=c==null?void 0:c.value)==null?void 0:ee.address])==null?void 0:J.price)||0;let le=h.value!=="--"&&h.value!==""?h.value:0,Q=$.value!=="--"&&$.value!==""?$.value:0,re="0";return l&&O&&(w.value||oe.value?re=new v(w.value?le:Q).mul(new v(w.value?l:O)).toString():re=new v(le).mul(new v(l)).add(new v(Q).mul(new v(O))).toString()),re>0&&re<.01?"<$0.01":`$${R(B(re,2))}`}),Ce=async l=>{var Ne,ye,Ae,Le,Be,De,bo,Ge,Ao,eo,mo;if(!L.value)return;console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:798 ~ setPercent ~ setPercent:",L.value),L.value=!0,G.value=!1,(ye=(Ne=n.value)==null?void 0:Ne.token_a)==null||ye.decimals,(Le=(Ae=n.value)==null?void 0:Ae.token_b)==null||Le.decimals;const O=(Be=n.value)==null?void 0:Be.tick_lower_index,le=(De=n.value)==null?void 0:De.tick_upper_index;Ye.tickIndexToSqrtPriceX64(O),Ye.tickIndexToSqrtPriceX64(le);const Q=(Ge=(bo=n.value)==null?void 0:bo.autoPoolPositionInfo)==null?void 0:Ge.tick_lower_index,re=(eo=(Ao=n.value)==null?void 0:Ao.autoPoolPositionInfo)==null?void 0:eo.tick_upper_index,de=Ye.sqrtPriceX64ToTickIndex(new ge((mo=n==null?void 0:n.value)==null?void 0:mo.current_sqrt_price));de<Q&&(r.value?X.value=!0:K.value=!0),de>re&&(r.value?K.value=!0:X.value=!0);let me="",ee,J,ne=H.value;if(w.value||oe.value&&!X.value&&!K.value){if(w.value){const io=new v(fe.value).mul(Math.pow(10,d.value.decimals)).mul(l.value).toString();J=B(io,0),h.value=fe.value>0?B(new v(fe.value).mul(l.value).toString(),d.value.decimals):""}if(oe.value){const io=new v(fe.value).mul(l.value).mul(Math.pow(10,c.value.decimals)).toString();J=B(io,0),$.value=fe.value>0?B(new v(fe.value).mul(l.value).toString(),c.value.decimals):""}const Ue=await ae.calculateRemoveSwapAmount({lowerTick:O,upperTick:le,curSqrtPrice:new ge(n.value.current_sqrt_price),fix_amount_a:ne,receiveAmount:J,coinTypeA:n.value.autoPoolPositionInfo.coinTypeA,coinTypeB:n.value.autoPoolPositionInfo.coinTypeB,clmm_pool:n.value.address,slippage:Number(N.value)/100,decimals:w.value?d.value.decimals:c.value.decimals,liquidity:l.value==1?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:J});if(Ue){if(Ue.request_id!==J)return;V.value=Ue.is_exceed,J=new ge(Ue.swapOutAmount),n.value.current_sqrt_price,ie.value={swap_amount:Ue.swapInAmount,liquidity:Ue.liquidity,route_obj:Ue.route_obj,a2b:!ne},ne=!ne;const io=n.value.token_a.decimals,Ho=n.value.token_b.decimals,dn=new v(Ue.swapInAmount).div(new v(Math.pow(10,io))).toString(),Eo=B(new v(Ue.swapOutAmountLimit).div(new v(Math.pow(10,Ho))).toString(),Ho),po=r.value?n.value.token_b.symbol:n.value.token_a.symbol,co=r.value?n.value.token_a.symbol:n.value.token_b.symbol;Y.value=l.value==1?`To withdraw ${R(w.value?h.value:$.value)} ${w.value?po:co},
          ${R(w.value?n.value.amountB:n.value.amountA)} ${w.value?co:po}  in the pool will be traded for ${R(Eo)} ${w.value?po:co}`:`To withdraw ${R(w.value?h.value:$.value)} ${w.value?po:co},
          ${R(dn)} ${w.value?co:po}  in the pool will be traded for ${R(Eo)} ${w.value?po:co}`,me=Ue.liquidity}else n.value.current_sqrt_price,J=new ge(J),Y.value="",G.value=!0;W.value=new v(n.value.myLiquidity).mul(new v(l.value)).toString(),f.value=new v(W.value),U.value=me}else{V.value=!1;const Ue=new v(be.value).mul(Math.pow(10,d.value.decimals)).mul(l.value).toString();J=B(Ue,0),h.value=B(new v(be.value).mul(l.value).toString(),d.value.decimals);const io=new v(ce.value).mul(l.value).mul(Math.pow(10,c.value.decimals)).toString();J=B(io,0),$.value=B(new v(ce.value).mul(l.value).toString(),c.value.decimals),n.value.current_sqrt_price,J=new ge(J),l.value!==1?ee=new v(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(l.value).toString():ee=new v(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),f.value=new v(ee).div(Math.pow(10,n.value.lpInfo.decimals)),me=Mo.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},ee),W.value=B(ee,0),U.value=B(me,0)}};Ie(p,ko((l,O)=>{l!==O&&L.value&&(Number(l)>100?p.value=100:l&&n.value?(p.value=l,Ce({value:p.value/100})):(h.value="",$.value=""))},300)),Ie(()=>h.value,ko((l,O)=>{l?A():!w.value&&!oe.value&&($.value="",p.value=0)},500),{immediate:!0}),Ie(()=>$.value,ko((l,O)=>{l?A():!w.value&&!oe.value&&(h.value="",p.value=0)},500),{immediate:!0});const Te=Vo(),{setIsShowSuccess:Fe,setIsShowRejected:Oe,setIsShowWaiting:he,setTransactionDesc:Ve,setTransactionTxid:Re,setPositiomNum:so,setTransactionDescText:uo}=z,xe=I(!1),{t:qe}=ho(),ao=async()=>{var Ne,ye,Ae,Le,Be,De,bo;xe.value=!0,Re("");const l=Number(h.value)>0?`${R(h.value,d.value.decimals)} ${d.value.symbol}`:"",O=Number($.value)>0?`${R($.value,c.value.decimals)} ${c.value.symbol}`:"";Ve(qe("tips.removeLiquidiyText",{from:r.value?O:l,and:Number(h.value)>0&&Number($.value)>0?"and":"",to:r.value?l:O})),he(!0);const le=qe("modal.removeLiquidityText2");uo(le);const Q=n.value.autoPoolPositionInfo.tick_lower_index,re=n.value.autoPoolPositionInfo.tick_upper_index,de=Ye.tickIndexToSqrtPriceX64(Q),me=Ye.tickIndexToSqrtPriceX64(re),ee=(ye=(Ne=n==null?void 0:n.value)==null?void 0:Ne.rewarderInfo)==null?void 0:ye.map(Ge=>Ge.coinAddress);let J;H.value?J=new v(h.value).mul(Math.pow(10,d.value.decimals)).toString():J=new v($.value).mul(Math.pow(10,c.value.decimals)).toString();const ne={lowerSqrtPrice:de,upperSqrtPrice:me,lpTokenAmount:W.value,liquidity:U.value,curSqrtPrice:new ge(((Le=(Ae=n==null?void 0:n.value)==null?void 0:Ae.object)==null?void 0:Le.current_sqrt_price)||((Be=n==null?void 0:n.value)==null?void 0:Be.current_sqrt_price)),slippage:Number(N.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coinTypeA,coinTypeB:n.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:ee,swapParams:ie.value,fix_amount_a:H.value,isOnlyA:!X.value&&!K.value?w.value:!1,isOnlyB:!K.value&&!X.value?oe.value:!1,lowerTick:Q,upperTick:re,receiveAmount:J,sliderVal:p.value,positionInfo:n.value,maxLiquidity:n.value.positionLiquidity,farming_pool:n.value.autoPoolPositionInfo.pool_id};console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:911 ~ toRemove ~ params:",ne);try{const Ge=await ae.remove(ne),Ao=await M.value.signAndExecuteTransactionBlock(s.value.currentWallet,Ge);let eo=M.value.handleTx(Ao);if(console.log("0331###remove###tx####",eo),eo&&eo.hash){Re(eo.hash),he(!1),Fe(!0);const mo={title:qe("common.removeLiquidity"),desc:"",hash:eo.hash,descTransactions:`Remove ${l} ${Number(h.value)>0&&Number($.value)>0?"and":""} ${O} from the pool`,sender:s.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${h.value} ${(De=d.value)==null?void 0:De.symbol} and ${$.value} ${(bo=c.value)==null?void 0:bo.symbol}`};mo.res=eo.res,M.value.showTransitionPending(mo),await M.value.watchTransaction(mo)&&(h.value="",$.value="",f.value="",p.value=0,setTimeout(()=>{t.updatePositionItem(n.value.id),M.value.getAccount(s.value.address)},1e3),Number(p.value)==100&&C.name=="auto-pool-detail"&&Te.push("/vaults"))}else he(!1),Oe(!0);xe.value=!1}catch(Ge){console.log("Remove error",Ge),xe.value=!1,he(!1),Oe(!0)}};Ie(()=>n.value,(l,O)=>{l&&!Je(l)&&(d.value=l==null?void 0:l.token_a,c.value=l==null?void 0:l.token_b,(!O||O&&O.address!==l.address)&&(p.value=p.value>0?p.value:25,Ce({value:p.value/100})),O&&O.current_sqrt_price!==l.current_sqrt_price&&(L.value?Ce({value:p.value/100}):A()))},{immediate:!0});const ro=y(()=>{if(n.value.positionLiquidity==0)return"Insufficient LP Amount";const l=Number(f.value)>Number(_.value);return!h.value&&!$.value||!f.value||f.value<=0||!h.value&&w.value||!$.value&&oe.value?qe("button.enterAmount"):l?"Invalid Amount":V.value?qe("button.insufficientLiquidity"):G.value?qe("button.enterAmount"):w.value&&Number(h.value)>Number(fe.value)||oe.value&&Number($.value)>Number(fe.value)?"Invalid Amount":qe("button.remove")}),vo=y(()=>{var O;if(((O=n==null?void 0:n.value)==null?void 0:O.positionLiquidity)==0)return!0;const l=Number(f.value)>Number(_.value);return!h.value&&!$.value||Number(h.value)<=0&&w.value||Number($.value)<=0&&oe.value?!0:!f.value||f.value<=0?(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:1109 ~ removeLiquidityBtnDisabled ~ lpAmount.value:",f.value),!0):!!(l||V.value||x.value!=="STATUS_RUNNING"||G.value||w.value&&Number(h.value)>Number(fe.value)||oe.value&&Number($.value)>Number(fe.value))}),ze=l=>(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||Ke("/image/coins/sui-unknown.png"),je=l=>{h.value="",$.value="",L.value=!0,p.value=25,Y.value="",l=="only-a-b"?(w.value=!1,oe.value=!1,Ce({value:p.value/100})):l=="only-a"?(w.value=!0,oe.value=!1):(oe.value=!0,w.value=!1)},Lo=l=>{L.value=!0,p.value=100,l==="fromCoin"?H.value=!0:H.value=!1},Bo=l=>{L.value=!0,p.value=50,l==="fromCoin"?H.value=!0:H.value=!1},fe=I(),go=I(!1),Do=async()=>{go.value=!0;const l=n.value.token_a.decimals,O=n.value.token_b.decimals,le=new v(be.value).mul(new v(Math.pow(10,l))).toNumber(),Q=new v(ce.value).mul(new v(Math.pow(10,O))).toNumber(),re=w.value?Q:le;w.value?(c.value.address,n.value.token_a.address):(d.value.address,n.value.token_a.address);try{const de=await M.value.getSwapRouter(w.value?c:d,w.value?d:c,re,!0,Number(N.value)/100,"",void 0,[{pool_id:n.value.address,tick_lower:n.value.autoPoolPositionInfo.tick_lower_index,tick_upper:n.value.autoPoolPositionInfo.tick_upper_index,delta_liquidity:Number(n.value.positionLiquidity),is_increase:!1}]),me=new v(de.amountOut);fe.value=me.sub(me.mul(Number(N.value)/100)).add(new v(w.value?be.value:ce.value)).toString()}catch(de){console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:1179 ~ convertAssets ~ e:",de)}go.value=!1,Ce({value:p.value/100})};Ie(()=>[w.value,oe.value,be.value,ce.value],([l,O])=>{(l||O)&&Do()},{immediate:!0});const P=l=>`${l}%`,x=y(()=>b.value.currentAutoPoolStatus),ke=I(),Z=()=>{ke.value=window.setInterval(()=>{(h.value||$.value)&&!L.value?A():Ce({value:p.value/100})},2e4)};return To(()=>{Z()}),Fo(()=>{window.clearInterval(ke.value)}),{removeLiquidityBtnText:ro,removeLiquidityBtnDisabled:vo,wallet:s,ratioArr:k,positionInfo:n,isShowRemoveModal:g,needReverse:r,fromCoin:d,toCoin:c,lpAmount:f,lpBalance:_,sliderVal:p,sFixD:B,isSlider:L,fromCoinAmount:h,toCoinAmount:$,setPercent:Ce,toRemove:ao,addCommom:R,getCoinIcon:ze,isOnlyA:w,isOnlyB:oe,onlyToken:je,fixedFromCoin:H,maxBtnSelect:Lo,halfBtnSelect:Bo,fromCoinBlance:be,toCoinBlance:ce,showFromCoinLock:X,showToCoinLock:K,removeText:Y,onlyTokenBalance:fe,totalWithdraw:Pe,formatter:P,currentAutoPoolStatus:x,calculateLoading:q,convertAssetsLoading:go}}});const Co=e=>(Ee("data-v-0c49a40d"),e=e(),We(),e),Yi={class:"auto-pool-add"},Ji={class:"auto-pool-add-content"},Ki={class:"liquidity-action-tab"},Zi=Co(()=>o("div",{class:"remove tab-active"},"Remove",-1)),Qi={key:0,class:"only-token"},xi=Co(()=>o("div",null,"Remove Amounts",-1)),el={key:0,class:"card-item"},ol={key:1,class:"card-item"},nl={class:"remove-ratio"},tl={class:"remove-ratio-select"},sl={key:0,class:"ratio"},al={key:1,class:"ratio"},il={class:"ratio-list"},ll=["onClick"],ul=Co(()=>o("span",null,"Pool Closed",-1)),rl={key:4,class:"remove-info"},dl={key:0,class:"remove-text total-amount"},vl={class:"total-amount"},ml=Co(()=>o("span",null,"Total Withdraw",-1)),pl={key:0},cl={class:"total-amount"},fl=Co(()=>o("span",null,"LP Burn Amount",-1)),yl={key:0};function gl(e,s,z,E,N,S){var r,d,c,g,f,_,L,M,V,G,ae,h,$,W,X,K,ie,H,Y,se,ue,ve;const u=Zo,k=Qo,p=zo,C=oo("AutoPoolV2PoolStatus"),t=_o,b=Io,n=rn;return a(),m("div",Yi,[o("div",Ji,[o("div",Ki,[o("div",{class:"increase",onClick:s[0]||(s[0]=Go(q=>e.$emit("changeCurrentTab"),["stop"]))},"Add"),Zi]),!e.showFromCoinLock&&!e.showToCoinLock?(a(),m("div",Qi,[xi,o("div",null,[o("div",{class:$e(["only-a-b",!e.isOnlyA&&!e.isOnlyB?"active-only":""]),onClick:s[1]||(s[1]=q=>e.onlyToken("only-a-b"))},[o("span",null,i(e.needReverse?(g=(c=e.positionInfo)==null?void 0:c.token_b)==null?void 0:g.symbol:(d=(r=e.positionInfo)==null?void 0:r.token_a)==null?void 0:d.symbol)+" + "+i(e.needReverse?(M=(L=e.positionInfo)==null?void 0:L.token_a)==null?void 0:M.symbol:(_=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:_.symbol),1)],2),o("div",{class:$e(["only-a",e.isOnlyA?"active-only":""]),onClick:s[2]||(s[2]=q=>e.onlyToken("only-a"))},[o("span",null,i(e.needReverse?(h=(ae=e.positionInfo)==null?void 0:ae.token_b)==null?void 0:h.symbol:(G=(V=e.positionInfo)==null?void 0:V.token_a)==null?void 0:G.symbol)+" only",1)],2),o("div",{class:$e(["only-b",e.isOnlyB?"active-only":""]),onClick:s[3]||(s[3]=q=>e.onlyToken("only-b"))},[o("span",null,i(e.needReverse?(K=(X=e.positionInfo)==null?void 0:X.token_a)==null?void 0:K.symbol:(W=($=e.positionInfo)==null?void 0:$.token_b)==null?void 0:W.symbol)+" only",1)],2)])])):j("",!0),o("div",{class:$e(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(a(),m("div",el,[F(u,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":s[4]||(s[4]=q=>e.fromCoinAmount=q),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.isOnlyA?e.onlyTokenBalance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","amount-leabl":"Available","convert-assets-loading":e.convertAssetsLoading,"has-arrow":!1,onOnMax:s[5]||(s[5]=q=>e.maxBtnSelect("fromCoin")),onOnHalf:s[6]||(s[6]=q=>e.halfBtnSelect("fromCoin")),onOnInput:s[7]||(s[7]=q=>{e.isSlider=!1,e.fromCoinAmount=q}),onOnFocus:s[8]||(s[8]=()=>{e.isSlider=!1,e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","convert-assets-loading"]),e.showFromCoinLock?(a(),D(k,{key:0})):j("",!0)])):j("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(a(),m("div",ol,[F(u,{modelValue:e.toCoinAmount,"onUpdate:modelValue":s[9]||(s[9]=q=>e.toCoinAmount=q),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.isOnlyB?e.onlyTokenBalance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","convert-assets-loading":e.convertAssetsLoading,"import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:s[10]||(s[10]=q=>e.maxBtnSelect("toCoin")),onOnHalf:s[11]||(s[11]=q=>e.halfBtnSelect("toCoin")),onOnInput:s[12]||(s[12]=q=>{e.isSlider=!1,e.toCoinAmount=q}),onOnFocus:s[13]||(s[13]=()=>{e.isSlider=!1,e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","convert-assets-loading"]),e.showToCoinLock?(a(),D(k,{key:0})):j("",!0)])):j("",!0)],2),o("div",nl,[o("div",tl,[Number(e.lpBalance)>=Number(e.lpAmount)?(a(),m("div",sl,i(e.sliderVal>0&&Number(("sFixD"in e?e.sFixD:T(B))(e.sliderVal,2))<.01?"<0.01":("sFixD"in e?e.sFixD:T(B))(e.sliderVal,2))+"% ",1)):(a(),m("div",al,"--")),o("div",il,[(a(!0),m(we,null,Po(e.ratioArr,(q,A)=>(a(),m("div",{key:A,class:$e(["ratio-item",e.sliderVal==q.value?"ratio-item-active":""]),onClick:()=>{e.isSlider=!0,e.sliderVal=q.value}},i(q.name),11,ll))),128))])]),F(p,{value:e.sliderVal,"onUpdate:value":s[14]||(s[14]=q=>e.sliderVal=q),"tip-formatter":e.formatter,onChange:s[15]||(s[15]=q=>e.isSlider=!0)},null,8,["value","tip-formatter"])])]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(a(),D(C,{key:0})):j("",!0),(ie=e.positionInfo)!=null&&ie.is_pause?(a(),D(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:te(()=>[ul]),_:1})):e.wallet&&e.wallet.address?(a(),D(t,{key:2,class:"big-btn liquidity-btn",disabled:e.removeLiquidityBtnDisabled,onClick:s[16]||(s[16]=q=>e.toRemove())},{default:te(()=>[o("span",null,i(e.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(a(),D(t,{key:3,class:"big-btn liquidity-btn",onClick:s[17]||(s[17]=q=>e.wallet.setIsShowWalletModal(!0))},{default:te(()=>[o("span",null,i(e.$t("button.connectWallet")),1)]),_:1})),e.removeLiquidityBtnDisabled?j("",!0):(a(),m("div",rl,[e.removeText&&(e.isOnlyA&&Number(e.fromCoinAmount)>0||e.isOnlyB&&Number(e.toCoinAmount)>0)?(a(),m("div",dl,i(e.removeText),1)):j("",!0),o("div",vl,[ml,e.calculateLoading?(a(),D(b,{key:1,paragraph:!1,active:""})):(a(),m("span",pl,i(e.totalWithdraw),1))]),o("div",cl,[fl,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(a(),m("span",yl,i(("addCommom"in e?e.addCommom:T(R))(("sFixD"in e?e.sFixD:T(B))(e.lpAmount,(H=e.positionInfo)==null?void 0:H.decimals)))+" "+i(e.needReverse?(Y=e.toCoin)==null?void 0:Y.symbol:(se=e.fromCoin)==null?void 0:se.symbol)+"-"+i(e.needReverse?(ue=e.fromCoin)==null?void 0:ue.symbol:(ve=e.toCoin)==null?void 0:ve.symbol),1)):(a(),D(b,{key:1,paragraph:!1,active:""}))])])),e.isShowRemoveModal?(a(),D(n,{key:5,"pool-info":e.positionInfo,"from-coin":e.positionInfo.token_a,"to-coin":e.positionInfo.token_b,onOnClose:s[18]||(s[18]=q=>e.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):j("",!0)])}const bl=Me(Gi,[["render",gl],["__scopeId","data-v-0c49a40d"]]),kl=He({components:{AutoPoolV2Info:en,AutoPoolV2PositionRange:on,AutoPoolV2PoolComposition:tn,AutoPoolV2PoolLiquidity:sn,AutoPoolV2PoolAdd:Ci,AutoPoolV2PoolRemove:bl},setup(){const e=no(),s=Qe(),z=y(()=>s),E=fo(),N=y(()=>E),S=y(()=>e),u=Ze(),k=I();Ie(()=>[S.value.positionInfoObj,u.params.id],([r,d])=>{r&&!Je(r)&&d&&(k.value=r[d],console.log(k.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const p=async()=>{e.getAutoPoolAPY(),e.getVault(u.params.id,"refresh")},C=I();Ie(()=>u.query.action,r=>{r&&(C.value=r)},{immediate:!0}),To(()=>{e.getAutoPoolAPY()}),Ie(()=>[z.value.poolConfigList,S.value.autoPoolList],([r,d])=>{r&&r.length>0&&d&&d.length==0&&e.getAutoPoolList()},{immediate:!0}),y(()=>N.value.chainName),Vo();const t=Ro(),b=y(()=>t);Ie(()=>b.value.address,r=>{r||e.logout()},{immediate:!0});const n=y(()=>S.value.autoPoolLoading);return{clickRefresh:p,currentTab:C,positionInfo:k,autoPoolLoading:n}}});const hl={class:"auto-pool-detail-v2"},_l={class:"detail-top"},$l={class:"detail-bottom pc-detail"},Il={class:"detail-bottom-left"},wl={class:"detail-bottom-right"},Cl={class:"h5-detail"},Al={key:0,class:"loading-global"};function Pl(e,s,z,E,N,S){const u=Hn,k=en,p=on,C=tn,t=sn,b=oo("AutoPoolV2PoolAdd"),n=oo("AutoPoolV2PoolRemove"),r=bn;return a(),m("div",hl,[o("div",_l,[F(u,{"pool-info":e.positionInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"]),F(k)]),o("div",$l,[o("div",Il,[F(p),F(C),F(t)]),o("div",wl,[e.currentTab=="deposit"?(a(),D(b,{key:0,onChangeCurrentTab:s[0]||(s[0]=d=>e.currentTab="remove")})):(a(),D(n,{key:1,onChangeCurrentTab:s[1]||(s[1]=d=>e.currentTab="deposit")}))])]),o("div",Cl,[e.currentTab=="deposit"?(a(),D(b,{key:0,onChangeCurrentTab:s[2]||(s[2]=d=>e.currentTab="remove")})):(a(),D(n,{key:1,onChangeCurrentTab:s[3]||(s[3]=d=>e.currentTab="deposit")})),F(p),F(C),F(t)]),e.autoPoolLoading?(a(),m("div",Al,[F(r)])):j("",!0)])}const Yl=Me(kl,[["render",Pl],["__scopeId","data-v-3e4353e1"]]);export{Yl as default};
